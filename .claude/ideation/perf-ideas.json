{
  "generated_at": "2026-02-15T19:45:00.000Z",
  "scope": "apps/web",
  "ideas": [
    {
      "id": "perf-015",
      "title": "Convert large public JPG avatar images to WebP",
      "description": "The public/images/avatars directory contains 600KB of JPG images, with some files reaching 152-156KB (taylor-swift.jpg, dua-lipa.jpg). These are used in demo/marketing contexts and should be WebP for better compression.",
      "rationale": "WebP provides 25-35% better compression than JPEG at equivalent quality. Converting avatar images reduces initial page load for marketing pages and demo content.",
      "category": "bundle_size",
      "impact": "medium",
      "affected_files": [
        "apps/web/public/images/avatars/taylor-swift.jpg",
        "apps/web/public/images/avatars/dua-lipa.jpg",
        "apps/web/public/images/avatars/billie-eilish.jpg",
        "apps/web/public/images/avatars/*.jpg"
      ],
      "current_metric": "600KB total JPG images in public/images/avatars",
      "expected_improvement": "~150-200KB reduction (25-35% compression gain)",
      "implementation": "1. Convert JPG files to WebP using sharp/cwebp\n2. Update references in Storybook stories and demo components\n3. Keep originals as fallback if needed for older browsers\n4. Use Next.js Image component with automatic format selection",
      "tradeoffs": "Need to test browser compatibility (WebP supported in all modern browsers since 2020)",
      "effort": "small",
      "priority": "medium"
    },
    {
      "id": "perf-016",
      "title": "Lazy load Clerk hooks in client components",
      "description": "14 client components import useUser, useAuth, or useSession from @clerk/nextjs. Clerk is ~150KB gzipped and these hooks trigger client-side auth state hydration even when not immediately needed.",
      "rationale": "Many components import Clerk hooks but may not use them on initial render. Lazy loading or conditional imports can reduce initial bundle for unauthenticated users.",
      "category": "bundle_size",
      "impact": "low",
      "affected_files": [
        "apps/web/components/auth/forms/SignUpForm.tsx",
        "apps/web/components/auth/forms/SignInForm.tsx",
        "apps/web/components/molecules/MobileNav.tsx",
        "apps/web/components/organisms/AuthShellWrapper.tsx",
        "apps/web/hooks/useClerkSafe.tsx"
      ],
      "current_metric": "14 components with Clerk hook imports, ~150KB for @clerk/nextjs",
      "expected_improvement": "Minimal bundle reduction but improved time-to-interactive for auth flows",
      "implementation": "1. Audit which components truly need Clerk hooks on mount\n2. Consider useClerkSafe wrapper pattern already in use\n3. Move Clerk imports to deeper component tree where possible\n4. Use React.lazy for auth-only components",
      "tradeoffs": "Increased complexity, potential layout shift if auth state loads late",
      "effort": "medium",
      "priority": "low"
    },
    {
      "id": "perf-017",
      "title": "Optimize launch page - 1943 lines with heavy metadata",
      "description": "The /launch page is 1943 lines - the largest page in the app. It includes 3 JSON-LD schemas, extensive metadata generation, inline component definitions, and mock data arrays. This adds to initial parse/compile time.",
      "rationale": "Large page files increase parse time and make code splitting less effective. Extracting schemas, metadata helpers, and sub-components improves bundle granularity.",
      "category": "bundle_size",
      "impact": "medium",
      "affected_files": [
        "apps/web/app/(marketing)/launch/page.tsx"
      ],
      "current_metric": "1943 lines in single page file, 3 JSON-LD schemas inline",
      "expected_improvement": "Faster parse time, better code splitting, ~5-10% reduction in marketing bundle chunk",
      "implementation": "1. Extract JSON-LD schemas to shared/schema.ts\n2. Extract mock data (LOGOS array, feature lists) to constants file\n3. Extract inline components (MockBar, Divider) to atoms/\n4. Keep page file focused on layout and server component logic",
      "tradeoffs": "More files to maintain, but better organization and reusability",
      "effort": "small",
      "priority": "medium"
    },
    {
      "id": "perf-018",
      "title": "Add resource hints for critical third-party origins",
      "description": "The app loads resources from Clerk, Spotify CDN (i.scdn.co), Cloudinary, and other origins. No dns-prefetch or preconnect hints found in app metadata or layout files.",
      "rationale": "Resource hints (dns-prefetch, preconnect) eliminate DNS lookup and connection time for known third-party origins, saving 100-300ms per origin on first load.",
      "category": "network",
      "impact": "medium",
      "affected_files": [
        "apps/web/app/layout.tsx",
        "apps/web/app/(marketing)/layout.tsx"
      ],
      "current_metric": "No resource hints configured, ~100-300ms DNS+TLS per third-party origin",
      "expected_improvement": "200-600ms faster resource loading for users on first visit",
      "implementation": "Add to layout head:\n<link rel=\"dns-prefetch\" href=\"https://i.scdn.co\" />\n<link rel=\"dns-prefetch\" href=\"https://res.cloudinary.com\" />\n<link rel=\"preconnect\" href=\"https://api.clerk.com\" crossOrigin=\"anonymous\" />\n<link rel=\"preconnect\" href=\"https://images.clerk.dev\" crossOrigin=\"anonymous\" />",
      "tradeoffs": "Browser makes early connections that may not be used (minimal cost)",
      "effort": "trivial",
      "priority": "high"
    },
    {
      "id": "perf-019",
      "title": "Reduce client-side date operations with date-fns or native API",
      "description": "Found 106 instances of new Date() and Date.now() across 60 files in components and app routes. Many of these perform formatting, relative time calculations, or date math - operations that could benefit from tree-shakable date-fns functions.",
      "rationale": "While native Date is fast, complex date operations (formatting, timezone handling, relative time) often lead to verbose code. date-fns is tree-shakable and can reduce bundle vs moment.js alternatives. However, verify that current implementation doesn't already use date-fns.",
      "category": "bundle_size",
      "impact": "low",
      "affected_files": [
        "apps/web/components/release/ReleaseCountdown.tsx",
        "apps/web/components/dashboard/organisms/tour-dates/TourDatesTable.tsx",
        "apps/web/components/admin/table/AdminTableShell.tsx"
      ],
      "current_metric": "106 Date operations, no date-fns usage found",
      "expected_improvement": "Potentially cleaner code, but native Date is already minimal - likely no bundle savings",
      "implementation": "1. Audit date operations for complex formatting or calculations\n2. If needed, install date-fns and use specific functions (format, formatDistance, parseISO)\n3. Ensure tree-shaking works (import { format } from 'date-fns' not import * as dateFns)",
      "tradeoffs": "Adding date-fns adds ~2-4KB per function used; only worth it for complex operations",
      "effort": "medium",
      "priority": "low"
    },
    {
      "id": "perf-020",
      "title": "Optimize 588 cn() utility calls with static className where possible",
      "description": "Found 588 uses of cn() (clsx + tailwind-merge) across 261 components. Many calls have no conditional logic and merge static strings, which adds runtime overhead.",
      "rationale": "cn() is convenient but has runtime cost. Static className strings should use plain strings. Reserve cn() for dynamic/conditional classes only.",
      "category": "runtime",
      "impact": "low",
      "affected_files": [
        "apps/web/components/molecules/MobileNav.tsx (10 instances)",
        "apps/web/components/organisms/sidebar/menu.tsx (9 instances)",
        "apps/web/components/jovie/components/SuggestedProfilesCarousel.tsx (8 instances)",
        "apps/web/components/dashboard/organisms/links/ChatStyleLinkItem.tsx (8 instances)"
      ],
      "current_metric": "588 cn() calls, estimated ~100-150 could be static className",
      "expected_improvement": "Minimal runtime savings (~1-2ms total), cleaner code intent",
      "implementation": "1. Search for cn() calls with only static strings\n2. Replace with className=\"...\"\n3. Keep cn() for conditional classes or tailwind-merge conflicts\n4. Example: cn('flex gap-2') â†’ className='flex gap-2'",
      "tradeoffs": "Manual work, potential inconsistency if not done comprehensively",
      "effort": "large",
      "priority": "low"
    },
    {
      "id": "perf-021",
      "title": "Audit 124 Storybook files for production bundle leakage",
      "description": "Found 124 .stories.tsx files. While next.config.js excludes them via ignore-loader, verify that story imports and dependencies don't leak into production bundles via re-exports or shared files.",
      "rationale": "Storybook stories often import test data, fixtures, and large mock objects. If components import from story files or story files export utilities, those can leak into production.",
      "category": "bundle_size",
      "impact": "low",
      "affected_files": [
        "apps/web/components/**/*.stories.tsx (124 files)",
        "apps/web/next.config.js"
      ],
      "current_metric": "124 story files, ignore-loader configured in next.config.js",
      "expected_improvement": "Ensure zero bundle leakage (likely already clean, verification task)",
      "implementation": "1. Run bundle analyzer (ANALYZE=true pnpm build)\n2. Search for .stories references in production chunks\n3. Ensure story files don't export shared utilities (move to separate files)\n4. Verify ignore-loader is working correctly",
      "tradeoffs": "None if already clean; adds CI verification step",
      "effort": "small",
      "priority": "low"
    },
    {
      "id": "perf-022",
      "title": "Add cache-control headers for /launch/pricing static page",
      "description": "The new /launch/pricing page has revalidate=false but no specific cache-control header configuration in next.config.js headers(). It falls under the generic '/(pricing|...)' pattern with immutable cache.",
      "rationale": "Verify that /launch/pricing is included in the marketing pages cache pattern. If not, it may not get optimal caching headers.",
      "category": "caching",
      "impact": "low",
      "affected_files": [
        "apps/web/next.config.js",
        "apps/web/app/(marketing)/launch/pricing/page.tsx"
      ],
      "current_metric": "Page marked revalidate=false, but cache header pattern may not match /launch/pricing route",
      "expected_improvement": "Ensure CDN edge caching for static pricing page",
      "implementation": "1. Update next.config.js headers() to explicitly include /launch/pricing in immutable cache pattern\n2. Or verify that catch-all /(.*) properly applies to nested routes\n3. Test with curl -I to verify Cache-Control header",
      "tradeoffs": "None - static page should be cached aggressively",
      "effort": "trivial",
      "priority": "medium"
    },
    {
      "id": "perf-023",
      "title": "Parallelize independent database queries in Server Actions",
      "description": "Found only 1 instance of sequential awaits in app/actions/spotify.ts. Most async operations already use Promise.all() properly. However, Server Actions in apps/web/app/app/(shell)/dashboard/*/actions.ts should be audited for parallel query opportunities.",
      "rationale": "Sequential awaits add latency. Independent database queries should use Promise.all() for parallel execution, especially in releases/actions.ts (1148 lines) and tour-dates/actions.ts (763 lines).",
      "category": "database",
      "impact": "medium",
      "affected_files": [
        "apps/web/app/app/(shell)/dashboard/releases/actions.ts (1148 lines)",
        "apps/web/app/app/(shell)/dashboard/tour-dates/actions.ts (763 lines)",
        "apps/web/app/actions/spotify.ts"
      ],
      "current_metric": "Large Server Action files, unknown parallelization coverage",
      "expected_improvement": "10-50ms latency reduction per action with parallel queries",
      "implementation": "1. Audit Server Actions for sequential await patterns\n2. Identify independent queries (e.g., fetch user + fetch releases)\n3. Refactor to Promise.all([query1, query2])\n4. Keep sequential if queries depend on each other",
      "tradeoffs": "Increased database connection usage (within pool limits)",
      "effort": "medium",
      "priority": "medium"
    },
    {
      "id": "perf-024",
      "title": "Review 'use client' boundary placement - 442 client components",
      "description": "Found 442 files with 'use client' directive. With Next.js App Router, pushing client boundaries deeper in the tree allows more server-side rendering and smaller client bundles.",
      "rationale": "Each 'use client' boundary pulls its entire import graph into the client bundle. Server Components can fetch data without client JavaScript. Review top-level pages and layouts for unnecessary client directives.",
      "category": "bundle_size",
      "impact": "high",
      "affected_files": [
        "apps/web/app/(marketing)/launch/page.tsx (if has 'use client')",
        "apps/web/components/organisms/*.tsx (high-level components)",
        "apps/web/components/dashboard/organisms/*.tsx"
      ],
      "current_metric": "442 'use client' components, unknown how many could be Server Components",
      "expected_improvement": "Potentially 10-20% bundle reduction if 50+ components can become Server Components",
      "implementation": "1. Audit top-level pages for unnecessary 'use client'\n2. Extract interactive parts to separate client components\n3. Keep data fetching in Server Components\n4. Use composition: Server Component wraps Client Component\n5. Verify with React DevTools (Server Component badge)",
      "tradeoffs": "Increased file structure complexity, potential prop drilling",
      "effort": "large",
      "priority": "high"
    },
    {
      "id": "perf-025",
      "title": "Implement ISR for user profile pages with 10min revalidation",
      "description": "User profile pages ([username]/page.tsx) are dynamic but mostly static content (bio, links, releases). They could use Incremental Static Regeneration with stale-while-revalidate for better edge caching.",
      "rationale": "Profile pages change infrequently (when user updates profile). ISR with 10min revalidation keeps content fresh while serving from edge cache, reducing database load and latency.",
      "category": "caching",
      "impact": "high",
      "affected_files": [
        "apps/web/app/[username]/page.tsx"
      ],
      "current_metric": "Dynamic rendering on every request, no revalidation strategy",
      "expected_improvement": "50-200ms latency reduction for repeat visitors, 80-90% cache hit rate on popular profiles",
      "implementation": "1. Add export const revalidate = 600 to [username]/page.tsx\n2. Implement generateStaticParams for top 100 profiles (if needed)\n3. Use unstable_cache for database queries\n4. Test cache behavior with high-traffic profiles",
      "tradeoffs": "Stale data for up to 10min (acceptable for profile content), increased CDN storage",
      "effort": "medium",
      "priority": "high"
    },
    {
      "id": "perf-026",
      "title": "Optimize AuthLayout keyboard listener cleanup",
      "description": "AuthLayout.tsx adds 5 event listeners (pointerdown, keydown, mousemove, touchstart, focus) for idle spin detection. These are removed on cleanup but add overhead for every auth page mount.",
      "rationale": "Event listeners for idle detection can be debounced or use passive: true (already done). However, the spin effect is a nice-to-have and could be optional or removed entirely to reduce runtime overhead on auth pages.",
      "category": "runtime",
      "impact": "low",
      "affected_files": [
        "apps/web/components/auth/AuthLayout.tsx"
      ],
      "current_metric": "5 global event listeners per AuthLayout mount",
      "expected_improvement": "Minor improvement, primarily code simplification",
      "implementation": "1. Make logoSpinDelayMs truly optional (skip listeners if undefined)\n2. Or remove idle spin feature entirely (UX decision)\n3. If kept, ensure passive: true is used (already done)",
      "tradeoffs": "Loss of idle spin animation (likely not critical to UX)",
      "effort": "trivial",
      "priority": "low"
    },
    {
      "id": "perf-027",
      "title": "Add loading states to HeroSpotifySearch for perceived performance",
      "description": "HeroSpotifySearch uses useArtistSearchQuery with 300ms debounce. Loading state shows skeleton results but could benefit from optimistic UI patterns or instant search feedback.",
      "rationale": "300ms debounce is good for reducing API calls, but perceived performance improves with immediate visual feedback. Consider showing 'Searching...' text or spinner immediately on input.",
      "category": "rendering",
      "impact": "low",
      "affected_files": [
        "apps/web/components/home/HeroSpotifySearch.tsx"
      ],
      "current_metric": "300ms debounce, skeleton loading state",
      "expected_improvement": "Better perceived performance, no actual speed gain",
      "implementation": "1. Show 'Searching...' state immediately on input change\n2. Keep debounced API call for actual results\n3. Transition from immediate feedback to skeleton to results\n4. Consider reducing debounce to 200ms if API can handle it",
      "tradeoffs": "More UI states to manage, potential visual noise",
      "effort": "small",
      "priority": "low"
    },
    {
      "id": "perf-028",
      "title": "Review motion (framer-motion) usage for CSS animation alternatives",
      "description": "Previous ideation marked this not_practical due to framer-motion being used in 15+ core components. However, new pricing page components (FeatureList, PricingToggle) could use CSS animations instead if they're simple fade/slide effects.",
      "rationale": "While framer-motion is already bundled, reducing its API surface area (fewer useAnimation, useMotionValue calls) can reduce component complexity and runtime overhead.",
      "category": "runtime",
      "impact": "low",
      "affected_files": [
        "apps/web/app/(marketing)/launch/pricing/page.tsx",
        "apps/web/components/pricing/FeatureList.tsx",
        "apps/web/components/pricing/PricingToggle.tsx"
      ],
      "current_metric": "Static pricing page with no animations needed",
      "expected_improvement": "No bundle savings, but avoids unnecessary framer-motion imports if animations are added later",
      "implementation": "1. Keep pricing page static (no animations currently)\n2. If animations are added, use CSS transitions/keyframes for simple effects\n3. Reserve framer-motion for complex gestures (drag, spring physics)",
      "tradeoffs": "None - this is a preventive guideline for future changes",
      "effort": "trivial",
      "priority": "low"
    }
  ],
  "metadata": {
    "large_dependencies": [
      {
        "name": "@clerk/nextjs",
        "estimated_size": "~150KB gz",
        "usage": "14 client components with useUser/useAuth/useSession hooks",
        "optimization": "Consider lazy loading or deeper tree placement"
      },
      {
        "name": "motion (framer-motion)",
        "estimated_size": "~60KB gz",
        "usage": "15+ components, chunked via webpack splitChunks",
        "optimization": "Already optimized, avoid in new static pages"
      },
      {
        "name": "recharts",
        "estimated_size": "~150KB gz",
        "usage": "Admin metrics only, already lazy-loaded",
        "optimization": "Already optimal"
      },
      {
        "name": "simple-icons",
        "estimated_size": "Tree-shaken to ~50KB",
        "usage": "SocialIcon component, optimizePackageImports configured",
        "optimization": "Already optimal"
      }
    ],
    "new_findings": {
      "large_files": {
        "launch_page": "1943 lines with inline schemas and components",
        "releases_actions": "1148 lines - potential parallel query optimizations",
        "tour_dates_actions": "763 lines - potential parallel query optimizations"
      },
      "image_optimization": {
        "jpg_total": "600KB in public/images/avatars",
        "webp_conversion_opportunity": "150-200KB savings"
      },
      "client_boundaries": {
        "total_use_client": 442,
        "potential_server_component_candidates": "Unknown - requires audit"
      },
      "cache_headers": {
        "missing_resource_hints": "dns-prefetch/preconnect not configured",
        "isr_opportunity": "Profile pages could use ISR with 10min revalidation"
      }
    },
    "code_patterns": {
      "cn_utility_calls": 588,
      "json_serialization": 50,
      "date_operations": 106,
      "storybook_files": 124,
      "clerk_hook_imports": 14
    }
  },
  "summary": {
    "total_ideas": 14,
    "new_ideas_count": 14,
    "by_category": {
      "bundle_size": 6,
      "caching": 3,
      "runtime": 3,
      "network": 1,
      "database": 1,
      "rendering": 1
    },
    "by_impact": {
      "high": 3,
      "medium": 6,
      "low": 5
    },
    "by_effort": {
      "trivial": 3,
      "small": 5,
      "medium": 5,
      "large": 1
    },
    "by_priority": {
      "high": 3,
      "medium": 6,
      "low": 5
    },
    "potential_improvements": {
      "bundle_savings": "~155-210KB from WebP conversion + launch page extraction",
      "latency_reduction": "200-600ms from resource hints + parallel queries + ISR",
      "edge_cache_hit_rate": "80-90% for profile pages with ISR"
    },
    "quick_wins": [
      "perf-018: Add resource hints (trivial, high priority, 200-600ms gain)",
      "perf-022: Fix /launch/pricing cache headers (trivial, medium priority)",
      "perf-015: Convert JPG to WebP (small, medium priority, 150-200KB savings)"
    ],
    "high_impact_projects": [
      "perf-024: Review 'use client' boundaries (large effort, high impact)",
      "perf-025: Implement ISR for profile pages (medium effort, high impact)",
      "perf-023: Parallelize database queries in Server Actions (medium effort, medium impact)"
    ],
    "note": "All ideas are NEW and not covered in previous Jan 24 ideation. Focus on: resource hints (quick win), WebP conversion (easy), ISR for profiles (high impact), and 'use client' boundary audit (largest opportunity)."
  }
}
