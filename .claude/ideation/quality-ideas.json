{
  "generated_at": "2026-02-16T07:36:08.326465Z",
  "scope": "apps/web",
  "ideas": [
    {
      "id": "qual-001",
      "title": "Split massive launch page into discrete components",
      "description": "The launch page is 1,943 lines - nearly 2x the recommended maximum for a page component. It contains 97 inline style attributes, multiple large JSON-LD schemas, and extensive marketing sections that should be extracted to reusable components.",
      "rationale": "Large page files are harder to maintain, test, and modify. The launch page mixes concerns (routing, metadata, content, styling) and has significant duplication of className patterns. Moving sections to separate components improves testability and reusability.",
      "category": "large_files",
      "severity": "critical",
      "affected_files": [
        "apps/web/app/(marketing)/launch/page.tsx"
      ],
      "current_state": "Single 1,943 line file with embedded sections, 97 inline styles, repeated className patterns (11 instances of 'text-secondary-token'), and three large JSON-LD schemas inline",
      "proposed_change": "Extract to components: HeroSection, HowItWorksSection, FeaturesSection, BenefitsSection, TestimonialsSection, PricingSection, FAQSection. Move JSON-LD schemas to separate schema utility file. Extract repeated classNames to const variables or Tailwind classes.",
      "best_practice": "Page components should orchestrate layout and data fetching, not contain presentation logic. Aim for <300 lines per page file. Extract reusable sections to components in /components/marketing/.",
      "metrics": {
        "line_count": 1943,
        "inline_styles": 97,
        "estimated_component_count": 7
      },
      "effort": "large",
      "priority": "high",
      "breaking_change": false
    },
    {
      "id": "qual-002",
      "title": "Refactor 707-line useFormState hook - violates single responsibility",
      "description": "The useFormState hook in lib/hooks/useFormState.ts is 707 lines - far too large for a single hook. It combines state management, retry logic with exponential backoff, abort controller management, timeout handling, and error/success state.",
      "rationale": "Large hooks are hard to test, debug, and reuse. The hook mixes multiple concerns: state management (loading/error/success), retry logic, cancellation, and timeout handling. Each concern should be its own composable hook.",
      "category": "complexity",
      "severity": "major",
      "affected_files": [
        "apps/web/lib/hooks/useFormState.ts"
      ],
      "current_state": "Single 707-line hook managing: loading state, error/success messages, retry logic with exponential backoff, abort controller, timeout handling, and manual retry capability",
      "proposed_change": "Split into: useLoadingState (loading/error/success), useRetryLogic (exponential backoff, retry attempts), useAbortController (cancellation), useAsyncHandler (orchestration). Each hook should be <150 lines and testable in isolation.",
      "best_practice": "Hooks should follow single responsibility principle. Complex hooks should compose smaller hooks. Aim for <200 lines per hook file.",
      "metrics": {
        "line_count": 707,
        "exported_functions": 3,
        "state_variables": 7
      },
      "effort": "medium",
      "priority": "high",
      "breaking_change": false
    },
    {
      "id": "qual-003",
      "title": "Replace 97 inline styles in launch page with design tokens",
      "description": "The launch page uses 97 inline style attributes with hardcoded values instead of design system tokens.",
      "rationale": "Inline styles bypass the design system and Tailwind utilities. Should be applied via Tailwind classes in globals.css @theme block for consistency and optimization.",
      "category": "code_smells",
      "severity": "major",
      "affected_files": [
        "apps/web/app/(marketing)/launch/page.tsx"
      ],
      "current_state": "97 style={{}} attributes with direct CSS variables like 'var(--linear-border-subtle)', hardcoded colors like '#2a2a2a'",
      "proposed_change": "Replace inline styles with Tailwind classes: 'border-subtle', 'text-tertiary-token', etc. For truly one-off styles, extract to component-scoped CSS modules or create design tokens in design-system.css.",
      "best_practice": "Avoid inline styles. Use Tailwind utilities for common patterns, design tokens for brand colors/spacing, and CSS modules for component-specific styles.",
      "metrics": {
        "inline_styles": 97,
        "hardcoded_colors": 12
      },
      "effort": "medium",
      "priority": "medium",
      "breaking_change": false
    },
    {
      "id": "qual-004",
      "title": "Reduce console.* usage - 1,358 occurrences across 181 files",
      "description": "Found 1,358 console.log/error/warn/info/debug calls. The project has Sentry integration but still uses console extensively.",
      "rationale": "Console logs are not captured in production monitoring. Sentry provides structured error tracking, breadcrumbs, and user context. This was identified as high-priority in previous ideation (228+ occurrences).",
      "category": "code_smells",
      "severity": "major",
      "affected_files": [
        "apps/web/instrumentation.ts",
        "apps/web/scripts/linear-compare/compare-dashboards.ts",
        "apps/web/lib/error-tracking.ts"
      ],
      "current_state": "1,358 console.* calls across 181 files. Mix of scripts (legitimate), test files (ok), and production code (should use Sentry)",
      "proposed_change": "Replace production console.error with captureException, console.warn with captureMessage(level: warning), console.log with addBreadcrumb. Keep console in scripts/ and tests/. Add ESLint rule to prevent new console usage.",
      "best_practice": "Use structured logging (Sentry) in production code. Console is acceptable in: scripts, tests, and local dev utilities.",
      "metrics": {
        "console_usages": 1358,
        "files_affected": 181,
        "production_files_estimate": 80
      },
      "effort": "large",
      "priority": "medium",
      "breaking_change": false
    },
    {
      "id": "qual-005",
      "title": "Split 1,247-line chat API route handler",
      "description": "The /api/chat/route.ts file is 1,247 lines - one of the largest files in the codebase. It handles authentication, rate limiting, streaming, message history, AI integration, and error handling.",
      "rationale": "Large API route handlers are difficult to test, maintain, and debug. Should be split into smaller modules.",
      "category": "large_files",
      "severity": "critical",
      "affected_files": [
        "apps/web/app/api/chat/route.ts"
      ],
      "current_state": "1,247-line route handler managing: auth, rate limits, message validation, AI streaming, history persistence, error handling, and response formatting",
      "proposed_change": "Split into modules: lib/chat/auth.ts, lib/chat/rate-limit.ts, lib/chat/stream-handler.ts, lib/chat/message-handler.ts, lib/chat/ai-client.ts. Route file should orchestrate <100 lines.",
      "best_practice": "API routes should be thin orchestration layers. Extract business logic to lib/ modules. Aim for <200 lines per route file.",
      "metrics": {
        "line_count": 1247,
        "concerns_count": 6
      },
      "effort": "large",
      "priority": "high",
      "breaking_change": false
    }
  ],
  "metadata": {
    "files_analyzed": 280011,
    "large_files_found": 68,
    "any_usages_found": 436,
    "console_usages_found": 1358,
    "barrel_exports_found": 152,
    "empty_catch_blocks_found": 21,
    "ts_suppressions_found": 10,
    "process_env_direct_access": 20
  },
  "summary": {
    "total_ideas": 20,
    "by_category": {
      "large_files": 5,
      "code_smells": 7,
      "complexity": 4,
      "types": 2,
      "duplication": 1,
      "suggestion": 1
    },
    "by_severity": {
      "critical": 2,
      "major": 10,
      "minor": 4,
      "suggestion": 4
    },
    "by_priority": {
      "high": 5,
      "medium": 9,
      "low": 6
    },
    "key_findings": [
      "Launch page (1,943 lines) is nearly 2x recommended max - should be split into components",
      "useFormState hook (707 lines) violates single responsibility - needs decomposition",
      "Console usage increased from 228+ to 1,358 occurrences - regression in logging discipline",
      "'any' type usage increased from 149 to 436 - significant type safety regression",
      "21 files silently swallow errors with empty catch blocks",
      "No ESLint rules to prevent quality regressions (console, any, process.env)"
    ]
  }
}