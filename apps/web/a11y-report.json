{
  "summary": {
    "changed": 0,
    "unchanged": 1204,
    "matches": 0,
    "duration": { "secs": 8, "nanos": 34199167 },
    "scannerDuration": { "secs": 2, "nanos": 681157208 },
    "errors": 1,
    "warnings": 278,
    "infos": 0,
    "skipped": 0,
    "suggestedFixesSkipped": 0,
    "diagnosticsNotPrinted": 0
  },
  "diagnostics": [
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": ".storybook/clerk-elements-mock.jsx" },
        "span": [648, 695],
        "sourceCode": "// Mock for @clerk/elements in Storybook\n// These components are used for Clerk's custom auth UI\n\nimport React from 'react';\n\n// Common components\nexport const GlobalError = ({ className, children }) => (\n  <div className={className}>{children}</div>\n);\n\nexport const Field = ({ name, children }) => (\n  <div data-field={name}>{children}</div>\n);\n\nexport const FieldError = ({ className }) => <span className={className} />;\n\nexport const Input = React.forwardRef(({ className, ...props }, ref) => (\n  <input ref={ref} className={className} {...props} />\n));\nInput.displayName = 'ClerkInput';\n\nexport const Label = ({ className, children }) => (\n  <label className={className}>{children}</label>\n);\n\n// Sign-in specific components\nexport const SignInRoot = ({ children, routing, path }) => (\n  <div data-clerk-signin data-routing={routing} data-path={path}>\n    {children}\n  </div>\n);\n\nexport const SignInStep = ({ name, children, ...props }) => (\n  <div data-step={name} {...props}>\n    {children}\n  </div>\n);\n\nexport const SignInAction = ({ submit, children, className, ...props }) => (\n  <button type={submit ? 'submit' : 'button'} className={className} {...props}>\n    {children}\n  </button>\n);\n\nexport const SignInSupportedStrategy = ({ name, children }) => (\n  <div data-strategy={name}>{children}</div>\n);\n\nexport const SignInSafeIdentifier = () => <span>user@example.com</span>;\n\n// Sign-up specific components\nexport const SignUpRoot = ({ children, routing, path }) => (\n  <div data-clerk-signup data-routing={routing} data-path={path}>\n    {children}\n  </div>\n);\n\nexport const SignUpStep = ({ name, children, ...props }) => (\n  <div data-step={name} {...props}>\n    {children}\n  </div>\n);\n\nexport const SignUpAction = ({ submit, children, className, ...props }) => (\n  <button type={submit ? 'submit' : 'button'} className={className} {...props}>\n    {children}\n  </button>\n);\n\n// Default exports for namespace imports\nconst common = {\n  GlobalError,\n  Field,\n  FieldError,\n  Input,\n  Label,\n};\n\nconst signIn = {\n  Root: SignInRoot,\n  Step: SignInStep,\n  Action: SignInAction,\n  SupportedStrategy: SignInSupportedStrategy,\n  SafeIdentifier: SignInSafeIdentifier,\n};\n\nconst signUp = {\n  Root: SignUpRoot,\n  Step: SignUpStep,\n  Action: SignUpAction,\n};\n\nexport default common;\nexport { common, signIn, signUp };\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "app/(marketing)/blog/page.tsx" },
        "span": [4908, 5166],
        "sourceCode": "import Link from 'next/link';\nimport { Container } from '@/components/site/Container';\nimport { APP_URL } from '@/constants/app';\nimport { getBlogPosts } from '@/lib/blog/getBlogPosts';\n\nexport const metadata = {\n  title: 'Jovie Blog',\n  description:\n    'Signals, playbooks, and product notes for building lasting momentum as an independent artist.',\n  alternates: {\n    canonical: `${APP_URL}/blog`,\n  },\n};\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\nexport default async function BlogIndexPage() {\n  const posts = await getBlogPosts();\n\n  return (\n    <div className='min-h-screen'>\n      {/* Hero Section */}\n      <div className='relative overflow-hidden'>\n        {/* Subtle gradient background */}\n        <div className='absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-bg-base' />\n\n        <Container size='lg' className='relative py-20 sm:py-28 lg:py-32'>\n          <div className='mx-auto max-w-3xl text-center'>\n            <p className='text-sm font-medium tracking-widest uppercase text-tertiary-token mb-4'>\n              Updates\n            </p>\n            <h1 className='marketing-h1-linear text-primary-token mb-6'>Now</h1>\n            <p className='marketing-lead-linear text-secondary-token max-w-2xl mx-auto'>\n              Thoughts on product, strategy, and the craft of building tools for\n              artists.\n            </p>\n          </div>\n        </Container>\n      </div>\n\n      {/* Posts Timeline */}\n      <Container size='lg' className='pb-20 sm:pb-28'>\n        <div className='mx-auto max-w-3xl'>\n          <div className='space-y-0'>\n            {posts.map((post, index) => (\n              <article key={post.slug} className='group relative'>\n                {/* Timeline connector */}\n                {index < posts.length - 1 && (\n                  <div className='absolute left-[7px] top-[2.5rem] bottom-0 w-px bg-border-subtle' />\n                )}\n\n                <Link\n                  href={`/blog/${post.slug}`}\n                  className='block py-8 -mx-4 px-4 sm:-mx-6 sm:px-6 rounded-xl transition-all duration-200 hover:bg-surface-1'\n                >\n                  <div className='flex gap-6 sm:gap-8'>\n                    {/* Timeline dot */}\n                    <div className='relative flex-shrink-0 pt-1.5'>\n                      <div className='w-[15px] h-[15px] rounded-full border-2 border-border-default bg-bg-base group-hover:border-primary-token group-hover:bg-surface-2 transition-colors duration-200' />\n                    </div>\n\n                    {/* Content */}\n                    <div className='flex-1 min-w-0'>\n                      {/* Date and category */}\n                      <div className='flex items-center gap-3 mb-3'>\n                        <time\n                          dateTime={post.date}\n                          className='text-sm font-medium text-tertiary-token tabular-nums'\n                        >\n                          {formatDate(post.date)}\n                        </time>\n                        {post.category && (\n                          <>\n                            <span className='text-quaternary-token'>·</span>\n                            <span className='text-sm font-medium text-tertiary-token'>\n                              {post.category}\n                            </span>\n                          </>\n                        )}\n                      </div>\n\n                      {/* Title */}\n                      <h2 className='text-xl sm:text-2xl font-semibold text-primary-token tracking-tight mb-3 group-hover:text-primary-token transition-colors'>\n                        {post.title}\n                      </h2>\n\n                      {/* Excerpt */}\n                      <p className='text-base text-secondary-token leading-relaxed line-clamp-2'>\n                        {post.excerpt}\n                      </p>\n\n                      {/* Author */}\n                      <div className='mt-4 flex items-center gap-2 text-sm'>\n                        <span className='font-medium text-primary-token'>\n                          {post.author}\n                        </span>\n                        {post.authorTitle && (\n                          <>\n                            <span className='text-quaternary-token'>·</span>\n                            <span className='text-tertiary-token'>\n                              {post.authorTitle}\n                            </span>\n                          </>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Arrow indicator */}\n                    <div className='flex-shrink-0 pt-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-200'>\n                      <svg\n                        className='w-5 h-5 text-tertiary-token'\n                        fill='none'\n                        viewBox='0 0 24 24'\n                        stroke='currentColor'\n                        strokeWidth={2}\n                      >\n                        <path\n                          strokeLinecap='round'\n                          strokeLinejoin='round'\n                          d='M9 5l7 7-7 7'\n                        />\n                      </svg>\n                    </div>\n                  </div>\n                </Link>\n              </article>\n            ))}\n          </div>\n        </div>\n      </Container>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "app/global-error.tsx" },
        "span": [7410, 7462],
        "sourceCode": "'use client';\n\nimport * as Sentry from '@sentry/nextjs';\nimport { useEffect } from 'react';\n\nexport default function GlobalError({\n  error,\n  reset,\n}: {\n  error: Error & { digest?: string };\n  reset: () => void;\n}) {\n  useEffect(() => {\n    Sentry.captureException(error);\n  }, [error]);\n\n  return (\n    <html lang='en'>\n      <head>\n        <meta\n          name='viewport'\n          content='width=device-width, initial-scale=1, viewport-fit=cover'\n        />\n        <style\n          dangerouslySetInnerHTML={{\n            __html: `\n              *, *::before, *::after {\n                box-sizing: border-box;\n                margin: 0;\n                padding: 0;\n              }\n\n              :root {\n                --bg: #ffffff;\n                --text: #111827;\n                --text-muted: #6b7280;\n                --text-subtle: #9ca3af;\n                --border: #e5e7eb;\n                --btn-primary-bg: #111827;\n                --btn-primary-text: #ffffff;\n                --btn-primary-hover: #374151;\n                --btn-secondary-bg: transparent;\n                --btn-secondary-text: #111827;\n                --btn-secondary-border: #d1d5db;\n                --btn-secondary-hover: #f9fafb;\n                --logo-bg: #111827;\n                --logo-text: #ffffff;\n              }\n\n              @media (prefers-color-scheme: dark) {\n                :root {\n                  --bg: #0f0f0f;\n                  --text: #f9fafb;\n                  --text-muted: #9ca3af;\n                  --text-subtle: #6b7280;\n                  --border: #374151;\n                  --btn-primary-bg: #ffffff;\n                  --btn-primary-text: #111827;\n                  --btn-primary-hover: #f3f4f6;\n                  --btn-secondary-bg: transparent;\n                  --btn-secondary-text: #f9fafb;\n                  --btn-secondary-border: #4b5563;\n                  --btn-secondary-hover: #1f2937;\n                  --logo-bg: #ffffff;\n                  --logo-text: #111827;\n                }\n              }\n\n              body {\n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n                background-color: var(--bg);\n                color: var(--text);\n                min-height: 100vh;\n                min-height: 100dvh;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                padding: 1.5rem;\n                padding-bottom: max(1.5rem, env(safe-area-inset-bottom));\n                padding-left: max(1.5rem, env(safe-area-inset-left));\n                padding-right: max(1.5rem, env(safe-area-inset-right));\n                -webkit-font-smoothing: antialiased;\n                -moz-osx-font-smoothing: grayscale;\n              }\n\n              .container {\n                width: 100%;\n                max-width: 24rem;\n                text-align: center;\n              }\n\n              .logo {\n                display: flex;\n                justify-content: center;\n                margin-bottom: 2rem;\n              }\n\n              .logo svg {\n                width: 3.5rem;\n                height: 3.5rem;\n              }\n\n              .logo-icon {\n                fill: var(--logo-bg);\n              }\n\n              h1 {\n                font-size: 1.5rem;\n                font-weight: 600;\n                line-height: 1.25;\n                margin-bottom: 0.75rem;\n                letter-spacing: -0.025em;\n              }\n\n              .description {\n                font-size: 0.9375rem;\n                line-height: 1.5;\n                color: var(--text-muted);\n                margin-bottom: 2rem;\n              }\n\n              .actions {\n                display: flex;\n                flex-direction: column;\n                gap: 0.75rem;\n              }\n\n              @media (min-width: 400px) {\n                .actions {\n                  flex-direction: row;\n                  justify-content: center;\n                }\n              }\n\n              .btn {\n                display: inline-flex;\n                align-items: center;\n                justify-content: center;\n                height: 2.75rem;\n                padding: 0 1.5rem;\n                font-size: 0.9375rem;\n                font-weight: 500;\n                border-radius: 0.625rem;\n                border: none;\n                cursor: pointer;\n                text-decoration: none;\n                transition: all 0.15s ease;\n                -webkit-tap-highlight-color: transparent;\n              }\n\n              .btn:focus-visible {\n                outline: 2px solid var(--btn-primary-bg);\n                outline-offset: 2px;\n              }\n\n              .btn-primary {\n                background-color: var(--btn-primary-bg);\n                color: var(--btn-primary-text);\n              }\n\n              .btn-primary:hover {\n                background-color: var(--btn-primary-hover);\n              }\n\n              .btn-primary:active {\n                transform: scale(0.98);\n              }\n\n              .btn-secondary {\n                background-color: var(--btn-secondary-bg);\n                color: var(--btn-secondary-text);\n                border: 1px solid var(--btn-secondary-border);\n              }\n\n              .btn-secondary:hover {\n                background-color: var(--btn-secondary-hover);\n              }\n\n              .btn-secondary:active {\n                transform: scale(0.98);\n              }\n\n              .error-id {\n                font-size: 0.75rem;\n                color: var(--text-subtle);\n                margin-top: 2rem;\n                font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, monospace;\n              }\n\n              @media (min-width: 400px) {\n                h1 {\n                  font-size: 1.75rem;\n                }\n              }\n            `,\n          }}\n        />\n      </head>\n      <body>\n        <div className='container'>\n          <div className='logo'>\n            <svg\n              viewBox='0 0 353.68 347.97'\n              fill='none'\n              xmlns='http://www.w3.org/2000/svg'\n              aria-hidden='true'\n            >\n              <path\n                className='logo-icon'\n                d='m176.84,0l3.08.05c8.92,1.73,16.9,6.45,23.05,13.18,7.95,8.7,12.87,20.77,12.87,34.14s-4.92,25.44-12.87,34.14c-6.7,7.34-15.59,12.28-25.49,13.57h-.64s0,.01,0,.01h0c-22.2,0-42.3,8.84-56.83,23.13-14.5,14.27-23.49,33.99-23.49,55.77h0v.02c0,21.78,8.98,41.5,23.49,55.77,14.54,14.3,34.64,23.15,56.83,23.15v-.02h.01c22.2,0,42.3-8.84,56.83-23.13,14.51-14.27,23.49-33.99,23.49-55.77h0c0-17.55-5.81-33.75-15.63-46.82-10.08-13.43-24.42-23.61-41.05-28.62l-2.11-.64c4.36-2.65,8.34-5.96,11.84-9.78,9.57-10.47,15.5-24.89,15.5-40.77s-5.93-30.3-15.5-40.77c-1.44-1.57-2.95-3.06-4.55-4.44l7.67,1.58c40.44,8.35,75.81,30.3,100.91,60.75,24.66,29.91,39.44,68.02,39.44,109.5h0c0,48.05-19.81,91.55-51.83,123.05-31.99,31.46-76.19,50.92-125,50.92v.02h-.01c-48.79,0-93-19.47-125-50.94C19.81,265.54,0,222.04,0,173.99h0c0-48.05,19.81-91.56,51.83-123.05C83.84,19.47,128.04,0,176.84,0Z'\n              />\n            </svg>\n          </div>\n\n          <h1>Something went wrong</h1>\n          <p className='description'>\n            We encountered an unexpected error. Our team has been notified.\n          </p>\n\n          <div className='actions'>\n            <button onClick={reset} className='btn btn-primary'>\n              Try again\n            </button>\n            <a href='/' className='btn btn-secondary'>\n              Go home\n            </a>\n          </div>\n\n          {error.digest && <p className='error-id'>Error ID: {error.digest}</p>}\n        </div>\n      </body>\n    </html>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "app/out/[id]/InterstitialClient.tsx" },
        "span": [3739, 3964],
        "sourceCode": "'use client';\n\n/**\n * Client-side Interstitial Component\n * Handles human verification and secure URL fetching\n */\n\nimport { useCallback, useState } from 'react';\n\ninterface InterstitialClientProps {\n  shortId: string;\n  titleAlias: string;\n  domain: string;\n}\n\nexport function InterstitialClient({\n  shortId,\n  titleAlias,\n  domain,\n}: InterstitialClientProps) {\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isVerified, setIsVerified] = useState(false);\n\n  const handleContinue = useCallback(async () => {\n    if (isVerifying) return;\n\n    setIsVerifying(true);\n    setError(null);\n\n    try {\n      // Request signed URL for this link\n      const response = await fetch(`/api/link/${shortId}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          verified: true,\n          timestamp: Date.now(),\n        }),\n      });\n\n      if (!response.ok) {\n        if (response.status === 429) {\n          throw new Error('Too many requests. Please wait a moment.');\n        } else if (response.status === 404) {\n          throw new Error('Link not found or expired.');\n        } else {\n          throw new Error('Failed to verify link.');\n        }\n      }\n\n      const data = await response.json();\n\n      if (data.url) {\n        setIsVerified(true);\n        // Short delay to show success state, then redirect\n        setTimeout(() => {\n          window.location.replace(data.url);\n        }, 1000);\n      } else {\n        throw new Error('Invalid response from server.');\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n      setIsVerifying(false);\n    }\n  }, [shortId, isVerifying]);\n\n  if (isVerified) {\n    return (\n      <div className='text-center'>\n        <div className='mb-4'>\n          <div className='mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center'>\n            <svg\n              className='w-8 h-8 text-green-600'\n              fill='none'\n              stroke='currentColor'\n              viewBox='0 0 24 24'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M5 13l4 4L19 7'\n              />\n            </svg>\n          </div>\n        </div>\n        <p className='text-green-600 font-medium'>Verified! Redirecting...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Dynamic content loaded client-side */}\n      <noscript>\n        <p className='text-red-600 mb-4'>\n          JavaScript is required to continue to this link.\n        </p>\n      </noscript>\n\n      <div className='mb-4 p-3 bg-gray-50 rounded-lg'>\n        <p className='text-sm text-gray-700'>\n          <strong>Destination:</strong> {titleAlias}\n        </p>\n        {/* Only show domain when it's not obfuscated */}\n        {domain !== 'External Site' && (\n          <p className='text-xs text-gray-500 mt-1'>Domain: {domain}</p>\n        )}\n      </div>\n\n      {error && (\n        <div className='mb-4 p-3 bg-red-50 border border-red-200 rounded-lg'>\n          <p className='text-sm text-red-600'>{error}</p>\n        </div>\n      )}\n\n      <button\n        onClick={handleContinue}\n        disabled={isVerifying}\n        className={`\n          w-full py-3 px-4 rounded-md font-medium transition-colors\n          ${\n            isVerifying\n              ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n              : 'bg-blue-600 text-white hover:bg-blue-700'\n          }\n        `}\n      >\n        {isVerifying ? (\n          <span className='flex items-center justify-center'>\n            <svg\n              className='animate-spin motion-reduce:animate-none -ml-1 mr-3 h-5 w-5 text-current'\n              xmlns='http://www.w3.org/2000/svg'\n              fill='none'\n              viewBox='0 0 24 24'\n            >\n              <circle\n                className='opacity-25'\n                cx='12'\n                cy='12'\n                r='10'\n                stroke='currentColor'\n                strokeWidth='4'\n              ></circle>\n              <path\n                className='opacity-75'\n                fill='currentColor'\n                d='M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z'\n              ></path>\n            </svg>\n            Verifying...\n          </span>\n        ) : (\n          'Continue to Link'\n        )}\n      </button>\n\n      <p className='mt-3 text-xs text-gray-500'>\n        By continuing, you acknowledge this link leads to external content.\n      </p>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "app/out/[id]/InterstitialClient.tsx" },
        "span": [3289, 3639],
        "sourceCode": "'use client';\n\n/**\n * Client-side Interstitial Component\n * Handles human verification and secure URL fetching\n */\n\nimport { useCallback, useState } from 'react';\n\ninterface InterstitialClientProps {\n  shortId: string;\n  titleAlias: string;\n  domain: string;\n}\n\nexport function InterstitialClient({\n  shortId,\n  titleAlias,\n  domain,\n}: InterstitialClientProps) {\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isVerified, setIsVerified] = useState(false);\n\n  const handleContinue = useCallback(async () => {\n    if (isVerifying) return;\n\n    setIsVerifying(true);\n    setError(null);\n\n    try {\n      // Request signed URL for this link\n      const response = await fetch(`/api/link/${shortId}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          verified: true,\n          timestamp: Date.now(),\n        }),\n      });\n\n      if (!response.ok) {\n        if (response.status === 429) {\n          throw new Error('Too many requests. Please wait a moment.');\n        } else if (response.status === 404) {\n          throw new Error('Link not found or expired.');\n        } else {\n          throw new Error('Failed to verify link.');\n        }\n      }\n\n      const data = await response.json();\n\n      if (data.url) {\n        setIsVerified(true);\n        // Short delay to show success state, then redirect\n        setTimeout(() => {\n          window.location.replace(data.url);\n        }, 1000);\n      } else {\n        throw new Error('Invalid response from server.');\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n      setIsVerifying(false);\n    }\n  }, [shortId, isVerifying]);\n\n  if (isVerified) {\n    return (\n      <div className='text-center'>\n        <div className='mb-4'>\n          <div className='mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center'>\n            <svg\n              className='w-8 h-8 text-green-600'\n              fill='none'\n              stroke='currentColor'\n              viewBox='0 0 24 24'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M5 13l4 4L19 7'\n              />\n            </svg>\n          </div>\n        </div>\n        <p className='text-green-600 font-medium'>Verified! Redirecting...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Dynamic content loaded client-side */}\n      <noscript>\n        <p className='text-red-600 mb-4'>\n          JavaScript is required to continue to this link.\n        </p>\n      </noscript>\n\n      <div className='mb-4 p-3 bg-gray-50 rounded-lg'>\n        <p className='text-sm text-gray-700'>\n          <strong>Destination:</strong> {titleAlias}\n        </p>\n        {/* Only show domain when it's not obfuscated */}\n        {domain !== 'External Site' && (\n          <p className='text-xs text-gray-500 mt-1'>Domain: {domain}</p>\n        )}\n      </div>\n\n      {error && (\n        <div className='mb-4 p-3 bg-red-50 border border-red-200 rounded-lg'>\n          <p className='text-sm text-red-600'>{error}</p>\n        </div>\n      )}\n\n      <button\n        onClick={handleContinue}\n        disabled={isVerifying}\n        className={`\n          w-full py-3 px-4 rounded-md font-medium transition-colors\n          ${\n            isVerifying\n              ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n              : 'bg-blue-600 text-white hover:bg-blue-700'\n          }\n        `}\n      >\n        {isVerifying ? (\n          <span className='flex items-center justify-center'>\n            <svg\n              className='animate-spin motion-reduce:animate-none -ml-1 mr-3 h-5 w-5 text-current'\n              xmlns='http://www.w3.org/2000/svg'\n              fill='none'\n              viewBox='0 0 24 24'\n            >\n              <circle\n                className='opacity-25'\n                cx='12'\n                cy='12'\n                r='10'\n                stroke='currentColor'\n                strokeWidth='4'\n              ></circle>\n              <path\n                className='opacity-75'\n                fill='currentColor'\n                d='M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z'\n              ></path>\n            </svg>\n            Verifying...\n          </span>\n        ) : (\n          'Continue to Link'\n        )}\n      </button>\n\n      <p className='mt-3 text-xs text-gray-500'>\n        By continuing, you acknowledge this link leads to external content.\n      </p>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "app/out/[id]/InterstitialClient.tsx" },
        "span": [2020, 2183],
        "sourceCode": "'use client';\n\n/**\n * Client-side Interstitial Component\n * Handles human verification and secure URL fetching\n */\n\nimport { useCallback, useState } from 'react';\n\ninterface InterstitialClientProps {\n  shortId: string;\n  titleAlias: string;\n  domain: string;\n}\n\nexport function InterstitialClient({\n  shortId,\n  titleAlias,\n  domain,\n}: InterstitialClientProps) {\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isVerified, setIsVerified] = useState(false);\n\n  const handleContinue = useCallback(async () => {\n    if (isVerifying) return;\n\n    setIsVerifying(true);\n    setError(null);\n\n    try {\n      // Request signed URL for this link\n      const response = await fetch(`/api/link/${shortId}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          verified: true,\n          timestamp: Date.now(),\n        }),\n      });\n\n      if (!response.ok) {\n        if (response.status === 429) {\n          throw new Error('Too many requests. Please wait a moment.');\n        } else if (response.status === 404) {\n          throw new Error('Link not found or expired.');\n        } else {\n          throw new Error('Failed to verify link.');\n        }\n      }\n\n      const data = await response.json();\n\n      if (data.url) {\n        setIsVerified(true);\n        // Short delay to show success state, then redirect\n        setTimeout(() => {\n          window.location.replace(data.url);\n        }, 1000);\n      } else {\n        throw new Error('Invalid response from server.');\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n      setIsVerifying(false);\n    }\n  }, [shortId, isVerifying]);\n\n  if (isVerified) {\n    return (\n      <div className='text-center'>\n        <div className='mb-4'>\n          <div className='mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center'>\n            <svg\n              className='w-8 h-8 text-green-600'\n              fill='none'\n              stroke='currentColor'\n              viewBox='0 0 24 24'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M5 13l4 4L19 7'\n              />\n            </svg>\n          </div>\n        </div>\n        <p className='text-green-600 font-medium'>Verified! Redirecting...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Dynamic content loaded client-side */}\n      <noscript>\n        <p className='text-red-600 mb-4'>\n          JavaScript is required to continue to this link.\n        </p>\n      </noscript>\n\n      <div className='mb-4 p-3 bg-gray-50 rounded-lg'>\n        <p className='text-sm text-gray-700'>\n          <strong>Destination:</strong> {titleAlias}\n        </p>\n        {/* Only show domain when it's not obfuscated */}\n        {domain !== 'External Site' && (\n          <p className='text-xs text-gray-500 mt-1'>Domain: {domain}</p>\n        )}\n      </div>\n\n      {error && (\n        <div className='mb-4 p-3 bg-red-50 border border-red-200 rounded-lg'>\n          <p className='text-sm text-red-600'>{error}</p>\n        </div>\n      )}\n\n      <button\n        onClick={handleContinue}\n        disabled={isVerifying}\n        className={`\n          w-full py-3 px-4 rounded-md font-medium transition-colors\n          ${\n            isVerifying\n              ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n              : 'bg-blue-600 text-white hover:bg-blue-700'\n          }\n        `}\n      >\n        {isVerifying ? (\n          <span className='flex items-center justify-center'>\n            <svg\n              className='animate-spin motion-reduce:animate-none -ml-1 mr-3 h-5 w-5 text-current'\n              xmlns='http://www.w3.org/2000/svg'\n              fill='none'\n              viewBox='0 0 24 24'\n            >\n              <circle\n                className='opacity-25'\n                cx='12'\n                cy='12'\n                r='10'\n                stroke='currentColor'\n                strokeWidth='4'\n              ></circle>\n              <path\n                className='opacity-75'\n                fill='currentColor'\n                d='M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z'\n              ></path>\n            </svg>\n            Verifying...\n          </span>\n        ) : (\n          'Continue to Link'\n        )}\n      </button>\n\n      <p className='mt-3 text-xs text-gray-500'>\n        By continuing, you acknowledge this link leads to external content.\n      </p>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "app/out/[id]/page.tsx" },
        "span": [2137, 2311],
        "sourceCode": "/**\n * Sensitive Link Interstitial Page (/out/[id])\n * Anti-cloaking compliant interstitial for sensitive domains\n */\n\nimport { Metadata } from 'next';\nimport { notFound, redirect } from 'next/navigation';\nimport { getWrappedLink } from '@/lib/services/link-wrapping';\nimport { getCategoryDescription } from '@/lib/utils/domain-categorizer';\nimport { InterstitialClient } from './InterstitialClient';\n\n// Force dynamic rendering to ensure headers are applied correctly\nexport const dynamic = 'force-dynamic';\nexport const revalidate = 0;\n\ninterface PageProps {\n  params: Promise<{\n    id: string;\n  }>;\n}\n\nexport async function generateMetadata({\n  params: _params, // eslint-disable-line @typescript-eslint/no-unused-vars\n}: PageProps): Promise<Metadata> {\n  // Generic metadata to avoid exposing sensitive information to crawlers\n  return {\n    title: 'Link Confirmation Required',\n    description: 'This link requires confirmation before proceeding.',\n    robots: {\n      index: false,\n      follow: false,\n      nocache: true,\n      nosnippet: true,\n      noarchive: true,\n    },\n    referrer: 'no-referrer',\n  };\n}\n\nexport default async function InterstitialPage({ params }: PageProps) {\n  const { id: shortId } = await params;\n\n  if (!shortId || shortId.length > 20) {\n    notFound();\n  }\n\n  // Get wrapped link information\n  const wrappedLink = await getWrappedLink(shortId);\n\n  if (!wrappedLink) {\n    notFound();\n  }\n\n  // Ensure this is a sensitive link\n  if (wrappedLink.kind !== 'sensitive') {\n    // Redirect normal links to /go/ route\n    redirect(`/go/${shortId}`);\n  }\n\n  // Get generic description for crawlers\n  const genericDescription = getCategoryDescription(\n    wrappedLink.category || 'adult'\n  );\n\n  return (\n    <div className='min-h-screen bg-gray-50 flex items-center justify-center px-4'>\n      <div className='max-w-md w-full bg-white rounded-lg shadow-lg p-6'>\n        {/* Generic content visible to crawlers */}\n        <div className='text-center'>\n          <div className='mb-6'>\n            <div className='mx-auto w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center'>\n              <svg\n                className='w-8 h-8 text-yellow-600'\n                fill='none'\n                stroke='currentColor'\n                viewBox='0 0 24 24'\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  strokeWidth={2}\n                  d='M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 15.5c-.77.833.192 2.5 1.732 2.5z'\n                />\n              </svg>\n            </div>\n          </div>\n\n          <h1 className='text-xl font-semibold text-gray-900 mb-3'>\n            Link Confirmation Required\n          </h1>\n\n          <p className='text-gray-600 mb-6'>{genericDescription}</p>\n\n          {/* Client-side component for human verification */}\n          <InterstitialClient\n            shortId={shortId}\n            titleAlias={wrappedLink.titleAlias || 'External Link'}\n            domain={\n              wrappedLink.category === 'adult' ||\n              wrappedLink.category === 'dating'\n                ? 'External Site'\n                : wrappedLink.domain\n            }\n          />\n\n          <div className='mt-6 text-sm text-gray-500'>\n            <p>This confirmation helps protect against automated access.</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "app/sentry-example-page/page.tsx" },
        "span": [1053, 1177],
        "sourceCode": "'use client';\n\nimport * as Sentry from '@sentry/nextjs';\nimport Head from 'next/head';\nimport { notFound } from 'next/navigation';\nimport { useEffect, useState } from 'react';\n\n// Guard: Only allow this page in development\nif (process.env.NODE_ENV === 'production') {\n  notFound();\n}\n\nclass SentryExampleFrontendError extends Error {\n  constructor(message: string | undefined) {\n    super(message);\n    this.name = 'SentryExampleFrontendError';\n  }\n}\n\nexport default function Page() {\n  const [hasSentError, setHasSentError] = useState(false);\n  const [isConnected, setIsConnected] = useState(true);\n\n  useEffect(() => {\n    async function checkConnectivity() {\n      const result = await Sentry.diagnoseSdkConnectivity();\n      setIsConnected(result !== 'sentry-unreachable');\n    }\n    checkConnectivity();\n  }, []);\n\n  return (\n    <div>\n      <Head>\n        <title>sentry-example-page</title>\n        <meta name='description' content='Test Sentry for your Next.js app!' />\n      </Head>\n\n      <main>\n        <div className='flex-spacer' />\n        <svg\n          height='40'\n          width='40'\n          fill='none'\n          xmlns='http://www.w3.org/2000/svg'\n        >\n          <path\n            d='M21.85 2.995a3.698 3.698 0 0 1 1.353 1.354l16.303 28.278a3.703 3.703 0 0 1-1.354 5.053 3.694 3.694 0 0 1-1.848.496h-3.828a31.149 31.149 0 0 0 0-3.09h3.815a.61.61 0 0 0 .537-.917L20.523 5.893a.61.61 0 0 0-1.057 0l-3.739 6.494a28.948 28.948 0 0 1 9.63 10.453 28.988 28.988 0 0 1 3.499 13.78v1.542h-9.852v-1.544a19.106 19.106 0 0 0-2.182-8.85 19.08 19.08 0 0 0-6.032-6.829l-1.85 3.208a15.377 15.377 0 0 1 6.382 12.484v1.542H3.696A3.694 3.694 0 0 1 0 34.473c0-.648.17-1.286.494-1.849l2.33-4.074a8.562 8.562 0 0 1 2.689 1.536L3.158 34.17a.611.611 0 0 0 .538.917h8.448a12.481 12.481 0 0 0-6.037-9.09l-1.344-.772 4.908-8.545 1.344.77a22.16 22.16 0 0 1 7.705 7.444 22.193 22.193 0 0 1 3.316 10.193h3.699a25.892 25.892 0 0 0-3.811-12.033 25.856 25.856 0 0 0-9.046-8.796l-1.344-.772 5.269-9.136a3.698 3.698 0 0 1 3.2-1.849c.648 0 1.285.17 1.847.495Z'\n            fill='currentcolor'\n          />\n        </svg>\n        <h1>sentry-example-page</h1>\n\n        <p className='description'>\n          Click the button below, and view the sample error on the Sentry{' '}\n          <a\n            target='_blank'\n            href='https://jovie.sentry.io/issues/?project=4510479236792320'\n          >\n            Issues Page\n          </a>\n          . For more details about setting up Sentry,{' '}\n          <a\n            target='_blank'\n            href='https://docs.sentry.io/platforms/javascript/guides/nextjs/'\n          >\n            read our docs\n          </a>\n          .\n        </p>\n\n        <button\n          type='button'\n          onClick={async () => {\n            await Sentry.startSpan(\n              {\n                name: 'Example Frontend/Backend Span',\n                op: 'test',\n              },\n              async () => {\n                const res = await fetch('/api/sentry-example-api');\n                if (!res.ok) {\n                  setHasSentError(true);\n                }\n              }\n            );\n            throw new SentryExampleFrontendError(\n              'This error is raised on the frontend of the example page.'\n            );\n          }}\n          disabled={!isConnected}\n        >\n          <span>Throw Sample Error</span>\n        </button>\n\n        {hasSentError ? (\n          <p className='success'>Error sent to Sentry.</p>\n        ) : !isConnected ? (\n          <div className='connectivity-error'>\n            <p>\n              It looks like network requests to Sentry are being blocked, which\n              will prevent errors from being captured. Try disabling your\n              ad-blocker to complete the test.\n            </p>\n          </div>\n        ) : (\n          <div className='success_placeholder' />\n        )}\n\n        <div className='flex-spacer' />\n      </main>\n\n      <style>{`\n        main {\n          display: flex;\n          min-height: 100vh;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          gap: 16px;\n          padding: 16px;\n        }\n\n        h1 {\n          padding: 0px 4px;\n          border-radius: 4px;\n          background-color: rgba(24, 20, 35, 0.03);\n          font-size: 20px;\n          line-height: 1.2;\n        }\n\n        p {\n          margin: 0;\n          font-size: 20px;\n        }\n\n        a {\n          color: #6341F0;\n          text-decoration: underline;\n          cursor: pointer;\n\n          @media (prefers-color-scheme: dark) {\n            color: #B3A1FF;\n          }\n        }\n\n        button {\n          border-radius: 8px;\n          color: white;\n          cursor: pointer;\n          background-color: #553DB8;\n          border: none;\n          padding: 0;\n          margin-top: 4px;\n\n          & > span {\n            display: inline-block;\n            padding: 12px 16px;\n            border-radius: inherit;\n            font-size: 20px;\n            font-weight: bold;\n            line-height: 1;\n            background-color: #7553FF;\n            border: 1px solid #553DB8;\n            transform: translateY(-4px);\n          }\n\n          &:hover > span {\n            transform: translateY(-8px);\n          }\n\n          &:active > span {\n            transform: translateY(0);\n          }\n\n          &:disabled {\n\t            cursor: not-allowed;\n\t            opacity: 0.6;\n\t\n\t            & > span {\n\t              transform: translateY(0);\n\t              border: none\n\t            }\n\t          }\n        }\n\n        .description {\n          text-align: center;\n          color: #6E6C75;\n          max-width: 500px;\n          line-height: 1.5;\n          font-size: 20px;\n\n          @media (prefers-color-scheme: dark) {\n            color: #A49FB5;\n          }\n        }\n\n        .flex-spacer {\n          flex: 1;\n        }\n\n        .success {\n          padding: 12px 16px;\n          border-radius: 8px;\n          font-size: 20px;\n          line-height: 1;\n          background-color: #00F261;\n          border: 1px solid #00BF4D;\n          color: #181423;\n        }\n\n        .success_placeholder {\n          height: 46px;\n        }\n\n        .connectivity-error {\n          padding: 12px 16px;\n          background-color: #E50045;\n          border-radius: 8px;\n          width: 500px;\n          color: #FFFFFF;\n          border: 1px solid #A80033;\n          text-align: center;\n          margin: 0;\n        }\n        \n        .connectivity-error a {\n          color: #FFFFFF;\n          text-decoration: underline;\n        }\n      `}</style>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "app/spinner-test/page.tsx" },
        "span": [299, 421],
        "sourceCode": "'use client';\n\nexport default function SpinnerTestPage() {\n  return (\n    <div className='min-h-screen flex flex-col items-center justify-center bg-[#101012] gap-8'>\n      <h1 className='text-lg font-medium text-[rgb(227,228,230)]'>\n        Spinner Test\n      </h1>\n\n      {/* SVG Spinner */}\n      <svg\n        width='64'\n        height='64'\n        viewBox='0 0 44 44'\n        xmlns='http://www.w3.org/2000/svg'\n      >\n        <style>\n          {`\n                    .spinner {\n                      transform-origin: 50% 50%;\n                      animation: spin 1s linear infinite;\n                    }\n\n                    @keyframes spin {\n                      to {\n                        transform: rotate(360deg);\n                      }\n                    }\n                  `}\n        </style>\n\n        <defs>\n          <linearGradient\n            id='spinnerTail'\n            x1='22'\n            y1='2'\n            x2='22'\n            y2='42'\n            gradientUnits='userSpaceOnUse'\n            gradientTransform='rotate(-40 22 22)'\n          >\n            <stop offset='0%' stopColor='white' stopOpacity='1' />\n            <stop offset='70%' stopColor='white' stopOpacity='1' />\n            <stop offset='100%' stopColor='white' stopOpacity='0' />\n          </linearGradient>\n        </defs>\n\n        <g className='spinner'>\n          <circle\n            cx='22'\n            cy='22'\n            r='14'\n            fill='none'\n            stroke='url(#spinnerTail)'\n            strokeWidth='8'\n            strokeLinecap='round'\n            strokeDasharray='80 16'\n          />\n        </g>\n      </svg>\n\n      <p className='text-sm text-[#6b6f76]'>View at /spinner-test</p>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<input type=\"radio\">",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<input type=\"radio\">"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "app/waitlist/page.tsx" },
        "span": [17208, 17220],
        "sourceCode": "'use client';\n\nimport { useAuth, useClerk } from '@clerk/nextjs';\nimport { Button } from '@jovie/ui';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { Input } from '@/components/atoms/Input';\nimport { AuthBackButton, AuthLayout } from '@/components/auth';\nimport { WaitlistSkeleton } from '@/components/waitlist/WaitlistSkeleton';\n\ninterface FormErrors {\n  primaryGoal?: string[];\n  primarySocialUrl?: string[];\n  spotifyUrl?: string[];\n  heardAbout?: string[];\n}\n\ntype PrimaryGoal = 'streams' | 'merch' | 'tickets';\n\ntype SocialPlatform = 'instagram' | 'tiktok' | 'youtube' | 'other';\n\nconst BUTTON_CLASSES =\n  'w-full h-12 rounded-xl border border-subtle bg-surface-1 px-4 text-[15px] leading-5 font-medium text-primary-token hover:bg-surface-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring-themed';\n\nconst ALLOWED_PLANS = new Set(['free', 'branding', 'pro', 'growth']);\n\nconst SOCIAL_PLATFORM_OPTIONS: Array<{ value: SocialPlatform; label: string }> =\n  [\n    { value: 'instagram', label: 'Instagram' },\n    { value: 'tiktok', label: 'TikTok' },\n    { value: 'youtube', label: 'YouTube' },\n    { value: 'other', label: 'Other' },\n  ];\n\nconst PRIMARY_GOAL_OPTIONS: Array<{ value: PrimaryGoal; label: string }> = [\n  { value: 'streams', label: 'More streams' },\n  { value: 'merch', label: 'More merch sales' },\n  { value: 'tickets', label: 'More ticket sales' },\n];\n\nfunction getSocialPlatformPrefix(platform: SocialPlatform): {\n  display: string;\n  buildUrl: (value: string) => string;\n} {\n  if (platform === 'instagram') {\n    return {\n      display: 'instagram.com/',\n      buildUrl: value => `https://instagram.com/${value}`,\n    };\n  }\n\n  if (platform === 'tiktok') {\n    return {\n      display: 'tiktok.com/@',\n      buildUrl: value => `https://tiktok.com/@${value}`,\n    };\n  }\n\n  if (platform === 'youtube') {\n    return {\n      display: 'youtube.com/@',\n      buildUrl: value => `https://youtube.com/@${value}`,\n    };\n  }\n\n  return {\n    display: '',\n    buildUrl: value => value,\n  };\n}\n\nfunction normalizeUrl(url: string): string {\n  if (!url.trim()) return '';\n  const trimmed = url.trim();\n  if (!/^https?:\\/\\//i.test(trimmed)) {\n    return `https://${trimmed}`;\n  }\n  return trimmed;\n}\n\nfunction resolvePrimarySocialUrl(\n  value: string,\n  platform: SocialPlatform\n): string {\n  const trimmed = value.trim();\n  if (!trimmed) return '';\n  if (/^https?:\\/\\//i.test(trimmed)) {\n    return normalizeUrl(trimmed);\n  }\n\n  const { buildUrl } = getSocialPlatformPrefix(platform);\n  return normalizeUrl(buildUrl(trimmed));\n}\n\nfunction isValidUrl(url: string): boolean {\n  if (!url.trim()) return false;\n  const normalized = normalizeUrl(url);\n  try {\n    const parsed = new URL(normalized);\n    return parsed.protocol === 'https:' || parsed.protocol === 'http:';\n  } catch {\n    return false;\n  }\n}\n\nexport default function WaitlistPage() {\n  const { isLoaded, isSignedIn } = useAuth();\n  const { signOut } = useClerk();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const selectedPlan = useMemo(() => {\n    const plan = searchParams.get('plan');\n    if (!plan) return null;\n    return ALLOWED_PLANS.has(plan) ? plan : null;\n  }, [searchParams]);\n\n  const [isHydrating, setIsHydrating] = useState(true);\n  const [step, setStep] = useState<0 | 1 | 2>(0);\n  const [primaryGoal, setPrimaryGoal] = useState<PrimaryGoal | null>(null);\n  const [primaryGoalFocusIndex, setPrimaryGoalFocusIndex] = useState(0);\n  const [socialPlatform, setSocialPlatform] =\n    useState<SocialPlatform>('instagram');\n  const [primarySocialUrl, setPrimarySocialUrl] = useState('');\n  const [spotifyUrl, setSpotifyUrl] = useState('');\n  const [heardAbout, setHeardAbout] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [isSigningOut, setIsSigningOut] = useState(false);\n  const [error, setError] = useState('');\n  const [fieldErrors, setFieldErrors] = useState<FormErrors>({});\n\n  const primaryGoalButtonRefs = useRef<Array<HTMLButtonElement | null>>([]);\n  const socialPlatformButtonRefs = useRef<Array<HTMLButtonElement | null>>([]);\n  const primarySocialUrlInputRef = useRef<HTMLInputElement | null>(null);\n  const spotifyUrlInputRef = useRef<HTMLInputElement | null>(null);\n\n  const selectedPrimaryGoalIndex = useMemo(() => {\n    if (!primaryGoal) return 0;\n    const index = PRIMARY_GOAL_OPTIONS.findIndex(o => o.value === primaryGoal);\n    return index >= 0 ? index : 0;\n  }, [primaryGoal]);\n\n  const selectedSocialPlatformIndex = useMemo(() => {\n    const index = SOCIAL_PLATFORM_OPTIONS.findIndex(\n      o => o.value === socialPlatform\n    );\n    return index >= 0 ? index : 0;\n  }, [socialPlatform]);\n\n  useEffect(() => {\n    if (step !== 0) return;\n    if (!primaryGoal) return;\n    setPrimaryGoalFocusIndex(selectedPrimaryGoalIndex);\n  }, [primaryGoal, selectedPrimaryGoalIndex, step]);\n\n  useEffect(() => {\n    if (!isLoaded) return;\n    if (!isSignedIn) {\n      router.replace('/signin?redirect_url=/waitlist');\n    }\n  }, [isLoaded, isSignedIn, router]);\n\n  useEffect(() => {\n    setIsHydrating(false);\n  }, []);\n\n  useEffect(() => {\n    try {\n      const stored = window.sessionStorage.getItem('waitlist_primary_goal');\n      if (stored === 'streams' || stored === 'merch' || stored === 'tickets') {\n        setPrimaryGoal(stored);\n      }\n    } catch {\n      // Ignore storage errors\n    }\n  }, []);\n\n  useEffect(() => {\n    try {\n      if (primaryGoal) {\n        window.sessionStorage.setItem('waitlist_primary_goal', primaryGoal);\n      } else {\n        window.sessionStorage.removeItem('waitlist_primary_goal');\n      }\n    } catch {\n      // Ignore storage errors\n    }\n  }, [primaryGoal]);\n\n  useEffect(() => {\n    if (isHydrating) return;\n\n    if (step === 0) {\n      const button =\n        primaryGoalButtonRefs.current[selectedPrimaryGoalIndex] ??\n        primaryGoalButtonRefs.current[0];\n      button?.focus();\n    }\n\n    if (step === 1) {\n      const button =\n        socialPlatformButtonRefs.current[selectedSocialPlatformIndex] ??\n        socialPlatformButtonRefs.current[0];\n      button?.focus();\n    }\n\n    if (step === 2) {\n      spotifyUrlInputRef.current?.focus();\n    }\n  }, [\n    isHydrating,\n    selectedPrimaryGoalIndex,\n    selectedSocialPlatformIndex,\n    step,\n    socialPlatform,\n  ]);\n\n  useEffect(() => {\n    if (!isLoaded || !isSignedIn) return;\n    void (async () => {\n      try {\n        const response = await fetch('/api/waitlist', {\n          method: 'GET',\n          headers: { 'Content-Type': 'application/json' },\n        });\n        const data = (await response.json().catch(() => null)) as {\n          hasEntry: boolean;\n          status: string | null;\n          inviteToken: string | null;\n        } | null;\n\n        if (!response.ok || !data) return;\n\n        if (data.hasEntry) {\n          if (data.status === 'invited' && data.inviteToken) {\n            router.replace(`/claim/${encodeURIComponent(data.inviteToken)}`);\n            return;\n          }\n\n          if (data.status === 'claimed') {\n            router.replace('/app/dashboard');\n            return;\n          }\n          setIsSubmitted(true);\n        }\n      } catch {\n        // Ignore fetch errors; page can still be used.\n      }\n    })();\n  }, [isLoaded, isSignedIn, router]);\n\n  const validateStep = (targetStep: 0 | 1 | 2): FormErrors => {\n    const errors: FormErrors = {};\n\n    if (targetStep === 0) {\n      if (!primaryGoal) {\n        // Keep messaging minimal; just block progression\n        errors.primaryGoal = ['Primary goal is required'];\n      }\n    }\n\n    if (targetStep === 1) {\n      const resolvedUrl = resolvePrimarySocialUrl(\n        primarySocialUrl,\n        socialPlatform\n      );\n\n      if (!primarySocialUrl.trim()) {\n        errors.primarySocialUrl = ['Social profile link is required'];\n      } else if (!isValidUrl(resolvedUrl)) {\n        errors.primarySocialUrl = ['Please enter a valid URL'];\n      }\n    }\n\n    if (targetStep === 2) {\n      if (spotifyUrl.trim() && !isValidUrl(spotifyUrl)) {\n        errors.spotifyUrl = ['Please enter a valid Spotify URL'];\n      }\n    }\n\n    return errors;\n  };\n\n  const handleNext = () => {\n    setError('');\n    const errors = validateStep(step);\n    if (Object.keys(errors).length > 0) {\n      setFieldErrors(errors);\n\n      if (step === 0) {\n        const fallback = primaryGoalButtonRefs.current[primaryGoalFocusIndex];\n        fallback?.focus();\n      }\n\n      if (step === 1) {\n        primarySocialUrlInputRef.current?.focus();\n      }\n\n      if (step === 2) {\n        spotifyUrlInputRef.current?.focus();\n      }\n\n      return;\n    }\n\n    setFieldErrors({});\n\n    if (step === 0) setStep(1);\n    if (step === 1) setStep(2);\n  };\n\n  const handleBack = () => {\n    setError('');\n    setFieldErrors({});\n    if (step === 2) setStep(1);\n    if (step === 1) setStep(0);\n  };\n\n  const handlePrimaryGoalSelect = (goal: PrimaryGoal) => {\n    if (isSubmitting) return;\n    setPrimaryGoal(goal);\n    setError('');\n    setFieldErrors({});\n\n    const index = PRIMARY_GOAL_OPTIONS.findIndex(o => o.value === goal);\n    if (index >= 0) {\n      setPrimaryGoalFocusIndex(index);\n    }\n\n    setStep(prev => (prev === 0 ? 1 : prev));\n  };\n\n  const handlePrimaryGoalKeyDown = (e: React.KeyboardEvent) => {\n    if (isSubmitting) return;\n    if (e.key !== 'ArrowDown' && e.key !== 'ArrowUp') return;\n    e.preventDefault();\n\n    const delta = e.key === 'ArrowDown' ? 1 : -1;\n    const nextIndex =\n      (primaryGoalFocusIndex + delta + PRIMARY_GOAL_OPTIONS.length) %\n      PRIMARY_GOAL_OPTIONS.length;\n\n    setPrimaryGoalFocusIndex(nextIndex);\n    primaryGoalButtonRefs.current[nextIndex]?.focus();\n  };\n\n  const handleSocialPlatformSelect = (next: SocialPlatform) => {\n    if (isSubmitting) return;\n    setSocialPlatform(next);\n    setPrimarySocialUrl('');\n    setFieldErrors({});\n    setError('');\n  };\n\n  const handleSocialPlatformKeyDown = (e: React.KeyboardEvent) => {\n    if (isSubmitting) return;\n    if (e.key !== 'ArrowLeft' && e.key !== 'ArrowRight') return;\n    e.preventDefault();\n\n    const delta = e.key === 'ArrowRight' ? 1 : -1;\n    const nextIndex =\n      (selectedSocialPlatformIndex + delta + SOCIAL_PLATFORM_OPTIONS.length) %\n      SOCIAL_PLATFORM_OPTIONS.length;\n    const nextPlatform = SOCIAL_PLATFORM_OPTIONS[nextIndex]?.value;\n    if (!nextPlatform) return;\n\n    handleSocialPlatformSelect(nextPlatform);\n    socialPlatformButtonRefs.current[nextIndex]?.focus();\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setFieldErrors({});\n\n    const allErrors: FormErrors = {\n      ...validateStep(0),\n      ...validateStep(1),\n      ...validateStep(2),\n    };\n\n    if (Object.keys(allErrors).length > 0) {\n      setFieldErrors(allErrors);\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      const resolvedPrimarySocialUrl = resolvePrimarySocialUrl(\n        primarySocialUrl,\n        socialPlatform\n      );\n      const normalizedSpotifyUrl = spotifyUrl ? normalizeUrl(spotifyUrl) : null;\n      const sanitizedHeardAbout = heardAbout.trim() || null;\n\n      const response = await fetch('/api/waitlist', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          primaryGoal,\n          primarySocialUrl: resolvedPrimarySocialUrl,\n          spotifyUrl: normalizedSpotifyUrl,\n          heardAbout: sanitizedHeardAbout,\n          selectedPlan, // Quietly track pricing tier interest\n        }),\n      });\n\n      const result = await response.json();\n\n      if (!response.ok) {\n        if (result.errors) {\n          setFieldErrors(result.errors as FormErrors);\n        } else {\n          setError(result.error || 'Something went wrong. Please try again.');\n        }\n        return;\n      }\n\n      setIsSubmitted(true);\n    } catch (err) {\n      console.error('Waitlist signup error:', err);\n      setError('Something went wrong. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleSignOut = async () => {\n    if (isSubmitting || isSigningOut) return;\n    setIsSigningOut(true);\n\n    try {\n      await signOut(() => router.push('/'));\n    } catch (err) {\n      console.error('Waitlist sign out error:', err);\n      setIsSigningOut(false);\n    }\n  };\n\n  if (isSubmitted) {\n    return (\n      <AuthLayout\n        formTitle=\"You're on the waitlist!\"\n        showLogo={false}\n        showFooterPrompt={false}\n        formTitleClassName='text-lg font-medium text-primary-token mb-4 text-center'\n      >\n        <p className='text-sm text-secondary-token text-center'>\n          Early access is rolling out in stages.\n        </p>\n\n        <div className='flex items-center justify-center pt-6'>\n          <button\n            type='button'\n            onClick={handleSignOut}\n            disabled={isSigningOut}\n            className='text-sm text-secondary-token hover:text-primary-token transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring-themed rounded-md px-2 py-1'\n          >\n            {isSigningOut ? 'Signing out…' : 'Sign out'}\n          </button>\n        </div>\n      </AuthLayout>\n    );\n  }\n\n  const currentStepErrors = validateStep(step);\n  const isCurrentStepValid = Object.keys(currentStepErrors).length === 0;\n  const allErrors: FormErrors = {\n    ...validateStep(0),\n    ...validateStep(1),\n    ...validateStep(2),\n  };\n  const isReadyToSubmit = Object.keys(allErrors).length === 0;\n\n  if (isHydrating) {\n    return <WaitlistSkeleton />;\n  }\n\n  return (\n    <AuthLayout\n      formTitle=''\n      showFormTitle={false}\n      showFooterPrompt={false}\n      showLogo={false}\n    >\n      {/* Form */}\n      <div className='w-full'>\n        <form onSubmit={handleSubmit} className='space-y-4'>\n          {step === 0 ? (\n            <>\n              <div className='space-y-1'>\n                <h1 className='text-lg font-medium text-primary-token text-center'>\n                  Primary goal\n                </h1>\n                <p\n                  id='waitlist-primary-goal-hint'\n                  className='text-sm text-secondary-token text-center'\n                >\n                  You can change this later.\n                </p>\n              </div>\n\n              <div\n                className='grid grid-cols-1 gap-2'\n                role='radiogroup'\n                aria-label='Primary goal'\n                aria-describedby={\n                  fieldErrors.primaryGoal\n                    ? 'waitlist-primary-goal-hint waitlist-primary-goal-error'\n                    : 'waitlist-primary-goal-hint'\n                }\n                onKeyDown={handlePrimaryGoalKeyDown}\n              >\n                {PRIMARY_GOAL_OPTIONS.map((option, index) => {\n                  const isSelected = primaryGoal === option.value;\n                  const isTabStop = primaryGoal ? isSelected : index === 0;\n\n                  return (\n                    <Button\n                      key={option.value}\n                      ref={el => {\n                        primaryGoalButtonRefs.current[index] = el;\n                      }}\n                      type='button'\n                      role='radio'\n                      aria-checked={isSelected}\n                      tabIndex={isTabStop ? 0 : -1}\n                      onClick={() => handlePrimaryGoalSelect(option.value)}\n                      variant={isSelected ? 'primary' : 'secondary'}\n                      className='w-full h-12 justify-center rounded-xl text-[15px] leading-5'\n                      disabled={isSubmitting}\n                    >\n                      {option.label}\n                    </Button>\n                  );\n                })}\n              </div>\n\n              {fieldErrors.primaryGoal && (\n                <p\n                  id='waitlist-primary-goal-error'\n                  role='alert'\n                  className='text-sm text-red-400'\n                >\n                  {fieldErrors.primaryGoal?.[0]}\n                </p>\n              )}\n            </>\n          ) : null}\n\n          {step === 1 ? (\n            <>\n              <div className='space-y-1'>\n                <h1 className='text-lg font-medium text-primary-token text-center'>\n                  Where do fans find you?\n                </h1>\n              </div>\n\n              <div\n                className='flex items-center justify-center gap-2'\n                role='radiogroup'\n                aria-label='Social platform'\n                onKeyDown={handleSocialPlatformKeyDown}\n              >\n                {SOCIAL_PLATFORM_OPTIONS.map(option => (\n                  <button\n                    key={option.value}\n                    ref={el => {\n                      const index = SOCIAL_PLATFORM_OPTIONS.findIndex(\n                        item => item.value === option.value\n                      );\n                      if (index >= 0) {\n                        socialPlatformButtonRefs.current[index] = el;\n                      }\n                    }}\n                    type='button'\n                    role='radio'\n                    aria-checked={socialPlatform === option.value}\n                    tabIndex={socialPlatform === option.value ? 0 : -1}\n                    onClick={() => {\n                      handleSocialPlatformSelect(option.value);\n                    }}\n                    className={`rounded-full px-3 py-1.5 text-xs font-medium transition-colors border focus-ring-themed ${\n                      socialPlatform === option.value\n                        ? 'bg-surface-2 text-primary-token border-border'\n                        : 'bg-transparent text-secondary-token border-subtle hover:bg-surface-1'\n                    }`}\n                    disabled={isSubmitting}\n                  >\n                    {option.label}\n                  </button>\n                ))}\n              </div>\n\n              {socialPlatform === 'other' ? (\n                <>\n                  <label htmlFor='primarySocialUrl' className='sr-only'>\n                    Social profile link\n                  </label>\n                  <Input\n                    ref={primarySocialUrlInputRef}\n                    type='url'\n                    id='primarySocialUrl'\n                    value={primarySocialUrl}\n                    onChange={e => setPrimarySocialUrl(e.target.value)}\n                    maxLength={2048}\n                    required\n                    aria-invalid={Boolean(fieldErrors.primarySocialUrl)}\n                    aria-describedby={\n                      fieldErrors.primarySocialUrl\n                        ? 'waitlist-primary-social-url-error'\n                        : undefined\n                    }\n                    placeholder='Paste a link'\n                    disabled={isSubmitting}\n                    onKeyDown={e => {\n                      if (e.key !== 'Enter') return;\n                      e.preventDefault();\n                      handleNext();\n                    }}\n                  />\n                </>\n              ) : (\n                <div className='w-full flex items-center gap-2 rounded-lg border border-border bg-surface-0 px-4 py-3 focus-within:ring-2 focus-within:ring-[rgb(var(--focus-ring))] focus-within:ring-offset-2 focus-within:ring-offset-(--bg)'>\n                  <span className='text-sm text-secondary-token whitespace-nowrap'>\n                    {getSocialPlatformPrefix(socialPlatform).display}\n                  </span>\n                  <input\n                    ref={primarySocialUrlInputRef}\n                    type='text'\n                    id='primarySocialUrl'\n                    value={primarySocialUrl}\n                    onChange={e => setPrimarySocialUrl(e.target.value)}\n                    maxLength={2048}\n                    required\n                    aria-label='Social profile username'\n                    aria-invalid={Boolean(fieldErrors.primarySocialUrl)}\n                    aria-describedby={\n                      fieldErrors.primarySocialUrl\n                        ? 'waitlist-primary-social-url-error'\n                        : undefined\n                    }\n                    className='min-w-0 flex-1 bg-transparent text-primary-token placeholder:text-tertiary-token focus:outline-none'\n                    placeholder='yourusername'\n                    disabled={isSubmitting}\n                    onKeyDown={e => {\n                      if (e.key !== 'Enter') return;\n                      e.preventDefault();\n                      handleNext();\n                    }}\n                  />\n                </div>\n              )}\n\n              {fieldErrors.primarySocialUrl && (\n                <p\n                  id='waitlist-primary-social-url-error'\n                  role='alert'\n                  className='text-sm text-red-400'\n                >\n                  {fieldErrors.primarySocialUrl[0]}\n                </p>\n              )}\n            </>\n          ) : null}\n\n          {step === 2 ? (\n            <>\n              <label htmlFor='spotifyUrl' className='sr-only'>\n                Spotify link\n              </label>\n              <Input\n                type='url'\n                id='spotifyUrl'\n                value={spotifyUrl}\n                onChange={e => setSpotifyUrl(e.target.value)}\n                ref={spotifyUrlInputRef}\n                maxLength={2048}\n                aria-invalid={Boolean(fieldErrors.spotifyUrl)}\n                aria-describedby={\n                  fieldErrors.spotifyUrl\n                    ? 'waitlist-spotify-url-error'\n                    : undefined\n                }\n                placeholder='open.spotify.com/artist/... (optional)'\n                disabled={isSubmitting}\n              />\n              {fieldErrors.spotifyUrl && (\n                <p\n                  id='waitlist-spotify-url-error'\n                  role='alert'\n                  className='text-sm text-red-400'\n                >\n                  {fieldErrors.spotifyUrl[0]}\n                </p>\n              )}\n\n              <label htmlFor='heardAbout' className='sr-only'>\n                How did you hear about us?\n              </label>\n              <Input\n                type='text'\n                id='heardAbout'\n                value={heardAbout}\n                onChange={e => setHeardAbout(e.target.value)}\n                maxLength={280}\n                placeholder='How did you hear about us? (optional)'\n                disabled={isSubmitting}\n              />\n            </>\n          ) : null}\n\n          {error && (\n            <div role='alert' className='text-red-400 text-sm text-center'>\n              {error}\n            </div>\n          )}\n\n          {step === 2 ? (\n            <button\n              type='submit'\n              disabled={isSubmitting || !isReadyToSubmit}\n              className={BUTTON_CLASSES}\n            >\n              {isSubmitting ? 'Submitting…' : 'Join the waitlist'}\n            </button>\n          ) : null}\n\n          {step === 1 ? (\n            <button\n              type='button'\n              onClick={handleNext}\n              disabled={isSubmitting || !isCurrentStepValid}\n              className={BUTTON_CLASSES}\n            >\n              Continue\n            </button>\n          ) : null}\n\n          <div className='flex items-center justify-center pt-2'>\n            <AuthBackButton\n              onClick={() => {\n                if (isSubmitting) return;\n                if (step === 0) {\n                  router.push('/');\n                  return;\n                }\n                handleBack();\n              }}\n              className='text-center'\n            />\n          </div>\n\n          <div className='flex items-center justify-center'>\n            <button\n              type='button'\n              onClick={handleSignOut}\n              disabled={isSubmitting || isSigningOut}\n              className='text-sm text-red-400 hover:text-red-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed'\n            >\n              {isSigningOut ? 'Signing out…' : 'Sign out'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </AuthLayout>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/admin/AdminCreatorFilters.tsx" },
        "span": [575, 1074],
        "sourceCode": "'use client';\n\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@jovie/ui';\nimport * as React from 'react';\n\nexport interface AdminCreatorFiltersProps {\n  initialPageSize: number;\n}\n\nexport function AdminCreatorFilters({\n  initialPageSize,\n}: AdminCreatorFiltersProps) {\n  const [pageSizeValue, setPageSizeValue] = React.useState<string>(\n    String(initialPageSize)\n  );\n\n  return (\n    <div className='flex items-center gap-2 text-xs text-secondary-token'>\n      <input type='hidden' name='pageSize' value={pageSizeValue} />\n\n      <label className='flex items-center gap-1'>\n        <span>Per page</span>\n        <Select value={pageSizeValue} onValueChange={setPageSizeValue}>\n          <SelectTrigger className='h-8 w-20 px-2 text-xs'>\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value='10'>10</SelectItem>\n            <SelectItem value='20'>20</SelectItem>\n            <SelectItem value='50'>50</SelectItem>\n          </SelectContent>\n        </Select>\n      </label>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/admin/AdminCreatorProfilesWithSidebar.tsx"
        },
        "span": [22887, 23080],
        "sourceCode": "'use client';\n\nimport {\n  Badge,\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  Input,\n} from '@jovie/ui';\nimport { Check, Star } from 'lucide-react';\nimport dynamic from 'next/dynamic';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminCreatorFilters } from '@/components/admin/AdminCreatorFilters';\nimport { CreatorActionsMenu } from '@/components/admin/CreatorActionsMenu';\nimport { CreatorAvatarCell } from '@/components/admin/CreatorAvatarCell';\nimport {\n  getNextSort,\n  getSortDirection,\n  SORTABLE_COLUMNS,\n  SortableColumnKey,\n} from '@/components/admin/creator-sort-config';\nimport { IngestProfileDropdown } from '@/components/admin/IngestProfileDropdown';\nimport { AdminTableShell } from '@/components/admin/table/AdminTableShell';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useAdminTableKeyboardNavigation } from '@/components/admin/table/useAdminTableKeyboardNavigation';\nimport { useAdminTablePaginationLinks } from '@/components/admin/table/useAdminTablePaginationLinks';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { useCreatorActions } from '@/components/admin/useCreatorActions';\nimport { useCreatorVerification } from '@/components/admin/useCreatorVerification';\nimport { useToast } from '@/components/molecules/ToastContainer';\nimport { RightDrawer } from '@/components/organisms/RightDrawer';\nimport { useMediaQuery } from '@/hooks/useMediaQuery';\n\nimport type {\n  AdminCreatorProfileRow,\n  AdminCreatorProfilesSort,\n} from '@/lib/admin/creator-profiles';\nimport { api } from '@/lib/api-client';\nimport {\n  getCreatorSocialLinksSafe,\n  updateCreatorAvatar,\n} from '@/lib/api-client/endpoints/admin/creators';\nimport { ApiError } from '@/lib/api-client/types';\nimport { cn } from '@/lib/utils';\nimport type { Contact, ContactSidebarMode } from '@/types';\n\nconst DeleteCreatorDialog = dynamic(\n  () =>\n    import('@/components/admin/DeleteCreatorDialog').then(mod => ({\n      default: mod.DeleteCreatorDialog,\n    })),\n  { ssr: false }\n);\n\nconst ContactSidebar = dynamic(\n  () =>\n    import('@/components/organisms/ContactSidebar').then(mod => ({\n      default: mod.ContactSidebar,\n    })),\n  {\n    loading: () => <div className='h-full w-full animate-pulse bg-surface-1' />,\n    ssr: false,\n  }\n);\n\nconst CONTACT_PANEL_WIDTH = 320;\n\nfunction useOptionalTableMeta() {\n  try {\n    return useTableMeta();\n  } catch {\n    return null;\n  }\n}\n\nexport interface AdminCreatorProfilesWithSidebarProps {\n  profiles: AdminCreatorProfileRow[];\n  page: number;\n  pageSize: number;\n  total: number;\n  search: string;\n  sort: AdminCreatorProfilesSort;\n  mode?: ContactSidebarMode;\n  /** Base path for pagination/sort links. Defaults to '/app/admin/creators' */\n  basePath?: string;\n}\n\nfunction mapProfileToContact(\n  profile: AdminCreatorProfileRow | null\n): Contact | null {\n  if (!profile) return null;\n  return {\n    id: profile.id,\n    username: profile.username,\n    displayName:\n      'displayName' in profile ? (profile.displayName ?? null) : null,\n    firstName: undefined,\n    lastName: undefined,\n    avatarUrl: profile.avatarUrl ?? null,\n    socialLinks: [],\n  };\n}\n\n// Admin endpoint group for page-level routes (not /api/admin/)\nconst adminPagesApi = api.createGroup('/app/admin/creators');\n\n/**\n * Response type for bulk refresh endpoint\n */\ninterface BulkRefreshResponse {\n  success: boolean;\n  queuedCount?: number;\n  error?: string;\n}\n\nexport function AdminCreatorProfilesWithSidebar({\n  profiles: initialProfiles,\n  page,\n  pageSize,\n  total,\n  search,\n  sort,\n  mode = 'admin',\n  basePath = '/app/admin/creators',\n}: AdminCreatorProfilesWithSidebarProps) {\n  const router = useRouter();\n  const { showToast } = useToast();\n  const {\n    profiles,\n    statuses: verificationStatuses,\n    toggleVerification,\n  } = useCreatorVerification(initialProfiles);\n\n  const {\n    profiles: profilesWithActions,\n    toggleFeatured,\n    toggleMarketing,\n    deleteCreatorOrUser,\n  } = useCreatorActions(profiles);\n\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [openMenuProfileId, setOpenMenuProfileId] = useState<string | null>(\n    null\n  );\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [draftContact, setDraftContact] = useState<Contact | null>(null);\n\n  const [ingestRefreshStatuses, setIngestRefreshStatuses] = useState<\n    Record<string, 'idle' | 'loading' | 'success' | 'error'>\n  >({});\n  const tableMetaCtx = useOptionalTableMeta();\n  const [searchTerm, setSearchTerm] = useState(search);\n  const setTableMeta = React.useMemo(\n    () => tableMetaCtx?.setTableMeta ?? (() => {}),\n    [tableMetaCtx]\n  );\n\n  const isMobile = useMediaQuery('(max-width: 767px)');\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [profileToDelete, setProfileToDelete] =\n    useState<AdminCreatorProfileRow | null>(null);\n\n  const {\n    totalPages,\n    canPrev,\n    canNext,\n    from,\n    to,\n    prevHref,\n    nextHref,\n    clearHref,\n    buildHref,\n  } = useAdminTablePaginationLinks<AdminCreatorProfilesSort>({\n    basePath,\n    page,\n    pageSize,\n    search,\n    sort,\n    total,\n  });\n\n  const createSortHref = (column: SortableColumnKey) =>\n    buildHref({ page: 1, sort: getNextSort(sort, column) });\n\n  const filteredProfiles = useMemo(() => {\n    const term = searchTerm.trim().toLowerCase();\n    if (!term) return profilesWithActions;\n    return profilesWithActions.filter(profile => {\n      const username = profile.username.toLowerCase();\n      const displayName =\n        'displayName' in profile\n          ? (profile.displayName ?? '').toLowerCase()\n          : '';\n      return username.includes(term) || displayName.includes(term);\n    });\n  }, [profilesWithActions, searchTerm]);\n\n  const rowIds = useMemo(\n    () => filteredProfiles.map(profile => profile.id),\n    [filteredProfiles]\n  );\n\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n  } = useRowSelection(rowIds);\n\n  const selectedProfile = useMemo(\n    () => filteredProfiles.find(p => p.id === selectedId) ?? null,\n    [filteredProfiles, selectedId]\n  );\n\n  const hydrateContactSocialLinks = useCallback(\n    async (profileId: string): Promise<void> => {\n      const contactBase = mapProfileToContact(\n        filteredProfiles.find(p => p.id === profileId) ?? null\n      );\n      if (!contactBase) return;\n\n      const result = await getCreatorSocialLinksSafe(profileId);\n\n      if (!result.ok || !result.data.success) {\n        setDraftContact(contactBase);\n        return;\n      }\n\n      setDraftContact({\n        ...contactBase,\n        socialLinks: result.data.links.map(link => ({\n          id: link.id,\n          label: link.label,\n          url: link.url,\n          platformType: link.platformType,\n        })),\n      });\n    },\n    [filteredProfiles]\n  );\n\n  const effectiveContact = useMemo(() => {\n    if (draftContact && draftContact.id === selectedId) return draftContact;\n    return mapProfileToContact(selectedProfile);\n  }, [draftContact, selectedId, selectedProfile]);\n\n  const handleRowClick = useCallback((id: string) => {\n    setSelectedId(id);\n    setSidebarOpen(true);\n    setDraftContact(null);\n  }, []);\n\n  React.useEffect(() => {\n    if (!sidebarOpen || !selectedId) return;\n    void hydrateContactSocialLinks(selectedId);\n  }, [hydrateContactSocialLinks, selectedId, sidebarOpen]);\n\n  const refreshIngest = useCallback(\n    async (profileId: string): Promise<void> => {\n      setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'loading' }));\n      try {\n        const result = await adminPagesApi.request<BulkRefreshResponse>(\n          'POST',\n          '/bulk-refresh',\n          { body: { profileIds: [profileId] } }\n        );\n\n        if (!result.ok) {\n          throw result.error;\n        }\n\n        if (!result.data.success) {\n          throw new Error(result.data.error ?? 'Failed to queue ingestion');\n        }\n\n        setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'success' }));\n        showToast({\n          type: 'success',\n          message: 'Ingestion refresh queued',\n        });\n        router.refresh();\n\n        if (selectedId === profileId) {\n          void hydrateContactSocialLinks(profileId);\n        }\n      } catch (error) {\n        setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'error' }));\n        showToast({\n          type: 'error',\n          message:\n            error instanceof ApiError\n              ? error.message\n              : error instanceof Error\n                ? error.message\n                : 'Refresh failed',\n        });\n      } finally {\n        window.setTimeout(() => {\n          setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'idle' }));\n        }, 2200);\n      }\n    },\n    [hydrateContactSocialLinks, router, selectedId, showToast]\n  );\n\n  const { handleKeyDown } = useAdminTableKeyboardNavigation({\n    items: filteredProfiles,\n    selectedId,\n    onSelect: setSelectedId,\n    onToggleSidebar: () => setSidebarOpen(open => !open),\n    onCloseSidebar: () => setSidebarOpen(false),\n    isSidebarOpen: sidebarOpen,\n    getId: profile => profile.id,\n  });\n\n  const handleContactChange = (updated: Contact) => {\n    setDraftContact(updated);\n  };\n\n  const handleSidebarClose = () => {\n    setSidebarOpen(false);\n  };\n\n  const handleAvatarUpload = useCallback(\n    async (file: File, contact: Contact): Promise<string> => {\n      // Step 1: Upload image to blob storage (uses FormData, not JSON)\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const uploadResponse = await fetch('/api/images/upload', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const uploadJson = (await uploadResponse.json().catch(() => ({}))) as {\n        blobUrl?: string;\n        error?: string;\n      };\n\n      if (!uploadResponse.ok || !uploadJson.blobUrl) {\n        const message = uploadJson.error || 'Failed to upload avatar';\n        throw new Error(message);\n      }\n\n      const blobUrl = uploadJson.blobUrl;\n\n      // Step 2: Update creator profile with new avatar URL via admin API\n      await updateCreatorAvatar({\n        profileId: contact.id,\n        avatarUrl: blobUrl,\n      });\n\n      return blobUrl;\n    },\n    []\n  );\n\n  // Ensure the phone preview never opens empty: select the first creator if none is selected.\n  React.useEffect(() => {\n    if (sidebarOpen && !selectedId && profilesWithActions.length > 0) {\n      setSelectedId(profilesWithActions[0]!.id);\n      setDraftContact(null);\n    }\n  }, [sidebarOpen, selectedId, profilesWithActions]);\n\n  // Expose row count and toggle handler for dashboard action button\n  React.useEffect(() => {\n    const toggle = () => {\n      setSidebarOpen(prev => {\n        const next = !prev;\n        if (next && !selectedId && filteredProfiles[0]) {\n          setSelectedId(filteredProfiles[0]!.id);\n          setDraftContact(null);\n        }\n        return next;\n      });\n    };\n\n    setTableMeta({\n      rowCount: filteredProfiles.length,\n      toggle,\n      rightPanelWidth:\n        sidebarOpen && Boolean(effectiveContact) ? CONTACT_PANEL_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [\n    filteredProfiles,\n    selectedId,\n    setTableMeta,\n    sidebarOpen,\n    effectiveContact,\n  ]);\n\n  return (\n    <div className='flex h-full min-h-0 flex-col md:flex-row md:items-stretch'>\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <AdminTableShell\n          scrollContainerProps={{\n            tabIndex: 0,\n            onKeyDown: handleKeyDown,\n          }}\n          toolbar={\n            <div className='flex h-14 w-full items-center gap-3 px-4'>\n              <div className='hidden sm:block text-xs text-secondary-token'>\n                Showing {from.toLocaleString()}–{to.toLocaleString()} of{' '}\n                {total.toLocaleString()} profiles\n              </div>\n              <div className='ml-auto flex items-center gap-3'>\n                <form\n                  action={basePath}\n                  method='get'\n                  className='relative isolate flex items-center gap-2'\n                >\n                  <input type='hidden' name='sort' value={sort} />\n                  <input type='hidden' name='pageSize' value={pageSize} />\n                  <Input\n                    name='q'\n                    placeholder='Search by handle'\n                    value={searchTerm}\n                    onChange={event => setSearchTerm(event.target.value)}\n                    className='w-[240px]'\n                  />\n                  <input type='hidden' name='page' value='1' />\n                  <Button type='submit' size='sm' variant='secondary'>\n                    Search\n                  </Button>\n                  {search && search.length > 0 && (\n                    <Button asChild size='sm' variant='ghost'>\n                      <Link href={clearHref}>Clear</Link>\n                    </Button>\n                  )}\n                </form>\n                <div\n                  className='hidden h-6 w-px bg-border sm:block'\n                  aria-hidden='true'\n                />\n                <IngestProfileDropdown />\n              </div>\n            </div>\n          }\n          footer={\n            <div className='flex flex-wrap items-center justify-between gap-3 px-3 py-2 text-xs text-secondary-token'>\n              <div className='flex items-center gap-2'>\n                <span>\n                  Page {page} of {totalPages}\n                </span>\n                <span className='text-tertiary-token'>\n                  {from.toLocaleString()}–{to.toLocaleString()} of{' '}\n                  {total.toLocaleString()}\n                </span>\n              </div>\n              <div className='flex items-center gap-3'>\n                <div className='flex items-center gap-2'>\n                  <span>Rows per page</span>\n                  <AdminCreatorFilters initialPageSize={pageSize} />\n                </div>\n                <div className='flex items-center gap-2'>\n                  <Button asChild size='sm' variant='ghost' disabled={!canPrev}>\n                    <Link href={prevHref ?? '#'} aria-disabled={!canPrev}>\n                      Previous\n                    </Link>\n                  </Button>\n                  <Button asChild size='sm' variant='ghost' disabled={!canNext}>\n                    <Link href={nextHref ?? '#'} aria-disabled={!canNext}>\n                      Next\n                    </Link>\n                  </Button>\n                </div>\n              </div>\n            </div>\n          }\n        >\n          {({ headerElevated, stickyTopPx }) => (\n            <table className='w-full table-fixed border-separate border-spacing-0 text-[13px]'>\n              <colgroup>\n                <col className='w-14' />\n                <col className='w-[320px]' />\n                <col className='w-[160px]' />\n                <col className='w-[160px]' />\n                <col className='w-[160px]' />\n                <col className='w-[140px]' />\n              </colgroup>\n              <thead className='text-left text-secondary-token'>\n                <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                  <th\n                    className={cn(\n                      'sticky z-20 w-14 px-4 py-3 text-left border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <Checkbox\n                      aria-label='Select all creators'\n                      checked={headerCheckboxState}\n                      onCheckedChange={toggleSelectAll}\n                      className='border-sidebar-border data-[state=checked]:bg-sidebar-accent data-[state=checked]:text-sidebar-accent-foreground'\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <span className='sr-only'>Creator</span>\n                    <div\n                      className={cn(\n                        'inline-flex items-center transition-all duration-150',\n                        selectedCount > 0\n                          ? 'opacity-100 translate-y-0'\n                          : 'pointer-events-none opacity-0 -translate-y-0.5'\n                      )}\n                    >\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button\n                            variant='secondary'\n                            size='sm'\n                            className='normal-case'\n                          >\n                            Bulk actions\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align='start'>\n                          <DropdownMenuItem disabled>\n                            Feature selected (coming soon)\n                          </DropdownMenuItem>\n                          <DropdownMenuItem disabled>\n                            Unverify selected (coming soon)\n                          </DropdownMenuItem>\n                          <DropdownMenuItem\n                            disabled\n                            className='text-destructive'\n                          >\n                            Delete selected (coming soon)\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </div>\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.created.label}\n                      direction={getSortDirection(sort, 'created')}\n                      onClick={() => router.push(createSortHref('created'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.claimed.label}\n                      direction={getSortDirection(sort, 'claimed')}\n                      onClick={() => router.push(createSortHref('claimed'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.verified.label}\n                      direction={getSortDirection(sort, 'verified')}\n                      onClick={() => router.push(createSortHref('verified'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-right border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <span className='sr-only'>Action</span>\n                    <div className='flex items-center justify-end' />\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {profilesWithActions.length === 0 ? (\n                  <tr>\n                    <td\n                      colSpan={6}\n                      className='px-4 py-10 text-center text-sm text-secondary-token'\n                    >\n                      No creator profiles found.\n                    </td>\n                  </tr>\n                ) : (\n                  profilesWithActions.map((profile, index) => {\n                    const isSelected = profile.id === selectedId;\n                    const isChecked = selectedIds.has(profile.id);\n                    const rowNumber = (page - 1) * pageSize + index + 1;\n                    const displayName =\n                      'displayName' in profile\n                        ? (profile.displayName ?? null)\n                        : null;\n                    return (\n                      <tr\n                        key={profile.id}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0',\n                          isSelected ? 'bg-surface-2' : 'hover:bg-surface-2'\n                        )}\n                        onClick={() => handleRowClick(profile.id)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuProfileId(profile.id);\n                        }}\n                        aria-selected={isSelected}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${profile.username}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(profile.id)}\n                                className='border-sidebar-border data-[state=checked]:bg-sidebar-accent data-[state=checked]:text-sidebar-accent-foreground'\n                              />\n                            </div>\n                          </div>\n                        </td>\n                        <td\n                          className={cn(\n                            'px-4 py-3 align-middle',\n                            isSelected && 'bg-surface-2'\n                          )}\n                        >\n                          <div className='flex items-center gap-3'>\n                            <CreatorAvatarCell\n                              profileId={profile.id}\n                              username={profile.username}\n                              avatarUrl={profile.avatarUrl}\n                              verified={profile.isVerified}\n                              isFeatured={profile.isFeatured}\n                            />\n                            <div className='min-w-0'>\n                              {displayName ? (\n                                <div className='truncate font-medium text-primary-token'>\n                                  {displayName}\n                                </div>\n                              ) : null}\n                              <Link\n                                href={`/${profile.username}`}\n                                className={cn(\n                                  'truncate text-secondary-token transition-colors hover:text-primary-token',\n                                  displayName\n                                    ? 'text-xs'\n                                    : 'font-medium text-primary-token'\n                                )}\n                                onClick={event => event.stopPropagation()}\n                              >\n                                @{profile.username}\n                              </Link>\n                            </div>\n                          </div>\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs text-tertiary-token whitespace-nowrap'>\n                          {profile.createdAt\n                            ? new Intl.DateTimeFormat('en-US', {\n                                year: 'numeric',\n                                month: 'short',\n                                day: 'numeric',\n                              }).format(profile.createdAt)\n                            : '—'}\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs whitespace-nowrap'>\n                          <Badge\n                            size='sm'\n                            variant={\n                              profile.isClaimed ? 'success' : 'secondary'\n                            }\n                          >\n                            {profile.isClaimed ? (\n                              <>\n                                <Star\n                                  className='h-3 w-3 fill-current'\n                                  aria-hidden='true'\n                                />\n                                <span>Claimed</span>\n                              </>\n                            ) : (\n                              <span>Unclaimed</span>\n                            )}\n                          </Badge>\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs whitespace-nowrap'>\n                          <Badge\n                            size='sm'\n                            variant={\n                              profile.isVerified ? 'primary' : 'secondary'\n                            }\n                          >\n                            {profile.isVerified ? (\n                              <>\n                                <Check className='h-3 w-3' aria-hidden='true' />\n                                <span>Verified</span>\n                              </>\n                            ) : (\n                              <span>Not verified</span>\n                            )}\n                          </Badge>\n                        </td>\n                        <td\n                          className='px-4 py-3 align-middle text-right'\n                          onClick={e => e.stopPropagation()}\n                        >\n                          <div\n                            className={cn(\n                              'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                              openMenuProfileId === profile.id &&\n                                'opacity-100 pointer-events-auto'\n                            )}\n                          >\n                            <CreatorActionsMenu\n                              profile={profile}\n                              isMobile={isMobile}\n                              status={\n                                verificationStatuses[profile.id] ?? 'idle'\n                              }\n                              refreshIngestStatus={\n                                ingestRefreshStatuses[profile.id] ?? 'idle'\n                              }\n                              open={openMenuProfileId === profile.id}\n                              onOpenChange={open =>\n                                setOpenMenuProfileId(open ? profile.id : null)\n                              }\n                              onRefreshIngest={() => refreshIngest(profile.id)}\n                              onToggleVerification={async () => {\n                                const result = await toggleVerification(\n                                  profile.id,\n                                  !profile.isVerified\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle verification',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onToggleFeatured={async () => {\n                                const result = await toggleFeatured(\n                                  profile.id,\n                                  !profile.isFeatured\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle featured',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onToggleMarketing={async () => {\n                                const result = await toggleMarketing(\n                                  profile.id,\n                                  !profile.marketingOptOut\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle marketing',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onDelete={() => {\n                                setProfileToDelete(profile);\n                                setDeleteDialogOpen(true);\n                              }}\n                            />\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })\n                )}\n              </tbody>\n            </table>\n          )}\n        </AdminTableShell>\n      </div>\n      <RightDrawer\n        isOpen={sidebarOpen && Boolean(effectiveContact)}\n        width={CONTACT_PANEL_WIDTH}\n        ariaLabel='Contact details'\n        className='hidden md:flex bg-surface-0 border-subtle'\n      >\n        <div className='flex-1 min-h-0 overflow-auto'>\n          <ContactSidebar\n            contact={effectiveContact}\n            mode={mode}\n            isOpen={sidebarOpen && Boolean(effectiveContact)}\n            onClose={handleSidebarClose}\n            onRefresh={() => {\n              router.refresh();\n              if (selectedId) {\n                void hydrateContactSocialLinks(selectedId);\n              }\n            }}\n            onContactChange={handleContactChange}\n            onAvatarUpload={handleAvatarUpload}\n          />\n        </div>\n      </RightDrawer>\n      <DeleteCreatorDialog\n        profile={profileToDelete}\n        open={deleteDialogOpen}\n        onOpenChange={setDeleteDialogOpen}\n        onConfirm={async () => {\n          if (!profileToDelete) return { success: false };\n          const result = await deleteCreatorOrUser(profileToDelete.id);\n          if (result.success) {\n            setProfileToDelete(null);\n          }\n          return result;\n        }}\n      />\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useKeyWithClickEvents",
      "severity": "warning",
      "description": "Enforce to have the onClick mouse event with the onKeyUp, the onKeyDown, or the onKeyPress keyboard event.",
      "message": [
        { "elements": [], "content": "Enforce to have the " },
        { "elements": ["Emphasis"], "content": "onClick" },
        { "elements": [], "content": " mouse event with the " },
        { "elements": ["Emphasis"], "content": "onKeyUp" },
        { "elements": [], "content": ", the " },
        { "elements": ["Emphasis"], "content": "onKeyDown" },
        { "elements": [], "content": ", or the " },
        { "elements": ["Emphasis"], "content": "onKeyPress" },
        { "elements": [], "content": " keyboard event." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Actions triggered using mouse events should have corresponding keyboard events to account for keyboard-only navigation."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/admin/AdminCreatorProfilesWithSidebar.tsx"
        },
        "span": [22887, 23080],
        "sourceCode": "'use client';\n\nimport {\n  Badge,\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  Input,\n} from '@jovie/ui';\nimport { Check, Star } from 'lucide-react';\nimport dynamic from 'next/dynamic';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminCreatorFilters } from '@/components/admin/AdminCreatorFilters';\nimport { CreatorActionsMenu } from '@/components/admin/CreatorActionsMenu';\nimport { CreatorAvatarCell } from '@/components/admin/CreatorAvatarCell';\nimport {\n  getNextSort,\n  getSortDirection,\n  SORTABLE_COLUMNS,\n  SortableColumnKey,\n} from '@/components/admin/creator-sort-config';\nimport { IngestProfileDropdown } from '@/components/admin/IngestProfileDropdown';\nimport { AdminTableShell } from '@/components/admin/table/AdminTableShell';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useAdminTableKeyboardNavigation } from '@/components/admin/table/useAdminTableKeyboardNavigation';\nimport { useAdminTablePaginationLinks } from '@/components/admin/table/useAdminTablePaginationLinks';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { useCreatorActions } from '@/components/admin/useCreatorActions';\nimport { useCreatorVerification } from '@/components/admin/useCreatorVerification';\nimport { useToast } from '@/components/molecules/ToastContainer';\nimport { RightDrawer } from '@/components/organisms/RightDrawer';\nimport { useMediaQuery } from '@/hooks/useMediaQuery';\n\nimport type {\n  AdminCreatorProfileRow,\n  AdminCreatorProfilesSort,\n} from '@/lib/admin/creator-profiles';\nimport { api } from '@/lib/api-client';\nimport {\n  getCreatorSocialLinksSafe,\n  updateCreatorAvatar,\n} from '@/lib/api-client/endpoints/admin/creators';\nimport { ApiError } from '@/lib/api-client/types';\nimport { cn } from '@/lib/utils';\nimport type { Contact, ContactSidebarMode } from '@/types';\n\nconst DeleteCreatorDialog = dynamic(\n  () =>\n    import('@/components/admin/DeleteCreatorDialog').then(mod => ({\n      default: mod.DeleteCreatorDialog,\n    })),\n  { ssr: false }\n);\n\nconst ContactSidebar = dynamic(\n  () =>\n    import('@/components/organisms/ContactSidebar').then(mod => ({\n      default: mod.ContactSidebar,\n    })),\n  {\n    loading: () => <div className='h-full w-full animate-pulse bg-surface-1' />,\n    ssr: false,\n  }\n);\n\nconst CONTACT_PANEL_WIDTH = 320;\n\nfunction useOptionalTableMeta() {\n  try {\n    return useTableMeta();\n  } catch {\n    return null;\n  }\n}\n\nexport interface AdminCreatorProfilesWithSidebarProps {\n  profiles: AdminCreatorProfileRow[];\n  page: number;\n  pageSize: number;\n  total: number;\n  search: string;\n  sort: AdminCreatorProfilesSort;\n  mode?: ContactSidebarMode;\n  /** Base path for pagination/sort links. Defaults to '/app/admin/creators' */\n  basePath?: string;\n}\n\nfunction mapProfileToContact(\n  profile: AdminCreatorProfileRow | null\n): Contact | null {\n  if (!profile) return null;\n  return {\n    id: profile.id,\n    username: profile.username,\n    displayName:\n      'displayName' in profile ? (profile.displayName ?? null) : null,\n    firstName: undefined,\n    lastName: undefined,\n    avatarUrl: profile.avatarUrl ?? null,\n    socialLinks: [],\n  };\n}\n\n// Admin endpoint group for page-level routes (not /api/admin/)\nconst adminPagesApi = api.createGroup('/app/admin/creators');\n\n/**\n * Response type for bulk refresh endpoint\n */\ninterface BulkRefreshResponse {\n  success: boolean;\n  queuedCount?: number;\n  error?: string;\n}\n\nexport function AdminCreatorProfilesWithSidebar({\n  profiles: initialProfiles,\n  page,\n  pageSize,\n  total,\n  search,\n  sort,\n  mode = 'admin',\n  basePath = '/app/admin/creators',\n}: AdminCreatorProfilesWithSidebarProps) {\n  const router = useRouter();\n  const { showToast } = useToast();\n  const {\n    profiles,\n    statuses: verificationStatuses,\n    toggleVerification,\n  } = useCreatorVerification(initialProfiles);\n\n  const {\n    profiles: profilesWithActions,\n    toggleFeatured,\n    toggleMarketing,\n    deleteCreatorOrUser,\n  } = useCreatorActions(profiles);\n\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [openMenuProfileId, setOpenMenuProfileId] = useState<string | null>(\n    null\n  );\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [draftContact, setDraftContact] = useState<Contact | null>(null);\n\n  const [ingestRefreshStatuses, setIngestRefreshStatuses] = useState<\n    Record<string, 'idle' | 'loading' | 'success' | 'error'>\n  >({});\n  const tableMetaCtx = useOptionalTableMeta();\n  const [searchTerm, setSearchTerm] = useState(search);\n  const setTableMeta = React.useMemo(\n    () => tableMetaCtx?.setTableMeta ?? (() => {}),\n    [tableMetaCtx]\n  );\n\n  const isMobile = useMediaQuery('(max-width: 767px)');\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [profileToDelete, setProfileToDelete] =\n    useState<AdminCreatorProfileRow | null>(null);\n\n  const {\n    totalPages,\n    canPrev,\n    canNext,\n    from,\n    to,\n    prevHref,\n    nextHref,\n    clearHref,\n    buildHref,\n  } = useAdminTablePaginationLinks<AdminCreatorProfilesSort>({\n    basePath,\n    page,\n    pageSize,\n    search,\n    sort,\n    total,\n  });\n\n  const createSortHref = (column: SortableColumnKey) =>\n    buildHref({ page: 1, sort: getNextSort(sort, column) });\n\n  const filteredProfiles = useMemo(() => {\n    const term = searchTerm.trim().toLowerCase();\n    if (!term) return profilesWithActions;\n    return profilesWithActions.filter(profile => {\n      const username = profile.username.toLowerCase();\n      const displayName =\n        'displayName' in profile\n          ? (profile.displayName ?? '').toLowerCase()\n          : '';\n      return username.includes(term) || displayName.includes(term);\n    });\n  }, [profilesWithActions, searchTerm]);\n\n  const rowIds = useMemo(\n    () => filteredProfiles.map(profile => profile.id),\n    [filteredProfiles]\n  );\n\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n  } = useRowSelection(rowIds);\n\n  const selectedProfile = useMemo(\n    () => filteredProfiles.find(p => p.id === selectedId) ?? null,\n    [filteredProfiles, selectedId]\n  );\n\n  const hydrateContactSocialLinks = useCallback(\n    async (profileId: string): Promise<void> => {\n      const contactBase = mapProfileToContact(\n        filteredProfiles.find(p => p.id === profileId) ?? null\n      );\n      if (!contactBase) return;\n\n      const result = await getCreatorSocialLinksSafe(profileId);\n\n      if (!result.ok || !result.data.success) {\n        setDraftContact(contactBase);\n        return;\n      }\n\n      setDraftContact({\n        ...contactBase,\n        socialLinks: result.data.links.map(link => ({\n          id: link.id,\n          label: link.label,\n          url: link.url,\n          platformType: link.platformType,\n        })),\n      });\n    },\n    [filteredProfiles]\n  );\n\n  const effectiveContact = useMemo(() => {\n    if (draftContact && draftContact.id === selectedId) return draftContact;\n    return mapProfileToContact(selectedProfile);\n  }, [draftContact, selectedId, selectedProfile]);\n\n  const handleRowClick = useCallback((id: string) => {\n    setSelectedId(id);\n    setSidebarOpen(true);\n    setDraftContact(null);\n  }, []);\n\n  React.useEffect(() => {\n    if (!sidebarOpen || !selectedId) return;\n    void hydrateContactSocialLinks(selectedId);\n  }, [hydrateContactSocialLinks, selectedId, sidebarOpen]);\n\n  const refreshIngest = useCallback(\n    async (profileId: string): Promise<void> => {\n      setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'loading' }));\n      try {\n        const result = await adminPagesApi.request<BulkRefreshResponse>(\n          'POST',\n          '/bulk-refresh',\n          { body: { profileIds: [profileId] } }\n        );\n\n        if (!result.ok) {\n          throw result.error;\n        }\n\n        if (!result.data.success) {\n          throw new Error(result.data.error ?? 'Failed to queue ingestion');\n        }\n\n        setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'success' }));\n        showToast({\n          type: 'success',\n          message: 'Ingestion refresh queued',\n        });\n        router.refresh();\n\n        if (selectedId === profileId) {\n          void hydrateContactSocialLinks(profileId);\n        }\n      } catch (error) {\n        setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'error' }));\n        showToast({\n          type: 'error',\n          message:\n            error instanceof ApiError\n              ? error.message\n              : error instanceof Error\n                ? error.message\n                : 'Refresh failed',\n        });\n      } finally {\n        window.setTimeout(() => {\n          setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'idle' }));\n        }, 2200);\n      }\n    },\n    [hydrateContactSocialLinks, router, selectedId, showToast]\n  );\n\n  const { handleKeyDown } = useAdminTableKeyboardNavigation({\n    items: filteredProfiles,\n    selectedId,\n    onSelect: setSelectedId,\n    onToggleSidebar: () => setSidebarOpen(open => !open),\n    onCloseSidebar: () => setSidebarOpen(false),\n    isSidebarOpen: sidebarOpen,\n    getId: profile => profile.id,\n  });\n\n  const handleContactChange = (updated: Contact) => {\n    setDraftContact(updated);\n  };\n\n  const handleSidebarClose = () => {\n    setSidebarOpen(false);\n  };\n\n  const handleAvatarUpload = useCallback(\n    async (file: File, contact: Contact): Promise<string> => {\n      // Step 1: Upload image to blob storage (uses FormData, not JSON)\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const uploadResponse = await fetch('/api/images/upload', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const uploadJson = (await uploadResponse.json().catch(() => ({}))) as {\n        blobUrl?: string;\n        error?: string;\n      };\n\n      if (!uploadResponse.ok || !uploadJson.blobUrl) {\n        const message = uploadJson.error || 'Failed to upload avatar';\n        throw new Error(message);\n      }\n\n      const blobUrl = uploadJson.blobUrl;\n\n      // Step 2: Update creator profile with new avatar URL via admin API\n      await updateCreatorAvatar({\n        profileId: contact.id,\n        avatarUrl: blobUrl,\n      });\n\n      return blobUrl;\n    },\n    []\n  );\n\n  // Ensure the phone preview never opens empty: select the first creator if none is selected.\n  React.useEffect(() => {\n    if (sidebarOpen && !selectedId && profilesWithActions.length > 0) {\n      setSelectedId(profilesWithActions[0]!.id);\n      setDraftContact(null);\n    }\n  }, [sidebarOpen, selectedId, profilesWithActions]);\n\n  // Expose row count and toggle handler for dashboard action button\n  React.useEffect(() => {\n    const toggle = () => {\n      setSidebarOpen(prev => {\n        const next = !prev;\n        if (next && !selectedId && filteredProfiles[0]) {\n          setSelectedId(filteredProfiles[0]!.id);\n          setDraftContact(null);\n        }\n        return next;\n      });\n    };\n\n    setTableMeta({\n      rowCount: filteredProfiles.length,\n      toggle,\n      rightPanelWidth:\n        sidebarOpen && Boolean(effectiveContact) ? CONTACT_PANEL_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [\n    filteredProfiles,\n    selectedId,\n    setTableMeta,\n    sidebarOpen,\n    effectiveContact,\n  ]);\n\n  return (\n    <div className='flex h-full min-h-0 flex-col md:flex-row md:items-stretch'>\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <AdminTableShell\n          scrollContainerProps={{\n            tabIndex: 0,\n            onKeyDown: handleKeyDown,\n          }}\n          toolbar={\n            <div className='flex h-14 w-full items-center gap-3 px-4'>\n              <div className='hidden sm:block text-xs text-secondary-token'>\n                Showing {from.toLocaleString()}–{to.toLocaleString()} of{' '}\n                {total.toLocaleString()} profiles\n              </div>\n              <div className='ml-auto flex items-center gap-3'>\n                <form\n                  action={basePath}\n                  method='get'\n                  className='relative isolate flex items-center gap-2'\n                >\n                  <input type='hidden' name='sort' value={sort} />\n                  <input type='hidden' name='pageSize' value={pageSize} />\n                  <Input\n                    name='q'\n                    placeholder='Search by handle'\n                    value={searchTerm}\n                    onChange={event => setSearchTerm(event.target.value)}\n                    className='w-[240px]'\n                  />\n                  <input type='hidden' name='page' value='1' />\n                  <Button type='submit' size='sm' variant='secondary'>\n                    Search\n                  </Button>\n                  {search && search.length > 0 && (\n                    <Button asChild size='sm' variant='ghost'>\n                      <Link href={clearHref}>Clear</Link>\n                    </Button>\n                  )}\n                </form>\n                <div\n                  className='hidden h-6 w-px bg-border sm:block'\n                  aria-hidden='true'\n                />\n                <IngestProfileDropdown />\n              </div>\n            </div>\n          }\n          footer={\n            <div className='flex flex-wrap items-center justify-between gap-3 px-3 py-2 text-xs text-secondary-token'>\n              <div className='flex items-center gap-2'>\n                <span>\n                  Page {page} of {totalPages}\n                </span>\n                <span className='text-tertiary-token'>\n                  {from.toLocaleString()}–{to.toLocaleString()} of{' '}\n                  {total.toLocaleString()}\n                </span>\n              </div>\n              <div className='flex items-center gap-3'>\n                <div className='flex items-center gap-2'>\n                  <span>Rows per page</span>\n                  <AdminCreatorFilters initialPageSize={pageSize} />\n                </div>\n                <div className='flex items-center gap-2'>\n                  <Button asChild size='sm' variant='ghost' disabled={!canPrev}>\n                    <Link href={prevHref ?? '#'} aria-disabled={!canPrev}>\n                      Previous\n                    </Link>\n                  </Button>\n                  <Button asChild size='sm' variant='ghost' disabled={!canNext}>\n                    <Link href={nextHref ?? '#'} aria-disabled={!canNext}>\n                      Next\n                    </Link>\n                  </Button>\n                </div>\n              </div>\n            </div>\n          }\n        >\n          {({ headerElevated, stickyTopPx }) => (\n            <table className='w-full table-fixed border-separate border-spacing-0 text-[13px]'>\n              <colgroup>\n                <col className='w-14' />\n                <col className='w-[320px]' />\n                <col className='w-[160px]' />\n                <col className='w-[160px]' />\n                <col className='w-[160px]' />\n                <col className='w-[140px]' />\n              </colgroup>\n              <thead className='text-left text-secondary-token'>\n                <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                  <th\n                    className={cn(\n                      'sticky z-20 w-14 px-4 py-3 text-left border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <Checkbox\n                      aria-label='Select all creators'\n                      checked={headerCheckboxState}\n                      onCheckedChange={toggleSelectAll}\n                      className='border-sidebar-border data-[state=checked]:bg-sidebar-accent data-[state=checked]:text-sidebar-accent-foreground'\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <span className='sr-only'>Creator</span>\n                    <div\n                      className={cn(\n                        'inline-flex items-center transition-all duration-150',\n                        selectedCount > 0\n                          ? 'opacity-100 translate-y-0'\n                          : 'pointer-events-none opacity-0 -translate-y-0.5'\n                      )}\n                    >\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button\n                            variant='secondary'\n                            size='sm'\n                            className='normal-case'\n                          >\n                            Bulk actions\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align='start'>\n                          <DropdownMenuItem disabled>\n                            Feature selected (coming soon)\n                          </DropdownMenuItem>\n                          <DropdownMenuItem disabled>\n                            Unverify selected (coming soon)\n                          </DropdownMenuItem>\n                          <DropdownMenuItem\n                            disabled\n                            className='text-destructive'\n                          >\n                            Delete selected (coming soon)\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </div>\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.created.label}\n                      direction={getSortDirection(sort, 'created')}\n                      onClick={() => router.push(createSortHref('created'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.claimed.label}\n                      direction={getSortDirection(sort, 'claimed')}\n                      onClick={() => router.push(createSortHref('claimed'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.verified.label}\n                      direction={getSortDirection(sort, 'verified')}\n                      onClick={() => router.push(createSortHref('verified'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-right border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <span className='sr-only'>Action</span>\n                    <div className='flex items-center justify-end' />\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {profilesWithActions.length === 0 ? (\n                  <tr>\n                    <td\n                      colSpan={6}\n                      className='px-4 py-10 text-center text-sm text-secondary-token'\n                    >\n                      No creator profiles found.\n                    </td>\n                  </tr>\n                ) : (\n                  profilesWithActions.map((profile, index) => {\n                    const isSelected = profile.id === selectedId;\n                    const isChecked = selectedIds.has(profile.id);\n                    const rowNumber = (page - 1) * pageSize + index + 1;\n                    const displayName =\n                      'displayName' in profile\n                        ? (profile.displayName ?? null)\n                        : null;\n                    return (\n                      <tr\n                        key={profile.id}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0',\n                          isSelected ? 'bg-surface-2' : 'hover:bg-surface-2'\n                        )}\n                        onClick={() => handleRowClick(profile.id)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuProfileId(profile.id);\n                        }}\n                        aria-selected={isSelected}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${profile.username}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(profile.id)}\n                                className='border-sidebar-border data-[state=checked]:bg-sidebar-accent data-[state=checked]:text-sidebar-accent-foreground'\n                              />\n                            </div>\n                          </div>\n                        </td>\n                        <td\n                          className={cn(\n                            'px-4 py-3 align-middle',\n                            isSelected && 'bg-surface-2'\n                          )}\n                        >\n                          <div className='flex items-center gap-3'>\n                            <CreatorAvatarCell\n                              profileId={profile.id}\n                              username={profile.username}\n                              avatarUrl={profile.avatarUrl}\n                              verified={profile.isVerified}\n                              isFeatured={profile.isFeatured}\n                            />\n                            <div className='min-w-0'>\n                              {displayName ? (\n                                <div className='truncate font-medium text-primary-token'>\n                                  {displayName}\n                                </div>\n                              ) : null}\n                              <Link\n                                href={`/${profile.username}`}\n                                className={cn(\n                                  'truncate text-secondary-token transition-colors hover:text-primary-token',\n                                  displayName\n                                    ? 'text-xs'\n                                    : 'font-medium text-primary-token'\n                                )}\n                                onClick={event => event.stopPropagation()}\n                              >\n                                @{profile.username}\n                              </Link>\n                            </div>\n                          </div>\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs text-tertiary-token whitespace-nowrap'>\n                          {profile.createdAt\n                            ? new Intl.DateTimeFormat('en-US', {\n                                year: 'numeric',\n                                month: 'short',\n                                day: 'numeric',\n                              }).format(profile.createdAt)\n                            : '—'}\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs whitespace-nowrap'>\n                          <Badge\n                            size='sm'\n                            variant={\n                              profile.isClaimed ? 'success' : 'secondary'\n                            }\n                          >\n                            {profile.isClaimed ? (\n                              <>\n                                <Star\n                                  className='h-3 w-3 fill-current'\n                                  aria-hidden='true'\n                                />\n                                <span>Claimed</span>\n                              </>\n                            ) : (\n                              <span>Unclaimed</span>\n                            )}\n                          </Badge>\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs whitespace-nowrap'>\n                          <Badge\n                            size='sm'\n                            variant={\n                              profile.isVerified ? 'primary' : 'secondary'\n                            }\n                          >\n                            {profile.isVerified ? (\n                              <>\n                                <Check className='h-3 w-3' aria-hidden='true' />\n                                <span>Verified</span>\n                              </>\n                            ) : (\n                              <span>Not verified</span>\n                            )}\n                          </Badge>\n                        </td>\n                        <td\n                          className='px-4 py-3 align-middle text-right'\n                          onClick={e => e.stopPropagation()}\n                        >\n                          <div\n                            className={cn(\n                              'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                              openMenuProfileId === profile.id &&\n                                'opacity-100 pointer-events-auto'\n                            )}\n                          >\n                            <CreatorActionsMenu\n                              profile={profile}\n                              isMobile={isMobile}\n                              status={\n                                verificationStatuses[profile.id] ?? 'idle'\n                              }\n                              refreshIngestStatus={\n                                ingestRefreshStatuses[profile.id] ?? 'idle'\n                              }\n                              open={openMenuProfileId === profile.id}\n                              onOpenChange={open =>\n                                setOpenMenuProfileId(open ? profile.id : null)\n                              }\n                              onRefreshIngest={() => refreshIngest(profile.id)}\n                              onToggleVerification={async () => {\n                                const result = await toggleVerification(\n                                  profile.id,\n                                  !profile.isVerified\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle verification',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onToggleFeatured={async () => {\n                                const result = await toggleFeatured(\n                                  profile.id,\n                                  !profile.isFeatured\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle featured',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onToggleMarketing={async () => {\n                                const result = await toggleMarketing(\n                                  profile.id,\n                                  !profile.marketingOptOut\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle marketing',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onDelete={() => {\n                                setProfileToDelete(profile);\n                                setDeleteDialogOpen(true);\n                              }}\n                            />\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })\n                )}\n              </tbody>\n            </table>\n          )}\n        </AdminTableShell>\n      </div>\n      <RightDrawer\n        isOpen={sidebarOpen && Boolean(effectiveContact)}\n        width={CONTACT_PANEL_WIDTH}\n        ariaLabel='Contact details'\n        className='hidden md:flex bg-surface-0 border-subtle'\n      >\n        <div className='flex-1 min-h-0 overflow-auto'>\n          <ContactSidebar\n            contact={effectiveContact}\n            mode={mode}\n            isOpen={sidebarOpen && Boolean(effectiveContact)}\n            onClose={handleSidebarClose}\n            onRefresh={() => {\n              router.refresh();\n              if (selectedId) {\n                void hydrateContactSocialLinks(selectedId);\n              }\n            }}\n            onContactChange={handleContactChange}\n            onAvatarUpload={handleAvatarUpload}\n          />\n        </div>\n      </RightDrawer>\n      <DeleteCreatorDialog\n        profile={profileToDelete}\n        open={deleteDialogOpen}\n        onOpenChange={setDeleteDialogOpen}\n        onConfirm={async () => {\n          if (!profileToDelete) return { success: false };\n          const result = await deleteCreatorOrUser(profileToDelete.id);\n          if (result.success) {\n            setProfileToDelete(null);\n          }\n          return result;\n        }}\n      />\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noStaticElementInteractions",
      "severity": "warning",
      "description": "Static Elements should not be interactive.",
      "message": [
        {
          "elements": [],
          "content": "Static Elements should not be interactive."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "To add interactivity such as a mouse or key event listener to a static element, give the element an appropriate role value."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/admin/AdminCreatorProfilesWithSidebar.tsx"
        },
        "span": [22887, 23080],
        "sourceCode": "'use client';\n\nimport {\n  Badge,\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  Input,\n} from '@jovie/ui';\nimport { Check, Star } from 'lucide-react';\nimport dynamic from 'next/dynamic';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminCreatorFilters } from '@/components/admin/AdminCreatorFilters';\nimport { CreatorActionsMenu } from '@/components/admin/CreatorActionsMenu';\nimport { CreatorAvatarCell } from '@/components/admin/CreatorAvatarCell';\nimport {\n  getNextSort,\n  getSortDirection,\n  SORTABLE_COLUMNS,\n  SortableColumnKey,\n} from '@/components/admin/creator-sort-config';\nimport { IngestProfileDropdown } from '@/components/admin/IngestProfileDropdown';\nimport { AdminTableShell } from '@/components/admin/table/AdminTableShell';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useAdminTableKeyboardNavigation } from '@/components/admin/table/useAdminTableKeyboardNavigation';\nimport { useAdminTablePaginationLinks } from '@/components/admin/table/useAdminTablePaginationLinks';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { useCreatorActions } from '@/components/admin/useCreatorActions';\nimport { useCreatorVerification } from '@/components/admin/useCreatorVerification';\nimport { useToast } from '@/components/molecules/ToastContainer';\nimport { RightDrawer } from '@/components/organisms/RightDrawer';\nimport { useMediaQuery } from '@/hooks/useMediaQuery';\n\nimport type {\n  AdminCreatorProfileRow,\n  AdminCreatorProfilesSort,\n} from '@/lib/admin/creator-profiles';\nimport { api } from '@/lib/api-client';\nimport {\n  getCreatorSocialLinksSafe,\n  updateCreatorAvatar,\n} from '@/lib/api-client/endpoints/admin/creators';\nimport { ApiError } from '@/lib/api-client/types';\nimport { cn } from '@/lib/utils';\nimport type { Contact, ContactSidebarMode } from '@/types';\n\nconst DeleteCreatorDialog = dynamic(\n  () =>\n    import('@/components/admin/DeleteCreatorDialog').then(mod => ({\n      default: mod.DeleteCreatorDialog,\n    })),\n  { ssr: false }\n);\n\nconst ContactSidebar = dynamic(\n  () =>\n    import('@/components/organisms/ContactSidebar').then(mod => ({\n      default: mod.ContactSidebar,\n    })),\n  {\n    loading: () => <div className='h-full w-full animate-pulse bg-surface-1' />,\n    ssr: false,\n  }\n);\n\nconst CONTACT_PANEL_WIDTH = 320;\n\nfunction useOptionalTableMeta() {\n  try {\n    return useTableMeta();\n  } catch {\n    return null;\n  }\n}\n\nexport interface AdminCreatorProfilesWithSidebarProps {\n  profiles: AdminCreatorProfileRow[];\n  page: number;\n  pageSize: number;\n  total: number;\n  search: string;\n  sort: AdminCreatorProfilesSort;\n  mode?: ContactSidebarMode;\n  /** Base path for pagination/sort links. Defaults to '/app/admin/creators' */\n  basePath?: string;\n}\n\nfunction mapProfileToContact(\n  profile: AdminCreatorProfileRow | null\n): Contact | null {\n  if (!profile) return null;\n  return {\n    id: profile.id,\n    username: profile.username,\n    displayName:\n      'displayName' in profile ? (profile.displayName ?? null) : null,\n    firstName: undefined,\n    lastName: undefined,\n    avatarUrl: profile.avatarUrl ?? null,\n    socialLinks: [],\n  };\n}\n\n// Admin endpoint group for page-level routes (not /api/admin/)\nconst adminPagesApi = api.createGroup('/app/admin/creators');\n\n/**\n * Response type for bulk refresh endpoint\n */\ninterface BulkRefreshResponse {\n  success: boolean;\n  queuedCount?: number;\n  error?: string;\n}\n\nexport function AdminCreatorProfilesWithSidebar({\n  profiles: initialProfiles,\n  page,\n  pageSize,\n  total,\n  search,\n  sort,\n  mode = 'admin',\n  basePath = '/app/admin/creators',\n}: AdminCreatorProfilesWithSidebarProps) {\n  const router = useRouter();\n  const { showToast } = useToast();\n  const {\n    profiles,\n    statuses: verificationStatuses,\n    toggleVerification,\n  } = useCreatorVerification(initialProfiles);\n\n  const {\n    profiles: profilesWithActions,\n    toggleFeatured,\n    toggleMarketing,\n    deleteCreatorOrUser,\n  } = useCreatorActions(profiles);\n\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [openMenuProfileId, setOpenMenuProfileId] = useState<string | null>(\n    null\n  );\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [draftContact, setDraftContact] = useState<Contact | null>(null);\n\n  const [ingestRefreshStatuses, setIngestRefreshStatuses] = useState<\n    Record<string, 'idle' | 'loading' | 'success' | 'error'>\n  >({});\n  const tableMetaCtx = useOptionalTableMeta();\n  const [searchTerm, setSearchTerm] = useState(search);\n  const setTableMeta = React.useMemo(\n    () => tableMetaCtx?.setTableMeta ?? (() => {}),\n    [tableMetaCtx]\n  );\n\n  const isMobile = useMediaQuery('(max-width: 767px)');\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [profileToDelete, setProfileToDelete] =\n    useState<AdminCreatorProfileRow | null>(null);\n\n  const {\n    totalPages,\n    canPrev,\n    canNext,\n    from,\n    to,\n    prevHref,\n    nextHref,\n    clearHref,\n    buildHref,\n  } = useAdminTablePaginationLinks<AdminCreatorProfilesSort>({\n    basePath,\n    page,\n    pageSize,\n    search,\n    sort,\n    total,\n  });\n\n  const createSortHref = (column: SortableColumnKey) =>\n    buildHref({ page: 1, sort: getNextSort(sort, column) });\n\n  const filteredProfiles = useMemo(() => {\n    const term = searchTerm.trim().toLowerCase();\n    if (!term) return profilesWithActions;\n    return profilesWithActions.filter(profile => {\n      const username = profile.username.toLowerCase();\n      const displayName =\n        'displayName' in profile\n          ? (profile.displayName ?? '').toLowerCase()\n          : '';\n      return username.includes(term) || displayName.includes(term);\n    });\n  }, [profilesWithActions, searchTerm]);\n\n  const rowIds = useMemo(\n    () => filteredProfiles.map(profile => profile.id),\n    [filteredProfiles]\n  );\n\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n  } = useRowSelection(rowIds);\n\n  const selectedProfile = useMemo(\n    () => filteredProfiles.find(p => p.id === selectedId) ?? null,\n    [filteredProfiles, selectedId]\n  );\n\n  const hydrateContactSocialLinks = useCallback(\n    async (profileId: string): Promise<void> => {\n      const contactBase = mapProfileToContact(\n        filteredProfiles.find(p => p.id === profileId) ?? null\n      );\n      if (!contactBase) return;\n\n      const result = await getCreatorSocialLinksSafe(profileId);\n\n      if (!result.ok || !result.data.success) {\n        setDraftContact(contactBase);\n        return;\n      }\n\n      setDraftContact({\n        ...contactBase,\n        socialLinks: result.data.links.map(link => ({\n          id: link.id,\n          label: link.label,\n          url: link.url,\n          platformType: link.platformType,\n        })),\n      });\n    },\n    [filteredProfiles]\n  );\n\n  const effectiveContact = useMemo(() => {\n    if (draftContact && draftContact.id === selectedId) return draftContact;\n    return mapProfileToContact(selectedProfile);\n  }, [draftContact, selectedId, selectedProfile]);\n\n  const handleRowClick = useCallback((id: string) => {\n    setSelectedId(id);\n    setSidebarOpen(true);\n    setDraftContact(null);\n  }, []);\n\n  React.useEffect(() => {\n    if (!sidebarOpen || !selectedId) return;\n    void hydrateContactSocialLinks(selectedId);\n  }, [hydrateContactSocialLinks, selectedId, sidebarOpen]);\n\n  const refreshIngest = useCallback(\n    async (profileId: string): Promise<void> => {\n      setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'loading' }));\n      try {\n        const result = await adminPagesApi.request<BulkRefreshResponse>(\n          'POST',\n          '/bulk-refresh',\n          { body: { profileIds: [profileId] } }\n        );\n\n        if (!result.ok) {\n          throw result.error;\n        }\n\n        if (!result.data.success) {\n          throw new Error(result.data.error ?? 'Failed to queue ingestion');\n        }\n\n        setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'success' }));\n        showToast({\n          type: 'success',\n          message: 'Ingestion refresh queued',\n        });\n        router.refresh();\n\n        if (selectedId === profileId) {\n          void hydrateContactSocialLinks(profileId);\n        }\n      } catch (error) {\n        setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'error' }));\n        showToast({\n          type: 'error',\n          message:\n            error instanceof ApiError\n              ? error.message\n              : error instanceof Error\n                ? error.message\n                : 'Refresh failed',\n        });\n      } finally {\n        window.setTimeout(() => {\n          setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'idle' }));\n        }, 2200);\n      }\n    },\n    [hydrateContactSocialLinks, router, selectedId, showToast]\n  );\n\n  const { handleKeyDown } = useAdminTableKeyboardNavigation({\n    items: filteredProfiles,\n    selectedId,\n    onSelect: setSelectedId,\n    onToggleSidebar: () => setSidebarOpen(open => !open),\n    onCloseSidebar: () => setSidebarOpen(false),\n    isSidebarOpen: sidebarOpen,\n    getId: profile => profile.id,\n  });\n\n  const handleContactChange = (updated: Contact) => {\n    setDraftContact(updated);\n  };\n\n  const handleSidebarClose = () => {\n    setSidebarOpen(false);\n  };\n\n  const handleAvatarUpload = useCallback(\n    async (file: File, contact: Contact): Promise<string> => {\n      // Step 1: Upload image to blob storage (uses FormData, not JSON)\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const uploadResponse = await fetch('/api/images/upload', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const uploadJson = (await uploadResponse.json().catch(() => ({}))) as {\n        blobUrl?: string;\n        error?: string;\n      };\n\n      if (!uploadResponse.ok || !uploadJson.blobUrl) {\n        const message = uploadJson.error || 'Failed to upload avatar';\n        throw new Error(message);\n      }\n\n      const blobUrl = uploadJson.blobUrl;\n\n      // Step 2: Update creator profile with new avatar URL via admin API\n      await updateCreatorAvatar({\n        profileId: contact.id,\n        avatarUrl: blobUrl,\n      });\n\n      return blobUrl;\n    },\n    []\n  );\n\n  // Ensure the phone preview never opens empty: select the first creator if none is selected.\n  React.useEffect(() => {\n    if (sidebarOpen && !selectedId && profilesWithActions.length > 0) {\n      setSelectedId(profilesWithActions[0]!.id);\n      setDraftContact(null);\n    }\n  }, [sidebarOpen, selectedId, profilesWithActions]);\n\n  // Expose row count and toggle handler for dashboard action button\n  React.useEffect(() => {\n    const toggle = () => {\n      setSidebarOpen(prev => {\n        const next = !prev;\n        if (next && !selectedId && filteredProfiles[0]) {\n          setSelectedId(filteredProfiles[0]!.id);\n          setDraftContact(null);\n        }\n        return next;\n      });\n    };\n\n    setTableMeta({\n      rowCount: filteredProfiles.length,\n      toggle,\n      rightPanelWidth:\n        sidebarOpen && Boolean(effectiveContact) ? CONTACT_PANEL_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [\n    filteredProfiles,\n    selectedId,\n    setTableMeta,\n    sidebarOpen,\n    effectiveContact,\n  ]);\n\n  return (\n    <div className='flex h-full min-h-0 flex-col md:flex-row md:items-stretch'>\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <AdminTableShell\n          scrollContainerProps={{\n            tabIndex: 0,\n            onKeyDown: handleKeyDown,\n          }}\n          toolbar={\n            <div className='flex h-14 w-full items-center gap-3 px-4'>\n              <div className='hidden sm:block text-xs text-secondary-token'>\n                Showing {from.toLocaleString()}–{to.toLocaleString()} of{' '}\n                {total.toLocaleString()} profiles\n              </div>\n              <div className='ml-auto flex items-center gap-3'>\n                <form\n                  action={basePath}\n                  method='get'\n                  className='relative isolate flex items-center gap-2'\n                >\n                  <input type='hidden' name='sort' value={sort} />\n                  <input type='hidden' name='pageSize' value={pageSize} />\n                  <Input\n                    name='q'\n                    placeholder='Search by handle'\n                    value={searchTerm}\n                    onChange={event => setSearchTerm(event.target.value)}\n                    className='w-[240px]'\n                  />\n                  <input type='hidden' name='page' value='1' />\n                  <Button type='submit' size='sm' variant='secondary'>\n                    Search\n                  </Button>\n                  {search && search.length > 0 && (\n                    <Button asChild size='sm' variant='ghost'>\n                      <Link href={clearHref}>Clear</Link>\n                    </Button>\n                  )}\n                </form>\n                <div\n                  className='hidden h-6 w-px bg-border sm:block'\n                  aria-hidden='true'\n                />\n                <IngestProfileDropdown />\n              </div>\n            </div>\n          }\n          footer={\n            <div className='flex flex-wrap items-center justify-between gap-3 px-3 py-2 text-xs text-secondary-token'>\n              <div className='flex items-center gap-2'>\n                <span>\n                  Page {page} of {totalPages}\n                </span>\n                <span className='text-tertiary-token'>\n                  {from.toLocaleString()}–{to.toLocaleString()} of{' '}\n                  {total.toLocaleString()}\n                </span>\n              </div>\n              <div className='flex items-center gap-3'>\n                <div className='flex items-center gap-2'>\n                  <span>Rows per page</span>\n                  <AdminCreatorFilters initialPageSize={pageSize} />\n                </div>\n                <div className='flex items-center gap-2'>\n                  <Button asChild size='sm' variant='ghost' disabled={!canPrev}>\n                    <Link href={prevHref ?? '#'} aria-disabled={!canPrev}>\n                      Previous\n                    </Link>\n                  </Button>\n                  <Button asChild size='sm' variant='ghost' disabled={!canNext}>\n                    <Link href={nextHref ?? '#'} aria-disabled={!canNext}>\n                      Next\n                    </Link>\n                  </Button>\n                </div>\n              </div>\n            </div>\n          }\n        >\n          {({ headerElevated, stickyTopPx }) => (\n            <table className='w-full table-fixed border-separate border-spacing-0 text-[13px]'>\n              <colgroup>\n                <col className='w-14' />\n                <col className='w-[320px]' />\n                <col className='w-[160px]' />\n                <col className='w-[160px]' />\n                <col className='w-[160px]' />\n                <col className='w-[140px]' />\n              </colgroup>\n              <thead className='text-left text-secondary-token'>\n                <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                  <th\n                    className={cn(\n                      'sticky z-20 w-14 px-4 py-3 text-left border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <Checkbox\n                      aria-label='Select all creators'\n                      checked={headerCheckboxState}\n                      onCheckedChange={toggleSelectAll}\n                      className='border-sidebar-border data-[state=checked]:bg-sidebar-accent data-[state=checked]:text-sidebar-accent-foreground'\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <span className='sr-only'>Creator</span>\n                    <div\n                      className={cn(\n                        'inline-flex items-center transition-all duration-150',\n                        selectedCount > 0\n                          ? 'opacity-100 translate-y-0'\n                          : 'pointer-events-none opacity-0 -translate-y-0.5'\n                      )}\n                    >\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button\n                            variant='secondary'\n                            size='sm'\n                            className='normal-case'\n                          >\n                            Bulk actions\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align='start'>\n                          <DropdownMenuItem disabled>\n                            Feature selected (coming soon)\n                          </DropdownMenuItem>\n                          <DropdownMenuItem disabled>\n                            Unverify selected (coming soon)\n                          </DropdownMenuItem>\n                          <DropdownMenuItem\n                            disabled\n                            className='text-destructive'\n                          >\n                            Delete selected (coming soon)\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </div>\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.created.label}\n                      direction={getSortDirection(sort, 'created')}\n                      onClick={() => router.push(createSortHref('created'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.claimed.label}\n                      direction={getSortDirection(sort, 'claimed')}\n                      onClick={() => router.push(createSortHref('claimed'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.verified.label}\n                      direction={getSortDirection(sort, 'verified')}\n                      onClick={() => router.push(createSortHref('verified'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-right border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <span className='sr-only'>Action</span>\n                    <div className='flex items-center justify-end' />\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {profilesWithActions.length === 0 ? (\n                  <tr>\n                    <td\n                      colSpan={6}\n                      className='px-4 py-10 text-center text-sm text-secondary-token'\n                    >\n                      No creator profiles found.\n                    </td>\n                  </tr>\n                ) : (\n                  profilesWithActions.map((profile, index) => {\n                    const isSelected = profile.id === selectedId;\n                    const isChecked = selectedIds.has(profile.id);\n                    const rowNumber = (page - 1) * pageSize + index + 1;\n                    const displayName =\n                      'displayName' in profile\n                        ? (profile.displayName ?? null)\n                        : null;\n                    return (\n                      <tr\n                        key={profile.id}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0',\n                          isSelected ? 'bg-surface-2' : 'hover:bg-surface-2'\n                        )}\n                        onClick={() => handleRowClick(profile.id)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuProfileId(profile.id);\n                        }}\n                        aria-selected={isSelected}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${profile.username}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(profile.id)}\n                                className='border-sidebar-border data-[state=checked]:bg-sidebar-accent data-[state=checked]:text-sidebar-accent-foreground'\n                              />\n                            </div>\n                          </div>\n                        </td>\n                        <td\n                          className={cn(\n                            'px-4 py-3 align-middle',\n                            isSelected && 'bg-surface-2'\n                          )}\n                        >\n                          <div className='flex items-center gap-3'>\n                            <CreatorAvatarCell\n                              profileId={profile.id}\n                              username={profile.username}\n                              avatarUrl={profile.avatarUrl}\n                              verified={profile.isVerified}\n                              isFeatured={profile.isFeatured}\n                            />\n                            <div className='min-w-0'>\n                              {displayName ? (\n                                <div className='truncate font-medium text-primary-token'>\n                                  {displayName}\n                                </div>\n                              ) : null}\n                              <Link\n                                href={`/${profile.username}`}\n                                className={cn(\n                                  'truncate text-secondary-token transition-colors hover:text-primary-token',\n                                  displayName\n                                    ? 'text-xs'\n                                    : 'font-medium text-primary-token'\n                                )}\n                                onClick={event => event.stopPropagation()}\n                              >\n                                @{profile.username}\n                              </Link>\n                            </div>\n                          </div>\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs text-tertiary-token whitespace-nowrap'>\n                          {profile.createdAt\n                            ? new Intl.DateTimeFormat('en-US', {\n                                year: 'numeric',\n                                month: 'short',\n                                day: 'numeric',\n                              }).format(profile.createdAt)\n                            : '—'}\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs whitespace-nowrap'>\n                          <Badge\n                            size='sm'\n                            variant={\n                              profile.isClaimed ? 'success' : 'secondary'\n                            }\n                          >\n                            {profile.isClaimed ? (\n                              <>\n                                <Star\n                                  className='h-3 w-3 fill-current'\n                                  aria-hidden='true'\n                                />\n                                <span>Claimed</span>\n                              </>\n                            ) : (\n                              <span>Unclaimed</span>\n                            )}\n                          </Badge>\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs whitespace-nowrap'>\n                          <Badge\n                            size='sm'\n                            variant={\n                              profile.isVerified ? 'primary' : 'secondary'\n                            }\n                          >\n                            {profile.isVerified ? (\n                              <>\n                                <Check className='h-3 w-3' aria-hidden='true' />\n                                <span>Verified</span>\n                              </>\n                            ) : (\n                              <span>Not verified</span>\n                            )}\n                          </Badge>\n                        </td>\n                        <td\n                          className='px-4 py-3 align-middle text-right'\n                          onClick={e => e.stopPropagation()}\n                        >\n                          <div\n                            className={cn(\n                              'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                              openMenuProfileId === profile.id &&\n                                'opacity-100 pointer-events-auto'\n                            )}\n                          >\n                            <CreatorActionsMenu\n                              profile={profile}\n                              isMobile={isMobile}\n                              status={\n                                verificationStatuses[profile.id] ?? 'idle'\n                              }\n                              refreshIngestStatus={\n                                ingestRefreshStatuses[profile.id] ?? 'idle'\n                              }\n                              open={openMenuProfileId === profile.id}\n                              onOpenChange={open =>\n                                setOpenMenuProfileId(open ? profile.id : null)\n                              }\n                              onRefreshIngest={() => refreshIngest(profile.id)}\n                              onToggleVerification={async () => {\n                                const result = await toggleVerification(\n                                  profile.id,\n                                  !profile.isVerified\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle verification',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onToggleFeatured={async () => {\n                                const result = await toggleFeatured(\n                                  profile.id,\n                                  !profile.isFeatured\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle featured',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onToggleMarketing={async () => {\n                                const result = await toggleMarketing(\n                                  profile.id,\n                                  !profile.marketingOptOut\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle marketing',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onDelete={() => {\n                                setProfileToDelete(profile);\n                                setDeleteDialogOpen(true);\n                              }}\n                            />\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })\n                )}\n              </tbody>\n            </table>\n          )}\n        </AdminTableShell>\n      </div>\n      <RightDrawer\n        isOpen={sidebarOpen && Boolean(effectiveContact)}\n        width={CONTACT_PANEL_WIDTH}\n        ariaLabel='Contact details'\n        className='hidden md:flex bg-surface-0 border-subtle'\n      >\n        <div className='flex-1 min-h-0 overflow-auto'>\n          <ContactSidebar\n            contact={effectiveContact}\n            mode={mode}\n            isOpen={sidebarOpen && Boolean(effectiveContact)}\n            onClose={handleSidebarClose}\n            onRefresh={() => {\n              router.refresh();\n              if (selectedId) {\n                void hydrateContactSocialLinks(selectedId);\n              }\n            }}\n            onContactChange={handleContactChange}\n            onAvatarUpload={handleAvatarUpload}\n          />\n        </div>\n      </RightDrawer>\n      <DeleteCreatorDialog\n        profile={profileToDelete}\n        open={deleteDialogOpen}\n        onOpenChange={setDeleteDialogOpen}\n        onConfirm={async () => {\n          if (!profileToDelete) return { success: false };\n          const result = await deleteCreatorOrUser(profileToDelete.id);\n          if (result.success) {\n            setProfileToDelete(null);\n          }\n          return result;\n        }}\n      />\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/admin/AdminCreatorProfilesWithSidebar.tsx"
        },
        "span": [28441, 28603],
        "sourceCode": "'use client';\n\nimport {\n  Badge,\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  Input,\n} from '@jovie/ui';\nimport { Check, Star } from 'lucide-react';\nimport dynamic from 'next/dynamic';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminCreatorFilters } from '@/components/admin/AdminCreatorFilters';\nimport { CreatorActionsMenu } from '@/components/admin/CreatorActionsMenu';\nimport { CreatorAvatarCell } from '@/components/admin/CreatorAvatarCell';\nimport {\n  getNextSort,\n  getSortDirection,\n  SORTABLE_COLUMNS,\n  SortableColumnKey,\n} from '@/components/admin/creator-sort-config';\nimport { IngestProfileDropdown } from '@/components/admin/IngestProfileDropdown';\nimport { AdminTableShell } from '@/components/admin/table/AdminTableShell';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useAdminTableKeyboardNavigation } from '@/components/admin/table/useAdminTableKeyboardNavigation';\nimport { useAdminTablePaginationLinks } from '@/components/admin/table/useAdminTablePaginationLinks';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { useCreatorActions } from '@/components/admin/useCreatorActions';\nimport { useCreatorVerification } from '@/components/admin/useCreatorVerification';\nimport { useToast } from '@/components/molecules/ToastContainer';\nimport { RightDrawer } from '@/components/organisms/RightDrawer';\nimport { useMediaQuery } from '@/hooks/useMediaQuery';\n\nimport type {\n  AdminCreatorProfileRow,\n  AdminCreatorProfilesSort,\n} from '@/lib/admin/creator-profiles';\nimport { api } from '@/lib/api-client';\nimport {\n  getCreatorSocialLinksSafe,\n  updateCreatorAvatar,\n} from '@/lib/api-client/endpoints/admin/creators';\nimport { ApiError } from '@/lib/api-client/types';\nimport { cn } from '@/lib/utils';\nimport type { Contact, ContactSidebarMode } from '@/types';\n\nconst DeleteCreatorDialog = dynamic(\n  () =>\n    import('@/components/admin/DeleteCreatorDialog').then(mod => ({\n      default: mod.DeleteCreatorDialog,\n    })),\n  { ssr: false }\n);\n\nconst ContactSidebar = dynamic(\n  () =>\n    import('@/components/organisms/ContactSidebar').then(mod => ({\n      default: mod.ContactSidebar,\n    })),\n  {\n    loading: () => <div className='h-full w-full animate-pulse bg-surface-1' />,\n    ssr: false,\n  }\n);\n\nconst CONTACT_PANEL_WIDTH = 320;\n\nfunction useOptionalTableMeta() {\n  try {\n    return useTableMeta();\n  } catch {\n    return null;\n  }\n}\n\nexport interface AdminCreatorProfilesWithSidebarProps {\n  profiles: AdminCreatorProfileRow[];\n  page: number;\n  pageSize: number;\n  total: number;\n  search: string;\n  sort: AdminCreatorProfilesSort;\n  mode?: ContactSidebarMode;\n  /** Base path for pagination/sort links. Defaults to '/app/admin/creators' */\n  basePath?: string;\n}\n\nfunction mapProfileToContact(\n  profile: AdminCreatorProfileRow | null\n): Contact | null {\n  if (!profile) return null;\n  return {\n    id: profile.id,\n    username: profile.username,\n    displayName:\n      'displayName' in profile ? (profile.displayName ?? null) : null,\n    firstName: undefined,\n    lastName: undefined,\n    avatarUrl: profile.avatarUrl ?? null,\n    socialLinks: [],\n  };\n}\n\n// Admin endpoint group for page-level routes (not /api/admin/)\nconst adminPagesApi = api.createGroup('/app/admin/creators');\n\n/**\n * Response type for bulk refresh endpoint\n */\ninterface BulkRefreshResponse {\n  success: boolean;\n  queuedCount?: number;\n  error?: string;\n}\n\nexport function AdminCreatorProfilesWithSidebar({\n  profiles: initialProfiles,\n  page,\n  pageSize,\n  total,\n  search,\n  sort,\n  mode = 'admin',\n  basePath = '/app/admin/creators',\n}: AdminCreatorProfilesWithSidebarProps) {\n  const router = useRouter();\n  const { showToast } = useToast();\n  const {\n    profiles,\n    statuses: verificationStatuses,\n    toggleVerification,\n  } = useCreatorVerification(initialProfiles);\n\n  const {\n    profiles: profilesWithActions,\n    toggleFeatured,\n    toggleMarketing,\n    deleteCreatorOrUser,\n  } = useCreatorActions(profiles);\n\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [openMenuProfileId, setOpenMenuProfileId] = useState<string | null>(\n    null\n  );\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [draftContact, setDraftContact] = useState<Contact | null>(null);\n\n  const [ingestRefreshStatuses, setIngestRefreshStatuses] = useState<\n    Record<string, 'idle' | 'loading' | 'success' | 'error'>\n  >({});\n  const tableMetaCtx = useOptionalTableMeta();\n  const [searchTerm, setSearchTerm] = useState(search);\n  const setTableMeta = React.useMemo(\n    () => tableMetaCtx?.setTableMeta ?? (() => {}),\n    [tableMetaCtx]\n  );\n\n  const isMobile = useMediaQuery('(max-width: 767px)');\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [profileToDelete, setProfileToDelete] =\n    useState<AdminCreatorProfileRow | null>(null);\n\n  const {\n    totalPages,\n    canPrev,\n    canNext,\n    from,\n    to,\n    prevHref,\n    nextHref,\n    clearHref,\n    buildHref,\n  } = useAdminTablePaginationLinks<AdminCreatorProfilesSort>({\n    basePath,\n    page,\n    pageSize,\n    search,\n    sort,\n    total,\n  });\n\n  const createSortHref = (column: SortableColumnKey) =>\n    buildHref({ page: 1, sort: getNextSort(sort, column) });\n\n  const filteredProfiles = useMemo(() => {\n    const term = searchTerm.trim().toLowerCase();\n    if (!term) return profilesWithActions;\n    return profilesWithActions.filter(profile => {\n      const username = profile.username.toLowerCase();\n      const displayName =\n        'displayName' in profile\n          ? (profile.displayName ?? '').toLowerCase()\n          : '';\n      return username.includes(term) || displayName.includes(term);\n    });\n  }, [profilesWithActions, searchTerm]);\n\n  const rowIds = useMemo(\n    () => filteredProfiles.map(profile => profile.id),\n    [filteredProfiles]\n  );\n\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n  } = useRowSelection(rowIds);\n\n  const selectedProfile = useMemo(\n    () => filteredProfiles.find(p => p.id === selectedId) ?? null,\n    [filteredProfiles, selectedId]\n  );\n\n  const hydrateContactSocialLinks = useCallback(\n    async (profileId: string): Promise<void> => {\n      const contactBase = mapProfileToContact(\n        filteredProfiles.find(p => p.id === profileId) ?? null\n      );\n      if (!contactBase) return;\n\n      const result = await getCreatorSocialLinksSafe(profileId);\n\n      if (!result.ok || !result.data.success) {\n        setDraftContact(contactBase);\n        return;\n      }\n\n      setDraftContact({\n        ...contactBase,\n        socialLinks: result.data.links.map(link => ({\n          id: link.id,\n          label: link.label,\n          url: link.url,\n          platformType: link.platformType,\n        })),\n      });\n    },\n    [filteredProfiles]\n  );\n\n  const effectiveContact = useMemo(() => {\n    if (draftContact && draftContact.id === selectedId) return draftContact;\n    return mapProfileToContact(selectedProfile);\n  }, [draftContact, selectedId, selectedProfile]);\n\n  const handleRowClick = useCallback((id: string) => {\n    setSelectedId(id);\n    setSidebarOpen(true);\n    setDraftContact(null);\n  }, []);\n\n  React.useEffect(() => {\n    if (!sidebarOpen || !selectedId) return;\n    void hydrateContactSocialLinks(selectedId);\n  }, [hydrateContactSocialLinks, selectedId, sidebarOpen]);\n\n  const refreshIngest = useCallback(\n    async (profileId: string): Promise<void> => {\n      setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'loading' }));\n      try {\n        const result = await adminPagesApi.request<BulkRefreshResponse>(\n          'POST',\n          '/bulk-refresh',\n          { body: { profileIds: [profileId] } }\n        );\n\n        if (!result.ok) {\n          throw result.error;\n        }\n\n        if (!result.data.success) {\n          throw new Error(result.data.error ?? 'Failed to queue ingestion');\n        }\n\n        setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'success' }));\n        showToast({\n          type: 'success',\n          message: 'Ingestion refresh queued',\n        });\n        router.refresh();\n\n        if (selectedId === profileId) {\n          void hydrateContactSocialLinks(profileId);\n        }\n      } catch (error) {\n        setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'error' }));\n        showToast({\n          type: 'error',\n          message:\n            error instanceof ApiError\n              ? error.message\n              : error instanceof Error\n                ? error.message\n                : 'Refresh failed',\n        });\n      } finally {\n        window.setTimeout(() => {\n          setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'idle' }));\n        }, 2200);\n      }\n    },\n    [hydrateContactSocialLinks, router, selectedId, showToast]\n  );\n\n  const { handleKeyDown } = useAdminTableKeyboardNavigation({\n    items: filteredProfiles,\n    selectedId,\n    onSelect: setSelectedId,\n    onToggleSidebar: () => setSidebarOpen(open => !open),\n    onCloseSidebar: () => setSidebarOpen(false),\n    isSidebarOpen: sidebarOpen,\n    getId: profile => profile.id,\n  });\n\n  const handleContactChange = (updated: Contact) => {\n    setDraftContact(updated);\n  };\n\n  const handleSidebarClose = () => {\n    setSidebarOpen(false);\n  };\n\n  const handleAvatarUpload = useCallback(\n    async (file: File, contact: Contact): Promise<string> => {\n      // Step 1: Upload image to blob storage (uses FormData, not JSON)\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const uploadResponse = await fetch('/api/images/upload', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const uploadJson = (await uploadResponse.json().catch(() => ({}))) as {\n        blobUrl?: string;\n        error?: string;\n      };\n\n      if (!uploadResponse.ok || !uploadJson.blobUrl) {\n        const message = uploadJson.error || 'Failed to upload avatar';\n        throw new Error(message);\n      }\n\n      const blobUrl = uploadJson.blobUrl;\n\n      // Step 2: Update creator profile with new avatar URL via admin API\n      await updateCreatorAvatar({\n        profileId: contact.id,\n        avatarUrl: blobUrl,\n      });\n\n      return blobUrl;\n    },\n    []\n  );\n\n  // Ensure the phone preview never opens empty: select the first creator if none is selected.\n  React.useEffect(() => {\n    if (sidebarOpen && !selectedId && profilesWithActions.length > 0) {\n      setSelectedId(profilesWithActions[0]!.id);\n      setDraftContact(null);\n    }\n  }, [sidebarOpen, selectedId, profilesWithActions]);\n\n  // Expose row count and toggle handler for dashboard action button\n  React.useEffect(() => {\n    const toggle = () => {\n      setSidebarOpen(prev => {\n        const next = !prev;\n        if (next && !selectedId && filteredProfiles[0]) {\n          setSelectedId(filteredProfiles[0]!.id);\n          setDraftContact(null);\n        }\n        return next;\n      });\n    };\n\n    setTableMeta({\n      rowCount: filteredProfiles.length,\n      toggle,\n      rightPanelWidth:\n        sidebarOpen && Boolean(effectiveContact) ? CONTACT_PANEL_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [\n    filteredProfiles,\n    selectedId,\n    setTableMeta,\n    sidebarOpen,\n    effectiveContact,\n  ]);\n\n  return (\n    <div className='flex h-full min-h-0 flex-col md:flex-row md:items-stretch'>\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <AdminTableShell\n          scrollContainerProps={{\n            tabIndex: 0,\n            onKeyDown: handleKeyDown,\n          }}\n          toolbar={\n            <div className='flex h-14 w-full items-center gap-3 px-4'>\n              <div className='hidden sm:block text-xs text-secondary-token'>\n                Showing {from.toLocaleString()}–{to.toLocaleString()} of{' '}\n                {total.toLocaleString()} profiles\n              </div>\n              <div className='ml-auto flex items-center gap-3'>\n                <form\n                  action={basePath}\n                  method='get'\n                  className='relative isolate flex items-center gap-2'\n                >\n                  <input type='hidden' name='sort' value={sort} />\n                  <input type='hidden' name='pageSize' value={pageSize} />\n                  <Input\n                    name='q'\n                    placeholder='Search by handle'\n                    value={searchTerm}\n                    onChange={event => setSearchTerm(event.target.value)}\n                    className='w-[240px]'\n                  />\n                  <input type='hidden' name='page' value='1' />\n                  <Button type='submit' size='sm' variant='secondary'>\n                    Search\n                  </Button>\n                  {search && search.length > 0 && (\n                    <Button asChild size='sm' variant='ghost'>\n                      <Link href={clearHref}>Clear</Link>\n                    </Button>\n                  )}\n                </form>\n                <div\n                  className='hidden h-6 w-px bg-border sm:block'\n                  aria-hidden='true'\n                />\n                <IngestProfileDropdown />\n              </div>\n            </div>\n          }\n          footer={\n            <div className='flex flex-wrap items-center justify-between gap-3 px-3 py-2 text-xs text-secondary-token'>\n              <div className='flex items-center gap-2'>\n                <span>\n                  Page {page} of {totalPages}\n                </span>\n                <span className='text-tertiary-token'>\n                  {from.toLocaleString()}–{to.toLocaleString()} of{' '}\n                  {total.toLocaleString()}\n                </span>\n              </div>\n              <div className='flex items-center gap-3'>\n                <div className='flex items-center gap-2'>\n                  <span>Rows per page</span>\n                  <AdminCreatorFilters initialPageSize={pageSize} />\n                </div>\n                <div className='flex items-center gap-2'>\n                  <Button asChild size='sm' variant='ghost' disabled={!canPrev}>\n                    <Link href={prevHref ?? '#'} aria-disabled={!canPrev}>\n                      Previous\n                    </Link>\n                  </Button>\n                  <Button asChild size='sm' variant='ghost' disabled={!canNext}>\n                    <Link href={nextHref ?? '#'} aria-disabled={!canNext}>\n                      Next\n                    </Link>\n                  </Button>\n                </div>\n              </div>\n            </div>\n          }\n        >\n          {({ headerElevated, stickyTopPx }) => (\n            <table className='w-full table-fixed border-separate border-spacing-0 text-[13px]'>\n              <colgroup>\n                <col className='w-14' />\n                <col className='w-[320px]' />\n                <col className='w-[160px]' />\n                <col className='w-[160px]' />\n                <col className='w-[160px]' />\n                <col className='w-[140px]' />\n              </colgroup>\n              <thead className='text-left text-secondary-token'>\n                <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                  <th\n                    className={cn(\n                      'sticky z-20 w-14 px-4 py-3 text-left border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <Checkbox\n                      aria-label='Select all creators'\n                      checked={headerCheckboxState}\n                      onCheckedChange={toggleSelectAll}\n                      className='border-sidebar-border data-[state=checked]:bg-sidebar-accent data-[state=checked]:text-sidebar-accent-foreground'\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <span className='sr-only'>Creator</span>\n                    <div\n                      className={cn(\n                        'inline-flex items-center transition-all duration-150',\n                        selectedCount > 0\n                          ? 'opacity-100 translate-y-0'\n                          : 'pointer-events-none opacity-0 -translate-y-0.5'\n                      )}\n                    >\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button\n                            variant='secondary'\n                            size='sm'\n                            className='normal-case'\n                          >\n                            Bulk actions\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align='start'>\n                          <DropdownMenuItem disabled>\n                            Feature selected (coming soon)\n                          </DropdownMenuItem>\n                          <DropdownMenuItem disabled>\n                            Unverify selected (coming soon)\n                          </DropdownMenuItem>\n                          <DropdownMenuItem\n                            disabled\n                            className='text-destructive'\n                          >\n                            Delete selected (coming soon)\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </div>\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.created.label}\n                      direction={getSortDirection(sort, 'created')}\n                      onClick={() => router.push(createSortHref('created'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.claimed.label}\n                      direction={getSortDirection(sort, 'claimed')}\n                      onClick={() => router.push(createSortHref('claimed'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.verified.label}\n                      direction={getSortDirection(sort, 'verified')}\n                      onClick={() => router.push(createSortHref('verified'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-right border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <span className='sr-only'>Action</span>\n                    <div className='flex items-center justify-end' />\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {profilesWithActions.length === 0 ? (\n                  <tr>\n                    <td\n                      colSpan={6}\n                      className='px-4 py-10 text-center text-sm text-secondary-token'\n                    >\n                      No creator profiles found.\n                    </td>\n                  </tr>\n                ) : (\n                  profilesWithActions.map((profile, index) => {\n                    const isSelected = profile.id === selectedId;\n                    const isChecked = selectedIds.has(profile.id);\n                    const rowNumber = (page - 1) * pageSize + index + 1;\n                    const displayName =\n                      'displayName' in profile\n                        ? (profile.displayName ?? null)\n                        : null;\n                    return (\n                      <tr\n                        key={profile.id}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0',\n                          isSelected ? 'bg-surface-2' : 'hover:bg-surface-2'\n                        )}\n                        onClick={() => handleRowClick(profile.id)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuProfileId(profile.id);\n                        }}\n                        aria-selected={isSelected}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${profile.username}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(profile.id)}\n                                className='border-sidebar-border data-[state=checked]:bg-sidebar-accent data-[state=checked]:text-sidebar-accent-foreground'\n                              />\n                            </div>\n                          </div>\n                        </td>\n                        <td\n                          className={cn(\n                            'px-4 py-3 align-middle',\n                            isSelected && 'bg-surface-2'\n                          )}\n                        >\n                          <div className='flex items-center gap-3'>\n                            <CreatorAvatarCell\n                              profileId={profile.id}\n                              username={profile.username}\n                              avatarUrl={profile.avatarUrl}\n                              verified={profile.isVerified}\n                              isFeatured={profile.isFeatured}\n                            />\n                            <div className='min-w-0'>\n                              {displayName ? (\n                                <div className='truncate font-medium text-primary-token'>\n                                  {displayName}\n                                </div>\n                              ) : null}\n                              <Link\n                                href={`/${profile.username}`}\n                                className={cn(\n                                  'truncate text-secondary-token transition-colors hover:text-primary-token',\n                                  displayName\n                                    ? 'text-xs'\n                                    : 'font-medium text-primary-token'\n                                )}\n                                onClick={event => event.stopPropagation()}\n                              >\n                                @{profile.username}\n                              </Link>\n                            </div>\n                          </div>\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs text-tertiary-token whitespace-nowrap'>\n                          {profile.createdAt\n                            ? new Intl.DateTimeFormat('en-US', {\n                                year: 'numeric',\n                                month: 'short',\n                                day: 'numeric',\n                              }).format(profile.createdAt)\n                            : '—'}\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs whitespace-nowrap'>\n                          <Badge\n                            size='sm'\n                            variant={\n                              profile.isClaimed ? 'success' : 'secondary'\n                            }\n                          >\n                            {profile.isClaimed ? (\n                              <>\n                                <Star\n                                  className='h-3 w-3 fill-current'\n                                  aria-hidden='true'\n                                />\n                                <span>Claimed</span>\n                              </>\n                            ) : (\n                              <span>Unclaimed</span>\n                            )}\n                          </Badge>\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs whitespace-nowrap'>\n                          <Badge\n                            size='sm'\n                            variant={\n                              profile.isVerified ? 'primary' : 'secondary'\n                            }\n                          >\n                            {profile.isVerified ? (\n                              <>\n                                <Check className='h-3 w-3' aria-hidden='true' />\n                                <span>Verified</span>\n                              </>\n                            ) : (\n                              <span>Not verified</span>\n                            )}\n                          </Badge>\n                        </td>\n                        <td\n                          className='px-4 py-3 align-middle text-right'\n                          onClick={e => e.stopPropagation()}\n                        >\n                          <div\n                            className={cn(\n                              'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                              openMenuProfileId === profile.id &&\n                                'opacity-100 pointer-events-auto'\n                            )}\n                          >\n                            <CreatorActionsMenu\n                              profile={profile}\n                              isMobile={isMobile}\n                              status={\n                                verificationStatuses[profile.id] ?? 'idle'\n                              }\n                              refreshIngestStatus={\n                                ingestRefreshStatuses[profile.id] ?? 'idle'\n                              }\n                              open={openMenuProfileId === profile.id}\n                              onOpenChange={open =>\n                                setOpenMenuProfileId(open ? profile.id : null)\n                              }\n                              onRefreshIngest={() => refreshIngest(profile.id)}\n                              onToggleVerification={async () => {\n                                const result = await toggleVerification(\n                                  profile.id,\n                                  !profile.isVerified\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle verification',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onToggleFeatured={async () => {\n                                const result = await toggleFeatured(\n                                  profile.id,\n                                  !profile.isFeatured\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle featured',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onToggleMarketing={async () => {\n                                const result = await toggleMarketing(\n                                  profile.id,\n                                  !profile.marketingOptOut\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle marketing',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onDelete={() => {\n                                setProfileToDelete(profile);\n                                setDeleteDialogOpen(true);\n                              }}\n                            />\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })\n                )}\n              </tbody>\n            </table>\n          )}\n        </AdminTableShell>\n      </div>\n      <RightDrawer\n        isOpen={sidebarOpen && Boolean(effectiveContact)}\n        width={CONTACT_PANEL_WIDTH}\n        ariaLabel='Contact details'\n        className='hidden md:flex bg-surface-0 border-subtle'\n      >\n        <div className='flex-1 min-h-0 overflow-auto'>\n          <ContactSidebar\n            contact={effectiveContact}\n            mode={mode}\n            isOpen={sidebarOpen && Boolean(effectiveContact)}\n            onClose={handleSidebarClose}\n            onRefresh={() => {\n              router.refresh();\n              if (selectedId) {\n                void hydrateContactSocialLinks(selectedId);\n              }\n            }}\n            onContactChange={handleContactChange}\n            onAvatarUpload={handleAvatarUpload}\n          />\n        </div>\n      </RightDrawer>\n      <DeleteCreatorDialog\n        profile={profileToDelete}\n        open={deleteDialogOpen}\n        onOpenChange={setDeleteDialogOpen}\n        onConfirm={async () => {\n          if (!profileToDelete) return { success: false };\n          const result = await deleteCreatorOrUser(profileToDelete.id);\n          if (result.success) {\n            setProfileToDelete(null);\n          }\n          return result;\n        }}\n      />\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useKeyWithClickEvents",
      "severity": "warning",
      "description": "Enforce to have the onClick mouse event with the onKeyUp, the onKeyDown, or the onKeyPress keyboard event.",
      "message": [
        { "elements": [], "content": "Enforce to have the " },
        { "elements": ["Emphasis"], "content": "onClick" },
        { "elements": [], "content": " mouse event with the " },
        { "elements": ["Emphasis"], "content": "onKeyUp" },
        { "elements": [], "content": ", the " },
        { "elements": ["Emphasis"], "content": "onKeyDown" },
        { "elements": [], "content": ", or the " },
        { "elements": ["Emphasis"], "content": "onKeyPress" },
        { "elements": [], "content": " keyboard event." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Actions triggered using mouse events should have corresponding keyboard events to account for keyboard-only navigation."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/admin/AdminCreatorProfilesWithSidebar.tsx"
        },
        "span": [28441, 28603],
        "sourceCode": "'use client';\n\nimport {\n  Badge,\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  Input,\n} from '@jovie/ui';\nimport { Check, Star } from 'lucide-react';\nimport dynamic from 'next/dynamic';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminCreatorFilters } from '@/components/admin/AdminCreatorFilters';\nimport { CreatorActionsMenu } from '@/components/admin/CreatorActionsMenu';\nimport { CreatorAvatarCell } from '@/components/admin/CreatorAvatarCell';\nimport {\n  getNextSort,\n  getSortDirection,\n  SORTABLE_COLUMNS,\n  SortableColumnKey,\n} from '@/components/admin/creator-sort-config';\nimport { IngestProfileDropdown } from '@/components/admin/IngestProfileDropdown';\nimport { AdminTableShell } from '@/components/admin/table/AdminTableShell';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useAdminTableKeyboardNavigation } from '@/components/admin/table/useAdminTableKeyboardNavigation';\nimport { useAdminTablePaginationLinks } from '@/components/admin/table/useAdminTablePaginationLinks';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { useCreatorActions } from '@/components/admin/useCreatorActions';\nimport { useCreatorVerification } from '@/components/admin/useCreatorVerification';\nimport { useToast } from '@/components/molecules/ToastContainer';\nimport { RightDrawer } from '@/components/organisms/RightDrawer';\nimport { useMediaQuery } from '@/hooks/useMediaQuery';\n\nimport type {\n  AdminCreatorProfileRow,\n  AdminCreatorProfilesSort,\n} from '@/lib/admin/creator-profiles';\nimport { api } from '@/lib/api-client';\nimport {\n  getCreatorSocialLinksSafe,\n  updateCreatorAvatar,\n} from '@/lib/api-client/endpoints/admin/creators';\nimport { ApiError } from '@/lib/api-client/types';\nimport { cn } from '@/lib/utils';\nimport type { Contact, ContactSidebarMode } from '@/types';\n\nconst DeleteCreatorDialog = dynamic(\n  () =>\n    import('@/components/admin/DeleteCreatorDialog').then(mod => ({\n      default: mod.DeleteCreatorDialog,\n    })),\n  { ssr: false }\n);\n\nconst ContactSidebar = dynamic(\n  () =>\n    import('@/components/organisms/ContactSidebar').then(mod => ({\n      default: mod.ContactSidebar,\n    })),\n  {\n    loading: () => <div className='h-full w-full animate-pulse bg-surface-1' />,\n    ssr: false,\n  }\n);\n\nconst CONTACT_PANEL_WIDTH = 320;\n\nfunction useOptionalTableMeta() {\n  try {\n    return useTableMeta();\n  } catch {\n    return null;\n  }\n}\n\nexport interface AdminCreatorProfilesWithSidebarProps {\n  profiles: AdminCreatorProfileRow[];\n  page: number;\n  pageSize: number;\n  total: number;\n  search: string;\n  sort: AdminCreatorProfilesSort;\n  mode?: ContactSidebarMode;\n  /** Base path for pagination/sort links. Defaults to '/app/admin/creators' */\n  basePath?: string;\n}\n\nfunction mapProfileToContact(\n  profile: AdminCreatorProfileRow | null\n): Contact | null {\n  if (!profile) return null;\n  return {\n    id: profile.id,\n    username: profile.username,\n    displayName:\n      'displayName' in profile ? (profile.displayName ?? null) : null,\n    firstName: undefined,\n    lastName: undefined,\n    avatarUrl: profile.avatarUrl ?? null,\n    socialLinks: [],\n  };\n}\n\n// Admin endpoint group for page-level routes (not /api/admin/)\nconst adminPagesApi = api.createGroup('/app/admin/creators');\n\n/**\n * Response type for bulk refresh endpoint\n */\ninterface BulkRefreshResponse {\n  success: boolean;\n  queuedCount?: number;\n  error?: string;\n}\n\nexport function AdminCreatorProfilesWithSidebar({\n  profiles: initialProfiles,\n  page,\n  pageSize,\n  total,\n  search,\n  sort,\n  mode = 'admin',\n  basePath = '/app/admin/creators',\n}: AdminCreatorProfilesWithSidebarProps) {\n  const router = useRouter();\n  const { showToast } = useToast();\n  const {\n    profiles,\n    statuses: verificationStatuses,\n    toggleVerification,\n  } = useCreatorVerification(initialProfiles);\n\n  const {\n    profiles: profilesWithActions,\n    toggleFeatured,\n    toggleMarketing,\n    deleteCreatorOrUser,\n  } = useCreatorActions(profiles);\n\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [openMenuProfileId, setOpenMenuProfileId] = useState<string | null>(\n    null\n  );\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [draftContact, setDraftContact] = useState<Contact | null>(null);\n\n  const [ingestRefreshStatuses, setIngestRefreshStatuses] = useState<\n    Record<string, 'idle' | 'loading' | 'success' | 'error'>\n  >({});\n  const tableMetaCtx = useOptionalTableMeta();\n  const [searchTerm, setSearchTerm] = useState(search);\n  const setTableMeta = React.useMemo(\n    () => tableMetaCtx?.setTableMeta ?? (() => {}),\n    [tableMetaCtx]\n  );\n\n  const isMobile = useMediaQuery('(max-width: 767px)');\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [profileToDelete, setProfileToDelete] =\n    useState<AdminCreatorProfileRow | null>(null);\n\n  const {\n    totalPages,\n    canPrev,\n    canNext,\n    from,\n    to,\n    prevHref,\n    nextHref,\n    clearHref,\n    buildHref,\n  } = useAdminTablePaginationLinks<AdminCreatorProfilesSort>({\n    basePath,\n    page,\n    pageSize,\n    search,\n    sort,\n    total,\n  });\n\n  const createSortHref = (column: SortableColumnKey) =>\n    buildHref({ page: 1, sort: getNextSort(sort, column) });\n\n  const filteredProfiles = useMemo(() => {\n    const term = searchTerm.trim().toLowerCase();\n    if (!term) return profilesWithActions;\n    return profilesWithActions.filter(profile => {\n      const username = profile.username.toLowerCase();\n      const displayName =\n        'displayName' in profile\n          ? (profile.displayName ?? '').toLowerCase()\n          : '';\n      return username.includes(term) || displayName.includes(term);\n    });\n  }, [profilesWithActions, searchTerm]);\n\n  const rowIds = useMemo(\n    () => filteredProfiles.map(profile => profile.id),\n    [filteredProfiles]\n  );\n\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n  } = useRowSelection(rowIds);\n\n  const selectedProfile = useMemo(\n    () => filteredProfiles.find(p => p.id === selectedId) ?? null,\n    [filteredProfiles, selectedId]\n  );\n\n  const hydrateContactSocialLinks = useCallback(\n    async (profileId: string): Promise<void> => {\n      const contactBase = mapProfileToContact(\n        filteredProfiles.find(p => p.id === profileId) ?? null\n      );\n      if (!contactBase) return;\n\n      const result = await getCreatorSocialLinksSafe(profileId);\n\n      if (!result.ok || !result.data.success) {\n        setDraftContact(contactBase);\n        return;\n      }\n\n      setDraftContact({\n        ...contactBase,\n        socialLinks: result.data.links.map(link => ({\n          id: link.id,\n          label: link.label,\n          url: link.url,\n          platformType: link.platformType,\n        })),\n      });\n    },\n    [filteredProfiles]\n  );\n\n  const effectiveContact = useMemo(() => {\n    if (draftContact && draftContact.id === selectedId) return draftContact;\n    return mapProfileToContact(selectedProfile);\n  }, [draftContact, selectedId, selectedProfile]);\n\n  const handleRowClick = useCallback((id: string) => {\n    setSelectedId(id);\n    setSidebarOpen(true);\n    setDraftContact(null);\n  }, []);\n\n  React.useEffect(() => {\n    if (!sidebarOpen || !selectedId) return;\n    void hydrateContactSocialLinks(selectedId);\n  }, [hydrateContactSocialLinks, selectedId, sidebarOpen]);\n\n  const refreshIngest = useCallback(\n    async (profileId: string): Promise<void> => {\n      setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'loading' }));\n      try {\n        const result = await adminPagesApi.request<BulkRefreshResponse>(\n          'POST',\n          '/bulk-refresh',\n          { body: { profileIds: [profileId] } }\n        );\n\n        if (!result.ok) {\n          throw result.error;\n        }\n\n        if (!result.data.success) {\n          throw new Error(result.data.error ?? 'Failed to queue ingestion');\n        }\n\n        setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'success' }));\n        showToast({\n          type: 'success',\n          message: 'Ingestion refresh queued',\n        });\n        router.refresh();\n\n        if (selectedId === profileId) {\n          void hydrateContactSocialLinks(profileId);\n        }\n      } catch (error) {\n        setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'error' }));\n        showToast({\n          type: 'error',\n          message:\n            error instanceof ApiError\n              ? error.message\n              : error instanceof Error\n                ? error.message\n                : 'Refresh failed',\n        });\n      } finally {\n        window.setTimeout(() => {\n          setIngestRefreshStatuses(prev => ({ ...prev, [profileId]: 'idle' }));\n        }, 2200);\n      }\n    },\n    [hydrateContactSocialLinks, router, selectedId, showToast]\n  );\n\n  const { handleKeyDown } = useAdminTableKeyboardNavigation({\n    items: filteredProfiles,\n    selectedId,\n    onSelect: setSelectedId,\n    onToggleSidebar: () => setSidebarOpen(open => !open),\n    onCloseSidebar: () => setSidebarOpen(false),\n    isSidebarOpen: sidebarOpen,\n    getId: profile => profile.id,\n  });\n\n  const handleContactChange = (updated: Contact) => {\n    setDraftContact(updated);\n  };\n\n  const handleSidebarClose = () => {\n    setSidebarOpen(false);\n  };\n\n  const handleAvatarUpload = useCallback(\n    async (file: File, contact: Contact): Promise<string> => {\n      // Step 1: Upload image to blob storage (uses FormData, not JSON)\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const uploadResponse = await fetch('/api/images/upload', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const uploadJson = (await uploadResponse.json().catch(() => ({}))) as {\n        blobUrl?: string;\n        error?: string;\n      };\n\n      if (!uploadResponse.ok || !uploadJson.blobUrl) {\n        const message = uploadJson.error || 'Failed to upload avatar';\n        throw new Error(message);\n      }\n\n      const blobUrl = uploadJson.blobUrl;\n\n      // Step 2: Update creator profile with new avatar URL via admin API\n      await updateCreatorAvatar({\n        profileId: contact.id,\n        avatarUrl: blobUrl,\n      });\n\n      return blobUrl;\n    },\n    []\n  );\n\n  // Ensure the phone preview never opens empty: select the first creator if none is selected.\n  React.useEffect(() => {\n    if (sidebarOpen && !selectedId && profilesWithActions.length > 0) {\n      setSelectedId(profilesWithActions[0]!.id);\n      setDraftContact(null);\n    }\n  }, [sidebarOpen, selectedId, profilesWithActions]);\n\n  // Expose row count and toggle handler for dashboard action button\n  React.useEffect(() => {\n    const toggle = () => {\n      setSidebarOpen(prev => {\n        const next = !prev;\n        if (next && !selectedId && filteredProfiles[0]) {\n          setSelectedId(filteredProfiles[0]!.id);\n          setDraftContact(null);\n        }\n        return next;\n      });\n    };\n\n    setTableMeta({\n      rowCount: filteredProfiles.length,\n      toggle,\n      rightPanelWidth:\n        sidebarOpen && Boolean(effectiveContact) ? CONTACT_PANEL_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [\n    filteredProfiles,\n    selectedId,\n    setTableMeta,\n    sidebarOpen,\n    effectiveContact,\n  ]);\n\n  return (\n    <div className='flex h-full min-h-0 flex-col md:flex-row md:items-stretch'>\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <AdminTableShell\n          scrollContainerProps={{\n            tabIndex: 0,\n            onKeyDown: handleKeyDown,\n          }}\n          toolbar={\n            <div className='flex h-14 w-full items-center gap-3 px-4'>\n              <div className='hidden sm:block text-xs text-secondary-token'>\n                Showing {from.toLocaleString()}–{to.toLocaleString()} of{' '}\n                {total.toLocaleString()} profiles\n              </div>\n              <div className='ml-auto flex items-center gap-3'>\n                <form\n                  action={basePath}\n                  method='get'\n                  className='relative isolate flex items-center gap-2'\n                >\n                  <input type='hidden' name='sort' value={sort} />\n                  <input type='hidden' name='pageSize' value={pageSize} />\n                  <Input\n                    name='q'\n                    placeholder='Search by handle'\n                    value={searchTerm}\n                    onChange={event => setSearchTerm(event.target.value)}\n                    className='w-[240px]'\n                  />\n                  <input type='hidden' name='page' value='1' />\n                  <Button type='submit' size='sm' variant='secondary'>\n                    Search\n                  </Button>\n                  {search && search.length > 0 && (\n                    <Button asChild size='sm' variant='ghost'>\n                      <Link href={clearHref}>Clear</Link>\n                    </Button>\n                  )}\n                </form>\n                <div\n                  className='hidden h-6 w-px bg-border sm:block'\n                  aria-hidden='true'\n                />\n                <IngestProfileDropdown />\n              </div>\n            </div>\n          }\n          footer={\n            <div className='flex flex-wrap items-center justify-between gap-3 px-3 py-2 text-xs text-secondary-token'>\n              <div className='flex items-center gap-2'>\n                <span>\n                  Page {page} of {totalPages}\n                </span>\n                <span className='text-tertiary-token'>\n                  {from.toLocaleString()}–{to.toLocaleString()} of{' '}\n                  {total.toLocaleString()}\n                </span>\n              </div>\n              <div className='flex items-center gap-3'>\n                <div className='flex items-center gap-2'>\n                  <span>Rows per page</span>\n                  <AdminCreatorFilters initialPageSize={pageSize} />\n                </div>\n                <div className='flex items-center gap-2'>\n                  <Button asChild size='sm' variant='ghost' disabled={!canPrev}>\n                    <Link href={prevHref ?? '#'} aria-disabled={!canPrev}>\n                      Previous\n                    </Link>\n                  </Button>\n                  <Button asChild size='sm' variant='ghost' disabled={!canNext}>\n                    <Link href={nextHref ?? '#'} aria-disabled={!canNext}>\n                      Next\n                    </Link>\n                  </Button>\n                </div>\n              </div>\n            </div>\n          }\n        >\n          {({ headerElevated, stickyTopPx }) => (\n            <table className='w-full table-fixed border-separate border-spacing-0 text-[13px]'>\n              <colgroup>\n                <col className='w-14' />\n                <col className='w-[320px]' />\n                <col className='w-[160px]' />\n                <col className='w-[160px]' />\n                <col className='w-[160px]' />\n                <col className='w-[140px]' />\n              </colgroup>\n              <thead className='text-left text-secondary-token'>\n                <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                  <th\n                    className={cn(\n                      'sticky z-20 w-14 px-4 py-3 text-left border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <Checkbox\n                      aria-label='Select all creators'\n                      checked={headerCheckboxState}\n                      onCheckedChange={toggleSelectAll}\n                      className='border-sidebar-border data-[state=checked]:bg-sidebar-accent data-[state=checked]:text-sidebar-accent-foreground'\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <span className='sr-only'>Creator</span>\n                    <div\n                      className={cn(\n                        'inline-flex items-center transition-all duration-150',\n                        selectedCount > 0\n                          ? 'opacity-100 translate-y-0'\n                          : 'pointer-events-none opacity-0 -translate-y-0.5'\n                      )}\n                    >\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button\n                            variant='secondary'\n                            size='sm'\n                            className='normal-case'\n                          >\n                            Bulk actions\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align='start'>\n                          <DropdownMenuItem disabled>\n                            Feature selected (coming soon)\n                          </DropdownMenuItem>\n                          <DropdownMenuItem disabled>\n                            Unverify selected (coming soon)\n                          </DropdownMenuItem>\n                          <DropdownMenuItem\n                            disabled\n                            className='text-destructive'\n                          >\n                            Delete selected (coming soon)\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </div>\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.created.label}\n                      direction={getSortDirection(sort, 'created')}\n                      onClick={() => router.push(createSortHref('created'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.claimed.label}\n                      direction={getSortDirection(sort, 'claimed')}\n                      onClick={() => router.push(createSortHref('claimed'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-left cursor-pointer select-none border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <SortableHeaderButton\n                      label={SORTABLE_COLUMNS.verified.label}\n                      direction={getSortDirection(sort, 'verified')}\n                      onClick={() => router.push(createSortHref('verified'))}\n                    />\n                  </th>\n                  <th\n                    className={cn(\n                      'sticky z-20 px-4 py-3 text-right border-b border-subtle bg-surface-1/80 backdrop-blur supports-backdrop-filter:bg-surface-1/70',\n                      headerElevated &&\n                        'shadow-sm shadow-black/10 dark:shadow-black/40'\n                    )}\n                    style={{ top: stickyTopPx }}\n                  >\n                    <span className='sr-only'>Action</span>\n                    <div className='flex items-center justify-end' />\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {profilesWithActions.length === 0 ? (\n                  <tr>\n                    <td\n                      colSpan={6}\n                      className='px-4 py-10 text-center text-sm text-secondary-token'\n                    >\n                      No creator profiles found.\n                    </td>\n                  </tr>\n                ) : (\n                  profilesWithActions.map((profile, index) => {\n                    const isSelected = profile.id === selectedId;\n                    const isChecked = selectedIds.has(profile.id);\n                    const rowNumber = (page - 1) * pageSize + index + 1;\n                    const displayName =\n                      'displayName' in profile\n                        ? (profile.displayName ?? null)\n                        : null;\n                    return (\n                      <tr\n                        key={profile.id}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0',\n                          isSelected ? 'bg-surface-2' : 'hover:bg-surface-2'\n                        )}\n                        onClick={() => handleRowClick(profile.id)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuProfileId(profile.id);\n                        }}\n                        aria-selected={isSelected}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${profile.username}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(profile.id)}\n                                className='border-sidebar-border data-[state=checked]:bg-sidebar-accent data-[state=checked]:text-sidebar-accent-foreground'\n                              />\n                            </div>\n                          </div>\n                        </td>\n                        <td\n                          className={cn(\n                            'px-4 py-3 align-middle',\n                            isSelected && 'bg-surface-2'\n                          )}\n                        >\n                          <div className='flex items-center gap-3'>\n                            <CreatorAvatarCell\n                              profileId={profile.id}\n                              username={profile.username}\n                              avatarUrl={profile.avatarUrl}\n                              verified={profile.isVerified}\n                              isFeatured={profile.isFeatured}\n                            />\n                            <div className='min-w-0'>\n                              {displayName ? (\n                                <div className='truncate font-medium text-primary-token'>\n                                  {displayName}\n                                </div>\n                              ) : null}\n                              <Link\n                                href={`/${profile.username}`}\n                                className={cn(\n                                  'truncate text-secondary-token transition-colors hover:text-primary-token',\n                                  displayName\n                                    ? 'text-xs'\n                                    : 'font-medium text-primary-token'\n                                )}\n                                onClick={event => event.stopPropagation()}\n                              >\n                                @{profile.username}\n                              </Link>\n                            </div>\n                          </div>\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs text-tertiary-token whitespace-nowrap'>\n                          {profile.createdAt\n                            ? new Intl.DateTimeFormat('en-US', {\n                                year: 'numeric',\n                                month: 'short',\n                                day: 'numeric',\n                              }).format(profile.createdAt)\n                            : '—'}\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs whitespace-nowrap'>\n                          <Badge\n                            size='sm'\n                            variant={\n                              profile.isClaimed ? 'success' : 'secondary'\n                            }\n                          >\n                            {profile.isClaimed ? (\n                              <>\n                                <Star\n                                  className='h-3 w-3 fill-current'\n                                  aria-hidden='true'\n                                />\n                                <span>Claimed</span>\n                              </>\n                            ) : (\n                              <span>Unclaimed</span>\n                            )}\n                          </Badge>\n                        </td>\n                        <td className='px-4 py-3 align-middle text-xs whitespace-nowrap'>\n                          <Badge\n                            size='sm'\n                            variant={\n                              profile.isVerified ? 'primary' : 'secondary'\n                            }\n                          >\n                            {profile.isVerified ? (\n                              <>\n                                <Check className='h-3 w-3' aria-hidden='true' />\n                                <span>Verified</span>\n                              </>\n                            ) : (\n                              <span>Not verified</span>\n                            )}\n                          </Badge>\n                        </td>\n                        <td\n                          className='px-4 py-3 align-middle text-right'\n                          onClick={e => e.stopPropagation()}\n                        >\n                          <div\n                            className={cn(\n                              'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                              openMenuProfileId === profile.id &&\n                                'opacity-100 pointer-events-auto'\n                            )}\n                          >\n                            <CreatorActionsMenu\n                              profile={profile}\n                              isMobile={isMobile}\n                              status={\n                                verificationStatuses[profile.id] ?? 'idle'\n                              }\n                              refreshIngestStatus={\n                                ingestRefreshStatuses[profile.id] ?? 'idle'\n                              }\n                              open={openMenuProfileId === profile.id}\n                              onOpenChange={open =>\n                                setOpenMenuProfileId(open ? profile.id : null)\n                              }\n                              onRefreshIngest={() => refreshIngest(profile.id)}\n                              onToggleVerification={async () => {\n                                const result = await toggleVerification(\n                                  profile.id,\n                                  !profile.isVerified\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle verification',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onToggleFeatured={async () => {\n                                const result = await toggleFeatured(\n                                  profile.id,\n                                  !profile.isFeatured\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle featured',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onToggleMarketing={async () => {\n                                const result = await toggleMarketing(\n                                  profile.id,\n                                  !profile.marketingOptOut\n                                );\n                                if (!result.success) {\n                                  console.error(\n                                    'Failed to toggle marketing',\n                                    result.error\n                                  );\n                                }\n                              }}\n                              onDelete={() => {\n                                setProfileToDelete(profile);\n                                setDeleteDialogOpen(true);\n                              }}\n                            />\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })\n                )}\n              </tbody>\n            </table>\n          )}\n        </AdminTableShell>\n      </div>\n      <RightDrawer\n        isOpen={sidebarOpen && Boolean(effectiveContact)}\n        width={CONTACT_PANEL_WIDTH}\n        ariaLabel='Contact details'\n        className='hidden md:flex bg-surface-0 border-subtle'\n      >\n        <div className='flex-1 min-h-0 overflow-auto'>\n          <ContactSidebar\n            contact={effectiveContact}\n            mode={mode}\n            isOpen={sidebarOpen && Boolean(effectiveContact)}\n            onClose={handleSidebarClose}\n            onRefresh={() => {\n              router.refresh();\n              if (selectedId) {\n                void hydrateContactSocialLinks(selectedId);\n              }\n            }}\n            onContactChange={handleContactChange}\n            onAvatarUpload={handleAvatarUpload}\n          />\n        </div>\n      </RightDrawer>\n      <DeleteCreatorDialog\n        profile={profileToDelete}\n        open={deleteDialogOpen}\n        onOpenChange={setDeleteDialogOpen}\n        onConfirm={async () => {\n          if (!profileToDelete) return { success: false };\n          const result = await deleteCreatorOrUser(profileToDelete.id);\n          if (result.success) {\n            setProfileToDelete(null);\n          }\n          return result;\n        }}\n      />\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<nav>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<nav>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/admin/AdminSidebar.tsx" },
        "span": [2824, 2841],
        "sourceCode": "'use client';\n\nimport {\n  Activity,\n  AlertTriangle,\n  BarChart2,\n  LayoutDashboard,\n  ShieldCheck,\n  User,\n  UserPlus,\n  Users,\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useEffect, useState } from 'react';\n\nimport { BrandLogo } from '@/components/atoms/BrandLogo';\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarHeader,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarRail,\n} from '@/components/organisms/Sidebar';\nimport { cn } from '@/lib/utils';\n\nconst navItems = [\n  { label: 'Overview', href: '/app/admin', icon: LayoutDashboard },\n  { label: 'Waitlist', href: '/app/admin/waitlist', icon: UserPlus },\n  { label: 'Creators', href: '/app/admin/creators', icon: Users },\n  { label: 'Users', href: '/app/admin/users', icon: User },\n  { label: 'Usage', href: '/app/admin#usage', icon: BarChart2 },\n  { label: 'Reliability', href: '/app/admin#errors', icon: ShieldCheck },\n  { label: 'Activity', href: '/app/admin/activity', icon: Activity },\n];\n\ninterface AdminSidebarProps {\n  className?: string;\n}\n\nexport function AdminSidebar({ className }: AdminSidebarProps) {\n  const pathname = usePathname();\n  const [hash, setHash] = useState<string>('');\n\n  useEffect(() => {\n    // Track hash so items like /admin#usage don't double-highlight\n    const updateHash = () => setHash(window.location.hash || '');\n    updateHash();\n    window.addEventListener('hashchange', updateHash);\n    return () => window.removeEventListener('hashchange', updateHash);\n  }, []);\n\n  const pathWithHash = hash ? `${pathname}${hash}` : pathname;\n  const activeHref =\n    navItems.find(item => item.href === pathWithHash)?.href ??\n    navItems.find(item => item.href === pathname)?.href ??\n    null;\n\n  return (\n    <Sidebar variant='sidebar' className={className}>\n      <SidebarHeader>\n        <SidebarMenu>\n          <SidebarMenuItem>\n            <SidebarMenuButton asChild size='lg' className='gap-3'>\n              <Link href='/app/admin' className='flex items-center gap-3'>\n                <div className='flex aspect-square size-9 items-center justify-center rounded-md bg-sidebar-accent text-sidebar-accent-foreground'>\n                  <BrandLogo size={18} tone='auto' className='size-4' />\n                </div>\n                <div className='grid flex-1 text-left leading-tight'>\n                  <span className='truncate text-sm font-semibold'>Jovie</span>\n                  <span className='truncate text-xs text-sidebar-muted'>\n                    Admin Console\n                  </span>\n                </div>\n              </Link>\n            </SidebarMenuButton>\n          </SidebarMenuItem>\n        </SidebarMenu>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <nav\n          aria-label='Admin navigation'\n          role='navigation'\n          className='flex flex-1 flex-col overflow-hidden'\n        >\n          <SidebarMenu>\n            {navItems.map(item => {\n              const isActive = item.href === activeHref;\n\n              return (\n                <SidebarMenuItem key={item.label}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={isActive}\n                    className='font-medium'\n                  >\n                    <Link\n                      href={item.href}\n                      aria-current={isActive ? 'page' : undefined}\n                      className='flex w-full min-w-0 items-center gap-3'\n                    >\n                      <item.icon className='size-4' />\n                      <span className={cn('truncate')}>{item.label}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              );\n            })}\n          </SidebarMenu>\n        </nav>\n      </SidebarContent>\n\n      <SidebarFooter>\n        <SidebarMenu>\n          <SidebarMenuItem>\n            <div className='flex items-center gap-2 rounded-md border border-sidebar-border bg-sidebar-accent px-3 py-2 text-xs text-sidebar-foreground'>\n              <AlertTriangle className='size-4 text-amber-500' />\n              <span>Public preview. Do not add secrets here.</span>\n            </div>\n          </SidebarMenuItem>\n        </SidebarMenu>\n      </SidebarFooter>\n\n      <SidebarRail />\n    </Sidebar>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noRedundantRoles",
      "severity": "warning",
      "description": "Using the role attribute 'navigation' on the 'nav' element is redundant, because it is implied by its semantic.",
      "message": [
        {
          "elements": [],
          "content": "Using the role attribute 'navigation' on the 'nav' element is redundant, because it is implied by its semantic."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Unsafe fix: Remove the " },
                { "elements": ["Emphasis"], "content": "role" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "'use client';\n\nimport {      <SidebarContent>\n        <nav\n          aria-label='Admin navigation'\n          role='navigation'\n          className='flex flex-1 flex-col overflow-hidden'\n        >  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 23] } } },
                { "equalLines": { "line_count": 80 } },
                { "diffOp": { "equal": { "range": [23, 98] } } },
                { "diffOp": { "delete": { "range": [98, 126] } } },
                { "diffOp": { "equal": { "range": [126, 195] } } },
                { "equalLines": { "line_count": 40 } },
                { "diffOp": { "equal": { "range": [195, 202] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/admin/AdminSidebar.tsx" },
        "span": [2829, 2841],
        "sourceCode": "'use client';\n\nimport {\n  Activity,\n  AlertTriangle,\n  BarChart2,\n  LayoutDashboard,\n  ShieldCheck,\n  User,\n  UserPlus,\n  Users,\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useEffect, useState } from 'react';\n\nimport { BrandLogo } from '@/components/atoms/BrandLogo';\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarHeader,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarRail,\n} from '@/components/organisms/Sidebar';\nimport { cn } from '@/lib/utils';\n\nconst navItems = [\n  { label: 'Overview', href: '/app/admin', icon: LayoutDashboard },\n  { label: 'Waitlist', href: '/app/admin/waitlist', icon: UserPlus },\n  { label: 'Creators', href: '/app/admin/creators', icon: Users },\n  { label: 'Users', href: '/app/admin/users', icon: User },\n  { label: 'Usage', href: '/app/admin#usage', icon: BarChart2 },\n  { label: 'Reliability', href: '/app/admin#errors', icon: ShieldCheck },\n  { label: 'Activity', href: '/app/admin/activity', icon: Activity },\n];\n\ninterface AdminSidebarProps {\n  className?: string;\n}\n\nexport function AdminSidebar({ className }: AdminSidebarProps) {\n  const pathname = usePathname();\n  const [hash, setHash] = useState<string>('');\n\n  useEffect(() => {\n    // Track hash so items like /admin#usage don't double-highlight\n    const updateHash = () => setHash(window.location.hash || '');\n    updateHash();\n    window.addEventListener('hashchange', updateHash);\n    return () => window.removeEventListener('hashchange', updateHash);\n  }, []);\n\n  const pathWithHash = hash ? `${pathname}${hash}` : pathname;\n  const activeHref =\n    navItems.find(item => item.href === pathWithHash)?.href ??\n    navItems.find(item => item.href === pathname)?.href ??\n    null;\n\n  return (\n    <Sidebar variant='sidebar' className={className}>\n      <SidebarHeader>\n        <SidebarMenu>\n          <SidebarMenuItem>\n            <SidebarMenuButton asChild size='lg' className='gap-3'>\n              <Link href='/app/admin' className='flex items-center gap-3'>\n                <div className='flex aspect-square size-9 items-center justify-center rounded-md bg-sidebar-accent text-sidebar-accent-foreground'>\n                  <BrandLogo size={18} tone='auto' className='size-4' />\n                </div>\n                <div className='grid flex-1 text-left leading-tight'>\n                  <span className='truncate text-sm font-semibold'>Jovie</span>\n                  <span className='truncate text-xs text-sidebar-muted'>\n                    Admin Console\n                  </span>\n                </div>\n              </Link>\n            </SidebarMenuButton>\n          </SidebarMenuItem>\n        </SidebarMenu>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <nav\n          aria-label='Admin navigation'\n          role='navigation'\n          className='flex flex-1 flex-col overflow-hidden'\n        >\n          <SidebarMenu>\n            {navItems.map(item => {\n              const isActive = item.href === activeHref;\n\n              return (\n                <SidebarMenuItem key={item.label}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={isActive}\n                    className='font-medium'\n                  >\n                    <Link\n                      href={item.href}\n                      aria-current={isActive ? 'page' : undefined}\n                      className='flex w-full min-w-0 items-center gap-3'\n                    >\n                      <item.icon className='size-4' />\n                      <span className={cn('truncate')}>{item.label}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              );\n            })}\n          </SidebarMenu>\n        </nav>\n      </SidebarContent>\n\n      <SidebarFooter>\n        <SidebarMenu>\n          <SidebarMenuItem>\n            <div className='flex items-center gap-2 rounded-md border border-sidebar-border bg-sidebar-accent px-3 py-2 text-xs text-sidebar-foreground'>\n              <AlertTriangle className='size-4 text-amber-500' />\n              <span>Public preview. Do not add secrets here.</span>\n            </div>\n          </SidebarMenuItem>\n        </SidebarMenu>\n      </SidebarFooter>\n\n      <SidebarRail />\n    </Sidebar>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/admin/IngestProfileDropdown.tsx" },
        "span": [6572, 6677],
        "sourceCode": "'use client';\n\nimport {\n  Badge,\n  Button,\n  Input,\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@jovie/ui';\nimport { useRouter } from 'next/navigation';\nimport { useMemo, useState } from 'react';\n\nimport { Icon } from '@/components/atoms/Icon';\nimport { ingestCreator } from '@/lib/api-client/endpoints/admin/creators';\nimport { ApiError } from '@/lib/api-client/types';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\n\ntype IngestPlatform = 'linktree' | 'beacons' | 'instagram';\n\ninterface PlatformOption {\n  id: IngestPlatform;\n  label: string;\n  placeholder: string;\n  enabled: boolean;\n}\n\nconst PLATFORM_OPTIONS: PlatformOption[] = [\n  {\n    id: 'linktree',\n    label: 'Linktree',\n    placeholder: 'https://linktr.ee/username',\n    enabled: true,\n  },\n  {\n    id: 'beacons',\n    label: 'Beacons',\n    placeholder: 'https://beacons.ai/username',\n    enabled: false,\n  },\n  {\n    id: 'instagram',\n    label: 'Instagram',\n    placeholder: 'https://instagram.com/username',\n    enabled: false,\n  },\n];\n\nconst PLATFORM_PREFIX: Record<IngestPlatform, string> = {\n  linktree: 'https://linktr.ee/',\n  beacons: 'https://beacons.ai/',\n  instagram: 'https://instagram.com/',\n};\n\ntype IngestProfileDropdownProps = {\n  onIngestPending?: (profile: { id: string; username: string }) => void;\n};\n\nexport function IngestProfileDropdown({\n  onIngestPending,\n}: IngestProfileDropdownProps) {\n  const router = useRouter();\n  const notifications = useNotifications();\n\n  const [open, setOpen] = useState(false);\n  const [username, setUsername] = useState('');\n  const [urlOverride, setUrlOverride] = useState<string | null>(null);\n  const [selectedPlatform, setSelectedPlatform] =\n    useState<IngestPlatform>('linktree');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n\n  const currentPlatform = PLATFORM_OPTIONS.find(p => p.id === selectedPlatform);\n\n  const effectiveUrl = useMemo(() => {\n    if (urlOverride) return urlOverride.trim();\n    const prefix = PLATFORM_PREFIX[selectedPlatform];\n    const trimmed = username.trim().replace(/^@/, '');\n    return trimmed ? `${prefix}${trimmed}` : '';\n  }, [selectedPlatform, urlOverride, username]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!effectiveUrl) {\n      notifications.error('Please enter a handle');\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const result = await ingestCreator({ url: effectiveUrl });\n\n      const profileId = result.profile?.id;\n      const profileUsername = result.profile?.username;\n      const successMessage = profileUsername\n        ? `Created creator profile @${profileUsername}`\n        : 'Created new creator profile';\n\n      notifications.success(successMessage, {\n        action: profileUsername\n          ? {\n              label: 'View profile',\n              onClick: () => router.push(`/${profileUsername}`),\n            }\n          : undefined,\n      });\n\n      if (profileId && profileUsername) {\n        onIngestPending?.({ id: profileId, username: profileUsername });\n      }\n\n      setIsSuccess(true);\n\n      setUsername('');\n      setUrlOverride(null);\n\n      // Force-refresh table immediately, then close after showing success briefly\n      router.refresh();\n\n      // Keep the popover open briefly to show success\n      setTimeout(() => {\n        setOpen(false);\n        setIsSuccess(false);\n      }, 900);\n    } catch (error) {\n      notifications.error(\n        error instanceof ApiError ? error.message : 'Failed to ingest profile'\n      );\n    } finally {\n      setIsLoading(false);\n      setIsSuccess(false);\n    }\n  };\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button type='button' size='sm' variant='secondary'>\n          <Icon name='Plus' className='h-4 w-4 mr-2' />\n          Ingest Profile\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent align='end' className='w-80 p-0'>\n        <div className='p-4 space-y-4'>\n          <div className='flex items-center justify-between'>\n            <div>\n              <p className='text-sm font-semibold text-primary-token'>\n                Ingest profile\n              </p>\n              <p className='text-xs text-secondary-token'>\n                Import from external platform (auto-builds URL)\n              </p>\n            </div>\n            <Badge\n              variant='secondary'\n              size='sm'\n              className='uppercase text-[10px]'\n            >\n              Admin\n            </Badge>\n          </div>\n\n          {/* Platform selector */}\n          <div className='flex gap-1'>\n            {PLATFORM_OPTIONS.map(platform => (\n              <button\n                key={platform.id}\n                type='button'\n                disabled={!platform.enabled}\n                onClick={() => setSelectedPlatform(platform.id)}\n                className={`\n                  px-3 py-1.5 text-xs font-medium rounded-full transition-colors\n                  ${\n                    selectedPlatform === platform.id\n                      ? 'bg-primary text-primary-foreground'\n                      : platform.enabled\n                        ? 'bg-surface-2 text-secondary-token hover:bg-surface-3'\n                        : 'bg-surface-2/50 text-tertiary-token cursor-not-allowed opacity-50'\n                  }\n                `}\n              >\n                {platform.label}\n              </button>\n            ))}\n          </div>\n\n          <form onSubmit={handleSubmit} className='space-y-3'>\n            {isSuccess && (\n              <div className='rounded-md border border-green-200 bg-green-50 px-3 py-2 text-xs text-green-800 dark:border-green-800/60 dark:bg-green-950/30 dark:text-green-200'>\n                Profile created — refreshing table…\n              </div>\n            )}\n\n            <div className='space-y-1'>\n              <Input\n                type='text'\n                placeholder='username'\n                value={username}\n                onChange={e => {\n                  setUsername(e.target.value);\n                  setUrlOverride(null);\n                }}\n                disabled={isLoading}\n                autoFocus\n                className='w-full'\n              />\n              <p className='text-xs text-secondary-token'>\n                {currentPlatform?.label} URL:{' '}\n                <span className='font-sans'>{effectiveUrl || '—'}</span>\n              </p>\n            </div>\n\n            <div className='space-y-1'>\n              <label className='text-xs text-secondary-token'>\n                Or paste full URL\n              </label>\n              <Input\n                type='url'\n                placeholder={currentPlatform?.placeholder}\n                value={urlOverride ?? ''}\n                onChange={e => setUrlOverride(e.target.value || null)}\n                disabled={isLoading}\n                className='w-full'\n              />\n            </div>\n\n            <div className='flex justify-end gap-2'>\n              <Button\n                type='button'\n                size='sm'\n                variant='ghost'\n                onClick={() => setOpen(false)}\n                disabled={isLoading}\n              >\n                Cancel\n              </Button>\n              <Button\n                type='submit'\n                size='sm'\n                variant='primary'\n                disabled={isLoading || !effectiveUrl}\n              >\n                {isLoading ? 'Ingesting...' : 'Ingest'}\n              </Button>\n            </div>\n          </form>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/admin/table/AdminPageSizeSelect.tsx" },
        "span": [677, 1433],
        "sourceCode": "'use client';\n\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@jovie/ui';\nimport * as React from 'react';\n\nexport interface AdminPageSizeSelectProps {\n  initialPageSize: number;\n  name?: string;\n  onPageSizeChange?: (pageSize: number) => void;\n}\n\nexport function AdminPageSizeSelect({\n  initialPageSize,\n  name = 'pageSize',\n  onPageSizeChange,\n}: AdminPageSizeSelectProps) {\n  const [pageSizeValue, setPageSizeValue] = React.useState<string>(\n    String(initialPageSize)\n  );\n\n  return (\n    <div className='flex items-center gap-2 text-xs text-secondary-token'>\n      <input type='hidden' name={name} value={pageSizeValue} />\n      <label className='flex items-center gap-1'>\n        <span>Rows per page</span>\n        <Select\n          value={pageSizeValue}\n          onValueChange={nextValue => {\n            setPageSizeValue(nextValue);\n            const parsed = Number.parseInt(nextValue, 10);\n            if (Number.isFinite(parsed) && parsed > 0) {\n              onPageSizeChange?.(parsed);\n            }\n          }}\n        >\n          <SelectTrigger className='h-8 w-20 px-2 text-xs'>\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value='10'>10</SelectItem>\n            <SelectItem value='20'>20</SelectItem>\n            <SelectItem value='50'>50</SelectItem>\n          </SelectContent>\n        </Select>\n      </label>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-orientation' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-orientation' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Divider.tsx" },
        "span": [624, 949],
        "sourceCode": "import { cn } from '@/lib/utils';\n\nexport type DividerProps = {\n  className?: string;\n  inset?: boolean; // adds horizontal padding inset for alignment with content\n  orientation?: 'horizontal' | 'vertical';\n  ariaHidden?: boolean; // hide from assistive tech when decorative\n};\n\n// Divider aligning with our border tokens\nexport function Divider({\n  className,\n  inset = false,\n  orientation = 'horizontal',\n  ariaHidden,\n}: DividerProps) {\n  const isHorizontal = orientation === 'horizontal';\n  const sizeStyles = isHorizontal\n    ? { width: '100%', height: '1px' }\n    : { width: '1px', height: '100%' };\n\n  return (\n    <div\n      role={ariaHidden ? undefined : 'separator'}\n      aria-hidden={ariaHidden}\n      aria-orientation={ariaHidden ? undefined : orientation}\n      style={sizeStyles}\n      className={cn(\n        isHorizontal ? 'border-t' : 'border-l',\n        'border-subtle',\n        inset && 'mx-3',\n        className\n      )}\n    />\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/IconBadge.stories.tsx" },
        "span": [194, 304],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { IconBadge } from './IconBadge';\n\n// Mock icons for stories\nconst HeartIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z' />\n  </svg>\n);\n\nconst StarIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z' />\n  </svg>\n);\n\nconst BellIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z' />\n  </svg>\n);\n\nconst CheckIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z' />\n  </svg>\n);\n\nconst WarningIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z' />\n  </svg>\n);\n\nconst meta: Meta<typeof IconBadge> = {\n  title: 'Atoms/IconBadge',\n  component: IconBadge,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    colorVar: {\n      control: { type: 'text' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    Icon: HeartIcon,\n    colorVar: '--color-red-500',\n  },\n};\n\nexport const BlueHeart: Story = {\n  args: {\n    Icon: HeartIcon,\n    colorVar: '--color-blue-500',\n  },\n};\n\nexport const GreenCheck: Story = {\n  args: {\n    Icon: CheckIcon,\n    colorVar: '--color-green-500',\n  },\n};\n\nexport const YellowStar: Story = {\n  args: {\n    Icon: StarIcon,\n    colorVar: '--color-yellow-500',\n  },\n};\n\nexport const PurpleBell: Story = {\n  args: {\n    Icon: BellIcon,\n    colorVar: '--color-purple-500',\n  },\n};\n\nexport const RedWarning: Story = {\n  args: {\n    Icon: WarningIcon,\n    colorVar: '--color-red-500',\n  },\n};\n\nexport const AllIcons: Story = {\n  render: () => (\n    <div className='flex gap-4'>\n      <IconBadge Icon={HeartIcon} colorVar='--color-red-500' />\n      <IconBadge Icon={StarIcon} colorVar='--color-yellow-500' />\n      <IconBadge Icon={BellIcon} colorVar='--color-purple-500' />\n      <IconBadge Icon={CheckIcon} colorVar='--color-green-500' />\n      <IconBadge Icon={WarningIcon} colorVar='--color-orange-500' />\n    </div>\n  ),\n};\n\nexport const CustomColors: Story = {\n  render: () => (\n    <div className='flex gap-4'>\n      <IconBadge Icon={HeartIcon} colorVar='--color-pink-500' />\n      <IconBadge Icon={StarIcon} colorVar='--color-indigo-500' />\n      <IconBadge Icon={BellIcon} colorVar='--color-teal-500' />\n      <IconBadge Icon={CheckIcon} colorVar='--color-emerald-500' />\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/IconBadge.stories.tsx" },
        "span": [573, 683],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { IconBadge } from './IconBadge';\n\n// Mock icons for stories\nconst HeartIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z' />\n  </svg>\n);\n\nconst StarIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z' />\n  </svg>\n);\n\nconst BellIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z' />\n  </svg>\n);\n\nconst CheckIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z' />\n  </svg>\n);\n\nconst WarningIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z' />\n  </svg>\n);\n\nconst meta: Meta<typeof IconBadge> = {\n  title: 'Atoms/IconBadge',\n  component: IconBadge,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    colorVar: {\n      control: { type: 'text' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    Icon: HeartIcon,\n    colorVar: '--color-red-500',\n  },\n};\n\nexport const BlueHeart: Story = {\n  args: {\n    Icon: HeartIcon,\n    colorVar: '--color-blue-500',\n  },\n};\n\nexport const GreenCheck: Story = {\n  args: {\n    Icon: CheckIcon,\n    colorVar: '--color-green-500',\n  },\n};\n\nexport const YellowStar: Story = {\n  args: {\n    Icon: StarIcon,\n    colorVar: '--color-yellow-500',\n  },\n};\n\nexport const PurpleBell: Story = {\n  args: {\n    Icon: BellIcon,\n    colorVar: '--color-purple-500',\n  },\n};\n\nexport const RedWarning: Story = {\n  args: {\n    Icon: WarningIcon,\n    colorVar: '--color-red-500',\n  },\n};\n\nexport const AllIcons: Story = {\n  render: () => (\n    <div className='flex gap-4'>\n      <IconBadge Icon={HeartIcon} colorVar='--color-red-500' />\n      <IconBadge Icon={StarIcon} colorVar='--color-yellow-500' />\n      <IconBadge Icon={BellIcon} colorVar='--color-purple-500' />\n      <IconBadge Icon={CheckIcon} colorVar='--color-green-500' />\n      <IconBadge Icon={WarningIcon} colorVar='--color-orange-500' />\n    </div>\n  ),\n};\n\nexport const CustomColors: Story = {\n  render: () => (\n    <div className='flex gap-4'>\n      <IconBadge Icon={HeartIcon} colorVar='--color-pink-500' />\n      <IconBadge Icon={StarIcon} colorVar='--color-indigo-500' />\n      <IconBadge Icon={BellIcon} colorVar='--color-teal-500' />\n      <IconBadge Icon={CheckIcon} colorVar='--color-emerald-500' />\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/IconBadge.stories.tsx" },
        "span": [870, 980],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { IconBadge } from './IconBadge';\n\n// Mock icons for stories\nconst HeartIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z' />\n  </svg>\n);\n\nconst StarIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z' />\n  </svg>\n);\n\nconst BellIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z' />\n  </svg>\n);\n\nconst CheckIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z' />\n  </svg>\n);\n\nconst WarningIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z' />\n  </svg>\n);\n\nconst meta: Meta<typeof IconBadge> = {\n  title: 'Atoms/IconBadge',\n  component: IconBadge,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    colorVar: {\n      control: { type: 'text' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    Icon: HeartIcon,\n    colorVar: '--color-red-500',\n  },\n};\n\nexport const BlueHeart: Story = {\n  args: {\n    Icon: HeartIcon,\n    colorVar: '--color-blue-500',\n  },\n};\n\nexport const GreenCheck: Story = {\n  args: {\n    Icon: CheckIcon,\n    colorVar: '--color-green-500',\n  },\n};\n\nexport const YellowStar: Story = {\n  args: {\n    Icon: StarIcon,\n    colorVar: '--color-yellow-500',\n  },\n};\n\nexport const PurpleBell: Story = {\n  args: {\n    Icon: BellIcon,\n    colorVar: '--color-purple-500',\n  },\n};\n\nexport const RedWarning: Story = {\n  args: {\n    Icon: WarningIcon,\n    colorVar: '--color-red-500',\n  },\n};\n\nexport const AllIcons: Story = {\n  render: () => (\n    <div className='flex gap-4'>\n      <IconBadge Icon={HeartIcon} colorVar='--color-red-500' />\n      <IconBadge Icon={StarIcon} colorVar='--color-yellow-500' />\n      <IconBadge Icon={BellIcon} colorVar='--color-purple-500' />\n      <IconBadge Icon={CheckIcon} colorVar='--color-green-500' />\n      <IconBadge Icon={WarningIcon} colorVar='--color-orange-500' />\n    </div>\n  ),\n};\n\nexport const CustomColors: Story = {\n  render: () => (\n    <div className='flex gap-4'>\n      <IconBadge Icon={HeartIcon} colorVar='--color-pink-500' />\n      <IconBadge Icon={StarIcon} colorVar='--color-indigo-500' />\n      <IconBadge Icon={BellIcon} colorVar='--color-teal-500' />\n      <IconBadge Icon={CheckIcon} colorVar='--color-emerald-500' />\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/IconBadge.stories.tsx" },
        "span": [1235, 1345],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { IconBadge } from './IconBadge';\n\n// Mock icons for stories\nconst HeartIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z' />\n  </svg>\n);\n\nconst StarIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z' />\n  </svg>\n);\n\nconst BellIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z' />\n  </svg>\n);\n\nconst CheckIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z' />\n  </svg>\n);\n\nconst WarningIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z' />\n  </svg>\n);\n\nconst meta: Meta<typeof IconBadge> = {\n  title: 'Atoms/IconBadge',\n  component: IconBadge,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    colorVar: {\n      control: { type: 'text' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    Icon: HeartIcon,\n    colorVar: '--color-red-500',\n  },\n};\n\nexport const BlueHeart: Story = {\n  args: {\n    Icon: HeartIcon,\n    colorVar: '--color-blue-500',\n  },\n};\n\nexport const GreenCheck: Story = {\n  args: {\n    Icon: CheckIcon,\n    colorVar: '--color-green-500',\n  },\n};\n\nexport const YellowStar: Story = {\n  args: {\n    Icon: StarIcon,\n    colorVar: '--color-yellow-500',\n  },\n};\n\nexport const PurpleBell: Story = {\n  args: {\n    Icon: BellIcon,\n    colorVar: '--color-purple-500',\n  },\n};\n\nexport const RedWarning: Story = {\n  args: {\n    Icon: WarningIcon,\n    colorVar: '--color-red-500',\n  },\n};\n\nexport const AllIcons: Story = {\n  render: () => (\n    <div className='flex gap-4'>\n      <IconBadge Icon={HeartIcon} colorVar='--color-red-500' />\n      <IconBadge Icon={StarIcon} colorVar='--color-yellow-500' />\n      <IconBadge Icon={BellIcon} colorVar='--color-purple-500' />\n      <IconBadge Icon={CheckIcon} colorVar='--color-green-500' />\n      <IconBadge Icon={WarningIcon} colorVar='--color-orange-500' />\n    </div>\n  ),\n};\n\nexport const CustomColors: Story = {\n  render: () => (\n    <div className='flex gap-4'>\n      <IconBadge Icon={HeartIcon} colorVar='--color-pink-500' />\n      <IconBadge Icon={StarIcon} colorVar='--color-indigo-500' />\n      <IconBadge Icon={BellIcon} colorVar='--color-teal-500' />\n      <IconBadge Icon={CheckIcon} colorVar='--color-emerald-500' />\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/IconBadge.stories.tsx" },
        "span": [1493, 1603],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { IconBadge } from './IconBadge';\n\n// Mock icons for stories\nconst HeartIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z' />\n  </svg>\n);\n\nconst StarIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z' />\n  </svg>\n);\n\nconst BellIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z' />\n  </svg>\n);\n\nconst CheckIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z' />\n  </svg>\n);\n\nconst WarningIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    fill='currentColor'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <path d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z' />\n  </svg>\n);\n\nconst meta: Meta<typeof IconBadge> = {\n  title: 'Atoms/IconBadge',\n  component: IconBadge,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    colorVar: {\n      control: { type: 'text' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    Icon: HeartIcon,\n    colorVar: '--color-red-500',\n  },\n};\n\nexport const BlueHeart: Story = {\n  args: {\n    Icon: HeartIcon,\n    colorVar: '--color-blue-500',\n  },\n};\n\nexport const GreenCheck: Story = {\n  args: {\n    Icon: CheckIcon,\n    colorVar: '--color-green-500',\n  },\n};\n\nexport const YellowStar: Story = {\n  args: {\n    Icon: StarIcon,\n    colorVar: '--color-yellow-500',\n  },\n};\n\nexport const PurpleBell: Story = {\n  args: {\n    Icon: BellIcon,\n    colorVar: '--color-purple-500',\n  },\n};\n\nexport const RedWarning: Story = {\n  args: {\n    Icon: WarningIcon,\n    colorVar: '--color-red-500',\n  },\n};\n\nexport const AllIcons: Story = {\n  render: () => (\n    <div className='flex gap-4'>\n      <IconBadge Icon={HeartIcon} colorVar='--color-red-500' />\n      <IconBadge Icon={StarIcon} colorVar='--color-yellow-500' />\n      <IconBadge Icon={BellIcon} colorVar='--color-purple-500' />\n      <IconBadge Icon={CheckIcon} colorVar='--color-green-500' />\n      <IconBadge Icon={WarningIcon} colorVar='--color-orange-500' />\n    </div>\n  ),\n};\n\nexport const CustomColors: Story = {\n  render: () => (\n    <div className='flex gap-4'>\n      <IconBadge Icon={HeartIcon} colorVar='--color-pink-500' />\n      <IconBadge Icon={StarIcon} colorVar='--color-indigo-500' />\n      <IconBadge Icon={BellIcon} colorVar='--color-teal-500' />\n      <IconBadge Icon={CheckIcon} colorVar='--color-emerald-500' />\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/JovieIcon.tsx" },
        "span": [189, 411],
        "sourceCode": "import { cn } from '@/lib/utils';\n\ninterface JovieIconProps {\n  className?: string;\n  size?: number;\n}\n\nexport function JovieIcon({ className, size = 24 }: JovieIconProps) {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox='0 0 32 32'\n      xmlns='http://www.w3.org/2000/svg'\n      className={cn('text-black dark:text-white transition-colors', className)}\n      fill='currentColor'\n    >\n      {/* Music note icon */}\n      <circle cx='8' cy='24' r='4' />\n      <circle cx='20' cy='20' r='4' />\n      <rect x='10' y='12' width='2' height='16' />\n      <rect x='22' y='8' width='2' height='16' />\n      <path d='M10 12h12v4H10z' />\n    </svg>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/JovieLogo.tsx" },
        "span": [4548, 4648],
        "sourceCode": "import Link from 'next/link';\nimport { APP_NAME } from '@/constants/app';\nimport { cn } from '@/lib/utils';\n\ninterface JovieLogoProps {\n  href?: string;\n  artistHandle?: string;\n  className?: string;\n  variant?: 'light' | 'dark';\n  showText?: boolean;\n  ariaLabel?: string;\n  target?: React.AnchorHTMLAttributes<HTMLAnchorElement>['target'];\n  title?: string;\n  size?: 'sm' | 'md';\n}\n\nexport function JovieLogo({\n  href = '/',\n  artistHandle,\n  className = '',\n  variant = 'light',\n  showText = false,\n  ariaLabel,\n  target,\n  title,\n  size = 'md',\n}: JovieLogoProps) {\n  const finalHref = artistHandle\n    ? `${href}?utm_source=profile&utm_artist=${artistHandle}`\n    : href;\n\n  const colorClass =\n    variant === 'light'\n      ? 'text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white'\n      : 'text-white hover:text-white/80';\n\n  const wrapperClasses = cn('flex items-center gap-2', className);\n  const sizeClass = size === 'sm' ? 'h-4' : 'h-6';\n\n  const logoContent = (\n    <>\n      <svg\n        xmlns='http://www.w3.org/2000/svg'\n        xmlnsXlink='http://www.w3.org/1999/xlink'\n        viewBox='0 0 136 39'\n        className={cn('w-auto transition-colors', colorClass, sizeClass)}\n        fill='currentColor'\n        aria-label={`${APP_NAME} logo`}\n      >\n        <path\n          fillRule='evenodd'\n          d='M114.928,27.260 C115.114,28.919 115.565,30.155 116.278,30.968 C117.281,32.136 118.589,32.721 120.203,32.721 C121.222,32.721 122.191,32.467 123.108,31.959 C123.669,31.637 124.272,31.70 124.917,30.257 L135.136,31.197 C133.573,33.906 131.687,35.849 129.479,37.26 C127.270,38.203 124.102,38.791 119.973,38.791 C116.389,38.791 113.568,38.287 111.513,37.280 C109.457,36.273 107.754,34.672 106.403,32.479 C105.53,30.287 104.377,27.709 104.377,24.745 C104.377,20.529 105.732,17.117 108.442,14.509 C111.152,11.902 114.893,10.598 119.668,10.598 C123.541,10.598 126.599,11.182 128.842,12.350 C131.84,13.519 132.792,15.212 133.964,17.430 C135.136,19.649 135.723,22.535 135.723,26.91 L135.723,27.260 L114.928,27.260 ZM123.554,18.14 C122.679,17.151 121.528,16.719 120.101,16.719 C118.453,16.719 117.136,17.371 116.151,18.675 C115.522,19.488 115.123,20.698 114.953,22.307 L125.172,22.307 C124.968,20.309 124.429,18.878 123.554,18.14 ZM91.811,11.207 L102.183,11.207 L102.183,38.182 L91.811,38.182 L91.811,11.207 ZM91.811,0.946 L102.183,0.946 L102.183,7.982 L91.811,7.982 L91.811,0.946 ZM70.877,38.182 L59.621,11.207 L70.413,11.207 L75.664,28.301 L81.112,11.207 L91.578,11.207 L80.76,38.182 L70.877,38.182 ZM58.459,34.816 C55.698,37.466 51.880,38.791 47.4,38.791 C42.654,38.791 39.138,37.691 36.454,35.489 C33.157,32.763 31.510,29.190 31.510,24.771 C31.510,20.656 32.903,17.265 35.689,14.598 C38.475,11.931 42.238,10.598 46.978,10.598 C52.398,10.598 56.492,12.164 59.262,15.297 C61.487,17.820 62.600,20.927 62.600,24.618 C62.600,28.767 61.220,32.166 58.459,34.816 ZM50.725,19.424 C49.756,18.281 48.558,17.710 47.131,17.710 C45.619,17.710 44.370,18.290 43.385,19.449 C42.400,20.609 41.907,22.375 41.907,24.745 C41.907,27.150 42.395,28.928 43.372,30.79 C44.349,31.231 45.577,31.806 47.55,31.806 C48.550,31.806 49.777,31.239 50.737,30.105 C51.697,28.970 52.177,27.150 52.177,24.644 C52.177,22.307 51.693,20.567 50.725,19.424 ZM24.562,36.507 C22.277,38.47 19.351,38.816 15.783,38.816 C12.11,38.816 9.89,38.309 7.17,37.293 C4.944,36.277 3.342,34.791 2.213,32.835 C1.83,30.879 0.416,28.462 0.212,25.583 L11.247,24.85 C11.264,25.727 11.408,26.947 11.680,27.742 C11.952,28.538 12.410,29.182 13.56,29.673 C13.498,29.995 14.127,30.155 14.942,30.155 C16.233,30.155 17.180,29.677 17.783,28.721 C18.386,27.766 18.688,26.154 18.688,23.887 L18.688,0.946 L30.258,0.946 L30.258,21.176 C30.258,25.423 29.880,28.655 29.124,30.872 C28.368,33.89 26.847,34.967 24.562,36.507 Z'\n        />\n      </svg>\n      {showText && (\n        <span className={cn('font-medium', colorClass)}>{APP_NAME}</span>\n      )}\n    </>\n  );\n\n  const computedAriaLabel =\n    ariaLabel ??\n    (artistHandle\n      ? `Create your own profile with ${APP_NAME}`\n      : `${APP_NAME} home`);\n\n  if (href) {\n    return (\n      <Link\n        href={finalHref}\n        aria-label={computedAriaLabel}\n        target={target}\n        rel={target === '_blank' ? 'noopener noreferrer' : undefined}\n        className='rounded-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 transition-colors'\n        title={title}\n      >\n        <div className={wrapperClasses}>{logoContent}</div>\n      </Link>\n    );\n  }\n\n  return (\n    <div\n      className={wrapperClasses}\n      aria-label={computedAriaLabel}\n      title={title}\n    >\n      {logoContent}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/JovieLogo.tsx" },
        "span": [1007, 1283],
        "sourceCode": "import Link from 'next/link';\nimport { APP_NAME } from '@/constants/app';\nimport { cn } from '@/lib/utils';\n\ninterface JovieLogoProps {\n  href?: string;\n  artistHandle?: string;\n  className?: string;\n  variant?: 'light' | 'dark';\n  showText?: boolean;\n  ariaLabel?: string;\n  target?: React.AnchorHTMLAttributes<HTMLAnchorElement>['target'];\n  title?: string;\n  size?: 'sm' | 'md';\n}\n\nexport function JovieLogo({\n  href = '/',\n  artistHandle,\n  className = '',\n  variant = 'light',\n  showText = false,\n  ariaLabel,\n  target,\n  title,\n  size = 'md',\n}: JovieLogoProps) {\n  const finalHref = artistHandle\n    ? `${href}?utm_source=profile&utm_artist=${artistHandle}`\n    : href;\n\n  const colorClass =\n    variant === 'light'\n      ? 'text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white'\n      : 'text-white hover:text-white/80';\n\n  const wrapperClasses = cn('flex items-center gap-2', className);\n  const sizeClass = size === 'sm' ? 'h-4' : 'h-6';\n\n  const logoContent = (\n    <>\n      <svg\n        xmlns='http://www.w3.org/2000/svg'\n        xmlnsXlink='http://www.w3.org/1999/xlink'\n        viewBox='0 0 136 39'\n        className={cn('w-auto transition-colors', colorClass, sizeClass)}\n        fill='currentColor'\n        aria-label={`${APP_NAME} logo`}\n      >\n        <path\n          fillRule='evenodd'\n          d='M114.928,27.260 C115.114,28.919 115.565,30.155 116.278,30.968 C117.281,32.136 118.589,32.721 120.203,32.721 C121.222,32.721 122.191,32.467 123.108,31.959 C123.669,31.637 124.272,31.70 124.917,30.257 L135.136,31.197 C133.573,33.906 131.687,35.849 129.479,37.26 C127.270,38.203 124.102,38.791 119.973,38.791 C116.389,38.791 113.568,38.287 111.513,37.280 C109.457,36.273 107.754,34.672 106.403,32.479 C105.53,30.287 104.377,27.709 104.377,24.745 C104.377,20.529 105.732,17.117 108.442,14.509 C111.152,11.902 114.893,10.598 119.668,10.598 C123.541,10.598 126.599,11.182 128.842,12.350 C131.84,13.519 132.792,15.212 133.964,17.430 C135.136,19.649 135.723,22.535 135.723,26.91 L135.723,27.260 L114.928,27.260 ZM123.554,18.14 C122.679,17.151 121.528,16.719 120.101,16.719 C118.453,16.719 117.136,17.371 116.151,18.675 C115.522,19.488 115.123,20.698 114.953,22.307 L125.172,22.307 C124.968,20.309 124.429,18.878 123.554,18.14 ZM91.811,11.207 L102.183,11.207 L102.183,38.182 L91.811,38.182 L91.811,11.207 ZM91.811,0.946 L102.183,0.946 L102.183,7.982 L91.811,7.982 L91.811,0.946 ZM70.877,38.182 L59.621,11.207 L70.413,11.207 L75.664,28.301 L81.112,11.207 L91.578,11.207 L80.76,38.182 L70.877,38.182 ZM58.459,34.816 C55.698,37.466 51.880,38.791 47.4,38.791 C42.654,38.791 39.138,37.691 36.454,35.489 C33.157,32.763 31.510,29.190 31.510,24.771 C31.510,20.656 32.903,17.265 35.689,14.598 C38.475,11.931 42.238,10.598 46.978,10.598 C52.398,10.598 56.492,12.164 59.262,15.297 C61.487,17.820 62.600,20.927 62.600,24.618 C62.600,28.767 61.220,32.166 58.459,34.816 ZM50.725,19.424 C49.756,18.281 48.558,17.710 47.131,17.710 C45.619,17.710 44.370,18.290 43.385,19.449 C42.400,20.609 41.907,22.375 41.907,24.745 C41.907,27.150 42.395,28.928 43.372,30.79 C44.349,31.231 45.577,31.806 47.55,31.806 C48.550,31.806 49.777,31.239 50.737,30.105 C51.697,28.970 52.177,27.150 52.177,24.644 C52.177,22.307 51.693,20.567 50.725,19.424 ZM24.562,36.507 C22.277,38.47 19.351,38.816 15.783,38.816 C12.11,38.816 9.89,38.309 7.17,37.293 C4.944,36.277 3.342,34.791 2.213,32.835 C1.83,30.879 0.416,28.462 0.212,25.583 L11.247,24.85 C11.264,25.727 11.408,26.947 11.680,27.742 C11.952,28.538 12.410,29.182 13.56,29.673 C13.498,29.995 14.127,30.155 14.942,30.155 C16.233,30.155 17.180,29.677 17.783,28.721 C18.386,27.766 18.688,26.154 18.688,23.887 L18.688,0.946 L30.258,0.946 L30.258,21.176 C30.258,25.423 29.880,28.655 29.124,30.872 C28.368,33.89 26.847,34.967 24.562,36.507 Z'\n        />\n      </svg>\n      {showText && (\n        <span className={cn('font-medium', colorClass)}>{APP_NAME}</span>\n      )}\n    </>\n  );\n\n  const computedAriaLabel =\n    ariaLabel ??\n    (artistHandle\n      ? `Create your own profile with ${APP_NAME}`\n      : `${APP_NAME} home`);\n\n  if (href) {\n    return (\n      <Link\n        href={finalHref}\n        aria-label={computedAriaLabel}\n        target={target}\n        rel={target === '_blank' ? 'noopener noreferrer' : undefined}\n        className='rounded-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 transition-colors'\n        title={title}\n      >\n        <div className={wrapperClasses}>{logoContent}</div>\n      </Link>\n    );\n  }\n\n  return (\n    <div\n      className={wrapperClasses}\n      aria-label={computedAriaLabel}\n      title={title}\n    >\n      {logoContent}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Label.tsx" },
        "span": [398, 730],
        "sourceCode": "import { forwardRef } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport interface LabelProps\n  extends React.LabelHTMLAttributes<HTMLLabelElement> {\n  htmlFor: string;\n  className?: string;\n  children: React.ReactNode;\n  required?: boolean;\n}\n\nexport const Label = forwardRef<HTMLLabelElement, LabelProps>(\n  ({ className, children, required = false, ...props }, ref) => {\n    return (\n      <label\n        ref={ref}\n        className={cn(\n          'text-sm font-medium leading-none',\n          'text-gray-700 dark:text-gray-300',\n          'mb-1 block',\n          required && \"after:content-['*'] after:ml-0.5 after:text-red-500\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </label>\n    );\n  }\n);\n\nLabel.displayName = 'Label';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/LogoLoader.tsx" },
        "span": [554, 567],
        "sourceCode": "import { BrandLogo } from '@/components/atoms/BrandLogo';\nimport { cn } from '@/lib/utils';\n\ntype LogoLoaderVariant = 'color' | 'mono';\n\ninterface LogoLoaderProps {\n  size?: number;\n  variant?: LogoLoaderVariant;\n  className?: string;\n  'aria-label'?: string;\n}\n\nconst VARIANT_CLASSES: Record<LogoLoaderVariant, string> = {\n  color: 'filter-none',\n  mono: 'opacity-90 dark:opacity-100',\n};\n\nexport function LogoLoader({\n  size = 64,\n  variant = 'color',\n  className,\n  'aria-label': ariaLabel = 'Loading',\n}: LogoLoaderProps) {\n  return (\n    <div\n      role='status'\n      aria-live='polite'\n      aria-label={ariaLabel}\n      className={cn(\n        'inline-flex items-center justify-center rounded-full bg-muted/50 p-3 shadow-sm ring-1 ring-border/60 dark:ring-border/40',\n        className\n      )}\n    >\n      <BrandLogo\n        size={size}\n        tone={variant === 'mono' ? 'auto' : 'color'}\n        alt='Jovie logo spinner'\n        priority\n        className={cn(\n          'animate-spin',\n          'motion-reduce:animate-none motion-reduce:transition-none',\n          VARIANT_CLASSES[variant]\n        )}\n        style={{ animationDuration: '1.25s' }}\n      />\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/PlaceholderImage.tsx" },
        "span": [924, 1112],
        "sourceCode": "import { clsx } from 'clsx';\nimport { forwardRef } from 'react';\n\ninterface PlaceholderImageProps {\n  size?: 'sm' | 'md' | 'lg' | 'xl' | '2xl';\n  shape?: 'circle' | 'square' | 'rounded';\n  className?: string;\n  children?: React.ReactNode;\n}\n\nconst sizeClasses = {\n  sm: 'h-8 w-8',\n  md: 'h-12 w-12',\n  lg: 'h-16 w-16',\n  xl: 'h-24 w-24',\n  '2xl': 'h-32 w-32',\n};\n\nconst shapeClasses = {\n  circle: 'rounded-full',\n  square: 'rounded-none',\n  rounded: 'rounded-lg',\n};\n\nexport const PlaceholderImage = forwardRef<\n  HTMLDivElement,\n  PlaceholderImageProps\n>(({ size = 'md', shape = 'circle', className, children }, ref) => {\n  return (\n    <div\n      ref={ref}\n      className={clsx(\n        'flex items-center justify-center bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800',\n        sizeClasses[size],\n        shapeClasses[shape],\n        className\n      )}\n    >\n      {children || (\n        <svg\n          className='h-1/2 w-1/2 text-gray-400 dark:text-gray-500'\n          fill='currentColor'\n          viewBox='0 0 24 24'\n          aria-label='Default profile picture'\n        >\n          <path d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z' />\n        </svg>\n      )}\n    </div>\n  );\n});\n\nPlaceholderImage.displayName = 'PlaceholderImage';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/ProfileNavButton.tsx" },
        "span": [5181, 5492],
        "sourceCode": "'use client';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport Link from 'next/link';\nimport * as React from 'react';\nimport { BrandLogo } from '@/components/atoms/BrandLogo';\nimport { HeaderIconButton } from '@/components/atoms/HeaderIconButton';\nimport { PROFILE_URL } from '@/constants/domains';\nimport { cn } from '@/lib/utils';\n\ninterface ProfileNavButtonProps {\n  /** When true, shows back arrow; when false, shows Jovie icon */\n  showBackButton: boolean;\n  /** The artist handle for back navigation */\n  artistHandle: string;\n  /** If true, creator has removed branding; hide upsell/claim CTA */\n  hideBranding?: boolean;\n  /** Additional class names */\n  className?: string;\n  /** Optional loading state to show animated spinner on the logo */\n  loading?: boolean;\n}\n\n/**\n * Navigation button for profile pages.\n * - On main profile: Shows Jovie icon linking to homepage\n * - On sub-pages (listen, tip, etc.): Shows back button as Link\n */\nexport function ProfileNavButton({\n  showBackButton,\n  artistHandle,\n  hideBranding = false,\n  className,\n  loading = false,\n}: ProfileNavButtonProps) {\n  const [open, setOpen] = React.useState<boolean>(false);\n\n  const profileUrl = `${PROFILE_URL}/${artistHandle}`;\n\n  const chromeSize = 'xs' as const;\n\n  // Main profile: Jovie icon linking to homepage\n  if (!showBackButton) {\n    return (\n      <DropdownMenu open={open} onOpenChange={setOpen}>\n        <DropdownMenuTrigger asChild>\n          <HeaderIconButton\n            size={chromeSize}\n            ariaLabel='Open profile menu'\n            className={cn(\n              'group relative overflow-hidden',\n              'bg-surface-0 backdrop-blur-md',\n              'ring-1 ring-(--color-border-subtle)',\n              'shadow-sm hover:shadow-md',\n              'hover:bg-surface-1',\n              'transition-[opacity,transform,filter,background-color,box-shadow] duration-200 ease-[cubic-bezier(0.22,1,0.36,1)] hover:opacity-90 active:scale-[0.97]',\n              className\n            )}\n          >\n            <div className='relative opacity-60 transition-opacity group-hover:opacity-100 group-focus-visible:opacity-100'>\n              <BrandLogo size={24} tone='auto' className='h-6 w-6' priority />\n              <BrandLogo\n                size={24}\n                tone='auto'\n                alt=''\n                aria-hidden\n                className={cn(\n                  'absolute inset-0 h-6 w-6',\n                  'transition-all duration-300 ease-[cubic-bezier(0.22,1,0.36,1)]',\n                  loading\n                    ? 'opacity-100 scale-100 animate-spin-slow'\n                    : 'opacity-0 scale-0 pointer-events-none'\n                )}\n                priority\n              />\n            </div>\n          </HeaderIconButton>\n        </DropdownMenuTrigger>\n\n        <DropdownMenuContent align='start' sideOffset={8}>\n          <DropdownMenuItem\n            onSelect={() => {\n              try {\n                const isMdUp = window.matchMedia('(min-width: 768px)').matches;\n                if (isMdUp) {\n                  window.dispatchEvent(\n                    new CustomEvent('jovie:open-profile-qr')\n                  );\n                }\n              } catch {}\n            }}\n          >\n            View on mobile\n          </DropdownMenuItem>\n\n          <DropdownMenuItem\n            onSelect={() => {\n              try {\n                void navigator.clipboard?.writeText(profileUrl);\n              } catch {}\n            }}\n          >\n            Copy profile link\n          </DropdownMenuItem>\n\n          {!hideBranding ? (\n            <DropdownMenuItem asChild>\n              <Link href='/waitlist'>Claim your profile</Link>\n            </DropdownMenuItem>\n          ) : null}\n\n          <DropdownMenuSub>\n            <DropdownMenuSubTrigger>Legal</DropdownMenuSubTrigger>\n            <DropdownMenuSubContent sideOffset={8}>\n              <DropdownMenuItem asChild>\n                <Link\n                  href='/legal/privacy'\n                  target='_blank'\n                  rel='noopener noreferrer'\n                >\n                  Privacy\n                </Link>\n              </DropdownMenuItem>\n              <DropdownMenuItem asChild>\n                <Link\n                  href='/legal/terms'\n                  target='_blank'\n                  rel='noopener noreferrer'\n                >\n                  Terms\n                </Link>\n              </DropdownMenuItem>\n            </DropdownMenuSubContent>\n          </DropdownMenuSub>\n        </DropdownMenuContent>\n      </DropdownMenu>\n    );\n  }\n\n  // Sub-page: Back button - use Link for instant navigation (no spinner needed)\n  return (\n    <HeaderIconButton\n      asChild\n      size={chromeSize}\n      ariaLabel='Back to profile'\n      className={cn(\n        'bg-surface-0 backdrop-blur-md',\n        'border border-subtle',\n        'shadow-sm hover:shadow-md',\n        'hover:bg-surface-1',\n        'transition-all duration-200',\n        className\n      )}\n    >\n      <Link href={`/${artistHandle}`}>\n        <svg\n          className={cn(\n            'h-4 w-4 text-secondary-token',\n            'transition-all duration-300 ease-out',\n            'animate-in fade-in zoom-in-90 slide-in-from-right-1 duration-300'\n          )}\n          fill='none'\n          stroke='currentColor'\n          viewBox='0 0 24 24'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M10 19l-7-7m0 0l7-7m-7 7h18'\n          />\n        </svg>\n      </Link>\n    </HeaderIconButton>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/ProgressIndicator.tsx" },
        "span": [3215, 3373],
        "sourceCode": "'use client';\n\ninterface ProgressStep {\n  id: string;\n  title: string;\n  description?: string;\n  estimatedTimeSeconds?: number;\n}\n\ninterface ProgressIndicatorProps {\n  currentStep: number;\n  totalSteps: number;\n  steps: ProgressStep[];\n  showTimeEstimate?: boolean;\n  className?: string;\n}\n\nexport function ProgressIndicator({\n  currentStep,\n  totalSteps,\n  steps,\n  showTimeEstimate = true,\n  className = '',\n}: ProgressIndicatorProps) {\n  const progressPercentage = ((currentStep + 1) / totalSteps) * 100;\n\n  // Calculate remaining time estimate\n  const remainingTime = steps\n    .slice(currentStep + 1)\n    .reduce((total, step) => total + (step.estimatedTimeSeconds || 30), 0);\n\n  const formatTime = (seconds: number): string => {\n    if (seconds < 60) return `${seconds}s`;\n    const minutes = Math.ceil(seconds / 60);\n    return `${minutes}m`;\n  };\n\n  return (\n    <div\n      className={`space-y-4 ${className}`}\n      role='progressbar'\n      aria-valuenow={currentStep + 1}\n      aria-valuemin={1}\n      aria-valuemax={totalSteps}\n    >\n      {/* Progress bar */}\n      <div className='space-y-2'>\n        <div className='flex justify-between items-center text-sm'>\n          <span className='font-medium text-gray-900 dark:text-white'>\n            Step {currentStep + 1} of {totalSteps}\n          </span>\n          {showTimeEstimate && remainingTime > 0 && (\n            <span className='text-gray-500 dark:text-gray-400'>\n              {formatTime(remainingTime)} remaining\n            </span>\n          )}\n        </div>\n        <div className='w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden'>\n          <div\n            className='bg-gradient-to-r from-blue-500 to-purple-500 h-full rounded-full transition-all duration-300 ease-out'\n            style={{ width: `${progressPercentage}%` }}\n          />\n        </div>\n      </div>\n\n      {/* Step indicators */}\n      <div className='flex justify-between items-center'>\n        {steps.map((step, index) => {\n          const isCompleted = index < currentStep;\n          const isCurrent = index === currentStep;\n          // const isUpcoming = index > currentStep; // Reserved for future use\n\n          return (\n            <div\n              key={step.id}\n              className={`flex flex-col items-center space-y-1 transition-all duration-200 flex-1 ${\n                isCompleted\n                  ? 'text-green-600 dark:text-green-400'\n                  : isCurrent\n                    ? 'text-blue-600 dark:text-blue-400'\n                    : 'text-gray-400 dark:text-gray-600'\n              }`}\n            >\n              {/* Step circle */}\n              <div\n                className={`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-xs font-semibold border-2 transition-all duration-200 ${\n                  isCompleted\n                    ? 'bg-green-500 border-green-500 text-white'\n                    : isCurrent\n                      ? 'bg-blue-500 border-blue-500 text-white'\n                      : 'bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400'\n                }`}\n              >\n                {isCompleted ? (\n                  <svg\n                    className='w-4 h-4 sm:w-5 sm:h-5'\n                    fill='currentColor'\n                    viewBox='0 0 20 20'\n                  >\n                    <path\n                      fillRule='evenodd'\n                      d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z'\n                      clipRule='evenodd'\n                    />\n                  </svg>\n                ) : (\n                  index + 1\n                )}\n              </div>\n\n              {/* Step title */}\n              <div className='text-center'>\n                <div\n                  className={`text-xs sm:text-sm font-medium ${isCurrent ? 'font-semibold' : ''} max-w-16 sm:max-w-none`}\n                >\n                  {step.title}\n                </div>\n                {step.description && isCurrent && (\n                  <div className='hidden sm:block text-xs text-gray-500 dark:text-gray-400 mt-1 max-w-20 leading-tight'>\n                    {step.description}\n                  </div>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Select.tsx" },
        "span": [1579, 1767],
        "sourceCode": "import React, { forwardRef } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface SelectOption {\n  value: string;\n  label: string;\n  disabled?: boolean;\n}\n\ninterface SelectProps extends React.SelectHTMLAttributes<HTMLSelectElement> {\n  options: SelectOption[];\n  placeholder?: string;\n  label?: string;\n  error?: string;\n  required?: boolean;\n}\n\nexport const Select = forwardRef<HTMLSelectElement, SelectProps>(\n  (\n    {\n      options,\n      placeholder = 'Select an option',\n      label,\n      error,\n      required = false,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const selectElement = (\n      <select\n        ref={ref}\n        className={cn(\n          'block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm',\n          'focus-visible:border-gray-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-500',\n          'dark:border-gray-600 dark:bg-gray-800 dark:text-gray-50',\n          'disabled:opacity-50 disabled:cursor-not-allowed',\n          error &&\n            'border-red-500 focus-visible:border-red-500 focus-visible:ring-red-500',\n          className\n        )}\n        {...props}\n      >\n        <option value=''>{placeholder}</option>\n        {options.map(option => (\n          <option\n            key={option.value}\n            value={option.value}\n            disabled={option.disabled}\n          >\n            {option.label}\n          </option>\n        ))}\n      </select>\n    );\n\n    if (label || error) {\n      return (\n        <div className='space-y-2'>\n          {label && (\n            <label className='text-sm font-medium text-gray-700 dark:text-gray-300'>\n              {label}\n              {required && <span className='text-red-500 ml-1'>*</span>}\n            </label>\n          )}\n          {selectElement}\n          {error && (\n            <p className='text-sm text-red-600 dark:text-red-400'>{error}</p>\n          )}\n        </div>\n      );\n    }\n\n    return selectElement;\n  }\n);\n\nSelect.displayName = 'Select';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SkipToContent.stories.tsx" },
        "span": [5182, 5190],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SkipToContent } from './SkipToContent';\n\nconst meta: Meta<typeof SkipToContent> = {\n  title: 'Atoms/SkipToContent',\n  component: SkipToContent,\n  parameters: {\n    layout: 'fullscreen',\n    docs: {\n      description: {\n        component: `\nA visually hidden skip link for keyboard accessibility that allows users to bypass navigation and jump directly to main content.\n\n## Keyboard Accessibility\n\nThis component is essential for WCAG 2.1 Level A compliance (2.4.1 Bypass Blocks). It provides a way for keyboard and screen reader users to skip repetitive navigation elements.\n\n### How it works:\n- **Hidden by default**: The link is visually hidden using the \\`sr-only\\` class but remains accessible to screen readers.\n- **Visible on focus**: When a user tabs to the link, it becomes visible using \\`focus:not-sr-only\\`.\n- **Skip functionality**: Activating the link (pressing Enter) jumps focus to the main content area.\n\n### Usage:\n1. Add this component as the **first focusable element** in your layout\n2. Ensure your main content area has a matching \\`id\\` attribute (default: \\`main-content\\`)\n3. The target element should have \\`tabindex=\"-1\"\\` if it's not natively focusable\n\n### Testing in Storybook:\nTo see this component in action, **press Tab** to focus on it. The link will appear in the top-left corner when focused.\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    targetId: {\n      control: { type: 'text' },\n      description:\n        'The ID of the target element to skip to (without the # prefix)',\n    },\n    linkText: {\n      control: { type: 'text' },\n      description: 'The text to display in the skip link',\n    },\n    className: {\n      control: { type: 'text' },\n      description: 'Additional CSS classes',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n/**\n * Default configuration. Press Tab to see the skip link appear.\n * The link targets an element with id=\"main-content\".\n */\nexport const Default: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link appear in the top-left corner.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>This is the main content area that the skip link will jump to.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Custom link text for different contexts, such as a documentation page.\n */\nexport const CustomText: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to main article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link with custom text.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Article</h1>\n        <p>The skip link now reads &quot;Skip to main article&quot;.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Targeting a custom element ID, useful when the main content\n * has a different identifier.\n */\nexport const CustomTarget: Story = {\n  args: {\n    targetId: 'article-content',\n    linkText: 'Skip to article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link. It targets &quot;#article-content&quot; instead\n          of the default.\n        </p>\n      </header>\n      <nav className='border-b p-4'>\n        <p className='text-sm'>\n          Navigation section (would normally contain many links)\n        </p>\n      </nav>\n      <article id='article-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Article Content</h1>\n        <p>This section has a custom ID that the skip link targets.</p>\n      </article>\n    </div>\n  ),\n};\n\n/**\n * Demonstrates the component in a more realistic layout with navigation\n * elements that keyboard users would want to skip.\n */\nexport const WithNavigation: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <nav className='flex gap-4'>\n          <a href='#' className='text-sm hover:underline'>\n            Home\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            About\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Products\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Services\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Contact\n          </a>\n        </nav>\n      </header>\n      <aside className='border-b p-4'>\n        <h2 className='mb-2 font-semibold'>Sidebar</h2>\n        <ul className='space-y-1 text-sm'>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 1\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 2\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 3\n            </a>\n          </li>\n        </ul>\n      </aside>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p className='mb-4'>\n          Without the skip link, keyboard users would need to tab through all\n          navigation items above before reaching this content.\n        </p>\n        <p className='text-muted-foreground text-sm'>\n          Tip: Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Shift+Tab\n          </kbd>{' '}\n          repeatedly to navigate backwards and see the skip link appear.\n        </p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Always visible variant for demonstration purposes.\n * In production, the component would only be visible on focus.\n */\nexport const AlwaysVisible: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n    className:\n      'not-sr-only fixed left-4 top-4 z-[9999] rounded-md bg-primary px-4 py-2 text-primary-foreground outline-none ring-2 ring-ring ring-offset-2',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4 pt-16'>\n        <p className='text-muted-foreground text-sm'>\n          This story shows the skip link in its visible state for demonstration.\n          In production, it would only appear when focused via keyboard.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>\n          The skip link is always visible in this story for demonstration\n          purposes.\n        </p>\n      </main>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SkipToContent.stories.tsx" },
        "span": [5273, 5281],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SkipToContent } from './SkipToContent';\n\nconst meta: Meta<typeof SkipToContent> = {\n  title: 'Atoms/SkipToContent',\n  component: SkipToContent,\n  parameters: {\n    layout: 'fullscreen',\n    docs: {\n      description: {\n        component: `\nA visually hidden skip link for keyboard accessibility that allows users to bypass navigation and jump directly to main content.\n\n## Keyboard Accessibility\n\nThis component is essential for WCAG 2.1 Level A compliance (2.4.1 Bypass Blocks). It provides a way for keyboard and screen reader users to skip repetitive navigation elements.\n\n### How it works:\n- **Hidden by default**: The link is visually hidden using the \\`sr-only\\` class but remains accessible to screen readers.\n- **Visible on focus**: When a user tabs to the link, it becomes visible using \\`focus:not-sr-only\\`.\n- **Skip functionality**: Activating the link (pressing Enter) jumps focus to the main content area.\n\n### Usage:\n1. Add this component as the **first focusable element** in your layout\n2. Ensure your main content area has a matching \\`id\\` attribute (default: \\`main-content\\`)\n3. The target element should have \\`tabindex=\"-1\"\\` if it's not natively focusable\n\n### Testing in Storybook:\nTo see this component in action, **press Tab** to focus on it. The link will appear in the top-left corner when focused.\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    targetId: {\n      control: { type: 'text' },\n      description:\n        'The ID of the target element to skip to (without the # prefix)',\n    },\n    linkText: {\n      control: { type: 'text' },\n      description: 'The text to display in the skip link',\n    },\n    className: {\n      control: { type: 'text' },\n      description: 'Additional CSS classes',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n/**\n * Default configuration. Press Tab to see the skip link appear.\n * The link targets an element with id=\"main-content\".\n */\nexport const Default: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link appear in the top-left corner.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>This is the main content area that the skip link will jump to.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Custom link text for different contexts, such as a documentation page.\n */\nexport const CustomText: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to main article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link with custom text.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Article</h1>\n        <p>The skip link now reads &quot;Skip to main article&quot;.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Targeting a custom element ID, useful when the main content\n * has a different identifier.\n */\nexport const CustomTarget: Story = {\n  args: {\n    targetId: 'article-content',\n    linkText: 'Skip to article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link. It targets &quot;#article-content&quot; instead\n          of the default.\n        </p>\n      </header>\n      <nav className='border-b p-4'>\n        <p className='text-sm'>\n          Navigation section (would normally contain many links)\n        </p>\n      </nav>\n      <article id='article-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Article Content</h1>\n        <p>This section has a custom ID that the skip link targets.</p>\n      </article>\n    </div>\n  ),\n};\n\n/**\n * Demonstrates the component in a more realistic layout with navigation\n * elements that keyboard users would want to skip.\n */\nexport const WithNavigation: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <nav className='flex gap-4'>\n          <a href='#' className='text-sm hover:underline'>\n            Home\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            About\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Products\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Services\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Contact\n          </a>\n        </nav>\n      </header>\n      <aside className='border-b p-4'>\n        <h2 className='mb-2 font-semibold'>Sidebar</h2>\n        <ul className='space-y-1 text-sm'>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 1\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 2\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 3\n            </a>\n          </li>\n        </ul>\n      </aside>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p className='mb-4'>\n          Without the skip link, keyboard users would need to tab through all\n          navigation items above before reaching this content.\n        </p>\n        <p className='text-muted-foreground text-sm'>\n          Tip: Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Shift+Tab\n          </kbd>{' '}\n          repeatedly to navigate backwards and see the skip link appear.\n        </p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Always visible variant for demonstration purposes.\n * In production, the component would only be visible on focus.\n */\nexport const AlwaysVisible: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n    className:\n      'not-sr-only fixed left-4 top-4 z-[9999] rounded-md bg-primary px-4 py-2 text-primary-foreground outline-none ring-2 ring-ring ring-offset-2',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4 pt-16'>\n        <p className='text-muted-foreground text-sm'>\n          This story shows the skip link in its visible state for demonstration.\n          In production, it would only appear when focused via keyboard.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>\n          The skip link is always visible in this story for demonstration\n          purposes.\n        </p>\n      </main>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SkipToContent.stories.tsx" },
        "span": [5365, 5373],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SkipToContent } from './SkipToContent';\n\nconst meta: Meta<typeof SkipToContent> = {\n  title: 'Atoms/SkipToContent',\n  component: SkipToContent,\n  parameters: {\n    layout: 'fullscreen',\n    docs: {\n      description: {\n        component: `\nA visually hidden skip link for keyboard accessibility that allows users to bypass navigation and jump directly to main content.\n\n## Keyboard Accessibility\n\nThis component is essential for WCAG 2.1 Level A compliance (2.4.1 Bypass Blocks). It provides a way for keyboard and screen reader users to skip repetitive navigation elements.\n\n### How it works:\n- **Hidden by default**: The link is visually hidden using the \\`sr-only\\` class but remains accessible to screen readers.\n- **Visible on focus**: When a user tabs to the link, it becomes visible using \\`focus:not-sr-only\\`.\n- **Skip functionality**: Activating the link (pressing Enter) jumps focus to the main content area.\n\n### Usage:\n1. Add this component as the **first focusable element** in your layout\n2. Ensure your main content area has a matching \\`id\\` attribute (default: \\`main-content\\`)\n3. The target element should have \\`tabindex=\"-1\"\\` if it's not natively focusable\n\n### Testing in Storybook:\nTo see this component in action, **press Tab** to focus on it. The link will appear in the top-left corner when focused.\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    targetId: {\n      control: { type: 'text' },\n      description:\n        'The ID of the target element to skip to (without the # prefix)',\n    },\n    linkText: {\n      control: { type: 'text' },\n      description: 'The text to display in the skip link',\n    },\n    className: {\n      control: { type: 'text' },\n      description: 'Additional CSS classes',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n/**\n * Default configuration. Press Tab to see the skip link appear.\n * The link targets an element with id=\"main-content\".\n */\nexport const Default: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link appear in the top-left corner.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>This is the main content area that the skip link will jump to.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Custom link text for different contexts, such as a documentation page.\n */\nexport const CustomText: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to main article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link with custom text.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Article</h1>\n        <p>The skip link now reads &quot;Skip to main article&quot;.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Targeting a custom element ID, useful when the main content\n * has a different identifier.\n */\nexport const CustomTarget: Story = {\n  args: {\n    targetId: 'article-content',\n    linkText: 'Skip to article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link. It targets &quot;#article-content&quot; instead\n          of the default.\n        </p>\n      </header>\n      <nav className='border-b p-4'>\n        <p className='text-sm'>\n          Navigation section (would normally contain many links)\n        </p>\n      </nav>\n      <article id='article-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Article Content</h1>\n        <p>This section has a custom ID that the skip link targets.</p>\n      </article>\n    </div>\n  ),\n};\n\n/**\n * Demonstrates the component in a more realistic layout with navigation\n * elements that keyboard users would want to skip.\n */\nexport const WithNavigation: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <nav className='flex gap-4'>\n          <a href='#' className='text-sm hover:underline'>\n            Home\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            About\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Products\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Services\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Contact\n          </a>\n        </nav>\n      </header>\n      <aside className='border-b p-4'>\n        <h2 className='mb-2 font-semibold'>Sidebar</h2>\n        <ul className='space-y-1 text-sm'>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 1\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 2\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 3\n            </a>\n          </li>\n        </ul>\n      </aside>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p className='mb-4'>\n          Without the skip link, keyboard users would need to tab through all\n          navigation items above before reaching this content.\n        </p>\n        <p className='text-muted-foreground text-sm'>\n          Tip: Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Shift+Tab\n          </kbd>{' '}\n          repeatedly to navigate backwards and see the skip link appear.\n        </p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Always visible variant for demonstration purposes.\n * In production, the component would only be visible on focus.\n */\nexport const AlwaysVisible: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n    className:\n      'not-sr-only fixed left-4 top-4 z-[9999] rounded-md bg-primary px-4 py-2 text-primary-foreground outline-none ring-2 ring-ring ring-offset-2',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4 pt-16'>\n        <p className='text-muted-foreground text-sm'>\n          This story shows the skip link in its visible state for demonstration.\n          In production, it would only appear when focused via keyboard.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>\n          The skip link is always visible in this story for demonstration\n          purposes.\n        </p>\n      </main>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SkipToContent.stories.tsx" },
        "span": [5460, 5468],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SkipToContent } from './SkipToContent';\n\nconst meta: Meta<typeof SkipToContent> = {\n  title: 'Atoms/SkipToContent',\n  component: SkipToContent,\n  parameters: {\n    layout: 'fullscreen',\n    docs: {\n      description: {\n        component: `\nA visually hidden skip link for keyboard accessibility that allows users to bypass navigation and jump directly to main content.\n\n## Keyboard Accessibility\n\nThis component is essential for WCAG 2.1 Level A compliance (2.4.1 Bypass Blocks). It provides a way for keyboard and screen reader users to skip repetitive navigation elements.\n\n### How it works:\n- **Hidden by default**: The link is visually hidden using the \\`sr-only\\` class but remains accessible to screen readers.\n- **Visible on focus**: When a user tabs to the link, it becomes visible using \\`focus:not-sr-only\\`.\n- **Skip functionality**: Activating the link (pressing Enter) jumps focus to the main content area.\n\n### Usage:\n1. Add this component as the **first focusable element** in your layout\n2. Ensure your main content area has a matching \\`id\\` attribute (default: \\`main-content\\`)\n3. The target element should have \\`tabindex=\"-1\"\\` if it's not natively focusable\n\n### Testing in Storybook:\nTo see this component in action, **press Tab** to focus on it. The link will appear in the top-left corner when focused.\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    targetId: {\n      control: { type: 'text' },\n      description:\n        'The ID of the target element to skip to (without the # prefix)',\n    },\n    linkText: {\n      control: { type: 'text' },\n      description: 'The text to display in the skip link',\n    },\n    className: {\n      control: { type: 'text' },\n      description: 'Additional CSS classes',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n/**\n * Default configuration. Press Tab to see the skip link appear.\n * The link targets an element with id=\"main-content\".\n */\nexport const Default: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link appear in the top-left corner.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>This is the main content area that the skip link will jump to.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Custom link text for different contexts, such as a documentation page.\n */\nexport const CustomText: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to main article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link with custom text.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Article</h1>\n        <p>The skip link now reads &quot;Skip to main article&quot;.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Targeting a custom element ID, useful when the main content\n * has a different identifier.\n */\nexport const CustomTarget: Story = {\n  args: {\n    targetId: 'article-content',\n    linkText: 'Skip to article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link. It targets &quot;#article-content&quot; instead\n          of the default.\n        </p>\n      </header>\n      <nav className='border-b p-4'>\n        <p className='text-sm'>\n          Navigation section (would normally contain many links)\n        </p>\n      </nav>\n      <article id='article-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Article Content</h1>\n        <p>This section has a custom ID that the skip link targets.</p>\n      </article>\n    </div>\n  ),\n};\n\n/**\n * Demonstrates the component in a more realistic layout with navigation\n * elements that keyboard users would want to skip.\n */\nexport const WithNavigation: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <nav className='flex gap-4'>\n          <a href='#' className='text-sm hover:underline'>\n            Home\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            About\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Products\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Services\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Contact\n          </a>\n        </nav>\n      </header>\n      <aside className='border-b p-4'>\n        <h2 className='mb-2 font-semibold'>Sidebar</h2>\n        <ul className='space-y-1 text-sm'>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 1\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 2\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 3\n            </a>\n          </li>\n        </ul>\n      </aside>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p className='mb-4'>\n          Without the skip link, keyboard users would need to tab through all\n          navigation items above before reaching this content.\n        </p>\n        <p className='text-muted-foreground text-sm'>\n          Tip: Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Shift+Tab\n          </kbd>{' '}\n          repeatedly to navigate backwards and see the skip link appear.\n        </p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Always visible variant for demonstration purposes.\n * In production, the component would only be visible on focus.\n */\nexport const AlwaysVisible: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n    className:\n      'not-sr-only fixed left-4 top-4 z-[9999] rounded-md bg-primary px-4 py-2 text-primary-foreground outline-none ring-2 ring-ring ring-offset-2',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4 pt-16'>\n        <p className='text-muted-foreground text-sm'>\n          This story shows the skip link in its visible state for demonstration.\n          In production, it would only appear when focused via keyboard.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>\n          The skip link is always visible in this story for demonstration\n          purposes.\n        </p>\n      </main>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SkipToContent.stories.tsx" },
        "span": [5555, 5563],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SkipToContent } from './SkipToContent';\n\nconst meta: Meta<typeof SkipToContent> = {\n  title: 'Atoms/SkipToContent',\n  component: SkipToContent,\n  parameters: {\n    layout: 'fullscreen',\n    docs: {\n      description: {\n        component: `\nA visually hidden skip link for keyboard accessibility that allows users to bypass navigation and jump directly to main content.\n\n## Keyboard Accessibility\n\nThis component is essential for WCAG 2.1 Level A compliance (2.4.1 Bypass Blocks). It provides a way for keyboard and screen reader users to skip repetitive navigation elements.\n\n### How it works:\n- **Hidden by default**: The link is visually hidden using the \\`sr-only\\` class but remains accessible to screen readers.\n- **Visible on focus**: When a user tabs to the link, it becomes visible using \\`focus:not-sr-only\\`.\n- **Skip functionality**: Activating the link (pressing Enter) jumps focus to the main content area.\n\n### Usage:\n1. Add this component as the **first focusable element** in your layout\n2. Ensure your main content area has a matching \\`id\\` attribute (default: \\`main-content\\`)\n3. The target element should have \\`tabindex=\"-1\"\\` if it's not natively focusable\n\n### Testing in Storybook:\nTo see this component in action, **press Tab** to focus on it. The link will appear in the top-left corner when focused.\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    targetId: {\n      control: { type: 'text' },\n      description:\n        'The ID of the target element to skip to (without the # prefix)',\n    },\n    linkText: {\n      control: { type: 'text' },\n      description: 'The text to display in the skip link',\n    },\n    className: {\n      control: { type: 'text' },\n      description: 'Additional CSS classes',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n/**\n * Default configuration. Press Tab to see the skip link appear.\n * The link targets an element with id=\"main-content\".\n */\nexport const Default: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link appear in the top-left corner.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>This is the main content area that the skip link will jump to.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Custom link text for different contexts, such as a documentation page.\n */\nexport const CustomText: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to main article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link with custom text.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Article</h1>\n        <p>The skip link now reads &quot;Skip to main article&quot;.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Targeting a custom element ID, useful when the main content\n * has a different identifier.\n */\nexport const CustomTarget: Story = {\n  args: {\n    targetId: 'article-content',\n    linkText: 'Skip to article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link. It targets &quot;#article-content&quot; instead\n          of the default.\n        </p>\n      </header>\n      <nav className='border-b p-4'>\n        <p className='text-sm'>\n          Navigation section (would normally contain many links)\n        </p>\n      </nav>\n      <article id='article-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Article Content</h1>\n        <p>This section has a custom ID that the skip link targets.</p>\n      </article>\n    </div>\n  ),\n};\n\n/**\n * Demonstrates the component in a more realistic layout with navigation\n * elements that keyboard users would want to skip.\n */\nexport const WithNavigation: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <nav className='flex gap-4'>\n          <a href='#' className='text-sm hover:underline'>\n            Home\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            About\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Products\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Services\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Contact\n          </a>\n        </nav>\n      </header>\n      <aside className='border-b p-4'>\n        <h2 className='mb-2 font-semibold'>Sidebar</h2>\n        <ul className='space-y-1 text-sm'>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 1\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 2\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 3\n            </a>\n          </li>\n        </ul>\n      </aside>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p className='mb-4'>\n          Without the skip link, keyboard users would need to tab through all\n          navigation items above before reaching this content.\n        </p>\n        <p className='text-muted-foreground text-sm'>\n          Tip: Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Shift+Tab\n          </kbd>{' '}\n          repeatedly to navigate backwards and see the skip link appear.\n        </p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Always visible variant for demonstration purposes.\n * In production, the component would only be visible on focus.\n */\nexport const AlwaysVisible: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n    className:\n      'not-sr-only fixed left-4 top-4 z-[9999] rounded-md bg-primary px-4 py-2 text-primary-foreground outline-none ring-2 ring-ring ring-offset-2',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4 pt-16'>\n        <p className='text-muted-foreground text-sm'>\n          This story shows the skip link in its visible state for demonstration.\n          In production, it would only appear when focused via keyboard.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>\n          The skip link is always visible in this story for demonstration\n          purposes.\n        </p>\n      </main>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SkipToContent.stories.tsx" },
        "span": [5835, 5843],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SkipToContent } from './SkipToContent';\n\nconst meta: Meta<typeof SkipToContent> = {\n  title: 'Atoms/SkipToContent',\n  component: SkipToContent,\n  parameters: {\n    layout: 'fullscreen',\n    docs: {\n      description: {\n        component: `\nA visually hidden skip link for keyboard accessibility that allows users to bypass navigation and jump directly to main content.\n\n## Keyboard Accessibility\n\nThis component is essential for WCAG 2.1 Level A compliance (2.4.1 Bypass Blocks). It provides a way for keyboard and screen reader users to skip repetitive navigation elements.\n\n### How it works:\n- **Hidden by default**: The link is visually hidden using the \\`sr-only\\` class but remains accessible to screen readers.\n- **Visible on focus**: When a user tabs to the link, it becomes visible using \\`focus:not-sr-only\\`.\n- **Skip functionality**: Activating the link (pressing Enter) jumps focus to the main content area.\n\n### Usage:\n1. Add this component as the **first focusable element** in your layout\n2. Ensure your main content area has a matching \\`id\\` attribute (default: \\`main-content\\`)\n3. The target element should have \\`tabindex=\"-1\"\\` if it's not natively focusable\n\n### Testing in Storybook:\nTo see this component in action, **press Tab** to focus on it. The link will appear in the top-left corner when focused.\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    targetId: {\n      control: { type: 'text' },\n      description:\n        'The ID of the target element to skip to (without the # prefix)',\n    },\n    linkText: {\n      control: { type: 'text' },\n      description: 'The text to display in the skip link',\n    },\n    className: {\n      control: { type: 'text' },\n      description: 'Additional CSS classes',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n/**\n * Default configuration. Press Tab to see the skip link appear.\n * The link targets an element with id=\"main-content\".\n */\nexport const Default: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link appear in the top-left corner.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>This is the main content area that the skip link will jump to.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Custom link text for different contexts, such as a documentation page.\n */\nexport const CustomText: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to main article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link with custom text.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Article</h1>\n        <p>The skip link now reads &quot;Skip to main article&quot;.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Targeting a custom element ID, useful when the main content\n * has a different identifier.\n */\nexport const CustomTarget: Story = {\n  args: {\n    targetId: 'article-content',\n    linkText: 'Skip to article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link. It targets &quot;#article-content&quot; instead\n          of the default.\n        </p>\n      </header>\n      <nav className='border-b p-4'>\n        <p className='text-sm'>\n          Navigation section (would normally contain many links)\n        </p>\n      </nav>\n      <article id='article-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Article Content</h1>\n        <p>This section has a custom ID that the skip link targets.</p>\n      </article>\n    </div>\n  ),\n};\n\n/**\n * Demonstrates the component in a more realistic layout with navigation\n * elements that keyboard users would want to skip.\n */\nexport const WithNavigation: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <nav className='flex gap-4'>\n          <a href='#' className='text-sm hover:underline'>\n            Home\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            About\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Products\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Services\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Contact\n          </a>\n        </nav>\n      </header>\n      <aside className='border-b p-4'>\n        <h2 className='mb-2 font-semibold'>Sidebar</h2>\n        <ul className='space-y-1 text-sm'>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 1\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 2\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 3\n            </a>\n          </li>\n        </ul>\n      </aside>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p className='mb-4'>\n          Without the skip link, keyboard users would need to tab through all\n          navigation items above before reaching this content.\n        </p>\n        <p className='text-muted-foreground text-sm'>\n          Tip: Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Shift+Tab\n          </kbd>{' '}\n          repeatedly to navigate backwards and see the skip link appear.\n        </p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Always visible variant for demonstration purposes.\n * In production, the component would only be visible on focus.\n */\nexport const AlwaysVisible: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n    className:\n      'not-sr-only fixed left-4 top-4 z-[9999] rounded-md bg-primary px-4 py-2 text-primary-foreground outline-none ring-2 ring-ring ring-offset-2',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4 pt-16'>\n        <p className='text-muted-foreground text-sm'>\n          This story shows the skip link in its visible state for demonstration.\n          In production, it would only appear when focused via keyboard.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>\n          The skip link is always visible in this story for demonstration\n          purposes.\n        </p>\n      </main>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SkipToContent.stories.tsx" },
        "span": [5957, 5965],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SkipToContent } from './SkipToContent';\n\nconst meta: Meta<typeof SkipToContent> = {\n  title: 'Atoms/SkipToContent',\n  component: SkipToContent,\n  parameters: {\n    layout: 'fullscreen',\n    docs: {\n      description: {\n        component: `\nA visually hidden skip link for keyboard accessibility that allows users to bypass navigation and jump directly to main content.\n\n## Keyboard Accessibility\n\nThis component is essential for WCAG 2.1 Level A compliance (2.4.1 Bypass Blocks). It provides a way for keyboard and screen reader users to skip repetitive navigation elements.\n\n### How it works:\n- **Hidden by default**: The link is visually hidden using the \\`sr-only\\` class but remains accessible to screen readers.\n- **Visible on focus**: When a user tabs to the link, it becomes visible using \\`focus:not-sr-only\\`.\n- **Skip functionality**: Activating the link (pressing Enter) jumps focus to the main content area.\n\n### Usage:\n1. Add this component as the **first focusable element** in your layout\n2. Ensure your main content area has a matching \\`id\\` attribute (default: \\`main-content\\`)\n3. The target element should have \\`tabindex=\"-1\"\\` if it's not natively focusable\n\n### Testing in Storybook:\nTo see this component in action, **press Tab** to focus on it. The link will appear in the top-left corner when focused.\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    targetId: {\n      control: { type: 'text' },\n      description:\n        'The ID of the target element to skip to (without the # prefix)',\n    },\n    linkText: {\n      control: { type: 'text' },\n      description: 'The text to display in the skip link',\n    },\n    className: {\n      control: { type: 'text' },\n      description: 'Additional CSS classes',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n/**\n * Default configuration. Press Tab to see the skip link appear.\n * The link targets an element with id=\"main-content\".\n */\nexport const Default: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link appear in the top-left corner.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>This is the main content area that the skip link will jump to.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Custom link text for different contexts, such as a documentation page.\n */\nexport const CustomText: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to main article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link with custom text.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Article</h1>\n        <p>The skip link now reads &quot;Skip to main article&quot;.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Targeting a custom element ID, useful when the main content\n * has a different identifier.\n */\nexport const CustomTarget: Story = {\n  args: {\n    targetId: 'article-content',\n    linkText: 'Skip to article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link. It targets &quot;#article-content&quot; instead\n          of the default.\n        </p>\n      </header>\n      <nav className='border-b p-4'>\n        <p className='text-sm'>\n          Navigation section (would normally contain many links)\n        </p>\n      </nav>\n      <article id='article-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Article Content</h1>\n        <p>This section has a custom ID that the skip link targets.</p>\n      </article>\n    </div>\n  ),\n};\n\n/**\n * Demonstrates the component in a more realistic layout with navigation\n * elements that keyboard users would want to skip.\n */\nexport const WithNavigation: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <nav className='flex gap-4'>\n          <a href='#' className='text-sm hover:underline'>\n            Home\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            About\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Products\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Services\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Contact\n          </a>\n        </nav>\n      </header>\n      <aside className='border-b p-4'>\n        <h2 className='mb-2 font-semibold'>Sidebar</h2>\n        <ul className='space-y-1 text-sm'>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 1\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 2\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 3\n            </a>\n          </li>\n        </ul>\n      </aside>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p className='mb-4'>\n          Without the skip link, keyboard users would need to tab through all\n          navigation items above before reaching this content.\n        </p>\n        <p className='text-muted-foreground text-sm'>\n          Tip: Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Shift+Tab\n          </kbd>{' '}\n          repeatedly to navigate backwards and see the skip link appear.\n        </p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Always visible variant for demonstration purposes.\n * In production, the component would only be visible on focus.\n */\nexport const AlwaysVisible: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n    className:\n      'not-sr-only fixed left-4 top-4 z-[9999] rounded-md bg-primary px-4 py-2 text-primary-foreground outline-none ring-2 ring-ring ring-offset-2',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4 pt-16'>\n        <p className='text-muted-foreground text-sm'>\n          This story shows the skip link in its visible state for demonstration.\n          In production, it would only appear when focused via keyboard.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>\n          The skip link is always visible in this story for demonstration\n          purposes.\n        </p>\n      </main>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SkipToContent.stories.tsx" },
        "span": [6079, 6087],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SkipToContent } from './SkipToContent';\n\nconst meta: Meta<typeof SkipToContent> = {\n  title: 'Atoms/SkipToContent',\n  component: SkipToContent,\n  parameters: {\n    layout: 'fullscreen',\n    docs: {\n      description: {\n        component: `\nA visually hidden skip link for keyboard accessibility that allows users to bypass navigation and jump directly to main content.\n\n## Keyboard Accessibility\n\nThis component is essential for WCAG 2.1 Level A compliance (2.4.1 Bypass Blocks). It provides a way for keyboard and screen reader users to skip repetitive navigation elements.\n\n### How it works:\n- **Hidden by default**: The link is visually hidden using the \\`sr-only\\` class but remains accessible to screen readers.\n- **Visible on focus**: When a user tabs to the link, it becomes visible using \\`focus:not-sr-only\\`.\n- **Skip functionality**: Activating the link (pressing Enter) jumps focus to the main content area.\n\n### Usage:\n1. Add this component as the **first focusable element** in your layout\n2. Ensure your main content area has a matching \\`id\\` attribute (default: \\`main-content\\`)\n3. The target element should have \\`tabindex=\"-1\"\\` if it's not natively focusable\n\n### Testing in Storybook:\nTo see this component in action, **press Tab** to focus on it. The link will appear in the top-left corner when focused.\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    targetId: {\n      control: { type: 'text' },\n      description:\n        'The ID of the target element to skip to (without the # prefix)',\n    },\n    linkText: {\n      control: { type: 'text' },\n      description: 'The text to display in the skip link',\n    },\n    className: {\n      control: { type: 'text' },\n      description: 'Additional CSS classes',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n/**\n * Default configuration. Press Tab to see the skip link appear.\n * The link targets an element with id=\"main-content\".\n */\nexport const Default: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link appear in the top-left corner.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>This is the main content area that the skip link will jump to.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Custom link text for different contexts, such as a documentation page.\n */\nexport const CustomText: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to main article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link with custom text.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Article</h1>\n        <p>The skip link now reads &quot;Skip to main article&quot;.</p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Targeting a custom element ID, useful when the main content\n * has a different identifier.\n */\nexport const CustomTarget: Story = {\n  args: {\n    targetId: 'article-content',\n    linkText: 'Skip to article',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <p className='text-muted-foreground text-sm'>\n          Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Tab\n          </kbd>{' '}\n          to see the skip link. It targets &quot;#article-content&quot; instead\n          of the default.\n        </p>\n      </header>\n      <nav className='border-b p-4'>\n        <p className='text-sm'>\n          Navigation section (would normally contain many links)\n        </p>\n      </nav>\n      <article id='article-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Article Content</h1>\n        <p>This section has a custom ID that the skip link targets.</p>\n      </article>\n    </div>\n  ),\n};\n\n/**\n * Demonstrates the component in a more realistic layout with navigation\n * elements that keyboard users would want to skip.\n */\nexport const WithNavigation: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4'>\n        <nav className='flex gap-4'>\n          <a href='#' className='text-sm hover:underline'>\n            Home\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            About\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Products\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Services\n          </a>\n          <a href='#' className='text-sm hover:underline'>\n            Contact\n          </a>\n        </nav>\n      </header>\n      <aside className='border-b p-4'>\n        <h2 className='mb-2 font-semibold'>Sidebar</h2>\n        <ul className='space-y-1 text-sm'>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 1\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 2\n            </a>\n          </li>\n          <li>\n            <a href='#' className='hover:underline'>\n              Link 3\n            </a>\n          </li>\n        </ul>\n      </aside>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p className='mb-4'>\n          Without the skip link, keyboard users would need to tab through all\n          navigation items above before reaching this content.\n        </p>\n        <p className='text-muted-foreground text-sm'>\n          Tip: Press{' '}\n          <kbd className='rounded bg-muted px-1.5 py-0.5 font-mono text-xs'>\n            Shift+Tab\n          </kbd>{' '}\n          repeatedly to navigate backwards and see the skip link appear.\n        </p>\n      </main>\n    </div>\n  ),\n};\n\n/**\n * Always visible variant for demonstration purposes.\n * In production, the component would only be visible on focus.\n */\nexport const AlwaysVisible: Story = {\n  args: {\n    targetId: 'main-content',\n    linkText: 'Skip to content',\n    className:\n      'not-sr-only fixed left-4 top-4 z-[9999] rounded-md bg-primary px-4 py-2 text-primary-foreground outline-none ring-2 ring-ring ring-offset-2',\n  },\n  render: args => (\n    <div className='min-h-screen bg-background'>\n      <SkipToContent {...args} />\n      <header className='border-b p-4 pt-16'>\n        <p className='text-muted-foreground text-sm'>\n          This story shows the skip link in its visible state for demonstration.\n          In production, it would only appear when focused via keyboard.\n        </p>\n      </header>\n      <main id='main-content' className='p-4' tabIndex={-1}>\n        <h1 className='mb-4 text-2xl font-bold'>Main Content</h1>\n        <p>\n          The skip link is always visible in this story for demonstration\n          purposes.\n        </p>\n      </main>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SocialIcon.stories.tsx" },
        "span": [5223, 5231],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SocialIcon } from './SocialIcon';\n\nconst meta: Meta<typeof SocialIcon> = {\n  title: 'Atoms/SocialIcon',\n  component: SocialIcon,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    platform: {\n      control: { type: 'text' },\n    },\n    className: {\n      control: { type: 'text' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Instagram: Story = {\n  args: {\n    platform: 'instagram',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Twitter: Story = {\n  args: {\n    platform: 'twitter',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Spotify: Story = {\n  args: {\n    platform: 'spotify',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const YouTube: Story = {\n  args: {\n    platform: 'youtube',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const TikTok: Story = {\n  args: {\n    platform: 'tiktok',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const AppleMusic: Story = {\n  args: {\n    platform: 'apple',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const SoundCloud: Story = {\n  args: {\n    platform: 'soundcloud',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Venmo: Story = {\n  args: {\n    platform: 'venmo',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const UnknownPlatform: Story = {\n  args: {\n    platform: 'unknown-platform',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const AllPlatforms: Story = {\n  render: () => (\n    <div className='grid grid-cols-4 gap-4'>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='instagram' className='h-8 w-8 text-pink-500' />\n        <span className='text-xs'>Instagram</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='twitter' className='h-8 w-8 text-blue-400' />\n        <span className='text-xs'>Twitter/X</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='spotify' className='h-8 w-8 text-green-500' />\n        <span className='text-xs'>Spotify</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='youtube' className='h-8 w-8 text-red-500' />\n        <span className='text-xs'>YouTube</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='tiktok'\n          className='h-8 w-8 text-black dark:text-white'\n        />\n        <span className='text-xs'>TikTok</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='apple'\n          className='h-8 w-8 text-gray-800 dark:text-white'\n        />\n        <span className='text-xs'>Apple Music</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='soundcloud' className='h-8 w-8 text-orange-500' />\n        <span className='text-xs'>SoundCloud</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='venmo' className='h-8 w-8 text-blue-600' />\n        <span className='text-xs'>Venmo</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='discord' className='h-8 w-8 text-indigo-500' />\n        <span className='text-xs'>Discord</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='github'\n          className='h-8 w-8 text-gray-800 dark:text-white'\n        />\n        <span className='text-xs'>GitHub</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='website' className='h-8 w-8 text-blue-600' />\n        <span className='text-xs'>Website</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='unknown' className='h-8 w-8 text-gray-500' />\n        <span className='text-xs'>Unknown</span>\n      </div>\n    </div>\n  ),\n};\n\nexport const DifferentSizes: Story = {\n  render: () => (\n    <div className='flex items-center gap-4'>\n      <SocialIcon platform='spotify' className='h-4 w-4 text-green-500' />\n      <SocialIcon platform='spotify' className='h-6 w-6 text-green-500' />\n      <SocialIcon platform='spotify' className='h-8 w-8 text-green-500' />\n      <SocialIcon platform='spotify' className='h-12 w-12 text-green-500' />\n    </div>\n  ),\n};\n\nexport const SocialBar: Story = {\n  render: () => (\n    <div className='bg-gray-50 dark:bg-gray-900 p-6 rounded-lg'>\n      <h3 className='text-lg font-semibold mb-4 text-center'>Follow @artist</h3>\n      <div className='flex justify-center gap-4'>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='spotify' className='h-5 w-5 text-green-500' />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon\n            platform='apple'\n            className='h-5 w-5 text-gray-800 dark:text-white'\n          />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='instagram' className='h-5 w-5 text-pink-500' />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon\n            platform='tiktok'\n            className='h-5 w-5 text-black dark:text-white'\n          />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='youtube' className='h-5 w-5 text-red-500' />\n        </a>\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SocialIcon.stories.tsx" },
        "span": [4694, 4702],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SocialIcon } from './SocialIcon';\n\nconst meta: Meta<typeof SocialIcon> = {\n  title: 'Atoms/SocialIcon',\n  component: SocialIcon,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    platform: {\n      control: { type: 'text' },\n    },\n    className: {\n      control: { type: 'text' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Instagram: Story = {\n  args: {\n    platform: 'instagram',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Twitter: Story = {\n  args: {\n    platform: 'twitter',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Spotify: Story = {\n  args: {\n    platform: 'spotify',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const YouTube: Story = {\n  args: {\n    platform: 'youtube',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const TikTok: Story = {\n  args: {\n    platform: 'tiktok',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const AppleMusic: Story = {\n  args: {\n    platform: 'apple',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const SoundCloud: Story = {\n  args: {\n    platform: 'soundcloud',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Venmo: Story = {\n  args: {\n    platform: 'venmo',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const UnknownPlatform: Story = {\n  args: {\n    platform: 'unknown-platform',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const AllPlatforms: Story = {\n  render: () => (\n    <div className='grid grid-cols-4 gap-4'>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='instagram' className='h-8 w-8 text-pink-500' />\n        <span className='text-xs'>Instagram</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='twitter' className='h-8 w-8 text-blue-400' />\n        <span className='text-xs'>Twitter/X</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='spotify' className='h-8 w-8 text-green-500' />\n        <span className='text-xs'>Spotify</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='youtube' className='h-8 w-8 text-red-500' />\n        <span className='text-xs'>YouTube</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='tiktok'\n          className='h-8 w-8 text-black dark:text-white'\n        />\n        <span className='text-xs'>TikTok</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='apple'\n          className='h-8 w-8 text-gray-800 dark:text-white'\n        />\n        <span className='text-xs'>Apple Music</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='soundcloud' className='h-8 w-8 text-orange-500' />\n        <span className='text-xs'>SoundCloud</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='venmo' className='h-8 w-8 text-blue-600' />\n        <span className='text-xs'>Venmo</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='discord' className='h-8 w-8 text-indigo-500' />\n        <span className='text-xs'>Discord</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='github'\n          className='h-8 w-8 text-gray-800 dark:text-white'\n        />\n        <span className='text-xs'>GitHub</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='website' className='h-8 w-8 text-blue-600' />\n        <span className='text-xs'>Website</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='unknown' className='h-8 w-8 text-gray-500' />\n        <span className='text-xs'>Unknown</span>\n      </div>\n    </div>\n  ),\n};\n\nexport const DifferentSizes: Story = {\n  render: () => (\n    <div className='flex items-center gap-4'>\n      <SocialIcon platform='spotify' className='h-4 w-4 text-green-500' />\n      <SocialIcon platform='spotify' className='h-6 w-6 text-green-500' />\n      <SocialIcon platform='spotify' className='h-8 w-8 text-green-500' />\n      <SocialIcon platform='spotify' className='h-12 w-12 text-green-500' />\n    </div>\n  ),\n};\n\nexport const SocialBar: Story = {\n  render: () => (\n    <div className='bg-gray-50 dark:bg-gray-900 p-6 rounded-lg'>\n      <h3 className='text-lg font-semibold mb-4 text-center'>Follow @artist</h3>\n      <div className='flex justify-center gap-4'>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='spotify' className='h-5 w-5 text-green-500' />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon\n            platform='apple'\n            className='h-5 w-5 text-gray-800 dark:text-white'\n          />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='instagram' className='h-5 w-5 text-pink-500' />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon\n            platform='tiktok'\n            className='h-5 w-5 text-black dark:text-white'\n          />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='youtube' className='h-5 w-5 text-red-500' />\n        </a>\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SocialIcon.stories.tsx" },
        "span": [4935, 4943],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SocialIcon } from './SocialIcon';\n\nconst meta: Meta<typeof SocialIcon> = {\n  title: 'Atoms/SocialIcon',\n  component: SocialIcon,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    platform: {\n      control: { type: 'text' },\n    },\n    className: {\n      control: { type: 'text' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Instagram: Story = {\n  args: {\n    platform: 'instagram',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Twitter: Story = {\n  args: {\n    platform: 'twitter',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Spotify: Story = {\n  args: {\n    platform: 'spotify',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const YouTube: Story = {\n  args: {\n    platform: 'youtube',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const TikTok: Story = {\n  args: {\n    platform: 'tiktok',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const AppleMusic: Story = {\n  args: {\n    platform: 'apple',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const SoundCloud: Story = {\n  args: {\n    platform: 'soundcloud',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Venmo: Story = {\n  args: {\n    platform: 'venmo',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const UnknownPlatform: Story = {\n  args: {\n    platform: 'unknown-platform',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const AllPlatforms: Story = {\n  render: () => (\n    <div className='grid grid-cols-4 gap-4'>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='instagram' className='h-8 w-8 text-pink-500' />\n        <span className='text-xs'>Instagram</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='twitter' className='h-8 w-8 text-blue-400' />\n        <span className='text-xs'>Twitter/X</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='spotify' className='h-8 w-8 text-green-500' />\n        <span className='text-xs'>Spotify</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='youtube' className='h-8 w-8 text-red-500' />\n        <span className='text-xs'>YouTube</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='tiktok'\n          className='h-8 w-8 text-black dark:text-white'\n        />\n        <span className='text-xs'>TikTok</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='apple'\n          className='h-8 w-8 text-gray-800 dark:text-white'\n        />\n        <span className='text-xs'>Apple Music</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='soundcloud' className='h-8 w-8 text-orange-500' />\n        <span className='text-xs'>SoundCloud</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='venmo' className='h-8 w-8 text-blue-600' />\n        <span className='text-xs'>Venmo</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='discord' className='h-8 w-8 text-indigo-500' />\n        <span className='text-xs'>Discord</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='github'\n          className='h-8 w-8 text-gray-800 dark:text-white'\n        />\n        <span className='text-xs'>GitHub</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='website' className='h-8 w-8 text-blue-600' />\n        <span className='text-xs'>Website</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='unknown' className='h-8 w-8 text-gray-500' />\n        <span className='text-xs'>Unknown</span>\n      </div>\n    </div>\n  ),\n};\n\nexport const DifferentSizes: Story = {\n  render: () => (\n    <div className='flex items-center gap-4'>\n      <SocialIcon platform='spotify' className='h-4 w-4 text-green-500' />\n      <SocialIcon platform='spotify' className='h-6 w-6 text-green-500' />\n      <SocialIcon platform='spotify' className='h-8 w-8 text-green-500' />\n      <SocialIcon platform='spotify' className='h-12 w-12 text-green-500' />\n    </div>\n  ),\n};\n\nexport const SocialBar: Story = {\n  render: () => (\n    <div className='bg-gray-50 dark:bg-gray-900 p-6 rounded-lg'>\n      <h3 className='text-lg font-semibold mb-4 text-center'>Follow @artist</h3>\n      <div className='flex justify-center gap-4'>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='spotify' className='h-5 w-5 text-green-500' />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon\n            platform='apple'\n            className='h-5 w-5 text-gray-800 dark:text-white'\n          />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='instagram' className='h-5 w-5 text-pink-500' />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon\n            platform='tiktok'\n            className='h-5 w-5 text-black dark:text-white'\n          />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='youtube' className='h-5 w-5 text-red-500' />\n        </a>\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SocialIcon.stories.tsx" },
        "span": [5465, 5473],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SocialIcon } from './SocialIcon';\n\nconst meta: Meta<typeof SocialIcon> = {\n  title: 'Atoms/SocialIcon',\n  component: SocialIcon,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    platform: {\n      control: { type: 'text' },\n    },\n    className: {\n      control: { type: 'text' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Instagram: Story = {\n  args: {\n    platform: 'instagram',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Twitter: Story = {\n  args: {\n    platform: 'twitter',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Spotify: Story = {\n  args: {\n    platform: 'spotify',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const YouTube: Story = {\n  args: {\n    platform: 'youtube',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const TikTok: Story = {\n  args: {\n    platform: 'tiktok',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const AppleMusic: Story = {\n  args: {\n    platform: 'apple',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const SoundCloud: Story = {\n  args: {\n    platform: 'soundcloud',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Venmo: Story = {\n  args: {\n    platform: 'venmo',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const UnknownPlatform: Story = {\n  args: {\n    platform: 'unknown-platform',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const AllPlatforms: Story = {\n  render: () => (\n    <div className='grid grid-cols-4 gap-4'>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='instagram' className='h-8 w-8 text-pink-500' />\n        <span className='text-xs'>Instagram</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='twitter' className='h-8 w-8 text-blue-400' />\n        <span className='text-xs'>Twitter/X</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='spotify' className='h-8 w-8 text-green-500' />\n        <span className='text-xs'>Spotify</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='youtube' className='h-8 w-8 text-red-500' />\n        <span className='text-xs'>YouTube</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='tiktok'\n          className='h-8 w-8 text-black dark:text-white'\n        />\n        <span className='text-xs'>TikTok</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='apple'\n          className='h-8 w-8 text-gray-800 dark:text-white'\n        />\n        <span className='text-xs'>Apple Music</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='soundcloud' className='h-8 w-8 text-orange-500' />\n        <span className='text-xs'>SoundCloud</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='venmo' className='h-8 w-8 text-blue-600' />\n        <span className='text-xs'>Venmo</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='discord' className='h-8 w-8 text-indigo-500' />\n        <span className='text-xs'>Discord</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='github'\n          className='h-8 w-8 text-gray-800 dark:text-white'\n        />\n        <span className='text-xs'>GitHub</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='website' className='h-8 w-8 text-blue-600' />\n        <span className='text-xs'>Website</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='unknown' className='h-8 w-8 text-gray-500' />\n        <span className='text-xs'>Unknown</span>\n      </div>\n    </div>\n  ),\n};\n\nexport const DifferentSizes: Story = {\n  render: () => (\n    <div className='flex items-center gap-4'>\n      <SocialIcon platform='spotify' className='h-4 w-4 text-green-500' />\n      <SocialIcon platform='spotify' className='h-6 w-6 text-green-500' />\n      <SocialIcon platform='spotify' className='h-8 w-8 text-green-500' />\n      <SocialIcon platform='spotify' className='h-12 w-12 text-green-500' />\n    </div>\n  ),\n};\n\nexport const SocialBar: Story = {\n  render: () => (\n    <div className='bg-gray-50 dark:bg-gray-900 p-6 rounded-lg'>\n      <h3 className='text-lg font-semibold mb-4 text-center'>Follow @artist</h3>\n      <div className='flex justify-center gap-4'>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='spotify' className='h-5 w-5 text-green-500' />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon\n            platform='apple'\n            className='h-5 w-5 text-gray-800 dark:text-white'\n          />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='instagram' className='h-5 w-5 text-pink-500' />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon\n            platform='tiktok'\n            className='h-5 w-5 text-black dark:text-white'\n          />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='youtube' className='h-5 w-5 text-red-500' />\n        </a>\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAnchor",
      "severity": "warning",
      "description": "Provide a valid value for the attribute href.",
      "message": [
        {
          "elements": [],
          "content": "Provide a valid value for the attribute "
        },
        { "elements": ["Emphasis"], "content": "href" },
        { "elements": [], "content": "." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "The href attribute should be a valid a URL"
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://marcysutton.com/links-vs-buttons-in-modern-web-applications"
                      }
                    }
                  ],
                  "content": "this thorough explanation"
                },
                {
                  "elements": [],
                  "content": " to better understand the context."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SocialIcon.stories.tsx" },
        "span": [5751, 5759],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { SocialIcon } from './SocialIcon';\n\nconst meta: Meta<typeof SocialIcon> = {\n  title: 'Atoms/SocialIcon',\n  component: SocialIcon,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    platform: {\n      control: { type: 'text' },\n    },\n    className: {\n      control: { type: 'text' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Instagram: Story = {\n  args: {\n    platform: 'instagram',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Twitter: Story = {\n  args: {\n    platform: 'twitter',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Spotify: Story = {\n  args: {\n    platform: 'spotify',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const YouTube: Story = {\n  args: {\n    platform: 'youtube',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const TikTok: Story = {\n  args: {\n    platform: 'tiktok',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const AppleMusic: Story = {\n  args: {\n    platform: 'apple',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const SoundCloud: Story = {\n  args: {\n    platform: 'soundcloud',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const Venmo: Story = {\n  args: {\n    platform: 'venmo',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const UnknownPlatform: Story = {\n  args: {\n    platform: 'unknown-platform',\n    className: 'h-6 w-6',\n  },\n};\n\nexport const AllPlatforms: Story = {\n  render: () => (\n    <div className='grid grid-cols-4 gap-4'>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='instagram' className='h-8 w-8 text-pink-500' />\n        <span className='text-xs'>Instagram</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='twitter' className='h-8 w-8 text-blue-400' />\n        <span className='text-xs'>Twitter/X</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='spotify' className='h-8 w-8 text-green-500' />\n        <span className='text-xs'>Spotify</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='youtube' className='h-8 w-8 text-red-500' />\n        <span className='text-xs'>YouTube</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='tiktok'\n          className='h-8 w-8 text-black dark:text-white'\n        />\n        <span className='text-xs'>TikTok</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='apple'\n          className='h-8 w-8 text-gray-800 dark:text-white'\n        />\n        <span className='text-xs'>Apple Music</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='soundcloud' className='h-8 w-8 text-orange-500' />\n        <span className='text-xs'>SoundCloud</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='venmo' className='h-8 w-8 text-blue-600' />\n        <span className='text-xs'>Venmo</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='discord' className='h-8 w-8 text-indigo-500' />\n        <span className='text-xs'>Discord</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon\n          platform='github'\n          className='h-8 w-8 text-gray-800 dark:text-white'\n        />\n        <span className='text-xs'>GitHub</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='website' className='h-8 w-8 text-blue-600' />\n        <span className='text-xs'>Website</span>\n      </div>\n      <div className='flex flex-col items-center gap-2'>\n        <SocialIcon platform='unknown' className='h-8 w-8 text-gray-500' />\n        <span className='text-xs'>Unknown</span>\n      </div>\n    </div>\n  ),\n};\n\nexport const DifferentSizes: Story = {\n  render: () => (\n    <div className='flex items-center gap-4'>\n      <SocialIcon platform='spotify' className='h-4 w-4 text-green-500' />\n      <SocialIcon platform='spotify' className='h-6 w-6 text-green-500' />\n      <SocialIcon platform='spotify' className='h-8 w-8 text-green-500' />\n      <SocialIcon platform='spotify' className='h-12 w-12 text-green-500' />\n    </div>\n  ),\n};\n\nexport const SocialBar: Story = {\n  render: () => (\n    <div className='bg-gray-50 dark:bg-gray-900 p-6 rounded-lg'>\n      <h3 className='text-lg font-semibold mb-4 text-center'>Follow @artist</h3>\n      <div className='flex justify-center gap-4'>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='spotify' className='h-5 w-5 text-green-500' />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon\n            platform='apple'\n            className='h-5 w-5 text-gray-800 dark:text-white'\n          />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='instagram' className='h-5 w-5 text-pink-500' />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon\n            platform='tiktok'\n            className='h-5 w-5 text-black dark:text-white'\n          />\n        </a>\n        <a\n          href='#'\n          className='p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow'\n        >\n          <SocialIcon platform='youtube' className='h-5 w-5 text-red-500' />\n        </a>\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/SocialIcon.tsx" },
        "span": [2292, 2456],
        "sourceCode": "import {\n  type SimpleIcon,\n  siApplemusic,\n  siBandcamp,\n  siDiscord,\n  siFacebook,\n  siGithub,\n  siGooglechrome,\n  siInstagram,\n  siLine,\n  siMedium,\n  siOnlyfans,\n  siPatreon,\n  siPinterest,\n  siQuora,\n  siReddit,\n  siRumble,\n  siSnapchat,\n  siSoundcloud,\n  siSpotify,\n  siTelegram,\n  siThreads,\n  siTiktok,\n  siTumblr,\n  siTwitch,\n  siVenmo,\n  siViber,\n  siVimeo,\n  siX,\n  siYoutube,\n} from 'simple-icons';\n\n// no-op\n\ninterface SocialIconProps {\n  platform: string;\n  className?: string;\n  size?: number;\n  'aria-hidden'?: boolean;\n  'aria-label'?: string;\n}\n\n// Map platform names to Simple Icons\nconst platformMap: Record<string, SimpleIcon> = {\n  instagram: siInstagram,\n  twitter: siX,\n  x: siX,\n  tiktok: siTiktok,\n  youtube: siYoutube,\n  facebook: siFacebook,\n  spotify: siSpotify,\n  apple: siApplemusic,\n  applemusic: siApplemusic,\n  apple_music: siApplemusic,\n  soundcloud: siSoundcloud,\n  bandcamp: siBandcamp,\n  discord: siDiscord,\n  reddit: siReddit,\n  pinterest: siPinterest,\n  tumblr: siTumblr,\n  vimeo: siVimeo,\n  github: siGithub,\n  medium: siMedium,\n  patreon: siPatreon,\n  venmo: siVenmo,\n  website: siGooglechrome,\n  telegram: siTelegram,\n  snapchat: siSnapchat,\n  onlyfans: siOnlyfans,\n  quora: siQuora,\n  threads: siThreads,\n  line: siLine,\n  viber: siViber,\n  rumble: siRumble,\n  twitch: siTwitch,\n};\n\nexport function getPlatformIcon(platform: string): SimpleIcon | undefined {\n  return platformMap[platform.toLowerCase()];\n}\n\nexport function SocialIcon({\n  platform,\n  className,\n  size,\n  'aria-hidden': ariaHidden = true,\n  'aria-label': ariaLabel,\n}: SocialIconProps) {\n  const icon = platformMap[platform.toLowerCase()];\n  const iconClass = className || 'h-4 w-4';\n  const sizeStyle = size ? { width: size, height: size } : undefined;\n  const accessibilityProps: { 'aria-label'?: string; 'aria-hidden'?: boolean } =\n    ariaLabel ? { 'aria-label': ariaLabel } : { 'aria-hidden': true };\n\n  if (icon) {\n    return (\n      <svg\n        className={iconClass}\n        style={sizeStyle}\n        fill='currentColor'\n        viewBox='0 0 24 24'\n        aria-hidden={ariaHidden}\n        aria-label={ariaLabel}\n        role={ariaLabel ? 'img' : undefined}\n      >\n        <path d={icon.path} />\n      </svg>\n    );\n  }\n\n  // Fallback for unknown platforms\n  return (\n    <svg\n      className={iconClass}\n      style={sizeStyle}\n      fill='none'\n      stroke='currentColor'\n      viewBox='0 0 24 24'\n      {...accessibilityProps}\n    >\n      <path\n        strokeLinecap='round'\n        strokeLinejoin='round'\n        strokeWidth={2}\n        d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n      />\n    </svg>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/StatusBadge.stories.tsx" },
        "span": [146, 244],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { StatusBadge } from './StatusBadge';\n\n// Sample icons\nconst CheckIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M5 13l4 4L19 7'\n    />\n  </svg>\n);\n\nconst LightningIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nconst meta: Meta<typeof StatusBadge> = {\n  title: 'Atoms/StatusBadge',\n  component: StatusBadge,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    variant: {\n      control: { type: 'select' },\n      options: ['blue', 'green', 'purple', 'orange', 'red', 'gray'],\n    },\n    size: {\n      control: { type: 'select' },\n      options: ['sm', 'md', 'lg'],\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    children: 'The Solution',\n    variant: 'green',\n    icon: CheckIcon,\n  },\n};\n\nexport const Blue: Story = {\n  args: {\n    children: 'How It Works',\n    variant: 'blue',\n    icon: LightningIcon,\n  },\n};\n\nexport const Purple: Story = {\n  args: {\n    children: 'Features',\n    variant: 'purple',\n    icon: CheckIcon,\n  },\n};\n\nexport const Orange: Story = {\n  args: {\n    children: 'Warning',\n    variant: 'orange',\n  },\n};\n\nexport const Red: Story = {\n  args: {\n    children: 'Error',\n    variant: 'red',\n  },\n};\n\nexport const Gray: Story = {\n  args: {\n    children: 'Neutral',\n    variant: 'gray',\n  },\n};\n\nexport const WithoutIcon: Story = {\n  args: {\n    children: 'No Icon Badge',\n    variant: 'blue',\n  },\n};\n\nexport const Small: Story = {\n  args: {\n    children: 'Small Badge',\n    variant: 'green',\n    icon: CheckIcon,\n    size: 'sm',\n  },\n};\n\nexport const Large: Story = {\n  args: {\n    children: 'Large Badge',\n    variant: 'purple',\n    icon: LightningIcon,\n    size: 'lg',\n  },\n};\n\nexport const AllVariants: Story = {\n  render: () => (\n    <div className='flex flex-wrap gap-4'>\n      <StatusBadge variant='blue' icon={LightningIcon}>\n        Blue Badge\n      </StatusBadge>\n      <StatusBadge variant='green' icon={CheckIcon}>\n        Green Badge\n      </StatusBadge>\n      <StatusBadge variant='purple' icon={LightningIcon}>\n        Purple Badge\n      </StatusBadge>\n      <StatusBadge variant='orange'>Orange Badge</StatusBadge>\n      <StatusBadge variant='red'>Red Badge</StatusBadge>\n      <StatusBadge variant='gray'>Gray Badge</StatusBadge>\n    </div>\n  ),\n};\n\nexport const AllSizes: Story = {\n  render: () => (\n    <div className='flex items-center gap-4'>\n      <StatusBadge variant='blue' icon={CheckIcon} size='sm'>\n        Small\n      </StatusBadge>\n      <StatusBadge variant='green' icon={CheckIcon} size='md'>\n        Medium\n      </StatusBadge>\n      <StatusBadge variant='purple' icon={CheckIcon} size='lg'>\n        Large\n      </StatusBadge>\n    </div>\n  ),\n};\n\nexport const InContext: Story = {\n  render: () => (\n    <div className='max-w-2xl p-6 bg-gray-50 dark:bg-gray-900 rounded-lg'>\n      <div className='mb-6 text-center'>\n        <StatusBadge variant='green' icon={CheckIcon}>\n          The Solution\n        </StatusBadge>\n      </div>\n      <h2 className='text-3xl font-bold text-center mb-4'>\n        Built for musicians, optimized for conversion\n      </h2>\n      <p className='text-gray-600 dark:text-gray-300 text-center'>\n        Every element is designed to turn fans into streams. No distractions,\n        just results.\n      </p>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/StatusBadge.stories.tsx" },
        "span": [405, 503],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { StatusBadge } from './StatusBadge';\n\n// Sample icons\nconst CheckIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M5 13l4 4L19 7'\n    />\n  </svg>\n);\n\nconst LightningIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nconst meta: Meta<typeof StatusBadge> = {\n  title: 'Atoms/StatusBadge',\n  component: StatusBadge,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    variant: {\n      control: { type: 'select' },\n      options: ['blue', 'green', 'purple', 'orange', 'red', 'gray'],\n    },\n    size: {\n      control: { type: 'select' },\n      options: ['sm', 'md', 'lg'],\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    children: 'The Solution',\n    variant: 'green',\n    icon: CheckIcon,\n  },\n};\n\nexport const Blue: Story = {\n  args: {\n    children: 'How It Works',\n    variant: 'blue',\n    icon: LightningIcon,\n  },\n};\n\nexport const Purple: Story = {\n  args: {\n    children: 'Features',\n    variant: 'purple',\n    icon: CheckIcon,\n  },\n};\n\nexport const Orange: Story = {\n  args: {\n    children: 'Warning',\n    variant: 'orange',\n  },\n};\n\nexport const Red: Story = {\n  args: {\n    children: 'Error',\n    variant: 'red',\n  },\n};\n\nexport const Gray: Story = {\n  args: {\n    children: 'Neutral',\n    variant: 'gray',\n  },\n};\n\nexport const WithoutIcon: Story = {\n  args: {\n    children: 'No Icon Badge',\n    variant: 'blue',\n  },\n};\n\nexport const Small: Story = {\n  args: {\n    children: 'Small Badge',\n    variant: 'green',\n    icon: CheckIcon,\n    size: 'sm',\n  },\n};\n\nexport const Large: Story = {\n  args: {\n    children: 'Large Badge',\n    variant: 'purple',\n    icon: LightningIcon,\n    size: 'lg',\n  },\n};\n\nexport const AllVariants: Story = {\n  render: () => (\n    <div className='flex flex-wrap gap-4'>\n      <StatusBadge variant='blue' icon={LightningIcon}>\n        Blue Badge\n      </StatusBadge>\n      <StatusBadge variant='green' icon={CheckIcon}>\n        Green Badge\n      </StatusBadge>\n      <StatusBadge variant='purple' icon={LightningIcon}>\n        Purple Badge\n      </StatusBadge>\n      <StatusBadge variant='orange'>Orange Badge</StatusBadge>\n      <StatusBadge variant='red'>Red Badge</StatusBadge>\n      <StatusBadge variant='gray'>Gray Badge</StatusBadge>\n    </div>\n  ),\n};\n\nexport const AllSizes: Story = {\n  render: () => (\n    <div className='flex items-center gap-4'>\n      <StatusBadge variant='blue' icon={CheckIcon} size='sm'>\n        Small\n      </StatusBadge>\n      <StatusBadge variant='green' icon={CheckIcon} size='md'>\n        Medium\n      </StatusBadge>\n      <StatusBadge variant='purple' icon={CheckIcon} size='lg'>\n        Large\n      </StatusBadge>\n    </div>\n  ),\n};\n\nexport const InContext: Story = {\n  render: () => (\n    <div className='max-w-2xl p-6 bg-gray-50 dark:bg-gray-900 rounded-lg'>\n      <div className='mb-6 text-center'>\n        <StatusBadge variant='green' icon={CheckIcon}>\n          The Solution\n        </StatusBadge>\n      </div>\n      <h2 className='text-3xl font-bold text-center mb-4'>\n        Built for musicians, optimized for conversion\n      </h2>\n      <p className='text-gray-600 dark:text-gray-300 text-center'>\n        Every element is designed to turn fans into streams. No distractions,\n        just results.\n      </p>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Textarea.tsx" },
        "span": [3309, 3420],
        "sourceCode": "import * as Headless from '@headlessui/react';\nimport { clsx } from 'clsx';\nimport React, { forwardRef } from 'react';\n\n// Legacy interface for backward compatibility\ninterface LegacyTextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {\n  label?: string;\n  error?: string;\n}\n\n// New interface for Catalyst UI Kit\ntype TextareaProps = {\n  className?: string;\n  resizable?: boolean;\n} & Omit<Headless.TextareaProps, 'as' | 'className'>;\n\nexport const Textarea = forwardRef(function Textarea(\n  {\n    className,\n    resizable = true,\n    label,\n    error,\n    ...props\n  }: TextareaProps & Partial<LegacyTextareaProps>,\n  ref: React.ForwardedRef<HTMLTextAreaElement>\n) {\n  const textareaElement = (\n    <span\n      data-slot='control'\n      className={clsx([\n        className,\n        // Basic layout\n        'relative block w-full',\n        // Background color + shadow applied to inset pseudo element, so shadow blends with border in light mode\n        'before:absolute before:inset-px before:rounded-[calc(var(--radius-lg)-1px)] before:bg-white before:shadow-xs',\n        // Background color is moved to control and shadow is removed in dark mode so hide `before` pseudo\n        'dark:before:hidden',\n        // Focus ring with glow effect\n        'after:pointer-events-none after:absolute after:inset-0 after:rounded-lg after:ring-transparent after:ring-inset sm:focus-within:after:ring-2 focus-within:after:ring-accent focus-within:shadow-lg focus-within:shadow-accent/20 after:transition-all after:duration-200',\n        // Disabled state\n        'has-data-disabled:opacity-50 has-data-disabled:before:bg-zinc-950/5 has-data-disabled:before:shadow-none',\n        // Error state for legacy support\n        error && 'has-data-invalid:before:shadow-red-500/10',\n      ])}\n    >\n      <Headless.Textarea\n        ref={ref}\n        {...props}\n        className={clsx([\n          // Basic layout\n          'relative block h-full w-full appearance-none rounded-lg px-[calc(--spacing(3.5)-1px)] py-[calc(--spacing(2.5)-1px)] sm:px-[calc(--spacing(3)-1px)] sm:py-[calc(--spacing(1.5)-1px)]',\n          // Typography\n          'text-base/6 text-zinc-950 placeholder:text-zinc-500 sm:text-sm/6 dark:text-white',\n          // Border\n          'border border-zinc-950/10 data-hover:border-zinc-950/20 dark:border-white/10 dark:data-hover:border-white/20',\n          // Background color\n          'bg-transparent dark:bg-white/5',\n          // Hide default focus styles\n          'focus-visible:outline-hidden',\n          // Invalid state\n          'data-invalid:border-red-500 data-invalid:data-hover:border-red-500 dark:data-invalid:border-red-600 dark:data-invalid:data-hover:border-red-600',\n          // Disabled state\n          'disabled:border-zinc-950/20 dark:disabled:border-white/15 dark:disabled:bg-white/2.5 dark:data-hover:disabled:border-white/15',\n          // Resizable\n          resizable ? 'resize-y' : 'resize-none',\n          // Error state for legacy support\n          error &&\n            'border-red-500 data-hover:border-red-500 dark:border-red-500 dark:data-hover:border-red-500',\n        ])}\n      />\n    </span>\n  );\n\n  // If we have label or error, wrap in a container\n  if (label || error) {\n    return (\n      <div className='space-y-2'>\n        {label && (\n          <label className='text-sm font-medium text-gray-700 dark:text-gray-300'>\n            {label}\n          </label>\n        )}\n        {textareaElement}\n        {error && (\n          <p className='text-sm text-red-600 dark:text-red-400'>{error}</p>\n        )}\n      </div>\n    );\n  }\n\n  return textareaElement;\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [10607, 10761],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [5586, 5770],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [5821, 5998],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [6047, 6229],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [6280, 6460],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [6573, 6836],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [6890, 7160],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [7280, 7692],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [7749, 7904],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [8384, 8541],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [8592, 8743],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [8792, 8949],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [9002, 9162],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [10191, 10341],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [10393, 10552],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.stories.tsx" },
        "span": [10830, 10986],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ToastProvider } from '@/components/providers/ToastProvider';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { Toast } from './Toast';\n\nconst meta: Meta<typeof Toast> = {\n  title: 'UI/Toast',\n  component: Toast,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\nToast notifications for user feedback. Use the useNotifications hook for easier integration.\n\n## Keyboard Accessibility\n\nAction buttons in toasts support full keyboard accessibility with visible focus states. This ensures keyboard-only users can easily identify and interact with toast actions.\n\n### Focus State Behavior:\n- **Focus Ring**: When tabbing to an action button, a colored focus ring appears matching the toast type's accent color.\n- **Underline**: Focused action buttons display an underline for additional visual indication.\n- **focus-visible**: Uses the \\`focus-visible\\` pseudo-class to only show focus indicators for keyboard navigation (not mouse clicks).\n\n### Testing Focus States in Storybook:\n1. Navigate to a toast story with an action button (e.g., \"With Action\")\n2. Press **Tab** to move focus to the action button\n3. The focus ring and underline will appear\n4. Each toast type (info, success, warning, error) has a matching accent color for its focus ring\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n  decorators: [\n    Story => (\n      <ToastProvider>\n        <div className='min-h-[200px] flex items-center justify-center'>\n          <Story />\n        </div>\n      </ToastProvider>\n    ),\n  ],\n  argTypes: {\n    type: {\n      control: { type: 'select' },\n      options: ['info', 'success', 'warning', 'error'],\n      description: 'Visual style of the toast',\n    },\n    duration: {\n      control: { type: 'number' },\n      description:\n        'Auto-dismiss duration in milliseconds (0 = no auto-dismiss)',\n    },\n    message: {\n      control: { type: 'text' },\n      description: 'Toast message content',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic toast examples\nexport const Info: Story = {\n  args: {\n    id: 'info-toast',\n    message: 'This is an info message',\n    type: 'info',\n    duration: 5000,\n  },\n};\n\nexport const Success: Story = {\n  args: {\n    id: 'success-toast',\n    message: 'Operation completed successfully!',\n    type: 'success',\n    duration: 4000,\n  },\n};\n\nexport const Warning: Story = {\n  args: {\n    id: 'warning-toast',\n    message: 'Please review your changes before continuing',\n    type: 'warning',\n    duration: 5000,\n  },\n};\n\nexport const Error: Story = {\n  args: {\n    id: 'error-toast',\n    message: 'Something went wrong. Please try again.',\n    type: 'error',\n    duration: 6000,\n  },\n};\n\n// Toast with action button\n/**\n * Toast with an action button. Press Tab to see the focus ring appear on the action button.\n * The focus state includes a colored ring and underline matching the toast type's accent color.\n */\nexport const WithAction: Story = {\n  args: {\n    id: 'action-toast',\n    message: 'File uploaded successfully',\n    type: 'success',\n    duration: 0, // No auto-dismiss to allow focus testing\n    action: {\n      label: 'View File',\n      onClick: () => console.log('View file clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Toast with action button. Press **Tab** to focus the action button and see the focus ring. The `duration: 0` prevents auto-dismiss for easier testing.',\n      },\n    },\n  },\n};\n\n// Demonstrating focus states for all toast types with action buttons\n/**\n * Info toast with action button. Focus ring uses sky/cyan accent colors.\n */\nexport const InfoWithAction: Story = {\n  args: {\n    id: 'info-action-toast',\n    message: 'New updates are available',\n    type: 'info',\n    duration: 0,\n    action: {\n      label: 'Update Now',\n      onClick: () => console.log('Update clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Info toast with action button. Tab to focus and see the **sky-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Warning toast with action button. Focus ring uses amber/orange accent colors.\n */\nexport const WarningWithAction: Story = {\n  args: {\n    id: 'warning-action-toast',\n    message: 'Your session will expire soon',\n    type: 'warning',\n    duration: 0,\n    action: {\n      label: 'Extend Session',\n      onClick: () => console.log('Extend clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Warning toast with action button. Tab to focus and see the **amber-colored** focus ring.',\n      },\n    },\n  },\n};\n\n/**\n * Error toast with action button. Focus ring uses rose/red accent colors.\n */\nexport const ErrorWithAction: Story = {\n  args: {\n    id: 'error-action-toast',\n    message: 'Failed to save changes',\n    type: 'error',\n    duration: 0,\n    action: {\n      label: 'Retry',\n      onClick: () => console.log('Retry clicked'),\n    },\n  },\n  parameters: {\n    docs: {\n      description: {\n        story:\n          'Error toast with action button. Tab to focus and see the **rose-colored** focus ring.',\n      },\n    },\n  },\n};\n\n// Interactive examples using the notifications hook\nconst InteractiveExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Interactive Toast Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.success('Success! Operation completed.')}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Show Success\n        </button>\n\n        <button\n          onClick={() => notifications.error('Error! Something went wrong.')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Show Error\n        </button>\n\n        <button\n          onClick={() => notifications.warning('Warning! Please be careful.')}\n          className='px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700'\n        >\n          Show Warning\n        </button>\n\n        <button\n          onClick={() => notifications.info(\"Info: Here's some information.\")}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Show Info\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() =>\n            notifications.undo('Item deleted', () => {\n              notifications.success('Item restored!');\n            })\n          }\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Show Undo Toast\n        </button>\n\n        <button\n          onClick={() =>\n            notifications.retry('Upload failed', () => {\n              notifications.info('Retrying upload...');\n            })\n          }\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Show Retry Toast\n        </button>\n      </div>\n\n      <div className='grid grid-cols-2 gap-4 mt-4'>\n        <button\n          onClick={() => {\n            const promise = new Promise(resolve => {\n              setTimeout(resolve, 2000);\n            });\n\n            notifications.withLoadingToast(promise, {\n              loadingMessage: 'Processing...',\n              successMessage: 'Done!',\n            });\n          }}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Show Loading Toast\n        </button>\n\n        <button\n          onClick={() => notifications.clearToasts()}\n          className='px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900'\n        >\n          Clear All Toasts\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const Interactive: Story = {\n  render: () => <InteractiveExample />,\n};\n\n// Predefined message examples\nconst PredefinedExample = () => {\n  const notifications = useNotifications();\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>\n        Predefined Message Examples\n      </h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => notifications.saveSuccess()}\n          className='px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700'\n        >\n          Save Success\n        </button>\n\n        <button\n          onClick={() => notifications.saveError()}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Save Error\n        </button>\n\n        <button\n          onClick={() => notifications.uploadSuccess()}\n          className='px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'\n        >\n          Upload Success\n        </button>\n\n        <button\n          onClick={() => notifications.networkError()}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Network Error\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const PredefinedMessages: Story = {\n  render: () => <PredefinedExample />,\n};\n\n// Error handling example\nconst ErrorHandlingExample = () => {\n  const notifications = useNotifications();\n\n  const simulateError = (errorType: string) => {\n    let error: Error;\n\n    switch (errorType) {\n      case 'network':\n        error = globalThis.Error('fetch failed');\n        break;\n      case 'validation':\n        error = globalThis.Error('Invalid email address');\n        break;\n      case 'technical':\n        error = globalThis.Error(\n          'TypeError: Cannot read property of undefined'\n        );\n        break;\n      default:\n        error = globalThis.Error('Something went wrong');\n    }\n\n    notifications.handleError(error, 'Operation failed');\n  };\n\n  return (\n    <div className='flex flex-col gap-4 p-6'>\n      <h3 className='text-lg font-semibold mb-4'>Error Handling Examples</h3>\n\n      <div className='grid grid-cols-2 gap-4'>\n        <button\n          onClick={() => simulateError('network')}\n          className='px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700'\n        >\n          Network Error\n        </button>\n\n        <button\n          onClick={() => simulateError('validation')}\n          className='px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700'\n        >\n          Validation Error\n        </button>\n\n        <button\n          onClick={() => simulateError('technical')}\n          className='px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700'\n        >\n          Technical Error (Console Only)\n        </button>\n\n        <button\n          onClick={() => simulateError('generic')}\n          className='px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700'\n        >\n          Generic Error\n        </button>\n      </div>\n\n      <p className='text-sm text-gray-600 dark:text-gray-400 mt-4'>\n        Technical errors are logged to console but not shown to users. Check the\n        browser console when clicking &quot;Technical Error&quot;.\n      </p>\n    </div>\n  );\n};\n\nexport const ErrorHandling: Story = {\n  render: () => <ErrorHandlingExample />,\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.tsx" },
        "span": [2643, 2656],
        "sourceCode": "'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport type ToastType = 'info' | 'success' | 'warning' | 'error';\n\nexport interface ToastProps {\n  id: string;\n  message: string;\n  type?: ToastType;\n  duration?: number;\n  onClose?: () => void;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n  className?: string;\n}\n\nconst baseToastClasses =\n  'relative w-full max-w-sm rounded-2xl border px-5 py-3 shadow-[0_18px_45px_rgba(15,15,25,0.45)] backdrop-blur-[18px] transition-all duration-300';\n\nconst typeTextColors = {\n  info: 'text-slate-900 dark:text-white',\n  success: 'text-slate-900 dark:text-white',\n  warning: 'text-slate-900 dark:text-white',\n  error: 'text-slate-900 dark:text-white',\n};\n\nconst accentStyles = {\n  info: 'from-sky-400 via-white/0 to-cyan-400',\n  success: 'from-emerald-400 via-white/0 to-lime-400',\n  warning: 'from-amber-400 via-white/0 to-orange-500',\n  error: 'from-rose-500 via-white/0 to-red-500',\n};\n\nconst actionStyles = {\n  info: 'text-sky-600 hover:text-sky-500 dark:text-sky-300 dark:hover:text-sky-200 rounded focus-visible:outline-none focus-visible:underline focus-visible:ring-2 focus-visible:ring-sky-500/50 dark:focus-visible:ring-sky-400/50',\n  success:\n    'text-emerald-600 hover:text-emerald-500 dark:text-emerald-300 dark:hover:text-emerald-200 rounded focus-visible:outline-none focus-visible:underline focus-visible:ring-2 focus-visible:ring-emerald-500/50 dark:focus-visible:ring-emerald-400/50',\n  warning:\n    'text-amber-700 hover:text-amber-600 dark:text-amber-200 dark:hover:text-amber-100 rounded focus-visible:outline-none focus-visible:underline focus-visible:ring-2 focus-visible:ring-amber-500/50 dark:focus-visible:ring-amber-400/50',\n  error:\n    'text-rose-600 hover:text-rose-500 dark:text-rose-300 dark:hover:text-rose-200 rounded focus-visible:outline-none focus-visible:underline focus-visible:ring-2 focus-visible:ring-rose-500/50 dark:focus-visible:ring-rose-400/50',\n};\n\nexport const Toast: React.FC<ToastProps> = ({\n  message,\n  type = 'info',\n  duration = 5000,\n  onClose,\n  action,\n  className,\n}) => {\n  const [isVisible, setIsVisible] = useState(true);\n\n  useEffect(() => {\n    if (!duration) return;\n\n    const timer = setTimeout(() => {\n      setIsVisible(false);\n      setTimeout(() => {\n        onClose?.();\n      }, 300); // Allow time for exit animation\n    }, duration);\n\n    return () => clearTimeout(timer);\n  }, [duration, onClose]);\n\n  const handleActionClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    action?.onClick();\n  };\n\n  return (\n    <div\n      role='status'\n      aria-live={type === 'error' ? 'assertive' : 'polite'}\n      aria-label={`${type} toast`}\n      data-testid='toast'\n      className={cn(\n        baseToastClasses,\n        typeTextColors[type],\n        'border-white/60 bg-white/70 dark:border-white/10 dark:bg-[#020617]/70',\n        isVisible\n          ? 'animate-in slide-in-from-bottom-2'\n          : 'animate-out slide-out-to-bottom-2',\n        className\n      )}\n    >\n      <span\n        className={cn(\n          'pointer-events-none absolute inset-y-3 left-4 w-1.5 rounded-full bg-gradient-to-b blur-sm',\n          accentStyles[type]\n        )}\n      />\n      <span className='text-sm'>{message}</span>\n      {action && (\n        <button\n          onClick={handleActionClick}\n          className={cn('text-sm font-semibold', actionStyles[type])}\n        >\n          {action.label}\n        </button>\n      )}\n    </div>\n  );\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/Toast.tsx" },
        "span": [3347, 3472],
        "sourceCode": "'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport type ToastType = 'info' | 'success' | 'warning' | 'error';\n\nexport interface ToastProps {\n  id: string;\n  message: string;\n  type?: ToastType;\n  duration?: number;\n  onClose?: () => void;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n  className?: string;\n}\n\nconst baseToastClasses =\n  'relative w-full max-w-sm rounded-2xl border px-5 py-3 shadow-[0_18px_45px_rgba(15,15,25,0.45)] backdrop-blur-[18px] transition-all duration-300';\n\nconst typeTextColors = {\n  info: 'text-slate-900 dark:text-white',\n  success: 'text-slate-900 dark:text-white',\n  warning: 'text-slate-900 dark:text-white',\n  error: 'text-slate-900 dark:text-white',\n};\n\nconst accentStyles = {\n  info: 'from-sky-400 via-white/0 to-cyan-400',\n  success: 'from-emerald-400 via-white/0 to-lime-400',\n  warning: 'from-amber-400 via-white/0 to-orange-500',\n  error: 'from-rose-500 via-white/0 to-red-500',\n};\n\nconst actionStyles = {\n  info: 'text-sky-600 hover:text-sky-500 dark:text-sky-300 dark:hover:text-sky-200 rounded focus-visible:outline-none focus-visible:underline focus-visible:ring-2 focus-visible:ring-sky-500/50 dark:focus-visible:ring-sky-400/50',\n  success:\n    'text-emerald-600 hover:text-emerald-500 dark:text-emerald-300 dark:hover:text-emerald-200 rounded focus-visible:outline-none focus-visible:underline focus-visible:ring-2 focus-visible:ring-emerald-500/50 dark:focus-visible:ring-emerald-400/50',\n  warning:\n    'text-amber-700 hover:text-amber-600 dark:text-amber-200 dark:hover:text-amber-100 rounded focus-visible:outline-none focus-visible:underline focus-visible:ring-2 focus-visible:ring-amber-500/50 dark:focus-visible:ring-amber-400/50',\n  error:\n    'text-rose-600 hover:text-rose-500 dark:text-rose-300 dark:hover:text-rose-200 rounded focus-visible:outline-none focus-visible:underline focus-visible:ring-2 focus-visible:ring-rose-500/50 dark:focus-visible:ring-rose-400/50',\n};\n\nexport const Toast: React.FC<ToastProps> = ({\n  message,\n  type = 'info',\n  duration = 5000,\n  onClose,\n  action,\n  className,\n}) => {\n  const [isVisible, setIsVisible] = useState(true);\n\n  useEffect(() => {\n    if (!duration) return;\n\n    const timer = setTimeout(() => {\n      setIsVisible(false);\n      setTimeout(() => {\n        onClose?.();\n      }, 300); // Allow time for exit animation\n    }, duration);\n\n    return () => clearTimeout(timer);\n  }, [duration, onClose]);\n\n  const handleActionClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    action?.onClick();\n  };\n\n  return (\n    <div\n      role='status'\n      aria-live={type === 'error' ? 'assertive' : 'polite'}\n      aria-label={`${type} toast`}\n      data-testid='toast'\n      className={cn(\n        baseToastClasses,\n        typeTextColors[type],\n        'border-white/60 bg-white/70 dark:border-white/10 dark:bg-[#020617]/70',\n        isVisible\n          ? 'animate-in slide-in-from-bottom-2'\n          : 'animate-out slide-out-to-bottom-2',\n        className\n      )}\n    >\n      <span\n        className={cn(\n          'pointer-events-none absolute inset-y-3 left-4 w-1.5 rounded-full bg-gradient-to-b blur-sm',\n          accentStyles[type]\n        )}\n      />\n      <span className='text-sm'>{message}</span>\n      {action && (\n        <button\n          onClick={handleActionClick}\n          className={cn('text-sm font-semibold', actionStyles[type])}\n        >\n          {action.label}\n        </button>\n      )}\n    </div>\n  );\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/atoms/VerifiedBadge.tsx" },
        "span": [380, 545],
        "sourceCode": "import { CheckBadgeIcon } from '@heroicons/react/24/solid';\n\ninterface VerifiedBadgeProps {\n  size?: 'sm' | 'md' | 'lg';\n  className?: string;\n}\n\nexport function VerifiedBadge({\n  size = 'md',\n  className = '',\n}: VerifiedBadgeProps) {\n  const sizeClasses: Record<typeof size, string> = {\n    sm: 'h-3.5 w-3.5',\n    md: 'h-4 w-4',\n    lg: 'h-5 w-5',\n  } as const;\n\n  return (\n    <span\n      className={`inline-flex align-middle text-sky-600 dark:text-sky-400 ${className}`}\n      title='Verified artist'\n      aria-label='Verified artist'\n    >\n      <CheckBadgeIcon\n        className={`${sizeClasses[size]} translate-y-[1px]`}\n        aria-hidden='true'\n      />\n    </span>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/AuthFormContainer.stories.tsx" },
        "span": [451, 503],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { AuthFormContainer } from './AuthFormContainer';\n\nconst meta: Meta<typeof AuthFormContainer> = {\n  title: 'Auth/AuthFormContainer',\n  component: AuthFormContainer,\n  parameters: {\n    layout: 'fullscreen',\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof AuthFormContainer>;\n\nconst SampleForm = () => (\n  <div className='space-y-4'>\n    <div className='space-y-2'>\n      <label className='text-sm font-medium'>Email</label>\n      <input\n        type='email'\n        placeholder='you@example.com'\n        className='w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800'\n      />\n    </div>\n    <div className='space-y-2'>\n      <label className='text-sm font-medium'>Password</label>\n      <input\n        type='password'\n        placeholder='••••••••'\n        className='w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800'\n      />\n    </div>\n    <button className='w-full py-2 bg-black text-white dark:bg-white dark:text-black rounded-md font-medium'>\n      Sign In\n    </button>\n  </div>\n);\n\nexport const SignIn: Story = {\n  args: {\n    title: 'Sign In',\n    children: <SampleForm />,\n  },\n  decorators: [\n    Story => (\n      <div className='min-h-screen bg-white dark:bg-gray-900'>\n        <Story />\n      </div>\n    ),\n  ],\n};\n\nexport const SignUp: Story = {\n  args: {\n    title: 'Create Account',\n    children: <SampleForm />,\n  },\n  decorators: [\n    Story => (\n      <div className='min-h-screen bg-white dark:bg-gray-900'>\n        <Story />\n      </div>\n    ),\n  ],\n};\n\nexport const WithBranding: Story = {\n  render: () => (\n    <div className='flex min-h-screen'>\n      <div className='hidden lg:flex lg:flex-1 lg:flex-col lg:justify-center lg:px-12 xl:px-16 bg-linear-to-br from-blue-600 via-purple-600 to-cyan-600'>\n        <div className='text-center text-white'>\n          <h1 className='text-3xl font-bold mb-4'>Welcome to Jovie</h1>\n          <p className='text-blue-100'>Create your artist profile today.</p>\n        </div>\n      </div>\n      <AuthFormContainer title='Sign In'>\n        <SampleForm />\n      </AuthFormContainer>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/AuthFormContainer.stories.tsx" },
        "span": [752, 807],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { AuthFormContainer } from './AuthFormContainer';\n\nconst meta: Meta<typeof AuthFormContainer> = {\n  title: 'Auth/AuthFormContainer',\n  component: AuthFormContainer,\n  parameters: {\n    layout: 'fullscreen',\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof AuthFormContainer>;\n\nconst SampleForm = () => (\n  <div className='space-y-4'>\n    <div className='space-y-2'>\n      <label className='text-sm font-medium'>Email</label>\n      <input\n        type='email'\n        placeholder='you@example.com'\n        className='w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800'\n      />\n    </div>\n    <div className='space-y-2'>\n      <label className='text-sm font-medium'>Password</label>\n      <input\n        type='password'\n        placeholder='••••••••'\n        className='w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800'\n      />\n    </div>\n    <button className='w-full py-2 bg-black text-white dark:bg-white dark:text-black rounded-md font-medium'>\n      Sign In\n    </button>\n  </div>\n);\n\nexport const SignIn: Story = {\n  args: {\n    title: 'Sign In',\n    children: <SampleForm />,\n  },\n  decorators: [\n    Story => (\n      <div className='min-h-screen bg-white dark:bg-gray-900'>\n        <Story />\n      </div>\n    ),\n  ],\n};\n\nexport const SignUp: Story = {\n  args: {\n    title: 'Create Account',\n    children: <SampleForm />,\n  },\n  decorators: [\n    Story => (\n      <div className='min-h-screen bg-white dark:bg-gray-900'>\n        <Story />\n      </div>\n    ),\n  ],\n};\n\nexport const WithBranding: Story = {\n  render: () => (\n    <div className='flex min-h-screen'>\n      <div className='hidden lg:flex lg:flex-1 lg:flex-col lg:justify-center lg:px-12 xl:px-16 bg-linear-to-br from-blue-600 via-purple-600 to-cyan-600'>\n        <div className='text-center text-white'>\n          <h1 className='text-3xl font-bold mb-4'>Welcome to Jovie</h1>\n          <p className='text-blue-100'>Create your artist profile today.</p>\n        </div>\n      </div>\n      <AuthFormContainer title='Sign In'>\n        <SampleForm />\n      </AuthFormContainer>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/AuthFormContainer.stories.tsx" },
        "span": [1034, 1139],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { AuthFormContainer } from './AuthFormContainer';\n\nconst meta: Meta<typeof AuthFormContainer> = {\n  title: 'Auth/AuthFormContainer',\n  component: AuthFormContainer,\n  parameters: {\n    layout: 'fullscreen',\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof AuthFormContainer>;\n\nconst SampleForm = () => (\n  <div className='space-y-4'>\n    <div className='space-y-2'>\n      <label className='text-sm font-medium'>Email</label>\n      <input\n        type='email'\n        placeholder='you@example.com'\n        className='w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800'\n      />\n    </div>\n    <div className='space-y-2'>\n      <label className='text-sm font-medium'>Password</label>\n      <input\n        type='password'\n        placeholder='••••••••'\n        className='w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800'\n      />\n    </div>\n    <button className='w-full py-2 bg-black text-white dark:bg-white dark:text-black rounded-md font-medium'>\n      Sign In\n    </button>\n  </div>\n);\n\nexport const SignIn: Story = {\n  args: {\n    title: 'Sign In',\n    children: <SampleForm />,\n  },\n  decorators: [\n    Story => (\n      <div className='min-h-screen bg-white dark:bg-gray-900'>\n        <Story />\n      </div>\n    ),\n  ],\n};\n\nexport const SignUp: Story = {\n  args: {\n    title: 'Create Account',\n    children: <SampleForm />,\n  },\n  decorators: [\n    Story => (\n      <div className='min-h-screen bg-white dark:bg-gray-900'>\n        <Story />\n      </div>\n    ),\n  ],\n};\n\nexport const WithBranding: Story = {\n  render: () => (\n    <div className='flex min-h-screen'>\n      <div className='hidden lg:flex lg:flex-1 lg:flex-col lg:justify-center lg:px-12 xl:px-16 bg-linear-to-br from-blue-600 via-purple-600 to-cyan-600'>\n        <div className='text-center text-white'>\n          <h1 className='text-3xl font-bold mb-4'>Welcome to Jovie</h1>\n          <p className='text-blue-100'>Create your artist profile today.</p>\n        </div>\n      </div>\n      <AuthFormContainer title='Sign In'>\n        <SampleForm />\n      </AuthFormContainer>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/AuthLayout.stories.tsx" },
        "span": [409, 472],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { AuthLayout } from './AuthLayout';\n\nconst meta: Meta<typeof AuthLayout> = {\n  title: 'Auth/AuthLayout',\n  component: AuthLayout,\n  parameters: {\n    layout: 'fullscreen',\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof AuthLayout>;\n\nconst SampleForm = () => (\n  <div className='space-y-4'>\n    <div className='space-y-2'>\n      <label className='text-sm font-medium text-white'>Email</label>\n      <input\n        type='email'\n        placeholder='you@example.com'\n        className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n      />\n    </div>\n    <button className='w-full py-2 bg-white text-black rounded-md font-medium'>\n      Continue\n    </button>\n  </div>\n);\n\nexport const SignIn: Story = {\n  args: {\n    formTitle: 'Sign in to Jovie',\n    footerPrompt: \"Don't have access?\",\n    footerLinkText: 'Join the waitlist',\n    footerLinkHref: '/waitlist',\n    children: <SampleForm />,\n  },\n};\n\nexport const SignUp: Story = {\n  args: {\n    formTitle: 'Create your account',\n    footerPrompt: 'Already have an account?',\n    footerLinkText: 'Sign in',\n    footerLinkHref: '/signin',\n    children: <SampleForm />,\n  },\n};\n\nexport const Waitlist: Story = {\n  args: {\n    formTitle: 'Join the Waitlist',\n    footerPrompt: 'Already have access?',\n    footerLinkText: 'Sign in',\n    footerLinkHref: '/signin',\n    children: (\n      <div className='space-y-4'>\n        <div className='space-y-2'>\n          <label className='text-sm font-medium text-white'>Email</label>\n          <input\n            type='email'\n            placeholder='you@example.com'\n            className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n          />\n        </div>\n        <div className='space-y-2'>\n          <label className='text-sm font-medium text-white'>\n            Desired Handle\n          </label>\n          <input\n            type='text'\n            placeholder='@yourhandle'\n            className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n          />\n        </div>\n        <button className='w-full py-2 bg-white text-black rounded-md font-medium'>\n          Join Waitlist\n        </button>\n      </div>\n    ),\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/AuthLayout.stories.tsx" },
        "span": [1515, 1578],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { AuthLayout } from './AuthLayout';\n\nconst meta: Meta<typeof AuthLayout> = {\n  title: 'Auth/AuthLayout',\n  component: AuthLayout,\n  parameters: {\n    layout: 'fullscreen',\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof AuthLayout>;\n\nconst SampleForm = () => (\n  <div className='space-y-4'>\n    <div className='space-y-2'>\n      <label className='text-sm font-medium text-white'>Email</label>\n      <input\n        type='email'\n        placeholder='you@example.com'\n        className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n      />\n    </div>\n    <button className='w-full py-2 bg-white text-black rounded-md font-medium'>\n      Continue\n    </button>\n  </div>\n);\n\nexport const SignIn: Story = {\n  args: {\n    formTitle: 'Sign in to Jovie',\n    footerPrompt: \"Don't have access?\",\n    footerLinkText: 'Join the waitlist',\n    footerLinkHref: '/waitlist',\n    children: <SampleForm />,\n  },\n};\n\nexport const SignUp: Story = {\n  args: {\n    formTitle: 'Create your account',\n    footerPrompt: 'Already have an account?',\n    footerLinkText: 'Sign in',\n    footerLinkHref: '/signin',\n    children: <SampleForm />,\n  },\n};\n\nexport const Waitlist: Story = {\n  args: {\n    formTitle: 'Join the Waitlist',\n    footerPrompt: 'Already have access?',\n    footerLinkText: 'Sign in',\n    footerLinkHref: '/signin',\n    children: (\n      <div className='space-y-4'>\n        <div className='space-y-2'>\n          <label className='text-sm font-medium text-white'>Email</label>\n          <input\n            type='email'\n            placeholder='you@example.com'\n            className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n          />\n        </div>\n        <div className='space-y-2'>\n          <label className='text-sm font-medium text-white'>\n            Desired Handle\n          </label>\n          <input\n            type='text'\n            placeholder='@yourhandle'\n            className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n          />\n        </div>\n        <button className='w-full py-2 bg-white text-black rounded-md font-medium'>\n          Join Waitlist\n        </button>\n      </div>\n    ),\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/AuthLayout.stories.tsx" },
        "span": [1835, 1931],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { AuthLayout } from './AuthLayout';\n\nconst meta: Meta<typeof AuthLayout> = {\n  title: 'Auth/AuthLayout',\n  component: AuthLayout,\n  parameters: {\n    layout: 'fullscreen',\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof AuthLayout>;\n\nconst SampleForm = () => (\n  <div className='space-y-4'>\n    <div className='space-y-2'>\n      <label className='text-sm font-medium text-white'>Email</label>\n      <input\n        type='email'\n        placeholder='you@example.com'\n        className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n      />\n    </div>\n    <button className='w-full py-2 bg-white text-black rounded-md font-medium'>\n      Continue\n    </button>\n  </div>\n);\n\nexport const SignIn: Story = {\n  args: {\n    formTitle: 'Sign in to Jovie',\n    footerPrompt: \"Don't have access?\",\n    footerLinkText: 'Join the waitlist',\n    footerLinkHref: '/waitlist',\n    children: <SampleForm />,\n  },\n};\n\nexport const SignUp: Story = {\n  args: {\n    formTitle: 'Create your account',\n    footerPrompt: 'Already have an account?',\n    footerLinkText: 'Sign in',\n    footerLinkHref: '/signin',\n    children: <SampleForm />,\n  },\n};\n\nexport const Waitlist: Story = {\n  args: {\n    formTitle: 'Join the Waitlist',\n    footerPrompt: 'Already have access?',\n    footerLinkText: 'Sign in',\n    footerLinkHref: '/signin',\n    children: (\n      <div className='space-y-4'>\n        <div className='space-y-2'>\n          <label className='text-sm font-medium text-white'>Email</label>\n          <input\n            type='email'\n            placeholder='you@example.com'\n            className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n          />\n        </div>\n        <div className='space-y-2'>\n          <label className='text-sm font-medium text-white'>\n            Desired Handle\n          </label>\n          <input\n            type='text'\n            placeholder='@yourhandle'\n            className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n          />\n        </div>\n        <button className='w-full py-2 bg-white text-black rounded-md font-medium'>\n          Join Waitlist\n        </button>\n      </div>\n    ),\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/AuthLayout.stories.tsx" },
        "span": [663, 738],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { AuthLayout } from './AuthLayout';\n\nconst meta: Meta<typeof AuthLayout> = {\n  title: 'Auth/AuthLayout',\n  component: AuthLayout,\n  parameters: {\n    layout: 'fullscreen',\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof AuthLayout>;\n\nconst SampleForm = () => (\n  <div className='space-y-4'>\n    <div className='space-y-2'>\n      <label className='text-sm font-medium text-white'>Email</label>\n      <input\n        type='email'\n        placeholder='you@example.com'\n        className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n      />\n    </div>\n    <button className='w-full py-2 bg-white text-black rounded-md font-medium'>\n      Continue\n    </button>\n  </div>\n);\n\nexport const SignIn: Story = {\n  args: {\n    formTitle: 'Sign in to Jovie',\n    footerPrompt: \"Don't have access?\",\n    footerLinkText: 'Join the waitlist',\n    footerLinkHref: '/waitlist',\n    children: <SampleForm />,\n  },\n};\n\nexport const SignUp: Story = {\n  args: {\n    formTitle: 'Create your account',\n    footerPrompt: 'Already have an account?',\n    footerLinkText: 'Sign in',\n    footerLinkHref: '/signin',\n    children: <SampleForm />,\n  },\n};\n\nexport const Waitlist: Story = {\n  args: {\n    formTitle: 'Join the Waitlist',\n    footerPrompt: 'Already have access?',\n    footerLinkText: 'Sign in',\n    footerLinkHref: '/signin',\n    children: (\n      <div className='space-y-4'>\n        <div className='space-y-2'>\n          <label className='text-sm font-medium text-white'>Email</label>\n          <input\n            type='email'\n            placeholder='you@example.com'\n            className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n          />\n        </div>\n        <div className='space-y-2'>\n          <label className='text-sm font-medium text-white'>\n            Desired Handle\n          </label>\n          <input\n            type='text'\n            placeholder='@yourhandle'\n            className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n          />\n        </div>\n        <button className='w-full py-2 bg-white text-black rounded-md font-medium'>\n          Join Waitlist\n        </button>\n      </div>\n    ),\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/AuthLayout.stories.tsx" },
        "span": [2145, 2220],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { AuthLayout } from './AuthLayout';\n\nconst meta: Meta<typeof AuthLayout> = {\n  title: 'Auth/AuthLayout',\n  component: AuthLayout,\n  parameters: {\n    layout: 'fullscreen',\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof AuthLayout>;\n\nconst SampleForm = () => (\n  <div className='space-y-4'>\n    <div className='space-y-2'>\n      <label className='text-sm font-medium text-white'>Email</label>\n      <input\n        type='email'\n        placeholder='you@example.com'\n        className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n      />\n    </div>\n    <button className='w-full py-2 bg-white text-black rounded-md font-medium'>\n      Continue\n    </button>\n  </div>\n);\n\nexport const SignIn: Story = {\n  args: {\n    formTitle: 'Sign in to Jovie',\n    footerPrompt: \"Don't have access?\",\n    footerLinkText: 'Join the waitlist',\n    footerLinkHref: '/waitlist',\n    children: <SampleForm />,\n  },\n};\n\nexport const SignUp: Story = {\n  args: {\n    formTitle: 'Create your account',\n    footerPrompt: 'Already have an account?',\n    footerLinkText: 'Sign in',\n    footerLinkHref: '/signin',\n    children: <SampleForm />,\n  },\n};\n\nexport const Waitlist: Story = {\n  args: {\n    formTitle: 'Join the Waitlist',\n    footerPrompt: 'Already have access?',\n    footerLinkText: 'Sign in',\n    footerLinkHref: '/signin',\n    children: (\n      <div className='space-y-4'>\n        <div className='space-y-2'>\n          <label className='text-sm font-medium text-white'>Email</label>\n          <input\n            type='email'\n            placeholder='you@example.com'\n            className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n          />\n        </div>\n        <div className='space-y-2'>\n          <label className='text-sm font-medium text-white'>\n            Desired Handle\n          </label>\n          <input\n            type='text'\n            placeholder='@yourhandle'\n            className='w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white'\n          />\n        </div>\n        <button className='w-full py-2 bg-white text-black rounded-md font-medium'>\n          Join Waitlist\n        </button>\n      </div>\n    ),\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useHeadingContent",
      "severity": "warning",
      "description": "Provide screen reader accessible content when using heading  elements.",
      "message": [
        {
          "elements": [],
          "content": "Provide screen reader accessible content when using "
        },
        { "elements": ["Emphasis"], "content": "heading" },
        { "elements": [], "content": "  elements." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "All headings on a page should have content that is accessible to screen readers."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/AuthLayout.tsx" },
        "span": [7188, 7480],
        "sourceCode": "'use client';\n\nimport { SignOutButton } from '@clerk/nextjs';\nimport {\n  Button,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { MoreHorizontal } from 'lucide-react';\nimport Link from 'next/link';\nimport { type ReactNode, useEffect, useMemo, useRef, useState } from 'react';\nimport { BrandLogo } from '@/components/atoms/BrandLogo';\nimport { useMobileKeyboard } from '@/hooks/use-mobile-keyboard';\nimport { cn } from '@/lib/utils';\n\ninterface AuthLayoutProps {\n  children: ReactNode;\n  formTitle: string;\n  formTitleClassName?: string;\n  footerPrompt?: string;\n  footerLinkText?: string;\n  footerLinkHref?: string;\n  showFooterPrompt?: boolean;\n  showFormTitle?: boolean;\n  showLegalLinks?: boolean;\n  logoSpinDelayMs?: number;\n  showSkipLink?: boolean;\n  showLogo?: boolean;\n  showLogoutButton?: boolean;\n  logoutRedirectUrl?: string;\n}\n\nconst LINK_FOCUS_CLASSES =\n  'focus-ring-themed focus-visible:ring-offset-(--color-bg-base) rounded-md';\n\nexport function AuthLayout({\n  children,\n  formTitle,\n  formTitleClassName = 'text-[18px] leading-6 font-medium text-primary-token mb-4 text-center',\n  footerPrompt = \"Don't have access?\",\n  footerLinkText = 'Join the waitlist',\n  footerLinkHref = '/waitlist',\n  showFooterPrompt = true,\n  showFormTitle = true,\n  showLegalLinks = false,\n  logoSpinDelayMs,\n  showSkipLink = true,\n  showLogo = true,\n  showLogoutButton = false,\n  logoutRedirectUrl = '/signin',\n}: AuthLayoutProps) {\n  const [shouldSpinLogo, setShouldSpinLogo] = useState(false);\n  const { isKeyboardVisible } = useMobileKeyboard();\n  const formRef = useRef<HTMLDivElement>(null);\n\n  // Scroll form into view when keyboard appears on mobile\n  useEffect(() => {\n    if (isKeyboardVisible && formRef.current) {\n      // Slight delay to let keyboard fully appear\n      const timer = setTimeout(() => {\n        formRef.current?.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center',\n        });\n      }, 100);\n      return () => clearTimeout(timer);\n    }\n    return undefined;\n  }, [isKeyboardVisible]);\n\n  // One-time idle-triggered spin\n  useEffect(() => {\n    if (!logoSpinDelayMs) return undefined;\n\n    let hasSpun = false;\n    let timeoutId: ReturnType<typeof setTimeout> | null = null;\n\n    const triggerSpin = () => {\n      if (hasSpun) return;\n      hasSpun = true;\n      setShouldSpinLogo(true);\n    };\n\n    const resetTimer = () => {\n      if (hasSpun) return;\n      if (timeoutId) clearTimeout(timeoutId);\n      timeoutId = setTimeout(triggerSpin, logoSpinDelayMs);\n    };\n\n    resetTimer();\n\n    const events: Array<keyof DocumentEventMap> = [\n      'pointerdown',\n      'keydown',\n      'mousemove',\n      'touchstart',\n      'focus',\n    ];\n\n    events.forEach(event =>\n      window.addEventListener(event, resetTimer, { passive: true })\n    );\n\n    return () => {\n      if (timeoutId) clearTimeout(timeoutId);\n      events.forEach(event => window.removeEventListener(event, resetTimer));\n    };\n  }, [logoSpinDelayMs]);\n\n  const logoStyle = useMemo(\n    () =>\n      shouldSpinLogo\n        ? { animation: 'logo-spin 1.2s ease-in-out 0s 1 forwards' }\n        : undefined,\n    [shouldSpinLogo]\n  );\n\n  return (\n    <div\n      className={cn(\n        // Base layout - use dvh for mobile keyboard handling, fall back to vh\n        'min-h-[100dvh] supports-[height:100dvh]:min-h-[100dvh] flex flex-col items-center bg-base relative overflow-x-hidden',\n        // Horizontal padding with safe area support for notched devices\n        'px-4 sm:px-6',\n        // Vertical padding - reduced on mobile, increases on larger screens\n        // Use smaller top padding when keyboard is visible\n        isKeyboardVisible\n          ? 'pt-8 pb-4'\n          : 'pt-[12vh] sm:pt-[15vh] lg:pt-[19vh] pb-24',\n        // Safe area insets for notched devices (iPhone X+, Android with notches)\n        'pb-[max(1.5rem,env(safe-area-inset-bottom))]',\n        'pl-[max(1rem,env(safe-area-inset-left))]',\n        'pr-[max(1rem,env(safe-area-inset-right))]',\n        // Smooth transition when keyboard appears/disappears\n        'transition-[padding] duration-200 ease-out',\n        // Background gradients\n        \"before:content-[''] before:absolute before:inset-0 before:bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(120,119,198,0.12),transparent)] dark:before:bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(120,119,198,0.20),transparent)] before:pointer-events-none\",\n        \"after:content-[''] after:absolute after:inset-0 after:bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.03)_100%)] dark:after:bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.45)_100%)] after:pointer-events-none\"\n      )}\n    >\n      {/* Skip to main content link for keyboard users */}\n      {showSkipLink && (\n        <Link\n          href='#auth-form'\n          className='sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:rounded-md focus:bg-surface-0 focus:text-primary-token focus:border focus:border-subtle focus-ring-themed focus-visible:ring-offset-(--color-bg-base)'\n        >\n          Skip to form\n        </Link>\n      )}\n\n      {showLogoutButton ? (\n        <div className='absolute top-4 right-4 z-50'>\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                type='button'\n                size='icon'\n                variant='ghost'\n                className='h-9 w-9 rounded-full border border-subtle bg-transparent text-tertiary-token transition-colors hover:bg-surface-2 hover:text-primary-token focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-surface-1'\n              >\n                <MoreHorizontal className='h-4 w-4' />\n                <span className='sr-only'>Open menu</span>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align='end' sideOffset={8}>\n              <SignOutButton redirectUrl={logoutRedirectUrl}>\n                <DropdownMenuItem>Log out</DropdownMenuItem>\n              </SignOutButton>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      ) : null}\n\n      {/* Logo - hide on mobile when keyboard is visible */}\n      <div\n        className={cn(\n          'mb-4 h-11 w-11 flex items-center justify-center',\n          'transition-all duration-200 ease-out',\n          isKeyboardVisible && 'opacity-0 h-0 mb-0 pointer-events-none'\n        )}\n        aria-hidden={isKeyboardVisible}\n      >\n        {showLogo ? (\n          <Link\n            href='/'\n            className={`block ${LINK_FOCUS_CLASSES}`}\n            aria-label='Go to homepage'\n            tabIndex={isKeyboardVisible ? -1 : undefined}\n          >\n            <span\n              className={shouldSpinLogo ? 'logo-spin-trigger' : undefined}\n              style={logoStyle}\n            >\n              <BrandLogo size={44} tone='auto' priority />\n            </span>\n          </Link>\n        ) : (\n          <span aria-hidden='true' />\n        )}\n      </div>\n\n      {/* Title - hide when keyboard is visible on mobile */}\n      {showFormTitle && (\n        <h1\n          className={cn(\n            formTitleClassName,\n            'transition-all duration-200 ease-out',\n            isKeyboardVisible && 'opacity-0 h-0 mb-0 overflow-hidden'\n          )}\n          aria-hidden={isKeyboardVisible}\n        >\n          {formTitle}\n        </h1>\n      )}\n\n      {/* Form content - centered with mobile-optimized width */}\n      <main\n        ref={formRef}\n        id='auth-form'\n        className={cn(\n          'w-full max-w-[20rem] sm:max-w-[22rem] relative z-10',\n          // Ensure touch targets are easily reachable\n          '[&_input]:text-base [&_input]:sm:text-sm',\n          // Prevent iOS zoom on input focus (requires 16px font)\n          '[&_input]:min-h-[48px]',\n          // Smooth scroll target\n          'scroll-mt-4'\n        )}\n        role='main'\n      >\n        {children}\n      </main>\n\n      {/* Footer - hide when keyboard is visible */}\n      {showFooterPrompt && !isKeyboardVisible && (\n        <p className='mt-8 text-sm text-secondary-token text-center relative z-10 animate-in fade-in-0 duration-200'>\n          {footerPrompt}{' '}\n          <Link\n            href={footerLinkHref}\n            className={`text-primary-token hover:underline ${LINK_FOCUS_CLASSES}`}\n          >\n            {footerLinkText}\n          </Link>\n        </p>\n      )}\n\n      {/* Legal links - hide when keyboard is visible, with safe area support */}\n      {showLegalLinks && !isKeyboardVisible && (\n        <nav\n          className={cn(\n            'absolute flex gap-4 text-xs text-secondary-token',\n            // Position with safe area inset support\n            'bottom-[max(1rem,env(safe-area-inset-bottom))]',\n            'animate-in fade-in-0 duration-200'\n          )}\n          aria-label='Legal'\n        >\n          <Link\n            href='/legal/terms'\n            className={`hover:text-primary-token transition-colors no-underline ${LINK_FOCUS_CLASSES}`}\n          >\n            Terms\n          </Link>\n          <Link\n            href='/legal/privacy'\n            className={`hover:text-primary-token transition-colors no-underline ${LINK_FOCUS_CLASSES}`}\n          >\n            Privacy Policy\n          </Link>\n        </nav>\n      )}\n\n      {logoSpinDelayMs ? (\n        <style jsx>{`\n          @keyframes logo-spin {\n            from {\n              transform: rotate(0deg);\n            }\n            to {\n              transform: rotate(360deg);\n            }\n          }\n          .logo-spin-trigger {\n            display: inline-flex;\n          }\n        `}</style>\n      ) : null}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<main>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<main>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/AuthLayout.tsx" },
        "span": [7990, 8001],
        "sourceCode": "'use client';\n\nimport { SignOutButton } from '@clerk/nextjs';\nimport {\n  Button,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { MoreHorizontal } from 'lucide-react';\nimport Link from 'next/link';\nimport { type ReactNode, useEffect, useMemo, useRef, useState } from 'react';\nimport { BrandLogo } from '@/components/atoms/BrandLogo';\nimport { useMobileKeyboard } from '@/hooks/use-mobile-keyboard';\nimport { cn } from '@/lib/utils';\n\ninterface AuthLayoutProps {\n  children: ReactNode;\n  formTitle: string;\n  formTitleClassName?: string;\n  footerPrompt?: string;\n  footerLinkText?: string;\n  footerLinkHref?: string;\n  showFooterPrompt?: boolean;\n  showFormTitle?: boolean;\n  showLegalLinks?: boolean;\n  logoSpinDelayMs?: number;\n  showSkipLink?: boolean;\n  showLogo?: boolean;\n  showLogoutButton?: boolean;\n  logoutRedirectUrl?: string;\n}\n\nconst LINK_FOCUS_CLASSES =\n  'focus-ring-themed focus-visible:ring-offset-(--color-bg-base) rounded-md';\n\nexport function AuthLayout({\n  children,\n  formTitle,\n  formTitleClassName = 'text-[18px] leading-6 font-medium text-primary-token mb-4 text-center',\n  footerPrompt = \"Don't have access?\",\n  footerLinkText = 'Join the waitlist',\n  footerLinkHref = '/waitlist',\n  showFooterPrompt = true,\n  showFormTitle = true,\n  showLegalLinks = false,\n  logoSpinDelayMs,\n  showSkipLink = true,\n  showLogo = true,\n  showLogoutButton = false,\n  logoutRedirectUrl = '/signin',\n}: AuthLayoutProps) {\n  const [shouldSpinLogo, setShouldSpinLogo] = useState(false);\n  const { isKeyboardVisible } = useMobileKeyboard();\n  const formRef = useRef<HTMLDivElement>(null);\n\n  // Scroll form into view when keyboard appears on mobile\n  useEffect(() => {\n    if (isKeyboardVisible && formRef.current) {\n      // Slight delay to let keyboard fully appear\n      const timer = setTimeout(() => {\n        formRef.current?.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center',\n        });\n      }, 100);\n      return () => clearTimeout(timer);\n    }\n    return undefined;\n  }, [isKeyboardVisible]);\n\n  // One-time idle-triggered spin\n  useEffect(() => {\n    if (!logoSpinDelayMs) return undefined;\n\n    let hasSpun = false;\n    let timeoutId: ReturnType<typeof setTimeout> | null = null;\n\n    const triggerSpin = () => {\n      if (hasSpun) return;\n      hasSpun = true;\n      setShouldSpinLogo(true);\n    };\n\n    const resetTimer = () => {\n      if (hasSpun) return;\n      if (timeoutId) clearTimeout(timeoutId);\n      timeoutId = setTimeout(triggerSpin, logoSpinDelayMs);\n    };\n\n    resetTimer();\n\n    const events: Array<keyof DocumentEventMap> = [\n      'pointerdown',\n      'keydown',\n      'mousemove',\n      'touchstart',\n      'focus',\n    ];\n\n    events.forEach(event =>\n      window.addEventListener(event, resetTimer, { passive: true })\n    );\n\n    return () => {\n      if (timeoutId) clearTimeout(timeoutId);\n      events.forEach(event => window.removeEventListener(event, resetTimer));\n    };\n  }, [logoSpinDelayMs]);\n\n  const logoStyle = useMemo(\n    () =>\n      shouldSpinLogo\n        ? { animation: 'logo-spin 1.2s ease-in-out 0s 1 forwards' }\n        : undefined,\n    [shouldSpinLogo]\n  );\n\n  return (\n    <div\n      className={cn(\n        // Base layout - use dvh for mobile keyboard handling, fall back to vh\n        'min-h-[100dvh] supports-[height:100dvh]:min-h-[100dvh] flex flex-col items-center bg-base relative overflow-x-hidden',\n        // Horizontal padding with safe area support for notched devices\n        'px-4 sm:px-6',\n        // Vertical padding - reduced on mobile, increases on larger screens\n        // Use smaller top padding when keyboard is visible\n        isKeyboardVisible\n          ? 'pt-8 pb-4'\n          : 'pt-[12vh] sm:pt-[15vh] lg:pt-[19vh] pb-24',\n        // Safe area insets for notched devices (iPhone X+, Android with notches)\n        'pb-[max(1.5rem,env(safe-area-inset-bottom))]',\n        'pl-[max(1rem,env(safe-area-inset-left))]',\n        'pr-[max(1rem,env(safe-area-inset-right))]',\n        // Smooth transition when keyboard appears/disappears\n        'transition-[padding] duration-200 ease-out',\n        // Background gradients\n        \"before:content-[''] before:absolute before:inset-0 before:bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(120,119,198,0.12),transparent)] dark:before:bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(120,119,198,0.20),transparent)] before:pointer-events-none\",\n        \"after:content-[''] after:absolute after:inset-0 after:bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.03)_100%)] dark:after:bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.45)_100%)] after:pointer-events-none\"\n      )}\n    >\n      {/* Skip to main content link for keyboard users */}\n      {showSkipLink && (\n        <Link\n          href='#auth-form'\n          className='sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:rounded-md focus:bg-surface-0 focus:text-primary-token focus:border focus:border-subtle focus-ring-themed focus-visible:ring-offset-(--color-bg-base)'\n        >\n          Skip to form\n        </Link>\n      )}\n\n      {showLogoutButton ? (\n        <div className='absolute top-4 right-4 z-50'>\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                type='button'\n                size='icon'\n                variant='ghost'\n                className='h-9 w-9 rounded-full border border-subtle bg-transparent text-tertiary-token transition-colors hover:bg-surface-2 hover:text-primary-token focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-surface-1'\n              >\n                <MoreHorizontal className='h-4 w-4' />\n                <span className='sr-only'>Open menu</span>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align='end' sideOffset={8}>\n              <SignOutButton redirectUrl={logoutRedirectUrl}>\n                <DropdownMenuItem>Log out</DropdownMenuItem>\n              </SignOutButton>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      ) : null}\n\n      {/* Logo - hide on mobile when keyboard is visible */}\n      <div\n        className={cn(\n          'mb-4 h-11 w-11 flex items-center justify-center',\n          'transition-all duration-200 ease-out',\n          isKeyboardVisible && 'opacity-0 h-0 mb-0 pointer-events-none'\n        )}\n        aria-hidden={isKeyboardVisible}\n      >\n        {showLogo ? (\n          <Link\n            href='/'\n            className={`block ${LINK_FOCUS_CLASSES}`}\n            aria-label='Go to homepage'\n            tabIndex={isKeyboardVisible ? -1 : undefined}\n          >\n            <span\n              className={shouldSpinLogo ? 'logo-spin-trigger' : undefined}\n              style={logoStyle}\n            >\n              <BrandLogo size={44} tone='auto' priority />\n            </span>\n          </Link>\n        ) : (\n          <span aria-hidden='true' />\n        )}\n      </div>\n\n      {/* Title - hide when keyboard is visible on mobile */}\n      {showFormTitle && (\n        <h1\n          className={cn(\n            formTitleClassName,\n            'transition-all duration-200 ease-out',\n            isKeyboardVisible && 'opacity-0 h-0 mb-0 overflow-hidden'\n          )}\n          aria-hidden={isKeyboardVisible}\n        >\n          {formTitle}\n        </h1>\n      )}\n\n      {/* Form content - centered with mobile-optimized width */}\n      <main\n        ref={formRef}\n        id='auth-form'\n        className={cn(\n          'w-full max-w-[20rem] sm:max-w-[22rem] relative z-10',\n          // Ensure touch targets are easily reachable\n          '[&_input]:text-base [&_input]:sm:text-sm',\n          // Prevent iOS zoom on input focus (requires 16px font)\n          '[&_input]:min-h-[48px]',\n          // Smooth scroll target\n          'scroll-mt-4'\n        )}\n        role='main'\n      >\n        {children}\n      </main>\n\n      {/* Footer - hide when keyboard is visible */}\n      {showFooterPrompt && !isKeyboardVisible && (\n        <p className='mt-8 text-sm text-secondary-token text-center relative z-10 animate-in fade-in-0 duration-200'>\n          {footerPrompt}{' '}\n          <Link\n            href={footerLinkHref}\n            className={`text-primary-token hover:underline ${LINK_FOCUS_CLASSES}`}\n          >\n            {footerLinkText}\n          </Link>\n        </p>\n      )}\n\n      {/* Legal links - hide when keyboard is visible, with safe area support */}\n      {showLegalLinks && !isKeyboardVisible && (\n        <nav\n          className={cn(\n            'absolute flex gap-4 text-xs text-secondary-token',\n            // Position with safe area inset support\n            'bottom-[max(1rem,env(safe-area-inset-bottom))]',\n            'animate-in fade-in-0 duration-200'\n          )}\n          aria-label='Legal'\n        >\n          <Link\n            href='/legal/terms'\n            className={`hover:text-primary-token transition-colors no-underline ${LINK_FOCUS_CLASSES}`}\n          >\n            Terms\n          </Link>\n          <Link\n            href='/legal/privacy'\n            className={`hover:text-primary-token transition-colors no-underline ${LINK_FOCUS_CLASSES}`}\n          >\n            Privacy Policy\n          </Link>\n        </nav>\n      )}\n\n      {logoSpinDelayMs ? (\n        <style jsx>{`\n          @keyframes logo-spin {\n            from {\n              transform: rotate(0deg);\n            }\n            to {\n              transform: rotate(360deg);\n            }\n          }\n          .logo-spin-trigger {\n            display: inline-flex;\n          }\n        `}</style>\n      ) : null}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noRedundantRoles",
      "severity": "warning",
      "description": "Using the role attribute 'main' on the 'main' element is redundant, because it is implied by its semantic.",
      "message": [
        {
          "elements": [],
          "content": "Using the role attribute 'main' on the 'main' element is redundant, because it is implied by its semantic."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Unsafe fix: Remove the " },
                { "elements": ["Emphasis"], "content": "role" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "'use client';\n\nimport { SignOutButton } from '@clerk/nextjs';          // Smooth scroll target\n          'scroll-mt-4'\n        )}\n        role='main'\n      >\n        {children}  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 61] } } },
                { "equalLines": { "line_count": 224 } },
                { "diffOp": { "equal": { "range": [61, 129] } } },
                { "diffOp": { "delete": { "range": [129, 149] } } },
                { "diffOp": { "equal": { "range": [149, 176] } } },
                { "equalLines": { "line_count": 57 } },
                { "diffOp": { "equal": { "range": [176, 183] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/AuthLayout.tsx" },
        "span": [7995, 8001],
        "sourceCode": "'use client';\n\nimport { SignOutButton } from '@clerk/nextjs';\nimport {\n  Button,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { MoreHorizontal } from 'lucide-react';\nimport Link from 'next/link';\nimport { type ReactNode, useEffect, useMemo, useRef, useState } from 'react';\nimport { BrandLogo } from '@/components/atoms/BrandLogo';\nimport { useMobileKeyboard } from '@/hooks/use-mobile-keyboard';\nimport { cn } from '@/lib/utils';\n\ninterface AuthLayoutProps {\n  children: ReactNode;\n  formTitle: string;\n  formTitleClassName?: string;\n  footerPrompt?: string;\n  footerLinkText?: string;\n  footerLinkHref?: string;\n  showFooterPrompt?: boolean;\n  showFormTitle?: boolean;\n  showLegalLinks?: boolean;\n  logoSpinDelayMs?: number;\n  showSkipLink?: boolean;\n  showLogo?: boolean;\n  showLogoutButton?: boolean;\n  logoutRedirectUrl?: string;\n}\n\nconst LINK_FOCUS_CLASSES =\n  'focus-ring-themed focus-visible:ring-offset-(--color-bg-base) rounded-md';\n\nexport function AuthLayout({\n  children,\n  formTitle,\n  formTitleClassName = 'text-[18px] leading-6 font-medium text-primary-token mb-4 text-center',\n  footerPrompt = \"Don't have access?\",\n  footerLinkText = 'Join the waitlist',\n  footerLinkHref = '/waitlist',\n  showFooterPrompt = true,\n  showFormTitle = true,\n  showLegalLinks = false,\n  logoSpinDelayMs,\n  showSkipLink = true,\n  showLogo = true,\n  showLogoutButton = false,\n  logoutRedirectUrl = '/signin',\n}: AuthLayoutProps) {\n  const [shouldSpinLogo, setShouldSpinLogo] = useState(false);\n  const { isKeyboardVisible } = useMobileKeyboard();\n  const formRef = useRef<HTMLDivElement>(null);\n\n  // Scroll form into view when keyboard appears on mobile\n  useEffect(() => {\n    if (isKeyboardVisible && formRef.current) {\n      // Slight delay to let keyboard fully appear\n      const timer = setTimeout(() => {\n        formRef.current?.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center',\n        });\n      }, 100);\n      return () => clearTimeout(timer);\n    }\n    return undefined;\n  }, [isKeyboardVisible]);\n\n  // One-time idle-triggered spin\n  useEffect(() => {\n    if (!logoSpinDelayMs) return undefined;\n\n    let hasSpun = false;\n    let timeoutId: ReturnType<typeof setTimeout> | null = null;\n\n    const triggerSpin = () => {\n      if (hasSpun) return;\n      hasSpun = true;\n      setShouldSpinLogo(true);\n    };\n\n    const resetTimer = () => {\n      if (hasSpun) return;\n      if (timeoutId) clearTimeout(timeoutId);\n      timeoutId = setTimeout(triggerSpin, logoSpinDelayMs);\n    };\n\n    resetTimer();\n\n    const events: Array<keyof DocumentEventMap> = [\n      'pointerdown',\n      'keydown',\n      'mousemove',\n      'touchstart',\n      'focus',\n    ];\n\n    events.forEach(event =>\n      window.addEventListener(event, resetTimer, { passive: true })\n    );\n\n    return () => {\n      if (timeoutId) clearTimeout(timeoutId);\n      events.forEach(event => window.removeEventListener(event, resetTimer));\n    };\n  }, [logoSpinDelayMs]);\n\n  const logoStyle = useMemo(\n    () =>\n      shouldSpinLogo\n        ? { animation: 'logo-spin 1.2s ease-in-out 0s 1 forwards' }\n        : undefined,\n    [shouldSpinLogo]\n  );\n\n  return (\n    <div\n      className={cn(\n        // Base layout - use dvh for mobile keyboard handling, fall back to vh\n        'min-h-[100dvh] supports-[height:100dvh]:min-h-[100dvh] flex flex-col items-center bg-base relative overflow-x-hidden',\n        // Horizontal padding with safe area support for notched devices\n        'px-4 sm:px-6',\n        // Vertical padding - reduced on mobile, increases on larger screens\n        // Use smaller top padding when keyboard is visible\n        isKeyboardVisible\n          ? 'pt-8 pb-4'\n          : 'pt-[12vh] sm:pt-[15vh] lg:pt-[19vh] pb-24',\n        // Safe area insets for notched devices (iPhone X+, Android with notches)\n        'pb-[max(1.5rem,env(safe-area-inset-bottom))]',\n        'pl-[max(1rem,env(safe-area-inset-left))]',\n        'pr-[max(1rem,env(safe-area-inset-right))]',\n        // Smooth transition when keyboard appears/disappears\n        'transition-[padding] duration-200 ease-out',\n        // Background gradients\n        \"before:content-[''] before:absolute before:inset-0 before:bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(120,119,198,0.12),transparent)] dark:before:bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(120,119,198,0.20),transparent)] before:pointer-events-none\",\n        \"after:content-[''] after:absolute after:inset-0 after:bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.03)_100%)] dark:after:bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.45)_100%)] after:pointer-events-none\"\n      )}\n    >\n      {/* Skip to main content link for keyboard users */}\n      {showSkipLink && (\n        <Link\n          href='#auth-form'\n          className='sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:rounded-md focus:bg-surface-0 focus:text-primary-token focus:border focus:border-subtle focus-ring-themed focus-visible:ring-offset-(--color-bg-base)'\n        >\n          Skip to form\n        </Link>\n      )}\n\n      {showLogoutButton ? (\n        <div className='absolute top-4 right-4 z-50'>\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                type='button'\n                size='icon'\n                variant='ghost'\n                className='h-9 w-9 rounded-full border border-subtle bg-transparent text-tertiary-token transition-colors hover:bg-surface-2 hover:text-primary-token focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-surface-1'\n              >\n                <MoreHorizontal className='h-4 w-4' />\n                <span className='sr-only'>Open menu</span>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align='end' sideOffset={8}>\n              <SignOutButton redirectUrl={logoutRedirectUrl}>\n                <DropdownMenuItem>Log out</DropdownMenuItem>\n              </SignOutButton>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      ) : null}\n\n      {/* Logo - hide on mobile when keyboard is visible */}\n      <div\n        className={cn(\n          'mb-4 h-11 w-11 flex items-center justify-center',\n          'transition-all duration-200 ease-out',\n          isKeyboardVisible && 'opacity-0 h-0 mb-0 pointer-events-none'\n        )}\n        aria-hidden={isKeyboardVisible}\n      >\n        {showLogo ? (\n          <Link\n            href='/'\n            className={`block ${LINK_FOCUS_CLASSES}`}\n            aria-label='Go to homepage'\n            tabIndex={isKeyboardVisible ? -1 : undefined}\n          >\n            <span\n              className={shouldSpinLogo ? 'logo-spin-trigger' : undefined}\n              style={logoStyle}\n            >\n              <BrandLogo size={44} tone='auto' priority />\n            </span>\n          </Link>\n        ) : (\n          <span aria-hidden='true' />\n        )}\n      </div>\n\n      {/* Title - hide when keyboard is visible on mobile */}\n      {showFormTitle && (\n        <h1\n          className={cn(\n            formTitleClassName,\n            'transition-all duration-200 ease-out',\n            isKeyboardVisible && 'opacity-0 h-0 mb-0 overflow-hidden'\n          )}\n          aria-hidden={isKeyboardVisible}\n        >\n          {formTitle}\n        </h1>\n      )}\n\n      {/* Form content - centered with mobile-optimized width */}\n      <main\n        ref={formRef}\n        id='auth-form'\n        className={cn(\n          'w-full max-w-[20rem] sm:max-w-[22rem] relative z-10',\n          // Ensure touch targets are easily reachable\n          '[&_input]:text-base [&_input]:sm:text-sm',\n          // Prevent iOS zoom on input focus (requires 16px font)\n          '[&_input]:min-h-[48px]',\n          // Smooth scroll target\n          'scroll-mt-4'\n        )}\n        role='main'\n      >\n        {children}\n      </main>\n\n      {/* Footer - hide when keyboard is visible */}\n      {showFooterPrompt && !isKeyboardVisible && (\n        <p className='mt-8 text-sm text-secondary-token text-center relative z-10 animate-in fade-in-0 duration-200'>\n          {footerPrompt}{' '}\n          <Link\n            href={footerLinkHref}\n            className={`text-primary-token hover:underline ${LINK_FOCUS_CLASSES}`}\n          >\n            {footerLinkText}\n          </Link>\n        </p>\n      )}\n\n      {/* Legal links - hide when keyboard is visible, with safe area support */}\n      {showLegalLinks && !isKeyboardVisible && (\n        <nav\n          className={cn(\n            'absolute flex gap-4 text-xs text-secondary-token',\n            // Position with safe area inset support\n            'bottom-[max(1rem,env(safe-area-inset-bottom))]',\n            'animate-in fade-in-0 duration-200'\n          )}\n          aria-label='Legal'\n        >\n          <Link\n            href='/legal/terms'\n            className={`hover:text-primary-token transition-colors no-underline ${LINK_FOCUS_CLASSES}`}\n          >\n            Terms\n          </Link>\n          <Link\n            href='/legal/privacy'\n            className={`hover:text-primary-token transition-colors no-underline ${LINK_FOCUS_CLASSES}`}\n          >\n            Privacy Policy\n          </Link>\n        </nav>\n      )}\n\n      {logoSpinDelayMs ? (\n        <style jsx>{`\n          @keyframes logo-spin {\n            from {\n              transform: rotate(0deg);\n            }\n            to {\n              transform: rotate(360deg);\n            }\n          }\n          .logo-spin-trigger {\n            display: inline-flex;\n          }\n        `}</style>\n      ) : null}\n    </div>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/atoms/OtpInput.tsx" },
        "span": [3092, 3208],
        "sourceCode": "'use client';\n\nimport * as Clerk from '@clerk/elements/common';\nimport { useCallback, useRef, useState } from 'react';\nimport { useHapticFeedback } from '@/hooks/use-haptic-feedback';\nimport { cn } from '@/lib/utils';\n\nconst OTP_LENGTH = 6;\n\ninterface OtpInputProps {\n  /**\n   * Whether to auto-submit when all digits are entered\n   * @default true\n   */\n  autoSubmit?: boolean;\n  /**\n   * Whether to focus the first digit on mount\n   * @default true\n   */\n  autoFocus?: boolean;\n  /**\n   * Accessible label for the OTP input\n   */\n  'aria-label'?: string;\n}\n\n/**\n * OTP Input component with:\n * - Auto-submit when 6 digits entered\n * - Digit-only validation (rejects letters)\n * - Paste support that triggers submission\n * - Clean validation display\n * - Full keyboard accessibility\n * - Haptic feedback on mobile\n * - Success animation on completion\n */\nexport function OtpInput({\n  autoSubmit = true,\n  autoFocus = true,\n  'aria-label': ariaLabel = 'One-time password',\n}: OtpInputProps) {\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const [digitCount, setDigitCount] = useState(0);\n  const [isComplete, setIsComplete] = useState(false);\n  const haptic = useHapticFeedback();\n  const lastDigitCountRef = useRef(0);\n\n  const focusUnderlyingInput = (): void => {\n    inputRef.current?.focus();\n  };\n\n  // Handle value changes for haptic feedback\n  const handleValueChange = useCallback(\n    (value: string) => {\n      const newCount = value.length;\n\n      // Trigger haptic feedback when a new digit is added\n      if (newCount > lastDigitCountRef.current) {\n        if (newCount === OTP_LENGTH) {\n          // Success haptic when all digits entered\n          haptic.success();\n          setIsComplete(true);\n        } else {\n          // Light haptic for each digit\n          haptic.light();\n        }\n      }\n\n      lastDigitCountRef.current = newCount;\n      setDigitCount(newCount);\n\n      // Reset complete state if digits are removed\n      if (newCount < OTP_LENGTH) {\n        setIsComplete(false);\n      }\n    },\n    [haptic]\n  );\n\n  const handlePasteCapture = (event: React.ClipboardEvent<HTMLDivElement>) => {\n    const raw = event.clipboardData.getData('text');\n    const digits = raw.replace(/\\D/g, '').slice(0, OTP_LENGTH);\n    if (!digits) return;\n\n    event.preventDefault();\n    focusUnderlyingInput();\n\n    const el = inputRef.current;\n    if (!el) return;\n\n    const valueSetter = Object.getOwnPropertyDescriptor(\n      window.HTMLInputElement.prototype,\n      'value'\n    )?.set;\n    valueSetter?.call(el, digits);\n    el.dispatchEvent(new Event('input', { bubbles: true }));\n    el.setSelectionRange(\n      Math.min(digits.length, OTP_LENGTH - 1),\n      digits.length\n    );\n\n    // Trigger haptic and visual feedback for paste\n    if (digits.length === OTP_LENGTH) {\n      haptic.success();\n      setIsComplete(true);\n    } else {\n      haptic.medium();\n    }\n    setDigitCount(digits.length);\n    lastDigitCountRef.current = digits.length;\n\n    if (autoSubmit && digits.length === OTP_LENGTH) {\n      el.form?.requestSubmit();\n    }\n  };\n\n  return (\n    <div\n      onClick={focusUnderlyingInput}\n      onPasteCapture={handlePasteCapture}\n      className='relative'\n    >\n      {/* Progress indicator for mobile - shows how many digits entered */}\n      <div\n        className='absolute -top-6 left-0 right-0 flex justify-center gap-1.5 sm:hidden'\n        aria-hidden='true'\n      >\n        {Array.from({ length: OTP_LENGTH }).map((_, i) => (\n          <div\n            key={i}\n            className={cn(\n              'h-1 w-1 rounded-full transition-all duration-200',\n              i < digitCount ? 'bg-primary-token scale-125' : 'bg-subtle'\n            )}\n          />\n        ))}\n      </div>\n\n      <Clerk.Input\n        ref={inputRef}\n        type='otp'\n        autoSubmit={autoSubmit}\n        autoFocus={autoFocus}\n        autoComplete='one-time-code'\n        inputMode='numeric'\n        length={OTP_LENGTH}\n        className='flex justify-center gap-2 sm:gap-2.5'\n        aria-label={ariaLabel}\n        onChange={e => handleValueChange(e.target.value)}\n        render={({ value, status }) => (\n          <div\n            className={cn(\n              // Base styles with mobile-optimized sizing\n              'flex items-center justify-center rounded-xl border text-xl sm:text-2xl font-sans transition-all duration-150',\n              // Mobile: larger touch targets (48x44px min), desktop: slightly smaller\n              'h-14 w-11 sm:h-12 sm:w-10',\n              'bg-surface-0 text-primary-token',\n              // Status-based styling\n              status === 'cursor'\n                ? 'border-default ring-2 ring-[rgb(var(--focus-ring))]/30 scale-105'\n                : status === 'selected'\n                  ? 'border-default'\n                  : 'border-subtle',\n              // Focus-visible for keyboard navigation\n              'focus-within:border-default focus-within:ring-2 focus-within:ring-[rgb(var(--focus-ring))]/30',\n              // Success state animation\n              isComplete && value && 'border-green-500 dark:border-green-400',\n              // Active press state for touch\n              'active:scale-95 active:bg-surface-1'\n            )}\n            data-status={status}\n            role='presentation'\n          >\n            <span\n              className={cn(\n                'transition-transform duration-100',\n                // Pop animation when digit appears\n                value && 'animate-in zoom-in-90 duration-100'\n              )}\n            >\n              {value}\n            </span>\n            {status === 'cursor' && !value && (\n              <span\n                className='animate-pulse motion-reduce:animate-none text-secondary-token'\n                aria-hidden='true'\n              >\n                |\n              </span>\n            )}\n          </div>\n        )}\n      />\n\n      {/* Success checkmark overlay */}\n      {isComplete && (\n        <div\n          className='absolute inset-0 flex items-center justify-center pointer-events-none animate-in fade-in-0 zoom-in-95 duration-200'\n          aria-hidden='true'\n        >\n          <div className='absolute inset-0 bg-green-500/5 dark:bg-green-400/10 rounded-xl' />\n        </div>\n      )}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noStaticElementInteractions",
      "severity": "warning",
      "description": "Static Elements should not be interactive.",
      "message": [
        {
          "elements": [],
          "content": "Static Elements should not be interactive."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "To add interactivity such as a mouse or key event listener to a static element, give the element an appropriate role value."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/atoms/OtpInput.tsx" },
        "span": [3092, 3208],
        "sourceCode": "'use client';\n\nimport * as Clerk from '@clerk/elements/common';\nimport { useCallback, useRef, useState } from 'react';\nimport { useHapticFeedback } from '@/hooks/use-haptic-feedback';\nimport { cn } from '@/lib/utils';\n\nconst OTP_LENGTH = 6;\n\ninterface OtpInputProps {\n  /**\n   * Whether to auto-submit when all digits are entered\n   * @default true\n   */\n  autoSubmit?: boolean;\n  /**\n   * Whether to focus the first digit on mount\n   * @default true\n   */\n  autoFocus?: boolean;\n  /**\n   * Accessible label for the OTP input\n   */\n  'aria-label'?: string;\n}\n\n/**\n * OTP Input component with:\n * - Auto-submit when 6 digits entered\n * - Digit-only validation (rejects letters)\n * - Paste support that triggers submission\n * - Clean validation display\n * - Full keyboard accessibility\n * - Haptic feedback on mobile\n * - Success animation on completion\n */\nexport function OtpInput({\n  autoSubmit = true,\n  autoFocus = true,\n  'aria-label': ariaLabel = 'One-time password',\n}: OtpInputProps) {\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const [digitCount, setDigitCount] = useState(0);\n  const [isComplete, setIsComplete] = useState(false);\n  const haptic = useHapticFeedback();\n  const lastDigitCountRef = useRef(0);\n\n  const focusUnderlyingInput = (): void => {\n    inputRef.current?.focus();\n  };\n\n  // Handle value changes for haptic feedback\n  const handleValueChange = useCallback(\n    (value: string) => {\n      const newCount = value.length;\n\n      // Trigger haptic feedback when a new digit is added\n      if (newCount > lastDigitCountRef.current) {\n        if (newCount === OTP_LENGTH) {\n          // Success haptic when all digits entered\n          haptic.success();\n          setIsComplete(true);\n        } else {\n          // Light haptic for each digit\n          haptic.light();\n        }\n      }\n\n      lastDigitCountRef.current = newCount;\n      setDigitCount(newCount);\n\n      // Reset complete state if digits are removed\n      if (newCount < OTP_LENGTH) {\n        setIsComplete(false);\n      }\n    },\n    [haptic]\n  );\n\n  const handlePasteCapture = (event: React.ClipboardEvent<HTMLDivElement>) => {\n    const raw = event.clipboardData.getData('text');\n    const digits = raw.replace(/\\D/g, '').slice(0, OTP_LENGTH);\n    if (!digits) return;\n\n    event.preventDefault();\n    focusUnderlyingInput();\n\n    const el = inputRef.current;\n    if (!el) return;\n\n    const valueSetter = Object.getOwnPropertyDescriptor(\n      window.HTMLInputElement.prototype,\n      'value'\n    )?.set;\n    valueSetter?.call(el, digits);\n    el.dispatchEvent(new Event('input', { bubbles: true }));\n    el.setSelectionRange(\n      Math.min(digits.length, OTP_LENGTH - 1),\n      digits.length\n    );\n\n    // Trigger haptic and visual feedback for paste\n    if (digits.length === OTP_LENGTH) {\n      haptic.success();\n      setIsComplete(true);\n    } else {\n      haptic.medium();\n    }\n    setDigitCount(digits.length);\n    lastDigitCountRef.current = digits.length;\n\n    if (autoSubmit && digits.length === OTP_LENGTH) {\n      el.form?.requestSubmit();\n    }\n  };\n\n  return (\n    <div\n      onClick={focusUnderlyingInput}\n      onPasteCapture={handlePasteCapture}\n      className='relative'\n    >\n      {/* Progress indicator for mobile - shows how many digits entered */}\n      <div\n        className='absolute -top-6 left-0 right-0 flex justify-center gap-1.5 sm:hidden'\n        aria-hidden='true'\n      >\n        {Array.from({ length: OTP_LENGTH }).map((_, i) => (\n          <div\n            key={i}\n            className={cn(\n              'h-1 w-1 rounded-full transition-all duration-200',\n              i < digitCount ? 'bg-primary-token scale-125' : 'bg-subtle'\n            )}\n          />\n        ))}\n      </div>\n\n      <Clerk.Input\n        ref={inputRef}\n        type='otp'\n        autoSubmit={autoSubmit}\n        autoFocus={autoFocus}\n        autoComplete='one-time-code'\n        inputMode='numeric'\n        length={OTP_LENGTH}\n        className='flex justify-center gap-2 sm:gap-2.5'\n        aria-label={ariaLabel}\n        onChange={e => handleValueChange(e.target.value)}\n        render={({ value, status }) => (\n          <div\n            className={cn(\n              // Base styles with mobile-optimized sizing\n              'flex items-center justify-center rounded-xl border text-xl sm:text-2xl font-sans transition-all duration-150',\n              // Mobile: larger touch targets (48x44px min), desktop: slightly smaller\n              'h-14 w-11 sm:h-12 sm:w-10',\n              'bg-surface-0 text-primary-token',\n              // Status-based styling\n              status === 'cursor'\n                ? 'border-default ring-2 ring-[rgb(var(--focus-ring))]/30 scale-105'\n                : status === 'selected'\n                  ? 'border-default'\n                  : 'border-subtle',\n              // Focus-visible for keyboard navigation\n              'focus-within:border-default focus-within:ring-2 focus-within:ring-[rgb(var(--focus-ring))]/30',\n              // Success state animation\n              isComplete && value && 'border-green-500 dark:border-green-400',\n              // Active press state for touch\n              'active:scale-95 active:bg-surface-1'\n            )}\n            data-status={status}\n            role='presentation'\n          >\n            <span\n              className={cn(\n                'transition-transform duration-100',\n                // Pop animation when digit appears\n                value && 'animate-in zoom-in-90 duration-100'\n              )}\n            >\n              {value}\n            </span>\n            {status === 'cursor' && !value && (\n              <span\n                className='animate-pulse motion-reduce:animate-none text-secondary-token'\n                aria-hidden='true'\n              >\n                |\n              </span>\n            )}\n          </div>\n        )}\n      />\n\n      {/* Success checkmark overlay */}\n      {isComplete && (\n        <div\n          className='absolute inset-0 flex items-center justify-center pointer-events-none animate-in fade-in-0 zoom-in-95 duration-200'\n          aria-hidden='true'\n        >\n          <div className='absolute inset-0 bg-green-500/5 dark:bg-green-400/10 rounded-xl' />\n        </div>\n      )}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useKeyWithClickEvents",
      "severity": "warning",
      "description": "Enforce to have the onClick mouse event with the onKeyUp, the onKeyDown, or the onKeyPress keyboard event.",
      "message": [
        { "elements": [], "content": "Enforce to have the " },
        { "elements": ["Emphasis"], "content": "onClick" },
        { "elements": [], "content": " mouse event with the " },
        { "elements": ["Emphasis"], "content": "onKeyUp" },
        { "elements": [], "content": ", the " },
        { "elements": ["Emphasis"], "content": "onKeyDown" },
        { "elements": [], "content": ", or the " },
        { "elements": ["Emphasis"], "content": "onKeyPress" },
        { "elements": [], "content": " keyboard event." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Actions triggered using mouse events should have corresponding keyboard events to account for keyboard-only navigation."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/auth/atoms/OtpInput.tsx" },
        "span": [3092, 3208],
        "sourceCode": "'use client';\n\nimport * as Clerk from '@clerk/elements/common';\nimport { useCallback, useRef, useState } from 'react';\nimport { useHapticFeedback } from '@/hooks/use-haptic-feedback';\nimport { cn } from '@/lib/utils';\n\nconst OTP_LENGTH = 6;\n\ninterface OtpInputProps {\n  /**\n   * Whether to auto-submit when all digits are entered\n   * @default true\n   */\n  autoSubmit?: boolean;\n  /**\n   * Whether to focus the first digit on mount\n   * @default true\n   */\n  autoFocus?: boolean;\n  /**\n   * Accessible label for the OTP input\n   */\n  'aria-label'?: string;\n}\n\n/**\n * OTP Input component with:\n * - Auto-submit when 6 digits entered\n * - Digit-only validation (rejects letters)\n * - Paste support that triggers submission\n * - Clean validation display\n * - Full keyboard accessibility\n * - Haptic feedback on mobile\n * - Success animation on completion\n */\nexport function OtpInput({\n  autoSubmit = true,\n  autoFocus = true,\n  'aria-label': ariaLabel = 'One-time password',\n}: OtpInputProps) {\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const [digitCount, setDigitCount] = useState(0);\n  const [isComplete, setIsComplete] = useState(false);\n  const haptic = useHapticFeedback();\n  const lastDigitCountRef = useRef(0);\n\n  const focusUnderlyingInput = (): void => {\n    inputRef.current?.focus();\n  };\n\n  // Handle value changes for haptic feedback\n  const handleValueChange = useCallback(\n    (value: string) => {\n      const newCount = value.length;\n\n      // Trigger haptic feedback when a new digit is added\n      if (newCount > lastDigitCountRef.current) {\n        if (newCount === OTP_LENGTH) {\n          // Success haptic when all digits entered\n          haptic.success();\n          setIsComplete(true);\n        } else {\n          // Light haptic for each digit\n          haptic.light();\n        }\n      }\n\n      lastDigitCountRef.current = newCount;\n      setDigitCount(newCount);\n\n      // Reset complete state if digits are removed\n      if (newCount < OTP_LENGTH) {\n        setIsComplete(false);\n      }\n    },\n    [haptic]\n  );\n\n  const handlePasteCapture = (event: React.ClipboardEvent<HTMLDivElement>) => {\n    const raw = event.clipboardData.getData('text');\n    const digits = raw.replace(/\\D/g, '').slice(0, OTP_LENGTH);\n    if (!digits) return;\n\n    event.preventDefault();\n    focusUnderlyingInput();\n\n    const el = inputRef.current;\n    if (!el) return;\n\n    const valueSetter = Object.getOwnPropertyDescriptor(\n      window.HTMLInputElement.prototype,\n      'value'\n    )?.set;\n    valueSetter?.call(el, digits);\n    el.dispatchEvent(new Event('input', { bubbles: true }));\n    el.setSelectionRange(\n      Math.min(digits.length, OTP_LENGTH - 1),\n      digits.length\n    );\n\n    // Trigger haptic and visual feedback for paste\n    if (digits.length === OTP_LENGTH) {\n      haptic.success();\n      setIsComplete(true);\n    } else {\n      haptic.medium();\n    }\n    setDigitCount(digits.length);\n    lastDigitCountRef.current = digits.length;\n\n    if (autoSubmit && digits.length === OTP_LENGTH) {\n      el.form?.requestSubmit();\n    }\n  };\n\n  return (\n    <div\n      onClick={focusUnderlyingInput}\n      onPasteCapture={handlePasteCapture}\n      className='relative'\n    >\n      {/* Progress indicator for mobile - shows how many digits entered */}\n      <div\n        className='absolute -top-6 left-0 right-0 flex justify-center gap-1.5 sm:hidden'\n        aria-hidden='true'\n      >\n        {Array.from({ length: OTP_LENGTH }).map((_, i) => (\n          <div\n            key={i}\n            className={cn(\n              'h-1 w-1 rounded-full transition-all duration-200',\n              i < digitCount ? 'bg-primary-token scale-125' : 'bg-subtle'\n            )}\n          />\n        ))}\n      </div>\n\n      <Clerk.Input\n        ref={inputRef}\n        type='otp'\n        autoSubmit={autoSubmit}\n        autoFocus={autoFocus}\n        autoComplete='one-time-code'\n        inputMode='numeric'\n        length={OTP_LENGTH}\n        className='flex justify-center gap-2 sm:gap-2.5'\n        aria-label={ariaLabel}\n        onChange={e => handleValueChange(e.target.value)}\n        render={({ value, status }) => (\n          <div\n            className={cn(\n              // Base styles with mobile-optimized sizing\n              'flex items-center justify-center rounded-xl border text-xl sm:text-2xl font-sans transition-all duration-150',\n              // Mobile: larger touch targets (48x44px min), desktop: slightly smaller\n              'h-14 w-11 sm:h-12 sm:w-10',\n              'bg-surface-0 text-primary-token',\n              // Status-based styling\n              status === 'cursor'\n                ? 'border-default ring-2 ring-[rgb(var(--focus-ring))]/30 scale-105'\n                : status === 'selected'\n                  ? 'border-default'\n                  : 'border-subtle',\n              // Focus-visible for keyboard navigation\n              'focus-within:border-default focus-within:ring-2 focus-within:ring-[rgb(var(--focus-ring))]/30',\n              // Success state animation\n              isComplete && value && 'border-green-500 dark:border-green-400',\n              // Active press state for touch\n              'active:scale-95 active:bg-surface-1'\n            )}\n            data-status={status}\n            role='presentation'\n          >\n            <span\n              className={cn(\n                'transition-transform duration-100',\n                // Pop animation when digit appears\n                value && 'animate-in zoom-in-90 duration-100'\n              )}\n            >\n              {value}\n            </span>\n            {status === 'cursor' && !value && (\n              <span\n                className='animate-pulse motion-reduce:animate-none text-secondary-token'\n                aria-hidden='true'\n              >\n                |\n              </span>\n            )}\n          </div>\n        )}\n      />\n\n      {/* Success checkmark overlay */}\n      {isComplete && (\n        <div\n          className='absolute inset-0 flex items-center justify-center pointer-events-none animate-in fade-in-0 zoom-in-95 duration-200'\n          aria-hidden='true'\n        >\n          <div className='absolute inset-0 bg-green-500/5 dark:bg-green-400/10 rounded-xl' />\n        </div>\n      )}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<nav>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<nav>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/dashboard/DashboardNav.tsx" },
        "span": [9755, 9772],
        "sourceCode": "'use client';\n\nimport {\n  ArrowTopRightOnSquareIcon,\n  BanknotesIcon,\n  BellIcon,\n  ChartPieIcon,\n  DocumentDuplicateIcon,\n  HomeIcon,\n  IdentificationIcon,\n  MusicalNoteIcon,\n  PaintBrushIcon,\n  RocketLaunchIcon,\n  ShieldCheckIcon,\n  SparklesIcon,\n  UserCircleIcon,\n  UserPlusIcon,\n  UsersIcon,\n} from '@heroicons/react/24/outline';\nimport { Kbd } from '@jovie/ui';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport {\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuActions,\n  SidebarMenuButton,\n  SidebarMenuItem,\n} from '@/components/organisms/Sidebar';\nimport { SidebarCollapsibleGroup } from '@/components/organisms/SidebarCollapsibleGroup';\nimport { track } from '@/lib/analytics';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { getBaseUrl } from '@/lib/utils/platform-detection';\n\ninterface DashboardNavProps {\n  collapsed?: boolean;\n}\n\n// Primary Navigation - Core features\nconst primaryNavigation = [\n  {\n    name: 'Overview',\n    href: '/app/dashboard/overview',\n    id: 'overview',\n    icon: HomeIcon,\n    description: 'Dashboard overview and quick stats',\n  },\n  {\n    name: 'Profile',\n    href: '/app/dashboard/profile',\n    id: 'links',\n    icon: UserCircleIcon,\n    description: 'Update your profile and links',\n  },\n  {\n    name: 'Contacts',\n    href: '/app/dashboard/contacts',\n    id: 'contacts',\n    icon: IdentificationIcon,\n    description: 'Manage your team and contact routes',\n  },\n  {\n    name: 'Releases',\n    href: '/app/dashboard/releases',\n    id: 'releases',\n    icon: MusicalNoteIcon,\n    description: 'Link out every provider with one smart link',\n  },\n  {\n    name: 'Audience',\n    href: '/app/dashboard/audience',\n    id: 'audience',\n    icon: UsersIcon,\n    description: 'Understand your audience demographics',\n  },\n];\n\n// Keyboard shortcut hints shown in tooltips when the sidebar is collapsed.\n// Display-only for now; actual hotkeys can be wired separately.\nconst navShortcuts: Record<string, string> = {\n  overview: '1',\n  links: '2',\n  contacts: '3',\n  releases: '4',\n  audience: '5',\n  tipping: '6',\n};\n\nconst secondaryNavigation = [\n  {\n    name: 'Earnings',\n    href: '/app/dashboard/tipping',\n    id: 'tipping',\n    icon: BanknotesIcon,\n    description: 'Manage tips and monetization',\n  },\n];\n\nconst settingsNavigation = [\n  {\n    name: 'Account',\n    href: '/app/settings/account',\n    id: 'account',\n    icon: ShieldCheckIcon,\n  },\n  {\n    name: 'Appearance',\n    href: '/app/settings/appearance',\n    id: 'appearance',\n    icon: PaintBrushIcon,\n  },\n  {\n    name: 'Notifications',\n    href: '/app/settings/notifications',\n    id: 'notifications',\n    icon: BellIcon,\n  },\n  {\n    name: 'Remove Branding',\n    href: '/app/settings/remove-branding',\n    id: 'remove-branding',\n    icon: SparklesIcon,\n  },\n  {\n    name: 'Ad Pixels',\n    href: '/app/settings/ad-pixels',\n    id: 'ad-pixels',\n    icon: RocketLaunchIcon,\n  },\n  {\n    name: 'Billing',\n    href: '/app/settings/billing',\n    id: 'billing',\n    icon: BanknotesIcon,\n  },\n];\n\nconst adminNavigation: typeof primaryNavigation = [\n  {\n    name: 'Overview',\n    href: '/app/admin',\n    id: 'admin_overview',\n    icon: ShieldCheckIcon,\n    description: 'Internal metrics and operations',\n  },\n  {\n    name: 'Waitlist',\n    href: '/app/admin/waitlist',\n    id: 'admin_waitlist',\n    icon: UserPlusIcon,\n    description: 'Review and manage waitlist signups',\n  },\n  {\n    name: 'Creators',\n    href: '/app/admin/creators',\n    id: 'admin_creators',\n    icon: UsersIcon,\n    description: 'Manage creator profiles and verification',\n  },\n  {\n    name: 'Users',\n    href: '/app/admin/users',\n    id: 'admin_users',\n    icon: UserCircleIcon,\n    description: 'Review signed up users and billing status',\n  },\n  {\n    name: 'Activity',\n    href: '/app/admin/activity',\n    id: 'admin_activity',\n    icon: ChartPieIcon,\n    description: 'Review recent system and creator activity',\n  },\n];\n\nexport function DashboardNav(_props: DashboardNavProps) {\n  void _props;\n  const { isAdmin, selectedProfile } = useDashboardData();\n  const pathname = usePathname();\n  const notifications = useNotifications();\n  const contactsGate = useFeatureGate(STATSIG_FLAGS.CONTACTS);\n  const username =\n    selectedProfile?.usernameNormalized ?? selectedProfile?.username;\n  const publicProfileHref = username ? `/${username}` : undefined;\n  const primaryItems = contactsGate.value\n    ? primaryNavigation\n    : primaryNavigation.filter(item => item.id !== 'contacts');\n\n  const isInSettings = pathname.startsWith('/app/settings');\n  const navSections = isInSettings\n    ? [settingsNavigation]\n    : [primaryItems, secondaryNavigation];\n\n  const renderSection = (\n    items: typeof primaryNavigation | typeof settingsNavigation\n  ) => (\n    <SidebarMenu>\n      {items.map(item => {\n        const isActive =\n          pathname === item.href ||\n          (pathname.startsWith(`${item.href}/`) && item.href !== '/app/admin');\n        const shortcut = navShortcuts[item.id];\n        const tooltip = shortcut\n          ? {\n              children: (\n                <div className='flex items-center gap-2'>\n                  <span>{item.name}</span>\n                  <Kbd className='text-[10px] px-1.5 py-0.5'>{shortcut}</Kbd>\n                </div>\n              ),\n            }\n          : item.name;\n\n        return (\n          <SidebarMenuItem key={item.id}>\n            <SidebarMenuButton asChild isActive={isActive} tooltip={tooltip}>\n              <Link\n                href={item.href}\n                aria-current={isActive ? 'page' : undefined}\n                className='flex w-full min-w-0 items-center gap-2 group-data-[collapsible=icon]:mx-auto group-data-[collapsible=icon]:justify-center group-data-[collapsible=icon]:gap-0'\n              >\n                <item.icon className='size-4' aria-hidden='true' />\n                <span className='truncate group-data-[collapsible=icon]:hidden'>\n                  {item.name}\n                </span>\n              </Link>\n            </SidebarMenuButton>\n            {item.href === '/app/dashboard/profile' && publicProfileHref ? (\n              <SidebarMenuActions showOnHover>\n                <SidebarMenuAction\n                  type='button'\n                  aria-label='Copy public profile link'\n                  onClick={async () => {\n                    const url = `${getBaseUrl()}${publicProfileHref}`;\n\n                    const fallbackCopy = (text: string): boolean => {\n                      try {\n                        const textarea = document.createElement('textarea');\n                        textarea.value = text;\n                        textarea.style.position = 'fixed';\n                        textarea.style.left = '-999999px';\n                        textarea.style.top = '-999999px';\n                        document.body.appendChild(textarea);\n                        textarea.focus();\n                        textarea.select();\n                        const successful = document.execCommand('copy');\n                        document.body.removeChild(textarea);\n                        return successful;\n                      } catch {\n                        return false;\n                      }\n                    };\n\n                    try {\n                      let copySuccess = false;\n                      if (\n                        navigator.clipboard &&\n                        navigator.clipboard.writeText\n                      ) {\n                        await navigator.clipboard.writeText(url);\n                        copySuccess = true;\n                      } else {\n                        copySuccess = fallbackCopy(url);\n                      }\n\n                      if (!copySuccess) {\n                        throw new Error('copy_failed');\n                      }\n\n                      notifications.success('Copied to clipboard');\n                      track('profile_copy_url_click', {\n                        status: 'success',\n                        source: 'dashboard_nav',\n                      });\n                    } catch {\n                      const success = fallbackCopy(url);\n                      if (success) {\n                        notifications.success('Copied to clipboard');\n                        track('profile_copy_url_click', {\n                          status: 'success',\n                          source: 'dashboard_nav',\n                        });\n                        return;\n                      }\n\n                      notifications.error('Failed to copy');\n                      track('profile_copy_url_click', {\n                        status: 'error',\n                        source: 'dashboard_nav',\n                      });\n                    }\n                  }}\n                >\n                  <DocumentDuplicateIcon aria-hidden='true' />\n                </SidebarMenuAction>\n                <SidebarMenuAction asChild>\n                  <Link\n                    href={publicProfileHref}\n                    target='_blank'\n                    rel='noopener noreferrer'\n                    aria-label='Open public profile in a new tab'\n                  >\n                    <ArrowTopRightOnSquareIcon aria-hidden='true' />\n                  </Link>\n                </SidebarMenuAction>\n              </SidebarMenuActions>\n            ) : null}\n          </SidebarMenuItem>\n        );\n      })}\n    </SidebarMenu>\n  );\n\n  return (\n    <nav\n      className='flex flex-1 flex-col'\n      aria-label='Dashboard navigation'\n      role='navigation'\n    >\n      <SidebarGroup className='mb-1 space-y-1.5'>\n        <SidebarGroupContent className='space-y-1'>\n          {navSections.map((section, idx) => (\n            <div key={idx} data-nav-section>\n              {renderSection(section)}\n            </div>\n          ))}\n        </SidebarGroupContent>\n      </SidebarGroup>\n      {isAdmin && !isInSettings && (\n        <div className='mt-4'>\n          <SidebarCollapsibleGroup label='Admin' defaultOpen>\n            {renderSection(adminNavigation)}\n          </SidebarCollapsibleGroup>\n        </div>\n      )}\n    </nav>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noRedundantRoles",
      "severity": "warning",
      "description": "Using the role attribute 'navigation' on the 'nav' element is redundant, because it is implied by its semantic.",
      "message": [
        {
          "elements": [],
          "content": "Using the role attribute 'navigation' on the 'nav' element is redundant, because it is implied by its semantic."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Unsafe fix: Remove the " },
                { "elements": ["Emphasis"], "content": "role" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "'use client';\n\nimport {    <nav\n      className='flex flex-1 flex-col'\n      aria-label='Dashboard navigation'\n      role='navigation'\n    >\n      <SidebarGroup className='mb-1 space-y-1.5'>  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 23] } } },
                { "equalLines": { "line_count": 316 } },
                { "diffOp": { "equal": { "range": [23, 110] } } },
                { "diffOp": { "delete": { "range": [110, 134] } } },
                { "diffOp": { "equal": { "range": [134, 190] } } },
                { "equalLines": { "line_count": 16 } },
                { "diffOp": { "equal": { "range": [190, 197] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/dashboard/DashboardNav.tsx" },
        "span": [9760, 9772],
        "sourceCode": "'use client';\n\nimport {\n  ArrowTopRightOnSquareIcon,\n  BanknotesIcon,\n  BellIcon,\n  ChartPieIcon,\n  DocumentDuplicateIcon,\n  HomeIcon,\n  IdentificationIcon,\n  MusicalNoteIcon,\n  PaintBrushIcon,\n  RocketLaunchIcon,\n  ShieldCheckIcon,\n  SparklesIcon,\n  UserCircleIcon,\n  UserPlusIcon,\n  UsersIcon,\n} from '@heroicons/react/24/outline';\nimport { Kbd } from '@jovie/ui';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport {\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuActions,\n  SidebarMenuButton,\n  SidebarMenuItem,\n} from '@/components/organisms/Sidebar';\nimport { SidebarCollapsibleGroup } from '@/components/organisms/SidebarCollapsibleGroup';\nimport { track } from '@/lib/analytics';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { getBaseUrl } from '@/lib/utils/platform-detection';\n\ninterface DashboardNavProps {\n  collapsed?: boolean;\n}\n\n// Primary Navigation - Core features\nconst primaryNavigation = [\n  {\n    name: 'Overview',\n    href: '/app/dashboard/overview',\n    id: 'overview',\n    icon: HomeIcon,\n    description: 'Dashboard overview and quick stats',\n  },\n  {\n    name: 'Profile',\n    href: '/app/dashboard/profile',\n    id: 'links',\n    icon: UserCircleIcon,\n    description: 'Update your profile and links',\n  },\n  {\n    name: 'Contacts',\n    href: '/app/dashboard/contacts',\n    id: 'contacts',\n    icon: IdentificationIcon,\n    description: 'Manage your team and contact routes',\n  },\n  {\n    name: 'Releases',\n    href: '/app/dashboard/releases',\n    id: 'releases',\n    icon: MusicalNoteIcon,\n    description: 'Link out every provider with one smart link',\n  },\n  {\n    name: 'Audience',\n    href: '/app/dashboard/audience',\n    id: 'audience',\n    icon: UsersIcon,\n    description: 'Understand your audience demographics',\n  },\n];\n\n// Keyboard shortcut hints shown in tooltips when the sidebar is collapsed.\n// Display-only for now; actual hotkeys can be wired separately.\nconst navShortcuts: Record<string, string> = {\n  overview: '1',\n  links: '2',\n  contacts: '3',\n  releases: '4',\n  audience: '5',\n  tipping: '6',\n};\n\nconst secondaryNavigation = [\n  {\n    name: 'Earnings',\n    href: '/app/dashboard/tipping',\n    id: 'tipping',\n    icon: BanknotesIcon,\n    description: 'Manage tips and monetization',\n  },\n];\n\nconst settingsNavigation = [\n  {\n    name: 'Account',\n    href: '/app/settings/account',\n    id: 'account',\n    icon: ShieldCheckIcon,\n  },\n  {\n    name: 'Appearance',\n    href: '/app/settings/appearance',\n    id: 'appearance',\n    icon: PaintBrushIcon,\n  },\n  {\n    name: 'Notifications',\n    href: '/app/settings/notifications',\n    id: 'notifications',\n    icon: BellIcon,\n  },\n  {\n    name: 'Remove Branding',\n    href: '/app/settings/remove-branding',\n    id: 'remove-branding',\n    icon: SparklesIcon,\n  },\n  {\n    name: 'Ad Pixels',\n    href: '/app/settings/ad-pixels',\n    id: 'ad-pixels',\n    icon: RocketLaunchIcon,\n  },\n  {\n    name: 'Billing',\n    href: '/app/settings/billing',\n    id: 'billing',\n    icon: BanknotesIcon,\n  },\n];\n\nconst adminNavigation: typeof primaryNavigation = [\n  {\n    name: 'Overview',\n    href: '/app/admin',\n    id: 'admin_overview',\n    icon: ShieldCheckIcon,\n    description: 'Internal metrics and operations',\n  },\n  {\n    name: 'Waitlist',\n    href: '/app/admin/waitlist',\n    id: 'admin_waitlist',\n    icon: UserPlusIcon,\n    description: 'Review and manage waitlist signups',\n  },\n  {\n    name: 'Creators',\n    href: '/app/admin/creators',\n    id: 'admin_creators',\n    icon: UsersIcon,\n    description: 'Manage creator profiles and verification',\n  },\n  {\n    name: 'Users',\n    href: '/app/admin/users',\n    id: 'admin_users',\n    icon: UserCircleIcon,\n    description: 'Review signed up users and billing status',\n  },\n  {\n    name: 'Activity',\n    href: '/app/admin/activity',\n    id: 'admin_activity',\n    icon: ChartPieIcon,\n    description: 'Review recent system and creator activity',\n  },\n];\n\nexport function DashboardNav(_props: DashboardNavProps) {\n  void _props;\n  const { isAdmin, selectedProfile } = useDashboardData();\n  const pathname = usePathname();\n  const notifications = useNotifications();\n  const contactsGate = useFeatureGate(STATSIG_FLAGS.CONTACTS);\n  const username =\n    selectedProfile?.usernameNormalized ?? selectedProfile?.username;\n  const publicProfileHref = username ? `/${username}` : undefined;\n  const primaryItems = contactsGate.value\n    ? primaryNavigation\n    : primaryNavigation.filter(item => item.id !== 'contacts');\n\n  const isInSettings = pathname.startsWith('/app/settings');\n  const navSections = isInSettings\n    ? [settingsNavigation]\n    : [primaryItems, secondaryNavigation];\n\n  const renderSection = (\n    items: typeof primaryNavigation | typeof settingsNavigation\n  ) => (\n    <SidebarMenu>\n      {items.map(item => {\n        const isActive =\n          pathname === item.href ||\n          (pathname.startsWith(`${item.href}/`) && item.href !== '/app/admin');\n        const shortcut = navShortcuts[item.id];\n        const tooltip = shortcut\n          ? {\n              children: (\n                <div className='flex items-center gap-2'>\n                  <span>{item.name}</span>\n                  <Kbd className='text-[10px] px-1.5 py-0.5'>{shortcut}</Kbd>\n                </div>\n              ),\n            }\n          : item.name;\n\n        return (\n          <SidebarMenuItem key={item.id}>\n            <SidebarMenuButton asChild isActive={isActive} tooltip={tooltip}>\n              <Link\n                href={item.href}\n                aria-current={isActive ? 'page' : undefined}\n                className='flex w-full min-w-0 items-center gap-2 group-data-[collapsible=icon]:mx-auto group-data-[collapsible=icon]:justify-center group-data-[collapsible=icon]:gap-0'\n              >\n                <item.icon className='size-4' aria-hidden='true' />\n                <span className='truncate group-data-[collapsible=icon]:hidden'>\n                  {item.name}\n                </span>\n              </Link>\n            </SidebarMenuButton>\n            {item.href === '/app/dashboard/profile' && publicProfileHref ? (\n              <SidebarMenuActions showOnHover>\n                <SidebarMenuAction\n                  type='button'\n                  aria-label='Copy public profile link'\n                  onClick={async () => {\n                    const url = `${getBaseUrl()}${publicProfileHref}`;\n\n                    const fallbackCopy = (text: string): boolean => {\n                      try {\n                        const textarea = document.createElement('textarea');\n                        textarea.value = text;\n                        textarea.style.position = 'fixed';\n                        textarea.style.left = '-999999px';\n                        textarea.style.top = '-999999px';\n                        document.body.appendChild(textarea);\n                        textarea.focus();\n                        textarea.select();\n                        const successful = document.execCommand('copy');\n                        document.body.removeChild(textarea);\n                        return successful;\n                      } catch {\n                        return false;\n                      }\n                    };\n\n                    try {\n                      let copySuccess = false;\n                      if (\n                        navigator.clipboard &&\n                        navigator.clipboard.writeText\n                      ) {\n                        await navigator.clipboard.writeText(url);\n                        copySuccess = true;\n                      } else {\n                        copySuccess = fallbackCopy(url);\n                      }\n\n                      if (!copySuccess) {\n                        throw new Error('copy_failed');\n                      }\n\n                      notifications.success('Copied to clipboard');\n                      track('profile_copy_url_click', {\n                        status: 'success',\n                        source: 'dashboard_nav',\n                      });\n                    } catch {\n                      const success = fallbackCopy(url);\n                      if (success) {\n                        notifications.success('Copied to clipboard');\n                        track('profile_copy_url_click', {\n                          status: 'success',\n                          source: 'dashboard_nav',\n                        });\n                        return;\n                      }\n\n                      notifications.error('Failed to copy');\n                      track('profile_copy_url_click', {\n                        status: 'error',\n                        source: 'dashboard_nav',\n                      });\n                    }\n                  }}\n                >\n                  <DocumentDuplicateIcon aria-hidden='true' />\n                </SidebarMenuAction>\n                <SidebarMenuAction asChild>\n                  <Link\n                    href={publicProfileHref}\n                    target='_blank'\n                    rel='noopener noreferrer'\n                    aria-label='Open public profile in a new tab'\n                  >\n                    <ArrowTopRightOnSquareIcon aria-hidden='true' />\n                  </Link>\n                </SidebarMenuAction>\n              </SidebarMenuActions>\n            ) : null}\n          </SidebarMenuItem>\n        );\n      })}\n    </SidebarMenu>\n  );\n\n  return (\n    <nav\n      className='flex flex-1 flex-col'\n      aria-label='Dashboard navigation'\n      role='navigation'\n    >\n      <SidebarGroup className='mb-1 space-y-1.5'>\n        <SidebarGroupContent className='space-y-1'>\n          {navSections.map((section, idx) => (\n            <div key={idx} data-nav-section>\n              {renderSection(section)}\n            </div>\n          ))}\n        </SidebarGroupContent>\n      </SidebarGroup>\n      {isAdmin && !isInSettings && (\n        <div className='mt-4'>\n          <SidebarCollapsibleGroup label='Admin' defaultOpen>\n            {renderSection(adminNavigation)}\n          </SidebarCollapsibleGroup>\n        </div>\n      )}\n    </nav>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/dashboard/DashboardTipping.tsx" },
        "span": [7816, 7829],
        "sourceCode": "'use client';\n\nimport { WalletIcon } from '@heroicons/react/24/outline';\nimport { Button } from '@jovie/ui';\nimport { useCallback, useState } from 'react';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport { Input } from '@/components/atoms/Input';\nimport { getQrCodeUrl } from '@/components/atoms/QRCode';\nimport { CopyToClipboardButton } from '@/components/dashboard/atoms/CopyToClipboardButton';\nimport { SectionHeader } from '@/components/dashboard/molecules/SectionHeader';\nimport { QRCodeCard } from '@/components/molecules/QRCodeCard';\nimport { PROFILE_URL } from '@/constants/domains';\nimport { updateVenmoHandle } from '@/lib/api-client/endpoints/dashboard/profile';\nimport { cn } from '@/lib/utils';\nimport { Artist, convertDrizzleCreatorProfileToArtist } from '@/types/db';\n\nconst formatCount = (value: number) => value.toLocaleString();\n\nexport function DashboardTipping() {\n  const dashboardData = useDashboardData();\n  const [artist, setArtist] = useState<Artist | null>(\n    dashboardData.selectedProfile\n      ? convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n      : null\n  );\n  const [venmoHandle, setVenmoHandle] = useState(\n    artist?.venmo_handle?.replace(/^@/, '') || ''\n  );\n  const [isEditing, setIsEditing] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [saveSuccess, setSaveSuccess] = useState<string | null>(null);\n  // Note: Profile switching functionality will be implemented in the future\n\n  const handleSaveVenmo = useCallback(async () => {\n    if (!artist) return;\n\n    setIsSaving(true);\n    try {\n      const normalizedHandle = venmoHandle ? `@${venmoHandle}` : '';\n\n      // Use the API client for consistent error handling and type safety\n      await updateVenmoHandle(normalizedHandle);\n\n      const updatedArtist = { ...artist, venmo_handle: normalizedHandle };\n      setArtist(updatedArtist);\n      setIsEditing(false);\n      setSaveSuccess(`Connected to ${normalizedHandle}`);\n      // Clear success after a short delay\n      setTimeout(() => setSaveSuccess(null), 2500);\n    } catch {\n      // Error is already logged and handled by the API client\n      // Could add user-facing error state here if needed\n    } finally {\n      setIsSaving(false);\n    }\n  }, [venmoHandle, artist]);\n\n  const handleCancel = () => {\n    if (!artist) return;\n    setVenmoHandle(artist.venmo_handle?.replace(/^@/, '') || '');\n    setIsEditing(false);\n  };\n\n  if (!artist) {\n    return null; // This shouldn't happen given the server-side logic\n  }\n\n  const hasVenmoHandle = Boolean(artist.venmo_handle);\n  const tipHandle = artist.handle ?? '';\n  const displayHandle = tipHandle || 'your-handle';\n  const tipRelativePath = tipHandle ? `/${tipHandle}/tip` : '/tip';\n  const tipRelativePathLink = `${tipRelativePath}?source=link`;\n  const tipShareUrlQr = `${PROFILE_URL}${tipRelativePath}?source=qr`;\n  const qrDisplaySize = 180;\n  const qrDownloadSize = 420;\n  const qrDownloadUrl = getQrCodeUrl(tipShareUrlQr, qrDownloadSize);\n  const { tipClicks, qrTipClicks, linkTipClicks } = dashboardData.tippingStats;\n\n  return (\n    <div className='space-y-5'>\n      <div className='flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between'>\n        <div>\n          <h1 className='text-2xl font-bold text-primary-token'>Earnings</h1>\n          <p className='mt-1 text-secondary-token'>\n            Connect your payout handle and view your earnings history\n          </p>\n        </div>\n        {hasVenmoHandle ? (\n          isEditing ? (\n            <div className='flex flex-wrap items-center gap-2 rounded-xl border border-subtle bg-surface-1/40 px-3 py-2 shadow-none'>\n              <WalletIcon className='h-4 w-4 text-accent' />\n              <span className='text-sm font-medium text-primary-token'>\n                Venmo\n              </span>\n              <div className='flex items-center gap-2'>\n                <span className='text-sm text-secondary-token'>@</span>\n                <Input\n                  type='text'\n                  value={venmoHandle}\n                  onChange={e => setVenmoHandle(e.target.value)}\n                  placeholder='your-username'\n                  autoFocus\n                  className='h-8 w-48 sm:w-56'\n                />\n              </div>\n              <Button\n                onClick={handleSaveVenmo}\n                disabled={isSaving || !venmoHandle.trim()}\n                variant='primary'\n                size='sm'\n                className='h-8 px-3'\n              >\n                {isSaving ? 'Saving…' : 'Update'}\n              </Button>\n              <Button\n                onClick={handleCancel}\n                disabled={isSaving}\n                variant='ghost'\n                size='sm'\n                className='h-8 px-2'\n              >\n                Cancel\n              </Button>\n            </div>\n          ) : (\n            <div className='flex flex-wrap items-center gap-2 rounded-xl border border-subtle bg-surface-1/40 px-3 py-2 shadow-none'>\n              <WalletIcon className='h-4 w-4 text-accent' />\n              <span className='rounded-md bg-surface-2 px-2 py-1 font-sans text-sm text-primary-token'>\n                {artist.venmo_handle}\n              </span>\n              <span className='text-sm text-secondary-token'>Connected</span>\n              <Button\n                onClick={() => setIsEditing(true)}\n                variant='ghost'\n                size='sm'\n                className='h-8 px-2'\n              >\n                Edit\n              </Button>\n            </div>\n          )\n        ) : null}\n      </div>\n\n      {/* Venmo Handle Setup — hidden when already connected unless editing */}\n      {!hasVenmoHandle ? (\n        <div className='rounded-xl border border-subtle bg-surface-1/40 shadow-none'>\n          <SectionHeader\n            title='Venmo Handle'\n            description='Your handle will appear on your profile so fans can tip you directly.'\n            right={<WalletIcon className='h-6 w-6 text-accent' />}\n            className='px-5 py-4 border-b border-subtle'\n          />\n\n          <div className='px-5 py-4'>\n            <div className='space-y-4'>\n              <div>\n                <label\n                  htmlFor='venmo-handle'\n                  className='mb-2 block text-sm font-medium text-primary-token'\n                >\n                  Venmo Username\n                </label>\n                <div className='flex items-center gap-2'>\n                  <span className='text-sm text-secondary-token'>@</span>\n                  <Input\n                    type='text'\n                    id='venmo-handle'\n                    value={venmoHandle}\n                    onChange={e => setVenmoHandle(e.target.value)}\n                    placeholder='your-username'\n                    autoFocus\n                    className='flex-1'\n                  />\n                </div>\n                <p className='mt-2 text-xs text-secondary-token'>\n                  Your handle will be shown on your public profile and fans can\n                  tip you directly via Venmo.\n                </p>\n              </div>\n              <div className='flex gap-3'>\n                <Button\n                  onClick={handleSaveVenmo}\n                  disabled={isSaving || !venmoHandle.trim()}\n                  variant='primary'\n                  size='sm'\n                >\n                  {isSaving\n                    ? 'Saving...'\n                    : hasVenmoHandle\n                      ? 'Update'\n                      : 'Connect'}\n                </Button>\n              </div>\n              {saveSuccess && (\n                <div\n                  className='rounded-lg border border-subtle bg-surface-2 px-3 py-2 text-sm text-primary-token'\n                  role='status'\n                  aria-live='polite'\n                >\n                  ✓ {saveSuccess}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      ) : null}\n\n      {/* Tipping content - Blurred and inert when no Venmo handle */}\n      <div\n        className={cn(\n          'space-y-5',\n          !hasVenmoHandle && 'filter blur-sm pointer-events-none select-none'\n        )}\n        aria-hidden={!hasVenmoHandle ? true : undefined}\n        inert={hasVenmoHandle ? undefined : true}\n      >\n        <div className='grid gap-5 lg:grid-cols-12'>\n          <div className='space-y-3 lg:col-span-12'>\n            <div className='space-y-1'>\n              <h2 className='text-base font-semibold tracking-tight text-primary-token'>\n                Activity\n              </h2>\n              <p className='text-sm leading-6 text-secondary-token'>\n                Track how fans reach your tipping page.\n              </p>\n            </div>\n\n            <div className='grid grid-cols-1 gap-4 md:grid-cols-3'>\n              <div className='rounded-xl border border-subtle bg-surface-1/40 p-4'>\n                <p className='text-[11px] font-medium uppercase tracking-wide text-secondary-token'>\n                  QR code scans\n                </p>\n                <p className='mt-2 text-3xl font-semibold tabular-nums tracking-tight text-primary-token'>\n                  {formatCount(qrTipClicks)}\n                </p>\n                <p className='mt-2 text-xs leading-5 text-secondary-token'>\n                  Fans who scanned your tip QR.\n                </p>\n              </div>\n              <div className='rounded-xl border border-subtle bg-surface-1/40 p-4'>\n                <p className='text-[11px] font-medium uppercase tracking-wide text-secondary-token'>\n                  Link clicks\n                </p>\n                <p className='mt-2 text-3xl font-semibold tabular-nums tracking-tight text-primary-token'>\n                  {formatCount(linkTipClicks)}\n                </p>\n                <p className='mt-2 text-xs leading-5 text-secondary-token'>\n                  Fans who clicked your tip link.\n                </p>\n              </div>\n              <div className='rounded-xl border border-subtle bg-surface-1/40 p-4'>\n                <p className='text-[11px] font-medium uppercase tracking-wide text-secondary-token'>\n                  Total\n                </p>\n                <p className='mt-2 text-3xl font-semibold tabular-nums tracking-tight text-primary-token'>\n                  {formatCount(tipClicks)}\n                </p>\n                <p className='mt-2 text-xs leading-5 text-secondary-token'>\n                  QR + link opens combined.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className='grid gap-5 lg:col-span-12 lg:grid-cols-2'>\n            <div className='rounded-xl border border-subtle bg-surface-1/40 shadow-none'>\n              <SectionHeader\n                title='Share your tip link'\n                description='Send fans directly to your profile so they can tip instantly.'\n                className='px-5 py-4 border-b border-subtle'\n              />\n              <div className='px-5 py-4'>\n                <div className='space-y-3'>\n                  <div className='flex flex-wrap items-center gap-3 rounded-lg border border-subtle bg-surface-2/60 px-3 py-2 text-sm font-sans text-primary-token'>\n                    <span className='min-w-0 flex-1 truncate'>\n                      {PROFILE_URL}\n                      {tipRelativePathLink}\n                    </span>\n                    <CopyToClipboardButton\n                      relativePath={tipRelativePathLink}\n                      idleLabel='Copy link'\n                      successLabel='Copied'\n                      errorLabel='Copy failed'\n                      className='h-8 px-3'\n                    />\n                  </div>\n                  <p className='text-xs text-secondary-token'>\n                    Fans can visit{' '}\n                    <strong className='font-semibold'>\n                      {PROFILE_URL.replace('https://', '')}/{displayHandle}/tip\n                    </strong>{' '}\n                    or scan the QR code below to tip you instantly.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className='rounded-xl border border-subtle bg-surface-1/40 shadow-none'>\n              <SectionHeader\n                title='Downloadable QR'\n                description='Perfect for merch tables, receipts, or posters.'\n                className='px-5 py-4 border-b border-subtle'\n              />\n              <div className='px-5 py-4'>\n                <div className='flex flex-col items-center gap-3'>\n                  <div className='w-full rounded-xl border border-subtle bg-surface-2/40 px-4 py-5'>\n                    <QRCodeCard\n                      data={tipShareUrlQr}\n                      qrSize={qrDisplaySize}\n                      title='Scan to tip'\n                      description='Opens your Jovie tip page.'\n                    />\n                  </div>\n                  <div className='flex flex-col items-center justify-center gap-2 text-center'>\n                    <Button variant='secondary' size='sm' asChild>\n                      <a\n                        href={qrDownloadUrl}\n                        download={`jovie-tip-${displayHandle}.png`}\n                        target='_blank'\n                        rel='noreferrer'\n                      >\n                        Download QR\n                      </a>\n                    </Button>\n                    <p className='text-xs text-secondary-token'>\n                      Keep this on receipts or merch so fans can tip fast.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/* Removed overlay CTA; wizard handles setup inline */}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/dashboard/atoms/PlatformPill.tsx" },
        "span": [4458, 5869],
        "sourceCode": "'use client';\n\nimport * as React from 'react';\nimport { getPlatformIcon, SocialIcon } from '@/components/atoms/SocialIcon';\nimport { cn } from '@/lib/utils';\nimport { hexToRgba, isBrandDark } from '@/lib/utils/color';\n\nexport type PlatformPillState =\n  | 'connected'\n  | 'ready'\n  | 'error'\n  | 'hidden'\n  | 'loading';\n\nexport type PlatformPillTone = 'default' | 'faded';\n\nexport interface PlatformPillProps {\n  platformIcon: string;\n  platformName: string;\n  primaryText: string;\n  secondaryText?: string;\n  state?: PlatformPillState;\n  tone?: PlatformPillTone;\n  badgeText?: string;\n  suffix?: React.ReactNode;\n  trailing?: React.ReactNode;\n  onClick?: () => void;\n  shimmerOnMount?: boolean;\n  className?: string;\n  testId?: string;\n}\n\nexport const PlatformPill = React.forwardRef<HTMLDivElement, PlatformPillProps>(\n  function PlatformPill(\n    {\n      platformIcon,\n      platformName,\n      primaryText,\n      secondaryText,\n      state = 'connected',\n      tone = 'default',\n      badgeText,\n      suffix,\n      trailing,\n      onClick,\n      shimmerOnMount = false,\n      className,\n      testId,\n    },\n    ref\n  ) {\n    const isInteractive = Boolean(onClick);\n\n    const [showShimmer, setShowShimmer] = React.useState<boolean>(false);\n    const hasShimmeredRef = React.useRef<boolean>(false);\n\n    React.useEffect(() => {\n      if (!shimmerOnMount) return;\n      if (hasShimmeredRef.current) return;\n      hasShimmeredRef.current = true;\n\n      setShowShimmer(true);\n      const timeoutId: ReturnType<typeof setTimeout> = setTimeout(() => {\n        setShowShimmer(false);\n      }, 900);\n\n      return () => clearTimeout(timeoutId);\n    }, [shimmerOnMount]);\n\n    const iconMeta = React.useMemo(\n      () => getPlatformIcon(platformIcon),\n      [platformIcon]\n    );\n\n    const brandHex = React.useMemo(\n      () => (iconMeta?.hex ? `#${iconMeta.hex}` : '#6b7280'),\n      [iconMeta]\n    );\n\n    const borderColors = React.useMemo(() => {\n      if (state === 'ready') {\n        const color = hexToRgba('#22c55e', tone === 'faded' ? 0.35 : 0.55);\n        return { base: color, hover: hexToRgba('#22c55e', 0.65) };\n      }\n      if (state === 'error') {\n        const color = hexToRgba('#ef4444', tone === 'faded' ? 0.35 : 0.55);\n        return { base: color, hover: hexToRgba('#ef4444', 0.65) };\n      }\n\n      const baseAlpha = tone === 'faded' ? 0.35 : 0.55;\n      const hoverAlpha = tone === 'faded' ? 0.55 : 0.75;\n      return {\n        base: hexToRgba(brandHex, baseAlpha),\n        hover: hexToRgba(brandHex, hoverAlpha),\n      };\n    }, [brandHex, state, tone]);\n\n    const isTikTok = platformIcon.toLowerCase() === 'tiktok';\n    const tikTokGradient = 'linear-gradient(135deg, #25F4EE, #FE2C55)';\n\n    const wrapperStyle: React.CSSProperties = React.useMemo(() => {\n      const cssVars: React.CSSProperties = {\n        '--pill-border': borderColors.base,\n        '--pill-border-hover': borderColors.hover,\n      } as React.CSSProperties;\n\n      if (!isTikTok || state === 'ready' || state === 'error') {\n        return cssVars;\n      }\n\n      const surface = 'var(--color-bg-surface-1, rgba(246, 247, 248, 0.92))';\n      return {\n        ...cssVars,\n        borderColor: 'transparent',\n        backgroundImage: `linear-gradient(${surface}, ${surface}), ${tikTokGradient}`,\n        backgroundOrigin: 'border-box',\n        backgroundClip: 'padding-box, border-box',\n      };\n    }, [\n      borderColors.base,\n      borderColors.hover,\n      isTikTok,\n      state,\n      tikTokGradient,\n    ]);\n\n    const iconFg = React.useMemo(() => {\n      if (state === 'loading') return '#6b7280';\n      const isTooDark = isBrandDark(brandHex);\n      return isTooDark ? '#9ca3af' : brandHex;\n    }, [brandHex, state]);\n\n    const iconChipStyle: React.CSSProperties | undefined = React.useMemo(() => {\n      if (!isTikTok || state === 'loading') {\n        return { color: iconFg };\n      }\n\n      return {\n        backgroundImage: tikTokGradient,\n        color: '#ffffff',\n      };\n    }, [iconFg, isTikTok, state, tikTokGradient]);\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (!isInteractive) return;\n        if (event.key === 'Enter' || event.key === ' ') {\n          event.preventDefault();\n          onClick?.();\n        }\n      },\n      [isInteractive, onClick]\n    );\n\n    const hasSecondary = Boolean(\n      secondaryText && secondaryText.trim().length > 0\n    );\n\n    return (\n      <div\n        ref={ref}\n        role={isInteractive ? 'button' : undefined}\n        tabIndex={isInteractive ? 0 : undefined}\n        onClick={isInteractive ? onClick : undefined}\n        onKeyDown={handleKeyDown}\n        className={cn(\n          'group relative inline-flex max-w-full items-center gap-1.5 overflow-hidden rounded-full border px-3 py-2 min-h-[44px] text-xs font-medium',\n          'border-(--pill-border) hover:border-(--pill-border-hover)',\n          'bg-surface-1 dark:bg-surface-1/60 dark:backdrop-blur-sm',\n          'text-secondary-token hover:text-primary-token',\n          'transform-gpu transition-all hover:bg-surface-2 dark:hover:bg-surface-2/60 hover:-translate-y-px hover:shadow-sm hover:shadow-black/10 dark:hover:shadow-black/40',\n          isInteractive\n            ? 'cursor-pointer focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-0 active:scale-[0.98] active:bg-surface-2'\n            : 'cursor-default',\n          tone === 'faded' &&\n            'bg-surface-1/60 hover:bg-surface-1 text-secondary-token/85 hover:text-primary-token',\n          state === 'hidden' && 'opacity-60',\n          state === 'loading' && 'animate-pulse motion-reduce:animate-none',\n          className\n        )}\n        style={wrapperStyle}\n        data-testid={testId}\n        aria-label={isInteractive ? `Select ${platformName}` : undefined}\n      >\n        {showShimmer ? (\n          <span\n            aria-hidden='true'\n            className='pointer-events-none absolute inset-0 animate-shimmer motion-reduce:animate-none opacity-30 dark:opacity-20'\n            style={{\n              backgroundImage:\n                'linear-gradient(90deg, transparent, rgba(255,255,255,0.28), transparent)',\n              backgroundSize: '200% 100%',\n            }}\n          />\n        ) : null}\n\n        <span\n          className='flex shrink-0 items-center justify-center rounded-full bg-surface-2/60 p-0.5 transition-colors'\n          style={{ ...iconChipStyle }}\n          aria-hidden='true'\n        >\n          <SocialIcon platform={platformIcon} className='h-3.5 w-3.5' />\n        </span>\n\n        <div className='min-w-0 max-w-[180px] truncate sm:max-w-[240px]'>\n          <span className='truncate'>{primaryText}</span>\n          {hasSecondary ? (\n            <span className='ml-2 truncate text-[10px] text-tertiary-token/80'>\n              {secondaryText}\n            </span>\n          ) : null}\n        </div>\n\n        {badgeText ? (\n          <span className='shrink-0 rounded-full bg-surface-2 px-1.5 py-0.5 text-[10px] font-medium text-secondary-token ring-1 ring-subtle'>\n            {badgeText}\n          </span>\n        ) : null}\n\n        {suffix ? (\n          <span className='ml-0.5 shrink-0 text-[10px]' aria-hidden='true'>\n            {suffix}\n          </span>\n        ) : null}\n\n        {trailing ? (\n          <div className='relative ml-1 shrink-0'>{trailing}</div>\n        ) : null}\n      </div>\n    );\n  }\n);\n\nPlatformPill.displayName = 'PlatformPill';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noStaticElementInteractions",
      "severity": "warning",
      "description": "Static Elements should not be interactive.",
      "message": [
        {
          "elements": [],
          "content": "Static Elements should not be interactive."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "To add interactivity such as a mouse or key event listener to a static element, give the element an appropriate role value."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/dashboard/atoms/PlatformPill.tsx" },
        "span": [4458, 5869],
        "sourceCode": "'use client';\n\nimport * as React from 'react';\nimport { getPlatformIcon, SocialIcon } from '@/components/atoms/SocialIcon';\nimport { cn } from '@/lib/utils';\nimport { hexToRgba, isBrandDark } from '@/lib/utils/color';\n\nexport type PlatformPillState =\n  | 'connected'\n  | 'ready'\n  | 'error'\n  | 'hidden'\n  | 'loading';\n\nexport type PlatformPillTone = 'default' | 'faded';\n\nexport interface PlatformPillProps {\n  platformIcon: string;\n  platformName: string;\n  primaryText: string;\n  secondaryText?: string;\n  state?: PlatformPillState;\n  tone?: PlatformPillTone;\n  badgeText?: string;\n  suffix?: React.ReactNode;\n  trailing?: React.ReactNode;\n  onClick?: () => void;\n  shimmerOnMount?: boolean;\n  className?: string;\n  testId?: string;\n}\n\nexport const PlatformPill = React.forwardRef<HTMLDivElement, PlatformPillProps>(\n  function PlatformPill(\n    {\n      platformIcon,\n      platformName,\n      primaryText,\n      secondaryText,\n      state = 'connected',\n      tone = 'default',\n      badgeText,\n      suffix,\n      trailing,\n      onClick,\n      shimmerOnMount = false,\n      className,\n      testId,\n    },\n    ref\n  ) {\n    const isInteractive = Boolean(onClick);\n\n    const [showShimmer, setShowShimmer] = React.useState<boolean>(false);\n    const hasShimmeredRef = React.useRef<boolean>(false);\n\n    React.useEffect(() => {\n      if (!shimmerOnMount) return;\n      if (hasShimmeredRef.current) return;\n      hasShimmeredRef.current = true;\n\n      setShowShimmer(true);\n      const timeoutId: ReturnType<typeof setTimeout> = setTimeout(() => {\n        setShowShimmer(false);\n      }, 900);\n\n      return () => clearTimeout(timeoutId);\n    }, [shimmerOnMount]);\n\n    const iconMeta = React.useMemo(\n      () => getPlatformIcon(platformIcon),\n      [platformIcon]\n    );\n\n    const brandHex = React.useMemo(\n      () => (iconMeta?.hex ? `#${iconMeta.hex}` : '#6b7280'),\n      [iconMeta]\n    );\n\n    const borderColors = React.useMemo(() => {\n      if (state === 'ready') {\n        const color = hexToRgba('#22c55e', tone === 'faded' ? 0.35 : 0.55);\n        return { base: color, hover: hexToRgba('#22c55e', 0.65) };\n      }\n      if (state === 'error') {\n        const color = hexToRgba('#ef4444', tone === 'faded' ? 0.35 : 0.55);\n        return { base: color, hover: hexToRgba('#ef4444', 0.65) };\n      }\n\n      const baseAlpha = tone === 'faded' ? 0.35 : 0.55;\n      const hoverAlpha = tone === 'faded' ? 0.55 : 0.75;\n      return {\n        base: hexToRgba(brandHex, baseAlpha),\n        hover: hexToRgba(brandHex, hoverAlpha),\n      };\n    }, [brandHex, state, tone]);\n\n    const isTikTok = platformIcon.toLowerCase() === 'tiktok';\n    const tikTokGradient = 'linear-gradient(135deg, #25F4EE, #FE2C55)';\n\n    const wrapperStyle: React.CSSProperties = React.useMemo(() => {\n      const cssVars: React.CSSProperties = {\n        '--pill-border': borderColors.base,\n        '--pill-border-hover': borderColors.hover,\n      } as React.CSSProperties;\n\n      if (!isTikTok || state === 'ready' || state === 'error') {\n        return cssVars;\n      }\n\n      const surface = 'var(--color-bg-surface-1, rgba(246, 247, 248, 0.92))';\n      return {\n        ...cssVars,\n        borderColor: 'transparent',\n        backgroundImage: `linear-gradient(${surface}, ${surface}), ${tikTokGradient}`,\n        backgroundOrigin: 'border-box',\n        backgroundClip: 'padding-box, border-box',\n      };\n    }, [\n      borderColors.base,\n      borderColors.hover,\n      isTikTok,\n      state,\n      tikTokGradient,\n    ]);\n\n    const iconFg = React.useMemo(() => {\n      if (state === 'loading') return '#6b7280';\n      const isTooDark = isBrandDark(brandHex);\n      return isTooDark ? '#9ca3af' : brandHex;\n    }, [brandHex, state]);\n\n    const iconChipStyle: React.CSSProperties | undefined = React.useMemo(() => {\n      if (!isTikTok || state === 'loading') {\n        return { color: iconFg };\n      }\n\n      return {\n        backgroundImage: tikTokGradient,\n        color: '#ffffff',\n      };\n    }, [iconFg, isTikTok, state, tikTokGradient]);\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (!isInteractive) return;\n        if (event.key === 'Enter' || event.key === ' ') {\n          event.preventDefault();\n          onClick?.();\n        }\n      },\n      [isInteractive, onClick]\n    );\n\n    const hasSecondary = Boolean(\n      secondaryText && secondaryText.trim().length > 0\n    );\n\n    return (\n      <div\n        ref={ref}\n        role={isInteractive ? 'button' : undefined}\n        tabIndex={isInteractive ? 0 : undefined}\n        onClick={isInteractive ? onClick : undefined}\n        onKeyDown={handleKeyDown}\n        className={cn(\n          'group relative inline-flex max-w-full items-center gap-1.5 overflow-hidden rounded-full border px-3 py-2 min-h-[44px] text-xs font-medium',\n          'border-(--pill-border) hover:border-(--pill-border-hover)',\n          'bg-surface-1 dark:bg-surface-1/60 dark:backdrop-blur-sm',\n          'text-secondary-token hover:text-primary-token',\n          'transform-gpu transition-all hover:bg-surface-2 dark:hover:bg-surface-2/60 hover:-translate-y-px hover:shadow-sm hover:shadow-black/10 dark:hover:shadow-black/40',\n          isInteractive\n            ? 'cursor-pointer focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-0 active:scale-[0.98] active:bg-surface-2'\n            : 'cursor-default',\n          tone === 'faded' &&\n            'bg-surface-1/60 hover:bg-surface-1 text-secondary-token/85 hover:text-primary-token',\n          state === 'hidden' && 'opacity-60',\n          state === 'loading' && 'animate-pulse motion-reduce:animate-none',\n          className\n        )}\n        style={wrapperStyle}\n        data-testid={testId}\n        aria-label={isInteractive ? `Select ${platformName}` : undefined}\n      >\n        {showShimmer ? (\n          <span\n            aria-hidden='true'\n            className='pointer-events-none absolute inset-0 animate-shimmer motion-reduce:animate-none opacity-30 dark:opacity-20'\n            style={{\n              backgroundImage:\n                'linear-gradient(90deg, transparent, rgba(255,255,255,0.28), transparent)',\n              backgroundSize: '200% 100%',\n            }}\n          />\n        ) : null}\n\n        <span\n          className='flex shrink-0 items-center justify-center rounded-full bg-surface-2/60 p-0.5 transition-colors'\n          style={{ ...iconChipStyle }}\n          aria-hidden='true'\n        >\n          <SocialIcon platform={platformIcon} className='h-3.5 w-3.5' />\n        </span>\n\n        <div className='min-w-0 max-w-[180px] truncate sm:max-w-[240px]'>\n          <span className='truncate'>{primaryText}</span>\n          {hasSecondary ? (\n            <span className='ml-2 truncate text-[10px] text-tertiary-token/80'>\n              {secondaryText}\n            </span>\n          ) : null}\n        </div>\n\n        {badgeText ? (\n          <span className='shrink-0 rounded-full bg-surface-2 px-1.5 py-0.5 text-[10px] font-medium text-secondary-token ring-1 ring-subtle'>\n            {badgeText}\n          </span>\n        ) : null}\n\n        {suffix ? (\n          <span className='ml-0.5 shrink-0 text-[10px]' aria-hidden='true'>\n            {suffix}\n          </span>\n        ) : null}\n\n        {trailing ? (\n          <div className='relative ml-1 shrink-0'>{trailing}</div>\n        ) : null}\n      </div>\n    );\n  }\n);\n\nPlatformPill.displayName = 'PlatformPill';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/dashboard/atoms/PlatformPill.tsx" },
        "span": [4458, 5869],
        "sourceCode": "'use client';\n\nimport * as React from 'react';\nimport { getPlatformIcon, SocialIcon } from '@/components/atoms/SocialIcon';\nimport { cn } from '@/lib/utils';\nimport { hexToRgba, isBrandDark } from '@/lib/utils/color';\n\nexport type PlatformPillState =\n  | 'connected'\n  | 'ready'\n  | 'error'\n  | 'hidden'\n  | 'loading';\n\nexport type PlatformPillTone = 'default' | 'faded';\n\nexport interface PlatformPillProps {\n  platformIcon: string;\n  platformName: string;\n  primaryText: string;\n  secondaryText?: string;\n  state?: PlatformPillState;\n  tone?: PlatformPillTone;\n  badgeText?: string;\n  suffix?: React.ReactNode;\n  trailing?: React.ReactNode;\n  onClick?: () => void;\n  shimmerOnMount?: boolean;\n  className?: string;\n  testId?: string;\n}\n\nexport const PlatformPill = React.forwardRef<HTMLDivElement, PlatformPillProps>(\n  function PlatformPill(\n    {\n      platformIcon,\n      platformName,\n      primaryText,\n      secondaryText,\n      state = 'connected',\n      tone = 'default',\n      badgeText,\n      suffix,\n      trailing,\n      onClick,\n      shimmerOnMount = false,\n      className,\n      testId,\n    },\n    ref\n  ) {\n    const isInteractive = Boolean(onClick);\n\n    const [showShimmer, setShowShimmer] = React.useState<boolean>(false);\n    const hasShimmeredRef = React.useRef<boolean>(false);\n\n    React.useEffect(() => {\n      if (!shimmerOnMount) return;\n      if (hasShimmeredRef.current) return;\n      hasShimmeredRef.current = true;\n\n      setShowShimmer(true);\n      const timeoutId: ReturnType<typeof setTimeout> = setTimeout(() => {\n        setShowShimmer(false);\n      }, 900);\n\n      return () => clearTimeout(timeoutId);\n    }, [shimmerOnMount]);\n\n    const iconMeta = React.useMemo(\n      () => getPlatformIcon(platformIcon),\n      [platformIcon]\n    );\n\n    const brandHex = React.useMemo(\n      () => (iconMeta?.hex ? `#${iconMeta.hex}` : '#6b7280'),\n      [iconMeta]\n    );\n\n    const borderColors = React.useMemo(() => {\n      if (state === 'ready') {\n        const color = hexToRgba('#22c55e', tone === 'faded' ? 0.35 : 0.55);\n        return { base: color, hover: hexToRgba('#22c55e', 0.65) };\n      }\n      if (state === 'error') {\n        const color = hexToRgba('#ef4444', tone === 'faded' ? 0.35 : 0.55);\n        return { base: color, hover: hexToRgba('#ef4444', 0.65) };\n      }\n\n      const baseAlpha = tone === 'faded' ? 0.35 : 0.55;\n      const hoverAlpha = tone === 'faded' ? 0.55 : 0.75;\n      return {\n        base: hexToRgba(brandHex, baseAlpha),\n        hover: hexToRgba(brandHex, hoverAlpha),\n      };\n    }, [brandHex, state, tone]);\n\n    const isTikTok = platformIcon.toLowerCase() === 'tiktok';\n    const tikTokGradient = 'linear-gradient(135deg, #25F4EE, #FE2C55)';\n\n    const wrapperStyle: React.CSSProperties = React.useMemo(() => {\n      const cssVars: React.CSSProperties = {\n        '--pill-border': borderColors.base,\n        '--pill-border-hover': borderColors.hover,\n      } as React.CSSProperties;\n\n      if (!isTikTok || state === 'ready' || state === 'error') {\n        return cssVars;\n      }\n\n      const surface = 'var(--color-bg-surface-1, rgba(246, 247, 248, 0.92))';\n      return {\n        ...cssVars,\n        borderColor: 'transparent',\n        backgroundImage: `linear-gradient(${surface}, ${surface}), ${tikTokGradient}`,\n        backgroundOrigin: 'border-box',\n        backgroundClip: 'padding-box, border-box',\n      };\n    }, [\n      borderColors.base,\n      borderColors.hover,\n      isTikTok,\n      state,\n      tikTokGradient,\n    ]);\n\n    const iconFg = React.useMemo(() => {\n      if (state === 'loading') return '#6b7280';\n      const isTooDark = isBrandDark(brandHex);\n      return isTooDark ? '#9ca3af' : brandHex;\n    }, [brandHex, state]);\n\n    const iconChipStyle: React.CSSProperties | undefined = React.useMemo(() => {\n      if (!isTikTok || state === 'loading') {\n        return { color: iconFg };\n      }\n\n      return {\n        backgroundImage: tikTokGradient,\n        color: '#ffffff',\n      };\n    }, [iconFg, isTikTok, state, tikTokGradient]);\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (!isInteractive) return;\n        if (event.key === 'Enter' || event.key === ' ') {\n          event.preventDefault();\n          onClick?.();\n        }\n      },\n      [isInteractive, onClick]\n    );\n\n    const hasSecondary = Boolean(\n      secondaryText && secondaryText.trim().length > 0\n    );\n\n    return (\n      <div\n        ref={ref}\n        role={isInteractive ? 'button' : undefined}\n        tabIndex={isInteractive ? 0 : undefined}\n        onClick={isInteractive ? onClick : undefined}\n        onKeyDown={handleKeyDown}\n        className={cn(\n          'group relative inline-flex max-w-full items-center gap-1.5 overflow-hidden rounded-full border px-3 py-2 min-h-[44px] text-xs font-medium',\n          'border-(--pill-border) hover:border-(--pill-border-hover)',\n          'bg-surface-1 dark:bg-surface-1/60 dark:backdrop-blur-sm',\n          'text-secondary-token hover:text-primary-token',\n          'transform-gpu transition-all hover:bg-surface-2 dark:hover:bg-surface-2/60 hover:-translate-y-px hover:shadow-sm hover:shadow-black/10 dark:hover:shadow-black/40',\n          isInteractive\n            ? 'cursor-pointer focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-0 active:scale-[0.98] active:bg-surface-2'\n            : 'cursor-default',\n          tone === 'faded' &&\n            'bg-surface-1/60 hover:bg-surface-1 text-secondary-token/85 hover:text-primary-token',\n          state === 'hidden' && 'opacity-60',\n          state === 'loading' && 'animate-pulse motion-reduce:animate-none',\n          className\n        )}\n        style={wrapperStyle}\n        data-testid={testId}\n        aria-label={isInteractive ? `Select ${platformName}` : undefined}\n      >\n        {showShimmer ? (\n          <span\n            aria-hidden='true'\n            className='pointer-events-none absolute inset-0 animate-shimmer motion-reduce:animate-none opacity-30 dark:opacity-20'\n            style={{\n              backgroundImage:\n                'linear-gradient(90deg, transparent, rgba(255,255,255,0.28), transparent)',\n              backgroundSize: '200% 100%',\n            }}\n          />\n        ) : null}\n\n        <span\n          className='flex shrink-0 items-center justify-center rounded-full bg-surface-2/60 p-0.5 transition-colors'\n          style={{ ...iconChipStyle }}\n          aria-hidden='true'\n        >\n          <SocialIcon platform={platformIcon} className='h-3.5 w-3.5' />\n        </span>\n\n        <div className='min-w-0 max-w-[180px] truncate sm:max-w-[240px]'>\n          <span className='truncate'>{primaryText}</span>\n          {hasSecondary ? (\n            <span className='ml-2 truncate text-[10px] text-tertiary-token/80'>\n              {secondaryText}\n            </span>\n          ) : null}\n        </div>\n\n        {badgeText ? (\n          <span className='shrink-0 rounded-full bg-surface-2 px-1.5 py-0.5 text-[10px] font-medium text-secondary-token ring-1 ring-subtle'>\n            {badgeText}\n          </span>\n        ) : null}\n\n        {suffix ? (\n          <span className='ml-0.5 shrink-0 text-[10px]' aria-hidden='true'>\n            {suffix}\n          </span>\n        ) : null}\n\n        {trailing ? (\n          <div className='relative ml-1 shrink-0'>{trailing}</div>\n        ) : null}\n      </div>\n    );\n  }\n);\n\nPlatformPill.displayName = 'PlatformPill';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/molecules/CopyToClipboardButton.tsx"
        },
        "span": [4227, 4240],
        "sourceCode": "'use client';\n\nimport { Button } from '@jovie/ui';\nimport { useState } from 'react';\nimport { Icon } from '@/components/atoms/Icon';\nimport { cn } from '@/lib/utils';\nimport { getBaseUrl } from '@/lib/utils/platform-detection';\n\ntype CopyStatus = 'idle' | 'success' | 'error';\n\nexport interface CopyToClipboardButtonProps {\n  relativePath: string; // e.g. '/artist-handle'\n  idleLabel?: string;\n  successLabel?: string;\n  errorLabel?: string;\n  className?: string;\n  iconName?: string;\n  onCopySuccess?: () => void;\n  onCopyError?: () => void;\n}\n\nexport function CopyToClipboardButton({\n  relativePath,\n  idleLabel = 'Copy URL',\n  successLabel = '✓ Copied!',\n  errorLabel = 'Failed to copy',\n  className,\n  iconName,\n  onCopySuccess,\n  onCopyError,\n}: CopyToClipboardButtonProps) {\n  const [status, setStatus] = useState<CopyStatus>('idle');\n\n  const fallbackCopy = (text: string): boolean => {\n    try {\n      // Create a temporary textarea element\n      const textarea = document.createElement('textarea');\n      textarea.value = text;\n      textarea.style.position = 'fixed';\n      textarea.style.left = '-999999px';\n      textarea.style.top = '-999999px';\n      document.body.appendChild(textarea);\n\n      // Select and copy the text\n      textarea.focus();\n      textarea.select();\n      const successful = document.execCommand('copy');\n\n      // Clean up\n      document.body.removeChild(textarea);\n\n      return successful;\n    } catch (error) {\n      console.error('Fallback copy failed:', error);\n      return false;\n    }\n  };\n\n  const onCopy = async () => {\n    const url = `${getBaseUrl()}${relativePath}`;\n    let copySuccess = false;\n\n    try {\n      // Try modern clipboard API first\n      if (navigator.clipboard && navigator.clipboard.writeText) {\n        await navigator.clipboard.writeText(url);\n        copySuccess = true;\n      } else {\n        // Fall back to textarea selection method\n        copySuccess = fallbackCopy(url);\n      }\n\n      if (copySuccess) {\n        setStatus('success');\n        onCopySuccess?.();\n      } else {\n        setStatus('error');\n        onCopyError?.();\n      }\n    } catch (error) {\n      console.error('Failed to copy URL:', error);\n\n      // Try fallback method if modern API failed\n      try {\n        copySuccess = fallbackCopy(url);\n\n        if (copySuccess) {\n          setStatus('success');\n          onCopySuccess?.();\n        } else {\n          setStatus('error');\n          onCopyError?.();\n        }\n      } catch (fallbackError) {\n        console.error('Both copy methods failed:', fallbackError);\n        setStatus('error');\n        onCopyError?.();\n      }\n    } finally {\n      setTimeout(() => setStatus('idle'), 2000);\n    }\n  };\n\n  // Build status-based styling for visual feedback\n  const statusStyles = cn(\n    // Base transition for smooth color changes\n    'transition-colors duration-200',\n    // Success state: green background and text\n    status === 'success' &&\n      'bg-emerald-500/10 text-emerald-600 hover:bg-emerald-500/20 dark:text-emerald-200',\n    // Error state: red background and text\n    status === 'error' &&\n      'bg-red-500/10 text-red-600 hover:bg-red-500/20 dark:text-red-200',\n    // User-provided className\n    className\n  );\n\n  return (\n    <div className='relative'>\n      <Button\n        variant='secondary'\n        size='sm'\n        onClick={onCopy}\n        className={statusStyles}\n        data-status={status}\n      >\n        {iconName ? (\n          <>\n            <Icon\n              name={\n                status === 'success'\n                  ? 'Check'\n                  : status === 'error'\n                    ? 'X'\n                    : iconName\n              }\n              className='h-4 w-4'\n              aria-hidden='true'\n            />\n            <span className='sr-only'>\n              {status === 'success'\n                ? successLabel\n                : status === 'error'\n                  ? errorLabel\n                  : idleLabel}\n            </span>\n          </>\n        ) : status === 'success' ? (\n          successLabel\n        ) : status === 'error' ? (\n          errorLabel\n        ) : (\n          idleLabel\n        )}\n      </Button>\n      <span className='sr-only' aria-live='polite' role='status'>\n        {status === 'success'\n          ? 'Profile URL copied to clipboard'\n          : status === 'error'\n            ? 'Failed to copy profile URL'\n            : ''}\n      </span>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/molecules/PhoneMockupPreview.tsx"
        },
        "span": [7676, 7884],
        "sourceCode": "'use client';\n\nimport { AnimatePresence, motion } from 'framer-motion';\nimport Image from 'next/image';\nimport { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport interface PhoneMockupPreviewProps {\n  username: string;\n  avatarUrl?: string | null;\n  links: Array<{\n    id: string;\n    title: string;\n    url: string;\n    platform: string;\n    isVisible: boolean;\n  }>;\n  className?: string;\n}\n\nexport function PhoneMockupPreview({\n  username,\n  avatarUrl,\n  links,\n  className,\n}: PhoneMockupPreviewProps) {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [activeLink, setActiveLink] = useState<string | null>(null);\n\n  // Simulate loading state\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setIsLoaded(true);\n    }, 300);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Filter visible links\n  const visibleLinks = links.filter(link => link.isVisible);\n\n  return (\n    <div className={cn('relative', className)}>\n      {/* Glass background */}\n      <div\n        className={cn(\n          'absolute inset-0 -z-10 rounded-[2.5rem]',\n          'bg-surface-1/70 dark:bg-surface-1/50',\n          'backdrop-blur-xl border border-white/20',\n          'shadow-[0_25px_50px_-12px_rgba(0,0,0,0.15)]',\n          'transition-all duration-300',\n          'pointer-events-none'\n        )}\n        aria-hidden='true'\n      />\n\n      {/* Phone frame */}\n      <div\n        className={cn(\n          'relative w-full max-w-[300px] mx-auto',\n          'aspect-9/19 rounded-[2.5rem] p-2',\n          'dark bg-surface-2 text-primary-token',\n          'shadow-2xl',\n          'overflow-hidden',\n          'border-10 border-strong',\n          'transition-all duration-300'\n        )}\n      >\n        {/* Phone notch */}\n        <div className='absolute top-0 left-1/2 -translate-x-1/2 w-1/3 h-6 bg-surface-2 rounded-b-xl z-10' />\n\n        {/* Phone screen */}\n        <div\n          className={cn(\n            'relative w-full h-full rounded-3xl overflow-hidden',\n            'bg-surface-1',\n            'transition-colors duration-300'\n          )}\n        >\n          {/* Profile header */}\n          <div className='relative h-40 bg-linear-to-br from-indigo-500 to-purple-600'>\n            <div className='absolute inset-0 bg-linear-to-t from-black/30 to-transparent' />\n\n            <div className='relative z-10 flex flex-col items-center justify-center h-full pt-6 px-6'>\n              {/* Avatar */}\n              <div\n                className={cn(\n                  'w-20 h-20 rounded-full mb-3',\n                  'border-4 border-white/20',\n                  'bg-surface-1',\n                  'overflow-hidden',\n                  'shadow-lg',\n                  'transition-all duration-300',\n                  isLoaded ? 'opacity-100 scale-100' : 'opacity-0 scale-90'\n                )}\n              >\n                {avatarUrl ? (\n                  <Image\n                    src={avatarUrl}\n                    alt={username}\n                    fill\n                    sizes='80px'\n                    className='object-cover'\n                    onLoad={() => setIsLoaded(true)}\n                  />\n                ) : (\n                  <div className='w-full h-full flex items-center justify-center bg-surface-2'>\n                    <span className='text-2xl font-bold text-primary-token'>\n                      {username.charAt(0).toUpperCase()}\n                    </span>\n                  </div>\n                )}\n              </div>\n\n              {/* Username */}\n              <h1\n                className={cn(\n                  'text-xl font-bold text-white text-center',\n                  'transition-all duration-300',\n                  isLoaded\n                    ? 'opacity-100 translate-y-0'\n                    : 'opacity-0 translate-y-2'\n                )}\n              >\n                @{username}\n              </h1>\n\n              {/* Bio */}\n              <p\n                className={cn(\n                  'text-sm text-white/80 text-center mt-1 max-w-xs',\n                  'transition-all duration-300 delay-100',\n                  isLoaded\n                    ? 'opacity-100 translate-y-0'\n                    : 'opacity-0 translate-y-2'\n                )}\n              >\n                Tap a link below to visit\n              </p>\n            </div>\n          </div>\n\n          {/* Links list */}\n          <div\n            className={cn(\n              'p-4 space-y-3 h-[calc(100%-10rem)] overflow-y-auto',\n              'transition-all duration-300'\n            )}\n          >\n            <AnimatePresence>\n              {visibleLinks.length > 0 ? (\n                visibleLinks.map((link, index) => (\n                  <motion.div\n                    key={link.id}\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{\n                      opacity: isLoaded ? 1 : 0,\n                      y: isLoaded ? 0 : 10,\n                      transition: {\n                        delay: 0.1 + index * 0.05,\n                        duration: 0.3,\n                        ease: 'easeOut',\n                      },\n                    }}\n                    whileHover={{\n                      scale: 1.02,\n                      transition: { duration: 0.2 },\n                    }}\n                    whileTap={{\n                      scale: 0.98,\n                      transition: { duration: 0.1 },\n                    }}\n                    onHoverStart={() => setActiveLink(link.id)}\n                    onHoverEnd={() => setActiveLink(null)}\n                    onClick={event => event.preventDefault()}\n                    role='presentation'\n                    aria-hidden='true'\n                    tabIndex={-1}\n                    className={cn(\n                      'relative block p-4 rounded-xl',\n                      'bg-surface-1 hover:bg-surface-2',\n                      'border border-default',\n                      'shadow-sm hover:shadow-md',\n                      'transition-all duration-200',\n                      'overflow-hidden',\n                      activeLink === link.id && 'ring-2 ring-primary-500/20'\n                    )}\n                  >\n                    <div className='flex items-center gap-3'>\n                      <div\n                        className={cn(\n                          'shrink-0 w-10 h-10 rounded-lg',\n                          'flex items-center justify-center',\n                          'bg-surface-0',\n                          'shadow-sm',\n                          'text-primary-token',\n                          'transition-all duration-200'\n                        )}\n                      >\n                        <span\n                          className={cn(\n                            'w-5 h-5',\n                            getPlatformIcon(link.platform),\n                            link.platform === 'tiktok' &&\n                              'text-black dark:text-white'\n                          )}\n                        />\n                      </div>\n\n                      <div className='min-w-0 flex-1'>\n                        <h3 className='text-sm font-medium text-primary-token truncate'>\n                          {link.title || getPlatformName(link.platform)}\n                        </h3>\n                        <p className='text-xs text-secondary-token truncate'>\n                          {link.url\n                            .replace(/^https?:\\/\\//, '')\n                            .replace(/\\/$/, '')}\n                        </p>\n                      </div>\n\n                      <div className='shrink-0 text-tertiary-token'>\n                        <svg\n                          className='w-4 h-4'\n                          fill='none'\n                          viewBox='0 0 24 24'\n                          stroke='currentColor'\n                        >\n                          <path\n                            strokeLinecap='round'\n                            strokeLinejoin='round'\n                            strokeWidth={2}\n                            d='M9 5l7 7-7 7'\n                          />\n                        </svg>\n                      </div>\n                    </div>\n\n                    {/* Glow effect on hover */}\n                    <div\n                      className={cn(\n                        'absolute inset-0 -z-10 opacity-0',\n                        'bg-linear-to-r from-primary-500/5 to-primary-600/5 dark:from-primary-400/5 dark:to-primary-500/5',\n                        'transition-opacity duration-300',\n                        activeLink === link.id && 'opacity-100'\n                      )}\n                      aria-hidden='true'\n                    />\n                  </motion.div>\n                ))\n              ) : (\n                <div className='h-full flex flex-col items-center justify-center text-center p-6'>\n                  <div className='w-12 h-12 rounded-full bg-surface-2 flex items-center justify-center mb-3'>\n                    <svg\n                      className='w-6 h-6 text-tertiary-token'\n                      fill='none'\n                      viewBox='0 0 24 24'\n                      stroke='currentColor'\n                    >\n                      <path\n                        strokeLinecap='round'\n                        strokeLinejoin='round'\n                        strokeWidth={1.5}\n                        d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n                      />\n                    </svg>\n                  </div>\n                  <h3 className='text-sm font-medium text-primary-token mb-1'>\n                    No links yet\n                  </h3>\n                  <p className='text-sm text-secondary-token'>\n                    Add your first link to see it here\n                  </p>\n                </div>\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Helper functions for platform icons and names\nfunction getPlatformIcon(platform: string): string {\n  const icons: Record<string, string> = {\n    instagram: 'i-simple-icons-instagram',\n    twitter: 'i-simple-icons-twitter',\n    tiktok: 'i-simple-icons-tiktok',\n    youtube: 'i-simple-icons-youtube',\n    spotify: 'i-simple-icons-spotify',\n    applemusic: 'i-simple-icons-applemusic',\n    default: 'i-heroicons-link',\n  };\n\n  return icons[platform.toLowerCase()] || icons.default;\n}\n\nfunction getPlatformName(platform: string): string {\n  const names: Record<string, string> = {\n    instagram: 'Instagram',\n    twitter: 'Twitter',\n    tiktok: 'TikTok',\n    youtube: 'YouTube',\n    spotify: 'Spotify',\n    applemusic: 'Apple Music',\n    default: 'Link',\n  };\n\n  return names[platform.toLowerCase()] || names.default;\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/molecules/PhoneMockupPreview.tsx"
        },
        "span": [9031, 9239],
        "sourceCode": "'use client';\n\nimport { AnimatePresence, motion } from 'framer-motion';\nimport Image from 'next/image';\nimport { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport interface PhoneMockupPreviewProps {\n  username: string;\n  avatarUrl?: string | null;\n  links: Array<{\n    id: string;\n    title: string;\n    url: string;\n    platform: string;\n    isVisible: boolean;\n  }>;\n  className?: string;\n}\n\nexport function PhoneMockupPreview({\n  username,\n  avatarUrl,\n  links,\n  className,\n}: PhoneMockupPreviewProps) {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [activeLink, setActiveLink] = useState<string | null>(null);\n\n  // Simulate loading state\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setIsLoaded(true);\n    }, 300);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Filter visible links\n  const visibleLinks = links.filter(link => link.isVisible);\n\n  return (\n    <div className={cn('relative', className)}>\n      {/* Glass background */}\n      <div\n        className={cn(\n          'absolute inset-0 -z-10 rounded-[2.5rem]',\n          'bg-surface-1/70 dark:bg-surface-1/50',\n          'backdrop-blur-xl border border-white/20',\n          'shadow-[0_25px_50px_-12px_rgba(0,0,0,0.15)]',\n          'transition-all duration-300',\n          'pointer-events-none'\n        )}\n        aria-hidden='true'\n      />\n\n      {/* Phone frame */}\n      <div\n        className={cn(\n          'relative w-full max-w-[300px] mx-auto',\n          'aspect-9/19 rounded-[2.5rem] p-2',\n          'dark bg-surface-2 text-primary-token',\n          'shadow-2xl',\n          'overflow-hidden',\n          'border-10 border-strong',\n          'transition-all duration-300'\n        )}\n      >\n        {/* Phone notch */}\n        <div className='absolute top-0 left-1/2 -translate-x-1/2 w-1/3 h-6 bg-surface-2 rounded-b-xl z-10' />\n\n        {/* Phone screen */}\n        <div\n          className={cn(\n            'relative w-full h-full rounded-3xl overflow-hidden',\n            'bg-surface-1',\n            'transition-colors duration-300'\n          )}\n        >\n          {/* Profile header */}\n          <div className='relative h-40 bg-linear-to-br from-indigo-500 to-purple-600'>\n            <div className='absolute inset-0 bg-linear-to-t from-black/30 to-transparent' />\n\n            <div className='relative z-10 flex flex-col items-center justify-center h-full pt-6 px-6'>\n              {/* Avatar */}\n              <div\n                className={cn(\n                  'w-20 h-20 rounded-full mb-3',\n                  'border-4 border-white/20',\n                  'bg-surface-1',\n                  'overflow-hidden',\n                  'shadow-lg',\n                  'transition-all duration-300',\n                  isLoaded ? 'opacity-100 scale-100' : 'opacity-0 scale-90'\n                )}\n              >\n                {avatarUrl ? (\n                  <Image\n                    src={avatarUrl}\n                    alt={username}\n                    fill\n                    sizes='80px'\n                    className='object-cover'\n                    onLoad={() => setIsLoaded(true)}\n                  />\n                ) : (\n                  <div className='w-full h-full flex items-center justify-center bg-surface-2'>\n                    <span className='text-2xl font-bold text-primary-token'>\n                      {username.charAt(0).toUpperCase()}\n                    </span>\n                  </div>\n                )}\n              </div>\n\n              {/* Username */}\n              <h1\n                className={cn(\n                  'text-xl font-bold text-white text-center',\n                  'transition-all duration-300',\n                  isLoaded\n                    ? 'opacity-100 translate-y-0'\n                    : 'opacity-0 translate-y-2'\n                )}\n              >\n                @{username}\n              </h1>\n\n              {/* Bio */}\n              <p\n                className={cn(\n                  'text-sm text-white/80 text-center mt-1 max-w-xs',\n                  'transition-all duration-300 delay-100',\n                  isLoaded\n                    ? 'opacity-100 translate-y-0'\n                    : 'opacity-0 translate-y-2'\n                )}\n              >\n                Tap a link below to visit\n              </p>\n            </div>\n          </div>\n\n          {/* Links list */}\n          <div\n            className={cn(\n              'p-4 space-y-3 h-[calc(100%-10rem)] overflow-y-auto',\n              'transition-all duration-300'\n            )}\n          >\n            <AnimatePresence>\n              {visibleLinks.length > 0 ? (\n                visibleLinks.map((link, index) => (\n                  <motion.div\n                    key={link.id}\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{\n                      opacity: isLoaded ? 1 : 0,\n                      y: isLoaded ? 0 : 10,\n                      transition: {\n                        delay: 0.1 + index * 0.05,\n                        duration: 0.3,\n                        ease: 'easeOut',\n                      },\n                    }}\n                    whileHover={{\n                      scale: 1.02,\n                      transition: { duration: 0.2 },\n                    }}\n                    whileTap={{\n                      scale: 0.98,\n                      transition: { duration: 0.1 },\n                    }}\n                    onHoverStart={() => setActiveLink(link.id)}\n                    onHoverEnd={() => setActiveLink(null)}\n                    onClick={event => event.preventDefault()}\n                    role='presentation'\n                    aria-hidden='true'\n                    tabIndex={-1}\n                    className={cn(\n                      'relative block p-4 rounded-xl',\n                      'bg-surface-1 hover:bg-surface-2',\n                      'border border-default',\n                      'shadow-sm hover:shadow-md',\n                      'transition-all duration-200',\n                      'overflow-hidden',\n                      activeLink === link.id && 'ring-2 ring-primary-500/20'\n                    )}\n                  >\n                    <div className='flex items-center gap-3'>\n                      <div\n                        className={cn(\n                          'shrink-0 w-10 h-10 rounded-lg',\n                          'flex items-center justify-center',\n                          'bg-surface-0',\n                          'shadow-sm',\n                          'text-primary-token',\n                          'transition-all duration-200'\n                        )}\n                      >\n                        <span\n                          className={cn(\n                            'w-5 h-5',\n                            getPlatformIcon(link.platform),\n                            link.platform === 'tiktok' &&\n                              'text-black dark:text-white'\n                          )}\n                        />\n                      </div>\n\n                      <div className='min-w-0 flex-1'>\n                        <h3 className='text-sm font-medium text-primary-token truncate'>\n                          {link.title || getPlatformName(link.platform)}\n                        </h3>\n                        <p className='text-xs text-secondary-token truncate'>\n                          {link.url\n                            .replace(/^https?:\\/\\//, '')\n                            .replace(/\\/$/, '')}\n                        </p>\n                      </div>\n\n                      <div className='shrink-0 text-tertiary-token'>\n                        <svg\n                          className='w-4 h-4'\n                          fill='none'\n                          viewBox='0 0 24 24'\n                          stroke='currentColor'\n                        >\n                          <path\n                            strokeLinecap='round'\n                            strokeLinejoin='round'\n                            strokeWidth={2}\n                            d='M9 5l7 7-7 7'\n                          />\n                        </svg>\n                      </div>\n                    </div>\n\n                    {/* Glow effect on hover */}\n                    <div\n                      className={cn(\n                        'absolute inset-0 -z-10 opacity-0',\n                        'bg-linear-to-r from-primary-500/5 to-primary-600/5 dark:from-primary-400/5 dark:to-primary-500/5',\n                        'transition-opacity duration-300',\n                        activeLink === link.id && 'opacity-100'\n                      )}\n                      aria-hidden='true'\n                    />\n                  </motion.div>\n                ))\n              ) : (\n                <div className='h-full flex flex-col items-center justify-center text-center p-6'>\n                  <div className='w-12 h-12 rounded-full bg-surface-2 flex items-center justify-center mb-3'>\n                    <svg\n                      className='w-6 h-6 text-tertiary-token'\n                      fill='none'\n                      viewBox='0 0 24 24'\n                      stroke='currentColor'\n                    >\n                      <path\n                        strokeLinecap='round'\n                        strokeLinejoin='round'\n                        strokeWidth={1.5}\n                        d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n                      />\n                    </svg>\n                  </div>\n                  <h3 className='text-sm font-medium text-primary-token mb-1'>\n                    No links yet\n                  </h3>\n                  <p className='text-sm text-secondary-token'>\n                    Add your first link to see it here\n                  </p>\n                </div>\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Helper functions for platform icons and names\nfunction getPlatformIcon(platform: string): string {\n  const icons: Record<string, string> = {\n    instagram: 'i-simple-icons-instagram',\n    twitter: 'i-simple-icons-twitter',\n    tiktok: 'i-simple-icons-tiktok',\n    youtube: 'i-simple-icons-youtube',\n    spotify: 'i-simple-icons-spotify',\n    applemusic: 'i-simple-icons-applemusic',\n    default: 'i-heroicons-link',\n  };\n\n  return icons[platform.toLowerCase()] || icons.default;\n}\n\nfunction getPlatformName(platform: string): string {\n  const names: Record<string, string> = {\n    instagram: 'Instagram',\n    twitter: 'Twitter',\n    tiktok: 'TikTok',\n    youtube: 'YouTube',\n    spotify: 'Spotify',\n    applemusic: 'Apple Music',\n    default: 'Link',\n  };\n\n  return names[platform.toLowerCase()] || names.default;\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementToInteractiveRole",
      "severity": "warning",
      "description": "The HTML element ul is non-interactive and should not have an interactive role.",
      "message": [
        { "elements": [], "content": "The HTML element " },
        { "elements": ["Emphasis"], "content": "ul" },
        {
          "elements": [],
          "content": " is non-interactive and should not have an interactive role."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Replace " },
                { "elements": ["Emphasis"], "content": "ul" },
                { "elements": [], "content": " with a div or a span." }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Unsafe fix: Remove the " },
                { "elements": ["Emphasis"], "content": "role" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "import { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Input } from '@jovie/ui';\nimport Image from 'next/image';            <ul\n              ref={resultsListRef}\n              id='artist-search-results'\n              role='listbox'\n              className='max-h-64 overflow-y-auto'\n            >  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 121] } } },
                { "equalLines": { "line_count": 314 } },
                { "diffOp": { "equal": { "range": [121, 212] } } },
                { "diffOp": { "delete": { "range": [212, 241] } } },
                { "diffOp": { "equal": { "range": [241, 306] } } },
                { "equalLines": { "line_count": 77 } },
                { "diffOp": { "equal": { "range": [306, 313] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/molecules/UniversalLinkInputArtistSearchMode.tsx"
        },
        "span": [10178, 10192],
        "sourceCode": "import { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Input } from '@jovie/ui';\nimport Image from 'next/image';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { getPlatformIcon, SocialIcon } from '@/components/atoms/SocialIcon';\nimport { track } from '@/lib/analytics';\nimport {\n  type SpotifyArtistResult,\n  useArtistSearch,\n} from '@/lib/hooks/useArtistSearch';\nimport { cn } from '@/lib/utils';\nimport { isBrandDark } from '@/lib/utils/color';\nimport {\n  type DetectedLink,\n  validateLink,\n} from '@/lib/utils/platform-detection';\n\nimport {\n  ARTIST_SEARCH_PLATFORMS,\n  type ArtistSearchProvider,\n} from './universalLinkInput.constants';\nimport { type CursorPosition } from './useInputFocusController';\n\ninterface ArtistSearchModeProps {\n  provider: ArtistSearchProvider;\n  creatorName?: string;\n  disabled?: boolean;\n  onSelect: (link: DetectedLink) => void;\n  onExit: (nextUrl?: string) => void;\n  onQueryChange?: (value: string) => void;\n  focusInput: (cursor?: CursorPosition) => void;\n  inputRef: React.RefObject<HTMLInputElement>;\n}\n\nfunction formatFollowers(count: number | undefined): string {\n  if (!count) return '';\n  if (count >= 1_000_000) return `${(count / 1_000_000).toFixed(1)}M followers`;\n  if (count >= 1_000) return `${(count / 1_000).toFixed(1)}K followers`;\n  return `${count} followers`;\n}\n\nexport function UniversalLinkInputArtistSearchMode({\n  provider,\n  creatorName,\n  disabled,\n  onSelect,\n  onExit,\n  onQueryChange,\n  inputRef,\n  focusInput,\n}: ArtistSearchModeProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showResults, setShowResults] = useState(false);\n  const [activeResultIndex, setActiveResultIndex] = useState(-1);\n\n  const resultsListRef = React.useRef<HTMLUListElement>(null);\n\n  const { results, state, error, search, clear } = useArtistSearch({\n    debounceMs: 300,\n    limit: 5,\n  });\n\n  const searchPlatform = useMemo(\n    () =>\n      ARTIST_SEARCH_PLATFORMS.find(platform => platform.provider === provider),\n    [provider]\n  );\n  const platformIcon = getPlatformIcon(searchPlatform?.icon || 'spotify');\n  const brandHex = platformIcon?.hex ? `#${platformIcon.hex}` : '#1DB954';\n  const iconIsDark = isBrandDark(brandHex);\n  const iconColor = iconIsDark ? '#ffffff' : brandHex;\n  const iconBg = iconIsDark ? 'rgba(255,255,255,0.08)' : `${brandHex}15`;\n\n  useEffect(() => {\n    setSearchQuery('');\n    setActiveResultIndex(-1);\n    setShowResults(false);\n    clear();\n    focusInput('start');\n  }, [clear, focusInput, provider]);\n\n  const handleArtistSelect = useCallback(\n    (artist: SpotifyArtistResult) => {\n      track('spotify_artist_select', {\n        artist_id: artist.id,\n        artist_name: artist.name,\n        followers: artist.followers,\n        result_count: results.length,\n      });\n\n      const link = validateLink(artist.url);\n      if (link && link.isValid) {\n        const enrichedLink = {\n          ...link,\n          suggestedTitle: artist.name,\n        };\n        onSelect(enrichedLink);\n      }\n\n      setSearchQuery('');\n      setShowResults(false);\n      setActiveResultIndex(-1);\n      clear();\n      onQueryChange?.('');\n      focusInput('end');\n      onExit('https://open.spotify.com/artist/');\n    },\n    [\n      clear,\n      creatorName,\n      focusInput,\n      onExit,\n      onQueryChange,\n      onSelect,\n      results.length,\n    ]\n  );\n\n  const handleSearchInputChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const value = e.target.value;\n      setSearchQuery(value);\n      setActiveResultIndex(-1);\n      search(value);\n      setShowResults(true);\n    },\n    [search]\n  );\n\n  const exitSearchMode = useCallback(() => {\n    setSearchQuery('');\n    setShowResults(false);\n    setActiveResultIndex(-1);\n    clear();\n    focusInput('end');\n    onExit('https://open.spotify.com/artist/');\n  }, [clear, focusInput, onExit]);\n\n  const handleSearchKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (!showResults || results.length === 0) {\n        if (e.key === 'Escape') {\n          e.preventDefault();\n          exitSearchMode();\n        }\n        return;\n      }\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setActiveResultIndex(prev =>\n            prev < results.length - 1 ? prev + 1 : 0\n          );\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setActiveResultIndex(prev =>\n            prev > 0 ? prev - 1 : results.length - 1\n          );\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (activeResultIndex >= 0 && results[activeResultIndex]) {\n            handleArtistSelect(results[activeResultIndex]);\n          }\n          break;\n        case 'Escape':\n          e.preventDefault();\n          if (showResults) {\n            setShowResults(false);\n            setActiveResultIndex(-1);\n          } else {\n            exitSearchMode();\n          }\n          break;\n        case 'Tab':\n          setShowResults(false);\n          setActiveResultIndex(-1);\n          break;\n      }\n    },\n    [\n      activeResultIndex,\n      exitSearchMode,\n      handleArtistSelect,\n      results,\n      showResults,\n    ]\n  );\n\n  useEffect(() => {\n    if (activeResultIndex >= 0 && resultsListRef.current) {\n      const activeItem = resultsListRef.current.children[\n        activeResultIndex\n      ] as HTMLElement;\n      activeItem?.scrollIntoView({ block: 'nearest' });\n    }\n  }, [activeResultIndex]);\n\n  return (\n    <div className='relative w-full'>\n      <div\n        className={cn(\n          'relative flex w-full items-center gap-2 rounded-full border border-default bg-surface-1 px-2 py-1 shadow-xs transition-colors',\n          'focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 focus-within:ring-offset-background',\n          disabled && 'opacity-50'\n        )}\n      >\n        <div className='flex h-10 w-10 items-center justify-center rounded-full shrink-0'>\n          <div\n            className='flex items-center justify-center w-6 h-6 rounded-full'\n            style={{ backgroundColor: iconBg, color: iconColor }}\n            aria-hidden='true'\n          >\n            <SocialIcon\n              platform={searchPlatform?.icon || 'spotify'}\n              className='w-3.5 h-3.5'\n            />\n          </div>\n        </div>\n\n        <label htmlFor='artist-search-input' className='sr-only'>\n          Search Spotify artists\n        </label>\n        <Input\n          ref={inputRef}\n          id='artist-search-input'\n          type='text'\n          inputSize='lg'\n          placeholder='Search Spotify artists...'\n          value={searchQuery}\n          onChange={handleSearchInputChange}\n          onKeyDown={handleSearchKeyDown}\n          onFocus={() => searchQuery.length >= 2 && setShowResults(true)}\n          onBlur={() => setTimeout(() => setShowResults(false), 150)}\n          disabled={disabled}\n          autoCapitalize='none'\n          autoCorrect='off'\n          autoComplete='off'\n          className='border-0 bg-transparent px-0 pr-14 focus-visible:ring-0 focus-visible:ring-offset-0'\n          role='combobox'\n          aria-expanded={showResults && results.length > 0}\n          aria-controls='artist-search-results'\n          aria-activedescendant={\n            activeResultIndex >= 0\n              ? `artist-result-${activeResultIndex}`\n              : undefined\n          }\n          aria-describedby='artist-search-status'\n        />\n\n        <div className='absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2'>\n          {state === 'loading' && (\n            <div className='w-4 h-4 border-2 border-tertiary-token border-t-transparent rounded-full animate-spin motion-reduce:animate-none' />\n          )}\n          <button\n            type='button'\n            onClick={exitSearchMode}\n            className='flex items-center justify-center w-5 h-5 rounded-full text-tertiary-token hover:text-secondary-token hover:bg-surface-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-0'\n            aria-label='Exit search mode'\n          >\n            <XMarkIcon className='w-4 h-4' />\n          </button>\n        </div>\n      </div>\n\n      {showResults && (\n        <div\n          className='absolute z-50 w-full mt-1 rounded-lg border border-subtle bg-surface-1 shadow-lg overflow-hidden'\n          style={{ borderColor: `${brandHex}30` }}\n        >\n          {state === 'loading' && results.length === 0 && (\n            <div className='p-3 space-y-2'>\n              {[...Array(3)].map((_, i) => (\n                <div\n                  key={i}\n                  className='flex items-center gap-3 animate-pulse motion-reduce:animate-none'\n                >\n                  <div className='w-10 h-10 rounded-full bg-surface-3' />\n                  <div className='flex-1 space-y-1'>\n                    <div className='h-4 w-32 bg-surface-3 rounded' />\n                    <div className='h-3 w-20 bg-surface-3 rounded' />\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {state === 'empty' && (\n            <div className='p-4 text-center'>\n              <p className='text-sm text-secondary-token'>No artists found</p>\n              <button\n                type='button'\n                onClick={exitSearchMode}\n                className='mt-2 text-xs text-accent hover:underline'\n              >\n                Add link manually\n              </button>\n            </div>\n          )}\n\n          {state === 'error' && (\n            <div className='p-4 text-center'>\n              <p className='text-sm text-red-500'>{error || 'Search failed'}</p>\n              <button\n                type='button'\n                onClick={exitSearchMode}\n                className='mt-2 text-xs text-accent hover:underline'\n              >\n                Add link manually\n              </button>\n            </div>\n          )}\n\n          {results.length > 0 && (\n            <ul\n              ref={resultsListRef}\n              id='artist-search-results'\n              role='listbox'\n              className='max-h-64 overflow-y-auto'\n            >\n              {results.map((artist, index) => (\n                <li\n                  key={artist.id}\n                  id={`artist-result-${index}`}\n                  role='option'\n                  aria-selected={index === activeResultIndex}\n                  aria-label={`${artist.name}${artist.followers ? `, ${formatFollowers(artist.followers)}` : ''}`}\n                  className={cn(\n                    'flex items-center gap-3 p-3 cursor-pointer transition-colors',\n                    index === activeResultIndex\n                      ? 'bg-surface-2'\n                      : 'hover:bg-surface-2/50'\n                  )}\n                  onClick={() => handleArtistSelect(artist)}\n                  onMouseEnter={() => setActiveResultIndex(index)}\n                >\n                  <div className='w-10 h-10 rounded-full bg-surface-3 overflow-hidden shrink-0 relative'>\n                    {artist.imageUrl ? (\n                      <Image\n                        src={artist.imageUrl}\n                        alt={artist.name}\n                        fill\n                        sizes='40px'\n                        className='object-cover'\n                        unoptimized\n                      />\n                    ) : (\n                      <div className='w-full h-full flex items-center justify-center'>\n                        <SocialIcon\n                          platform='spotify'\n                          className='w-5 h-5 text-tertiary-token'\n                        />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className='flex-1 min-w-0'>\n                    <div className='font-medium text-primary-token truncate'>\n                      {artist.name}\n                    </div>\n                    {artist.followers && (\n                      <div className='text-xs text-tertiary-token'>\n                        {formatFollowers(artist.followers)}\n                      </div>\n                    )}\n                  </div>\n\n                  {artist.verified && (\n                    <div className='shrink-0 text-accent'>\n                      <svg\n                        className='w-4 h-4'\n                        viewBox='0 0 20 20'\n                        fill='currentColor'\n                      >\n                        <path\n                          fillRule='evenodd'\n                          d='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\n                          clipRule='evenodd'\n                        />\n                      </svg>\n                    </div>\n                  )}\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      )}\n\n      <div id='artist-search-status' className='sr-only' aria-live='polite'>\n        {state === 'loading' && 'Searching...'}\n        {state === 'empty' && 'No artists found'}\n        {state === 'error' && (error || 'Search failed')}\n        {state === 'success' &&\n          `${results.length} artists found. Use arrow keys to navigate.`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/useFocusableInteractive",
      "severity": "warning",
      "description": "The HTML element with the interactive role 'option' is not focusable.",
      "message": [
        {
          "elements": [],
          "content": "The HTML element with the interactive role "
        },
        { "elements": ["Emphasis"], "content": "'option'" },
        { "elements": [], "content": " is not focusable." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "A non-interactive HTML element that is not focusable may not be reachable for users that rely on keyboard navigation, even with an added role like "
                },
                { "elements": ["Emphasis"], "content": "'option'" },
                { "elements": [], "content": "." }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Add a " },
                { "elements": ["Emphasis"], "content": "tabIndex" },
                {
                  "elements": [],
                  "content": " attribute to make this element focusable."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/molecules/UniversalLinkInputArtistSearchMode.tsx"
        },
        "span": [10322, 11035],
        "sourceCode": "import { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Input } from '@jovie/ui';\nimport Image from 'next/image';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { getPlatformIcon, SocialIcon } from '@/components/atoms/SocialIcon';\nimport { track } from '@/lib/analytics';\nimport {\n  type SpotifyArtistResult,\n  useArtistSearch,\n} from '@/lib/hooks/useArtistSearch';\nimport { cn } from '@/lib/utils';\nimport { isBrandDark } from '@/lib/utils/color';\nimport {\n  type DetectedLink,\n  validateLink,\n} from '@/lib/utils/platform-detection';\n\nimport {\n  ARTIST_SEARCH_PLATFORMS,\n  type ArtistSearchProvider,\n} from './universalLinkInput.constants';\nimport { type CursorPosition } from './useInputFocusController';\n\ninterface ArtistSearchModeProps {\n  provider: ArtistSearchProvider;\n  creatorName?: string;\n  disabled?: boolean;\n  onSelect: (link: DetectedLink) => void;\n  onExit: (nextUrl?: string) => void;\n  onQueryChange?: (value: string) => void;\n  focusInput: (cursor?: CursorPosition) => void;\n  inputRef: React.RefObject<HTMLInputElement>;\n}\n\nfunction formatFollowers(count: number | undefined): string {\n  if (!count) return '';\n  if (count >= 1_000_000) return `${(count / 1_000_000).toFixed(1)}M followers`;\n  if (count >= 1_000) return `${(count / 1_000).toFixed(1)}K followers`;\n  return `${count} followers`;\n}\n\nexport function UniversalLinkInputArtistSearchMode({\n  provider,\n  creatorName,\n  disabled,\n  onSelect,\n  onExit,\n  onQueryChange,\n  inputRef,\n  focusInput,\n}: ArtistSearchModeProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showResults, setShowResults] = useState(false);\n  const [activeResultIndex, setActiveResultIndex] = useState(-1);\n\n  const resultsListRef = React.useRef<HTMLUListElement>(null);\n\n  const { results, state, error, search, clear } = useArtistSearch({\n    debounceMs: 300,\n    limit: 5,\n  });\n\n  const searchPlatform = useMemo(\n    () =>\n      ARTIST_SEARCH_PLATFORMS.find(platform => platform.provider === provider),\n    [provider]\n  );\n  const platformIcon = getPlatformIcon(searchPlatform?.icon || 'spotify');\n  const brandHex = platformIcon?.hex ? `#${platformIcon.hex}` : '#1DB954';\n  const iconIsDark = isBrandDark(brandHex);\n  const iconColor = iconIsDark ? '#ffffff' : brandHex;\n  const iconBg = iconIsDark ? 'rgba(255,255,255,0.08)' : `${brandHex}15`;\n\n  useEffect(() => {\n    setSearchQuery('');\n    setActiveResultIndex(-1);\n    setShowResults(false);\n    clear();\n    focusInput('start');\n  }, [clear, focusInput, provider]);\n\n  const handleArtistSelect = useCallback(\n    (artist: SpotifyArtistResult) => {\n      track('spotify_artist_select', {\n        artist_id: artist.id,\n        artist_name: artist.name,\n        followers: artist.followers,\n        result_count: results.length,\n      });\n\n      const link = validateLink(artist.url);\n      if (link && link.isValid) {\n        const enrichedLink = {\n          ...link,\n          suggestedTitle: artist.name,\n        };\n        onSelect(enrichedLink);\n      }\n\n      setSearchQuery('');\n      setShowResults(false);\n      setActiveResultIndex(-1);\n      clear();\n      onQueryChange?.('');\n      focusInput('end');\n      onExit('https://open.spotify.com/artist/');\n    },\n    [\n      clear,\n      creatorName,\n      focusInput,\n      onExit,\n      onQueryChange,\n      onSelect,\n      results.length,\n    ]\n  );\n\n  const handleSearchInputChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const value = e.target.value;\n      setSearchQuery(value);\n      setActiveResultIndex(-1);\n      search(value);\n      setShowResults(true);\n    },\n    [search]\n  );\n\n  const exitSearchMode = useCallback(() => {\n    setSearchQuery('');\n    setShowResults(false);\n    setActiveResultIndex(-1);\n    clear();\n    focusInput('end');\n    onExit('https://open.spotify.com/artist/');\n  }, [clear, focusInput, onExit]);\n\n  const handleSearchKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (!showResults || results.length === 0) {\n        if (e.key === 'Escape') {\n          e.preventDefault();\n          exitSearchMode();\n        }\n        return;\n      }\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setActiveResultIndex(prev =>\n            prev < results.length - 1 ? prev + 1 : 0\n          );\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setActiveResultIndex(prev =>\n            prev > 0 ? prev - 1 : results.length - 1\n          );\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (activeResultIndex >= 0 && results[activeResultIndex]) {\n            handleArtistSelect(results[activeResultIndex]);\n          }\n          break;\n        case 'Escape':\n          e.preventDefault();\n          if (showResults) {\n            setShowResults(false);\n            setActiveResultIndex(-1);\n          } else {\n            exitSearchMode();\n          }\n          break;\n        case 'Tab':\n          setShowResults(false);\n          setActiveResultIndex(-1);\n          break;\n      }\n    },\n    [\n      activeResultIndex,\n      exitSearchMode,\n      handleArtistSelect,\n      results,\n      showResults,\n    ]\n  );\n\n  useEffect(() => {\n    if (activeResultIndex >= 0 && resultsListRef.current) {\n      const activeItem = resultsListRef.current.children[\n        activeResultIndex\n      ] as HTMLElement;\n      activeItem?.scrollIntoView({ block: 'nearest' });\n    }\n  }, [activeResultIndex]);\n\n  return (\n    <div className='relative w-full'>\n      <div\n        className={cn(\n          'relative flex w-full items-center gap-2 rounded-full border border-default bg-surface-1 px-2 py-1 shadow-xs transition-colors',\n          'focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 focus-within:ring-offset-background',\n          disabled && 'opacity-50'\n        )}\n      >\n        <div className='flex h-10 w-10 items-center justify-center rounded-full shrink-0'>\n          <div\n            className='flex items-center justify-center w-6 h-6 rounded-full'\n            style={{ backgroundColor: iconBg, color: iconColor }}\n            aria-hidden='true'\n          >\n            <SocialIcon\n              platform={searchPlatform?.icon || 'spotify'}\n              className='w-3.5 h-3.5'\n            />\n          </div>\n        </div>\n\n        <label htmlFor='artist-search-input' className='sr-only'>\n          Search Spotify artists\n        </label>\n        <Input\n          ref={inputRef}\n          id='artist-search-input'\n          type='text'\n          inputSize='lg'\n          placeholder='Search Spotify artists...'\n          value={searchQuery}\n          onChange={handleSearchInputChange}\n          onKeyDown={handleSearchKeyDown}\n          onFocus={() => searchQuery.length >= 2 && setShowResults(true)}\n          onBlur={() => setTimeout(() => setShowResults(false), 150)}\n          disabled={disabled}\n          autoCapitalize='none'\n          autoCorrect='off'\n          autoComplete='off'\n          className='border-0 bg-transparent px-0 pr-14 focus-visible:ring-0 focus-visible:ring-offset-0'\n          role='combobox'\n          aria-expanded={showResults && results.length > 0}\n          aria-controls='artist-search-results'\n          aria-activedescendant={\n            activeResultIndex >= 0\n              ? `artist-result-${activeResultIndex}`\n              : undefined\n          }\n          aria-describedby='artist-search-status'\n        />\n\n        <div className='absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2'>\n          {state === 'loading' && (\n            <div className='w-4 h-4 border-2 border-tertiary-token border-t-transparent rounded-full animate-spin motion-reduce:animate-none' />\n          )}\n          <button\n            type='button'\n            onClick={exitSearchMode}\n            className='flex items-center justify-center w-5 h-5 rounded-full text-tertiary-token hover:text-secondary-token hover:bg-surface-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-0'\n            aria-label='Exit search mode'\n          >\n            <XMarkIcon className='w-4 h-4' />\n          </button>\n        </div>\n      </div>\n\n      {showResults && (\n        <div\n          className='absolute z-50 w-full mt-1 rounded-lg border border-subtle bg-surface-1 shadow-lg overflow-hidden'\n          style={{ borderColor: `${brandHex}30` }}\n        >\n          {state === 'loading' && results.length === 0 && (\n            <div className='p-3 space-y-2'>\n              {[...Array(3)].map((_, i) => (\n                <div\n                  key={i}\n                  className='flex items-center gap-3 animate-pulse motion-reduce:animate-none'\n                >\n                  <div className='w-10 h-10 rounded-full bg-surface-3' />\n                  <div className='flex-1 space-y-1'>\n                    <div className='h-4 w-32 bg-surface-3 rounded' />\n                    <div className='h-3 w-20 bg-surface-3 rounded' />\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {state === 'empty' && (\n            <div className='p-4 text-center'>\n              <p className='text-sm text-secondary-token'>No artists found</p>\n              <button\n                type='button'\n                onClick={exitSearchMode}\n                className='mt-2 text-xs text-accent hover:underline'\n              >\n                Add link manually\n              </button>\n            </div>\n          )}\n\n          {state === 'error' && (\n            <div className='p-4 text-center'>\n              <p className='text-sm text-red-500'>{error || 'Search failed'}</p>\n              <button\n                type='button'\n                onClick={exitSearchMode}\n                className='mt-2 text-xs text-accent hover:underline'\n              >\n                Add link manually\n              </button>\n            </div>\n          )}\n\n          {results.length > 0 && (\n            <ul\n              ref={resultsListRef}\n              id='artist-search-results'\n              role='listbox'\n              className='max-h-64 overflow-y-auto'\n            >\n              {results.map((artist, index) => (\n                <li\n                  key={artist.id}\n                  id={`artist-result-${index}`}\n                  role='option'\n                  aria-selected={index === activeResultIndex}\n                  aria-label={`${artist.name}${artist.followers ? `, ${formatFollowers(artist.followers)}` : ''}`}\n                  className={cn(\n                    'flex items-center gap-3 p-3 cursor-pointer transition-colors',\n                    index === activeResultIndex\n                      ? 'bg-surface-2'\n                      : 'hover:bg-surface-2/50'\n                  )}\n                  onClick={() => handleArtistSelect(artist)}\n                  onMouseEnter={() => setActiveResultIndex(index)}\n                >\n                  <div className='w-10 h-10 rounded-full bg-surface-3 overflow-hidden shrink-0 relative'>\n                    {artist.imageUrl ? (\n                      <Image\n                        src={artist.imageUrl}\n                        alt={artist.name}\n                        fill\n                        sizes='40px'\n                        className='object-cover'\n                        unoptimized\n                      />\n                    ) : (\n                      <div className='w-full h-full flex items-center justify-center'>\n                        <SocialIcon\n                          platform='spotify'\n                          className='w-5 h-5 text-tertiary-token'\n                        />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className='flex-1 min-w-0'>\n                    <div className='font-medium text-primary-token truncate'>\n                      {artist.name}\n                    </div>\n                    {artist.followers && (\n                      <div className='text-xs text-tertiary-token'>\n                        {formatFollowers(artist.followers)}\n                      </div>\n                    )}\n                  </div>\n\n                  {artist.verified && (\n                    <div className='shrink-0 text-accent'>\n                      <svg\n                        className='w-4 h-4'\n                        viewBox='0 0 20 20'\n                        fill='currentColor'\n                      >\n                        <path\n                          fillRule='evenodd'\n                          d='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\n                          clipRule='evenodd'\n                        />\n                      </svg>\n                    </div>\n                  )}\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      )}\n\n      <div id='artist-search-status' className='sr-only' aria-live='polite'>\n        {state === 'loading' && 'Searching...'}\n        {state === 'empty' && 'No artists found'}\n        {state === 'error' && (error || 'Search failed')}\n        {state === 'success' &&\n          `${results.length} artists found. Use arrow keys to navigate.`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useKeyWithClickEvents",
      "severity": "warning",
      "description": "Enforce to have the onClick mouse event with the onKeyUp, the onKeyDown, or the onKeyPress keyboard event.",
      "message": [
        { "elements": [], "content": "Enforce to have the " },
        { "elements": ["Emphasis"], "content": "onClick" },
        { "elements": [], "content": " mouse event with the " },
        { "elements": ["Emphasis"], "content": "onKeyUp" },
        { "elements": [], "content": ", the " },
        { "elements": ["Emphasis"], "content": "onKeyDown" },
        { "elements": [], "content": ", or the " },
        { "elements": ["Emphasis"], "content": "onKeyPress" },
        { "elements": [], "content": " keyboard event." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Actions triggered using mouse events should have corresponding keyboard events to account for keyboard-only navigation."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/molecules/UniversalLinkInputArtistSearchMode.tsx"
        },
        "span": [10322, 11035],
        "sourceCode": "import { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Input } from '@jovie/ui';\nimport Image from 'next/image';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { getPlatformIcon, SocialIcon } from '@/components/atoms/SocialIcon';\nimport { track } from '@/lib/analytics';\nimport {\n  type SpotifyArtistResult,\n  useArtistSearch,\n} from '@/lib/hooks/useArtistSearch';\nimport { cn } from '@/lib/utils';\nimport { isBrandDark } from '@/lib/utils/color';\nimport {\n  type DetectedLink,\n  validateLink,\n} from '@/lib/utils/platform-detection';\n\nimport {\n  ARTIST_SEARCH_PLATFORMS,\n  type ArtistSearchProvider,\n} from './universalLinkInput.constants';\nimport { type CursorPosition } from './useInputFocusController';\n\ninterface ArtistSearchModeProps {\n  provider: ArtistSearchProvider;\n  creatorName?: string;\n  disabled?: boolean;\n  onSelect: (link: DetectedLink) => void;\n  onExit: (nextUrl?: string) => void;\n  onQueryChange?: (value: string) => void;\n  focusInput: (cursor?: CursorPosition) => void;\n  inputRef: React.RefObject<HTMLInputElement>;\n}\n\nfunction formatFollowers(count: number | undefined): string {\n  if (!count) return '';\n  if (count >= 1_000_000) return `${(count / 1_000_000).toFixed(1)}M followers`;\n  if (count >= 1_000) return `${(count / 1_000).toFixed(1)}K followers`;\n  return `${count} followers`;\n}\n\nexport function UniversalLinkInputArtistSearchMode({\n  provider,\n  creatorName,\n  disabled,\n  onSelect,\n  onExit,\n  onQueryChange,\n  inputRef,\n  focusInput,\n}: ArtistSearchModeProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showResults, setShowResults] = useState(false);\n  const [activeResultIndex, setActiveResultIndex] = useState(-1);\n\n  const resultsListRef = React.useRef<HTMLUListElement>(null);\n\n  const { results, state, error, search, clear } = useArtistSearch({\n    debounceMs: 300,\n    limit: 5,\n  });\n\n  const searchPlatform = useMemo(\n    () =>\n      ARTIST_SEARCH_PLATFORMS.find(platform => platform.provider === provider),\n    [provider]\n  );\n  const platformIcon = getPlatformIcon(searchPlatform?.icon || 'spotify');\n  const brandHex = platformIcon?.hex ? `#${platformIcon.hex}` : '#1DB954';\n  const iconIsDark = isBrandDark(brandHex);\n  const iconColor = iconIsDark ? '#ffffff' : brandHex;\n  const iconBg = iconIsDark ? 'rgba(255,255,255,0.08)' : `${brandHex}15`;\n\n  useEffect(() => {\n    setSearchQuery('');\n    setActiveResultIndex(-1);\n    setShowResults(false);\n    clear();\n    focusInput('start');\n  }, [clear, focusInput, provider]);\n\n  const handleArtistSelect = useCallback(\n    (artist: SpotifyArtistResult) => {\n      track('spotify_artist_select', {\n        artist_id: artist.id,\n        artist_name: artist.name,\n        followers: artist.followers,\n        result_count: results.length,\n      });\n\n      const link = validateLink(artist.url);\n      if (link && link.isValid) {\n        const enrichedLink = {\n          ...link,\n          suggestedTitle: artist.name,\n        };\n        onSelect(enrichedLink);\n      }\n\n      setSearchQuery('');\n      setShowResults(false);\n      setActiveResultIndex(-1);\n      clear();\n      onQueryChange?.('');\n      focusInput('end');\n      onExit('https://open.spotify.com/artist/');\n    },\n    [\n      clear,\n      creatorName,\n      focusInput,\n      onExit,\n      onQueryChange,\n      onSelect,\n      results.length,\n    ]\n  );\n\n  const handleSearchInputChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const value = e.target.value;\n      setSearchQuery(value);\n      setActiveResultIndex(-1);\n      search(value);\n      setShowResults(true);\n    },\n    [search]\n  );\n\n  const exitSearchMode = useCallback(() => {\n    setSearchQuery('');\n    setShowResults(false);\n    setActiveResultIndex(-1);\n    clear();\n    focusInput('end');\n    onExit('https://open.spotify.com/artist/');\n  }, [clear, focusInput, onExit]);\n\n  const handleSearchKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (!showResults || results.length === 0) {\n        if (e.key === 'Escape') {\n          e.preventDefault();\n          exitSearchMode();\n        }\n        return;\n      }\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setActiveResultIndex(prev =>\n            prev < results.length - 1 ? prev + 1 : 0\n          );\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setActiveResultIndex(prev =>\n            prev > 0 ? prev - 1 : results.length - 1\n          );\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (activeResultIndex >= 0 && results[activeResultIndex]) {\n            handleArtistSelect(results[activeResultIndex]);\n          }\n          break;\n        case 'Escape':\n          e.preventDefault();\n          if (showResults) {\n            setShowResults(false);\n            setActiveResultIndex(-1);\n          } else {\n            exitSearchMode();\n          }\n          break;\n        case 'Tab':\n          setShowResults(false);\n          setActiveResultIndex(-1);\n          break;\n      }\n    },\n    [\n      activeResultIndex,\n      exitSearchMode,\n      handleArtistSelect,\n      results,\n      showResults,\n    ]\n  );\n\n  useEffect(() => {\n    if (activeResultIndex >= 0 && resultsListRef.current) {\n      const activeItem = resultsListRef.current.children[\n        activeResultIndex\n      ] as HTMLElement;\n      activeItem?.scrollIntoView({ block: 'nearest' });\n    }\n  }, [activeResultIndex]);\n\n  return (\n    <div className='relative w-full'>\n      <div\n        className={cn(\n          'relative flex w-full items-center gap-2 rounded-full border border-default bg-surface-1 px-2 py-1 shadow-xs transition-colors',\n          'focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 focus-within:ring-offset-background',\n          disabled && 'opacity-50'\n        )}\n      >\n        <div className='flex h-10 w-10 items-center justify-center rounded-full shrink-0'>\n          <div\n            className='flex items-center justify-center w-6 h-6 rounded-full'\n            style={{ backgroundColor: iconBg, color: iconColor }}\n            aria-hidden='true'\n          >\n            <SocialIcon\n              platform={searchPlatform?.icon || 'spotify'}\n              className='w-3.5 h-3.5'\n            />\n          </div>\n        </div>\n\n        <label htmlFor='artist-search-input' className='sr-only'>\n          Search Spotify artists\n        </label>\n        <Input\n          ref={inputRef}\n          id='artist-search-input'\n          type='text'\n          inputSize='lg'\n          placeholder='Search Spotify artists...'\n          value={searchQuery}\n          onChange={handleSearchInputChange}\n          onKeyDown={handleSearchKeyDown}\n          onFocus={() => searchQuery.length >= 2 && setShowResults(true)}\n          onBlur={() => setTimeout(() => setShowResults(false), 150)}\n          disabled={disabled}\n          autoCapitalize='none'\n          autoCorrect='off'\n          autoComplete='off'\n          className='border-0 bg-transparent px-0 pr-14 focus-visible:ring-0 focus-visible:ring-offset-0'\n          role='combobox'\n          aria-expanded={showResults && results.length > 0}\n          aria-controls='artist-search-results'\n          aria-activedescendant={\n            activeResultIndex >= 0\n              ? `artist-result-${activeResultIndex}`\n              : undefined\n          }\n          aria-describedby='artist-search-status'\n        />\n\n        <div className='absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2'>\n          {state === 'loading' && (\n            <div className='w-4 h-4 border-2 border-tertiary-token border-t-transparent rounded-full animate-spin motion-reduce:animate-none' />\n          )}\n          <button\n            type='button'\n            onClick={exitSearchMode}\n            className='flex items-center justify-center w-5 h-5 rounded-full text-tertiary-token hover:text-secondary-token hover:bg-surface-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-0'\n            aria-label='Exit search mode'\n          >\n            <XMarkIcon className='w-4 h-4' />\n          </button>\n        </div>\n      </div>\n\n      {showResults && (\n        <div\n          className='absolute z-50 w-full mt-1 rounded-lg border border-subtle bg-surface-1 shadow-lg overflow-hidden'\n          style={{ borderColor: `${brandHex}30` }}\n        >\n          {state === 'loading' && results.length === 0 && (\n            <div className='p-3 space-y-2'>\n              {[...Array(3)].map((_, i) => (\n                <div\n                  key={i}\n                  className='flex items-center gap-3 animate-pulse motion-reduce:animate-none'\n                >\n                  <div className='w-10 h-10 rounded-full bg-surface-3' />\n                  <div className='flex-1 space-y-1'>\n                    <div className='h-4 w-32 bg-surface-3 rounded' />\n                    <div className='h-3 w-20 bg-surface-3 rounded' />\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {state === 'empty' && (\n            <div className='p-4 text-center'>\n              <p className='text-sm text-secondary-token'>No artists found</p>\n              <button\n                type='button'\n                onClick={exitSearchMode}\n                className='mt-2 text-xs text-accent hover:underline'\n              >\n                Add link manually\n              </button>\n            </div>\n          )}\n\n          {state === 'error' && (\n            <div className='p-4 text-center'>\n              <p className='text-sm text-red-500'>{error || 'Search failed'}</p>\n              <button\n                type='button'\n                onClick={exitSearchMode}\n                className='mt-2 text-xs text-accent hover:underline'\n              >\n                Add link manually\n              </button>\n            </div>\n          )}\n\n          {results.length > 0 && (\n            <ul\n              ref={resultsListRef}\n              id='artist-search-results'\n              role='listbox'\n              className='max-h-64 overflow-y-auto'\n            >\n              {results.map((artist, index) => (\n                <li\n                  key={artist.id}\n                  id={`artist-result-${index}`}\n                  role='option'\n                  aria-selected={index === activeResultIndex}\n                  aria-label={`${artist.name}${artist.followers ? `, ${formatFollowers(artist.followers)}` : ''}`}\n                  className={cn(\n                    'flex items-center gap-3 p-3 cursor-pointer transition-colors',\n                    index === activeResultIndex\n                      ? 'bg-surface-2'\n                      : 'hover:bg-surface-2/50'\n                  )}\n                  onClick={() => handleArtistSelect(artist)}\n                  onMouseEnter={() => setActiveResultIndex(index)}\n                >\n                  <div className='w-10 h-10 rounded-full bg-surface-3 overflow-hidden shrink-0 relative'>\n                    {artist.imageUrl ? (\n                      <Image\n                        src={artist.imageUrl}\n                        alt={artist.name}\n                        fill\n                        sizes='40px'\n                        className='object-cover'\n                        unoptimized\n                      />\n                    ) : (\n                      <div className='w-full h-full flex items-center justify-center'>\n                        <SocialIcon\n                          platform='spotify'\n                          className='w-5 h-5 text-tertiary-token'\n                        />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className='flex-1 min-w-0'>\n                    <div className='font-medium text-primary-token truncate'>\n                      {artist.name}\n                    </div>\n                    {artist.followers && (\n                      <div className='text-xs text-tertiary-token'>\n                        {formatFollowers(artist.followers)}\n                      </div>\n                    )}\n                  </div>\n\n                  {artist.verified && (\n                    <div className='shrink-0 text-accent'>\n                      <svg\n                        className='w-4 h-4'\n                        viewBox='0 0 20 20'\n                        fill='currentColor'\n                      >\n                        <path\n                          fillRule='evenodd'\n                          d='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\n                          clipRule='evenodd'\n                        />\n                      </svg>\n                    </div>\n                  )}\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      )}\n\n      <div id='artist-search-status' className='sr-only' aria-live='polite'>\n        {state === 'loading' && 'Searching...'}\n        {state === 'empty' && 'No artists found'}\n        {state === 'error' && (error || 'Search failed')}\n        {state === 'success' &&\n          `${results.length} artists found. Use arrow keys to navigate.`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementToInteractiveRole",
      "severity": "warning",
      "description": "The HTML element li is non-interactive and should not have an interactive role.",
      "message": [
        { "elements": [], "content": "The HTML element " },
        { "elements": ["Emphasis"], "content": "li" },
        {
          "elements": [],
          "content": " is non-interactive and should not have an interactive role."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Replace " },
                { "elements": ["Emphasis"], "content": "li" },
                { "elements": [], "content": " with a div or a span." }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Unsafe fix: Remove the " },
                { "elements": ["Emphasis"], "content": "role" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "import { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Input } from '@jovie/ui';\nimport Image from 'next/image';                <li\n                  key={artist.id}\n                  id={`artist-result-${index}`}\n                  role='option'\n                  aria-selected={index === activeResultIndex}\n                  aria-label={`${artist.name}${artist.followers ? `, ${formatFollowers(artist.followers)}` : ''}`}  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 121] } } },
                { "equalLines": { "line_count": 321 } },
                { "diffOp": { "equal": { "range": [121, 222] } } },
                { "diffOp": { "delete": { "range": [222, 254] } } },
                { "diffOp": { "equal": { "range": [254, 431] } } },
                { "equalLines": { "line_count": 70 } },
                { "diffOp": { "equal": { "range": [431, 438] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/molecules/UniversalLinkInputArtistSearchMode.tsx"
        },
        "span": [10426, 10439],
        "sourceCode": "import { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Input } from '@jovie/ui';\nimport Image from 'next/image';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { getPlatformIcon, SocialIcon } from '@/components/atoms/SocialIcon';\nimport { track } from '@/lib/analytics';\nimport {\n  type SpotifyArtistResult,\n  useArtistSearch,\n} from '@/lib/hooks/useArtistSearch';\nimport { cn } from '@/lib/utils';\nimport { isBrandDark } from '@/lib/utils/color';\nimport {\n  type DetectedLink,\n  validateLink,\n} from '@/lib/utils/platform-detection';\n\nimport {\n  ARTIST_SEARCH_PLATFORMS,\n  type ArtistSearchProvider,\n} from './universalLinkInput.constants';\nimport { type CursorPosition } from './useInputFocusController';\n\ninterface ArtistSearchModeProps {\n  provider: ArtistSearchProvider;\n  creatorName?: string;\n  disabled?: boolean;\n  onSelect: (link: DetectedLink) => void;\n  onExit: (nextUrl?: string) => void;\n  onQueryChange?: (value: string) => void;\n  focusInput: (cursor?: CursorPosition) => void;\n  inputRef: React.RefObject<HTMLInputElement>;\n}\n\nfunction formatFollowers(count: number | undefined): string {\n  if (!count) return '';\n  if (count >= 1_000_000) return `${(count / 1_000_000).toFixed(1)}M followers`;\n  if (count >= 1_000) return `${(count / 1_000).toFixed(1)}K followers`;\n  return `${count} followers`;\n}\n\nexport function UniversalLinkInputArtistSearchMode({\n  provider,\n  creatorName,\n  disabled,\n  onSelect,\n  onExit,\n  onQueryChange,\n  inputRef,\n  focusInput,\n}: ArtistSearchModeProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showResults, setShowResults] = useState(false);\n  const [activeResultIndex, setActiveResultIndex] = useState(-1);\n\n  const resultsListRef = React.useRef<HTMLUListElement>(null);\n\n  const { results, state, error, search, clear } = useArtistSearch({\n    debounceMs: 300,\n    limit: 5,\n  });\n\n  const searchPlatform = useMemo(\n    () =>\n      ARTIST_SEARCH_PLATFORMS.find(platform => platform.provider === provider),\n    [provider]\n  );\n  const platformIcon = getPlatformIcon(searchPlatform?.icon || 'spotify');\n  const brandHex = platformIcon?.hex ? `#${platformIcon.hex}` : '#1DB954';\n  const iconIsDark = isBrandDark(brandHex);\n  const iconColor = iconIsDark ? '#ffffff' : brandHex;\n  const iconBg = iconIsDark ? 'rgba(255,255,255,0.08)' : `${brandHex}15`;\n\n  useEffect(() => {\n    setSearchQuery('');\n    setActiveResultIndex(-1);\n    setShowResults(false);\n    clear();\n    focusInput('start');\n  }, [clear, focusInput, provider]);\n\n  const handleArtistSelect = useCallback(\n    (artist: SpotifyArtistResult) => {\n      track('spotify_artist_select', {\n        artist_id: artist.id,\n        artist_name: artist.name,\n        followers: artist.followers,\n        result_count: results.length,\n      });\n\n      const link = validateLink(artist.url);\n      if (link && link.isValid) {\n        const enrichedLink = {\n          ...link,\n          suggestedTitle: artist.name,\n        };\n        onSelect(enrichedLink);\n      }\n\n      setSearchQuery('');\n      setShowResults(false);\n      setActiveResultIndex(-1);\n      clear();\n      onQueryChange?.('');\n      focusInput('end');\n      onExit('https://open.spotify.com/artist/');\n    },\n    [\n      clear,\n      creatorName,\n      focusInput,\n      onExit,\n      onQueryChange,\n      onSelect,\n      results.length,\n    ]\n  );\n\n  const handleSearchInputChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const value = e.target.value;\n      setSearchQuery(value);\n      setActiveResultIndex(-1);\n      search(value);\n      setShowResults(true);\n    },\n    [search]\n  );\n\n  const exitSearchMode = useCallback(() => {\n    setSearchQuery('');\n    setShowResults(false);\n    setActiveResultIndex(-1);\n    clear();\n    focusInput('end');\n    onExit('https://open.spotify.com/artist/');\n  }, [clear, focusInput, onExit]);\n\n  const handleSearchKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (!showResults || results.length === 0) {\n        if (e.key === 'Escape') {\n          e.preventDefault();\n          exitSearchMode();\n        }\n        return;\n      }\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setActiveResultIndex(prev =>\n            prev < results.length - 1 ? prev + 1 : 0\n          );\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setActiveResultIndex(prev =>\n            prev > 0 ? prev - 1 : results.length - 1\n          );\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (activeResultIndex >= 0 && results[activeResultIndex]) {\n            handleArtistSelect(results[activeResultIndex]);\n          }\n          break;\n        case 'Escape':\n          e.preventDefault();\n          if (showResults) {\n            setShowResults(false);\n            setActiveResultIndex(-1);\n          } else {\n            exitSearchMode();\n          }\n          break;\n        case 'Tab':\n          setShowResults(false);\n          setActiveResultIndex(-1);\n          break;\n      }\n    },\n    [\n      activeResultIndex,\n      exitSearchMode,\n      handleArtistSelect,\n      results,\n      showResults,\n    ]\n  );\n\n  useEffect(() => {\n    if (activeResultIndex >= 0 && resultsListRef.current) {\n      const activeItem = resultsListRef.current.children[\n        activeResultIndex\n      ] as HTMLElement;\n      activeItem?.scrollIntoView({ block: 'nearest' });\n    }\n  }, [activeResultIndex]);\n\n  return (\n    <div className='relative w-full'>\n      <div\n        className={cn(\n          'relative flex w-full items-center gap-2 rounded-full border border-default bg-surface-1 px-2 py-1 shadow-xs transition-colors',\n          'focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 focus-within:ring-offset-background',\n          disabled && 'opacity-50'\n        )}\n      >\n        <div className='flex h-10 w-10 items-center justify-center rounded-full shrink-0'>\n          <div\n            className='flex items-center justify-center w-6 h-6 rounded-full'\n            style={{ backgroundColor: iconBg, color: iconColor }}\n            aria-hidden='true'\n          >\n            <SocialIcon\n              platform={searchPlatform?.icon || 'spotify'}\n              className='w-3.5 h-3.5'\n            />\n          </div>\n        </div>\n\n        <label htmlFor='artist-search-input' className='sr-only'>\n          Search Spotify artists\n        </label>\n        <Input\n          ref={inputRef}\n          id='artist-search-input'\n          type='text'\n          inputSize='lg'\n          placeholder='Search Spotify artists...'\n          value={searchQuery}\n          onChange={handleSearchInputChange}\n          onKeyDown={handleSearchKeyDown}\n          onFocus={() => searchQuery.length >= 2 && setShowResults(true)}\n          onBlur={() => setTimeout(() => setShowResults(false), 150)}\n          disabled={disabled}\n          autoCapitalize='none'\n          autoCorrect='off'\n          autoComplete='off'\n          className='border-0 bg-transparent px-0 pr-14 focus-visible:ring-0 focus-visible:ring-offset-0'\n          role='combobox'\n          aria-expanded={showResults && results.length > 0}\n          aria-controls='artist-search-results'\n          aria-activedescendant={\n            activeResultIndex >= 0\n              ? `artist-result-${activeResultIndex}`\n              : undefined\n          }\n          aria-describedby='artist-search-status'\n        />\n\n        <div className='absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2'>\n          {state === 'loading' && (\n            <div className='w-4 h-4 border-2 border-tertiary-token border-t-transparent rounded-full animate-spin motion-reduce:animate-none' />\n          )}\n          <button\n            type='button'\n            onClick={exitSearchMode}\n            className='flex items-center justify-center w-5 h-5 rounded-full text-tertiary-token hover:text-secondary-token hover:bg-surface-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-0'\n            aria-label='Exit search mode'\n          >\n            <XMarkIcon className='w-4 h-4' />\n          </button>\n        </div>\n      </div>\n\n      {showResults && (\n        <div\n          className='absolute z-50 w-full mt-1 rounded-lg border border-subtle bg-surface-1 shadow-lg overflow-hidden'\n          style={{ borderColor: `${brandHex}30` }}\n        >\n          {state === 'loading' && results.length === 0 && (\n            <div className='p-3 space-y-2'>\n              {[...Array(3)].map((_, i) => (\n                <div\n                  key={i}\n                  className='flex items-center gap-3 animate-pulse motion-reduce:animate-none'\n                >\n                  <div className='w-10 h-10 rounded-full bg-surface-3' />\n                  <div className='flex-1 space-y-1'>\n                    <div className='h-4 w-32 bg-surface-3 rounded' />\n                    <div className='h-3 w-20 bg-surface-3 rounded' />\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {state === 'empty' && (\n            <div className='p-4 text-center'>\n              <p className='text-sm text-secondary-token'>No artists found</p>\n              <button\n                type='button'\n                onClick={exitSearchMode}\n                className='mt-2 text-xs text-accent hover:underline'\n              >\n                Add link manually\n              </button>\n            </div>\n          )}\n\n          {state === 'error' && (\n            <div className='p-4 text-center'>\n              <p className='text-sm text-red-500'>{error || 'Search failed'}</p>\n              <button\n                type='button'\n                onClick={exitSearchMode}\n                className='mt-2 text-xs text-accent hover:underline'\n              >\n                Add link manually\n              </button>\n            </div>\n          )}\n\n          {results.length > 0 && (\n            <ul\n              ref={resultsListRef}\n              id='artist-search-results'\n              role='listbox'\n              className='max-h-64 overflow-y-auto'\n            >\n              {results.map((artist, index) => (\n                <li\n                  key={artist.id}\n                  id={`artist-result-${index}`}\n                  role='option'\n                  aria-selected={index === activeResultIndex}\n                  aria-label={`${artist.name}${artist.followers ? `, ${formatFollowers(artist.followers)}` : ''}`}\n                  className={cn(\n                    'flex items-center gap-3 p-3 cursor-pointer transition-colors',\n                    index === activeResultIndex\n                      ? 'bg-surface-2'\n                      : 'hover:bg-surface-2/50'\n                  )}\n                  onClick={() => handleArtistSelect(artist)}\n                  onMouseEnter={() => setActiveResultIndex(index)}\n                >\n                  <div className='w-10 h-10 rounded-full bg-surface-3 overflow-hidden shrink-0 relative'>\n                    {artist.imageUrl ? (\n                      <Image\n                        src={artist.imageUrl}\n                        alt={artist.name}\n                        fill\n                        sizes='40px'\n                        className='object-cover'\n                        unoptimized\n                      />\n                    ) : (\n                      <div className='w-full h-full flex items-center justify-center'>\n                        <SocialIcon\n                          platform='spotify'\n                          className='w-5 h-5 text-tertiary-token'\n                        />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className='flex-1 min-w-0'>\n                    <div className='font-medium text-primary-token truncate'>\n                      {artist.name}\n                    </div>\n                    {artist.followers && (\n                      <div className='text-xs text-tertiary-token'>\n                        {formatFollowers(artist.followers)}\n                      </div>\n                    )}\n                  </div>\n\n                  {artist.verified && (\n                    <div className='shrink-0 text-accent'>\n                      <svg\n                        className='w-4 h-4'\n                        viewBox='0 0 20 20'\n                        fill='currentColor'\n                      >\n                        <path\n                          fillRule='evenodd'\n                          d='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\n                          clipRule='evenodd'\n                        />\n                      </svg>\n                    </div>\n                  )}\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      )}\n\n      <div id='artist-search-status' className='sr-only' aria-live='polite'>\n        {state === 'loading' && 'Searching...'}\n        {state === 'empty' && 'No artists found'}\n        {state === 'error' && (error || 'Search failed')}\n        {state === 'success' &&\n          `${results.length} artists found. Use arrow keys to navigate.`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/molecules/UniversalLinkInputArtistSearchMode.tsx"
        },
        "span": [12403, 12563],
        "sourceCode": "import { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Input } from '@jovie/ui';\nimport Image from 'next/image';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { getPlatformIcon, SocialIcon } from '@/components/atoms/SocialIcon';\nimport { track } from '@/lib/analytics';\nimport {\n  type SpotifyArtistResult,\n  useArtistSearch,\n} from '@/lib/hooks/useArtistSearch';\nimport { cn } from '@/lib/utils';\nimport { isBrandDark } from '@/lib/utils/color';\nimport {\n  type DetectedLink,\n  validateLink,\n} from '@/lib/utils/platform-detection';\n\nimport {\n  ARTIST_SEARCH_PLATFORMS,\n  type ArtistSearchProvider,\n} from './universalLinkInput.constants';\nimport { type CursorPosition } from './useInputFocusController';\n\ninterface ArtistSearchModeProps {\n  provider: ArtistSearchProvider;\n  creatorName?: string;\n  disabled?: boolean;\n  onSelect: (link: DetectedLink) => void;\n  onExit: (nextUrl?: string) => void;\n  onQueryChange?: (value: string) => void;\n  focusInput: (cursor?: CursorPosition) => void;\n  inputRef: React.RefObject<HTMLInputElement>;\n}\n\nfunction formatFollowers(count: number | undefined): string {\n  if (!count) return '';\n  if (count >= 1_000_000) return `${(count / 1_000_000).toFixed(1)}M followers`;\n  if (count >= 1_000) return `${(count / 1_000).toFixed(1)}K followers`;\n  return `${count} followers`;\n}\n\nexport function UniversalLinkInputArtistSearchMode({\n  provider,\n  creatorName,\n  disabled,\n  onSelect,\n  onExit,\n  onQueryChange,\n  inputRef,\n  focusInput,\n}: ArtistSearchModeProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showResults, setShowResults] = useState(false);\n  const [activeResultIndex, setActiveResultIndex] = useState(-1);\n\n  const resultsListRef = React.useRef<HTMLUListElement>(null);\n\n  const { results, state, error, search, clear } = useArtistSearch({\n    debounceMs: 300,\n    limit: 5,\n  });\n\n  const searchPlatform = useMemo(\n    () =>\n      ARTIST_SEARCH_PLATFORMS.find(platform => platform.provider === provider),\n    [provider]\n  );\n  const platformIcon = getPlatformIcon(searchPlatform?.icon || 'spotify');\n  const brandHex = platformIcon?.hex ? `#${platformIcon.hex}` : '#1DB954';\n  const iconIsDark = isBrandDark(brandHex);\n  const iconColor = iconIsDark ? '#ffffff' : brandHex;\n  const iconBg = iconIsDark ? 'rgba(255,255,255,0.08)' : `${brandHex}15`;\n\n  useEffect(() => {\n    setSearchQuery('');\n    setActiveResultIndex(-1);\n    setShowResults(false);\n    clear();\n    focusInput('start');\n  }, [clear, focusInput, provider]);\n\n  const handleArtistSelect = useCallback(\n    (artist: SpotifyArtistResult) => {\n      track('spotify_artist_select', {\n        artist_id: artist.id,\n        artist_name: artist.name,\n        followers: artist.followers,\n        result_count: results.length,\n      });\n\n      const link = validateLink(artist.url);\n      if (link && link.isValid) {\n        const enrichedLink = {\n          ...link,\n          suggestedTitle: artist.name,\n        };\n        onSelect(enrichedLink);\n      }\n\n      setSearchQuery('');\n      setShowResults(false);\n      setActiveResultIndex(-1);\n      clear();\n      onQueryChange?.('');\n      focusInput('end');\n      onExit('https://open.spotify.com/artist/');\n    },\n    [\n      clear,\n      creatorName,\n      focusInput,\n      onExit,\n      onQueryChange,\n      onSelect,\n      results.length,\n    ]\n  );\n\n  const handleSearchInputChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const value = e.target.value;\n      setSearchQuery(value);\n      setActiveResultIndex(-1);\n      search(value);\n      setShowResults(true);\n    },\n    [search]\n  );\n\n  const exitSearchMode = useCallback(() => {\n    setSearchQuery('');\n    setShowResults(false);\n    setActiveResultIndex(-1);\n    clear();\n    focusInput('end');\n    onExit('https://open.spotify.com/artist/');\n  }, [clear, focusInput, onExit]);\n\n  const handleSearchKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (!showResults || results.length === 0) {\n        if (e.key === 'Escape') {\n          e.preventDefault();\n          exitSearchMode();\n        }\n        return;\n      }\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setActiveResultIndex(prev =>\n            prev < results.length - 1 ? prev + 1 : 0\n          );\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setActiveResultIndex(prev =>\n            prev > 0 ? prev - 1 : results.length - 1\n          );\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (activeResultIndex >= 0 && results[activeResultIndex]) {\n            handleArtistSelect(results[activeResultIndex]);\n          }\n          break;\n        case 'Escape':\n          e.preventDefault();\n          if (showResults) {\n            setShowResults(false);\n            setActiveResultIndex(-1);\n          } else {\n            exitSearchMode();\n          }\n          break;\n        case 'Tab':\n          setShowResults(false);\n          setActiveResultIndex(-1);\n          break;\n      }\n    },\n    [\n      activeResultIndex,\n      exitSearchMode,\n      handleArtistSelect,\n      results,\n      showResults,\n    ]\n  );\n\n  useEffect(() => {\n    if (activeResultIndex >= 0 && resultsListRef.current) {\n      const activeItem = resultsListRef.current.children[\n        activeResultIndex\n      ] as HTMLElement;\n      activeItem?.scrollIntoView({ block: 'nearest' });\n    }\n  }, [activeResultIndex]);\n\n  return (\n    <div className='relative w-full'>\n      <div\n        className={cn(\n          'relative flex w-full items-center gap-2 rounded-full border border-default bg-surface-1 px-2 py-1 shadow-xs transition-colors',\n          'focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 focus-within:ring-offset-background',\n          disabled && 'opacity-50'\n        )}\n      >\n        <div className='flex h-10 w-10 items-center justify-center rounded-full shrink-0'>\n          <div\n            className='flex items-center justify-center w-6 h-6 rounded-full'\n            style={{ backgroundColor: iconBg, color: iconColor }}\n            aria-hidden='true'\n          >\n            <SocialIcon\n              platform={searchPlatform?.icon || 'spotify'}\n              className='w-3.5 h-3.5'\n            />\n          </div>\n        </div>\n\n        <label htmlFor='artist-search-input' className='sr-only'>\n          Search Spotify artists\n        </label>\n        <Input\n          ref={inputRef}\n          id='artist-search-input'\n          type='text'\n          inputSize='lg'\n          placeholder='Search Spotify artists...'\n          value={searchQuery}\n          onChange={handleSearchInputChange}\n          onKeyDown={handleSearchKeyDown}\n          onFocus={() => searchQuery.length >= 2 && setShowResults(true)}\n          onBlur={() => setTimeout(() => setShowResults(false), 150)}\n          disabled={disabled}\n          autoCapitalize='none'\n          autoCorrect='off'\n          autoComplete='off'\n          className='border-0 bg-transparent px-0 pr-14 focus-visible:ring-0 focus-visible:ring-offset-0'\n          role='combobox'\n          aria-expanded={showResults && results.length > 0}\n          aria-controls='artist-search-results'\n          aria-activedescendant={\n            activeResultIndex >= 0\n              ? `artist-result-${activeResultIndex}`\n              : undefined\n          }\n          aria-describedby='artist-search-status'\n        />\n\n        <div className='absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2'>\n          {state === 'loading' && (\n            <div className='w-4 h-4 border-2 border-tertiary-token border-t-transparent rounded-full animate-spin motion-reduce:animate-none' />\n          )}\n          <button\n            type='button'\n            onClick={exitSearchMode}\n            className='flex items-center justify-center w-5 h-5 rounded-full text-tertiary-token hover:text-secondary-token hover:bg-surface-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-0'\n            aria-label='Exit search mode'\n          >\n            <XMarkIcon className='w-4 h-4' />\n          </button>\n        </div>\n      </div>\n\n      {showResults && (\n        <div\n          className='absolute z-50 w-full mt-1 rounded-lg border border-subtle bg-surface-1 shadow-lg overflow-hidden'\n          style={{ borderColor: `${brandHex}30` }}\n        >\n          {state === 'loading' && results.length === 0 && (\n            <div className='p-3 space-y-2'>\n              {[...Array(3)].map((_, i) => (\n                <div\n                  key={i}\n                  className='flex items-center gap-3 animate-pulse motion-reduce:animate-none'\n                >\n                  <div className='w-10 h-10 rounded-full bg-surface-3' />\n                  <div className='flex-1 space-y-1'>\n                    <div className='h-4 w-32 bg-surface-3 rounded' />\n                    <div className='h-3 w-20 bg-surface-3 rounded' />\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {state === 'empty' && (\n            <div className='p-4 text-center'>\n              <p className='text-sm text-secondary-token'>No artists found</p>\n              <button\n                type='button'\n                onClick={exitSearchMode}\n                className='mt-2 text-xs text-accent hover:underline'\n              >\n                Add link manually\n              </button>\n            </div>\n          )}\n\n          {state === 'error' && (\n            <div className='p-4 text-center'>\n              <p className='text-sm text-red-500'>{error || 'Search failed'}</p>\n              <button\n                type='button'\n                onClick={exitSearchMode}\n                className='mt-2 text-xs text-accent hover:underline'\n              >\n                Add link manually\n              </button>\n            </div>\n          )}\n\n          {results.length > 0 && (\n            <ul\n              ref={resultsListRef}\n              id='artist-search-results'\n              role='listbox'\n              className='max-h-64 overflow-y-auto'\n            >\n              {results.map((artist, index) => (\n                <li\n                  key={artist.id}\n                  id={`artist-result-${index}`}\n                  role='option'\n                  aria-selected={index === activeResultIndex}\n                  aria-label={`${artist.name}${artist.followers ? `, ${formatFollowers(artist.followers)}` : ''}`}\n                  className={cn(\n                    'flex items-center gap-3 p-3 cursor-pointer transition-colors',\n                    index === activeResultIndex\n                      ? 'bg-surface-2'\n                      : 'hover:bg-surface-2/50'\n                  )}\n                  onClick={() => handleArtistSelect(artist)}\n                  onMouseEnter={() => setActiveResultIndex(index)}\n                >\n                  <div className='w-10 h-10 rounded-full bg-surface-3 overflow-hidden shrink-0 relative'>\n                    {artist.imageUrl ? (\n                      <Image\n                        src={artist.imageUrl}\n                        alt={artist.name}\n                        fill\n                        sizes='40px'\n                        className='object-cover'\n                        unoptimized\n                      />\n                    ) : (\n                      <div className='w-full h-full flex items-center justify-center'>\n                        <SocialIcon\n                          platform='spotify'\n                          className='w-5 h-5 text-tertiary-token'\n                        />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className='flex-1 min-w-0'>\n                    <div className='font-medium text-primary-token truncate'>\n                      {artist.name}\n                    </div>\n                    {artist.followers && (\n                      <div className='text-xs text-tertiary-token'>\n                        {formatFollowers(artist.followers)}\n                      </div>\n                    )}\n                  </div>\n\n                  {artist.verified && (\n                    <div className='shrink-0 text-accent'>\n                      <svg\n                        className='w-4 h-4'\n                        viewBox='0 0 20 20'\n                        fill='currentColor'\n                      >\n                        <path\n                          fillRule='evenodd'\n                          d='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\n                          clipRule='evenodd'\n                        />\n                      </svg>\n                    </div>\n                  )}\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      )}\n\n      <div id='artist-search-status' className='sr-only' aria-live='polite'>\n        {state === 'loading' && 'Searching...'}\n        {state === 'empty' && 'No artists found'}\n        {state === 'error' && (error || 'Search failed')}\n        {state === 'success' &&\n          `${results.length} artists found. Use arrow keys to navigate.`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/molecules/UniversalLinkInputUrlMode.tsx"
        },
        "span": [5469, 5482],
        "sourceCode": "import { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Input } from '@jovie/ui';\nimport React from 'react';\n\nimport { SocialIcon } from '@/components/atoms/SocialIcon';\nimport { cn } from '@/lib/utils';\nimport { isBrandDark } from '@/lib/utils/color';\nimport { type DetectedLink } from '@/lib/utils/platform-detection';\n\nimport { UniversalLinkInputPlatformSelector } from './UniversalLinkInputPlatformSelector';\nimport {\n  type ArtistSearchProvider,\n  PLATFORM_OPTIONS,\n} from './universalLinkInput.constants';\nimport { type CursorPosition } from './useInputFocusController';\n\ninterface UniversalLinkInputUrlModeProps {\n  url: string;\n  placeholder: string;\n  disabled?: boolean;\n  detectedLink: DetectedLink | null;\n  inputRef: React.RefObject<HTMLInputElement>;\n  onUrlChange: (value: string) => void;\n  onKeyDown: (event: React.KeyboardEvent<HTMLInputElement>) => void;\n  onClear: () => void;\n  onPlatformSelect: (platform: (typeof PLATFORM_OPTIONS)[number]) => void;\n  onArtistSearchSelect: (provider: ArtistSearchProvider) => void;\n  onRestoreFocus: (cursor?: CursorPosition) => void;\n  onFocus?: (event: React.FocusEvent<HTMLInputElement>) => void;\n  onBlur?: (event: React.FocusEvent<HTMLInputElement>) => void;\n  comboboxAria?: {\n    role?: 'combobox';\n    ariaExpanded?: boolean;\n    ariaControls?: string;\n    ariaActivedescendant?: string;\n    ariaAutocomplete?: 'list';\n  };\n}\n\nexport function UniversalLinkInputUrlMode({\n  url,\n  placeholder,\n  disabled,\n  detectedLink,\n  inputRef,\n  onUrlChange,\n  onKeyDown,\n  onClear,\n  onPlatformSelect,\n  onArtistSearchSelect,\n  onRestoreFocus,\n  onFocus,\n  onBlur,\n  comboboxAria,\n}: UniversalLinkInputUrlModeProps) {\n  const currentPlatformIcon = detectedLink?.platform.icon || 'globe';\n  const brandColor = detectedLink?.platform.color\n    ? `#${detectedLink.platform.color}`\n    : '#6b7280';\n\n  const isDarkBrand = isBrandDark(brandColor.toString());\n  const iconColor = isDarkBrand ? '#ffffff' : brandColor;\n  const iconBg = isDarkBrand ? 'rgba(255,255,255,0.08)' : `${brandColor}15`;\n\n  return (\n    <div className='relative w-full'>\n      <div\n        className={cn(\n          'relative flex w-full items-center gap-2 rounded-full border border-default bg-surface-1 px-2 py-1 shadow-xs transition-colors',\n          'focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 focus-within:ring-offset-background',\n          disabled && 'opacity-50'\n        )}\n      >\n        <UniversalLinkInputPlatformSelector\n          currentPlatformIcon={currentPlatformIcon}\n          onPlatformSelect={onPlatformSelect}\n          onArtistSearchSelect={onArtistSearchSelect}\n          onRestoreFocus={onRestoreFocus}\n          disabled={disabled}\n        />\n\n        <label htmlFor='link-url-input' className='sr-only'>\n          Link URL\n        </label>\n        <Input\n          ref={inputRef}\n          id='link-url-input'\n          type='url'\n          inputSize='lg'\n          placeholder={placeholder}\n          value={url}\n          onChange={event => onUrlChange(event.target.value)}\n          onKeyDown={onKeyDown}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          disabled={disabled}\n          inputMode='url'\n          autoCapitalize='none'\n          autoCorrect='off'\n          autoComplete='off'\n          className='border-0 bg-transparent px-0 pr-24 focus-visible:ring-0 focus-visible:ring-offset-0'\n          aria-describedby={detectedLink ? 'link-detection-status' : undefined}\n          role={comboboxAria?.role}\n          aria-expanded={comboboxAria?.ariaExpanded}\n          aria-controls={comboboxAria?.ariaControls}\n          aria-activedescendant={comboboxAria?.ariaActivedescendant}\n          aria-autocomplete={comboboxAria?.ariaAutocomplete}\n        />\n\n        {url && (\n          <div className='absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2'>\n            {detectedLink && (\n              <div\n                className='flex items-center justify-center w-6 h-6 rounded-full'\n                style={{\n                  backgroundColor: iconBg,\n                  color: iconColor,\n                }}\n                aria-hidden='true'\n              >\n                <SocialIcon\n                  platform={detectedLink.platform.icon}\n                  className='w-3 h-3'\n                />\n              </div>\n            )}\n            <button\n              type='button'\n              onClick={onClear}\n              className='flex items-center justify-center w-5 h-5 rounded-full text-tertiary-token hover:text-secondary-token hover:bg-surface-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-0'\n              aria-label='Clear input'\n            >\n              <XMarkIcon className='w-4 h-4' />\n            </button>\n          </div>\n        )}\n      </div>\n\n      <div id='link-detection-status' className='sr-only' aria-live='polite'>\n        {detectedLink\n          ? detectedLink.isValid\n            ? `${detectedLink.platform.name} link detected. Title set automatically based on your profile and URL. You can now add this link.`\n            : `Invalid ${detectedLink.platform.name} link. ${detectedLink.error || 'Please check the URL.'}`\n          : url\n            ? 'No valid link detected. Please enter a valid URL.'\n            : ''}\n      </div>\n\n      {url && !detectedLink?.isValid && (\n        <div className='hidden text-xs text-secondary-token' role='status'>\n          💡 Paste links from Spotify, Instagram, TikTok, YouTube, and more for\n          automatic detection\n        </div>\n      )}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/AppleStyleOnboardingForm.tsx"
        },
        "span": [22351, 22364],
        "sourceCode": "'use client';\n\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { completeOnboarding } from '@/app/onboarding/actions';\nimport {\n  AuthBackButton,\n  AuthButton,\n  AuthLinkPreviewCard,\n  AuthTextInput,\n} from '@/components/auth';\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\nimport { PROFILE_HOSTNAME, PROFILE_URL } from '@/constants/domains';\nimport { identify, track } from '@/lib/analytics';\nimport {\n  generateUsernameSuggestions,\n  validateUsernameFormat,\n} from '@/lib/validation/client-username';\n\ninterface AppleStyleOnboardingFormProps {\n  initialDisplayName?: string;\n  initialHandle?: string;\n  userEmail?: string | null;\n  userId: string;\n  skipNameStep?: boolean;\n}\n\ninterface OnboardingState {\n  step:\n    | 'validating'\n    | 'creating-user'\n    | 'checking-handle'\n    | 'creating-artist'\n    | 'complete';\n  progress: number;\n  error: string | null;\n  retryCount: number;\n  isSubmitting: boolean;\n}\n\ninterface HandleValidationState {\n  available: boolean;\n  checking: boolean;\n  error: string | null;\n  clientValid: boolean;\n  suggestions: string[];\n}\n\nconst ONBOARDING_STEPS = [\n  {\n    id: 'name',\n    title: 'What should we call you?',\n    prompt: '',\n  },\n  {\n    id: 'handle',\n    title: 'Claim your handle',\n    prompt: '',\n  },\n  { id: 'done', title: \"You're live.\", prompt: '' },\n] as const;\n\nexport function AppleStyleOnboardingForm({\n  initialDisplayName = '',\n  initialHandle = '',\n  userEmail = null,\n  userId,\n  skipNameStep = false,\n}: AppleStyleOnboardingFormProps) {\n  const router = useRouter();\n\n  const PRODUCTION_PROFILE_DOMAIN = PROFILE_HOSTNAME;\n  const PRODUCTION_PROFILE_BASE_URL = PROFILE_URL;\n\n  const normalizedInitialHandle = initialHandle.trim().toLowerCase();\n  const [currentStepIndex, setCurrentStepIndex] = useState(\n    skipNameStep ? 1 : 0\n  );\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [handle, setHandle] = useState(normalizedInitialHandle);\n  const [handleInput, setHandleInput] = useState(normalizedInitialHandle);\n  const [fullName, setFullName] = useState(initialDisplayName);\n  const [profileReadyHandle, setProfileReadyHandle] = useState(\n    normalizedInitialHandle\n  );\n  const [copyFeedback, setCopyFeedback] = useState<string | null>(null);\n  const [state, setState] = useState<OnboardingState>({\n    step: 'validating',\n    progress: 0,\n    error: null,\n    retryCount: 0,\n    isSubmitting: false,\n  });\n\n  const [handleValidation, setHandleValidation] =\n    useState<HandleValidationState>({\n      available: false,\n      checking: false,\n      error: null,\n      clientValid: Boolean(normalizedInitialHandle),\n      suggestions: [],\n    });\n\n  const validationSequence = useRef(0);\n  const abortController = useRef<AbortController | null>(null);\n  const nameInputRef = useRef<HTMLInputElement | null>(null);\n  const handleInputRef = useRef<HTMLInputElement | null>(null);\n\n  const displayDomain = PRODUCTION_PROFILE_DOMAIN;\n\n  const namePlaceholder = useMemo(() => {\n    const options = [\n      'Madonna',\n      'BLACKPINK',\n      'Tiësto',\n      'FISHER',\n      'Neon Hitch',\n      'U2',\n      'Imagine Dragons',\n      'ODESZA',\n    ];\n    return options[Math.floor(Math.random() * options.length)];\n  }, []);\n\n  const isDisplayNameValid = useMemo(() => {\n    const trimmed = fullName.trim();\n    return trimmed.length > 0 && trimmed.length <= 50;\n  }, [fullName]);\n\n  useEffect(() => {\n    if (userId) {\n      track('onboarding_started', {\n        user_id: userId,\n        timestamp: new Date().toISOString(),\n      });\n    }\n  }, [userId]);\n\n  // Step-based autofocus for keyboard-only users\n  useEffect(() => {\n    const target =\n      currentStepIndex === 0 ? nameInputRef.current : handleInputRef.current;\n    if (target) {\n      target.focus();\n    }\n  }, [currentStepIndex]);\n\n  const goToNextStep = useCallback(() => {\n    if (isTransitioning) return;\n    if (currentStepIndex >= ONBOARDING_STEPS.length - 1) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentStepIndex(prev => prev + 1);\n      setIsTransitioning(false);\n    }, 250);\n  }, [currentStepIndex, isTransitioning]);\n\n  const goToPreviousStep = useCallback(() => {\n    if (isTransitioning) return;\n    if (currentStepIndex === 0) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentStepIndex(prev => prev - 1);\n      setIsTransitioning(false);\n    }, 250);\n  }, [currentStepIndex, isTransitioning]);\n\n  const validateHandle = useCallback(\n    async (input: string) => {\n      const normalizedInput = input.trim().toLowerCase();\n      validationSequence.current += 1;\n      const runId = validationSequence.current;\n\n      if (\n        normalizedInitialHandle &&\n        normalizedInput === normalizedInitialHandle\n      ) {\n        setHandle(normalizedInput);\n        setHandleValidation({\n          available: true,\n          checking: false,\n          error: null,\n          clientValid: true,\n          suggestions: [],\n        });\n        return;\n      }\n\n      // Basic client validation aligned with server rules\n      const clientResult = validateUsernameFormat(normalizedInput);\n      if (!clientResult.valid) {\n        setHandleValidation({\n          available: false,\n          checking: false,\n          error: clientResult.error,\n          clientValid: false,\n          suggestions: clientResult.suggestion ? [clientResult.suggestion] : [],\n        });\n        return;\n      }\n\n      abortController.current?.abort();\n      const controller = new AbortController();\n      abortController.current = controller;\n\n      setHandleValidation({\n        available: false,\n        checking: true,\n        error: null,\n        clientValid: true,\n        suggestions: [],\n      });\n\n      try {\n        const response = await fetch(\n          `/api/handle/check?handle=${encodeURIComponent(normalizedInput)}`,\n          { signal: controller.signal }\n        );\n\n        if (validationSequence.current !== runId) return;\n\n        if (!response.ok) {\n          const data = (await response.json().catch(() => ({}))) as {\n            error?: string;\n          };\n          throw new Error(data.error || 'Unable to check handle.');\n        }\n\n        const data = (await response.json()) as {\n          available: boolean;\n          error?: string;\n        };\n\n        if (validationSequence.current !== runId) return;\n\n        if (data.available) {\n          setHandle(normalizedInput);\n          setHandleValidation({\n            available: true,\n            checking: false,\n            error: null,\n            clientValid: true,\n            suggestions: [],\n          });\n        } else {\n          const suggestions = generateUsernameSuggestions(\n            normalizedInput,\n            fullName\n          ).slice(0, 3);\n          setHandleValidation({\n            available: false,\n            checking: false,\n            error: data.error || 'Handle already taken',\n            clientValid: true,\n            suggestions,\n          });\n        }\n      } catch (error) {\n        if (error instanceof Error && error.name === 'AbortError') {\n          return;\n        }\n\n        setHandleValidation({\n          available: false,\n          checking: false,\n          error: 'Unable to check handle right now.',\n          clientValid: true,\n          suggestions: [],\n        });\n      }\n    },\n    [fullName, normalizedInitialHandle]\n  );\n\n  const handleStepCtaDisabledReason = useMemo(() => {\n    if (state.isSubmitting) return 'Saving…';\n    if (state.error) return state.error;\n    if (!handleInput) return 'Enter a handle to continue';\n    if (!handleValidation.clientValid) {\n      return handleValidation.error || 'Handle is invalid';\n    }\n    if (handleValidation.checking) return 'Checking availability…';\n    if (!handleValidation.available) {\n      return handleValidation.error || 'Handle is taken';\n    }\n    return null;\n  }, [handleInput, handleValidation, state.error, state.isSubmitting]);\n\n  useEffect(() => {\n    if (!handleInput) {\n      setHandleValidation({\n        available: false,\n        checking: false,\n        error: null,\n        clientValid: false,\n        suggestions: [],\n      });\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      void validateHandle(handleInput);\n    }, 400);\n\n    return () => {\n      clearTimeout(timer);\n      abortController.current?.abort();\n    };\n  }, [handleInput, validateHandle]);\n\n  const handleSubmit = useCallback(\n    async (e?: React.FormEvent) => {\n      if (e) e.preventDefault();\n\n      const resolvedHandle = (handle || handleInput).trim().toLowerCase();\n\n      const redirectUrl = `/onboarding?handle=${encodeURIComponent(resolvedHandle)}`;\n\n      if (\n        state.isSubmitting ||\n        Boolean(state.error) ||\n        !handleValidation.clientValid ||\n        handleValidation.checking ||\n        !handleValidation.available ||\n        !resolvedHandle\n      ) {\n        return;\n      }\n\n      track('onboarding_submission_started', {\n        user_id: userId,\n        handle: resolvedHandle,\n      });\n\n      identify(userId, {\n        email: userEmail ?? undefined,\n        handle: resolvedHandle,\n        onboarding_started_at: new Date().toISOString(),\n      });\n\n      setState(prev => ({\n        ...prev,\n        error: null,\n        step: 'validating',\n        isSubmitting: true,\n      }));\n\n      try {\n        const trimmedName = fullName.trim();\n        if (!trimmedName) {\n          throw new Error('[DISPLAY_NAME_REQUIRED] Display name is required');\n        }\n        await completeOnboarding({\n          username: resolvedHandle,\n          displayName: trimmedName,\n          email: userEmail,\n          redirectToDashboard: false,\n        });\n\n        setState(prev => ({ ...prev, step: 'complete', progress: 100 }));\n        setProfileReadyHandle(resolvedHandle);\n\n        track('onboarding_completed', {\n          user_id: userId,\n          handle: resolvedHandle,\n          completion_time: new Date().toISOString(),\n        });\n\n        goToNextStep();\n      } catch (error) {\n        if (error instanceof Error && error.message === 'NEXT_REDIRECT') {\n          setState(prev => ({ ...prev, step: 'complete', progress: 100 }));\n          return;\n        }\n\n        const errorMessage =\n          error instanceof Error ? error.message : 'Unknown error';\n        const errorCodeMatch =\n          error instanceof Error ? error.message.match(/^\\[([A-Z_]+)\\]/) : null;\n        const errorCode = errorCodeMatch?.[1];\n\n        track('onboarding_error', {\n          user_id: userId,\n          handle: resolvedHandle,\n          error_message: errorMessage,\n          error_code: errorCode,\n          error_step: 'submission',\n          timestamp: new Date().toISOString(),\n        });\n\n        let userMessage = 'Could not save. Please try again.';\n        const message = errorMessage.toUpperCase();\n        if (message.includes('INVALID_SESSION')) {\n          userMessage = 'Could not save. Please refresh and try again.';\n        } else if (message.includes('USERNAME_TAKEN')) {\n          userMessage = 'Not available. Try another handle.';\n        } else if (message.includes('EMAIL_IN_USE')) {\n          userMessage =\n            'This email is already in use. Please sign in with the original account or use a different email.';\n          router.push(\n            `/signin?redirect_url=${encodeURIComponent(redirectUrl)}`\n          );\n          return;\n        } else if (\n          message.includes('RATE_LIMITED') ||\n          message.includes('TOO_MANY_ATTEMPTS')\n        ) {\n          userMessage = 'Too many attempts. Please try again in a few moments.';\n        } else if (\n          message.includes('INVALID_USERNAME') ||\n          message.includes('USERNAME_RESERVED') ||\n          message.includes('USERNAME_INVALID_FORMAT') ||\n          message.includes('USERNAME_TOO_SHORT') ||\n          message.includes('USERNAME_TOO_LONG')\n        ) {\n          userMessage = 'That handle can’t be used. Try another one.';\n        } else if (message.includes('DISPLAY_NAME_REQUIRED')) {\n          userMessage = 'Please enter your name to continue.';\n        }\n\n        if (\n          process.env.NODE_ENV === 'development' &&\n          userMessage === 'Could not save. Please try again.' &&\n          errorCode\n        ) {\n          userMessage = `Could not save (${errorCode}). Please try again.`;\n        }\n\n        setState(prev => ({\n          ...prev,\n          error: userMessage,\n          step: 'validating',\n          progress: 0,\n          isSubmitting: false,\n        }));\n      }\n    },\n    [\n      fullName,\n      goToNextStep,\n      handle,\n      handleInput,\n      handleValidation.available,\n      handleValidation.checking,\n      handleValidation.clientValid,\n      router,\n      state.error,\n      state.isSubmitting,\n      userEmail,\n      userId,\n    ]\n  );\n\n  const copyProfileLink = useCallback(() => {\n    const targetHandle = profileReadyHandle || handle || handleInput;\n    const link = `${PRODUCTION_PROFILE_BASE_URL}/${targetHandle}`;\n    navigator.clipboard\n      .writeText(link)\n      .then(() => {\n        setCopyFeedback('Link copied to clipboard!');\n        setTimeout(() => {\n          setCopyFeedback(null);\n        }, 2000);\n      })\n      .catch(err => {\n        console.error('Failed to copy link:', err);\n      });\n  }, [PRODUCTION_PROFILE_BASE_URL, handle, handleInput, profileReadyHandle]);\n\n  const goToDashboard = useCallback(() => {\n    router.push('/app/dashboard/overview');\n    router.refresh();\n  }, [router]);\n\n  const goBack = useCallback(() => {\n    if (currentStepIndex > 0) {\n      goToPreviousStep();\n    } else {\n      router.back();\n    }\n  }, [currentStepIndex, goToPreviousStep, router]);\n\n  const renderStepContent = () => {\n    switch (currentStepIndex) {\n      case 0:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-2xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[0].title}\n              </h1>\n              {ONBOARDING_STEPS[0].prompt && (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[0].prompt}\n                </p>\n              )}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <form\n                className='space-y-4'\n                onSubmit={e => {\n                  e.preventDefault();\n                  if (\n                    isDisplayNameValid &&\n                    !isTransitioning &&\n                    !state.isSubmitting\n                  ) {\n                    goToNextStep();\n                  }\n                }}\n              >\n                <AuthTextInput\n                  id='display-name'\n                  ref={nameInputRef}\n                  name='name'\n                  type='text'\n                  value={fullName}\n                  onChange={e => setFullName(e.target.value)}\n                  placeholder={namePlaceholder}\n                  aria-label='Your full name'\n                  maxLength={50}\n                  autoComplete='name'\n                />\n\n                <AuthButton\n                  type='submit'\n                  disabled={\n                    !isDisplayNameValid || isTransitioning || state.isSubmitting\n                  }\n                >\n                  Continue\n                </AuthButton>\n              </form>\n            </div>\n          </div>\n        );\n\n      case 1:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[1].title}\n              </h1>\n              {ONBOARDING_STEPS[1].prompt ? (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[1].prompt}\n                </p>\n              ) : null}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <form className='space-y-4' onSubmit={handleSubmit}>\n                <label\n                  className='text-sm font-medium text-(--muted)'\n                  htmlFor='handle-input'\n                >\n                  @handle\n                </label>\n                <div className='relative'>\n                  <div className='pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 text-[#6b6f76]'>\n                    @\n                  </div>\n                  <AuthTextInput\n                    id='handle-input'\n                    ref={handleInputRef}\n                    name='username'\n                    aria-label='Enter your desired handle'\n                    type='text'\n                    value={handleInput}\n                    onChange={e =>\n                      setHandleInput(\n                        e.target.value\n                          .toLowerCase()\n                          .replace(/\\s+/g, '')\n                          .replace(/^@+/, '')\n                      )\n                    }\n                    placeholder='yourhandle'\n                    autoComplete='username'\n                    autoCapitalize='none'\n                    autoCorrect='off'\n                    spellCheck={false}\n                    aria-invalid={handleValidation.error ? 'true' : undefined}\n                    className={[\n                      'pl-10 pr-10',\n                      state.error || handleValidation.error\n                        ? 'border-red-500'\n                        : !state.error && handleValidation.available\n                          ? 'border-green-500'\n                          : undefined,\n                    ]\n                      .filter(Boolean)\n                      .join(' ')}\n                  />\n                  <div className='absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 flex items-center justify-center'>\n                    {handleValidation.checking ? (\n                      <LoadingSpinner\n                        size='sm'\n                        className='text-secondary-token'\n                      />\n                    ) : state.error || handleValidation.error ? (\n                      <svg\n                        viewBox='0 0 20 20'\n                        fill='none'\n                        aria-hidden='true'\n                        className='h-5 w-5'\n                      >\n                        <circle\n                          cx='10'\n                          cy='10'\n                          r='9'\n                          stroke='currentColor'\n                          className='text-red-500'\n                          strokeWidth='2'\n                        />\n                        <path\n                          d='M6.6 6.6l6.8 6.8M13.4 6.6l-6.8 6.8'\n                          stroke='currentColor'\n                          className='text-red-500'\n                          strokeWidth='2'\n                          strokeLinecap='round'\n                        />\n                      </svg>\n                    ) : handleInput &&\n                      handleValidation.clientValid &&\n                      handleValidation.available ? (\n                      <svg\n                        viewBox='0 0 20 20'\n                        fill='none'\n                        aria-hidden='true'\n                        className='h-5 w-5'\n                      >\n                        <circle\n                          cx='10'\n                          cy='10'\n                          r='9'\n                          stroke='currentColor'\n                          className='text-green-600'\n                          strokeWidth='2'\n                        />\n                        <path\n                          d='M6 10.2l2.6 2.6L14 7.4'\n                          stroke='currentColor'\n                          className='text-green-600'\n                          strokeWidth='2'\n                          strokeLinecap='round'\n                          strokeLinejoin='round'\n                        />\n                      </svg>\n                    ) : null}\n                  </div>\n                </div>\n\n                <div\n                  className='min-h-[24px] flex flex-col items-center justify-center px-1'\n                  role='status'\n                  aria-live='polite'\n                >\n                  {handleInput && !state.error ? (\n                    handleValidation.checking ? (\n                      <div className='text-sm text-[#6b6f76] animate-in fade-in slide-in-from-bottom-1 duration-300'>\n                        Checking…\n                      </div>\n                    ) : handleValidation.clientValid &&\n                      handleValidation.available ? (\n                      <div className='text-green-600 text-sm font-medium animate-in fade-in slide-in-from-bottom-1 duration-300'>\n                        Available\n                      </div>\n                    ) : handleValidation.error ? (\n                      <div className='text-red-500 text-sm animate-in fade-in slide-in-from-top-1 duration-300 text-center'>\n                        Not available\n                      </div>\n                    ) : null\n                  ) : null}\n                </div>\n\n                <AuthButton\n                  type='submit'\n                  disabled={\n                    Boolean(handleStepCtaDisabledReason) || isTransitioning\n                  }\n                  variant='primary'\n                >\n                  {state.isSubmitting ? (\n                    <div className='flex items-center justify-center space-x-2'>\n                      <LoadingSpinner size='sm' className='text-current' />\n                      <span>Saving…</span>\n                    </div>\n                  ) : (\n                    'Continue'\n                  )}\n                </AuthButton>\n\n                <div\n                  className='min-h-[40px] flex items-center justify-center text-center text-xs text-[#6b6f76]'\n                  role='status'\n                  aria-live='polite'\n                >\n                  {state.error ?? null}\n                </div>\n              </form>\n            </div>\n          </div>\n        );\n\n      case 2:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[2].title}\n              </h1>\n              {ONBOARDING_STEPS[2].prompt ? (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[2].prompt}\n                </p>\n              ) : null}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <AuthLinkPreviewCard\n                label='Your link'\n                hrefText={`${displayDomain}/${profileReadyHandle || handle}`}\n              />\n\n              <div className='space-y-4'>\n                <AuthButton onClick={goToDashboard}>Go to Dashboard</AuthButton>\n\n                <AuthButton onClick={copyProfileLink} variant='secondary'>\n                  Copy Link\n                </AuthButton>\n              </div>\n\n              {copyFeedback && (\n                <div className='p-3 bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800/50 rounded-xl text-green-600 dark:text-green-400 text-sm text-center'>\n                  {copyFeedback}\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className='w-full flex flex-col items-center justify-center bg-(--bg) text-(--fg) gap-6'>\n      <AuthBackButton onClick={goBack} ariaLabel='Go back' />\n\n      <Link\n        href='#main-content'\n        className='sr-only focus-visible:not-sr-only focus-visible:absolute focus-visible:top-4 focus-visible:left-4 px-4 py-2 rounded-md z-50 btn btn-primary btn-sm'\n      >\n        Skip to main content\n      </Link>\n\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        Step {currentStepIndex + 1} of {ONBOARDING_STEPS.length}:{' '}\n        {ONBOARDING_STEPS[currentStepIndex]?.title}\n      </div>\n\n      <main\n        className='w-full max-w-3xl flex items-center justify-center px-4 pb-8'\n        id='main-content'\n        role='main'\n        aria-labelledby='step-heading'\n      >\n        <div id='step-heading' className='sr-only'>\n          {ONBOARDING_STEPS[currentStepIndex]?.title} step content\n        </div>\n        <div\n          className={`w-full max-w-2xl transform transition-all duration-500 ease-in-out ${\n            isTransitioning\n              ? 'opacity-0 translate-y-4'\n              : 'opacity-100 translate-y-0'\n          }`}\n        >\n          {renderStepContent()}\n        </div>\n      </main>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/AppleStyleOnboardingForm.tsx"
        },
        "span": [20605, 20618],
        "sourceCode": "'use client';\n\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { completeOnboarding } from '@/app/onboarding/actions';\nimport {\n  AuthBackButton,\n  AuthButton,\n  AuthLinkPreviewCard,\n  AuthTextInput,\n} from '@/components/auth';\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\nimport { PROFILE_HOSTNAME, PROFILE_URL } from '@/constants/domains';\nimport { identify, track } from '@/lib/analytics';\nimport {\n  generateUsernameSuggestions,\n  validateUsernameFormat,\n} from '@/lib/validation/client-username';\n\ninterface AppleStyleOnboardingFormProps {\n  initialDisplayName?: string;\n  initialHandle?: string;\n  userEmail?: string | null;\n  userId: string;\n  skipNameStep?: boolean;\n}\n\ninterface OnboardingState {\n  step:\n    | 'validating'\n    | 'creating-user'\n    | 'checking-handle'\n    | 'creating-artist'\n    | 'complete';\n  progress: number;\n  error: string | null;\n  retryCount: number;\n  isSubmitting: boolean;\n}\n\ninterface HandleValidationState {\n  available: boolean;\n  checking: boolean;\n  error: string | null;\n  clientValid: boolean;\n  suggestions: string[];\n}\n\nconst ONBOARDING_STEPS = [\n  {\n    id: 'name',\n    title: 'What should we call you?',\n    prompt: '',\n  },\n  {\n    id: 'handle',\n    title: 'Claim your handle',\n    prompt: '',\n  },\n  { id: 'done', title: \"You're live.\", prompt: '' },\n] as const;\n\nexport function AppleStyleOnboardingForm({\n  initialDisplayName = '',\n  initialHandle = '',\n  userEmail = null,\n  userId,\n  skipNameStep = false,\n}: AppleStyleOnboardingFormProps) {\n  const router = useRouter();\n\n  const PRODUCTION_PROFILE_DOMAIN = PROFILE_HOSTNAME;\n  const PRODUCTION_PROFILE_BASE_URL = PROFILE_URL;\n\n  const normalizedInitialHandle = initialHandle.trim().toLowerCase();\n  const [currentStepIndex, setCurrentStepIndex] = useState(\n    skipNameStep ? 1 : 0\n  );\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [handle, setHandle] = useState(normalizedInitialHandle);\n  const [handleInput, setHandleInput] = useState(normalizedInitialHandle);\n  const [fullName, setFullName] = useState(initialDisplayName);\n  const [profileReadyHandle, setProfileReadyHandle] = useState(\n    normalizedInitialHandle\n  );\n  const [copyFeedback, setCopyFeedback] = useState<string | null>(null);\n  const [state, setState] = useState<OnboardingState>({\n    step: 'validating',\n    progress: 0,\n    error: null,\n    retryCount: 0,\n    isSubmitting: false,\n  });\n\n  const [handleValidation, setHandleValidation] =\n    useState<HandleValidationState>({\n      available: false,\n      checking: false,\n      error: null,\n      clientValid: Boolean(normalizedInitialHandle),\n      suggestions: [],\n    });\n\n  const validationSequence = useRef(0);\n  const abortController = useRef<AbortController | null>(null);\n  const nameInputRef = useRef<HTMLInputElement | null>(null);\n  const handleInputRef = useRef<HTMLInputElement | null>(null);\n\n  const displayDomain = PRODUCTION_PROFILE_DOMAIN;\n\n  const namePlaceholder = useMemo(() => {\n    const options = [\n      'Madonna',\n      'BLACKPINK',\n      'Tiësto',\n      'FISHER',\n      'Neon Hitch',\n      'U2',\n      'Imagine Dragons',\n      'ODESZA',\n    ];\n    return options[Math.floor(Math.random() * options.length)];\n  }, []);\n\n  const isDisplayNameValid = useMemo(() => {\n    const trimmed = fullName.trim();\n    return trimmed.length > 0 && trimmed.length <= 50;\n  }, [fullName]);\n\n  useEffect(() => {\n    if (userId) {\n      track('onboarding_started', {\n        user_id: userId,\n        timestamp: new Date().toISOString(),\n      });\n    }\n  }, [userId]);\n\n  // Step-based autofocus for keyboard-only users\n  useEffect(() => {\n    const target =\n      currentStepIndex === 0 ? nameInputRef.current : handleInputRef.current;\n    if (target) {\n      target.focus();\n    }\n  }, [currentStepIndex]);\n\n  const goToNextStep = useCallback(() => {\n    if (isTransitioning) return;\n    if (currentStepIndex >= ONBOARDING_STEPS.length - 1) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentStepIndex(prev => prev + 1);\n      setIsTransitioning(false);\n    }, 250);\n  }, [currentStepIndex, isTransitioning]);\n\n  const goToPreviousStep = useCallback(() => {\n    if (isTransitioning) return;\n    if (currentStepIndex === 0) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentStepIndex(prev => prev - 1);\n      setIsTransitioning(false);\n    }, 250);\n  }, [currentStepIndex, isTransitioning]);\n\n  const validateHandle = useCallback(\n    async (input: string) => {\n      const normalizedInput = input.trim().toLowerCase();\n      validationSequence.current += 1;\n      const runId = validationSequence.current;\n\n      if (\n        normalizedInitialHandle &&\n        normalizedInput === normalizedInitialHandle\n      ) {\n        setHandle(normalizedInput);\n        setHandleValidation({\n          available: true,\n          checking: false,\n          error: null,\n          clientValid: true,\n          suggestions: [],\n        });\n        return;\n      }\n\n      // Basic client validation aligned with server rules\n      const clientResult = validateUsernameFormat(normalizedInput);\n      if (!clientResult.valid) {\n        setHandleValidation({\n          available: false,\n          checking: false,\n          error: clientResult.error,\n          clientValid: false,\n          suggestions: clientResult.suggestion ? [clientResult.suggestion] : [],\n        });\n        return;\n      }\n\n      abortController.current?.abort();\n      const controller = new AbortController();\n      abortController.current = controller;\n\n      setHandleValidation({\n        available: false,\n        checking: true,\n        error: null,\n        clientValid: true,\n        suggestions: [],\n      });\n\n      try {\n        const response = await fetch(\n          `/api/handle/check?handle=${encodeURIComponent(normalizedInput)}`,\n          { signal: controller.signal }\n        );\n\n        if (validationSequence.current !== runId) return;\n\n        if (!response.ok) {\n          const data = (await response.json().catch(() => ({}))) as {\n            error?: string;\n          };\n          throw new Error(data.error || 'Unable to check handle.');\n        }\n\n        const data = (await response.json()) as {\n          available: boolean;\n          error?: string;\n        };\n\n        if (validationSequence.current !== runId) return;\n\n        if (data.available) {\n          setHandle(normalizedInput);\n          setHandleValidation({\n            available: true,\n            checking: false,\n            error: null,\n            clientValid: true,\n            suggestions: [],\n          });\n        } else {\n          const suggestions = generateUsernameSuggestions(\n            normalizedInput,\n            fullName\n          ).slice(0, 3);\n          setHandleValidation({\n            available: false,\n            checking: false,\n            error: data.error || 'Handle already taken',\n            clientValid: true,\n            suggestions,\n          });\n        }\n      } catch (error) {\n        if (error instanceof Error && error.name === 'AbortError') {\n          return;\n        }\n\n        setHandleValidation({\n          available: false,\n          checking: false,\n          error: 'Unable to check handle right now.',\n          clientValid: true,\n          suggestions: [],\n        });\n      }\n    },\n    [fullName, normalizedInitialHandle]\n  );\n\n  const handleStepCtaDisabledReason = useMemo(() => {\n    if (state.isSubmitting) return 'Saving…';\n    if (state.error) return state.error;\n    if (!handleInput) return 'Enter a handle to continue';\n    if (!handleValidation.clientValid) {\n      return handleValidation.error || 'Handle is invalid';\n    }\n    if (handleValidation.checking) return 'Checking availability…';\n    if (!handleValidation.available) {\n      return handleValidation.error || 'Handle is taken';\n    }\n    return null;\n  }, [handleInput, handleValidation, state.error, state.isSubmitting]);\n\n  useEffect(() => {\n    if (!handleInput) {\n      setHandleValidation({\n        available: false,\n        checking: false,\n        error: null,\n        clientValid: false,\n        suggestions: [],\n      });\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      void validateHandle(handleInput);\n    }, 400);\n\n    return () => {\n      clearTimeout(timer);\n      abortController.current?.abort();\n    };\n  }, [handleInput, validateHandle]);\n\n  const handleSubmit = useCallback(\n    async (e?: React.FormEvent) => {\n      if (e) e.preventDefault();\n\n      const resolvedHandle = (handle || handleInput).trim().toLowerCase();\n\n      const redirectUrl = `/onboarding?handle=${encodeURIComponent(resolvedHandle)}`;\n\n      if (\n        state.isSubmitting ||\n        Boolean(state.error) ||\n        !handleValidation.clientValid ||\n        handleValidation.checking ||\n        !handleValidation.available ||\n        !resolvedHandle\n      ) {\n        return;\n      }\n\n      track('onboarding_submission_started', {\n        user_id: userId,\n        handle: resolvedHandle,\n      });\n\n      identify(userId, {\n        email: userEmail ?? undefined,\n        handle: resolvedHandle,\n        onboarding_started_at: new Date().toISOString(),\n      });\n\n      setState(prev => ({\n        ...prev,\n        error: null,\n        step: 'validating',\n        isSubmitting: true,\n      }));\n\n      try {\n        const trimmedName = fullName.trim();\n        if (!trimmedName) {\n          throw new Error('[DISPLAY_NAME_REQUIRED] Display name is required');\n        }\n        await completeOnboarding({\n          username: resolvedHandle,\n          displayName: trimmedName,\n          email: userEmail,\n          redirectToDashboard: false,\n        });\n\n        setState(prev => ({ ...prev, step: 'complete', progress: 100 }));\n        setProfileReadyHandle(resolvedHandle);\n\n        track('onboarding_completed', {\n          user_id: userId,\n          handle: resolvedHandle,\n          completion_time: new Date().toISOString(),\n        });\n\n        goToNextStep();\n      } catch (error) {\n        if (error instanceof Error && error.message === 'NEXT_REDIRECT') {\n          setState(prev => ({ ...prev, step: 'complete', progress: 100 }));\n          return;\n        }\n\n        const errorMessage =\n          error instanceof Error ? error.message : 'Unknown error';\n        const errorCodeMatch =\n          error instanceof Error ? error.message.match(/^\\[([A-Z_]+)\\]/) : null;\n        const errorCode = errorCodeMatch?.[1];\n\n        track('onboarding_error', {\n          user_id: userId,\n          handle: resolvedHandle,\n          error_message: errorMessage,\n          error_code: errorCode,\n          error_step: 'submission',\n          timestamp: new Date().toISOString(),\n        });\n\n        let userMessage = 'Could not save. Please try again.';\n        const message = errorMessage.toUpperCase();\n        if (message.includes('INVALID_SESSION')) {\n          userMessage = 'Could not save. Please refresh and try again.';\n        } else if (message.includes('USERNAME_TAKEN')) {\n          userMessage = 'Not available. Try another handle.';\n        } else if (message.includes('EMAIL_IN_USE')) {\n          userMessage =\n            'This email is already in use. Please sign in with the original account or use a different email.';\n          router.push(\n            `/signin?redirect_url=${encodeURIComponent(redirectUrl)}`\n          );\n          return;\n        } else if (\n          message.includes('RATE_LIMITED') ||\n          message.includes('TOO_MANY_ATTEMPTS')\n        ) {\n          userMessage = 'Too many attempts. Please try again in a few moments.';\n        } else if (\n          message.includes('INVALID_USERNAME') ||\n          message.includes('USERNAME_RESERVED') ||\n          message.includes('USERNAME_INVALID_FORMAT') ||\n          message.includes('USERNAME_TOO_SHORT') ||\n          message.includes('USERNAME_TOO_LONG')\n        ) {\n          userMessage = 'That handle can’t be used. Try another one.';\n        } else if (message.includes('DISPLAY_NAME_REQUIRED')) {\n          userMessage = 'Please enter your name to continue.';\n        }\n\n        if (\n          process.env.NODE_ENV === 'development' &&\n          userMessage === 'Could not save. Please try again.' &&\n          errorCode\n        ) {\n          userMessage = `Could not save (${errorCode}). Please try again.`;\n        }\n\n        setState(prev => ({\n          ...prev,\n          error: userMessage,\n          step: 'validating',\n          progress: 0,\n          isSubmitting: false,\n        }));\n      }\n    },\n    [\n      fullName,\n      goToNextStep,\n      handle,\n      handleInput,\n      handleValidation.available,\n      handleValidation.checking,\n      handleValidation.clientValid,\n      router,\n      state.error,\n      state.isSubmitting,\n      userEmail,\n      userId,\n    ]\n  );\n\n  const copyProfileLink = useCallback(() => {\n    const targetHandle = profileReadyHandle || handle || handleInput;\n    const link = `${PRODUCTION_PROFILE_BASE_URL}/${targetHandle}`;\n    navigator.clipboard\n      .writeText(link)\n      .then(() => {\n        setCopyFeedback('Link copied to clipboard!');\n        setTimeout(() => {\n          setCopyFeedback(null);\n        }, 2000);\n      })\n      .catch(err => {\n        console.error('Failed to copy link:', err);\n      });\n  }, [PRODUCTION_PROFILE_BASE_URL, handle, handleInput, profileReadyHandle]);\n\n  const goToDashboard = useCallback(() => {\n    router.push('/app/dashboard/overview');\n    router.refresh();\n  }, [router]);\n\n  const goBack = useCallback(() => {\n    if (currentStepIndex > 0) {\n      goToPreviousStep();\n    } else {\n      router.back();\n    }\n  }, [currentStepIndex, goToPreviousStep, router]);\n\n  const renderStepContent = () => {\n    switch (currentStepIndex) {\n      case 0:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-2xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[0].title}\n              </h1>\n              {ONBOARDING_STEPS[0].prompt && (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[0].prompt}\n                </p>\n              )}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <form\n                className='space-y-4'\n                onSubmit={e => {\n                  e.preventDefault();\n                  if (\n                    isDisplayNameValid &&\n                    !isTransitioning &&\n                    !state.isSubmitting\n                  ) {\n                    goToNextStep();\n                  }\n                }}\n              >\n                <AuthTextInput\n                  id='display-name'\n                  ref={nameInputRef}\n                  name='name'\n                  type='text'\n                  value={fullName}\n                  onChange={e => setFullName(e.target.value)}\n                  placeholder={namePlaceholder}\n                  aria-label='Your full name'\n                  maxLength={50}\n                  autoComplete='name'\n                />\n\n                <AuthButton\n                  type='submit'\n                  disabled={\n                    !isDisplayNameValid || isTransitioning || state.isSubmitting\n                  }\n                >\n                  Continue\n                </AuthButton>\n              </form>\n            </div>\n          </div>\n        );\n\n      case 1:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[1].title}\n              </h1>\n              {ONBOARDING_STEPS[1].prompt ? (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[1].prompt}\n                </p>\n              ) : null}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <form className='space-y-4' onSubmit={handleSubmit}>\n                <label\n                  className='text-sm font-medium text-(--muted)'\n                  htmlFor='handle-input'\n                >\n                  @handle\n                </label>\n                <div className='relative'>\n                  <div className='pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 text-[#6b6f76]'>\n                    @\n                  </div>\n                  <AuthTextInput\n                    id='handle-input'\n                    ref={handleInputRef}\n                    name='username'\n                    aria-label='Enter your desired handle'\n                    type='text'\n                    value={handleInput}\n                    onChange={e =>\n                      setHandleInput(\n                        e.target.value\n                          .toLowerCase()\n                          .replace(/\\s+/g, '')\n                          .replace(/^@+/, '')\n                      )\n                    }\n                    placeholder='yourhandle'\n                    autoComplete='username'\n                    autoCapitalize='none'\n                    autoCorrect='off'\n                    spellCheck={false}\n                    aria-invalid={handleValidation.error ? 'true' : undefined}\n                    className={[\n                      'pl-10 pr-10',\n                      state.error || handleValidation.error\n                        ? 'border-red-500'\n                        : !state.error && handleValidation.available\n                          ? 'border-green-500'\n                          : undefined,\n                    ]\n                      .filter(Boolean)\n                      .join(' ')}\n                  />\n                  <div className='absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 flex items-center justify-center'>\n                    {handleValidation.checking ? (\n                      <LoadingSpinner\n                        size='sm'\n                        className='text-secondary-token'\n                      />\n                    ) : state.error || handleValidation.error ? (\n                      <svg\n                        viewBox='0 0 20 20'\n                        fill='none'\n                        aria-hidden='true'\n                        className='h-5 w-5'\n                      >\n                        <circle\n                          cx='10'\n                          cy='10'\n                          r='9'\n                          stroke='currentColor'\n                          className='text-red-500'\n                          strokeWidth='2'\n                        />\n                        <path\n                          d='M6.6 6.6l6.8 6.8M13.4 6.6l-6.8 6.8'\n                          stroke='currentColor'\n                          className='text-red-500'\n                          strokeWidth='2'\n                          strokeLinecap='round'\n                        />\n                      </svg>\n                    ) : handleInput &&\n                      handleValidation.clientValid &&\n                      handleValidation.available ? (\n                      <svg\n                        viewBox='0 0 20 20'\n                        fill='none'\n                        aria-hidden='true'\n                        className='h-5 w-5'\n                      >\n                        <circle\n                          cx='10'\n                          cy='10'\n                          r='9'\n                          stroke='currentColor'\n                          className='text-green-600'\n                          strokeWidth='2'\n                        />\n                        <path\n                          d='M6 10.2l2.6 2.6L14 7.4'\n                          stroke='currentColor'\n                          className='text-green-600'\n                          strokeWidth='2'\n                          strokeLinecap='round'\n                          strokeLinejoin='round'\n                        />\n                      </svg>\n                    ) : null}\n                  </div>\n                </div>\n\n                <div\n                  className='min-h-[24px] flex flex-col items-center justify-center px-1'\n                  role='status'\n                  aria-live='polite'\n                >\n                  {handleInput && !state.error ? (\n                    handleValidation.checking ? (\n                      <div className='text-sm text-[#6b6f76] animate-in fade-in slide-in-from-bottom-1 duration-300'>\n                        Checking…\n                      </div>\n                    ) : handleValidation.clientValid &&\n                      handleValidation.available ? (\n                      <div className='text-green-600 text-sm font-medium animate-in fade-in slide-in-from-bottom-1 duration-300'>\n                        Available\n                      </div>\n                    ) : handleValidation.error ? (\n                      <div className='text-red-500 text-sm animate-in fade-in slide-in-from-top-1 duration-300 text-center'>\n                        Not available\n                      </div>\n                    ) : null\n                  ) : null}\n                </div>\n\n                <AuthButton\n                  type='submit'\n                  disabled={\n                    Boolean(handleStepCtaDisabledReason) || isTransitioning\n                  }\n                  variant='primary'\n                >\n                  {state.isSubmitting ? (\n                    <div className='flex items-center justify-center space-x-2'>\n                      <LoadingSpinner size='sm' className='text-current' />\n                      <span>Saving…</span>\n                    </div>\n                  ) : (\n                    'Continue'\n                  )}\n                </AuthButton>\n\n                <div\n                  className='min-h-[40px] flex items-center justify-center text-center text-xs text-[#6b6f76]'\n                  role='status'\n                  aria-live='polite'\n                >\n                  {state.error ?? null}\n                </div>\n              </form>\n            </div>\n          </div>\n        );\n\n      case 2:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[2].title}\n              </h1>\n              {ONBOARDING_STEPS[2].prompt ? (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[2].prompt}\n                </p>\n              ) : null}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <AuthLinkPreviewCard\n                label='Your link'\n                hrefText={`${displayDomain}/${profileReadyHandle || handle}`}\n              />\n\n              <div className='space-y-4'>\n                <AuthButton onClick={goToDashboard}>Go to Dashboard</AuthButton>\n\n                <AuthButton onClick={copyProfileLink} variant='secondary'>\n                  Copy Link\n                </AuthButton>\n              </div>\n\n              {copyFeedback && (\n                <div className='p-3 bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800/50 rounded-xl text-green-600 dark:text-green-400 text-sm text-center'>\n                  {copyFeedback}\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className='w-full flex flex-col items-center justify-center bg-(--bg) text-(--fg) gap-6'>\n      <AuthBackButton onClick={goBack} ariaLabel='Go back' />\n\n      <Link\n        href='#main-content'\n        className='sr-only focus-visible:not-sr-only focus-visible:absolute focus-visible:top-4 focus-visible:left-4 px-4 py-2 rounded-md z-50 btn btn-primary btn-sm'\n      >\n        Skip to main content\n      </Link>\n\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        Step {currentStepIndex + 1} of {ONBOARDING_STEPS.length}:{' '}\n        {ONBOARDING_STEPS[currentStepIndex]?.title}\n      </div>\n\n      <main\n        className='w-full max-w-3xl flex items-center justify-center px-4 pb-8'\n        id='main-content'\n        role='main'\n        aria-labelledby='step-heading'\n      >\n        <div id='step-heading' className='sr-only'>\n          {ONBOARDING_STEPS[currentStepIndex]?.title} step content\n        </div>\n        <div\n          className={`w-full max-w-2xl transform transition-all duration-500 ease-in-out ${\n            isTransitioning\n              ? 'opacity-0 translate-y-4'\n              : 'opacity-100 translate-y-0'\n          }`}\n        >\n          {renderStepContent()}\n        </div>\n      </main>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<main>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<main>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/AppleStyleOnboardingForm.tsx"
        },
        "span": [24797, 24808],
        "sourceCode": "'use client';\n\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { completeOnboarding } from '@/app/onboarding/actions';\nimport {\n  AuthBackButton,\n  AuthButton,\n  AuthLinkPreviewCard,\n  AuthTextInput,\n} from '@/components/auth';\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\nimport { PROFILE_HOSTNAME, PROFILE_URL } from '@/constants/domains';\nimport { identify, track } from '@/lib/analytics';\nimport {\n  generateUsernameSuggestions,\n  validateUsernameFormat,\n} from '@/lib/validation/client-username';\n\ninterface AppleStyleOnboardingFormProps {\n  initialDisplayName?: string;\n  initialHandle?: string;\n  userEmail?: string | null;\n  userId: string;\n  skipNameStep?: boolean;\n}\n\ninterface OnboardingState {\n  step:\n    | 'validating'\n    | 'creating-user'\n    | 'checking-handle'\n    | 'creating-artist'\n    | 'complete';\n  progress: number;\n  error: string | null;\n  retryCount: number;\n  isSubmitting: boolean;\n}\n\ninterface HandleValidationState {\n  available: boolean;\n  checking: boolean;\n  error: string | null;\n  clientValid: boolean;\n  suggestions: string[];\n}\n\nconst ONBOARDING_STEPS = [\n  {\n    id: 'name',\n    title: 'What should we call you?',\n    prompt: '',\n  },\n  {\n    id: 'handle',\n    title: 'Claim your handle',\n    prompt: '',\n  },\n  { id: 'done', title: \"You're live.\", prompt: '' },\n] as const;\n\nexport function AppleStyleOnboardingForm({\n  initialDisplayName = '',\n  initialHandle = '',\n  userEmail = null,\n  userId,\n  skipNameStep = false,\n}: AppleStyleOnboardingFormProps) {\n  const router = useRouter();\n\n  const PRODUCTION_PROFILE_DOMAIN = PROFILE_HOSTNAME;\n  const PRODUCTION_PROFILE_BASE_URL = PROFILE_URL;\n\n  const normalizedInitialHandle = initialHandle.trim().toLowerCase();\n  const [currentStepIndex, setCurrentStepIndex] = useState(\n    skipNameStep ? 1 : 0\n  );\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [handle, setHandle] = useState(normalizedInitialHandle);\n  const [handleInput, setHandleInput] = useState(normalizedInitialHandle);\n  const [fullName, setFullName] = useState(initialDisplayName);\n  const [profileReadyHandle, setProfileReadyHandle] = useState(\n    normalizedInitialHandle\n  );\n  const [copyFeedback, setCopyFeedback] = useState<string | null>(null);\n  const [state, setState] = useState<OnboardingState>({\n    step: 'validating',\n    progress: 0,\n    error: null,\n    retryCount: 0,\n    isSubmitting: false,\n  });\n\n  const [handleValidation, setHandleValidation] =\n    useState<HandleValidationState>({\n      available: false,\n      checking: false,\n      error: null,\n      clientValid: Boolean(normalizedInitialHandle),\n      suggestions: [],\n    });\n\n  const validationSequence = useRef(0);\n  const abortController = useRef<AbortController | null>(null);\n  const nameInputRef = useRef<HTMLInputElement | null>(null);\n  const handleInputRef = useRef<HTMLInputElement | null>(null);\n\n  const displayDomain = PRODUCTION_PROFILE_DOMAIN;\n\n  const namePlaceholder = useMemo(() => {\n    const options = [\n      'Madonna',\n      'BLACKPINK',\n      'Tiësto',\n      'FISHER',\n      'Neon Hitch',\n      'U2',\n      'Imagine Dragons',\n      'ODESZA',\n    ];\n    return options[Math.floor(Math.random() * options.length)];\n  }, []);\n\n  const isDisplayNameValid = useMemo(() => {\n    const trimmed = fullName.trim();\n    return trimmed.length > 0 && trimmed.length <= 50;\n  }, [fullName]);\n\n  useEffect(() => {\n    if (userId) {\n      track('onboarding_started', {\n        user_id: userId,\n        timestamp: new Date().toISOString(),\n      });\n    }\n  }, [userId]);\n\n  // Step-based autofocus for keyboard-only users\n  useEffect(() => {\n    const target =\n      currentStepIndex === 0 ? nameInputRef.current : handleInputRef.current;\n    if (target) {\n      target.focus();\n    }\n  }, [currentStepIndex]);\n\n  const goToNextStep = useCallback(() => {\n    if (isTransitioning) return;\n    if (currentStepIndex >= ONBOARDING_STEPS.length - 1) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentStepIndex(prev => prev + 1);\n      setIsTransitioning(false);\n    }, 250);\n  }, [currentStepIndex, isTransitioning]);\n\n  const goToPreviousStep = useCallback(() => {\n    if (isTransitioning) return;\n    if (currentStepIndex === 0) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentStepIndex(prev => prev - 1);\n      setIsTransitioning(false);\n    }, 250);\n  }, [currentStepIndex, isTransitioning]);\n\n  const validateHandle = useCallback(\n    async (input: string) => {\n      const normalizedInput = input.trim().toLowerCase();\n      validationSequence.current += 1;\n      const runId = validationSequence.current;\n\n      if (\n        normalizedInitialHandle &&\n        normalizedInput === normalizedInitialHandle\n      ) {\n        setHandle(normalizedInput);\n        setHandleValidation({\n          available: true,\n          checking: false,\n          error: null,\n          clientValid: true,\n          suggestions: [],\n        });\n        return;\n      }\n\n      // Basic client validation aligned with server rules\n      const clientResult = validateUsernameFormat(normalizedInput);\n      if (!clientResult.valid) {\n        setHandleValidation({\n          available: false,\n          checking: false,\n          error: clientResult.error,\n          clientValid: false,\n          suggestions: clientResult.suggestion ? [clientResult.suggestion] : [],\n        });\n        return;\n      }\n\n      abortController.current?.abort();\n      const controller = new AbortController();\n      abortController.current = controller;\n\n      setHandleValidation({\n        available: false,\n        checking: true,\n        error: null,\n        clientValid: true,\n        suggestions: [],\n      });\n\n      try {\n        const response = await fetch(\n          `/api/handle/check?handle=${encodeURIComponent(normalizedInput)}`,\n          { signal: controller.signal }\n        );\n\n        if (validationSequence.current !== runId) return;\n\n        if (!response.ok) {\n          const data = (await response.json().catch(() => ({}))) as {\n            error?: string;\n          };\n          throw new Error(data.error || 'Unable to check handle.');\n        }\n\n        const data = (await response.json()) as {\n          available: boolean;\n          error?: string;\n        };\n\n        if (validationSequence.current !== runId) return;\n\n        if (data.available) {\n          setHandle(normalizedInput);\n          setHandleValidation({\n            available: true,\n            checking: false,\n            error: null,\n            clientValid: true,\n            suggestions: [],\n          });\n        } else {\n          const suggestions = generateUsernameSuggestions(\n            normalizedInput,\n            fullName\n          ).slice(0, 3);\n          setHandleValidation({\n            available: false,\n            checking: false,\n            error: data.error || 'Handle already taken',\n            clientValid: true,\n            suggestions,\n          });\n        }\n      } catch (error) {\n        if (error instanceof Error && error.name === 'AbortError') {\n          return;\n        }\n\n        setHandleValidation({\n          available: false,\n          checking: false,\n          error: 'Unable to check handle right now.',\n          clientValid: true,\n          suggestions: [],\n        });\n      }\n    },\n    [fullName, normalizedInitialHandle]\n  );\n\n  const handleStepCtaDisabledReason = useMemo(() => {\n    if (state.isSubmitting) return 'Saving…';\n    if (state.error) return state.error;\n    if (!handleInput) return 'Enter a handle to continue';\n    if (!handleValidation.clientValid) {\n      return handleValidation.error || 'Handle is invalid';\n    }\n    if (handleValidation.checking) return 'Checking availability…';\n    if (!handleValidation.available) {\n      return handleValidation.error || 'Handle is taken';\n    }\n    return null;\n  }, [handleInput, handleValidation, state.error, state.isSubmitting]);\n\n  useEffect(() => {\n    if (!handleInput) {\n      setHandleValidation({\n        available: false,\n        checking: false,\n        error: null,\n        clientValid: false,\n        suggestions: [],\n      });\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      void validateHandle(handleInput);\n    }, 400);\n\n    return () => {\n      clearTimeout(timer);\n      abortController.current?.abort();\n    };\n  }, [handleInput, validateHandle]);\n\n  const handleSubmit = useCallback(\n    async (e?: React.FormEvent) => {\n      if (e) e.preventDefault();\n\n      const resolvedHandle = (handle || handleInput).trim().toLowerCase();\n\n      const redirectUrl = `/onboarding?handle=${encodeURIComponent(resolvedHandle)}`;\n\n      if (\n        state.isSubmitting ||\n        Boolean(state.error) ||\n        !handleValidation.clientValid ||\n        handleValidation.checking ||\n        !handleValidation.available ||\n        !resolvedHandle\n      ) {\n        return;\n      }\n\n      track('onboarding_submission_started', {\n        user_id: userId,\n        handle: resolvedHandle,\n      });\n\n      identify(userId, {\n        email: userEmail ?? undefined,\n        handle: resolvedHandle,\n        onboarding_started_at: new Date().toISOString(),\n      });\n\n      setState(prev => ({\n        ...prev,\n        error: null,\n        step: 'validating',\n        isSubmitting: true,\n      }));\n\n      try {\n        const trimmedName = fullName.trim();\n        if (!trimmedName) {\n          throw new Error('[DISPLAY_NAME_REQUIRED] Display name is required');\n        }\n        await completeOnboarding({\n          username: resolvedHandle,\n          displayName: trimmedName,\n          email: userEmail,\n          redirectToDashboard: false,\n        });\n\n        setState(prev => ({ ...prev, step: 'complete', progress: 100 }));\n        setProfileReadyHandle(resolvedHandle);\n\n        track('onboarding_completed', {\n          user_id: userId,\n          handle: resolvedHandle,\n          completion_time: new Date().toISOString(),\n        });\n\n        goToNextStep();\n      } catch (error) {\n        if (error instanceof Error && error.message === 'NEXT_REDIRECT') {\n          setState(prev => ({ ...prev, step: 'complete', progress: 100 }));\n          return;\n        }\n\n        const errorMessage =\n          error instanceof Error ? error.message : 'Unknown error';\n        const errorCodeMatch =\n          error instanceof Error ? error.message.match(/^\\[([A-Z_]+)\\]/) : null;\n        const errorCode = errorCodeMatch?.[1];\n\n        track('onboarding_error', {\n          user_id: userId,\n          handle: resolvedHandle,\n          error_message: errorMessage,\n          error_code: errorCode,\n          error_step: 'submission',\n          timestamp: new Date().toISOString(),\n        });\n\n        let userMessage = 'Could not save. Please try again.';\n        const message = errorMessage.toUpperCase();\n        if (message.includes('INVALID_SESSION')) {\n          userMessage = 'Could not save. Please refresh and try again.';\n        } else if (message.includes('USERNAME_TAKEN')) {\n          userMessage = 'Not available. Try another handle.';\n        } else if (message.includes('EMAIL_IN_USE')) {\n          userMessage =\n            'This email is already in use. Please sign in with the original account or use a different email.';\n          router.push(\n            `/signin?redirect_url=${encodeURIComponent(redirectUrl)}`\n          );\n          return;\n        } else if (\n          message.includes('RATE_LIMITED') ||\n          message.includes('TOO_MANY_ATTEMPTS')\n        ) {\n          userMessage = 'Too many attempts. Please try again in a few moments.';\n        } else if (\n          message.includes('INVALID_USERNAME') ||\n          message.includes('USERNAME_RESERVED') ||\n          message.includes('USERNAME_INVALID_FORMAT') ||\n          message.includes('USERNAME_TOO_SHORT') ||\n          message.includes('USERNAME_TOO_LONG')\n        ) {\n          userMessage = 'That handle can’t be used. Try another one.';\n        } else if (message.includes('DISPLAY_NAME_REQUIRED')) {\n          userMessage = 'Please enter your name to continue.';\n        }\n\n        if (\n          process.env.NODE_ENV === 'development' &&\n          userMessage === 'Could not save. Please try again.' &&\n          errorCode\n        ) {\n          userMessage = `Could not save (${errorCode}). Please try again.`;\n        }\n\n        setState(prev => ({\n          ...prev,\n          error: userMessage,\n          step: 'validating',\n          progress: 0,\n          isSubmitting: false,\n        }));\n      }\n    },\n    [\n      fullName,\n      goToNextStep,\n      handle,\n      handleInput,\n      handleValidation.available,\n      handleValidation.checking,\n      handleValidation.clientValid,\n      router,\n      state.error,\n      state.isSubmitting,\n      userEmail,\n      userId,\n    ]\n  );\n\n  const copyProfileLink = useCallback(() => {\n    const targetHandle = profileReadyHandle || handle || handleInput;\n    const link = `${PRODUCTION_PROFILE_BASE_URL}/${targetHandle}`;\n    navigator.clipboard\n      .writeText(link)\n      .then(() => {\n        setCopyFeedback('Link copied to clipboard!');\n        setTimeout(() => {\n          setCopyFeedback(null);\n        }, 2000);\n      })\n      .catch(err => {\n        console.error('Failed to copy link:', err);\n      });\n  }, [PRODUCTION_PROFILE_BASE_URL, handle, handleInput, profileReadyHandle]);\n\n  const goToDashboard = useCallback(() => {\n    router.push('/app/dashboard/overview');\n    router.refresh();\n  }, [router]);\n\n  const goBack = useCallback(() => {\n    if (currentStepIndex > 0) {\n      goToPreviousStep();\n    } else {\n      router.back();\n    }\n  }, [currentStepIndex, goToPreviousStep, router]);\n\n  const renderStepContent = () => {\n    switch (currentStepIndex) {\n      case 0:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-2xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[0].title}\n              </h1>\n              {ONBOARDING_STEPS[0].prompt && (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[0].prompt}\n                </p>\n              )}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <form\n                className='space-y-4'\n                onSubmit={e => {\n                  e.preventDefault();\n                  if (\n                    isDisplayNameValid &&\n                    !isTransitioning &&\n                    !state.isSubmitting\n                  ) {\n                    goToNextStep();\n                  }\n                }}\n              >\n                <AuthTextInput\n                  id='display-name'\n                  ref={nameInputRef}\n                  name='name'\n                  type='text'\n                  value={fullName}\n                  onChange={e => setFullName(e.target.value)}\n                  placeholder={namePlaceholder}\n                  aria-label='Your full name'\n                  maxLength={50}\n                  autoComplete='name'\n                />\n\n                <AuthButton\n                  type='submit'\n                  disabled={\n                    !isDisplayNameValid || isTransitioning || state.isSubmitting\n                  }\n                >\n                  Continue\n                </AuthButton>\n              </form>\n            </div>\n          </div>\n        );\n\n      case 1:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[1].title}\n              </h1>\n              {ONBOARDING_STEPS[1].prompt ? (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[1].prompt}\n                </p>\n              ) : null}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <form className='space-y-4' onSubmit={handleSubmit}>\n                <label\n                  className='text-sm font-medium text-(--muted)'\n                  htmlFor='handle-input'\n                >\n                  @handle\n                </label>\n                <div className='relative'>\n                  <div className='pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 text-[#6b6f76]'>\n                    @\n                  </div>\n                  <AuthTextInput\n                    id='handle-input'\n                    ref={handleInputRef}\n                    name='username'\n                    aria-label='Enter your desired handle'\n                    type='text'\n                    value={handleInput}\n                    onChange={e =>\n                      setHandleInput(\n                        e.target.value\n                          .toLowerCase()\n                          .replace(/\\s+/g, '')\n                          .replace(/^@+/, '')\n                      )\n                    }\n                    placeholder='yourhandle'\n                    autoComplete='username'\n                    autoCapitalize='none'\n                    autoCorrect='off'\n                    spellCheck={false}\n                    aria-invalid={handleValidation.error ? 'true' : undefined}\n                    className={[\n                      'pl-10 pr-10',\n                      state.error || handleValidation.error\n                        ? 'border-red-500'\n                        : !state.error && handleValidation.available\n                          ? 'border-green-500'\n                          : undefined,\n                    ]\n                      .filter(Boolean)\n                      .join(' ')}\n                  />\n                  <div className='absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 flex items-center justify-center'>\n                    {handleValidation.checking ? (\n                      <LoadingSpinner\n                        size='sm'\n                        className='text-secondary-token'\n                      />\n                    ) : state.error || handleValidation.error ? (\n                      <svg\n                        viewBox='0 0 20 20'\n                        fill='none'\n                        aria-hidden='true'\n                        className='h-5 w-5'\n                      >\n                        <circle\n                          cx='10'\n                          cy='10'\n                          r='9'\n                          stroke='currentColor'\n                          className='text-red-500'\n                          strokeWidth='2'\n                        />\n                        <path\n                          d='M6.6 6.6l6.8 6.8M13.4 6.6l-6.8 6.8'\n                          stroke='currentColor'\n                          className='text-red-500'\n                          strokeWidth='2'\n                          strokeLinecap='round'\n                        />\n                      </svg>\n                    ) : handleInput &&\n                      handleValidation.clientValid &&\n                      handleValidation.available ? (\n                      <svg\n                        viewBox='0 0 20 20'\n                        fill='none'\n                        aria-hidden='true'\n                        className='h-5 w-5'\n                      >\n                        <circle\n                          cx='10'\n                          cy='10'\n                          r='9'\n                          stroke='currentColor'\n                          className='text-green-600'\n                          strokeWidth='2'\n                        />\n                        <path\n                          d='M6 10.2l2.6 2.6L14 7.4'\n                          stroke='currentColor'\n                          className='text-green-600'\n                          strokeWidth='2'\n                          strokeLinecap='round'\n                          strokeLinejoin='round'\n                        />\n                      </svg>\n                    ) : null}\n                  </div>\n                </div>\n\n                <div\n                  className='min-h-[24px] flex flex-col items-center justify-center px-1'\n                  role='status'\n                  aria-live='polite'\n                >\n                  {handleInput && !state.error ? (\n                    handleValidation.checking ? (\n                      <div className='text-sm text-[#6b6f76] animate-in fade-in slide-in-from-bottom-1 duration-300'>\n                        Checking…\n                      </div>\n                    ) : handleValidation.clientValid &&\n                      handleValidation.available ? (\n                      <div className='text-green-600 text-sm font-medium animate-in fade-in slide-in-from-bottom-1 duration-300'>\n                        Available\n                      </div>\n                    ) : handleValidation.error ? (\n                      <div className='text-red-500 text-sm animate-in fade-in slide-in-from-top-1 duration-300 text-center'>\n                        Not available\n                      </div>\n                    ) : null\n                  ) : null}\n                </div>\n\n                <AuthButton\n                  type='submit'\n                  disabled={\n                    Boolean(handleStepCtaDisabledReason) || isTransitioning\n                  }\n                  variant='primary'\n                >\n                  {state.isSubmitting ? (\n                    <div className='flex items-center justify-center space-x-2'>\n                      <LoadingSpinner size='sm' className='text-current' />\n                      <span>Saving…</span>\n                    </div>\n                  ) : (\n                    'Continue'\n                  )}\n                </AuthButton>\n\n                <div\n                  className='min-h-[40px] flex items-center justify-center text-center text-xs text-[#6b6f76]'\n                  role='status'\n                  aria-live='polite'\n                >\n                  {state.error ?? null}\n                </div>\n              </form>\n            </div>\n          </div>\n        );\n\n      case 2:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[2].title}\n              </h1>\n              {ONBOARDING_STEPS[2].prompt ? (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[2].prompt}\n                </p>\n              ) : null}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <AuthLinkPreviewCard\n                label='Your link'\n                hrefText={`${displayDomain}/${profileReadyHandle || handle}`}\n              />\n\n              <div className='space-y-4'>\n                <AuthButton onClick={goToDashboard}>Go to Dashboard</AuthButton>\n\n                <AuthButton onClick={copyProfileLink} variant='secondary'>\n                  Copy Link\n                </AuthButton>\n              </div>\n\n              {copyFeedback && (\n                <div className='p-3 bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800/50 rounded-xl text-green-600 dark:text-green-400 text-sm text-center'>\n                  {copyFeedback}\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className='w-full flex flex-col items-center justify-center bg-(--bg) text-(--fg) gap-6'>\n      <AuthBackButton onClick={goBack} ariaLabel='Go back' />\n\n      <Link\n        href='#main-content'\n        className='sr-only focus-visible:not-sr-only focus-visible:absolute focus-visible:top-4 focus-visible:left-4 px-4 py-2 rounded-md z-50 btn btn-primary btn-sm'\n      >\n        Skip to main content\n      </Link>\n\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        Step {currentStepIndex + 1} of {ONBOARDING_STEPS.length}:{' '}\n        {ONBOARDING_STEPS[currentStepIndex]?.title}\n      </div>\n\n      <main\n        className='w-full max-w-3xl flex items-center justify-center px-4 pb-8'\n        id='main-content'\n        role='main'\n        aria-labelledby='step-heading'\n      >\n        <div id='step-heading' className='sr-only'>\n          {ONBOARDING_STEPS[currentStepIndex]?.title} step content\n        </div>\n        <div\n          className={`w-full max-w-2xl transform transition-all duration-500 ease-in-out ${\n            isTransitioning\n              ? 'opacity-0 translate-y-4'\n              : 'opacity-100 translate-y-0'\n          }`}\n        >\n          {renderStepContent()}\n        </div>\n      </main>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noRedundantRoles",
      "severity": "warning",
      "description": "Using the role attribute 'main' on the 'main' element is redundant, because it is implied by its semantic.",
      "message": [
        {
          "elements": [],
          "content": "Using the role attribute 'main' on the 'main' element is redundant, because it is implied by its semantic."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Unsafe fix: Remove the " },
                { "elements": ["Emphasis"], "content": "role" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "'use client';\n\nimport Link from 'next/link';      <main\n        className='w-full max-w-3xl flex items-center justify-center px-4 pb-8'\n        id='main-content'\n        role='main'\n        aria-labelledby='step-heading'\n      >  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 44] } } },
                { "equalLines": { "line_count": 762 } },
                { "diffOp": { "equal": { "range": [44, 161] } } },
                { "diffOp": { "delete": { "range": [161, 181] } } },
                { "diffOp": { "equal": { "range": [181, 228] } } },
                { "equalLines": { "line_count": 14 } },
                { "diffOp": { "equal": { "range": [228, 235] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/AppleStyleOnboardingForm.tsx"
        },
        "span": [24802, 24808],
        "sourceCode": "'use client';\n\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { completeOnboarding } from '@/app/onboarding/actions';\nimport {\n  AuthBackButton,\n  AuthButton,\n  AuthLinkPreviewCard,\n  AuthTextInput,\n} from '@/components/auth';\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\nimport { PROFILE_HOSTNAME, PROFILE_URL } from '@/constants/domains';\nimport { identify, track } from '@/lib/analytics';\nimport {\n  generateUsernameSuggestions,\n  validateUsernameFormat,\n} from '@/lib/validation/client-username';\n\ninterface AppleStyleOnboardingFormProps {\n  initialDisplayName?: string;\n  initialHandle?: string;\n  userEmail?: string | null;\n  userId: string;\n  skipNameStep?: boolean;\n}\n\ninterface OnboardingState {\n  step:\n    | 'validating'\n    | 'creating-user'\n    | 'checking-handle'\n    | 'creating-artist'\n    | 'complete';\n  progress: number;\n  error: string | null;\n  retryCount: number;\n  isSubmitting: boolean;\n}\n\ninterface HandleValidationState {\n  available: boolean;\n  checking: boolean;\n  error: string | null;\n  clientValid: boolean;\n  suggestions: string[];\n}\n\nconst ONBOARDING_STEPS = [\n  {\n    id: 'name',\n    title: 'What should we call you?',\n    prompt: '',\n  },\n  {\n    id: 'handle',\n    title: 'Claim your handle',\n    prompt: '',\n  },\n  { id: 'done', title: \"You're live.\", prompt: '' },\n] as const;\n\nexport function AppleStyleOnboardingForm({\n  initialDisplayName = '',\n  initialHandle = '',\n  userEmail = null,\n  userId,\n  skipNameStep = false,\n}: AppleStyleOnboardingFormProps) {\n  const router = useRouter();\n\n  const PRODUCTION_PROFILE_DOMAIN = PROFILE_HOSTNAME;\n  const PRODUCTION_PROFILE_BASE_URL = PROFILE_URL;\n\n  const normalizedInitialHandle = initialHandle.trim().toLowerCase();\n  const [currentStepIndex, setCurrentStepIndex] = useState(\n    skipNameStep ? 1 : 0\n  );\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [handle, setHandle] = useState(normalizedInitialHandle);\n  const [handleInput, setHandleInput] = useState(normalizedInitialHandle);\n  const [fullName, setFullName] = useState(initialDisplayName);\n  const [profileReadyHandle, setProfileReadyHandle] = useState(\n    normalizedInitialHandle\n  );\n  const [copyFeedback, setCopyFeedback] = useState<string | null>(null);\n  const [state, setState] = useState<OnboardingState>({\n    step: 'validating',\n    progress: 0,\n    error: null,\n    retryCount: 0,\n    isSubmitting: false,\n  });\n\n  const [handleValidation, setHandleValidation] =\n    useState<HandleValidationState>({\n      available: false,\n      checking: false,\n      error: null,\n      clientValid: Boolean(normalizedInitialHandle),\n      suggestions: [],\n    });\n\n  const validationSequence = useRef(0);\n  const abortController = useRef<AbortController | null>(null);\n  const nameInputRef = useRef<HTMLInputElement | null>(null);\n  const handleInputRef = useRef<HTMLInputElement | null>(null);\n\n  const displayDomain = PRODUCTION_PROFILE_DOMAIN;\n\n  const namePlaceholder = useMemo(() => {\n    const options = [\n      'Madonna',\n      'BLACKPINK',\n      'Tiësto',\n      'FISHER',\n      'Neon Hitch',\n      'U2',\n      'Imagine Dragons',\n      'ODESZA',\n    ];\n    return options[Math.floor(Math.random() * options.length)];\n  }, []);\n\n  const isDisplayNameValid = useMemo(() => {\n    const trimmed = fullName.trim();\n    return trimmed.length > 0 && trimmed.length <= 50;\n  }, [fullName]);\n\n  useEffect(() => {\n    if (userId) {\n      track('onboarding_started', {\n        user_id: userId,\n        timestamp: new Date().toISOString(),\n      });\n    }\n  }, [userId]);\n\n  // Step-based autofocus for keyboard-only users\n  useEffect(() => {\n    const target =\n      currentStepIndex === 0 ? nameInputRef.current : handleInputRef.current;\n    if (target) {\n      target.focus();\n    }\n  }, [currentStepIndex]);\n\n  const goToNextStep = useCallback(() => {\n    if (isTransitioning) return;\n    if (currentStepIndex >= ONBOARDING_STEPS.length - 1) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentStepIndex(prev => prev + 1);\n      setIsTransitioning(false);\n    }, 250);\n  }, [currentStepIndex, isTransitioning]);\n\n  const goToPreviousStep = useCallback(() => {\n    if (isTransitioning) return;\n    if (currentStepIndex === 0) return;\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setCurrentStepIndex(prev => prev - 1);\n      setIsTransitioning(false);\n    }, 250);\n  }, [currentStepIndex, isTransitioning]);\n\n  const validateHandle = useCallback(\n    async (input: string) => {\n      const normalizedInput = input.trim().toLowerCase();\n      validationSequence.current += 1;\n      const runId = validationSequence.current;\n\n      if (\n        normalizedInitialHandle &&\n        normalizedInput === normalizedInitialHandle\n      ) {\n        setHandle(normalizedInput);\n        setHandleValidation({\n          available: true,\n          checking: false,\n          error: null,\n          clientValid: true,\n          suggestions: [],\n        });\n        return;\n      }\n\n      // Basic client validation aligned with server rules\n      const clientResult = validateUsernameFormat(normalizedInput);\n      if (!clientResult.valid) {\n        setHandleValidation({\n          available: false,\n          checking: false,\n          error: clientResult.error,\n          clientValid: false,\n          suggestions: clientResult.suggestion ? [clientResult.suggestion] : [],\n        });\n        return;\n      }\n\n      abortController.current?.abort();\n      const controller = new AbortController();\n      abortController.current = controller;\n\n      setHandleValidation({\n        available: false,\n        checking: true,\n        error: null,\n        clientValid: true,\n        suggestions: [],\n      });\n\n      try {\n        const response = await fetch(\n          `/api/handle/check?handle=${encodeURIComponent(normalizedInput)}`,\n          { signal: controller.signal }\n        );\n\n        if (validationSequence.current !== runId) return;\n\n        if (!response.ok) {\n          const data = (await response.json().catch(() => ({}))) as {\n            error?: string;\n          };\n          throw new Error(data.error || 'Unable to check handle.');\n        }\n\n        const data = (await response.json()) as {\n          available: boolean;\n          error?: string;\n        };\n\n        if (validationSequence.current !== runId) return;\n\n        if (data.available) {\n          setHandle(normalizedInput);\n          setHandleValidation({\n            available: true,\n            checking: false,\n            error: null,\n            clientValid: true,\n            suggestions: [],\n          });\n        } else {\n          const suggestions = generateUsernameSuggestions(\n            normalizedInput,\n            fullName\n          ).slice(0, 3);\n          setHandleValidation({\n            available: false,\n            checking: false,\n            error: data.error || 'Handle already taken',\n            clientValid: true,\n            suggestions,\n          });\n        }\n      } catch (error) {\n        if (error instanceof Error && error.name === 'AbortError') {\n          return;\n        }\n\n        setHandleValidation({\n          available: false,\n          checking: false,\n          error: 'Unable to check handle right now.',\n          clientValid: true,\n          suggestions: [],\n        });\n      }\n    },\n    [fullName, normalizedInitialHandle]\n  );\n\n  const handleStepCtaDisabledReason = useMemo(() => {\n    if (state.isSubmitting) return 'Saving…';\n    if (state.error) return state.error;\n    if (!handleInput) return 'Enter a handle to continue';\n    if (!handleValidation.clientValid) {\n      return handleValidation.error || 'Handle is invalid';\n    }\n    if (handleValidation.checking) return 'Checking availability…';\n    if (!handleValidation.available) {\n      return handleValidation.error || 'Handle is taken';\n    }\n    return null;\n  }, [handleInput, handleValidation, state.error, state.isSubmitting]);\n\n  useEffect(() => {\n    if (!handleInput) {\n      setHandleValidation({\n        available: false,\n        checking: false,\n        error: null,\n        clientValid: false,\n        suggestions: [],\n      });\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      void validateHandle(handleInput);\n    }, 400);\n\n    return () => {\n      clearTimeout(timer);\n      abortController.current?.abort();\n    };\n  }, [handleInput, validateHandle]);\n\n  const handleSubmit = useCallback(\n    async (e?: React.FormEvent) => {\n      if (e) e.preventDefault();\n\n      const resolvedHandle = (handle || handleInput).trim().toLowerCase();\n\n      const redirectUrl = `/onboarding?handle=${encodeURIComponent(resolvedHandle)}`;\n\n      if (\n        state.isSubmitting ||\n        Boolean(state.error) ||\n        !handleValidation.clientValid ||\n        handleValidation.checking ||\n        !handleValidation.available ||\n        !resolvedHandle\n      ) {\n        return;\n      }\n\n      track('onboarding_submission_started', {\n        user_id: userId,\n        handle: resolvedHandle,\n      });\n\n      identify(userId, {\n        email: userEmail ?? undefined,\n        handle: resolvedHandle,\n        onboarding_started_at: new Date().toISOString(),\n      });\n\n      setState(prev => ({\n        ...prev,\n        error: null,\n        step: 'validating',\n        isSubmitting: true,\n      }));\n\n      try {\n        const trimmedName = fullName.trim();\n        if (!trimmedName) {\n          throw new Error('[DISPLAY_NAME_REQUIRED] Display name is required');\n        }\n        await completeOnboarding({\n          username: resolvedHandle,\n          displayName: trimmedName,\n          email: userEmail,\n          redirectToDashboard: false,\n        });\n\n        setState(prev => ({ ...prev, step: 'complete', progress: 100 }));\n        setProfileReadyHandle(resolvedHandle);\n\n        track('onboarding_completed', {\n          user_id: userId,\n          handle: resolvedHandle,\n          completion_time: new Date().toISOString(),\n        });\n\n        goToNextStep();\n      } catch (error) {\n        if (error instanceof Error && error.message === 'NEXT_REDIRECT') {\n          setState(prev => ({ ...prev, step: 'complete', progress: 100 }));\n          return;\n        }\n\n        const errorMessage =\n          error instanceof Error ? error.message : 'Unknown error';\n        const errorCodeMatch =\n          error instanceof Error ? error.message.match(/^\\[([A-Z_]+)\\]/) : null;\n        const errorCode = errorCodeMatch?.[1];\n\n        track('onboarding_error', {\n          user_id: userId,\n          handle: resolvedHandle,\n          error_message: errorMessage,\n          error_code: errorCode,\n          error_step: 'submission',\n          timestamp: new Date().toISOString(),\n        });\n\n        let userMessage = 'Could not save. Please try again.';\n        const message = errorMessage.toUpperCase();\n        if (message.includes('INVALID_SESSION')) {\n          userMessage = 'Could not save. Please refresh and try again.';\n        } else if (message.includes('USERNAME_TAKEN')) {\n          userMessage = 'Not available. Try another handle.';\n        } else if (message.includes('EMAIL_IN_USE')) {\n          userMessage =\n            'This email is already in use. Please sign in with the original account or use a different email.';\n          router.push(\n            `/signin?redirect_url=${encodeURIComponent(redirectUrl)}`\n          );\n          return;\n        } else if (\n          message.includes('RATE_LIMITED') ||\n          message.includes('TOO_MANY_ATTEMPTS')\n        ) {\n          userMessage = 'Too many attempts. Please try again in a few moments.';\n        } else if (\n          message.includes('INVALID_USERNAME') ||\n          message.includes('USERNAME_RESERVED') ||\n          message.includes('USERNAME_INVALID_FORMAT') ||\n          message.includes('USERNAME_TOO_SHORT') ||\n          message.includes('USERNAME_TOO_LONG')\n        ) {\n          userMessage = 'That handle can’t be used. Try another one.';\n        } else if (message.includes('DISPLAY_NAME_REQUIRED')) {\n          userMessage = 'Please enter your name to continue.';\n        }\n\n        if (\n          process.env.NODE_ENV === 'development' &&\n          userMessage === 'Could not save. Please try again.' &&\n          errorCode\n        ) {\n          userMessage = `Could not save (${errorCode}). Please try again.`;\n        }\n\n        setState(prev => ({\n          ...prev,\n          error: userMessage,\n          step: 'validating',\n          progress: 0,\n          isSubmitting: false,\n        }));\n      }\n    },\n    [\n      fullName,\n      goToNextStep,\n      handle,\n      handleInput,\n      handleValidation.available,\n      handleValidation.checking,\n      handleValidation.clientValid,\n      router,\n      state.error,\n      state.isSubmitting,\n      userEmail,\n      userId,\n    ]\n  );\n\n  const copyProfileLink = useCallback(() => {\n    const targetHandle = profileReadyHandle || handle || handleInput;\n    const link = `${PRODUCTION_PROFILE_BASE_URL}/${targetHandle}`;\n    navigator.clipboard\n      .writeText(link)\n      .then(() => {\n        setCopyFeedback('Link copied to clipboard!');\n        setTimeout(() => {\n          setCopyFeedback(null);\n        }, 2000);\n      })\n      .catch(err => {\n        console.error('Failed to copy link:', err);\n      });\n  }, [PRODUCTION_PROFILE_BASE_URL, handle, handleInput, profileReadyHandle]);\n\n  const goToDashboard = useCallback(() => {\n    router.push('/app/dashboard/overview');\n    router.refresh();\n  }, [router]);\n\n  const goBack = useCallback(() => {\n    if (currentStepIndex > 0) {\n      goToPreviousStep();\n    } else {\n      router.back();\n    }\n  }, [currentStepIndex, goToPreviousStep, router]);\n\n  const renderStepContent = () => {\n    switch (currentStepIndex) {\n      case 0:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-2xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[0].title}\n              </h1>\n              {ONBOARDING_STEPS[0].prompt && (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[0].prompt}\n                </p>\n              )}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <form\n                className='space-y-4'\n                onSubmit={e => {\n                  e.preventDefault();\n                  if (\n                    isDisplayNameValid &&\n                    !isTransitioning &&\n                    !state.isSubmitting\n                  ) {\n                    goToNextStep();\n                  }\n                }}\n              >\n                <AuthTextInput\n                  id='display-name'\n                  ref={nameInputRef}\n                  name='name'\n                  type='text'\n                  value={fullName}\n                  onChange={e => setFullName(e.target.value)}\n                  placeholder={namePlaceholder}\n                  aria-label='Your full name'\n                  maxLength={50}\n                  autoComplete='name'\n                />\n\n                <AuthButton\n                  type='submit'\n                  disabled={\n                    !isDisplayNameValid || isTransitioning || state.isSubmitting\n                  }\n                >\n                  Continue\n                </AuthButton>\n              </form>\n            </div>\n          </div>\n        );\n\n      case 1:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[1].title}\n              </h1>\n              {ONBOARDING_STEPS[1].prompt ? (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[1].prompt}\n                </p>\n              ) : null}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <form className='space-y-4' onSubmit={handleSubmit}>\n                <label\n                  className='text-sm font-medium text-(--muted)'\n                  htmlFor='handle-input'\n                >\n                  @handle\n                </label>\n                <div className='relative'>\n                  <div className='pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 text-[#6b6f76]'>\n                    @\n                  </div>\n                  <AuthTextInput\n                    id='handle-input'\n                    ref={handleInputRef}\n                    name='username'\n                    aria-label='Enter your desired handle'\n                    type='text'\n                    value={handleInput}\n                    onChange={e =>\n                      setHandleInput(\n                        e.target.value\n                          .toLowerCase()\n                          .replace(/\\s+/g, '')\n                          .replace(/^@+/, '')\n                      )\n                    }\n                    placeholder='yourhandle'\n                    autoComplete='username'\n                    autoCapitalize='none'\n                    autoCorrect='off'\n                    spellCheck={false}\n                    aria-invalid={handleValidation.error ? 'true' : undefined}\n                    className={[\n                      'pl-10 pr-10',\n                      state.error || handleValidation.error\n                        ? 'border-red-500'\n                        : !state.error && handleValidation.available\n                          ? 'border-green-500'\n                          : undefined,\n                    ]\n                      .filter(Boolean)\n                      .join(' ')}\n                  />\n                  <div className='absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 flex items-center justify-center'>\n                    {handleValidation.checking ? (\n                      <LoadingSpinner\n                        size='sm'\n                        className='text-secondary-token'\n                      />\n                    ) : state.error || handleValidation.error ? (\n                      <svg\n                        viewBox='0 0 20 20'\n                        fill='none'\n                        aria-hidden='true'\n                        className='h-5 w-5'\n                      >\n                        <circle\n                          cx='10'\n                          cy='10'\n                          r='9'\n                          stroke='currentColor'\n                          className='text-red-500'\n                          strokeWidth='2'\n                        />\n                        <path\n                          d='M6.6 6.6l6.8 6.8M13.4 6.6l-6.8 6.8'\n                          stroke='currentColor'\n                          className='text-red-500'\n                          strokeWidth='2'\n                          strokeLinecap='round'\n                        />\n                      </svg>\n                    ) : handleInput &&\n                      handleValidation.clientValid &&\n                      handleValidation.available ? (\n                      <svg\n                        viewBox='0 0 20 20'\n                        fill='none'\n                        aria-hidden='true'\n                        className='h-5 w-5'\n                      >\n                        <circle\n                          cx='10'\n                          cy='10'\n                          r='9'\n                          stroke='currentColor'\n                          className='text-green-600'\n                          strokeWidth='2'\n                        />\n                        <path\n                          d='M6 10.2l2.6 2.6L14 7.4'\n                          stroke='currentColor'\n                          className='text-green-600'\n                          strokeWidth='2'\n                          strokeLinecap='round'\n                          strokeLinejoin='round'\n                        />\n                      </svg>\n                    ) : null}\n                  </div>\n                </div>\n\n                <div\n                  className='min-h-[24px] flex flex-col items-center justify-center px-1'\n                  role='status'\n                  aria-live='polite'\n                >\n                  {handleInput && !state.error ? (\n                    handleValidation.checking ? (\n                      <div className='text-sm text-[#6b6f76] animate-in fade-in slide-in-from-bottom-1 duration-300'>\n                        Checking…\n                      </div>\n                    ) : handleValidation.clientValid &&\n                      handleValidation.available ? (\n                      <div className='text-green-600 text-sm font-medium animate-in fade-in slide-in-from-bottom-1 duration-300'>\n                        Available\n                      </div>\n                    ) : handleValidation.error ? (\n                      <div className='text-red-500 text-sm animate-in fade-in slide-in-from-top-1 duration-300 text-center'>\n                        Not available\n                      </div>\n                    ) : null\n                  ) : null}\n                </div>\n\n                <AuthButton\n                  type='submit'\n                  disabled={\n                    Boolean(handleStepCtaDisabledReason) || isTransitioning\n                  }\n                  variant='primary'\n                >\n                  {state.isSubmitting ? (\n                    <div className='flex items-center justify-center space-x-2'>\n                      <LoadingSpinner size='sm' className='text-current' />\n                      <span>Saving…</span>\n                    </div>\n                  ) : (\n                    'Continue'\n                  )}\n                </AuthButton>\n\n                <div\n                  className='min-h-[40px] flex items-center justify-center text-center text-xs text-[#6b6f76]'\n                  role='status'\n                  aria-live='polite'\n                >\n                  {state.error ?? null}\n                </div>\n              </form>\n            </div>\n          </div>\n        );\n\n      case 2:\n        return (\n          <div className='flex flex-col items-center justify-center h-full space-y-8'>\n            <div className='text-center space-y-3 max-w-xl px-4'>\n              <h1 className='text-2xl sm:text-3xl font-semibold text-(--fg) transition-colors sm:whitespace-nowrap'>\n                {ONBOARDING_STEPS[2].title}\n              </h1>\n              {ONBOARDING_STEPS[2].prompt ? (\n                <p className='text-(--muted) text-sm sm:text-base'>\n                  {ONBOARDING_STEPS[2].prompt}\n                </p>\n              ) : null}\n            </div>\n\n            <div className='w-full max-w-md space-y-6'>\n              <AuthLinkPreviewCard\n                label='Your link'\n                hrefText={`${displayDomain}/${profileReadyHandle || handle}`}\n              />\n\n              <div className='space-y-4'>\n                <AuthButton onClick={goToDashboard}>Go to Dashboard</AuthButton>\n\n                <AuthButton onClick={copyProfileLink} variant='secondary'>\n                  Copy Link\n                </AuthButton>\n              </div>\n\n              {copyFeedback && (\n                <div className='p-3 bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800/50 rounded-xl text-green-600 dark:text-green-400 text-sm text-center'>\n                  {copyFeedback}\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className='w-full flex flex-col items-center justify-center bg-(--bg) text-(--fg) gap-6'>\n      <AuthBackButton onClick={goBack} ariaLabel='Go back' />\n\n      <Link\n        href='#main-content'\n        className='sr-only focus-visible:not-sr-only focus-visible:absolute focus-visible:top-4 focus-visible:left-4 px-4 py-2 rounded-md z-50 btn btn-primary btn-sm'\n      >\n        Skip to main content\n      </Link>\n\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        Step {currentStepIndex + 1} of {ONBOARDING_STEPS.length}:{' '}\n        {ONBOARDING_STEPS[currentStepIndex]?.title}\n      </div>\n\n      <main\n        className='w-full max-w-3xl flex items-center justify-center px-4 pb-8'\n        id='main-content'\n        role='main'\n        aria-labelledby='step-heading'\n      >\n        <div id='step-heading' className='sr-only'>\n          {ONBOARDING_STEPS[currentStepIndex]?.title} step content\n        </div>\n        <div\n          className={`w-full max-w-2xl transform transition-all duration-500 ease-in-out ${\n            isTransitioning\n              ? 'opacity-0 translate-y-4'\n              : 'opacity-100 translate-y-0'\n          }`}\n        >\n          {renderStepContent()}\n        </div>\n      </main>\n    </div>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardAudienceTable.tsx"
        },
        "span": [18513, 18706],
        "sourceCode": "'use client';\n\nimport { BellAlertIcon, UserGroupIcon } from '@heroicons/react/24/outline';\nimport {\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport * as React from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminPageSizeSelect } from '@/components/admin/table/AdminPageSizeSelect';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { Icon } from '@/components/atoms/Icon';\nimport { AudienceRowActionsMenu } from '@/components/dashboard/AudienceRowActionsMenu';\nimport { AudienceIntentBadge } from '@/components/dashboard/atoms/AudienceIntentBadge';\nimport {\n  AUDIENCE_MEMBER_SIDEBAR_WIDTH,\n  AudienceMemberSidebar,\n} from '@/components/dashboard/organisms/AudienceMemberSidebar';\nimport { EmptyState } from '@/components/ui/EmptyState';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { cn } from '@/lib/utils';\nimport {\n  formatCountryLabel,\n  formatLongDate,\n  formatTimeAgo,\n  getDeviceIndicator,\n} from '@/lib/utils/audience';\nimport type { AudienceMember } from '@/types';\n\nexport type AudienceMode = 'members' | 'subscribers';\n\ntype AudienceRow = AudienceMember;\n\ntype MemberSortColumn =\n  | 'lastSeen'\n  | 'visits'\n  | 'intent'\n  | 'type'\n  | 'engagement'\n  | 'createdAt';\n\ntype SubscriberSortColumn = 'email' | 'phone' | 'country' | 'createdAt';\n\ntype MemberColumnKey = (typeof MEMBER_COLUMNS)[number]['key'];\n\ntype SubscriberColumnKey = (typeof SUBSCRIBER_COLUMNS)[number]['key'];\n\ntype ColumnKey = MemberColumnKey | SubscriberColumnKey;\n\nconst MEMBER_COLUMNS = [\n  { key: 'displayName', label: 'User' },\n  { key: 'type', label: 'Type' },\n  { key: 'location', label: 'Location' },\n  { key: 'device', label: 'Device' },\n  { key: 'visits', label: 'Visits' },\n  { key: 'actions', label: 'Actions' },\n  { key: 'lastSeen', label: 'Last seen' },\n] as const;\n\nconst SUBSCRIBER_COLUMNS = [\n  { key: 'email', label: 'Email' },\n  { key: 'phone', label: 'Phone' },\n  { key: 'country', label: 'Country' },\n  { key: 'createdAt', label: 'Signed up' },\n] as const;\n\nasync function copyTextToClipboard(text: string): Promise<boolean> {\n  if (typeof navigator === 'undefined' || !navigator.clipboard?.writeText) {\n    return false;\n  }\n\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction resolveAudienceActionIcon(label: string): string {\n  const normalized = label.trim().toLowerCase();\n  if (normalized.includes('visit')) return 'Eye';\n  if (normalized.includes('view')) return 'Eye';\n  if (normalized.includes('tip')) return 'HandCoins';\n  if (normalized.includes('purchase')) return 'CreditCard';\n  if (normalized.includes('subscribe')) return 'Bell';\n  if (normalized.includes('follow')) return 'UserPlus';\n  if (normalized.includes('click')) return 'MousePointerClick';\n  if (normalized.includes('link')) return 'Link';\n  return 'Sparkles';\n}\n\nexport interface DashboardAudienceTableProps {\n  mode: AudienceMode;\n  rows: AudienceRow[];\n  total: number;\n  page: number;\n  pageSize: number;\n  sort: string;\n  direction: 'asc' | 'desc';\n  onPageChange: (page: number) => void;\n  onPageSizeChange: (pageSize: number) => void;\n  onSortChange: (sort: string) => void;\n  profileUrl?: string;\n}\n\nexport function DashboardAudienceTable({\n  mode,\n  rows,\n  total,\n  page,\n  pageSize,\n  sort,\n  direction,\n  onPageChange,\n  onPageSizeChange,\n  onSortChange,\n  profileUrl,\n}: DashboardAudienceTableProps) {\n  const notifications = useNotifications();\n  const { setTableMeta } = useTableMeta();\n  const tableContainerRef = React.useRef<HTMLDivElement | null>(null);\n  const tbodyRef = React.useRef<HTMLTableSectionElement | null>(null);\n  const [headerElevated, setHeaderElevated] = React.useState(false);\n  const [openMenuRowId, setOpenMenuRowId] = React.useState<string | null>(null);\n  const [selectedMember, setSelectedMember] =\n    React.useState<AudienceRow | null>(null);\n  const [copiedProfileLink, setCopiedProfileLink] = React.useState(false);\n  const copyTimeoutRef = React.useRef<number | null>(null);\n\n  const rowIds = React.useMemo(() => rows.map(row => row.id), [rows]);\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n    clearSelection,\n  } = useRowSelection(rowIds);\n\n  React.useEffect(() => {\n    const container = tableContainerRef.current;\n    if (!container) return;\n\n    const handleScroll = () => {\n      setHeaderElevated(container.scrollTop > 0);\n    };\n\n    handleScroll();\n    container.addEventListener('scroll', handleScroll);\n    return () => container.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  React.useEffect(() => {\n    clearSelection();\n    setSelectedMember(null);\n  }, [mode, page, pageSize, sort, direction, clearSelection]);\n\n  React.useEffect(() => {\n    const toggle = () => {\n      if (rows.length === 0) return;\n      setSelectedMember(current => (current ? null : (rows[0] ?? null)));\n    };\n\n    setTableMeta({\n      rowCount: rows.length,\n      toggle: rows.length > 0 ? toggle : null,\n      rightPanelWidth: selectedMember ? AUDIENCE_MEMBER_SIDEBAR_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [rows, selectedMember, setTableMeta]);\n\n  const totalPages = Math.max(1, Math.ceil(total / pageSize));\n  const activeColumns =\n    mode === 'members' ? MEMBER_COLUMNS : SUBSCRIBER_COLUMNS;\n\n  // Virtualization for table rows\n  // eslint-disable-next-line react-hooks/incompatible-library\n  const rowVirtualizer = useVirtualizer({\n    count: rows.length,\n    getScrollElement: () => tableContainerRef.current,\n    estimateSize: () => 60, // Estimated row height in pixels\n    overscan: 5, // Render 5 extra rows above/below viewport\n  });\n\n  const sortableColumnMap: Partial<\n    Record<ColumnKey, MemberSortColumn | SubscriberSortColumn>\n  > = {\n    visits: 'visits',\n    lastSeen: 'lastSeen',\n    email: 'email',\n    phone: 'phone',\n    country: 'country',\n    createdAt: 'createdAt',\n  };\n\n  const selectedRows = React.useMemo(\n    () => rows.filter(row => selectedIds.has(row.id)),\n    [rows, selectedIds]\n  );\n\n  const copySelectedEmails = async (): Promise<void> => {\n    const emails = selectedRows\n      .map(row => row.email)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (emails.length === 0) {\n      notifications.error('No emails available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(emails.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${emails.length} email(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy emails');\n  };\n\n  const copySelectedPhones = async (): Promise<void> => {\n    const phones = selectedRows\n      .map(row => row.phone)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (phones.length === 0) {\n      notifications.error('No phone numbers available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(phones.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${phones.length} phone number(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy phone numbers');\n  };\n\n  const paginationLabel = () => {\n    if (total === 0) {\n      return mode === 'members'\n        ? 'No audience yet. Share your profile to invite visitors.'\n        : 'No signups yet. Invite fans to tap the bell.';\n    }\n\n    const start = (page - 1) * pageSize + 1;\n    const end = Math.min(page * pageSize, total);\n    return `Showing ${start}–${end} of ${total} readers`;\n  };\n\n  const handleCopyProfileLink = React.useCallback(async () => {\n    if (!profileUrl) return;\n    try {\n      await navigator.clipboard.writeText(profileUrl);\n      notifications.success('Profile link copied');\n      setCopiedProfileLink(true);\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n      copyTimeoutRef.current = window.setTimeout(() => {\n        setCopiedProfileLink(false);\n        copyTimeoutRef.current = null;\n      }, 2000);\n    } catch (error) {\n      console.error('Failed to copy profile link', error);\n      notifications.error('Unable to copy profile link');\n    }\n  }, [notifications, profileUrl]);\n\n  React.useEffect(() => {\n    return () => {\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const emptyStateHeading =\n    mode === 'members' ? 'No audience yet' : 'No signups yet';\n  const emptyStateDescription =\n    mode === 'members'\n      ? 'Share your profile to invite visitors. They will appear here as soon as they stop by.'\n      : 'Invite fans to tap the bell on your profile to receive notifications.';\n  const emptyStateIcon =\n    mode === 'members' ? (\n      <UserGroupIcon className='h-6 w-6' aria-hidden='true' />\n    ) : (\n      <BellAlertIcon className='h-6 w-6' aria-hidden='true' />\n    );\n  const emptyStatePrimaryAction = profileUrl\n    ? {\n        label: copiedProfileLink ? 'Link copied' : 'Copy profile link',\n        onClick: () => {\n          void handleCopyProfileLink();\n        },\n      }\n    : {\n        label: 'Open profile settings',\n        href: '/app/dashboard/profile',\n      };\n  const emptyStateSecondaryAction = {\n    label:\n      mode === 'members' ? 'Learn about audience' : 'Learn about subscribers',\n    href: '/support',\n  };\n\n  return (\n    <div\n      className='flex h-full min-h-0 flex-col'\n      data-testid='dashboard-audience-table'\n    >\n      <div className='shrink-0 border-b border-subtle bg-surface-1/75 backdrop-blur-md'>\n        <div className='flex flex-wrap items-start justify-between gap-4 px-4 py-4 sm:px-6'>\n          <div>\n            <h1 className='text-2xl font-semibold tracking-tight text-primary-token'>\n              Audience CRM\n            </h1>\n            <p className='mt-1 text-sm leading-6 text-secondary-token'>\n              {mode === 'members'\n                ? 'Every visitor, anonymous or identified, lives in this table.'\n                : 'Notification signups from your notification modal.'}\n            </p>\n          </div>\n          <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/60 px-2.5 py-1 text-xs font-medium text-secondary-token'>\n            {total} {total === 1 ? 'person' : 'people'}\n          </span>\n        </div>\n      </div>\n\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <div className='flex h-full min-h-0 flex-col bg-surface-1'>\n          <div className='flex-1 min-h-0 overflow-auto' ref={tableContainerRef}>\n            {rows.length === 0 ? (\n              <EmptyState\n                icon={emptyStateIcon}\n                heading={emptyStateHeading}\n                description={emptyStateDescription}\n                action={emptyStatePrimaryAction}\n                secondaryAction={emptyStateSecondaryAction}\n              />\n            ) : (\n              <table\n                className='w-full min-w-[960px] border-separate border-spacing-0 text-[13px]'\n                aria-label={\n                  mode === 'members'\n                    ? 'Audience members table'\n                    : 'Subscribers table'\n                }\n              >\n                <caption className='sr-only'>\n                  {mode === 'members'\n                    ? 'Table showing all audience members with their visit history, location, and engagement data'\n                    : 'Table showing all subscribers with their contact information and signup dates'}\n                </caption>\n                <thead\n                  className={cn(\n                    'sticky top-0 z-20 bg-surface-1/75 backdrop-blur-md',\n                    headerElevated &&\n                      'shadow-sm shadow-black/10 dark:shadow-black/40'\n                  )}\n                >\n                  <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                    <th className='w-14 border-b border-subtle px-4 py-3 text-left sm:px-6'>\n                      <Checkbox\n                        aria-label='Select all'\n                        checked={headerCheckboxState}\n                        onCheckedChange={() => toggleSelectAll()}\n                      />\n                    </th>\n\n                    {activeColumns.map((column, index) => {\n                      const sortKey =\n                        sortableColumnMap[column.key as ColumnKey];\n                      const isSortable = Boolean(sortKey);\n                      const isActive = isSortable && sortKey === sort;\n                      const activeDirection = isActive ? direction : undefined;\n\n                      return (\n                        <th\n                          key={column.key}\n                          className='border-b border-subtle px-4 py-3 text-left sm:px-6'\n                        >\n                          <div className='flex items-center justify-between gap-2'>\n                            {isSortable ? (\n                              <SortableHeaderButton\n                                label={column.label}\n                                direction={\n                                  activeDirection as 'asc' | 'desc' | undefined\n                                }\n                                onClick={() =>\n                                  onSortChange(sortKey as unknown as string)\n                                }\n                              />\n                            ) : (\n                              <span className='inline-flex items-center font-semibold'>\n                                {column.label}\n                              </span>\n                            )}\n\n                            {index === 0 ? (\n                              <div\n                                className={cn(\n                                  'inline-flex items-center transition-all duration-150',\n                                  selectedCount > 0\n                                    ? 'opacity-100 translate-y-0'\n                                    : 'pointer-events-none opacity-0 -translate-y-0.5'\n                                )}\n                              >\n                                <DropdownMenu>\n                                  <DropdownMenuTrigger asChild>\n                                    <Button\n                                      variant='secondary'\n                                      size='sm'\n                                      className='normal-case'\n                                    >\n                                      Bulk actions\n                                    </Button>\n                                  </DropdownMenuTrigger>\n                                  <DropdownMenuContent align='end'>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedEmails();\n                                      }}\n                                    >\n                                      Copy emails\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedPhones();\n                                      }}\n                                    >\n                                      Copy phone numbers\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => clearSelection()}\n                                    >\n                                      Clear selection\n                                    </DropdownMenuItem>\n                                  </DropdownMenuContent>\n                                </DropdownMenu>\n                              </div>\n                            ) : null}\n                          </div>\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n\n                <tbody\n                  ref={tbodyRef}\n                  style={{\n                    position: 'relative',\n                    height: `${rowVirtualizer.getTotalSize()}px`,\n                  }}\n                >\n                  {rowVirtualizer.getVirtualItems().map(virtualRow => {\n                    const row = rows[virtualRow.index];\n                    const deviceIndicator = getDeviceIndicator(row.deviceType);\n                    const isChecked = selectedIds.has(row.id);\n                    const rowNumber =\n                      (page - 1) * pageSize + virtualRow.index + 1;\n\n                    return (\n                      <tr\n                        key={row.id}\n                        data-index={virtualRow.index}\n                        ref={rowVirtualizer.measureElement}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0 hover:bg-surface-2',\n                          selectedMember?.id === row.id && 'bg-surface-2'\n                        )}\n                        style={{\n                          position: 'absolute',\n                          top: 0,\n                          left: 0,\n                          width: '100%',\n                          transform: `translateY(${virtualRow.start}px)`,\n                        }}\n                        onClick={() => setSelectedMember(row)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuRowId(row.id);\n                        }}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle sm:px-6'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${row.displayName || 'row'}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(row.id)}\n                              />\n                            </div>\n                          </div>\n                        </td>\n\n                        {mode === 'members' ? (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='font-semibold'>\n                                {row.displayName || 'Visitor'}\n                              </div>\n                              {row.type !== 'anonymous' ? (\n                                <div className='text-xs text-secondary-token'>\n                                  {row.type === 'email'\n                                    ? (row.email ?? 'Email fan')\n                                    : row.type === 'sms'\n                                      ? (row.phone ?? 'SMS fan')\n                                      : 'Connected fan'}\n                                </div>\n                              ) : null}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/40 px-2 py-0.5 text-[11px] font-medium text-secondary-token capitalize'>\n                                {row.type}\n                              </span>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>{row.locationLabel || 'Unknown'}</span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {deviceIndicator ? (\n                                <Icon\n                                  name={deviceIndicator.iconName}\n                                  className='h-4 w-4 text-secondary-token'\n                                  aria-label={deviceIndicator.label}\n                                  role='img'\n                                />\n                              ) : (\n                                <span className='text-secondary-token'>—</span>\n                              )}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                <span className='font-semibold'>\n                                  {row.visits}\n                                </span>\n                                <AudienceIntentBadge\n                                  intentLevel={row.intentLevel}\n                                />\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                {row.latestActions\n                                  .slice(0, 3)\n                                  .map((action, idx) => {\n                                    const iconName = resolveAudienceActionIcon(\n                                      action.label\n                                    );\n                                    return (\n                                      <span\n                                        key={`${row.id}-${action.label}-${action.platform ?? 'unknown'}-${action.timestamp ?? 'unknown'}-${idx}`}\n                                        className='inline-flex h-7 w-7 items-center justify-center rounded-full border border-subtle bg-surface-2/40 text-tertiary-token'\n                                        title={action.label}\n                                      >\n                                        <Icon\n                                          name={iconName}\n                                          className='h-3.5 w-3.5'\n                                          aria-hidden='true'\n                                        />\n                                        <span className='sr-only'>\n                                          {action.label}\n                                        </span>\n                                      </span>\n                                    );\n                                  })}\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatTimeAgo(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        ) : (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.displayName || 'Contact'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.phone ?? '—'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>\n                                  {row.geoCountry\n                                    ? formatCountryLabel(row.geoCountry)\n                                    : 'Unknown'}\n                                </span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatLongDate(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        )}\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          <div className='sticky bottom-0 z-20 flex flex-wrap items-center justify-between gap-3 border-t border-subtle bg-surface-1/75 px-4 py-2 text-xs text-secondary-token backdrop-blur-md sm:px-6'>\n            <span className='tracking-wide'>{paginationLabel()}</span>\n            <div className='flex items-center gap-3'>\n              <AdminPageSizeSelect\n                initialPageSize={pageSize}\n                onPageSizeChange={onPageSizeChange}\n              />\n              <div className='flex gap-2'>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page <= 1 || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.max(1, page - 1))}\n                >\n                  Previous\n                </Button>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page >= totalPages || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.min(totalPages, page + 1))}\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <AudienceMemberSidebar\n        member={selectedMember}\n        isOpen={Boolean(selectedMember)}\n        onClose={() => setSelectedMember(null)}\n      />\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        {paginationLabel()}\n        {selectedCount > 0 &&\n          `${selectedCount} ${selectedCount === 1 ? 'row' : 'rows'} selected`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useKeyWithClickEvents",
      "severity": "warning",
      "description": "Enforce to have the onClick mouse event with the onKeyUp, the onKeyDown, or the onKeyPress keyboard event.",
      "message": [
        { "elements": [], "content": "Enforce to have the " },
        { "elements": ["Emphasis"], "content": "onClick" },
        { "elements": [], "content": " mouse event with the " },
        { "elements": ["Emphasis"], "content": "onKeyUp" },
        { "elements": [], "content": ", the " },
        { "elements": ["Emphasis"], "content": "onKeyDown" },
        { "elements": [], "content": ", or the " },
        { "elements": ["Emphasis"], "content": "onKeyPress" },
        { "elements": [], "content": " keyboard event." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Actions triggered using mouse events should have corresponding keyboard events to account for keyboard-only navigation."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardAudienceTable.tsx"
        },
        "span": [18513, 18706],
        "sourceCode": "'use client';\n\nimport { BellAlertIcon, UserGroupIcon } from '@heroicons/react/24/outline';\nimport {\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport * as React from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminPageSizeSelect } from '@/components/admin/table/AdminPageSizeSelect';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { Icon } from '@/components/atoms/Icon';\nimport { AudienceRowActionsMenu } from '@/components/dashboard/AudienceRowActionsMenu';\nimport { AudienceIntentBadge } from '@/components/dashboard/atoms/AudienceIntentBadge';\nimport {\n  AUDIENCE_MEMBER_SIDEBAR_WIDTH,\n  AudienceMemberSidebar,\n} from '@/components/dashboard/organisms/AudienceMemberSidebar';\nimport { EmptyState } from '@/components/ui/EmptyState';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { cn } from '@/lib/utils';\nimport {\n  formatCountryLabel,\n  formatLongDate,\n  formatTimeAgo,\n  getDeviceIndicator,\n} from '@/lib/utils/audience';\nimport type { AudienceMember } from '@/types';\n\nexport type AudienceMode = 'members' | 'subscribers';\n\ntype AudienceRow = AudienceMember;\n\ntype MemberSortColumn =\n  | 'lastSeen'\n  | 'visits'\n  | 'intent'\n  | 'type'\n  | 'engagement'\n  | 'createdAt';\n\ntype SubscriberSortColumn = 'email' | 'phone' | 'country' | 'createdAt';\n\ntype MemberColumnKey = (typeof MEMBER_COLUMNS)[number]['key'];\n\ntype SubscriberColumnKey = (typeof SUBSCRIBER_COLUMNS)[number]['key'];\n\ntype ColumnKey = MemberColumnKey | SubscriberColumnKey;\n\nconst MEMBER_COLUMNS = [\n  { key: 'displayName', label: 'User' },\n  { key: 'type', label: 'Type' },\n  { key: 'location', label: 'Location' },\n  { key: 'device', label: 'Device' },\n  { key: 'visits', label: 'Visits' },\n  { key: 'actions', label: 'Actions' },\n  { key: 'lastSeen', label: 'Last seen' },\n] as const;\n\nconst SUBSCRIBER_COLUMNS = [\n  { key: 'email', label: 'Email' },\n  { key: 'phone', label: 'Phone' },\n  { key: 'country', label: 'Country' },\n  { key: 'createdAt', label: 'Signed up' },\n] as const;\n\nasync function copyTextToClipboard(text: string): Promise<boolean> {\n  if (typeof navigator === 'undefined' || !navigator.clipboard?.writeText) {\n    return false;\n  }\n\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction resolveAudienceActionIcon(label: string): string {\n  const normalized = label.trim().toLowerCase();\n  if (normalized.includes('visit')) return 'Eye';\n  if (normalized.includes('view')) return 'Eye';\n  if (normalized.includes('tip')) return 'HandCoins';\n  if (normalized.includes('purchase')) return 'CreditCard';\n  if (normalized.includes('subscribe')) return 'Bell';\n  if (normalized.includes('follow')) return 'UserPlus';\n  if (normalized.includes('click')) return 'MousePointerClick';\n  if (normalized.includes('link')) return 'Link';\n  return 'Sparkles';\n}\n\nexport interface DashboardAudienceTableProps {\n  mode: AudienceMode;\n  rows: AudienceRow[];\n  total: number;\n  page: number;\n  pageSize: number;\n  sort: string;\n  direction: 'asc' | 'desc';\n  onPageChange: (page: number) => void;\n  onPageSizeChange: (pageSize: number) => void;\n  onSortChange: (sort: string) => void;\n  profileUrl?: string;\n}\n\nexport function DashboardAudienceTable({\n  mode,\n  rows,\n  total,\n  page,\n  pageSize,\n  sort,\n  direction,\n  onPageChange,\n  onPageSizeChange,\n  onSortChange,\n  profileUrl,\n}: DashboardAudienceTableProps) {\n  const notifications = useNotifications();\n  const { setTableMeta } = useTableMeta();\n  const tableContainerRef = React.useRef<HTMLDivElement | null>(null);\n  const tbodyRef = React.useRef<HTMLTableSectionElement | null>(null);\n  const [headerElevated, setHeaderElevated] = React.useState(false);\n  const [openMenuRowId, setOpenMenuRowId] = React.useState<string | null>(null);\n  const [selectedMember, setSelectedMember] =\n    React.useState<AudienceRow | null>(null);\n  const [copiedProfileLink, setCopiedProfileLink] = React.useState(false);\n  const copyTimeoutRef = React.useRef<number | null>(null);\n\n  const rowIds = React.useMemo(() => rows.map(row => row.id), [rows]);\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n    clearSelection,\n  } = useRowSelection(rowIds);\n\n  React.useEffect(() => {\n    const container = tableContainerRef.current;\n    if (!container) return;\n\n    const handleScroll = () => {\n      setHeaderElevated(container.scrollTop > 0);\n    };\n\n    handleScroll();\n    container.addEventListener('scroll', handleScroll);\n    return () => container.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  React.useEffect(() => {\n    clearSelection();\n    setSelectedMember(null);\n  }, [mode, page, pageSize, sort, direction, clearSelection]);\n\n  React.useEffect(() => {\n    const toggle = () => {\n      if (rows.length === 0) return;\n      setSelectedMember(current => (current ? null : (rows[0] ?? null)));\n    };\n\n    setTableMeta({\n      rowCount: rows.length,\n      toggle: rows.length > 0 ? toggle : null,\n      rightPanelWidth: selectedMember ? AUDIENCE_MEMBER_SIDEBAR_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [rows, selectedMember, setTableMeta]);\n\n  const totalPages = Math.max(1, Math.ceil(total / pageSize));\n  const activeColumns =\n    mode === 'members' ? MEMBER_COLUMNS : SUBSCRIBER_COLUMNS;\n\n  // Virtualization for table rows\n  // eslint-disable-next-line react-hooks/incompatible-library\n  const rowVirtualizer = useVirtualizer({\n    count: rows.length,\n    getScrollElement: () => tableContainerRef.current,\n    estimateSize: () => 60, // Estimated row height in pixels\n    overscan: 5, // Render 5 extra rows above/below viewport\n  });\n\n  const sortableColumnMap: Partial<\n    Record<ColumnKey, MemberSortColumn | SubscriberSortColumn>\n  > = {\n    visits: 'visits',\n    lastSeen: 'lastSeen',\n    email: 'email',\n    phone: 'phone',\n    country: 'country',\n    createdAt: 'createdAt',\n  };\n\n  const selectedRows = React.useMemo(\n    () => rows.filter(row => selectedIds.has(row.id)),\n    [rows, selectedIds]\n  );\n\n  const copySelectedEmails = async (): Promise<void> => {\n    const emails = selectedRows\n      .map(row => row.email)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (emails.length === 0) {\n      notifications.error('No emails available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(emails.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${emails.length} email(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy emails');\n  };\n\n  const copySelectedPhones = async (): Promise<void> => {\n    const phones = selectedRows\n      .map(row => row.phone)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (phones.length === 0) {\n      notifications.error('No phone numbers available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(phones.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${phones.length} phone number(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy phone numbers');\n  };\n\n  const paginationLabel = () => {\n    if (total === 0) {\n      return mode === 'members'\n        ? 'No audience yet. Share your profile to invite visitors.'\n        : 'No signups yet. Invite fans to tap the bell.';\n    }\n\n    const start = (page - 1) * pageSize + 1;\n    const end = Math.min(page * pageSize, total);\n    return `Showing ${start}–${end} of ${total} readers`;\n  };\n\n  const handleCopyProfileLink = React.useCallback(async () => {\n    if (!profileUrl) return;\n    try {\n      await navigator.clipboard.writeText(profileUrl);\n      notifications.success('Profile link copied');\n      setCopiedProfileLink(true);\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n      copyTimeoutRef.current = window.setTimeout(() => {\n        setCopiedProfileLink(false);\n        copyTimeoutRef.current = null;\n      }, 2000);\n    } catch (error) {\n      console.error('Failed to copy profile link', error);\n      notifications.error('Unable to copy profile link');\n    }\n  }, [notifications, profileUrl]);\n\n  React.useEffect(() => {\n    return () => {\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const emptyStateHeading =\n    mode === 'members' ? 'No audience yet' : 'No signups yet';\n  const emptyStateDescription =\n    mode === 'members'\n      ? 'Share your profile to invite visitors. They will appear here as soon as they stop by.'\n      : 'Invite fans to tap the bell on your profile to receive notifications.';\n  const emptyStateIcon =\n    mode === 'members' ? (\n      <UserGroupIcon className='h-6 w-6' aria-hidden='true' />\n    ) : (\n      <BellAlertIcon className='h-6 w-6' aria-hidden='true' />\n    );\n  const emptyStatePrimaryAction = profileUrl\n    ? {\n        label: copiedProfileLink ? 'Link copied' : 'Copy profile link',\n        onClick: () => {\n          void handleCopyProfileLink();\n        },\n      }\n    : {\n        label: 'Open profile settings',\n        href: '/app/dashboard/profile',\n      };\n  const emptyStateSecondaryAction = {\n    label:\n      mode === 'members' ? 'Learn about audience' : 'Learn about subscribers',\n    href: '/support',\n  };\n\n  return (\n    <div\n      className='flex h-full min-h-0 flex-col'\n      data-testid='dashboard-audience-table'\n    >\n      <div className='shrink-0 border-b border-subtle bg-surface-1/75 backdrop-blur-md'>\n        <div className='flex flex-wrap items-start justify-between gap-4 px-4 py-4 sm:px-6'>\n          <div>\n            <h1 className='text-2xl font-semibold tracking-tight text-primary-token'>\n              Audience CRM\n            </h1>\n            <p className='mt-1 text-sm leading-6 text-secondary-token'>\n              {mode === 'members'\n                ? 'Every visitor, anonymous or identified, lives in this table.'\n                : 'Notification signups from your notification modal.'}\n            </p>\n          </div>\n          <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/60 px-2.5 py-1 text-xs font-medium text-secondary-token'>\n            {total} {total === 1 ? 'person' : 'people'}\n          </span>\n        </div>\n      </div>\n\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <div className='flex h-full min-h-0 flex-col bg-surface-1'>\n          <div className='flex-1 min-h-0 overflow-auto' ref={tableContainerRef}>\n            {rows.length === 0 ? (\n              <EmptyState\n                icon={emptyStateIcon}\n                heading={emptyStateHeading}\n                description={emptyStateDescription}\n                action={emptyStatePrimaryAction}\n                secondaryAction={emptyStateSecondaryAction}\n              />\n            ) : (\n              <table\n                className='w-full min-w-[960px] border-separate border-spacing-0 text-[13px]'\n                aria-label={\n                  mode === 'members'\n                    ? 'Audience members table'\n                    : 'Subscribers table'\n                }\n              >\n                <caption className='sr-only'>\n                  {mode === 'members'\n                    ? 'Table showing all audience members with their visit history, location, and engagement data'\n                    : 'Table showing all subscribers with their contact information and signup dates'}\n                </caption>\n                <thead\n                  className={cn(\n                    'sticky top-0 z-20 bg-surface-1/75 backdrop-blur-md',\n                    headerElevated &&\n                      'shadow-sm shadow-black/10 dark:shadow-black/40'\n                  )}\n                >\n                  <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                    <th className='w-14 border-b border-subtle px-4 py-3 text-left sm:px-6'>\n                      <Checkbox\n                        aria-label='Select all'\n                        checked={headerCheckboxState}\n                        onCheckedChange={() => toggleSelectAll()}\n                      />\n                    </th>\n\n                    {activeColumns.map((column, index) => {\n                      const sortKey =\n                        sortableColumnMap[column.key as ColumnKey];\n                      const isSortable = Boolean(sortKey);\n                      const isActive = isSortable && sortKey === sort;\n                      const activeDirection = isActive ? direction : undefined;\n\n                      return (\n                        <th\n                          key={column.key}\n                          className='border-b border-subtle px-4 py-3 text-left sm:px-6'\n                        >\n                          <div className='flex items-center justify-between gap-2'>\n                            {isSortable ? (\n                              <SortableHeaderButton\n                                label={column.label}\n                                direction={\n                                  activeDirection as 'asc' | 'desc' | undefined\n                                }\n                                onClick={() =>\n                                  onSortChange(sortKey as unknown as string)\n                                }\n                              />\n                            ) : (\n                              <span className='inline-flex items-center font-semibold'>\n                                {column.label}\n                              </span>\n                            )}\n\n                            {index === 0 ? (\n                              <div\n                                className={cn(\n                                  'inline-flex items-center transition-all duration-150',\n                                  selectedCount > 0\n                                    ? 'opacity-100 translate-y-0'\n                                    : 'pointer-events-none opacity-0 -translate-y-0.5'\n                                )}\n                              >\n                                <DropdownMenu>\n                                  <DropdownMenuTrigger asChild>\n                                    <Button\n                                      variant='secondary'\n                                      size='sm'\n                                      className='normal-case'\n                                    >\n                                      Bulk actions\n                                    </Button>\n                                  </DropdownMenuTrigger>\n                                  <DropdownMenuContent align='end'>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedEmails();\n                                      }}\n                                    >\n                                      Copy emails\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedPhones();\n                                      }}\n                                    >\n                                      Copy phone numbers\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => clearSelection()}\n                                    >\n                                      Clear selection\n                                    </DropdownMenuItem>\n                                  </DropdownMenuContent>\n                                </DropdownMenu>\n                              </div>\n                            ) : null}\n                          </div>\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n\n                <tbody\n                  ref={tbodyRef}\n                  style={{\n                    position: 'relative',\n                    height: `${rowVirtualizer.getTotalSize()}px`,\n                  }}\n                >\n                  {rowVirtualizer.getVirtualItems().map(virtualRow => {\n                    const row = rows[virtualRow.index];\n                    const deviceIndicator = getDeviceIndicator(row.deviceType);\n                    const isChecked = selectedIds.has(row.id);\n                    const rowNumber =\n                      (page - 1) * pageSize + virtualRow.index + 1;\n\n                    return (\n                      <tr\n                        key={row.id}\n                        data-index={virtualRow.index}\n                        ref={rowVirtualizer.measureElement}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0 hover:bg-surface-2',\n                          selectedMember?.id === row.id && 'bg-surface-2'\n                        )}\n                        style={{\n                          position: 'absolute',\n                          top: 0,\n                          left: 0,\n                          width: '100%',\n                          transform: `translateY(${virtualRow.start}px)`,\n                        }}\n                        onClick={() => setSelectedMember(row)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuRowId(row.id);\n                        }}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle sm:px-6'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${row.displayName || 'row'}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(row.id)}\n                              />\n                            </div>\n                          </div>\n                        </td>\n\n                        {mode === 'members' ? (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='font-semibold'>\n                                {row.displayName || 'Visitor'}\n                              </div>\n                              {row.type !== 'anonymous' ? (\n                                <div className='text-xs text-secondary-token'>\n                                  {row.type === 'email'\n                                    ? (row.email ?? 'Email fan')\n                                    : row.type === 'sms'\n                                      ? (row.phone ?? 'SMS fan')\n                                      : 'Connected fan'}\n                                </div>\n                              ) : null}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/40 px-2 py-0.5 text-[11px] font-medium text-secondary-token capitalize'>\n                                {row.type}\n                              </span>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>{row.locationLabel || 'Unknown'}</span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {deviceIndicator ? (\n                                <Icon\n                                  name={deviceIndicator.iconName}\n                                  className='h-4 w-4 text-secondary-token'\n                                  aria-label={deviceIndicator.label}\n                                  role='img'\n                                />\n                              ) : (\n                                <span className='text-secondary-token'>—</span>\n                              )}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                <span className='font-semibold'>\n                                  {row.visits}\n                                </span>\n                                <AudienceIntentBadge\n                                  intentLevel={row.intentLevel}\n                                />\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                {row.latestActions\n                                  .slice(0, 3)\n                                  .map((action, idx) => {\n                                    const iconName = resolveAudienceActionIcon(\n                                      action.label\n                                    );\n                                    return (\n                                      <span\n                                        key={`${row.id}-${action.label}-${action.platform ?? 'unknown'}-${action.timestamp ?? 'unknown'}-${idx}`}\n                                        className='inline-flex h-7 w-7 items-center justify-center rounded-full border border-subtle bg-surface-2/40 text-tertiary-token'\n                                        title={action.label}\n                                      >\n                                        <Icon\n                                          name={iconName}\n                                          className='h-3.5 w-3.5'\n                                          aria-hidden='true'\n                                        />\n                                        <span className='sr-only'>\n                                          {action.label}\n                                        </span>\n                                      </span>\n                                    );\n                                  })}\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatTimeAgo(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        ) : (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.displayName || 'Contact'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.phone ?? '—'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>\n                                  {row.geoCountry\n                                    ? formatCountryLabel(row.geoCountry)\n                                    : 'Unknown'}\n                                </span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatLongDate(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        )}\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          <div className='sticky bottom-0 z-20 flex flex-wrap items-center justify-between gap-3 border-t border-subtle bg-surface-1/75 px-4 py-2 text-xs text-secondary-token backdrop-blur-md sm:px-6'>\n            <span className='tracking-wide'>{paginationLabel()}</span>\n            <div className='flex items-center gap-3'>\n              <AdminPageSizeSelect\n                initialPageSize={pageSize}\n                onPageSizeChange={onPageSizeChange}\n              />\n              <div className='flex gap-2'>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page <= 1 || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.max(1, page - 1))}\n                >\n                  Previous\n                </Button>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page >= totalPages || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.min(totalPages, page + 1))}\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <AudienceMemberSidebar\n        member={selectedMember}\n        isOpen={Boolean(selectedMember)}\n        onClose={() => setSelectedMember(null)}\n      />\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        {paginationLabel()}\n        {selectedCount > 0 &&\n          `${selectedCount} ${selectedCount === 1 ? 'row' : 'rows'} selected`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noStaticElementInteractions",
      "severity": "warning",
      "description": "Static Elements should not be interactive.",
      "message": [
        {
          "elements": [],
          "content": "Static Elements should not be interactive."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "To add interactivity such as a mouse or key event listener to a static element, give the element an appropriate role value."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardAudienceTable.tsx"
        },
        "span": [18513, 18706],
        "sourceCode": "'use client';\n\nimport { BellAlertIcon, UserGroupIcon } from '@heroicons/react/24/outline';\nimport {\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport * as React from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminPageSizeSelect } from '@/components/admin/table/AdminPageSizeSelect';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { Icon } from '@/components/atoms/Icon';\nimport { AudienceRowActionsMenu } from '@/components/dashboard/AudienceRowActionsMenu';\nimport { AudienceIntentBadge } from '@/components/dashboard/atoms/AudienceIntentBadge';\nimport {\n  AUDIENCE_MEMBER_SIDEBAR_WIDTH,\n  AudienceMemberSidebar,\n} from '@/components/dashboard/organisms/AudienceMemberSidebar';\nimport { EmptyState } from '@/components/ui/EmptyState';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { cn } from '@/lib/utils';\nimport {\n  formatCountryLabel,\n  formatLongDate,\n  formatTimeAgo,\n  getDeviceIndicator,\n} from '@/lib/utils/audience';\nimport type { AudienceMember } from '@/types';\n\nexport type AudienceMode = 'members' | 'subscribers';\n\ntype AudienceRow = AudienceMember;\n\ntype MemberSortColumn =\n  | 'lastSeen'\n  | 'visits'\n  | 'intent'\n  | 'type'\n  | 'engagement'\n  | 'createdAt';\n\ntype SubscriberSortColumn = 'email' | 'phone' | 'country' | 'createdAt';\n\ntype MemberColumnKey = (typeof MEMBER_COLUMNS)[number]['key'];\n\ntype SubscriberColumnKey = (typeof SUBSCRIBER_COLUMNS)[number]['key'];\n\ntype ColumnKey = MemberColumnKey | SubscriberColumnKey;\n\nconst MEMBER_COLUMNS = [\n  { key: 'displayName', label: 'User' },\n  { key: 'type', label: 'Type' },\n  { key: 'location', label: 'Location' },\n  { key: 'device', label: 'Device' },\n  { key: 'visits', label: 'Visits' },\n  { key: 'actions', label: 'Actions' },\n  { key: 'lastSeen', label: 'Last seen' },\n] as const;\n\nconst SUBSCRIBER_COLUMNS = [\n  { key: 'email', label: 'Email' },\n  { key: 'phone', label: 'Phone' },\n  { key: 'country', label: 'Country' },\n  { key: 'createdAt', label: 'Signed up' },\n] as const;\n\nasync function copyTextToClipboard(text: string): Promise<boolean> {\n  if (typeof navigator === 'undefined' || !navigator.clipboard?.writeText) {\n    return false;\n  }\n\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction resolveAudienceActionIcon(label: string): string {\n  const normalized = label.trim().toLowerCase();\n  if (normalized.includes('visit')) return 'Eye';\n  if (normalized.includes('view')) return 'Eye';\n  if (normalized.includes('tip')) return 'HandCoins';\n  if (normalized.includes('purchase')) return 'CreditCard';\n  if (normalized.includes('subscribe')) return 'Bell';\n  if (normalized.includes('follow')) return 'UserPlus';\n  if (normalized.includes('click')) return 'MousePointerClick';\n  if (normalized.includes('link')) return 'Link';\n  return 'Sparkles';\n}\n\nexport interface DashboardAudienceTableProps {\n  mode: AudienceMode;\n  rows: AudienceRow[];\n  total: number;\n  page: number;\n  pageSize: number;\n  sort: string;\n  direction: 'asc' | 'desc';\n  onPageChange: (page: number) => void;\n  onPageSizeChange: (pageSize: number) => void;\n  onSortChange: (sort: string) => void;\n  profileUrl?: string;\n}\n\nexport function DashboardAudienceTable({\n  mode,\n  rows,\n  total,\n  page,\n  pageSize,\n  sort,\n  direction,\n  onPageChange,\n  onPageSizeChange,\n  onSortChange,\n  profileUrl,\n}: DashboardAudienceTableProps) {\n  const notifications = useNotifications();\n  const { setTableMeta } = useTableMeta();\n  const tableContainerRef = React.useRef<HTMLDivElement | null>(null);\n  const tbodyRef = React.useRef<HTMLTableSectionElement | null>(null);\n  const [headerElevated, setHeaderElevated] = React.useState(false);\n  const [openMenuRowId, setOpenMenuRowId] = React.useState<string | null>(null);\n  const [selectedMember, setSelectedMember] =\n    React.useState<AudienceRow | null>(null);\n  const [copiedProfileLink, setCopiedProfileLink] = React.useState(false);\n  const copyTimeoutRef = React.useRef<number | null>(null);\n\n  const rowIds = React.useMemo(() => rows.map(row => row.id), [rows]);\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n    clearSelection,\n  } = useRowSelection(rowIds);\n\n  React.useEffect(() => {\n    const container = tableContainerRef.current;\n    if (!container) return;\n\n    const handleScroll = () => {\n      setHeaderElevated(container.scrollTop > 0);\n    };\n\n    handleScroll();\n    container.addEventListener('scroll', handleScroll);\n    return () => container.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  React.useEffect(() => {\n    clearSelection();\n    setSelectedMember(null);\n  }, [mode, page, pageSize, sort, direction, clearSelection]);\n\n  React.useEffect(() => {\n    const toggle = () => {\n      if (rows.length === 0) return;\n      setSelectedMember(current => (current ? null : (rows[0] ?? null)));\n    };\n\n    setTableMeta({\n      rowCount: rows.length,\n      toggle: rows.length > 0 ? toggle : null,\n      rightPanelWidth: selectedMember ? AUDIENCE_MEMBER_SIDEBAR_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [rows, selectedMember, setTableMeta]);\n\n  const totalPages = Math.max(1, Math.ceil(total / pageSize));\n  const activeColumns =\n    mode === 'members' ? MEMBER_COLUMNS : SUBSCRIBER_COLUMNS;\n\n  // Virtualization for table rows\n  // eslint-disable-next-line react-hooks/incompatible-library\n  const rowVirtualizer = useVirtualizer({\n    count: rows.length,\n    getScrollElement: () => tableContainerRef.current,\n    estimateSize: () => 60, // Estimated row height in pixels\n    overscan: 5, // Render 5 extra rows above/below viewport\n  });\n\n  const sortableColumnMap: Partial<\n    Record<ColumnKey, MemberSortColumn | SubscriberSortColumn>\n  > = {\n    visits: 'visits',\n    lastSeen: 'lastSeen',\n    email: 'email',\n    phone: 'phone',\n    country: 'country',\n    createdAt: 'createdAt',\n  };\n\n  const selectedRows = React.useMemo(\n    () => rows.filter(row => selectedIds.has(row.id)),\n    [rows, selectedIds]\n  );\n\n  const copySelectedEmails = async (): Promise<void> => {\n    const emails = selectedRows\n      .map(row => row.email)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (emails.length === 0) {\n      notifications.error('No emails available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(emails.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${emails.length} email(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy emails');\n  };\n\n  const copySelectedPhones = async (): Promise<void> => {\n    const phones = selectedRows\n      .map(row => row.phone)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (phones.length === 0) {\n      notifications.error('No phone numbers available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(phones.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${phones.length} phone number(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy phone numbers');\n  };\n\n  const paginationLabel = () => {\n    if (total === 0) {\n      return mode === 'members'\n        ? 'No audience yet. Share your profile to invite visitors.'\n        : 'No signups yet. Invite fans to tap the bell.';\n    }\n\n    const start = (page - 1) * pageSize + 1;\n    const end = Math.min(page * pageSize, total);\n    return `Showing ${start}–${end} of ${total} readers`;\n  };\n\n  const handleCopyProfileLink = React.useCallback(async () => {\n    if (!profileUrl) return;\n    try {\n      await navigator.clipboard.writeText(profileUrl);\n      notifications.success('Profile link copied');\n      setCopiedProfileLink(true);\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n      copyTimeoutRef.current = window.setTimeout(() => {\n        setCopiedProfileLink(false);\n        copyTimeoutRef.current = null;\n      }, 2000);\n    } catch (error) {\n      console.error('Failed to copy profile link', error);\n      notifications.error('Unable to copy profile link');\n    }\n  }, [notifications, profileUrl]);\n\n  React.useEffect(() => {\n    return () => {\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const emptyStateHeading =\n    mode === 'members' ? 'No audience yet' : 'No signups yet';\n  const emptyStateDescription =\n    mode === 'members'\n      ? 'Share your profile to invite visitors. They will appear here as soon as they stop by.'\n      : 'Invite fans to tap the bell on your profile to receive notifications.';\n  const emptyStateIcon =\n    mode === 'members' ? (\n      <UserGroupIcon className='h-6 w-6' aria-hidden='true' />\n    ) : (\n      <BellAlertIcon className='h-6 w-6' aria-hidden='true' />\n    );\n  const emptyStatePrimaryAction = profileUrl\n    ? {\n        label: copiedProfileLink ? 'Link copied' : 'Copy profile link',\n        onClick: () => {\n          void handleCopyProfileLink();\n        },\n      }\n    : {\n        label: 'Open profile settings',\n        href: '/app/dashboard/profile',\n      };\n  const emptyStateSecondaryAction = {\n    label:\n      mode === 'members' ? 'Learn about audience' : 'Learn about subscribers',\n    href: '/support',\n  };\n\n  return (\n    <div\n      className='flex h-full min-h-0 flex-col'\n      data-testid='dashboard-audience-table'\n    >\n      <div className='shrink-0 border-b border-subtle bg-surface-1/75 backdrop-blur-md'>\n        <div className='flex flex-wrap items-start justify-between gap-4 px-4 py-4 sm:px-6'>\n          <div>\n            <h1 className='text-2xl font-semibold tracking-tight text-primary-token'>\n              Audience CRM\n            </h1>\n            <p className='mt-1 text-sm leading-6 text-secondary-token'>\n              {mode === 'members'\n                ? 'Every visitor, anonymous or identified, lives in this table.'\n                : 'Notification signups from your notification modal.'}\n            </p>\n          </div>\n          <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/60 px-2.5 py-1 text-xs font-medium text-secondary-token'>\n            {total} {total === 1 ? 'person' : 'people'}\n          </span>\n        </div>\n      </div>\n\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <div className='flex h-full min-h-0 flex-col bg-surface-1'>\n          <div className='flex-1 min-h-0 overflow-auto' ref={tableContainerRef}>\n            {rows.length === 0 ? (\n              <EmptyState\n                icon={emptyStateIcon}\n                heading={emptyStateHeading}\n                description={emptyStateDescription}\n                action={emptyStatePrimaryAction}\n                secondaryAction={emptyStateSecondaryAction}\n              />\n            ) : (\n              <table\n                className='w-full min-w-[960px] border-separate border-spacing-0 text-[13px]'\n                aria-label={\n                  mode === 'members'\n                    ? 'Audience members table'\n                    : 'Subscribers table'\n                }\n              >\n                <caption className='sr-only'>\n                  {mode === 'members'\n                    ? 'Table showing all audience members with their visit history, location, and engagement data'\n                    : 'Table showing all subscribers with their contact information and signup dates'}\n                </caption>\n                <thead\n                  className={cn(\n                    'sticky top-0 z-20 bg-surface-1/75 backdrop-blur-md',\n                    headerElevated &&\n                      'shadow-sm shadow-black/10 dark:shadow-black/40'\n                  )}\n                >\n                  <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                    <th className='w-14 border-b border-subtle px-4 py-3 text-left sm:px-6'>\n                      <Checkbox\n                        aria-label='Select all'\n                        checked={headerCheckboxState}\n                        onCheckedChange={() => toggleSelectAll()}\n                      />\n                    </th>\n\n                    {activeColumns.map((column, index) => {\n                      const sortKey =\n                        sortableColumnMap[column.key as ColumnKey];\n                      const isSortable = Boolean(sortKey);\n                      const isActive = isSortable && sortKey === sort;\n                      const activeDirection = isActive ? direction : undefined;\n\n                      return (\n                        <th\n                          key={column.key}\n                          className='border-b border-subtle px-4 py-3 text-left sm:px-6'\n                        >\n                          <div className='flex items-center justify-between gap-2'>\n                            {isSortable ? (\n                              <SortableHeaderButton\n                                label={column.label}\n                                direction={\n                                  activeDirection as 'asc' | 'desc' | undefined\n                                }\n                                onClick={() =>\n                                  onSortChange(sortKey as unknown as string)\n                                }\n                              />\n                            ) : (\n                              <span className='inline-flex items-center font-semibold'>\n                                {column.label}\n                              </span>\n                            )}\n\n                            {index === 0 ? (\n                              <div\n                                className={cn(\n                                  'inline-flex items-center transition-all duration-150',\n                                  selectedCount > 0\n                                    ? 'opacity-100 translate-y-0'\n                                    : 'pointer-events-none opacity-0 -translate-y-0.5'\n                                )}\n                              >\n                                <DropdownMenu>\n                                  <DropdownMenuTrigger asChild>\n                                    <Button\n                                      variant='secondary'\n                                      size='sm'\n                                      className='normal-case'\n                                    >\n                                      Bulk actions\n                                    </Button>\n                                  </DropdownMenuTrigger>\n                                  <DropdownMenuContent align='end'>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedEmails();\n                                      }}\n                                    >\n                                      Copy emails\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedPhones();\n                                      }}\n                                    >\n                                      Copy phone numbers\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => clearSelection()}\n                                    >\n                                      Clear selection\n                                    </DropdownMenuItem>\n                                  </DropdownMenuContent>\n                                </DropdownMenu>\n                              </div>\n                            ) : null}\n                          </div>\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n\n                <tbody\n                  ref={tbodyRef}\n                  style={{\n                    position: 'relative',\n                    height: `${rowVirtualizer.getTotalSize()}px`,\n                  }}\n                >\n                  {rowVirtualizer.getVirtualItems().map(virtualRow => {\n                    const row = rows[virtualRow.index];\n                    const deviceIndicator = getDeviceIndicator(row.deviceType);\n                    const isChecked = selectedIds.has(row.id);\n                    const rowNumber =\n                      (page - 1) * pageSize + virtualRow.index + 1;\n\n                    return (\n                      <tr\n                        key={row.id}\n                        data-index={virtualRow.index}\n                        ref={rowVirtualizer.measureElement}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0 hover:bg-surface-2',\n                          selectedMember?.id === row.id && 'bg-surface-2'\n                        )}\n                        style={{\n                          position: 'absolute',\n                          top: 0,\n                          left: 0,\n                          width: '100%',\n                          transform: `translateY(${virtualRow.start}px)`,\n                        }}\n                        onClick={() => setSelectedMember(row)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuRowId(row.id);\n                        }}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle sm:px-6'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${row.displayName || 'row'}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(row.id)}\n                              />\n                            </div>\n                          </div>\n                        </td>\n\n                        {mode === 'members' ? (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='font-semibold'>\n                                {row.displayName || 'Visitor'}\n                              </div>\n                              {row.type !== 'anonymous' ? (\n                                <div className='text-xs text-secondary-token'>\n                                  {row.type === 'email'\n                                    ? (row.email ?? 'Email fan')\n                                    : row.type === 'sms'\n                                      ? (row.phone ?? 'SMS fan')\n                                      : 'Connected fan'}\n                                </div>\n                              ) : null}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/40 px-2 py-0.5 text-[11px] font-medium text-secondary-token capitalize'>\n                                {row.type}\n                              </span>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>{row.locationLabel || 'Unknown'}</span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {deviceIndicator ? (\n                                <Icon\n                                  name={deviceIndicator.iconName}\n                                  className='h-4 w-4 text-secondary-token'\n                                  aria-label={deviceIndicator.label}\n                                  role='img'\n                                />\n                              ) : (\n                                <span className='text-secondary-token'>—</span>\n                              )}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                <span className='font-semibold'>\n                                  {row.visits}\n                                </span>\n                                <AudienceIntentBadge\n                                  intentLevel={row.intentLevel}\n                                />\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                {row.latestActions\n                                  .slice(0, 3)\n                                  .map((action, idx) => {\n                                    const iconName = resolveAudienceActionIcon(\n                                      action.label\n                                    );\n                                    return (\n                                      <span\n                                        key={`${row.id}-${action.label}-${action.platform ?? 'unknown'}-${action.timestamp ?? 'unknown'}-${idx}`}\n                                        className='inline-flex h-7 w-7 items-center justify-center rounded-full border border-subtle bg-surface-2/40 text-tertiary-token'\n                                        title={action.label}\n                                      >\n                                        <Icon\n                                          name={iconName}\n                                          className='h-3.5 w-3.5'\n                                          aria-hidden='true'\n                                        />\n                                        <span className='sr-only'>\n                                          {action.label}\n                                        </span>\n                                      </span>\n                                    );\n                                  })}\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatTimeAgo(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        ) : (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.displayName || 'Contact'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.phone ?? '—'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>\n                                  {row.geoCountry\n                                    ? formatCountryLabel(row.geoCountry)\n                                    : 'Unknown'}\n                                </span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatLongDate(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        )}\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          <div className='sticky bottom-0 z-20 flex flex-wrap items-center justify-between gap-3 border-t border-subtle bg-surface-1/75 px-4 py-2 text-xs text-secondary-token backdrop-blur-md sm:px-6'>\n            <span className='tracking-wide'>{paginationLabel()}</span>\n            <div className='flex items-center gap-3'>\n              <AdminPageSizeSelect\n                initialPageSize={pageSize}\n                onPageSizeChange={onPageSizeChange}\n              />\n              <div className='flex gap-2'>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page <= 1 || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.max(1, page - 1))}\n                >\n                  Previous\n                </Button>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page >= totalPages || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.min(totalPages, page + 1))}\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <AudienceMemberSidebar\n        member={selectedMember}\n        isOpen={Boolean(selectedMember)}\n        onClose={() => setSelectedMember(null)}\n      />\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        {paginationLabel()}\n        {selectedCount > 0 &&\n          `${selectedCount} ${selectedCount === 1 ? 'row' : 'rows'} selected`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useKeyWithClickEvents",
      "severity": "warning",
      "description": "Enforce to have the onClick mouse event with the onKeyUp, the onKeyDown, or the onKeyPress keyboard event.",
      "message": [
        { "elements": [], "content": "Enforce to have the " },
        { "elements": ["Emphasis"], "content": "onClick" },
        { "elements": [], "content": " mouse event with the " },
        { "elements": ["Emphasis"], "content": "onKeyUp" },
        { "elements": [], "content": ", the " },
        { "elements": ["Emphasis"], "content": "onKeyDown" },
        { "elements": [], "content": ", or the " },
        { "elements": ["Emphasis"], "content": "onKeyPress" },
        { "elements": [], "content": " keyboard event." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Actions triggered using mouse events should have corresponding keyboard events to account for keyboard-only navigation."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardAudienceTable.tsx"
        },
        "span": [25082, 25621],
        "sourceCode": "'use client';\n\nimport { BellAlertIcon, UserGroupIcon } from '@heroicons/react/24/outline';\nimport {\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport * as React from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminPageSizeSelect } from '@/components/admin/table/AdminPageSizeSelect';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { Icon } from '@/components/atoms/Icon';\nimport { AudienceRowActionsMenu } from '@/components/dashboard/AudienceRowActionsMenu';\nimport { AudienceIntentBadge } from '@/components/dashboard/atoms/AudienceIntentBadge';\nimport {\n  AUDIENCE_MEMBER_SIDEBAR_WIDTH,\n  AudienceMemberSidebar,\n} from '@/components/dashboard/organisms/AudienceMemberSidebar';\nimport { EmptyState } from '@/components/ui/EmptyState';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { cn } from '@/lib/utils';\nimport {\n  formatCountryLabel,\n  formatLongDate,\n  formatTimeAgo,\n  getDeviceIndicator,\n} from '@/lib/utils/audience';\nimport type { AudienceMember } from '@/types';\n\nexport type AudienceMode = 'members' | 'subscribers';\n\ntype AudienceRow = AudienceMember;\n\ntype MemberSortColumn =\n  | 'lastSeen'\n  | 'visits'\n  | 'intent'\n  | 'type'\n  | 'engagement'\n  | 'createdAt';\n\ntype SubscriberSortColumn = 'email' | 'phone' | 'country' | 'createdAt';\n\ntype MemberColumnKey = (typeof MEMBER_COLUMNS)[number]['key'];\n\ntype SubscriberColumnKey = (typeof SUBSCRIBER_COLUMNS)[number]['key'];\n\ntype ColumnKey = MemberColumnKey | SubscriberColumnKey;\n\nconst MEMBER_COLUMNS = [\n  { key: 'displayName', label: 'User' },\n  { key: 'type', label: 'Type' },\n  { key: 'location', label: 'Location' },\n  { key: 'device', label: 'Device' },\n  { key: 'visits', label: 'Visits' },\n  { key: 'actions', label: 'Actions' },\n  { key: 'lastSeen', label: 'Last seen' },\n] as const;\n\nconst SUBSCRIBER_COLUMNS = [\n  { key: 'email', label: 'Email' },\n  { key: 'phone', label: 'Phone' },\n  { key: 'country', label: 'Country' },\n  { key: 'createdAt', label: 'Signed up' },\n] as const;\n\nasync function copyTextToClipboard(text: string): Promise<boolean> {\n  if (typeof navigator === 'undefined' || !navigator.clipboard?.writeText) {\n    return false;\n  }\n\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction resolveAudienceActionIcon(label: string): string {\n  const normalized = label.trim().toLowerCase();\n  if (normalized.includes('visit')) return 'Eye';\n  if (normalized.includes('view')) return 'Eye';\n  if (normalized.includes('tip')) return 'HandCoins';\n  if (normalized.includes('purchase')) return 'CreditCard';\n  if (normalized.includes('subscribe')) return 'Bell';\n  if (normalized.includes('follow')) return 'UserPlus';\n  if (normalized.includes('click')) return 'MousePointerClick';\n  if (normalized.includes('link')) return 'Link';\n  return 'Sparkles';\n}\n\nexport interface DashboardAudienceTableProps {\n  mode: AudienceMode;\n  rows: AudienceRow[];\n  total: number;\n  page: number;\n  pageSize: number;\n  sort: string;\n  direction: 'asc' | 'desc';\n  onPageChange: (page: number) => void;\n  onPageSizeChange: (pageSize: number) => void;\n  onSortChange: (sort: string) => void;\n  profileUrl?: string;\n}\n\nexport function DashboardAudienceTable({\n  mode,\n  rows,\n  total,\n  page,\n  pageSize,\n  sort,\n  direction,\n  onPageChange,\n  onPageSizeChange,\n  onSortChange,\n  profileUrl,\n}: DashboardAudienceTableProps) {\n  const notifications = useNotifications();\n  const { setTableMeta } = useTableMeta();\n  const tableContainerRef = React.useRef<HTMLDivElement | null>(null);\n  const tbodyRef = React.useRef<HTMLTableSectionElement | null>(null);\n  const [headerElevated, setHeaderElevated] = React.useState(false);\n  const [openMenuRowId, setOpenMenuRowId] = React.useState<string | null>(null);\n  const [selectedMember, setSelectedMember] =\n    React.useState<AudienceRow | null>(null);\n  const [copiedProfileLink, setCopiedProfileLink] = React.useState(false);\n  const copyTimeoutRef = React.useRef<number | null>(null);\n\n  const rowIds = React.useMemo(() => rows.map(row => row.id), [rows]);\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n    clearSelection,\n  } = useRowSelection(rowIds);\n\n  React.useEffect(() => {\n    const container = tableContainerRef.current;\n    if (!container) return;\n\n    const handleScroll = () => {\n      setHeaderElevated(container.scrollTop > 0);\n    };\n\n    handleScroll();\n    container.addEventListener('scroll', handleScroll);\n    return () => container.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  React.useEffect(() => {\n    clearSelection();\n    setSelectedMember(null);\n  }, [mode, page, pageSize, sort, direction, clearSelection]);\n\n  React.useEffect(() => {\n    const toggle = () => {\n      if (rows.length === 0) return;\n      setSelectedMember(current => (current ? null : (rows[0] ?? null)));\n    };\n\n    setTableMeta({\n      rowCount: rows.length,\n      toggle: rows.length > 0 ? toggle : null,\n      rightPanelWidth: selectedMember ? AUDIENCE_MEMBER_SIDEBAR_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [rows, selectedMember, setTableMeta]);\n\n  const totalPages = Math.max(1, Math.ceil(total / pageSize));\n  const activeColumns =\n    mode === 'members' ? MEMBER_COLUMNS : SUBSCRIBER_COLUMNS;\n\n  // Virtualization for table rows\n  // eslint-disable-next-line react-hooks/incompatible-library\n  const rowVirtualizer = useVirtualizer({\n    count: rows.length,\n    getScrollElement: () => tableContainerRef.current,\n    estimateSize: () => 60, // Estimated row height in pixels\n    overscan: 5, // Render 5 extra rows above/below viewport\n  });\n\n  const sortableColumnMap: Partial<\n    Record<ColumnKey, MemberSortColumn | SubscriberSortColumn>\n  > = {\n    visits: 'visits',\n    lastSeen: 'lastSeen',\n    email: 'email',\n    phone: 'phone',\n    country: 'country',\n    createdAt: 'createdAt',\n  };\n\n  const selectedRows = React.useMemo(\n    () => rows.filter(row => selectedIds.has(row.id)),\n    [rows, selectedIds]\n  );\n\n  const copySelectedEmails = async (): Promise<void> => {\n    const emails = selectedRows\n      .map(row => row.email)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (emails.length === 0) {\n      notifications.error('No emails available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(emails.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${emails.length} email(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy emails');\n  };\n\n  const copySelectedPhones = async (): Promise<void> => {\n    const phones = selectedRows\n      .map(row => row.phone)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (phones.length === 0) {\n      notifications.error('No phone numbers available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(phones.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${phones.length} phone number(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy phone numbers');\n  };\n\n  const paginationLabel = () => {\n    if (total === 0) {\n      return mode === 'members'\n        ? 'No audience yet. Share your profile to invite visitors.'\n        : 'No signups yet. Invite fans to tap the bell.';\n    }\n\n    const start = (page - 1) * pageSize + 1;\n    const end = Math.min(page * pageSize, total);\n    return `Showing ${start}–${end} of ${total} readers`;\n  };\n\n  const handleCopyProfileLink = React.useCallback(async () => {\n    if (!profileUrl) return;\n    try {\n      await navigator.clipboard.writeText(profileUrl);\n      notifications.success('Profile link copied');\n      setCopiedProfileLink(true);\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n      copyTimeoutRef.current = window.setTimeout(() => {\n        setCopiedProfileLink(false);\n        copyTimeoutRef.current = null;\n      }, 2000);\n    } catch (error) {\n      console.error('Failed to copy profile link', error);\n      notifications.error('Unable to copy profile link');\n    }\n  }, [notifications, profileUrl]);\n\n  React.useEffect(() => {\n    return () => {\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const emptyStateHeading =\n    mode === 'members' ? 'No audience yet' : 'No signups yet';\n  const emptyStateDescription =\n    mode === 'members'\n      ? 'Share your profile to invite visitors. They will appear here as soon as they stop by.'\n      : 'Invite fans to tap the bell on your profile to receive notifications.';\n  const emptyStateIcon =\n    mode === 'members' ? (\n      <UserGroupIcon className='h-6 w-6' aria-hidden='true' />\n    ) : (\n      <BellAlertIcon className='h-6 w-6' aria-hidden='true' />\n    );\n  const emptyStatePrimaryAction = profileUrl\n    ? {\n        label: copiedProfileLink ? 'Link copied' : 'Copy profile link',\n        onClick: () => {\n          void handleCopyProfileLink();\n        },\n      }\n    : {\n        label: 'Open profile settings',\n        href: '/app/dashboard/profile',\n      };\n  const emptyStateSecondaryAction = {\n    label:\n      mode === 'members' ? 'Learn about audience' : 'Learn about subscribers',\n    href: '/support',\n  };\n\n  return (\n    <div\n      className='flex h-full min-h-0 flex-col'\n      data-testid='dashboard-audience-table'\n    >\n      <div className='shrink-0 border-b border-subtle bg-surface-1/75 backdrop-blur-md'>\n        <div className='flex flex-wrap items-start justify-between gap-4 px-4 py-4 sm:px-6'>\n          <div>\n            <h1 className='text-2xl font-semibold tracking-tight text-primary-token'>\n              Audience CRM\n            </h1>\n            <p className='mt-1 text-sm leading-6 text-secondary-token'>\n              {mode === 'members'\n                ? 'Every visitor, anonymous or identified, lives in this table.'\n                : 'Notification signups from your notification modal.'}\n            </p>\n          </div>\n          <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/60 px-2.5 py-1 text-xs font-medium text-secondary-token'>\n            {total} {total === 1 ? 'person' : 'people'}\n          </span>\n        </div>\n      </div>\n\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <div className='flex h-full min-h-0 flex-col bg-surface-1'>\n          <div className='flex-1 min-h-0 overflow-auto' ref={tableContainerRef}>\n            {rows.length === 0 ? (\n              <EmptyState\n                icon={emptyStateIcon}\n                heading={emptyStateHeading}\n                description={emptyStateDescription}\n                action={emptyStatePrimaryAction}\n                secondaryAction={emptyStateSecondaryAction}\n              />\n            ) : (\n              <table\n                className='w-full min-w-[960px] border-separate border-spacing-0 text-[13px]'\n                aria-label={\n                  mode === 'members'\n                    ? 'Audience members table'\n                    : 'Subscribers table'\n                }\n              >\n                <caption className='sr-only'>\n                  {mode === 'members'\n                    ? 'Table showing all audience members with their visit history, location, and engagement data'\n                    : 'Table showing all subscribers with their contact information and signup dates'}\n                </caption>\n                <thead\n                  className={cn(\n                    'sticky top-0 z-20 bg-surface-1/75 backdrop-blur-md',\n                    headerElevated &&\n                      'shadow-sm shadow-black/10 dark:shadow-black/40'\n                  )}\n                >\n                  <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                    <th className='w-14 border-b border-subtle px-4 py-3 text-left sm:px-6'>\n                      <Checkbox\n                        aria-label='Select all'\n                        checked={headerCheckboxState}\n                        onCheckedChange={() => toggleSelectAll()}\n                      />\n                    </th>\n\n                    {activeColumns.map((column, index) => {\n                      const sortKey =\n                        sortableColumnMap[column.key as ColumnKey];\n                      const isSortable = Boolean(sortKey);\n                      const isActive = isSortable && sortKey === sort;\n                      const activeDirection = isActive ? direction : undefined;\n\n                      return (\n                        <th\n                          key={column.key}\n                          className='border-b border-subtle px-4 py-3 text-left sm:px-6'\n                        >\n                          <div className='flex items-center justify-between gap-2'>\n                            {isSortable ? (\n                              <SortableHeaderButton\n                                label={column.label}\n                                direction={\n                                  activeDirection as 'asc' | 'desc' | undefined\n                                }\n                                onClick={() =>\n                                  onSortChange(sortKey as unknown as string)\n                                }\n                              />\n                            ) : (\n                              <span className='inline-flex items-center font-semibold'>\n                                {column.label}\n                              </span>\n                            )}\n\n                            {index === 0 ? (\n                              <div\n                                className={cn(\n                                  'inline-flex items-center transition-all duration-150',\n                                  selectedCount > 0\n                                    ? 'opacity-100 translate-y-0'\n                                    : 'pointer-events-none opacity-0 -translate-y-0.5'\n                                )}\n                              >\n                                <DropdownMenu>\n                                  <DropdownMenuTrigger asChild>\n                                    <Button\n                                      variant='secondary'\n                                      size='sm'\n                                      className='normal-case'\n                                    >\n                                      Bulk actions\n                                    </Button>\n                                  </DropdownMenuTrigger>\n                                  <DropdownMenuContent align='end'>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedEmails();\n                                      }}\n                                    >\n                                      Copy emails\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedPhones();\n                                      }}\n                                    >\n                                      Copy phone numbers\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => clearSelection()}\n                                    >\n                                      Clear selection\n                                    </DropdownMenuItem>\n                                  </DropdownMenuContent>\n                                </DropdownMenu>\n                              </div>\n                            ) : null}\n                          </div>\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n\n                <tbody\n                  ref={tbodyRef}\n                  style={{\n                    position: 'relative',\n                    height: `${rowVirtualizer.getTotalSize()}px`,\n                  }}\n                >\n                  {rowVirtualizer.getVirtualItems().map(virtualRow => {\n                    const row = rows[virtualRow.index];\n                    const deviceIndicator = getDeviceIndicator(row.deviceType);\n                    const isChecked = selectedIds.has(row.id);\n                    const rowNumber =\n                      (page - 1) * pageSize + virtualRow.index + 1;\n\n                    return (\n                      <tr\n                        key={row.id}\n                        data-index={virtualRow.index}\n                        ref={rowVirtualizer.measureElement}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0 hover:bg-surface-2',\n                          selectedMember?.id === row.id && 'bg-surface-2'\n                        )}\n                        style={{\n                          position: 'absolute',\n                          top: 0,\n                          left: 0,\n                          width: '100%',\n                          transform: `translateY(${virtualRow.start}px)`,\n                        }}\n                        onClick={() => setSelectedMember(row)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuRowId(row.id);\n                        }}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle sm:px-6'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${row.displayName || 'row'}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(row.id)}\n                              />\n                            </div>\n                          </div>\n                        </td>\n\n                        {mode === 'members' ? (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='font-semibold'>\n                                {row.displayName || 'Visitor'}\n                              </div>\n                              {row.type !== 'anonymous' ? (\n                                <div className='text-xs text-secondary-token'>\n                                  {row.type === 'email'\n                                    ? (row.email ?? 'Email fan')\n                                    : row.type === 'sms'\n                                      ? (row.phone ?? 'SMS fan')\n                                      : 'Connected fan'}\n                                </div>\n                              ) : null}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/40 px-2 py-0.5 text-[11px] font-medium text-secondary-token capitalize'>\n                                {row.type}\n                              </span>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>{row.locationLabel || 'Unknown'}</span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {deviceIndicator ? (\n                                <Icon\n                                  name={deviceIndicator.iconName}\n                                  className='h-4 w-4 text-secondary-token'\n                                  aria-label={deviceIndicator.label}\n                                  role='img'\n                                />\n                              ) : (\n                                <span className='text-secondary-token'>—</span>\n                              )}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                <span className='font-semibold'>\n                                  {row.visits}\n                                </span>\n                                <AudienceIntentBadge\n                                  intentLevel={row.intentLevel}\n                                />\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                {row.latestActions\n                                  .slice(0, 3)\n                                  .map((action, idx) => {\n                                    const iconName = resolveAudienceActionIcon(\n                                      action.label\n                                    );\n                                    return (\n                                      <span\n                                        key={`${row.id}-${action.label}-${action.platform ?? 'unknown'}-${action.timestamp ?? 'unknown'}-${idx}`}\n                                        className='inline-flex h-7 w-7 items-center justify-center rounded-full border border-subtle bg-surface-2/40 text-tertiary-token'\n                                        title={action.label}\n                                      >\n                                        <Icon\n                                          name={iconName}\n                                          className='h-3.5 w-3.5'\n                                          aria-hidden='true'\n                                        />\n                                        <span className='sr-only'>\n                                          {action.label}\n                                        </span>\n                                      </span>\n                                    );\n                                  })}\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatTimeAgo(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        ) : (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.displayName || 'Contact'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.phone ?? '—'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>\n                                  {row.geoCountry\n                                    ? formatCountryLabel(row.geoCountry)\n                                    : 'Unknown'}\n                                </span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatLongDate(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        )}\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          <div className='sticky bottom-0 z-20 flex flex-wrap items-center justify-between gap-3 border-t border-subtle bg-surface-1/75 px-4 py-2 text-xs text-secondary-token backdrop-blur-md sm:px-6'>\n            <span className='tracking-wide'>{paginationLabel()}</span>\n            <div className='flex items-center gap-3'>\n              <AdminPageSizeSelect\n                initialPageSize={pageSize}\n                onPageSizeChange={onPageSizeChange}\n              />\n              <div className='flex gap-2'>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page <= 1 || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.max(1, page - 1))}\n                >\n                  Previous\n                </Button>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page >= totalPages || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.min(totalPages, page + 1))}\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <AudienceMemberSidebar\n        member={selectedMember}\n        isOpen={Boolean(selectedMember)}\n        onClose={() => setSelectedMember(null)}\n      />\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        {paginationLabel()}\n        {selectedCount > 0 &&\n          `${selectedCount} ${selectedCount === 1 ? 'row' : 'rows'} selected`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noStaticElementInteractions",
      "severity": "warning",
      "description": "Static Elements should not be interactive.",
      "message": [
        {
          "elements": [],
          "content": "Static Elements should not be interactive."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "To add interactivity such as a mouse or key event listener to a static element, give the element an appropriate role value."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardAudienceTable.tsx"
        },
        "span": [25082, 25621],
        "sourceCode": "'use client';\n\nimport { BellAlertIcon, UserGroupIcon } from '@heroicons/react/24/outline';\nimport {\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport * as React from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminPageSizeSelect } from '@/components/admin/table/AdminPageSizeSelect';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { Icon } from '@/components/atoms/Icon';\nimport { AudienceRowActionsMenu } from '@/components/dashboard/AudienceRowActionsMenu';\nimport { AudienceIntentBadge } from '@/components/dashboard/atoms/AudienceIntentBadge';\nimport {\n  AUDIENCE_MEMBER_SIDEBAR_WIDTH,\n  AudienceMemberSidebar,\n} from '@/components/dashboard/organisms/AudienceMemberSidebar';\nimport { EmptyState } from '@/components/ui/EmptyState';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { cn } from '@/lib/utils';\nimport {\n  formatCountryLabel,\n  formatLongDate,\n  formatTimeAgo,\n  getDeviceIndicator,\n} from '@/lib/utils/audience';\nimport type { AudienceMember } from '@/types';\n\nexport type AudienceMode = 'members' | 'subscribers';\n\ntype AudienceRow = AudienceMember;\n\ntype MemberSortColumn =\n  | 'lastSeen'\n  | 'visits'\n  | 'intent'\n  | 'type'\n  | 'engagement'\n  | 'createdAt';\n\ntype SubscriberSortColumn = 'email' | 'phone' | 'country' | 'createdAt';\n\ntype MemberColumnKey = (typeof MEMBER_COLUMNS)[number]['key'];\n\ntype SubscriberColumnKey = (typeof SUBSCRIBER_COLUMNS)[number]['key'];\n\ntype ColumnKey = MemberColumnKey | SubscriberColumnKey;\n\nconst MEMBER_COLUMNS = [\n  { key: 'displayName', label: 'User' },\n  { key: 'type', label: 'Type' },\n  { key: 'location', label: 'Location' },\n  { key: 'device', label: 'Device' },\n  { key: 'visits', label: 'Visits' },\n  { key: 'actions', label: 'Actions' },\n  { key: 'lastSeen', label: 'Last seen' },\n] as const;\n\nconst SUBSCRIBER_COLUMNS = [\n  { key: 'email', label: 'Email' },\n  { key: 'phone', label: 'Phone' },\n  { key: 'country', label: 'Country' },\n  { key: 'createdAt', label: 'Signed up' },\n] as const;\n\nasync function copyTextToClipboard(text: string): Promise<boolean> {\n  if (typeof navigator === 'undefined' || !navigator.clipboard?.writeText) {\n    return false;\n  }\n\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction resolveAudienceActionIcon(label: string): string {\n  const normalized = label.trim().toLowerCase();\n  if (normalized.includes('visit')) return 'Eye';\n  if (normalized.includes('view')) return 'Eye';\n  if (normalized.includes('tip')) return 'HandCoins';\n  if (normalized.includes('purchase')) return 'CreditCard';\n  if (normalized.includes('subscribe')) return 'Bell';\n  if (normalized.includes('follow')) return 'UserPlus';\n  if (normalized.includes('click')) return 'MousePointerClick';\n  if (normalized.includes('link')) return 'Link';\n  return 'Sparkles';\n}\n\nexport interface DashboardAudienceTableProps {\n  mode: AudienceMode;\n  rows: AudienceRow[];\n  total: number;\n  page: number;\n  pageSize: number;\n  sort: string;\n  direction: 'asc' | 'desc';\n  onPageChange: (page: number) => void;\n  onPageSizeChange: (pageSize: number) => void;\n  onSortChange: (sort: string) => void;\n  profileUrl?: string;\n}\n\nexport function DashboardAudienceTable({\n  mode,\n  rows,\n  total,\n  page,\n  pageSize,\n  sort,\n  direction,\n  onPageChange,\n  onPageSizeChange,\n  onSortChange,\n  profileUrl,\n}: DashboardAudienceTableProps) {\n  const notifications = useNotifications();\n  const { setTableMeta } = useTableMeta();\n  const tableContainerRef = React.useRef<HTMLDivElement | null>(null);\n  const tbodyRef = React.useRef<HTMLTableSectionElement | null>(null);\n  const [headerElevated, setHeaderElevated] = React.useState(false);\n  const [openMenuRowId, setOpenMenuRowId] = React.useState<string | null>(null);\n  const [selectedMember, setSelectedMember] =\n    React.useState<AudienceRow | null>(null);\n  const [copiedProfileLink, setCopiedProfileLink] = React.useState(false);\n  const copyTimeoutRef = React.useRef<number | null>(null);\n\n  const rowIds = React.useMemo(() => rows.map(row => row.id), [rows]);\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n    clearSelection,\n  } = useRowSelection(rowIds);\n\n  React.useEffect(() => {\n    const container = tableContainerRef.current;\n    if (!container) return;\n\n    const handleScroll = () => {\n      setHeaderElevated(container.scrollTop > 0);\n    };\n\n    handleScroll();\n    container.addEventListener('scroll', handleScroll);\n    return () => container.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  React.useEffect(() => {\n    clearSelection();\n    setSelectedMember(null);\n  }, [mode, page, pageSize, sort, direction, clearSelection]);\n\n  React.useEffect(() => {\n    const toggle = () => {\n      if (rows.length === 0) return;\n      setSelectedMember(current => (current ? null : (rows[0] ?? null)));\n    };\n\n    setTableMeta({\n      rowCount: rows.length,\n      toggle: rows.length > 0 ? toggle : null,\n      rightPanelWidth: selectedMember ? AUDIENCE_MEMBER_SIDEBAR_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [rows, selectedMember, setTableMeta]);\n\n  const totalPages = Math.max(1, Math.ceil(total / pageSize));\n  const activeColumns =\n    mode === 'members' ? MEMBER_COLUMNS : SUBSCRIBER_COLUMNS;\n\n  // Virtualization for table rows\n  // eslint-disable-next-line react-hooks/incompatible-library\n  const rowVirtualizer = useVirtualizer({\n    count: rows.length,\n    getScrollElement: () => tableContainerRef.current,\n    estimateSize: () => 60, // Estimated row height in pixels\n    overscan: 5, // Render 5 extra rows above/below viewport\n  });\n\n  const sortableColumnMap: Partial<\n    Record<ColumnKey, MemberSortColumn | SubscriberSortColumn>\n  > = {\n    visits: 'visits',\n    lastSeen: 'lastSeen',\n    email: 'email',\n    phone: 'phone',\n    country: 'country',\n    createdAt: 'createdAt',\n  };\n\n  const selectedRows = React.useMemo(\n    () => rows.filter(row => selectedIds.has(row.id)),\n    [rows, selectedIds]\n  );\n\n  const copySelectedEmails = async (): Promise<void> => {\n    const emails = selectedRows\n      .map(row => row.email)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (emails.length === 0) {\n      notifications.error('No emails available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(emails.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${emails.length} email(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy emails');\n  };\n\n  const copySelectedPhones = async (): Promise<void> => {\n    const phones = selectedRows\n      .map(row => row.phone)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (phones.length === 0) {\n      notifications.error('No phone numbers available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(phones.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${phones.length} phone number(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy phone numbers');\n  };\n\n  const paginationLabel = () => {\n    if (total === 0) {\n      return mode === 'members'\n        ? 'No audience yet. Share your profile to invite visitors.'\n        : 'No signups yet. Invite fans to tap the bell.';\n    }\n\n    const start = (page - 1) * pageSize + 1;\n    const end = Math.min(page * pageSize, total);\n    return `Showing ${start}–${end} of ${total} readers`;\n  };\n\n  const handleCopyProfileLink = React.useCallback(async () => {\n    if (!profileUrl) return;\n    try {\n      await navigator.clipboard.writeText(profileUrl);\n      notifications.success('Profile link copied');\n      setCopiedProfileLink(true);\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n      copyTimeoutRef.current = window.setTimeout(() => {\n        setCopiedProfileLink(false);\n        copyTimeoutRef.current = null;\n      }, 2000);\n    } catch (error) {\n      console.error('Failed to copy profile link', error);\n      notifications.error('Unable to copy profile link');\n    }\n  }, [notifications, profileUrl]);\n\n  React.useEffect(() => {\n    return () => {\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const emptyStateHeading =\n    mode === 'members' ? 'No audience yet' : 'No signups yet';\n  const emptyStateDescription =\n    mode === 'members'\n      ? 'Share your profile to invite visitors. They will appear here as soon as they stop by.'\n      : 'Invite fans to tap the bell on your profile to receive notifications.';\n  const emptyStateIcon =\n    mode === 'members' ? (\n      <UserGroupIcon className='h-6 w-6' aria-hidden='true' />\n    ) : (\n      <BellAlertIcon className='h-6 w-6' aria-hidden='true' />\n    );\n  const emptyStatePrimaryAction = profileUrl\n    ? {\n        label: copiedProfileLink ? 'Link copied' : 'Copy profile link',\n        onClick: () => {\n          void handleCopyProfileLink();\n        },\n      }\n    : {\n        label: 'Open profile settings',\n        href: '/app/dashboard/profile',\n      };\n  const emptyStateSecondaryAction = {\n    label:\n      mode === 'members' ? 'Learn about audience' : 'Learn about subscribers',\n    href: '/support',\n  };\n\n  return (\n    <div\n      className='flex h-full min-h-0 flex-col'\n      data-testid='dashboard-audience-table'\n    >\n      <div className='shrink-0 border-b border-subtle bg-surface-1/75 backdrop-blur-md'>\n        <div className='flex flex-wrap items-start justify-between gap-4 px-4 py-4 sm:px-6'>\n          <div>\n            <h1 className='text-2xl font-semibold tracking-tight text-primary-token'>\n              Audience CRM\n            </h1>\n            <p className='mt-1 text-sm leading-6 text-secondary-token'>\n              {mode === 'members'\n                ? 'Every visitor, anonymous or identified, lives in this table.'\n                : 'Notification signups from your notification modal.'}\n            </p>\n          </div>\n          <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/60 px-2.5 py-1 text-xs font-medium text-secondary-token'>\n            {total} {total === 1 ? 'person' : 'people'}\n          </span>\n        </div>\n      </div>\n\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <div className='flex h-full min-h-0 flex-col bg-surface-1'>\n          <div className='flex-1 min-h-0 overflow-auto' ref={tableContainerRef}>\n            {rows.length === 0 ? (\n              <EmptyState\n                icon={emptyStateIcon}\n                heading={emptyStateHeading}\n                description={emptyStateDescription}\n                action={emptyStatePrimaryAction}\n                secondaryAction={emptyStateSecondaryAction}\n              />\n            ) : (\n              <table\n                className='w-full min-w-[960px] border-separate border-spacing-0 text-[13px]'\n                aria-label={\n                  mode === 'members'\n                    ? 'Audience members table'\n                    : 'Subscribers table'\n                }\n              >\n                <caption className='sr-only'>\n                  {mode === 'members'\n                    ? 'Table showing all audience members with their visit history, location, and engagement data'\n                    : 'Table showing all subscribers with their contact information and signup dates'}\n                </caption>\n                <thead\n                  className={cn(\n                    'sticky top-0 z-20 bg-surface-1/75 backdrop-blur-md',\n                    headerElevated &&\n                      'shadow-sm shadow-black/10 dark:shadow-black/40'\n                  )}\n                >\n                  <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                    <th className='w-14 border-b border-subtle px-4 py-3 text-left sm:px-6'>\n                      <Checkbox\n                        aria-label='Select all'\n                        checked={headerCheckboxState}\n                        onCheckedChange={() => toggleSelectAll()}\n                      />\n                    </th>\n\n                    {activeColumns.map((column, index) => {\n                      const sortKey =\n                        sortableColumnMap[column.key as ColumnKey];\n                      const isSortable = Boolean(sortKey);\n                      const isActive = isSortable && sortKey === sort;\n                      const activeDirection = isActive ? direction : undefined;\n\n                      return (\n                        <th\n                          key={column.key}\n                          className='border-b border-subtle px-4 py-3 text-left sm:px-6'\n                        >\n                          <div className='flex items-center justify-between gap-2'>\n                            {isSortable ? (\n                              <SortableHeaderButton\n                                label={column.label}\n                                direction={\n                                  activeDirection as 'asc' | 'desc' | undefined\n                                }\n                                onClick={() =>\n                                  onSortChange(sortKey as unknown as string)\n                                }\n                              />\n                            ) : (\n                              <span className='inline-flex items-center font-semibold'>\n                                {column.label}\n                              </span>\n                            )}\n\n                            {index === 0 ? (\n                              <div\n                                className={cn(\n                                  'inline-flex items-center transition-all duration-150',\n                                  selectedCount > 0\n                                    ? 'opacity-100 translate-y-0'\n                                    : 'pointer-events-none opacity-0 -translate-y-0.5'\n                                )}\n                              >\n                                <DropdownMenu>\n                                  <DropdownMenuTrigger asChild>\n                                    <Button\n                                      variant='secondary'\n                                      size='sm'\n                                      className='normal-case'\n                                    >\n                                      Bulk actions\n                                    </Button>\n                                  </DropdownMenuTrigger>\n                                  <DropdownMenuContent align='end'>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedEmails();\n                                      }}\n                                    >\n                                      Copy emails\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedPhones();\n                                      }}\n                                    >\n                                      Copy phone numbers\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => clearSelection()}\n                                    >\n                                      Clear selection\n                                    </DropdownMenuItem>\n                                  </DropdownMenuContent>\n                                </DropdownMenu>\n                              </div>\n                            ) : null}\n                          </div>\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n\n                <tbody\n                  ref={tbodyRef}\n                  style={{\n                    position: 'relative',\n                    height: `${rowVirtualizer.getTotalSize()}px`,\n                  }}\n                >\n                  {rowVirtualizer.getVirtualItems().map(virtualRow => {\n                    const row = rows[virtualRow.index];\n                    const deviceIndicator = getDeviceIndicator(row.deviceType);\n                    const isChecked = selectedIds.has(row.id);\n                    const rowNumber =\n                      (page - 1) * pageSize + virtualRow.index + 1;\n\n                    return (\n                      <tr\n                        key={row.id}\n                        data-index={virtualRow.index}\n                        ref={rowVirtualizer.measureElement}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0 hover:bg-surface-2',\n                          selectedMember?.id === row.id && 'bg-surface-2'\n                        )}\n                        style={{\n                          position: 'absolute',\n                          top: 0,\n                          left: 0,\n                          width: '100%',\n                          transform: `translateY(${virtualRow.start}px)`,\n                        }}\n                        onClick={() => setSelectedMember(row)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuRowId(row.id);\n                        }}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle sm:px-6'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${row.displayName || 'row'}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(row.id)}\n                              />\n                            </div>\n                          </div>\n                        </td>\n\n                        {mode === 'members' ? (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='font-semibold'>\n                                {row.displayName || 'Visitor'}\n                              </div>\n                              {row.type !== 'anonymous' ? (\n                                <div className='text-xs text-secondary-token'>\n                                  {row.type === 'email'\n                                    ? (row.email ?? 'Email fan')\n                                    : row.type === 'sms'\n                                      ? (row.phone ?? 'SMS fan')\n                                      : 'Connected fan'}\n                                </div>\n                              ) : null}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/40 px-2 py-0.5 text-[11px] font-medium text-secondary-token capitalize'>\n                                {row.type}\n                              </span>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>{row.locationLabel || 'Unknown'}</span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {deviceIndicator ? (\n                                <Icon\n                                  name={deviceIndicator.iconName}\n                                  className='h-4 w-4 text-secondary-token'\n                                  aria-label={deviceIndicator.label}\n                                  role='img'\n                                />\n                              ) : (\n                                <span className='text-secondary-token'>—</span>\n                              )}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                <span className='font-semibold'>\n                                  {row.visits}\n                                </span>\n                                <AudienceIntentBadge\n                                  intentLevel={row.intentLevel}\n                                />\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                {row.latestActions\n                                  .slice(0, 3)\n                                  .map((action, idx) => {\n                                    const iconName = resolveAudienceActionIcon(\n                                      action.label\n                                    );\n                                    return (\n                                      <span\n                                        key={`${row.id}-${action.label}-${action.platform ?? 'unknown'}-${action.timestamp ?? 'unknown'}-${idx}`}\n                                        className='inline-flex h-7 w-7 items-center justify-center rounded-full border border-subtle bg-surface-2/40 text-tertiary-token'\n                                        title={action.label}\n                                      >\n                                        <Icon\n                                          name={iconName}\n                                          className='h-3.5 w-3.5'\n                                          aria-hidden='true'\n                                        />\n                                        <span className='sr-only'>\n                                          {action.label}\n                                        </span>\n                                      </span>\n                                    );\n                                  })}\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatTimeAgo(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        ) : (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.displayName || 'Contact'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.phone ?? '—'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>\n                                  {row.geoCountry\n                                    ? formatCountryLabel(row.geoCountry)\n                                    : 'Unknown'}\n                                </span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatLongDate(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        )}\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          <div className='sticky bottom-0 z-20 flex flex-wrap items-center justify-between gap-3 border-t border-subtle bg-surface-1/75 px-4 py-2 text-xs text-secondary-token backdrop-blur-md sm:px-6'>\n            <span className='tracking-wide'>{paginationLabel()}</span>\n            <div className='flex items-center gap-3'>\n              <AdminPageSizeSelect\n                initialPageSize={pageSize}\n                onPageSizeChange={onPageSizeChange}\n              />\n              <div className='flex gap-2'>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page <= 1 || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.max(1, page - 1))}\n                >\n                  Previous\n                </Button>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page >= totalPages || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.min(totalPages, page + 1))}\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <AudienceMemberSidebar\n        member={selectedMember}\n        isOpen={Boolean(selectedMember)}\n        onClose={() => setSelectedMember(null)}\n      />\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        {paginationLabel()}\n        {selectedCount > 0 &&\n          `${selectedCount} ${selectedCount === 1 ? 'row' : 'rows'} selected`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardAudienceTable.tsx"
        },
        "span": [25082, 25621],
        "sourceCode": "'use client';\n\nimport { BellAlertIcon, UserGroupIcon } from '@heroicons/react/24/outline';\nimport {\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport * as React from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminPageSizeSelect } from '@/components/admin/table/AdminPageSizeSelect';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { Icon } from '@/components/atoms/Icon';\nimport { AudienceRowActionsMenu } from '@/components/dashboard/AudienceRowActionsMenu';\nimport { AudienceIntentBadge } from '@/components/dashboard/atoms/AudienceIntentBadge';\nimport {\n  AUDIENCE_MEMBER_SIDEBAR_WIDTH,\n  AudienceMemberSidebar,\n} from '@/components/dashboard/organisms/AudienceMemberSidebar';\nimport { EmptyState } from '@/components/ui/EmptyState';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { cn } from '@/lib/utils';\nimport {\n  formatCountryLabel,\n  formatLongDate,\n  formatTimeAgo,\n  getDeviceIndicator,\n} from '@/lib/utils/audience';\nimport type { AudienceMember } from '@/types';\n\nexport type AudienceMode = 'members' | 'subscribers';\n\ntype AudienceRow = AudienceMember;\n\ntype MemberSortColumn =\n  | 'lastSeen'\n  | 'visits'\n  | 'intent'\n  | 'type'\n  | 'engagement'\n  | 'createdAt';\n\ntype SubscriberSortColumn = 'email' | 'phone' | 'country' | 'createdAt';\n\ntype MemberColumnKey = (typeof MEMBER_COLUMNS)[number]['key'];\n\ntype SubscriberColumnKey = (typeof SUBSCRIBER_COLUMNS)[number]['key'];\n\ntype ColumnKey = MemberColumnKey | SubscriberColumnKey;\n\nconst MEMBER_COLUMNS = [\n  { key: 'displayName', label: 'User' },\n  { key: 'type', label: 'Type' },\n  { key: 'location', label: 'Location' },\n  { key: 'device', label: 'Device' },\n  { key: 'visits', label: 'Visits' },\n  { key: 'actions', label: 'Actions' },\n  { key: 'lastSeen', label: 'Last seen' },\n] as const;\n\nconst SUBSCRIBER_COLUMNS = [\n  { key: 'email', label: 'Email' },\n  { key: 'phone', label: 'Phone' },\n  { key: 'country', label: 'Country' },\n  { key: 'createdAt', label: 'Signed up' },\n] as const;\n\nasync function copyTextToClipboard(text: string): Promise<boolean> {\n  if (typeof navigator === 'undefined' || !navigator.clipboard?.writeText) {\n    return false;\n  }\n\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction resolveAudienceActionIcon(label: string): string {\n  const normalized = label.trim().toLowerCase();\n  if (normalized.includes('visit')) return 'Eye';\n  if (normalized.includes('view')) return 'Eye';\n  if (normalized.includes('tip')) return 'HandCoins';\n  if (normalized.includes('purchase')) return 'CreditCard';\n  if (normalized.includes('subscribe')) return 'Bell';\n  if (normalized.includes('follow')) return 'UserPlus';\n  if (normalized.includes('click')) return 'MousePointerClick';\n  if (normalized.includes('link')) return 'Link';\n  return 'Sparkles';\n}\n\nexport interface DashboardAudienceTableProps {\n  mode: AudienceMode;\n  rows: AudienceRow[];\n  total: number;\n  page: number;\n  pageSize: number;\n  sort: string;\n  direction: 'asc' | 'desc';\n  onPageChange: (page: number) => void;\n  onPageSizeChange: (pageSize: number) => void;\n  onSortChange: (sort: string) => void;\n  profileUrl?: string;\n}\n\nexport function DashboardAudienceTable({\n  mode,\n  rows,\n  total,\n  page,\n  pageSize,\n  sort,\n  direction,\n  onPageChange,\n  onPageSizeChange,\n  onSortChange,\n  profileUrl,\n}: DashboardAudienceTableProps) {\n  const notifications = useNotifications();\n  const { setTableMeta } = useTableMeta();\n  const tableContainerRef = React.useRef<HTMLDivElement | null>(null);\n  const tbodyRef = React.useRef<HTMLTableSectionElement | null>(null);\n  const [headerElevated, setHeaderElevated] = React.useState(false);\n  const [openMenuRowId, setOpenMenuRowId] = React.useState<string | null>(null);\n  const [selectedMember, setSelectedMember] =\n    React.useState<AudienceRow | null>(null);\n  const [copiedProfileLink, setCopiedProfileLink] = React.useState(false);\n  const copyTimeoutRef = React.useRef<number | null>(null);\n\n  const rowIds = React.useMemo(() => rows.map(row => row.id), [rows]);\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n    clearSelection,\n  } = useRowSelection(rowIds);\n\n  React.useEffect(() => {\n    const container = tableContainerRef.current;\n    if (!container) return;\n\n    const handleScroll = () => {\n      setHeaderElevated(container.scrollTop > 0);\n    };\n\n    handleScroll();\n    container.addEventListener('scroll', handleScroll);\n    return () => container.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  React.useEffect(() => {\n    clearSelection();\n    setSelectedMember(null);\n  }, [mode, page, pageSize, sort, direction, clearSelection]);\n\n  React.useEffect(() => {\n    const toggle = () => {\n      if (rows.length === 0) return;\n      setSelectedMember(current => (current ? null : (rows[0] ?? null)));\n    };\n\n    setTableMeta({\n      rowCount: rows.length,\n      toggle: rows.length > 0 ? toggle : null,\n      rightPanelWidth: selectedMember ? AUDIENCE_MEMBER_SIDEBAR_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [rows, selectedMember, setTableMeta]);\n\n  const totalPages = Math.max(1, Math.ceil(total / pageSize));\n  const activeColumns =\n    mode === 'members' ? MEMBER_COLUMNS : SUBSCRIBER_COLUMNS;\n\n  // Virtualization for table rows\n  // eslint-disable-next-line react-hooks/incompatible-library\n  const rowVirtualizer = useVirtualizer({\n    count: rows.length,\n    getScrollElement: () => tableContainerRef.current,\n    estimateSize: () => 60, // Estimated row height in pixels\n    overscan: 5, // Render 5 extra rows above/below viewport\n  });\n\n  const sortableColumnMap: Partial<\n    Record<ColumnKey, MemberSortColumn | SubscriberSortColumn>\n  > = {\n    visits: 'visits',\n    lastSeen: 'lastSeen',\n    email: 'email',\n    phone: 'phone',\n    country: 'country',\n    createdAt: 'createdAt',\n  };\n\n  const selectedRows = React.useMemo(\n    () => rows.filter(row => selectedIds.has(row.id)),\n    [rows, selectedIds]\n  );\n\n  const copySelectedEmails = async (): Promise<void> => {\n    const emails = selectedRows\n      .map(row => row.email)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (emails.length === 0) {\n      notifications.error('No emails available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(emails.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${emails.length} email(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy emails');\n  };\n\n  const copySelectedPhones = async (): Promise<void> => {\n    const phones = selectedRows\n      .map(row => row.phone)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (phones.length === 0) {\n      notifications.error('No phone numbers available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(phones.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${phones.length} phone number(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy phone numbers');\n  };\n\n  const paginationLabel = () => {\n    if (total === 0) {\n      return mode === 'members'\n        ? 'No audience yet. Share your profile to invite visitors.'\n        : 'No signups yet. Invite fans to tap the bell.';\n    }\n\n    const start = (page - 1) * pageSize + 1;\n    const end = Math.min(page * pageSize, total);\n    return `Showing ${start}–${end} of ${total} readers`;\n  };\n\n  const handleCopyProfileLink = React.useCallback(async () => {\n    if (!profileUrl) return;\n    try {\n      await navigator.clipboard.writeText(profileUrl);\n      notifications.success('Profile link copied');\n      setCopiedProfileLink(true);\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n      copyTimeoutRef.current = window.setTimeout(() => {\n        setCopiedProfileLink(false);\n        copyTimeoutRef.current = null;\n      }, 2000);\n    } catch (error) {\n      console.error('Failed to copy profile link', error);\n      notifications.error('Unable to copy profile link');\n    }\n  }, [notifications, profileUrl]);\n\n  React.useEffect(() => {\n    return () => {\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const emptyStateHeading =\n    mode === 'members' ? 'No audience yet' : 'No signups yet';\n  const emptyStateDescription =\n    mode === 'members'\n      ? 'Share your profile to invite visitors. They will appear here as soon as they stop by.'\n      : 'Invite fans to tap the bell on your profile to receive notifications.';\n  const emptyStateIcon =\n    mode === 'members' ? (\n      <UserGroupIcon className='h-6 w-6' aria-hidden='true' />\n    ) : (\n      <BellAlertIcon className='h-6 w-6' aria-hidden='true' />\n    );\n  const emptyStatePrimaryAction = profileUrl\n    ? {\n        label: copiedProfileLink ? 'Link copied' : 'Copy profile link',\n        onClick: () => {\n          void handleCopyProfileLink();\n        },\n      }\n    : {\n        label: 'Open profile settings',\n        href: '/app/dashboard/profile',\n      };\n  const emptyStateSecondaryAction = {\n    label:\n      mode === 'members' ? 'Learn about audience' : 'Learn about subscribers',\n    href: '/support',\n  };\n\n  return (\n    <div\n      className='flex h-full min-h-0 flex-col'\n      data-testid='dashboard-audience-table'\n    >\n      <div className='shrink-0 border-b border-subtle bg-surface-1/75 backdrop-blur-md'>\n        <div className='flex flex-wrap items-start justify-between gap-4 px-4 py-4 sm:px-6'>\n          <div>\n            <h1 className='text-2xl font-semibold tracking-tight text-primary-token'>\n              Audience CRM\n            </h1>\n            <p className='mt-1 text-sm leading-6 text-secondary-token'>\n              {mode === 'members'\n                ? 'Every visitor, anonymous or identified, lives in this table.'\n                : 'Notification signups from your notification modal.'}\n            </p>\n          </div>\n          <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/60 px-2.5 py-1 text-xs font-medium text-secondary-token'>\n            {total} {total === 1 ? 'person' : 'people'}\n          </span>\n        </div>\n      </div>\n\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <div className='flex h-full min-h-0 flex-col bg-surface-1'>\n          <div className='flex-1 min-h-0 overflow-auto' ref={tableContainerRef}>\n            {rows.length === 0 ? (\n              <EmptyState\n                icon={emptyStateIcon}\n                heading={emptyStateHeading}\n                description={emptyStateDescription}\n                action={emptyStatePrimaryAction}\n                secondaryAction={emptyStateSecondaryAction}\n              />\n            ) : (\n              <table\n                className='w-full min-w-[960px] border-separate border-spacing-0 text-[13px]'\n                aria-label={\n                  mode === 'members'\n                    ? 'Audience members table'\n                    : 'Subscribers table'\n                }\n              >\n                <caption className='sr-only'>\n                  {mode === 'members'\n                    ? 'Table showing all audience members with their visit history, location, and engagement data'\n                    : 'Table showing all subscribers with their contact information and signup dates'}\n                </caption>\n                <thead\n                  className={cn(\n                    'sticky top-0 z-20 bg-surface-1/75 backdrop-blur-md',\n                    headerElevated &&\n                      'shadow-sm shadow-black/10 dark:shadow-black/40'\n                  )}\n                >\n                  <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                    <th className='w-14 border-b border-subtle px-4 py-3 text-left sm:px-6'>\n                      <Checkbox\n                        aria-label='Select all'\n                        checked={headerCheckboxState}\n                        onCheckedChange={() => toggleSelectAll()}\n                      />\n                    </th>\n\n                    {activeColumns.map((column, index) => {\n                      const sortKey =\n                        sortableColumnMap[column.key as ColumnKey];\n                      const isSortable = Boolean(sortKey);\n                      const isActive = isSortable && sortKey === sort;\n                      const activeDirection = isActive ? direction : undefined;\n\n                      return (\n                        <th\n                          key={column.key}\n                          className='border-b border-subtle px-4 py-3 text-left sm:px-6'\n                        >\n                          <div className='flex items-center justify-between gap-2'>\n                            {isSortable ? (\n                              <SortableHeaderButton\n                                label={column.label}\n                                direction={\n                                  activeDirection as 'asc' | 'desc' | undefined\n                                }\n                                onClick={() =>\n                                  onSortChange(sortKey as unknown as string)\n                                }\n                              />\n                            ) : (\n                              <span className='inline-flex items-center font-semibold'>\n                                {column.label}\n                              </span>\n                            )}\n\n                            {index === 0 ? (\n                              <div\n                                className={cn(\n                                  'inline-flex items-center transition-all duration-150',\n                                  selectedCount > 0\n                                    ? 'opacity-100 translate-y-0'\n                                    : 'pointer-events-none opacity-0 -translate-y-0.5'\n                                )}\n                              >\n                                <DropdownMenu>\n                                  <DropdownMenuTrigger asChild>\n                                    <Button\n                                      variant='secondary'\n                                      size='sm'\n                                      className='normal-case'\n                                    >\n                                      Bulk actions\n                                    </Button>\n                                  </DropdownMenuTrigger>\n                                  <DropdownMenuContent align='end'>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedEmails();\n                                      }}\n                                    >\n                                      Copy emails\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedPhones();\n                                      }}\n                                    >\n                                      Copy phone numbers\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => clearSelection()}\n                                    >\n                                      Clear selection\n                                    </DropdownMenuItem>\n                                  </DropdownMenuContent>\n                                </DropdownMenu>\n                              </div>\n                            ) : null}\n                          </div>\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n\n                <tbody\n                  ref={tbodyRef}\n                  style={{\n                    position: 'relative',\n                    height: `${rowVirtualizer.getTotalSize()}px`,\n                  }}\n                >\n                  {rowVirtualizer.getVirtualItems().map(virtualRow => {\n                    const row = rows[virtualRow.index];\n                    const deviceIndicator = getDeviceIndicator(row.deviceType);\n                    const isChecked = selectedIds.has(row.id);\n                    const rowNumber =\n                      (page - 1) * pageSize + virtualRow.index + 1;\n\n                    return (\n                      <tr\n                        key={row.id}\n                        data-index={virtualRow.index}\n                        ref={rowVirtualizer.measureElement}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0 hover:bg-surface-2',\n                          selectedMember?.id === row.id && 'bg-surface-2'\n                        )}\n                        style={{\n                          position: 'absolute',\n                          top: 0,\n                          left: 0,\n                          width: '100%',\n                          transform: `translateY(${virtualRow.start}px)`,\n                        }}\n                        onClick={() => setSelectedMember(row)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuRowId(row.id);\n                        }}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle sm:px-6'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${row.displayName || 'row'}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(row.id)}\n                              />\n                            </div>\n                          </div>\n                        </td>\n\n                        {mode === 'members' ? (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='font-semibold'>\n                                {row.displayName || 'Visitor'}\n                              </div>\n                              {row.type !== 'anonymous' ? (\n                                <div className='text-xs text-secondary-token'>\n                                  {row.type === 'email'\n                                    ? (row.email ?? 'Email fan')\n                                    : row.type === 'sms'\n                                      ? (row.phone ?? 'SMS fan')\n                                      : 'Connected fan'}\n                                </div>\n                              ) : null}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/40 px-2 py-0.5 text-[11px] font-medium text-secondary-token capitalize'>\n                                {row.type}\n                              </span>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>{row.locationLabel || 'Unknown'}</span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {deviceIndicator ? (\n                                <Icon\n                                  name={deviceIndicator.iconName}\n                                  className='h-4 w-4 text-secondary-token'\n                                  aria-label={deviceIndicator.label}\n                                  role='img'\n                                />\n                              ) : (\n                                <span className='text-secondary-token'>—</span>\n                              )}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                <span className='font-semibold'>\n                                  {row.visits}\n                                </span>\n                                <AudienceIntentBadge\n                                  intentLevel={row.intentLevel}\n                                />\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                {row.latestActions\n                                  .slice(0, 3)\n                                  .map((action, idx) => {\n                                    const iconName = resolveAudienceActionIcon(\n                                      action.label\n                                    );\n                                    return (\n                                      <span\n                                        key={`${row.id}-${action.label}-${action.platform ?? 'unknown'}-${action.timestamp ?? 'unknown'}-${idx}`}\n                                        className='inline-flex h-7 w-7 items-center justify-center rounded-full border border-subtle bg-surface-2/40 text-tertiary-token'\n                                        title={action.label}\n                                      >\n                                        <Icon\n                                          name={iconName}\n                                          className='h-3.5 w-3.5'\n                                          aria-hidden='true'\n                                        />\n                                        <span className='sr-only'>\n                                          {action.label}\n                                        </span>\n                                      </span>\n                                    );\n                                  })}\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatTimeAgo(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        ) : (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.displayName || 'Contact'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.phone ?? '—'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>\n                                  {row.geoCountry\n                                    ? formatCountryLabel(row.geoCountry)\n                                    : 'Unknown'}\n                                </span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatLongDate(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        )}\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          <div className='sticky bottom-0 z-20 flex flex-wrap items-center justify-between gap-3 border-t border-subtle bg-surface-1/75 px-4 py-2 text-xs text-secondary-token backdrop-blur-md sm:px-6'>\n            <span className='tracking-wide'>{paginationLabel()}</span>\n            <div className='flex items-center gap-3'>\n              <AdminPageSizeSelect\n                initialPageSize={pageSize}\n                onPageSizeChange={onPageSizeChange}\n              />\n              <div className='flex gap-2'>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page <= 1 || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.max(1, page - 1))}\n                >\n                  Previous\n                </Button>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page >= totalPages || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.min(totalPages, page + 1))}\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <AudienceMemberSidebar\n        member={selectedMember}\n        isOpen={Boolean(selectedMember)}\n        onClose={() => setSelectedMember(null)}\n      />\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        {paginationLabel()}\n        {selectedCount > 0 &&\n          `${selectedCount} ${selectedCount === 1 ? 'row' : 'rows'} selected`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useKeyWithClickEvents",
      "severity": "warning",
      "description": "Enforce to have the onClick mouse event with the onKeyUp, the onKeyDown, or the onKeyPress keyboard event.",
      "message": [
        { "elements": [], "content": "Enforce to have the " },
        { "elements": ["Emphasis"], "content": "onClick" },
        { "elements": [], "content": " mouse event with the " },
        { "elements": ["Emphasis"], "content": "onKeyUp" },
        { "elements": [], "content": ", the " },
        { "elements": ["Emphasis"], "content": "onKeyDown" },
        { "elements": [], "content": ", or the " },
        { "elements": ["Emphasis"], "content": "onKeyPress" },
        { "elements": [], "content": " keyboard event." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Actions triggered using mouse events should have corresponding keyboard events to account for keyboard-only navigation."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardAudienceTable.tsx"
        },
        "span": [27666, 28205],
        "sourceCode": "'use client';\n\nimport { BellAlertIcon, UserGroupIcon } from '@heroicons/react/24/outline';\nimport {\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport * as React from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminPageSizeSelect } from '@/components/admin/table/AdminPageSizeSelect';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { Icon } from '@/components/atoms/Icon';\nimport { AudienceRowActionsMenu } from '@/components/dashboard/AudienceRowActionsMenu';\nimport { AudienceIntentBadge } from '@/components/dashboard/atoms/AudienceIntentBadge';\nimport {\n  AUDIENCE_MEMBER_SIDEBAR_WIDTH,\n  AudienceMemberSidebar,\n} from '@/components/dashboard/organisms/AudienceMemberSidebar';\nimport { EmptyState } from '@/components/ui/EmptyState';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { cn } from '@/lib/utils';\nimport {\n  formatCountryLabel,\n  formatLongDate,\n  formatTimeAgo,\n  getDeviceIndicator,\n} from '@/lib/utils/audience';\nimport type { AudienceMember } from '@/types';\n\nexport type AudienceMode = 'members' | 'subscribers';\n\ntype AudienceRow = AudienceMember;\n\ntype MemberSortColumn =\n  | 'lastSeen'\n  | 'visits'\n  | 'intent'\n  | 'type'\n  | 'engagement'\n  | 'createdAt';\n\ntype SubscriberSortColumn = 'email' | 'phone' | 'country' | 'createdAt';\n\ntype MemberColumnKey = (typeof MEMBER_COLUMNS)[number]['key'];\n\ntype SubscriberColumnKey = (typeof SUBSCRIBER_COLUMNS)[number]['key'];\n\ntype ColumnKey = MemberColumnKey | SubscriberColumnKey;\n\nconst MEMBER_COLUMNS = [\n  { key: 'displayName', label: 'User' },\n  { key: 'type', label: 'Type' },\n  { key: 'location', label: 'Location' },\n  { key: 'device', label: 'Device' },\n  { key: 'visits', label: 'Visits' },\n  { key: 'actions', label: 'Actions' },\n  { key: 'lastSeen', label: 'Last seen' },\n] as const;\n\nconst SUBSCRIBER_COLUMNS = [\n  { key: 'email', label: 'Email' },\n  { key: 'phone', label: 'Phone' },\n  { key: 'country', label: 'Country' },\n  { key: 'createdAt', label: 'Signed up' },\n] as const;\n\nasync function copyTextToClipboard(text: string): Promise<boolean> {\n  if (typeof navigator === 'undefined' || !navigator.clipboard?.writeText) {\n    return false;\n  }\n\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction resolveAudienceActionIcon(label: string): string {\n  const normalized = label.trim().toLowerCase();\n  if (normalized.includes('visit')) return 'Eye';\n  if (normalized.includes('view')) return 'Eye';\n  if (normalized.includes('tip')) return 'HandCoins';\n  if (normalized.includes('purchase')) return 'CreditCard';\n  if (normalized.includes('subscribe')) return 'Bell';\n  if (normalized.includes('follow')) return 'UserPlus';\n  if (normalized.includes('click')) return 'MousePointerClick';\n  if (normalized.includes('link')) return 'Link';\n  return 'Sparkles';\n}\n\nexport interface DashboardAudienceTableProps {\n  mode: AudienceMode;\n  rows: AudienceRow[];\n  total: number;\n  page: number;\n  pageSize: number;\n  sort: string;\n  direction: 'asc' | 'desc';\n  onPageChange: (page: number) => void;\n  onPageSizeChange: (pageSize: number) => void;\n  onSortChange: (sort: string) => void;\n  profileUrl?: string;\n}\n\nexport function DashboardAudienceTable({\n  mode,\n  rows,\n  total,\n  page,\n  pageSize,\n  sort,\n  direction,\n  onPageChange,\n  onPageSizeChange,\n  onSortChange,\n  profileUrl,\n}: DashboardAudienceTableProps) {\n  const notifications = useNotifications();\n  const { setTableMeta } = useTableMeta();\n  const tableContainerRef = React.useRef<HTMLDivElement | null>(null);\n  const tbodyRef = React.useRef<HTMLTableSectionElement | null>(null);\n  const [headerElevated, setHeaderElevated] = React.useState(false);\n  const [openMenuRowId, setOpenMenuRowId] = React.useState<string | null>(null);\n  const [selectedMember, setSelectedMember] =\n    React.useState<AudienceRow | null>(null);\n  const [copiedProfileLink, setCopiedProfileLink] = React.useState(false);\n  const copyTimeoutRef = React.useRef<number | null>(null);\n\n  const rowIds = React.useMemo(() => rows.map(row => row.id), [rows]);\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n    clearSelection,\n  } = useRowSelection(rowIds);\n\n  React.useEffect(() => {\n    const container = tableContainerRef.current;\n    if (!container) return;\n\n    const handleScroll = () => {\n      setHeaderElevated(container.scrollTop > 0);\n    };\n\n    handleScroll();\n    container.addEventListener('scroll', handleScroll);\n    return () => container.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  React.useEffect(() => {\n    clearSelection();\n    setSelectedMember(null);\n  }, [mode, page, pageSize, sort, direction, clearSelection]);\n\n  React.useEffect(() => {\n    const toggle = () => {\n      if (rows.length === 0) return;\n      setSelectedMember(current => (current ? null : (rows[0] ?? null)));\n    };\n\n    setTableMeta({\n      rowCount: rows.length,\n      toggle: rows.length > 0 ? toggle : null,\n      rightPanelWidth: selectedMember ? AUDIENCE_MEMBER_SIDEBAR_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [rows, selectedMember, setTableMeta]);\n\n  const totalPages = Math.max(1, Math.ceil(total / pageSize));\n  const activeColumns =\n    mode === 'members' ? MEMBER_COLUMNS : SUBSCRIBER_COLUMNS;\n\n  // Virtualization for table rows\n  // eslint-disable-next-line react-hooks/incompatible-library\n  const rowVirtualizer = useVirtualizer({\n    count: rows.length,\n    getScrollElement: () => tableContainerRef.current,\n    estimateSize: () => 60, // Estimated row height in pixels\n    overscan: 5, // Render 5 extra rows above/below viewport\n  });\n\n  const sortableColumnMap: Partial<\n    Record<ColumnKey, MemberSortColumn | SubscriberSortColumn>\n  > = {\n    visits: 'visits',\n    lastSeen: 'lastSeen',\n    email: 'email',\n    phone: 'phone',\n    country: 'country',\n    createdAt: 'createdAt',\n  };\n\n  const selectedRows = React.useMemo(\n    () => rows.filter(row => selectedIds.has(row.id)),\n    [rows, selectedIds]\n  );\n\n  const copySelectedEmails = async (): Promise<void> => {\n    const emails = selectedRows\n      .map(row => row.email)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (emails.length === 0) {\n      notifications.error('No emails available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(emails.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${emails.length} email(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy emails');\n  };\n\n  const copySelectedPhones = async (): Promise<void> => {\n    const phones = selectedRows\n      .map(row => row.phone)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (phones.length === 0) {\n      notifications.error('No phone numbers available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(phones.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${phones.length} phone number(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy phone numbers');\n  };\n\n  const paginationLabel = () => {\n    if (total === 0) {\n      return mode === 'members'\n        ? 'No audience yet. Share your profile to invite visitors.'\n        : 'No signups yet. Invite fans to tap the bell.';\n    }\n\n    const start = (page - 1) * pageSize + 1;\n    const end = Math.min(page * pageSize, total);\n    return `Showing ${start}–${end} of ${total} readers`;\n  };\n\n  const handleCopyProfileLink = React.useCallback(async () => {\n    if (!profileUrl) return;\n    try {\n      await navigator.clipboard.writeText(profileUrl);\n      notifications.success('Profile link copied');\n      setCopiedProfileLink(true);\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n      copyTimeoutRef.current = window.setTimeout(() => {\n        setCopiedProfileLink(false);\n        copyTimeoutRef.current = null;\n      }, 2000);\n    } catch (error) {\n      console.error('Failed to copy profile link', error);\n      notifications.error('Unable to copy profile link');\n    }\n  }, [notifications, profileUrl]);\n\n  React.useEffect(() => {\n    return () => {\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const emptyStateHeading =\n    mode === 'members' ? 'No audience yet' : 'No signups yet';\n  const emptyStateDescription =\n    mode === 'members'\n      ? 'Share your profile to invite visitors. They will appear here as soon as they stop by.'\n      : 'Invite fans to tap the bell on your profile to receive notifications.';\n  const emptyStateIcon =\n    mode === 'members' ? (\n      <UserGroupIcon className='h-6 w-6' aria-hidden='true' />\n    ) : (\n      <BellAlertIcon className='h-6 w-6' aria-hidden='true' />\n    );\n  const emptyStatePrimaryAction = profileUrl\n    ? {\n        label: copiedProfileLink ? 'Link copied' : 'Copy profile link',\n        onClick: () => {\n          void handleCopyProfileLink();\n        },\n      }\n    : {\n        label: 'Open profile settings',\n        href: '/app/dashboard/profile',\n      };\n  const emptyStateSecondaryAction = {\n    label:\n      mode === 'members' ? 'Learn about audience' : 'Learn about subscribers',\n    href: '/support',\n  };\n\n  return (\n    <div\n      className='flex h-full min-h-0 flex-col'\n      data-testid='dashboard-audience-table'\n    >\n      <div className='shrink-0 border-b border-subtle bg-surface-1/75 backdrop-blur-md'>\n        <div className='flex flex-wrap items-start justify-between gap-4 px-4 py-4 sm:px-6'>\n          <div>\n            <h1 className='text-2xl font-semibold tracking-tight text-primary-token'>\n              Audience CRM\n            </h1>\n            <p className='mt-1 text-sm leading-6 text-secondary-token'>\n              {mode === 'members'\n                ? 'Every visitor, anonymous or identified, lives in this table.'\n                : 'Notification signups from your notification modal.'}\n            </p>\n          </div>\n          <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/60 px-2.5 py-1 text-xs font-medium text-secondary-token'>\n            {total} {total === 1 ? 'person' : 'people'}\n          </span>\n        </div>\n      </div>\n\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <div className='flex h-full min-h-0 flex-col bg-surface-1'>\n          <div className='flex-1 min-h-0 overflow-auto' ref={tableContainerRef}>\n            {rows.length === 0 ? (\n              <EmptyState\n                icon={emptyStateIcon}\n                heading={emptyStateHeading}\n                description={emptyStateDescription}\n                action={emptyStatePrimaryAction}\n                secondaryAction={emptyStateSecondaryAction}\n              />\n            ) : (\n              <table\n                className='w-full min-w-[960px] border-separate border-spacing-0 text-[13px]'\n                aria-label={\n                  mode === 'members'\n                    ? 'Audience members table'\n                    : 'Subscribers table'\n                }\n              >\n                <caption className='sr-only'>\n                  {mode === 'members'\n                    ? 'Table showing all audience members with their visit history, location, and engagement data'\n                    : 'Table showing all subscribers with their contact information and signup dates'}\n                </caption>\n                <thead\n                  className={cn(\n                    'sticky top-0 z-20 bg-surface-1/75 backdrop-blur-md',\n                    headerElevated &&\n                      'shadow-sm shadow-black/10 dark:shadow-black/40'\n                  )}\n                >\n                  <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                    <th className='w-14 border-b border-subtle px-4 py-3 text-left sm:px-6'>\n                      <Checkbox\n                        aria-label='Select all'\n                        checked={headerCheckboxState}\n                        onCheckedChange={() => toggleSelectAll()}\n                      />\n                    </th>\n\n                    {activeColumns.map((column, index) => {\n                      const sortKey =\n                        sortableColumnMap[column.key as ColumnKey];\n                      const isSortable = Boolean(sortKey);\n                      const isActive = isSortable && sortKey === sort;\n                      const activeDirection = isActive ? direction : undefined;\n\n                      return (\n                        <th\n                          key={column.key}\n                          className='border-b border-subtle px-4 py-3 text-left sm:px-6'\n                        >\n                          <div className='flex items-center justify-between gap-2'>\n                            {isSortable ? (\n                              <SortableHeaderButton\n                                label={column.label}\n                                direction={\n                                  activeDirection as 'asc' | 'desc' | undefined\n                                }\n                                onClick={() =>\n                                  onSortChange(sortKey as unknown as string)\n                                }\n                              />\n                            ) : (\n                              <span className='inline-flex items-center font-semibold'>\n                                {column.label}\n                              </span>\n                            )}\n\n                            {index === 0 ? (\n                              <div\n                                className={cn(\n                                  'inline-flex items-center transition-all duration-150',\n                                  selectedCount > 0\n                                    ? 'opacity-100 translate-y-0'\n                                    : 'pointer-events-none opacity-0 -translate-y-0.5'\n                                )}\n                              >\n                                <DropdownMenu>\n                                  <DropdownMenuTrigger asChild>\n                                    <Button\n                                      variant='secondary'\n                                      size='sm'\n                                      className='normal-case'\n                                    >\n                                      Bulk actions\n                                    </Button>\n                                  </DropdownMenuTrigger>\n                                  <DropdownMenuContent align='end'>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedEmails();\n                                      }}\n                                    >\n                                      Copy emails\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedPhones();\n                                      }}\n                                    >\n                                      Copy phone numbers\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => clearSelection()}\n                                    >\n                                      Clear selection\n                                    </DropdownMenuItem>\n                                  </DropdownMenuContent>\n                                </DropdownMenu>\n                              </div>\n                            ) : null}\n                          </div>\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n\n                <tbody\n                  ref={tbodyRef}\n                  style={{\n                    position: 'relative',\n                    height: `${rowVirtualizer.getTotalSize()}px`,\n                  }}\n                >\n                  {rowVirtualizer.getVirtualItems().map(virtualRow => {\n                    const row = rows[virtualRow.index];\n                    const deviceIndicator = getDeviceIndicator(row.deviceType);\n                    const isChecked = selectedIds.has(row.id);\n                    const rowNumber =\n                      (page - 1) * pageSize + virtualRow.index + 1;\n\n                    return (\n                      <tr\n                        key={row.id}\n                        data-index={virtualRow.index}\n                        ref={rowVirtualizer.measureElement}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0 hover:bg-surface-2',\n                          selectedMember?.id === row.id && 'bg-surface-2'\n                        )}\n                        style={{\n                          position: 'absolute',\n                          top: 0,\n                          left: 0,\n                          width: '100%',\n                          transform: `translateY(${virtualRow.start}px)`,\n                        }}\n                        onClick={() => setSelectedMember(row)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuRowId(row.id);\n                        }}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle sm:px-6'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${row.displayName || 'row'}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(row.id)}\n                              />\n                            </div>\n                          </div>\n                        </td>\n\n                        {mode === 'members' ? (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='font-semibold'>\n                                {row.displayName || 'Visitor'}\n                              </div>\n                              {row.type !== 'anonymous' ? (\n                                <div className='text-xs text-secondary-token'>\n                                  {row.type === 'email'\n                                    ? (row.email ?? 'Email fan')\n                                    : row.type === 'sms'\n                                      ? (row.phone ?? 'SMS fan')\n                                      : 'Connected fan'}\n                                </div>\n                              ) : null}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/40 px-2 py-0.5 text-[11px] font-medium text-secondary-token capitalize'>\n                                {row.type}\n                              </span>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>{row.locationLabel || 'Unknown'}</span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {deviceIndicator ? (\n                                <Icon\n                                  name={deviceIndicator.iconName}\n                                  className='h-4 w-4 text-secondary-token'\n                                  aria-label={deviceIndicator.label}\n                                  role='img'\n                                />\n                              ) : (\n                                <span className='text-secondary-token'>—</span>\n                              )}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                <span className='font-semibold'>\n                                  {row.visits}\n                                </span>\n                                <AudienceIntentBadge\n                                  intentLevel={row.intentLevel}\n                                />\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                {row.latestActions\n                                  .slice(0, 3)\n                                  .map((action, idx) => {\n                                    const iconName = resolveAudienceActionIcon(\n                                      action.label\n                                    );\n                                    return (\n                                      <span\n                                        key={`${row.id}-${action.label}-${action.platform ?? 'unknown'}-${action.timestamp ?? 'unknown'}-${idx}`}\n                                        className='inline-flex h-7 w-7 items-center justify-center rounded-full border border-subtle bg-surface-2/40 text-tertiary-token'\n                                        title={action.label}\n                                      >\n                                        <Icon\n                                          name={iconName}\n                                          className='h-3.5 w-3.5'\n                                          aria-hidden='true'\n                                        />\n                                        <span className='sr-only'>\n                                          {action.label}\n                                        </span>\n                                      </span>\n                                    );\n                                  })}\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatTimeAgo(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        ) : (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.displayName || 'Contact'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.phone ?? '—'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>\n                                  {row.geoCountry\n                                    ? formatCountryLabel(row.geoCountry)\n                                    : 'Unknown'}\n                                </span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatLongDate(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        )}\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          <div className='sticky bottom-0 z-20 flex flex-wrap items-center justify-between gap-3 border-t border-subtle bg-surface-1/75 px-4 py-2 text-xs text-secondary-token backdrop-blur-md sm:px-6'>\n            <span className='tracking-wide'>{paginationLabel()}</span>\n            <div className='flex items-center gap-3'>\n              <AdminPageSizeSelect\n                initialPageSize={pageSize}\n                onPageSizeChange={onPageSizeChange}\n              />\n              <div className='flex gap-2'>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page <= 1 || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.max(1, page - 1))}\n                >\n                  Previous\n                </Button>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page >= totalPages || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.min(totalPages, page + 1))}\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <AudienceMemberSidebar\n        member={selectedMember}\n        isOpen={Boolean(selectedMember)}\n        onClose={() => setSelectedMember(null)}\n      />\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        {paginationLabel()}\n        {selectedCount > 0 &&\n          `${selectedCount} ${selectedCount === 1 ? 'row' : 'rows'} selected`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardAudienceTable.tsx"
        },
        "span": [27666, 28205],
        "sourceCode": "'use client';\n\nimport { BellAlertIcon, UserGroupIcon } from '@heroicons/react/24/outline';\nimport {\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport * as React from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminPageSizeSelect } from '@/components/admin/table/AdminPageSizeSelect';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { Icon } from '@/components/atoms/Icon';\nimport { AudienceRowActionsMenu } from '@/components/dashboard/AudienceRowActionsMenu';\nimport { AudienceIntentBadge } from '@/components/dashboard/atoms/AudienceIntentBadge';\nimport {\n  AUDIENCE_MEMBER_SIDEBAR_WIDTH,\n  AudienceMemberSidebar,\n} from '@/components/dashboard/organisms/AudienceMemberSidebar';\nimport { EmptyState } from '@/components/ui/EmptyState';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { cn } from '@/lib/utils';\nimport {\n  formatCountryLabel,\n  formatLongDate,\n  formatTimeAgo,\n  getDeviceIndicator,\n} from '@/lib/utils/audience';\nimport type { AudienceMember } from '@/types';\n\nexport type AudienceMode = 'members' | 'subscribers';\n\ntype AudienceRow = AudienceMember;\n\ntype MemberSortColumn =\n  | 'lastSeen'\n  | 'visits'\n  | 'intent'\n  | 'type'\n  | 'engagement'\n  | 'createdAt';\n\ntype SubscriberSortColumn = 'email' | 'phone' | 'country' | 'createdAt';\n\ntype MemberColumnKey = (typeof MEMBER_COLUMNS)[number]['key'];\n\ntype SubscriberColumnKey = (typeof SUBSCRIBER_COLUMNS)[number]['key'];\n\ntype ColumnKey = MemberColumnKey | SubscriberColumnKey;\n\nconst MEMBER_COLUMNS = [\n  { key: 'displayName', label: 'User' },\n  { key: 'type', label: 'Type' },\n  { key: 'location', label: 'Location' },\n  { key: 'device', label: 'Device' },\n  { key: 'visits', label: 'Visits' },\n  { key: 'actions', label: 'Actions' },\n  { key: 'lastSeen', label: 'Last seen' },\n] as const;\n\nconst SUBSCRIBER_COLUMNS = [\n  { key: 'email', label: 'Email' },\n  { key: 'phone', label: 'Phone' },\n  { key: 'country', label: 'Country' },\n  { key: 'createdAt', label: 'Signed up' },\n] as const;\n\nasync function copyTextToClipboard(text: string): Promise<boolean> {\n  if (typeof navigator === 'undefined' || !navigator.clipboard?.writeText) {\n    return false;\n  }\n\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction resolveAudienceActionIcon(label: string): string {\n  const normalized = label.trim().toLowerCase();\n  if (normalized.includes('visit')) return 'Eye';\n  if (normalized.includes('view')) return 'Eye';\n  if (normalized.includes('tip')) return 'HandCoins';\n  if (normalized.includes('purchase')) return 'CreditCard';\n  if (normalized.includes('subscribe')) return 'Bell';\n  if (normalized.includes('follow')) return 'UserPlus';\n  if (normalized.includes('click')) return 'MousePointerClick';\n  if (normalized.includes('link')) return 'Link';\n  return 'Sparkles';\n}\n\nexport interface DashboardAudienceTableProps {\n  mode: AudienceMode;\n  rows: AudienceRow[];\n  total: number;\n  page: number;\n  pageSize: number;\n  sort: string;\n  direction: 'asc' | 'desc';\n  onPageChange: (page: number) => void;\n  onPageSizeChange: (pageSize: number) => void;\n  onSortChange: (sort: string) => void;\n  profileUrl?: string;\n}\n\nexport function DashboardAudienceTable({\n  mode,\n  rows,\n  total,\n  page,\n  pageSize,\n  sort,\n  direction,\n  onPageChange,\n  onPageSizeChange,\n  onSortChange,\n  profileUrl,\n}: DashboardAudienceTableProps) {\n  const notifications = useNotifications();\n  const { setTableMeta } = useTableMeta();\n  const tableContainerRef = React.useRef<HTMLDivElement | null>(null);\n  const tbodyRef = React.useRef<HTMLTableSectionElement | null>(null);\n  const [headerElevated, setHeaderElevated] = React.useState(false);\n  const [openMenuRowId, setOpenMenuRowId] = React.useState<string | null>(null);\n  const [selectedMember, setSelectedMember] =\n    React.useState<AudienceRow | null>(null);\n  const [copiedProfileLink, setCopiedProfileLink] = React.useState(false);\n  const copyTimeoutRef = React.useRef<number | null>(null);\n\n  const rowIds = React.useMemo(() => rows.map(row => row.id), [rows]);\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n    clearSelection,\n  } = useRowSelection(rowIds);\n\n  React.useEffect(() => {\n    const container = tableContainerRef.current;\n    if (!container) return;\n\n    const handleScroll = () => {\n      setHeaderElevated(container.scrollTop > 0);\n    };\n\n    handleScroll();\n    container.addEventListener('scroll', handleScroll);\n    return () => container.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  React.useEffect(() => {\n    clearSelection();\n    setSelectedMember(null);\n  }, [mode, page, pageSize, sort, direction, clearSelection]);\n\n  React.useEffect(() => {\n    const toggle = () => {\n      if (rows.length === 0) return;\n      setSelectedMember(current => (current ? null : (rows[0] ?? null)));\n    };\n\n    setTableMeta({\n      rowCount: rows.length,\n      toggle: rows.length > 0 ? toggle : null,\n      rightPanelWidth: selectedMember ? AUDIENCE_MEMBER_SIDEBAR_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [rows, selectedMember, setTableMeta]);\n\n  const totalPages = Math.max(1, Math.ceil(total / pageSize));\n  const activeColumns =\n    mode === 'members' ? MEMBER_COLUMNS : SUBSCRIBER_COLUMNS;\n\n  // Virtualization for table rows\n  // eslint-disable-next-line react-hooks/incompatible-library\n  const rowVirtualizer = useVirtualizer({\n    count: rows.length,\n    getScrollElement: () => tableContainerRef.current,\n    estimateSize: () => 60, // Estimated row height in pixels\n    overscan: 5, // Render 5 extra rows above/below viewport\n  });\n\n  const sortableColumnMap: Partial<\n    Record<ColumnKey, MemberSortColumn | SubscriberSortColumn>\n  > = {\n    visits: 'visits',\n    lastSeen: 'lastSeen',\n    email: 'email',\n    phone: 'phone',\n    country: 'country',\n    createdAt: 'createdAt',\n  };\n\n  const selectedRows = React.useMemo(\n    () => rows.filter(row => selectedIds.has(row.id)),\n    [rows, selectedIds]\n  );\n\n  const copySelectedEmails = async (): Promise<void> => {\n    const emails = selectedRows\n      .map(row => row.email)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (emails.length === 0) {\n      notifications.error('No emails available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(emails.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${emails.length} email(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy emails');\n  };\n\n  const copySelectedPhones = async (): Promise<void> => {\n    const phones = selectedRows\n      .map(row => row.phone)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (phones.length === 0) {\n      notifications.error('No phone numbers available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(phones.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${phones.length} phone number(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy phone numbers');\n  };\n\n  const paginationLabel = () => {\n    if (total === 0) {\n      return mode === 'members'\n        ? 'No audience yet. Share your profile to invite visitors.'\n        : 'No signups yet. Invite fans to tap the bell.';\n    }\n\n    const start = (page - 1) * pageSize + 1;\n    const end = Math.min(page * pageSize, total);\n    return `Showing ${start}–${end} of ${total} readers`;\n  };\n\n  const handleCopyProfileLink = React.useCallback(async () => {\n    if (!profileUrl) return;\n    try {\n      await navigator.clipboard.writeText(profileUrl);\n      notifications.success('Profile link copied');\n      setCopiedProfileLink(true);\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n      copyTimeoutRef.current = window.setTimeout(() => {\n        setCopiedProfileLink(false);\n        copyTimeoutRef.current = null;\n      }, 2000);\n    } catch (error) {\n      console.error('Failed to copy profile link', error);\n      notifications.error('Unable to copy profile link');\n    }\n  }, [notifications, profileUrl]);\n\n  React.useEffect(() => {\n    return () => {\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const emptyStateHeading =\n    mode === 'members' ? 'No audience yet' : 'No signups yet';\n  const emptyStateDescription =\n    mode === 'members'\n      ? 'Share your profile to invite visitors. They will appear here as soon as they stop by.'\n      : 'Invite fans to tap the bell on your profile to receive notifications.';\n  const emptyStateIcon =\n    mode === 'members' ? (\n      <UserGroupIcon className='h-6 w-6' aria-hidden='true' />\n    ) : (\n      <BellAlertIcon className='h-6 w-6' aria-hidden='true' />\n    );\n  const emptyStatePrimaryAction = profileUrl\n    ? {\n        label: copiedProfileLink ? 'Link copied' : 'Copy profile link',\n        onClick: () => {\n          void handleCopyProfileLink();\n        },\n      }\n    : {\n        label: 'Open profile settings',\n        href: '/app/dashboard/profile',\n      };\n  const emptyStateSecondaryAction = {\n    label:\n      mode === 'members' ? 'Learn about audience' : 'Learn about subscribers',\n    href: '/support',\n  };\n\n  return (\n    <div\n      className='flex h-full min-h-0 flex-col'\n      data-testid='dashboard-audience-table'\n    >\n      <div className='shrink-0 border-b border-subtle bg-surface-1/75 backdrop-blur-md'>\n        <div className='flex flex-wrap items-start justify-between gap-4 px-4 py-4 sm:px-6'>\n          <div>\n            <h1 className='text-2xl font-semibold tracking-tight text-primary-token'>\n              Audience CRM\n            </h1>\n            <p className='mt-1 text-sm leading-6 text-secondary-token'>\n              {mode === 'members'\n                ? 'Every visitor, anonymous or identified, lives in this table.'\n                : 'Notification signups from your notification modal.'}\n            </p>\n          </div>\n          <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/60 px-2.5 py-1 text-xs font-medium text-secondary-token'>\n            {total} {total === 1 ? 'person' : 'people'}\n          </span>\n        </div>\n      </div>\n\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <div className='flex h-full min-h-0 flex-col bg-surface-1'>\n          <div className='flex-1 min-h-0 overflow-auto' ref={tableContainerRef}>\n            {rows.length === 0 ? (\n              <EmptyState\n                icon={emptyStateIcon}\n                heading={emptyStateHeading}\n                description={emptyStateDescription}\n                action={emptyStatePrimaryAction}\n                secondaryAction={emptyStateSecondaryAction}\n              />\n            ) : (\n              <table\n                className='w-full min-w-[960px] border-separate border-spacing-0 text-[13px]'\n                aria-label={\n                  mode === 'members'\n                    ? 'Audience members table'\n                    : 'Subscribers table'\n                }\n              >\n                <caption className='sr-only'>\n                  {mode === 'members'\n                    ? 'Table showing all audience members with their visit history, location, and engagement data'\n                    : 'Table showing all subscribers with their contact information and signup dates'}\n                </caption>\n                <thead\n                  className={cn(\n                    'sticky top-0 z-20 bg-surface-1/75 backdrop-blur-md',\n                    headerElevated &&\n                      'shadow-sm shadow-black/10 dark:shadow-black/40'\n                  )}\n                >\n                  <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                    <th className='w-14 border-b border-subtle px-4 py-3 text-left sm:px-6'>\n                      <Checkbox\n                        aria-label='Select all'\n                        checked={headerCheckboxState}\n                        onCheckedChange={() => toggleSelectAll()}\n                      />\n                    </th>\n\n                    {activeColumns.map((column, index) => {\n                      const sortKey =\n                        sortableColumnMap[column.key as ColumnKey];\n                      const isSortable = Boolean(sortKey);\n                      const isActive = isSortable && sortKey === sort;\n                      const activeDirection = isActive ? direction : undefined;\n\n                      return (\n                        <th\n                          key={column.key}\n                          className='border-b border-subtle px-4 py-3 text-left sm:px-6'\n                        >\n                          <div className='flex items-center justify-between gap-2'>\n                            {isSortable ? (\n                              <SortableHeaderButton\n                                label={column.label}\n                                direction={\n                                  activeDirection as 'asc' | 'desc' | undefined\n                                }\n                                onClick={() =>\n                                  onSortChange(sortKey as unknown as string)\n                                }\n                              />\n                            ) : (\n                              <span className='inline-flex items-center font-semibold'>\n                                {column.label}\n                              </span>\n                            )}\n\n                            {index === 0 ? (\n                              <div\n                                className={cn(\n                                  'inline-flex items-center transition-all duration-150',\n                                  selectedCount > 0\n                                    ? 'opacity-100 translate-y-0'\n                                    : 'pointer-events-none opacity-0 -translate-y-0.5'\n                                )}\n                              >\n                                <DropdownMenu>\n                                  <DropdownMenuTrigger asChild>\n                                    <Button\n                                      variant='secondary'\n                                      size='sm'\n                                      className='normal-case'\n                                    >\n                                      Bulk actions\n                                    </Button>\n                                  </DropdownMenuTrigger>\n                                  <DropdownMenuContent align='end'>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedEmails();\n                                      }}\n                                    >\n                                      Copy emails\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedPhones();\n                                      }}\n                                    >\n                                      Copy phone numbers\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => clearSelection()}\n                                    >\n                                      Clear selection\n                                    </DropdownMenuItem>\n                                  </DropdownMenuContent>\n                                </DropdownMenu>\n                              </div>\n                            ) : null}\n                          </div>\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n\n                <tbody\n                  ref={tbodyRef}\n                  style={{\n                    position: 'relative',\n                    height: `${rowVirtualizer.getTotalSize()}px`,\n                  }}\n                >\n                  {rowVirtualizer.getVirtualItems().map(virtualRow => {\n                    const row = rows[virtualRow.index];\n                    const deviceIndicator = getDeviceIndicator(row.deviceType);\n                    const isChecked = selectedIds.has(row.id);\n                    const rowNumber =\n                      (page - 1) * pageSize + virtualRow.index + 1;\n\n                    return (\n                      <tr\n                        key={row.id}\n                        data-index={virtualRow.index}\n                        ref={rowVirtualizer.measureElement}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0 hover:bg-surface-2',\n                          selectedMember?.id === row.id && 'bg-surface-2'\n                        )}\n                        style={{\n                          position: 'absolute',\n                          top: 0,\n                          left: 0,\n                          width: '100%',\n                          transform: `translateY(${virtualRow.start}px)`,\n                        }}\n                        onClick={() => setSelectedMember(row)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuRowId(row.id);\n                        }}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle sm:px-6'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${row.displayName || 'row'}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(row.id)}\n                              />\n                            </div>\n                          </div>\n                        </td>\n\n                        {mode === 'members' ? (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='font-semibold'>\n                                {row.displayName || 'Visitor'}\n                              </div>\n                              {row.type !== 'anonymous' ? (\n                                <div className='text-xs text-secondary-token'>\n                                  {row.type === 'email'\n                                    ? (row.email ?? 'Email fan')\n                                    : row.type === 'sms'\n                                      ? (row.phone ?? 'SMS fan')\n                                      : 'Connected fan'}\n                                </div>\n                              ) : null}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/40 px-2 py-0.5 text-[11px] font-medium text-secondary-token capitalize'>\n                                {row.type}\n                              </span>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>{row.locationLabel || 'Unknown'}</span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {deviceIndicator ? (\n                                <Icon\n                                  name={deviceIndicator.iconName}\n                                  className='h-4 w-4 text-secondary-token'\n                                  aria-label={deviceIndicator.label}\n                                  role='img'\n                                />\n                              ) : (\n                                <span className='text-secondary-token'>—</span>\n                              )}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                <span className='font-semibold'>\n                                  {row.visits}\n                                </span>\n                                <AudienceIntentBadge\n                                  intentLevel={row.intentLevel}\n                                />\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                {row.latestActions\n                                  .slice(0, 3)\n                                  .map((action, idx) => {\n                                    const iconName = resolveAudienceActionIcon(\n                                      action.label\n                                    );\n                                    return (\n                                      <span\n                                        key={`${row.id}-${action.label}-${action.platform ?? 'unknown'}-${action.timestamp ?? 'unknown'}-${idx}`}\n                                        className='inline-flex h-7 w-7 items-center justify-center rounded-full border border-subtle bg-surface-2/40 text-tertiary-token'\n                                        title={action.label}\n                                      >\n                                        <Icon\n                                          name={iconName}\n                                          className='h-3.5 w-3.5'\n                                          aria-hidden='true'\n                                        />\n                                        <span className='sr-only'>\n                                          {action.label}\n                                        </span>\n                                      </span>\n                                    );\n                                  })}\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatTimeAgo(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        ) : (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.displayName || 'Contact'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.phone ?? '—'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>\n                                  {row.geoCountry\n                                    ? formatCountryLabel(row.geoCountry)\n                                    : 'Unknown'}\n                                </span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatLongDate(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        )}\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          <div className='sticky bottom-0 z-20 flex flex-wrap items-center justify-between gap-3 border-t border-subtle bg-surface-1/75 px-4 py-2 text-xs text-secondary-token backdrop-blur-md sm:px-6'>\n            <span className='tracking-wide'>{paginationLabel()}</span>\n            <div className='flex items-center gap-3'>\n              <AdminPageSizeSelect\n                initialPageSize={pageSize}\n                onPageSizeChange={onPageSizeChange}\n              />\n              <div className='flex gap-2'>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page <= 1 || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.max(1, page - 1))}\n                >\n                  Previous\n                </Button>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page >= totalPages || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.min(totalPages, page + 1))}\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <AudienceMemberSidebar\n        member={selectedMember}\n        isOpen={Boolean(selectedMember)}\n        onClose={() => setSelectedMember(null)}\n      />\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        {paginationLabel()}\n        {selectedCount > 0 &&\n          `${selectedCount} ${selectedCount === 1 ? 'row' : 'rows'} selected`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noStaticElementInteractions",
      "severity": "warning",
      "description": "Static Elements should not be interactive.",
      "message": [
        {
          "elements": [],
          "content": "Static Elements should not be interactive."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "To add interactivity such as a mouse or key event listener to a static element, give the element an appropriate role value."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardAudienceTable.tsx"
        },
        "span": [27666, 28205],
        "sourceCode": "'use client';\n\nimport { BellAlertIcon, UserGroupIcon } from '@heroicons/react/24/outline';\nimport {\n  Button,\n  Checkbox,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@jovie/ui';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport * as React from 'react';\nimport { useTableMeta } from '@/app/app/dashboard/DashboardLayoutClient';\nimport { AdminPageSizeSelect } from '@/components/admin/table/AdminPageSizeSelect';\nimport { SortableHeaderButton } from '@/components/admin/table/SortableHeaderButton';\nimport { useRowSelection } from '@/components/admin/table/useRowSelection';\nimport { Icon } from '@/components/atoms/Icon';\nimport { AudienceRowActionsMenu } from '@/components/dashboard/AudienceRowActionsMenu';\nimport { AudienceIntentBadge } from '@/components/dashboard/atoms/AudienceIntentBadge';\nimport {\n  AUDIENCE_MEMBER_SIDEBAR_WIDTH,\n  AudienceMemberSidebar,\n} from '@/components/dashboard/organisms/AudienceMemberSidebar';\nimport { EmptyState } from '@/components/ui/EmptyState';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport { cn } from '@/lib/utils';\nimport {\n  formatCountryLabel,\n  formatLongDate,\n  formatTimeAgo,\n  getDeviceIndicator,\n} from '@/lib/utils/audience';\nimport type { AudienceMember } from '@/types';\n\nexport type AudienceMode = 'members' | 'subscribers';\n\ntype AudienceRow = AudienceMember;\n\ntype MemberSortColumn =\n  | 'lastSeen'\n  | 'visits'\n  | 'intent'\n  | 'type'\n  | 'engagement'\n  | 'createdAt';\n\ntype SubscriberSortColumn = 'email' | 'phone' | 'country' | 'createdAt';\n\ntype MemberColumnKey = (typeof MEMBER_COLUMNS)[number]['key'];\n\ntype SubscriberColumnKey = (typeof SUBSCRIBER_COLUMNS)[number]['key'];\n\ntype ColumnKey = MemberColumnKey | SubscriberColumnKey;\n\nconst MEMBER_COLUMNS = [\n  { key: 'displayName', label: 'User' },\n  { key: 'type', label: 'Type' },\n  { key: 'location', label: 'Location' },\n  { key: 'device', label: 'Device' },\n  { key: 'visits', label: 'Visits' },\n  { key: 'actions', label: 'Actions' },\n  { key: 'lastSeen', label: 'Last seen' },\n] as const;\n\nconst SUBSCRIBER_COLUMNS = [\n  { key: 'email', label: 'Email' },\n  { key: 'phone', label: 'Phone' },\n  { key: 'country', label: 'Country' },\n  { key: 'createdAt', label: 'Signed up' },\n] as const;\n\nasync function copyTextToClipboard(text: string): Promise<boolean> {\n  if (typeof navigator === 'undefined' || !navigator.clipboard?.writeText) {\n    return false;\n  }\n\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction resolveAudienceActionIcon(label: string): string {\n  const normalized = label.trim().toLowerCase();\n  if (normalized.includes('visit')) return 'Eye';\n  if (normalized.includes('view')) return 'Eye';\n  if (normalized.includes('tip')) return 'HandCoins';\n  if (normalized.includes('purchase')) return 'CreditCard';\n  if (normalized.includes('subscribe')) return 'Bell';\n  if (normalized.includes('follow')) return 'UserPlus';\n  if (normalized.includes('click')) return 'MousePointerClick';\n  if (normalized.includes('link')) return 'Link';\n  return 'Sparkles';\n}\n\nexport interface DashboardAudienceTableProps {\n  mode: AudienceMode;\n  rows: AudienceRow[];\n  total: number;\n  page: number;\n  pageSize: number;\n  sort: string;\n  direction: 'asc' | 'desc';\n  onPageChange: (page: number) => void;\n  onPageSizeChange: (pageSize: number) => void;\n  onSortChange: (sort: string) => void;\n  profileUrl?: string;\n}\n\nexport function DashboardAudienceTable({\n  mode,\n  rows,\n  total,\n  page,\n  pageSize,\n  sort,\n  direction,\n  onPageChange,\n  onPageSizeChange,\n  onSortChange,\n  profileUrl,\n}: DashboardAudienceTableProps) {\n  const notifications = useNotifications();\n  const { setTableMeta } = useTableMeta();\n  const tableContainerRef = React.useRef<HTMLDivElement | null>(null);\n  const tbodyRef = React.useRef<HTMLTableSectionElement | null>(null);\n  const [headerElevated, setHeaderElevated] = React.useState(false);\n  const [openMenuRowId, setOpenMenuRowId] = React.useState<string | null>(null);\n  const [selectedMember, setSelectedMember] =\n    React.useState<AudienceRow | null>(null);\n  const [copiedProfileLink, setCopiedProfileLink] = React.useState(false);\n  const copyTimeoutRef = React.useRef<number | null>(null);\n\n  const rowIds = React.useMemo(() => rows.map(row => row.id), [rows]);\n  const {\n    selectedIds,\n    selectedCount,\n    headerCheckboxState,\n    toggleSelect,\n    toggleSelectAll,\n    clearSelection,\n  } = useRowSelection(rowIds);\n\n  React.useEffect(() => {\n    const container = tableContainerRef.current;\n    if (!container) return;\n\n    const handleScroll = () => {\n      setHeaderElevated(container.scrollTop > 0);\n    };\n\n    handleScroll();\n    container.addEventListener('scroll', handleScroll);\n    return () => container.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  React.useEffect(() => {\n    clearSelection();\n    setSelectedMember(null);\n  }, [mode, page, pageSize, sort, direction, clearSelection]);\n\n  React.useEffect(() => {\n    const toggle = () => {\n      if (rows.length === 0) return;\n      setSelectedMember(current => (current ? null : (rows[0] ?? null)));\n    };\n\n    setTableMeta({\n      rowCount: rows.length,\n      toggle: rows.length > 0 ? toggle : null,\n      rightPanelWidth: selectedMember ? AUDIENCE_MEMBER_SIDEBAR_WIDTH : 0,\n    });\n\n    return () => {\n      setTableMeta({ rowCount: null, toggle: null, rightPanelWidth: null });\n    };\n  }, [rows, selectedMember, setTableMeta]);\n\n  const totalPages = Math.max(1, Math.ceil(total / pageSize));\n  const activeColumns =\n    mode === 'members' ? MEMBER_COLUMNS : SUBSCRIBER_COLUMNS;\n\n  // Virtualization for table rows\n  // eslint-disable-next-line react-hooks/incompatible-library\n  const rowVirtualizer = useVirtualizer({\n    count: rows.length,\n    getScrollElement: () => tableContainerRef.current,\n    estimateSize: () => 60, // Estimated row height in pixels\n    overscan: 5, // Render 5 extra rows above/below viewport\n  });\n\n  const sortableColumnMap: Partial<\n    Record<ColumnKey, MemberSortColumn | SubscriberSortColumn>\n  > = {\n    visits: 'visits',\n    lastSeen: 'lastSeen',\n    email: 'email',\n    phone: 'phone',\n    country: 'country',\n    createdAt: 'createdAt',\n  };\n\n  const selectedRows = React.useMemo(\n    () => rows.filter(row => selectedIds.has(row.id)),\n    [rows, selectedIds]\n  );\n\n  const copySelectedEmails = async (): Promise<void> => {\n    const emails = selectedRows\n      .map(row => row.email)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (emails.length === 0) {\n      notifications.error('No emails available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(emails.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${emails.length} email(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy emails');\n  };\n\n  const copySelectedPhones = async (): Promise<void> => {\n    const phones = selectedRows\n      .map(row => row.phone)\n      .filter(\n        (value): value is string =>\n          typeof value === 'string' && value.length > 0\n      );\n\n    if (phones.length === 0) {\n      notifications.error('No phone numbers available for selected rows');\n      return;\n    }\n\n    const success = await copyTextToClipboard(phones.join('\\n'));\n    if (success) {\n      notifications.success(`Copied ${phones.length} phone number(s)`);\n      return;\n    }\n\n    notifications.error('Failed to copy phone numbers');\n  };\n\n  const paginationLabel = () => {\n    if (total === 0) {\n      return mode === 'members'\n        ? 'No audience yet. Share your profile to invite visitors.'\n        : 'No signups yet. Invite fans to tap the bell.';\n    }\n\n    const start = (page - 1) * pageSize + 1;\n    const end = Math.min(page * pageSize, total);\n    return `Showing ${start}–${end} of ${total} readers`;\n  };\n\n  const handleCopyProfileLink = React.useCallback(async () => {\n    if (!profileUrl) return;\n    try {\n      await navigator.clipboard.writeText(profileUrl);\n      notifications.success('Profile link copied');\n      setCopiedProfileLink(true);\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n      copyTimeoutRef.current = window.setTimeout(() => {\n        setCopiedProfileLink(false);\n        copyTimeoutRef.current = null;\n      }, 2000);\n    } catch (error) {\n      console.error('Failed to copy profile link', error);\n      notifications.error('Unable to copy profile link');\n    }\n  }, [notifications, profileUrl]);\n\n  React.useEffect(() => {\n    return () => {\n      if (copyTimeoutRef.current) {\n        window.clearTimeout(copyTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const emptyStateHeading =\n    mode === 'members' ? 'No audience yet' : 'No signups yet';\n  const emptyStateDescription =\n    mode === 'members'\n      ? 'Share your profile to invite visitors. They will appear here as soon as they stop by.'\n      : 'Invite fans to tap the bell on your profile to receive notifications.';\n  const emptyStateIcon =\n    mode === 'members' ? (\n      <UserGroupIcon className='h-6 w-6' aria-hidden='true' />\n    ) : (\n      <BellAlertIcon className='h-6 w-6' aria-hidden='true' />\n    );\n  const emptyStatePrimaryAction = profileUrl\n    ? {\n        label: copiedProfileLink ? 'Link copied' : 'Copy profile link',\n        onClick: () => {\n          void handleCopyProfileLink();\n        },\n      }\n    : {\n        label: 'Open profile settings',\n        href: '/app/dashboard/profile',\n      };\n  const emptyStateSecondaryAction = {\n    label:\n      mode === 'members' ? 'Learn about audience' : 'Learn about subscribers',\n    href: '/support',\n  };\n\n  return (\n    <div\n      className='flex h-full min-h-0 flex-col'\n      data-testid='dashboard-audience-table'\n    >\n      <div className='shrink-0 border-b border-subtle bg-surface-1/75 backdrop-blur-md'>\n        <div className='flex flex-wrap items-start justify-between gap-4 px-4 py-4 sm:px-6'>\n          <div>\n            <h1 className='text-2xl font-semibold tracking-tight text-primary-token'>\n              Audience CRM\n            </h1>\n            <p className='mt-1 text-sm leading-6 text-secondary-token'>\n              {mode === 'members'\n                ? 'Every visitor, anonymous or identified, lives in this table.'\n                : 'Notification signups from your notification modal.'}\n            </p>\n          </div>\n          <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/60 px-2.5 py-1 text-xs font-medium text-secondary-token'>\n            {total} {total === 1 ? 'person' : 'people'}\n          </span>\n        </div>\n      </div>\n\n      <div className='flex-1 min-h-0 overflow-hidden'>\n        <div className='flex h-full min-h-0 flex-col bg-surface-1'>\n          <div className='flex-1 min-h-0 overflow-auto' ref={tableContainerRef}>\n            {rows.length === 0 ? (\n              <EmptyState\n                icon={emptyStateIcon}\n                heading={emptyStateHeading}\n                description={emptyStateDescription}\n                action={emptyStatePrimaryAction}\n                secondaryAction={emptyStateSecondaryAction}\n              />\n            ) : (\n              <table\n                className='w-full min-w-[960px] border-separate border-spacing-0 text-[13px]'\n                aria-label={\n                  mode === 'members'\n                    ? 'Audience members table'\n                    : 'Subscribers table'\n                }\n              >\n                <caption className='sr-only'>\n                  {mode === 'members'\n                    ? 'Table showing all audience members with their visit history, location, and engagement data'\n                    : 'Table showing all subscribers with their contact information and signup dates'}\n                </caption>\n                <thead\n                  className={cn(\n                    'sticky top-0 z-20 bg-surface-1/75 backdrop-blur-md',\n                    headerElevated &&\n                      'shadow-sm shadow-black/10 dark:shadow-black/40'\n                  )}\n                >\n                  <tr className='text-xs uppercase tracking-wide text-tertiary-token'>\n                    <th className='w-14 border-b border-subtle px-4 py-3 text-left sm:px-6'>\n                      <Checkbox\n                        aria-label='Select all'\n                        checked={headerCheckboxState}\n                        onCheckedChange={() => toggleSelectAll()}\n                      />\n                    </th>\n\n                    {activeColumns.map((column, index) => {\n                      const sortKey =\n                        sortableColumnMap[column.key as ColumnKey];\n                      const isSortable = Boolean(sortKey);\n                      const isActive = isSortable && sortKey === sort;\n                      const activeDirection = isActive ? direction : undefined;\n\n                      return (\n                        <th\n                          key={column.key}\n                          className='border-b border-subtle px-4 py-3 text-left sm:px-6'\n                        >\n                          <div className='flex items-center justify-between gap-2'>\n                            {isSortable ? (\n                              <SortableHeaderButton\n                                label={column.label}\n                                direction={\n                                  activeDirection as 'asc' | 'desc' | undefined\n                                }\n                                onClick={() =>\n                                  onSortChange(sortKey as unknown as string)\n                                }\n                              />\n                            ) : (\n                              <span className='inline-flex items-center font-semibold'>\n                                {column.label}\n                              </span>\n                            )}\n\n                            {index === 0 ? (\n                              <div\n                                className={cn(\n                                  'inline-flex items-center transition-all duration-150',\n                                  selectedCount > 0\n                                    ? 'opacity-100 translate-y-0'\n                                    : 'pointer-events-none opacity-0 -translate-y-0.5'\n                                )}\n                              >\n                                <DropdownMenu>\n                                  <DropdownMenuTrigger asChild>\n                                    <Button\n                                      variant='secondary'\n                                      size='sm'\n                                      className='normal-case'\n                                    >\n                                      Bulk actions\n                                    </Button>\n                                  </DropdownMenuTrigger>\n                                  <DropdownMenuContent align='end'>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedEmails();\n                                      }}\n                                    >\n                                      Copy emails\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => {\n                                        void copySelectedPhones();\n                                      }}\n                                    >\n                                      Copy phone numbers\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                      disabled={selectedCount === 0}\n                                      onClick={() => clearSelection()}\n                                    >\n                                      Clear selection\n                                    </DropdownMenuItem>\n                                  </DropdownMenuContent>\n                                </DropdownMenu>\n                              </div>\n                            ) : null}\n                          </div>\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n\n                <tbody\n                  ref={tbodyRef}\n                  style={{\n                    position: 'relative',\n                    height: `${rowVirtualizer.getTotalSize()}px`,\n                  }}\n                >\n                  {rowVirtualizer.getVirtualItems().map(virtualRow => {\n                    const row = rows[virtualRow.index];\n                    const deviceIndicator = getDeviceIndicator(row.deviceType);\n                    const isChecked = selectedIds.has(row.id);\n                    const rowNumber =\n                      (page - 1) * pageSize + virtualRow.index + 1;\n\n                    return (\n                      <tr\n                        key={row.id}\n                        data-index={virtualRow.index}\n                        ref={rowVirtualizer.measureElement}\n                        className={cn(\n                          'group cursor-pointer border-b border-subtle transition-colors duration-200 last:border-b-0 hover:bg-surface-2',\n                          selectedMember?.id === row.id && 'bg-surface-2'\n                        )}\n                        style={{\n                          position: 'absolute',\n                          top: 0,\n                          left: 0,\n                          width: '100%',\n                          transform: `translateY(${virtualRow.start}px)`,\n                        }}\n                        onClick={() => setSelectedMember(row)}\n                        onContextMenu={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          setOpenMenuRowId(row.id);\n                        }}\n                      >\n                        <td className='w-14 px-4 py-3 align-middle sm:px-6'>\n                          <div\n                            className='relative flex h-7 w-7 items-center justify-center'\n                            onClick={event => event.stopPropagation()}\n                          >\n                            <span\n                              className={cn(\n                                'text-[11px] tabular-nums text-tertiary-token select-none transition-opacity',\n                                isChecked\n                                  ? 'opacity-0'\n                                  : 'opacity-100 group-hover:opacity-0'\n                              )}\n                              aria-hidden='true'\n                            >\n                              {rowNumber}\n                            </span>\n                            <div\n                              className={cn(\n                                'absolute inset-0 transition-opacity',\n                                isChecked\n                                  ? 'opacity-100'\n                                  : 'opacity-0 group-hover:opacity-100'\n                              )}\n                            >\n                              <Checkbox\n                                aria-label={`Select ${row.displayName || 'row'}`}\n                                checked={isChecked}\n                                onCheckedChange={() => toggleSelect(row.id)}\n                              />\n                            </div>\n                          </div>\n                        </td>\n\n                        {mode === 'members' ? (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='font-semibold'>\n                                {row.displayName || 'Visitor'}\n                              </div>\n                              {row.type !== 'anonymous' ? (\n                                <div className='text-xs text-secondary-token'>\n                                  {row.type === 'email'\n                                    ? (row.email ?? 'Email fan')\n                                    : row.type === 'sms'\n                                      ? (row.phone ?? 'SMS fan')\n                                      : 'Connected fan'}\n                                </div>\n                              ) : null}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <span className='inline-flex items-center rounded-full border border-subtle bg-surface-2/40 px-2 py-0.5 text-[11px] font-medium text-secondary-token capitalize'>\n                                {row.type}\n                              </span>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>{row.locationLabel || 'Unknown'}</span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {deviceIndicator ? (\n                                <Icon\n                                  name={deviceIndicator.iconName}\n                                  className='h-4 w-4 text-secondary-token'\n                                  aria-label={deviceIndicator.label}\n                                  role='img'\n                                />\n                              ) : (\n                                <span className='text-secondary-token'>—</span>\n                              )}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                <span className='font-semibold'>\n                                  {row.visits}\n                                </span>\n                                <AudienceIntentBadge\n                                  intentLevel={row.intentLevel}\n                                />\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center gap-2'>\n                                {row.latestActions\n                                  .slice(0, 3)\n                                  .map((action, idx) => {\n                                    const iconName = resolveAudienceActionIcon(\n                                      action.label\n                                    );\n                                    return (\n                                      <span\n                                        key={`${row.id}-${action.label}-${action.platform ?? 'unknown'}-${action.timestamp ?? 'unknown'}-${idx}`}\n                                        className='inline-flex h-7 w-7 items-center justify-center rounded-full border border-subtle bg-surface-2/40 text-tertiary-token'\n                                        title={action.label}\n                                      >\n                                        <Icon\n                                          name={iconName}\n                                          className='h-3.5 w-3.5'\n                                          aria-hidden='true'\n                                        />\n                                        <span className='sr-only'>\n                                          {action.label}\n                                        </span>\n                                      </span>\n                                    );\n                                  })}\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatTimeAgo(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        ) : (\n                          <>\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.displayName || 'Contact'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              {row.phone ?? '—'}\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='inline-flex items-center gap-2 text-secondary-token'>\n                                <Icon\n                                  name='MapPin'\n                                  className='h-4 w-4 text-tertiary-token'\n                                  aria-hidden='true'\n                                />\n                                <span>\n                                  {row.geoCountry\n                                    ? formatCountryLabel(row.geoCountry)\n                                    : 'Unknown'}\n                                </span>\n                              </div>\n                            </td>\n\n                            <td className='px-4 py-3 align-middle text-sm text-primary-token sm:px-6'>\n                              <div className='flex items-center justify-between gap-2'>\n                                <span>{formatLongDate(row.lastSeenAt)}</span>\n                                <div\n                                  className={cn(\n                                    'opacity-0 pointer-events-none transition-opacity group-hover:opacity-100 group-hover:pointer-events-auto focus-within:opacity-100 focus-within:pointer-events-auto',\n                                    openMenuRowId === row.id &&\n                                      'opacity-100 pointer-events-auto'\n                                  )}\n                                  onClick={event => event.stopPropagation()}\n                                >\n                                  <AudienceRowActionsMenu\n                                    row={row}\n                                    open={openMenuRowId === row.id}\n                                    onOpenChange={open =>\n                                      setOpenMenuRowId(open ? row.id : null)\n                                    }\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                          </>\n                        )}\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          <div className='sticky bottom-0 z-20 flex flex-wrap items-center justify-between gap-3 border-t border-subtle bg-surface-1/75 px-4 py-2 text-xs text-secondary-token backdrop-blur-md sm:px-6'>\n            <span className='tracking-wide'>{paginationLabel()}</span>\n            <div className='flex items-center gap-3'>\n              <AdminPageSizeSelect\n                initialPageSize={pageSize}\n                onPageSizeChange={onPageSizeChange}\n              />\n              <div className='flex gap-2'>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page <= 1 || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.max(1, page - 1))}\n                >\n                  Previous\n                </Button>\n                <Button\n                  variant='ghost'\n                  size='sm'\n                  disabled={page >= totalPages || total === 0}\n                  className='rounded-md border border-subtle bg-transparent text-secondary-token hover:bg-surface-2 hover:text-primary-token'\n                  onClick={() => onPageChange(Math.min(totalPages, page + 1))}\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <AudienceMemberSidebar\n        member={selectedMember}\n        isOpen={Boolean(selectedMember)}\n        onClose={() => setSelectedMember(null)}\n      />\n      <div className='sr-only' aria-live='polite' aria-atomic='true'>\n        {paginationLabel()}\n        {selectedCount > 0 &&\n          `${selectedCount} ${selectedCount === 1 ? 'row' : 'rows'} selected`}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardOverview.tsx"
        },
        "span": [5437, 5595],
        "sourceCode": "import { Button } from '@jovie/ui';\nimport Link from 'next/link';\nimport { Icon } from '@/components/atoms/Icon';\nimport { CopyToClipboardButton } from '@/components/dashboard/atoms/CopyToClipboardButton';\nimport { SetupTaskItem } from '@/components/dashboard/molecules/SetupTaskItem';\nimport { DashboardOverviewControlsProvider } from '@/components/dashboard/organisms/DashboardOverviewControlsProvider';\nimport { DashboardOverviewHeaderToolbarClient } from '@/components/dashboard/organisms/DashboardOverviewHeaderToolbarClient';\nimport { DashboardOverviewMetricsClient } from '@/components/dashboard/organisms/DashboardOverviewMetricsClient';\nimport { StarterEmptyState } from '@/components/feedback/StarterEmptyState';\nimport { APP_URL } from '@/constants/app';\nimport type { Artist } from '@/types/db';\n\ninterface DashboardOverviewProps {\n  artist: Artist | null;\n  hasSocialLinks: boolean;\n  hasMusicLinks?: boolean;\n}\n\nexport function DashboardOverview({\n  artist,\n  hasSocialLinks,\n  hasMusicLinks = false,\n}: DashboardOverviewProps) {\n  if (!artist) {\n    return (\n      <StarterEmptyState\n        title='We could not load your profile'\n        description='The dashboard data did not include your Jovie profile. Refresh or reopen onboarding to finish setup.'\n        primaryAction={{ label: 'Refresh dashboard', href: '/app/dashboard' }}\n        secondaryAction={{ label: 'Restart onboarding', href: '/onboarding' }}\n        testId='dashboard-missing-profile'\n      />\n    );\n  }\n\n  const isHandleClaimed = Boolean(artist.owner_user_id);\n  const musicLinkFromProfile = Boolean(\n    artist.spotify_url ||\n      artist.apple_music_url ||\n      artist.youtube_url ||\n      // Fallback for camelCase fields in some test fixtures\n      (artist as { spotifyUrl?: string }).spotifyUrl ||\n      (artist as { appleMusicUrl?: string }).appleMusicUrl ||\n      (artist as { youtubeUrl?: string }).youtubeUrl\n  );\n  const hasMusicLink = hasMusicLinks || musicLinkFromProfile;\n  const allTasksComplete = isHandleClaimed && hasMusicLink && hasSocialLinks;\n  const totalSteps = 3;\n  const completedCount = [isHandleClaimed, hasMusicLink, hasSocialLinks].filter(\n    Boolean\n  ).length;\n\n  const profileUrl = (() => {\n    if (!artist.handle) return undefined;\n    const base = APP_URL.replace(/\\/+$/, '');\n    const path = artist.handle.replace(/^\\/+/, '');\n    return `${base}/${path}`;\n  })();\n\n  const greetingName = (() => {\n    const raw = (artist.name || 'Artist').trim();\n    const first = raw.split(/\\s+/)[0];\n    return first || 'Artist';\n  })();\n\n  const header = (\n    <header className='flex flex-col gap-0.5 rounded-2xl bg-transparent p-3'>\n      <div className='grid grid-cols-1 gap-0.5 sm:grid-cols-[minmax(0,1fr)_auto] sm:items-start sm:gap-x-4'>\n        <div className='min-w-0'>\n          <div className='flex flex-wrap items-center gap-x-1.5 gap-y-0.5'>\n            <h1 className='text-xl font-semibold text-primary-token'>\n              Welcome back, {greetingName}\n            </h1>\n            <div className='flex items-center gap-1'>\n              <Button\n                asChild\n                variant='secondary'\n                size='sm'\n                className='h-11 w-11 rounded-full p-0'\n              >\n                <Link\n                  href={`/${artist.handle}`}\n                  aria-label='View profile'\n                  target='_blank'\n                  rel='noopener noreferrer'\n                >\n                  <Icon\n                    name='ArrowUpRight'\n                    className='h-5 w-5'\n                    aria-hidden='true'\n                  />\n                  <span className='sr-only'>View profile</span>\n                </Link>\n              </Button>\n              <CopyToClipboardButton\n                relativePath={`/${artist.handle}`}\n                idleLabel='Copy URL'\n                iconName='Copy'\n                className='h-11 w-11 rounded-full border border-subtle p-0 bg-transparent text-primary-token hover:bg-surface-2'\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className='flex shrink-0 items-center justify-end sm:self-start'>\n          <DashboardOverviewHeaderToolbarClient />\n        </div>\n\n        <p className='text-sm text-secondary-token sm:col-span-2'>\n          Keep your profile polished and ready to share.\n        </p>\n      </div>\n    </header>\n  );\n\n  if (!allTasksComplete) {\n    return (\n      <DashboardOverviewControlsProvider>\n        <div className='space-y-2' data-testid='dashboard-overview'>\n          {header}\n\n          <DashboardOverviewMetricsClient\n            profileId={artist.id}\n            profileUrl={profileUrl}\n          />\n\n          <section className='rounded-2xl border-0 bg-transparent p-1'>\n            <div className='space-y-2 rounded-2xl bg-surface-1/40 p-3 shadow-none'>\n              <div className='flex items-center justify-between gap-2.5'>\n                <div className='space-y-0.5'>\n                  <p className='text-xs uppercase tracking-[0.18em] text-secondary-token'>\n                    Complete your setup\n                  </p>\n                  <h3 className='text-lg font-semibold text-primary-token'>\n                    Finish the essentials\n                  </h3>\n                  <p className='text-sm text-secondary-token'>\n                    {completedCount}/{totalSteps} complete\n                  </p>\n                </div>\n                <p\n                  className='sr-only'\n                  aria-label={`Setup progress: ${completedCount} of ${totalSteps} steps completed`}\n                >\n                  {completedCount} of {totalSteps} tasks done\n                </p>\n              </div>\n\n              <ol className='grid list-none grid-cols-1 gap-2.5 pl-0 md:grid-cols-3'>\n                <SetupTaskItem\n                  index={1}\n                  title='Claim your handle'\n                  complete={isHandleClaimed}\n                  completeLabel='Handle claimed'\n                  incompleteLabel='Secure your unique profile URL'\n                  action={\n                    <Link\n                      href='/app/settings'\n                      aria-label='Claim handle'\n                      className='rounded-full px-3 text-[13px] font-semibold text-primary-token underline-offset-2 hover:underline'\n                    >\n                      Claim handle\n                    </Link>\n                  }\n                />\n\n                <SetupTaskItem\n                  index={2}\n                  title='Add a music link'\n                  complete={hasMusicLink}\n                  completeLabel='Music link added'\n                  incompleteLabel='Connect Spotify, Apple Music, or YouTube'\n                  action={\n                    <Link\n                      href='/app/dashboard/profile'\n                      aria-label='Add music link'\n                      className='rounded-full px-3 text-[13px] font-semibold text-primary-token underline-offset-2 hover:underline'\n                    >\n                      Add music link\n                    </Link>\n                  }\n                />\n\n                <SetupTaskItem\n                  index={3}\n                  title='Add social links'\n                  complete={hasSocialLinks}\n                  completeLabel='Social links added'\n                  incompleteLabel='Connect Instagram, TikTok, Twitter, etc.'\n                  action={\n                    <Link\n                      href='/app/dashboard/profile'\n                      aria-label='Add social links'\n                      className='rounded-full px-3 text-[13px] font-semibold text-primary-token underline-offset-2 hover:underline'\n                    >\n                      Add social links\n                    </Link>\n                  }\n                />\n              </ol>\n            </div>\n          </section>\n        </div>\n      </DashboardOverviewControlsProvider>\n    );\n  }\n\n  return (\n    <DashboardOverviewControlsProvider>\n      <div className='space-y-2' data-testid='dashboard-overview'>\n        {header}\n\n        <DashboardOverviewMetricsClient\n          profileId={artist.id}\n          profileUrl={profileUrl}\n          showActivity\n        />\n      </div>\n    </DashboardOverviewControlsProvider>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<fieldset>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<fieldset>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardOverviewToolbar.tsx"
        },
        "span": [605, 617],
        "sourceCode": "'use client';\n\nimport { useMemo } from 'react';\n\nexport interface DashboardOverviewToolbarProps {\n  range: '7d' | '30d' | '90d';\n  onRangeChange: (next: '7d' | '30d' | '90d') => void;\n  onRefresh: () => void;\n}\n\nexport function DashboardOverviewToolbar({\n  range,\n  onRangeChange,\n  onRefresh,\n}: DashboardOverviewToolbarProps): JSX.Element {\n  const rangeLabel = useMemo(() => {\n    if (range === '7d') return 'Last 7 days';\n    if (range === '30d') return 'Last 30 days';\n    return 'Last 90 days';\n  }, [range]);\n\n  return (\n    <div className='flex items-center justify-end gap-2'>\n      <div\n        role='group'\n        aria-label='Dashboard window'\n        className='inline-flex rounded-full border border-subtle bg-surface-1/40 p-0.5 ring-1 ring-inset ring-white/5 dark:ring-white/10 backdrop-blur-sm'\n      >\n        {(['7d', '30d', '90d'] as const).map(value => {\n          const active = range === value;\n          return (\n            <button\n              key={value}\n              type='button'\n              onClick={() => onRangeChange(value)}\n              aria-pressed={active}\n              className={\n                active\n                  ? 'h-6 rounded-full bg-surface-1 px-2.5 text-xs font-semibold text-primary-token shadow-sm shadow-black/10 dark:shadow-black/40'\n                  : 'h-6 rounded-full px-2.5 text-xs font-medium text-secondary-token transition-colors hover:bg-surface-2/40 hover:text-primary-token'\n              }\n            >\n              {value}\n            </button>\n          );\n        })}\n      </div>\n\n      <button\n        type='button'\n        aria-label='Refresh dashboard'\n        onClick={onRefresh}\n        className='inline-flex h-7 items-center justify-center rounded-full border border-subtle bg-surface-1/40 px-2.5 text-xs font-semibold text-primary-token ring-1 ring-inset ring-white/5 transition-colors hover:bg-surface-2/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-2 focus-visible:ring-offset-bg-base dark:ring-white/10'\n      >\n        <svg\n          className='h-3.5 w-3.5'\n          fill='none'\n          stroke='currentColor'\n          viewBox='0 0 24 24'\n          aria-hidden='true'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth='2'\n            d='M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15'\n          />\n        </svg>\n      </button>\n\n      {rangeLabel ? (\n        <p className='hidden min-w-26 whitespace-nowrap text-right text-xs text-tertiary-token sm:block'>\n          {rangeLabel}\n        </p>\n      ) : null}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardPreview.tsx"
        },
        "span": [4929, 5067],
        "sourceCode": "'use client';\n\nimport { useSession } from '@clerk/nextjs';\nimport Link from 'next/link';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { CopyToClipboardButton } from '@/components/dashboard/atoms/CopyToClipboardButton';\nimport { StatusBarMock } from '@/components/dashboard/molecules/StatusBarMock';\nimport { StaticArtistPage } from '@/components/profile/StaticArtistPage';\nimport { PROFILE_URL } from '@/constants/domains';\nimport type { Artist, LegacySocialLink, SocialLink } from '@/types/db';\n\ninterface DashboardPreviewProps {\n  artist: Artist;\n  socialLinksOverride?: LegacySocialLink[];\n}\n\nexport const DashboardPreview: React.FC<DashboardPreviewProps> = ({\n  artist,\n  socialLinksOverride,\n}) => {\n  const { session } = useSession();\n  const [socialLinks, setSocialLinks] = useState<SocialLink[]>([]);\n\n  // Initialize links from database\n  useEffect(() => {\n    if (socialLinksOverride) return; // use override instead of fetching\n\n    const fetchLinks = async () => {\n      if (!session || !artist.id) return;\n\n      try {\n        const res = await fetch(\n          `/api/dashboard/social-links?profileId=${encodeURIComponent(artist.id)}`,\n          { cache: 'no-store' }\n        );\n        if (!res.ok) throw new Error(`Failed to fetch links (${res.status})`);\n        const json: { links: SocialLink[] } = await res.json();\n\n        setSocialLinks(json.links || []);\n      } catch (error) {\n        console.error('Error fetching links:', error);\n      }\n    };\n\n    fetchLinks();\n  }, [session, artist.id, socialLinksOverride]);\n\n  // Convert social links to LegacySocialLink format for preview\n  const previewSocialLinks = useMemo((): LegacySocialLink[] => {\n    if (socialLinksOverride) return socialLinksOverride;\n    return socialLinks\n      .filter(\n        link =>\n          link.platform !== 'spotify' &&\n          link.platform !== 'apple_music' &&\n          link.platform !== 'youtube_music' &&\n          link.platform !== 'soundcloud' &&\n          link.platform !== 'bandcamp' &&\n          link.platform !== 'tidal' &&\n          link.platform !== 'deezer'\n      )\n      .map(link => ({\n        id: link.id,\n        artist_id: artist.id,\n        platform: link.platform,\n        url: link.url,\n        clicks: 0,\n        created_at: new Date().toISOString(),\n      }));\n  }, [socialLinks, socialLinksOverride, artist.id]);\n\n  // Clipboard handled by CopyToClipboardButton atom\n\n  return (\n    <div data-testid='dashboard-preview'>\n      <div className='mb-4'>\n        <h3 className='text-lg font-medium text-primary-token'>Live Preview</h3>\n        <p className='text-sm text-secondary-token mt-1'>\n          This is how your profile will appear to visitors\n        </p>\n      </div>\n\n      {/* Mobile Frame Preview */}\n      <div className='flex justify-center'>\n        <div className='relative w-[280px] rounded-4xl bg-surface-2 p-2 shadow-2xl ring-1 ring-subtle transform transition-transform hover:scale-[1.02] duration-300'>\n          {/* Top notch */}\n          <div className='absolute w-20 h-3 bg-surface-2 rounded-b-lg z-10 left-1/2 transform -translate-x-1/2 top-2'></div>\n\n          <div\n            className='bg-surface-1 rounded-3xl overflow-hidden relative'\n            style={{ height: '500px' }}\n          >\n            {/* Status Bar Mockup */}\n            <StatusBarMock />\n\n            {/* Profile Preview - Better scaling and positioning */}\n            <div\n              className='flex-1 bg-surface-1 relative overflow-hidden'\n              style={{ height: 'calc(100% - 28px)' }}\n            >\n              <div className='w-full h-full overflow-y-auto'>\n                <StaticArtistPage\n                  mode='default'\n                  artist={artist}\n                  socialLinks={previewSocialLinks}\n                  subtitle=''\n                  showTipButton={false}\n                  showBackButton={false}\n                  contacts={[]}\n                  showFooter={false}\n                  autoOpenCapture={false}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Profile URL and Actions */}\n      <div className='pt-4 text-center space-y-3'>\n        <div className='flex items-center justify-center gap-2'>\n          <code className='text-xs bg-surface-2 px-2 py-1 rounded text-secondary-token'>\n            {PROFILE_URL}/{artist.handle || 'username'}\n          </code>\n          <CopyToClipboardButton\n            relativePath={`/${artist.handle || 'username'}`}\n            idleLabel='Copy'\n            successLabel='Copied!'\n            errorLabel='Failed to copy'\n          />\n        </div>\n        <Link\n          href={`/${artist.handle}`}\n          target='_blank'\n          rel='noopener noreferrer'\n          className='inline-flex items-center gap-1.5 text-sm font-medium text-accent hover:text-accent/80 transition-colors'\n        >\n          View Profile\n          <svg\n            className='w-4 h-4'\n            fill='none'\n            stroke='currentColor'\n            viewBox='0 0 24 24'\n          >\n            <path\n              strokeLinecap='round'\n              strokeLinejoin='round'\n              strokeWidth={2}\n              d='M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14'\n            />\n          </svg>\n        </Link>\n      </div>\n    </div>\n  );\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardThemeToggle.tsx"
        },
        "span": [2323, 2425],
        "sourceCode": "'use client';\n\nimport { Tooltip, TooltipContent, TooltipTrigger } from '@jovie/ui';\nimport { useTheme } from 'next-themes';\nimport { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface DashboardThemeToggleProps {\n  onThemeChange?: (theme: 'light' | 'dark' | 'system') => void;\n  onThemeSave?: (theme: 'light' | 'dark' | 'system') => Promise<void>;\n  showSystemOption?: boolean;\n  variant?: 'default' | 'compact';\n}\n\nexport function DashboardThemeToggle({\n  onThemeChange,\n  onThemeSave,\n  showSystemOption = false,\n  variant = 'default',\n}: DashboardThemeToggleProps) {\n  const [mounted, setMounted] = useState(false);\n  const [isUpdating, setIsUpdating] = useState(false);\n  const { theme, setTheme, resolvedTheme } = useTheme();\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) {\n    return showSystemOption ? (\n      <div className='space-y-3'>\n        <div className='animate-pulse motion-reduce:animate-none space-y-3'>\n          <div className='h-4 bg-surface-hover-token rounded w-24'></div>\n          <div className='h-8 bg-surface-hover-token rounded'></div>\n        </div>\n      </div>\n    ) : (\n      <div className='flex items-center space-x-3'>\n        <span className='text-sm text-secondary-token'>Light</span>\n        <div className='relative inline-flex h-6 w-11 shrink-0 cursor-not-allowed rounded-full border border-border bg-surface-hover-token p-0.5 transition-colors duration-200 ease-in-out'>\n          <span className='translate-x-0 inline-block h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out'></span>\n        </div>\n        <span className='text-sm text-secondary-token'>Dark</span>\n      </div>\n    );\n  }\n\n  const handleThemeChange = async (newTheme: 'light' | 'dark' | 'system') => {\n    setIsUpdating(true);\n    setTheme(newTheme);\n\n    try {\n      // Call optional save handler (extracted from component)\n      if (onThemeSave) {\n        await onThemeSave(newTheme);\n      }\n\n      onThemeChange?.(newTheme);\n    } catch (error) {\n      console.error('Error saving theme preference:', error);\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  if (showSystemOption) {\n    // Full theme selector with system option (for settings page)\n    return (\n      <div className='space-y-3'>\n        <label className='text-sm font-medium text-primary-token'>\n          Theme Preference\n        </label>\n        <div className='grid grid-cols-3 gap-2'>\n          {[\n            { value: 'light', label: 'Light', icon: '☀' },\n            { value: 'dark', label: 'Dark', icon: '🌙' },\n            { value: 'system', label: 'System', icon: '💻' },\n          ].map(option => (\n            <button\n              key={option.value}\n              onClick={() =>\n                handleThemeChange(option.value as 'light' | 'dark' | 'system')\n              }\n              disabled={isUpdating}\n              className={cn(\n                'flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all duration-200',\n                theme === option.value\n                  ? 'border-accent bg-accent/10 text-primary-token'\n                  : 'border-border hover:bg-surface-hover-token text-secondary-token',\n                'disabled:opacity-50 disabled:cursor-not-allowed'\n              )}\n            >\n              <span className='text-lg mb-1'>{option.icon}</span>\n              <span className='text-xs font-medium'>{option.label}</span>\n              {theme === option.value && option.value === 'system' && (\n                <span className='text-xs text-secondary-token mt-1'>\n                  ({resolvedTheme})\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n        <p className='text-xs text-secondary-token'>\n          Choose how the interface appears. System follows your device settings.\n        </p>\n      </div>\n    );\n  }\n\n  // Simple toggle (for sidebar)\n  const isDark = resolvedTheme === 'dark';\n\n  if (variant === 'compact') {\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <button\n            type='button'\n            disabled={isUpdating}\n            onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n            className={cn(\n              'flex h-8 w-8 items-center justify-center rounded-md border border-subtle bg-surface-1 text-secondary-token hover:bg-surface-2 hover:text-primary-token transition-colors duration-150',\n              isUpdating && 'opacity-70'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </button>\n        </TooltipTrigger>\n        <TooltipContent side='right'>\n          {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n        </TooltipContent>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <button\n          type='button'\n          disabled={isUpdating}\n          onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n          className={cn(\n            'relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border border-border transition-colors duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent disabled:opacity-50 disabled:cursor-not-allowed',\n            isDark ? 'bg-accent' : 'bg-surface-hover-token',\n            'p-0.5'\n          )}\n          role='switch'\n          aria-checked={isDark}\n        >\n          <span className='sr-only'>\n            {isUpdating\n              ? 'Updating theme...'\n              : `Switch to ${isDark ? 'light' : 'dark'} mode`}\n          </span>\n          <span\n            aria-hidden='true'\n            className={cn(\n              'flex h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out items-center justify-center',\n              isDark ? 'translate-x-5' : 'translate-x-0',\n              isUpdating && 'animate-pulse motion-reduce:animate-none'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </span>\n        </button>\n      </TooltipTrigger>\n      <TooltipContent side='right'>\n        {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n      </TooltipContent>\n    </Tooltip>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardThemeToggle.tsx"
        },
        "span": [4584, 4733],
        "sourceCode": "'use client';\n\nimport { Tooltip, TooltipContent, TooltipTrigger } from '@jovie/ui';\nimport { useTheme } from 'next-themes';\nimport { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface DashboardThemeToggleProps {\n  onThemeChange?: (theme: 'light' | 'dark' | 'system') => void;\n  onThemeSave?: (theme: 'light' | 'dark' | 'system') => Promise<void>;\n  showSystemOption?: boolean;\n  variant?: 'default' | 'compact';\n}\n\nexport function DashboardThemeToggle({\n  onThemeChange,\n  onThemeSave,\n  showSystemOption = false,\n  variant = 'default',\n}: DashboardThemeToggleProps) {\n  const [mounted, setMounted] = useState(false);\n  const [isUpdating, setIsUpdating] = useState(false);\n  const { theme, setTheme, resolvedTheme } = useTheme();\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) {\n    return showSystemOption ? (\n      <div className='space-y-3'>\n        <div className='animate-pulse motion-reduce:animate-none space-y-3'>\n          <div className='h-4 bg-surface-hover-token rounded w-24'></div>\n          <div className='h-8 bg-surface-hover-token rounded'></div>\n        </div>\n      </div>\n    ) : (\n      <div className='flex items-center space-x-3'>\n        <span className='text-sm text-secondary-token'>Light</span>\n        <div className='relative inline-flex h-6 w-11 shrink-0 cursor-not-allowed rounded-full border border-border bg-surface-hover-token p-0.5 transition-colors duration-200 ease-in-out'>\n          <span className='translate-x-0 inline-block h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out'></span>\n        </div>\n        <span className='text-sm text-secondary-token'>Dark</span>\n      </div>\n    );\n  }\n\n  const handleThemeChange = async (newTheme: 'light' | 'dark' | 'system') => {\n    setIsUpdating(true);\n    setTheme(newTheme);\n\n    try {\n      // Call optional save handler (extracted from component)\n      if (onThemeSave) {\n        await onThemeSave(newTheme);\n      }\n\n      onThemeChange?.(newTheme);\n    } catch (error) {\n      console.error('Error saving theme preference:', error);\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  if (showSystemOption) {\n    // Full theme selector with system option (for settings page)\n    return (\n      <div className='space-y-3'>\n        <label className='text-sm font-medium text-primary-token'>\n          Theme Preference\n        </label>\n        <div className='grid grid-cols-3 gap-2'>\n          {[\n            { value: 'light', label: 'Light', icon: '☀' },\n            { value: 'dark', label: 'Dark', icon: '🌙' },\n            { value: 'system', label: 'System', icon: '💻' },\n          ].map(option => (\n            <button\n              key={option.value}\n              onClick={() =>\n                handleThemeChange(option.value as 'light' | 'dark' | 'system')\n              }\n              disabled={isUpdating}\n              className={cn(\n                'flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all duration-200',\n                theme === option.value\n                  ? 'border-accent bg-accent/10 text-primary-token'\n                  : 'border-border hover:bg-surface-hover-token text-secondary-token',\n                'disabled:opacity-50 disabled:cursor-not-allowed'\n              )}\n            >\n              <span className='text-lg mb-1'>{option.icon}</span>\n              <span className='text-xs font-medium'>{option.label}</span>\n              {theme === option.value && option.value === 'system' && (\n                <span className='text-xs text-secondary-token mt-1'>\n                  ({resolvedTheme})\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n        <p className='text-xs text-secondary-token'>\n          Choose how the interface appears. System follows your device settings.\n        </p>\n      </div>\n    );\n  }\n\n  // Simple toggle (for sidebar)\n  const isDark = resolvedTheme === 'dark';\n\n  if (variant === 'compact') {\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <button\n            type='button'\n            disabled={isUpdating}\n            onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n            className={cn(\n              'flex h-8 w-8 items-center justify-center rounded-md border border-subtle bg-surface-1 text-secondary-token hover:bg-surface-2 hover:text-primary-token transition-colors duration-150',\n              isUpdating && 'opacity-70'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </button>\n        </TooltipTrigger>\n        <TooltipContent side='right'>\n          {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n        </TooltipContent>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <button\n          type='button'\n          disabled={isUpdating}\n          onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n          className={cn(\n            'relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border border-border transition-colors duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent disabled:opacity-50 disabled:cursor-not-allowed',\n            isDark ? 'bg-accent' : 'bg-surface-hover-token',\n            'p-0.5'\n          )}\n          role='switch'\n          aria-checked={isDark}\n        >\n          <span className='sr-only'>\n            {isUpdating\n              ? 'Updating theme...'\n              : `Switch to ${isDark ? 'light' : 'dark'} mode`}\n          </span>\n          <span\n            aria-hidden='true'\n            className={cn(\n              'flex h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out items-center justify-center',\n              isDark ? 'translate-x-5' : 'translate-x-0',\n              isUpdating && 'animate-pulse motion-reduce:animate-none'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </span>\n        </button>\n      </TooltipTrigger>\n      <TooltipContent side='right'>\n        {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n      </TooltipContent>\n    </Tooltip>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardThemeToggle.tsx"
        },
        "span": [4990, 5139],
        "sourceCode": "'use client';\n\nimport { Tooltip, TooltipContent, TooltipTrigger } from '@jovie/ui';\nimport { useTheme } from 'next-themes';\nimport { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface DashboardThemeToggleProps {\n  onThemeChange?: (theme: 'light' | 'dark' | 'system') => void;\n  onThemeSave?: (theme: 'light' | 'dark' | 'system') => Promise<void>;\n  showSystemOption?: boolean;\n  variant?: 'default' | 'compact';\n}\n\nexport function DashboardThemeToggle({\n  onThemeChange,\n  onThemeSave,\n  showSystemOption = false,\n  variant = 'default',\n}: DashboardThemeToggleProps) {\n  const [mounted, setMounted] = useState(false);\n  const [isUpdating, setIsUpdating] = useState(false);\n  const { theme, setTheme, resolvedTheme } = useTheme();\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) {\n    return showSystemOption ? (\n      <div className='space-y-3'>\n        <div className='animate-pulse motion-reduce:animate-none space-y-3'>\n          <div className='h-4 bg-surface-hover-token rounded w-24'></div>\n          <div className='h-8 bg-surface-hover-token rounded'></div>\n        </div>\n      </div>\n    ) : (\n      <div className='flex items-center space-x-3'>\n        <span className='text-sm text-secondary-token'>Light</span>\n        <div className='relative inline-flex h-6 w-11 shrink-0 cursor-not-allowed rounded-full border border-border bg-surface-hover-token p-0.5 transition-colors duration-200 ease-in-out'>\n          <span className='translate-x-0 inline-block h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out'></span>\n        </div>\n        <span className='text-sm text-secondary-token'>Dark</span>\n      </div>\n    );\n  }\n\n  const handleThemeChange = async (newTheme: 'light' | 'dark' | 'system') => {\n    setIsUpdating(true);\n    setTheme(newTheme);\n\n    try {\n      // Call optional save handler (extracted from component)\n      if (onThemeSave) {\n        await onThemeSave(newTheme);\n      }\n\n      onThemeChange?.(newTheme);\n    } catch (error) {\n      console.error('Error saving theme preference:', error);\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  if (showSystemOption) {\n    // Full theme selector with system option (for settings page)\n    return (\n      <div className='space-y-3'>\n        <label className='text-sm font-medium text-primary-token'>\n          Theme Preference\n        </label>\n        <div className='grid grid-cols-3 gap-2'>\n          {[\n            { value: 'light', label: 'Light', icon: '☀' },\n            { value: 'dark', label: 'Dark', icon: '🌙' },\n            { value: 'system', label: 'System', icon: '💻' },\n          ].map(option => (\n            <button\n              key={option.value}\n              onClick={() =>\n                handleThemeChange(option.value as 'light' | 'dark' | 'system')\n              }\n              disabled={isUpdating}\n              className={cn(\n                'flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all duration-200',\n                theme === option.value\n                  ? 'border-accent bg-accent/10 text-primary-token'\n                  : 'border-border hover:bg-surface-hover-token text-secondary-token',\n                'disabled:opacity-50 disabled:cursor-not-allowed'\n              )}\n            >\n              <span className='text-lg mb-1'>{option.icon}</span>\n              <span className='text-xs font-medium'>{option.label}</span>\n              {theme === option.value && option.value === 'system' && (\n                <span className='text-xs text-secondary-token mt-1'>\n                  ({resolvedTheme})\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n        <p className='text-xs text-secondary-token'>\n          Choose how the interface appears. System follows your device settings.\n        </p>\n      </div>\n    );\n  }\n\n  // Simple toggle (for sidebar)\n  const isDark = resolvedTheme === 'dark';\n\n  if (variant === 'compact') {\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <button\n            type='button'\n            disabled={isUpdating}\n            onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n            className={cn(\n              'flex h-8 w-8 items-center justify-center rounded-md border border-subtle bg-surface-1 text-secondary-token hover:bg-surface-2 hover:text-primary-token transition-colors duration-150',\n              isUpdating && 'opacity-70'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </button>\n        </TooltipTrigger>\n        <TooltipContent side='right'>\n          {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n        </TooltipContent>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <button\n          type='button'\n          disabled={isUpdating}\n          onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n          className={cn(\n            'relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border border-border transition-colors duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent disabled:opacity-50 disabled:cursor-not-allowed',\n            isDark ? 'bg-accent' : 'bg-surface-hover-token',\n            'p-0.5'\n          )}\n          role='switch'\n          aria-checked={isDark}\n        >\n          <span className='sr-only'>\n            {isUpdating\n              ? 'Updating theme...'\n              : `Switch to ${isDark ? 'light' : 'dark'} mode`}\n          </span>\n          <span\n            aria-hidden='true'\n            className={cn(\n              'flex h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out items-center justify-center',\n              isDark ? 'translate-x-5' : 'translate-x-0',\n              isUpdating && 'animate-pulse motion-reduce:animate-none'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </span>\n        </button>\n      </TooltipTrigger>\n      <TooltipContent side='right'>\n        {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n      </TooltipContent>\n    </Tooltip>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardThemeToggle.tsx"
        },
        "span": [7263, 7409],
        "sourceCode": "'use client';\n\nimport { Tooltip, TooltipContent, TooltipTrigger } from '@jovie/ui';\nimport { useTheme } from 'next-themes';\nimport { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface DashboardThemeToggleProps {\n  onThemeChange?: (theme: 'light' | 'dark' | 'system') => void;\n  onThemeSave?: (theme: 'light' | 'dark' | 'system') => Promise<void>;\n  showSystemOption?: boolean;\n  variant?: 'default' | 'compact';\n}\n\nexport function DashboardThemeToggle({\n  onThemeChange,\n  onThemeSave,\n  showSystemOption = false,\n  variant = 'default',\n}: DashboardThemeToggleProps) {\n  const [mounted, setMounted] = useState(false);\n  const [isUpdating, setIsUpdating] = useState(false);\n  const { theme, setTheme, resolvedTheme } = useTheme();\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) {\n    return showSystemOption ? (\n      <div className='space-y-3'>\n        <div className='animate-pulse motion-reduce:animate-none space-y-3'>\n          <div className='h-4 bg-surface-hover-token rounded w-24'></div>\n          <div className='h-8 bg-surface-hover-token rounded'></div>\n        </div>\n      </div>\n    ) : (\n      <div className='flex items-center space-x-3'>\n        <span className='text-sm text-secondary-token'>Light</span>\n        <div className='relative inline-flex h-6 w-11 shrink-0 cursor-not-allowed rounded-full border border-border bg-surface-hover-token p-0.5 transition-colors duration-200 ease-in-out'>\n          <span className='translate-x-0 inline-block h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out'></span>\n        </div>\n        <span className='text-sm text-secondary-token'>Dark</span>\n      </div>\n    );\n  }\n\n  const handleThemeChange = async (newTheme: 'light' | 'dark' | 'system') => {\n    setIsUpdating(true);\n    setTheme(newTheme);\n\n    try {\n      // Call optional save handler (extracted from component)\n      if (onThemeSave) {\n        await onThemeSave(newTheme);\n      }\n\n      onThemeChange?.(newTheme);\n    } catch (error) {\n      console.error('Error saving theme preference:', error);\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  if (showSystemOption) {\n    // Full theme selector with system option (for settings page)\n    return (\n      <div className='space-y-3'>\n        <label className='text-sm font-medium text-primary-token'>\n          Theme Preference\n        </label>\n        <div className='grid grid-cols-3 gap-2'>\n          {[\n            { value: 'light', label: 'Light', icon: '☀' },\n            { value: 'dark', label: 'Dark', icon: '🌙' },\n            { value: 'system', label: 'System', icon: '💻' },\n          ].map(option => (\n            <button\n              key={option.value}\n              onClick={() =>\n                handleThemeChange(option.value as 'light' | 'dark' | 'system')\n              }\n              disabled={isUpdating}\n              className={cn(\n                'flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all duration-200',\n                theme === option.value\n                  ? 'border-accent bg-accent/10 text-primary-token'\n                  : 'border-border hover:bg-surface-hover-token text-secondary-token',\n                'disabled:opacity-50 disabled:cursor-not-allowed'\n              )}\n            >\n              <span className='text-lg mb-1'>{option.icon}</span>\n              <span className='text-xs font-medium'>{option.label}</span>\n              {theme === option.value && option.value === 'system' && (\n                <span className='text-xs text-secondary-token mt-1'>\n                  ({resolvedTheme})\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n        <p className='text-xs text-secondary-token'>\n          Choose how the interface appears. System follows your device settings.\n        </p>\n      </div>\n    );\n  }\n\n  // Simple toggle (for sidebar)\n  const isDark = resolvedTheme === 'dark';\n\n  if (variant === 'compact') {\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <button\n            type='button'\n            disabled={isUpdating}\n            onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n            className={cn(\n              'flex h-8 w-8 items-center justify-center rounded-md border border-subtle bg-surface-1 text-secondary-token hover:bg-surface-2 hover:text-primary-token transition-colors duration-150',\n              isUpdating && 'opacity-70'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </button>\n        </TooltipTrigger>\n        <TooltipContent side='right'>\n          {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n        </TooltipContent>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <button\n          type='button'\n          disabled={isUpdating}\n          onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n          className={cn(\n            'relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border border-border transition-colors duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent disabled:opacity-50 disabled:cursor-not-allowed',\n            isDark ? 'bg-accent' : 'bg-surface-hover-token',\n            'p-0.5'\n          )}\n          role='switch'\n          aria-checked={isDark}\n        >\n          <span className='sr-only'>\n            {isUpdating\n              ? 'Updating theme...'\n              : `Switch to ${isDark ? 'light' : 'dark'} mode`}\n          </span>\n          <span\n            aria-hidden='true'\n            className={cn(\n              'flex h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out items-center justify-center',\n              isDark ? 'translate-x-5' : 'translate-x-0',\n              isUpdating && 'animate-pulse motion-reduce:animate-none'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </span>\n        </button>\n      </TooltipTrigger>\n      <TooltipContent side='right'>\n        {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n      </TooltipContent>\n    </Tooltip>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardThemeToggle.tsx"
        },
        "span": [7666, 7812],
        "sourceCode": "'use client';\n\nimport { Tooltip, TooltipContent, TooltipTrigger } from '@jovie/ui';\nimport { useTheme } from 'next-themes';\nimport { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface DashboardThemeToggleProps {\n  onThemeChange?: (theme: 'light' | 'dark' | 'system') => void;\n  onThemeSave?: (theme: 'light' | 'dark' | 'system') => Promise<void>;\n  showSystemOption?: boolean;\n  variant?: 'default' | 'compact';\n}\n\nexport function DashboardThemeToggle({\n  onThemeChange,\n  onThemeSave,\n  showSystemOption = false,\n  variant = 'default',\n}: DashboardThemeToggleProps) {\n  const [mounted, setMounted] = useState(false);\n  const [isUpdating, setIsUpdating] = useState(false);\n  const { theme, setTheme, resolvedTheme } = useTheme();\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) {\n    return showSystemOption ? (\n      <div className='space-y-3'>\n        <div className='animate-pulse motion-reduce:animate-none space-y-3'>\n          <div className='h-4 bg-surface-hover-token rounded w-24'></div>\n          <div className='h-8 bg-surface-hover-token rounded'></div>\n        </div>\n      </div>\n    ) : (\n      <div className='flex items-center space-x-3'>\n        <span className='text-sm text-secondary-token'>Light</span>\n        <div className='relative inline-flex h-6 w-11 shrink-0 cursor-not-allowed rounded-full border border-border bg-surface-hover-token p-0.5 transition-colors duration-200 ease-in-out'>\n          <span className='translate-x-0 inline-block h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out'></span>\n        </div>\n        <span className='text-sm text-secondary-token'>Dark</span>\n      </div>\n    );\n  }\n\n  const handleThemeChange = async (newTheme: 'light' | 'dark' | 'system') => {\n    setIsUpdating(true);\n    setTheme(newTheme);\n\n    try {\n      // Call optional save handler (extracted from component)\n      if (onThemeSave) {\n        await onThemeSave(newTheme);\n      }\n\n      onThemeChange?.(newTheme);\n    } catch (error) {\n      console.error('Error saving theme preference:', error);\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  if (showSystemOption) {\n    // Full theme selector with system option (for settings page)\n    return (\n      <div className='space-y-3'>\n        <label className='text-sm font-medium text-primary-token'>\n          Theme Preference\n        </label>\n        <div className='grid grid-cols-3 gap-2'>\n          {[\n            { value: 'light', label: 'Light', icon: '☀' },\n            { value: 'dark', label: 'Dark', icon: '🌙' },\n            { value: 'system', label: 'System', icon: '💻' },\n          ].map(option => (\n            <button\n              key={option.value}\n              onClick={() =>\n                handleThemeChange(option.value as 'light' | 'dark' | 'system')\n              }\n              disabled={isUpdating}\n              className={cn(\n                'flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all duration-200',\n                theme === option.value\n                  ? 'border-accent bg-accent/10 text-primary-token'\n                  : 'border-border hover:bg-surface-hover-token text-secondary-token',\n                'disabled:opacity-50 disabled:cursor-not-allowed'\n              )}\n            >\n              <span className='text-lg mb-1'>{option.icon}</span>\n              <span className='text-xs font-medium'>{option.label}</span>\n              {theme === option.value && option.value === 'system' && (\n                <span className='text-xs text-secondary-token mt-1'>\n                  ({resolvedTheme})\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n        <p className='text-xs text-secondary-token'>\n          Choose how the interface appears. System follows your device settings.\n        </p>\n      </div>\n    );\n  }\n\n  // Simple toggle (for sidebar)\n  const isDark = resolvedTheme === 'dark';\n\n  if (variant === 'compact') {\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <button\n            type='button'\n            disabled={isUpdating}\n            onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n            className={cn(\n              'flex h-8 w-8 items-center justify-center rounded-md border border-subtle bg-surface-1 text-secondary-token hover:bg-surface-2 hover:text-primary-token transition-colors duration-150',\n              isUpdating && 'opacity-70'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </button>\n        </TooltipTrigger>\n        <TooltipContent side='right'>\n          {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n        </TooltipContent>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <button\n          type='button'\n          disabled={isUpdating}\n          onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n          className={cn(\n            'relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border border-border transition-colors duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent disabled:opacity-50 disabled:cursor-not-allowed',\n            isDark ? 'bg-accent' : 'bg-surface-hover-token',\n            'p-0.5'\n          )}\n          role='switch'\n          aria-checked={isDark}\n        >\n          <span className='sr-only'>\n            {isUpdating\n              ? 'Updating theme...'\n              : `Switch to ${isDark ? 'light' : 'dark'} mode`}\n          </span>\n          <span\n            aria-hidden='true'\n            className={cn(\n              'flex h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out items-center justify-center',\n              isDark ? 'translate-x-5' : 'translate-x-0',\n              isUpdating && 'animate-pulse motion-reduce:animate-none'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </span>\n        </button>\n      </TooltipTrigger>\n      <TooltipContent side='right'>\n        {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n      </TooltipContent>\n    </Tooltip>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/DashboardThemeToggle.tsx"
        },
        "span": [2716, 3349],
        "sourceCode": "'use client';\n\nimport { Tooltip, TooltipContent, TooltipTrigger } from '@jovie/ui';\nimport { useTheme } from 'next-themes';\nimport { useEffect, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface DashboardThemeToggleProps {\n  onThemeChange?: (theme: 'light' | 'dark' | 'system') => void;\n  onThemeSave?: (theme: 'light' | 'dark' | 'system') => Promise<void>;\n  showSystemOption?: boolean;\n  variant?: 'default' | 'compact';\n}\n\nexport function DashboardThemeToggle({\n  onThemeChange,\n  onThemeSave,\n  showSystemOption = false,\n  variant = 'default',\n}: DashboardThemeToggleProps) {\n  const [mounted, setMounted] = useState(false);\n  const [isUpdating, setIsUpdating] = useState(false);\n  const { theme, setTheme, resolvedTheme } = useTheme();\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) {\n    return showSystemOption ? (\n      <div className='space-y-3'>\n        <div className='animate-pulse motion-reduce:animate-none space-y-3'>\n          <div className='h-4 bg-surface-hover-token rounded w-24'></div>\n          <div className='h-8 bg-surface-hover-token rounded'></div>\n        </div>\n      </div>\n    ) : (\n      <div className='flex items-center space-x-3'>\n        <span className='text-sm text-secondary-token'>Light</span>\n        <div className='relative inline-flex h-6 w-11 shrink-0 cursor-not-allowed rounded-full border border-border bg-surface-hover-token p-0.5 transition-colors duration-200 ease-in-out'>\n          <span className='translate-x-0 inline-block h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out'></span>\n        </div>\n        <span className='text-sm text-secondary-token'>Dark</span>\n      </div>\n    );\n  }\n\n  const handleThemeChange = async (newTheme: 'light' | 'dark' | 'system') => {\n    setIsUpdating(true);\n    setTheme(newTheme);\n\n    try {\n      // Call optional save handler (extracted from component)\n      if (onThemeSave) {\n        await onThemeSave(newTheme);\n      }\n\n      onThemeChange?.(newTheme);\n    } catch (error) {\n      console.error('Error saving theme preference:', error);\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  if (showSystemOption) {\n    // Full theme selector with system option (for settings page)\n    return (\n      <div className='space-y-3'>\n        <label className='text-sm font-medium text-primary-token'>\n          Theme Preference\n        </label>\n        <div className='grid grid-cols-3 gap-2'>\n          {[\n            { value: 'light', label: 'Light', icon: '☀' },\n            { value: 'dark', label: 'Dark', icon: '🌙' },\n            { value: 'system', label: 'System', icon: '💻' },\n          ].map(option => (\n            <button\n              key={option.value}\n              onClick={() =>\n                handleThemeChange(option.value as 'light' | 'dark' | 'system')\n              }\n              disabled={isUpdating}\n              className={cn(\n                'flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all duration-200',\n                theme === option.value\n                  ? 'border-accent bg-accent/10 text-primary-token'\n                  : 'border-border hover:bg-surface-hover-token text-secondary-token',\n                'disabled:opacity-50 disabled:cursor-not-allowed'\n              )}\n            >\n              <span className='text-lg mb-1'>{option.icon}</span>\n              <span className='text-xs font-medium'>{option.label}</span>\n              {theme === option.value && option.value === 'system' && (\n                <span className='text-xs text-secondary-token mt-1'>\n                  ({resolvedTheme})\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n        <p className='text-xs text-secondary-token'>\n          Choose how the interface appears. System follows your device settings.\n        </p>\n      </div>\n    );\n  }\n\n  // Simple toggle (for sidebar)\n  const isDark = resolvedTheme === 'dark';\n\n  if (variant === 'compact') {\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <button\n            type='button'\n            disabled={isUpdating}\n            onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n            className={cn(\n              'flex h-8 w-8 items-center justify-center rounded-md border border-subtle bg-surface-1 text-secondary-token hover:bg-surface-2 hover:text-primary-token transition-colors duration-150',\n              isUpdating && 'opacity-70'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-4 w-4 text-secondary-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </button>\n        </TooltipTrigger>\n        <TooltipContent side='right'>\n          {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n        </TooltipContent>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <button\n          type='button'\n          disabled={isUpdating}\n          onClick={() => handleThemeChange(isDark ? 'light' : 'dark')}\n          className={cn(\n            'relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border border-border transition-colors duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent disabled:opacity-50 disabled:cursor-not-allowed',\n            isDark ? 'bg-accent' : 'bg-surface-hover-token',\n            'p-0.5'\n          )}\n          role='switch'\n          aria-checked={isDark}\n        >\n          <span className='sr-only'>\n            {isUpdating\n              ? 'Updating theme...'\n              : `Switch to ${isDark ? 'light' : 'dark'} mode`}\n          </span>\n          <span\n            aria-hidden='true'\n            className={cn(\n              'flex h-5 w-5 transform rounded-full bg-surface-0 shadow ring-0 transition duration-200 ease-in-out items-center justify-center',\n              isDark ? 'translate-x-5' : 'translate-x-0',\n              isUpdating && 'animate-pulse motion-reduce:animate-none'\n            )}\n          >\n            {isDark ? (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            ) : (\n              <svg\n                className='h-3 w-3 text-accent-token'\n                fill='currentColor'\n                viewBox='0 0 20 20'\n              >\n                <path\n                  fillRule='evenodd'\n                  d='M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            )}\n          </span>\n        </button>\n      </TooltipTrigger>\n      <TooltipContent side='right'>\n        {isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n      </TooltipContent>\n    </Tooltip>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/EnhancedDashboardLinks.tsx"
        },
        "span": [20687, 20801],
        "sourceCode": "'use client';\n\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { toast } from 'sonner';\nimport type { ProfileSocialLink } from '@/app/app/dashboard/actions';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport { usePreviewPanel } from '@/app/app/dashboard/PreviewPanelContext';\nimport { Input } from '@/components/atoms/Input';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\n\nimport { updateProfile as updateProfileApi } from '@/lib/api-client/endpoints/dashboard/profile';\nimport {\n  acceptSuggestion,\n  dismissSuggestion,\n  getSocialLinks,\n  updateSocialLinksSafe,\n} from '@/lib/api-client/endpoints/dashboard/social-links';\nimport { ApiError } from '@/lib/api-client/types';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { usePollingCoordinator } from '@/lib/hooks/usePollingCoordinator';\nimport { useProfileSaveToasts } from '@/lib/hooks/useProfileSaveToasts';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { getProfileIdentity } from '@/lib/profile/profile-identity';\nimport { debounce } from '@/lib/utils';\nimport {\n  type DetectedLink,\n  getPlatformCategory,\n  type PlatformCategory,\n} from '@/lib/utils/platform-detection';\nimport {\n  getSocialPlatformLabel,\n  type SaveStatus,\n  type SocialPlatform,\n} from '@/types';\nimport { type Artist, convertDrizzleCreatorProfileToArtist } from '@/types/db';\n\nconst GroupedLinksManager = dynamic(\n  () =>\n    import('@/components/dashboard/organisms/GroupedLinksManager').then(\n      mod => ({\n        default: mod.GroupedLinksManager,\n      })\n    ),\n  {\n    loading: () => (\n      <div className='space-y-3'>\n        {Array.from({ length: 4 }).map((_, i) => (\n          <div key={i} className='h-16 animate-pulse rounded-lg bg-surface-1' />\n        ))}\n      </div>\n    ),\n    ssr: false,\n  }\n);\n\ntype ProfileUpdatePayload = {\n  username?: string;\n  displayName?: string;\n  avatarUrl?: string;\n};\n\ntype ProfileUpdateResponse = {\n  profile: {\n    username?: string;\n    displayName?: string | null;\n    avatarUrl?: string | null;\n  };\n  warning?: string;\n};\n\n// Alias PlatformCategory from shared utility for local usage\ntype PlatformType = PlatformCategory;\n\ninterface Platform {\n  id: string;\n  name: string;\n  category: PlatformType;\n  icon: string;\n  color: string;\n  placeholder: string;\n}\n\ninterface LinkItem {\n  id: string;\n  title: string;\n  url: string;\n  platform: Platform;\n  isVisible: boolean;\n  order: number;\n  category: PlatformType;\n  normalizedUrl: string;\n  originalUrl: string;\n  suggestedTitle: string;\n  isValid: boolean;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n  version?: number;\n}\n\ninterface SuggestedLink extends DetectedLink {\n  suggestionId: string;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n}\n\nfunction areLinkItemsEqual(a: LinkItem[], b: LinkItem[]): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i += 1) {\n    const left = a[i];\n    const right = b[i];\n    if (!right) return false;\n    if (left.id !== right.id) return false;\n    if (left.normalizedUrl !== right.normalizedUrl) return false;\n    if (left.originalUrl !== right.originalUrl) return false;\n    if (left.isVisible !== right.isVisible) return false;\n    if (left.category !== right.category) return false;\n    if (left.platform.id !== right.platform.id) return false;\n  }\n  return true;\n}\n\nfunction areSuggestionListsEqual(\n  a: SuggestedLink[],\n  b: SuggestedLink[]\n): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n\n  const serialize = (list: SuggestedLink[]) =>\n    list\n      .map(\n        item =>\n          `${item.suggestionId ?? item.normalizedUrl}:${item.platform.id}:${item.normalizedUrl}`\n      )\n      .sort();\n\n  const aSig = serialize(a);\n  const bSig = serialize(b);\n  return aSig.every((value, index) => value === bSig[index]);\n}\n\nexport function EnhancedDashboardLinks({\n  initialLinks,\n}: {\n  initialLinks: ProfileSocialLink[];\n}) {\n  const router = useRouter();\n  const dashboardData = useDashboardData();\n  const [artist, setArtist] = useState<Artist | null>(\n    dashboardData.selectedProfile\n      ? convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n      : null\n  );\n  const isMusicProfile =\n    dashboardData.selectedProfile?.creatorType === 'artist';\n  const profileId = dashboardData.selectedProfile?.id;\n\n  const [profileDisplayName, setProfileDisplayName] = useState<string>(\n    dashboardData.selectedProfile?.displayName ?? ''\n  );\n  const [profileUsername, setProfileUsername] = useState<string>(\n    dashboardData.selectedProfile?.username ?? ''\n  );\n\n  const [editingField, setEditingField] = useState<\n    'displayName' | 'username' | null\n  >(null);\n  const displayNameInputRef = useRef<HTMLInputElement>(null);\n  const usernameInputRef = useRef<HTMLInputElement>(null);\n\n  const [profileSaveStatus, setProfileSaveStatus] = useState<SaveStatus>({\n    saving: false,\n    success: null,\n    error: null,\n    lastSaved: null,\n  });\n  const lastProfileSavedRef = useRef<{\n    displayName: string;\n    username: string;\n  } | null>(null);\n  const linkIngestionGate = useFeatureGate(STATSIG_FLAGS.LINK_INGESTION);\n  const suggestionsEnabled = linkIngestionGate?.value ?? false;\n\n  useEffect(() => {\n    if (!profileSaveStatus.success) return;\n    const timeoutId = window.setTimeout(() => {\n      setProfileSaveStatus(prev => ({ ...prev, success: null }));\n    }, 1500);\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [profileSaveStatus.success]);\n\n  useProfileSaveToasts(profileSaveStatus);\n\n  const [autoRefreshUntilMs, setAutoRefreshUntilMs] = useState<number | null>(\n    null\n  );\n  useEffect(() => {\n    if (!dashboardData.selectedProfile) {\n      setArtist(null);\n      setProfileDisplayName('');\n      setProfileUsername('');\n      setEditingField(null);\n      lastProfileSavedRef.current = null;\n      return;\n    }\n\n    setArtist(\n      convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n    );\n    setProfileDisplayName(dashboardData.selectedProfile.displayName ?? '');\n    setProfileUsername(dashboardData.selectedProfile.username ?? '');\n\n    lastProfileSavedRef.current = {\n      displayName: dashboardData.selectedProfile.displayName ?? '',\n      username: dashboardData.selectedProfile.username ?? '',\n    };\n    setProfileSaveStatus({\n      saving: false,\n      success: null,\n      error: null,\n      lastSaved: null,\n    });\n  }, [dashboardData.selectedProfile]);\n\n  useEffect(() => {\n    if (editingField === 'displayName') {\n      displayNameInputRef.current?.focus();\n      displayNameInputRef.current?.select();\n    }\n    if (editingField === 'username') {\n      usernameInputRef.current?.focus();\n      usernameInputRef.current?.select();\n    }\n  }, [editingField]);\n\n  const updateProfile = useCallback(\n    async (updates: ProfileUpdatePayload): Promise<ProfileUpdateResponse> => {\n      const response = await updateProfileApi(updates);\n      return response as ProfileUpdateResponse;\n    },\n    []\n  );\n\n  const uploadAvatar = useCallback(async (file: File): Promise<string> => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await fetch('/api/images/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const body = (await response.json().catch(() => null)) as {\n      blobUrl?: string;\n      error?: string;\n    } | null;\n\n    if (!response.ok) {\n      const message = body?.error ?? 'Upload failed';\n      throw new Error(message);\n    }\n\n    if (!body?.blobUrl) {\n      throw new Error('Upload failed');\n    }\n\n    return body.blobUrl;\n  }, []);\n\n  const saveProfile = useCallback(\n    async (next: { displayName: string; username: string }): Promise<void> => {\n      if (!profileId) {\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: 'Missing profile id; please refresh and try again.',\n          lastSaved: null,\n        });\n        toast.error('Missing profile id; please refresh and try again.');\n        return;\n      }\n\n      const username = next.username.trim();\n      const displayName = next.displayName.trim();\n\n      if (displayName.length === 0 || username.length === 0) {\n        return;\n      }\n\n      const lastSaved = lastProfileSavedRef.current;\n      if (\n        lastSaved &&\n        lastSaved.displayName === displayName &&\n        lastSaved.username === username\n      ) {\n        return;\n      }\n\n      setProfileSaveStatus(prev => ({\n        ...prev,\n        saving: true,\n        success: null,\n        error: null,\n      }));\n\n      try {\n        const result = await updateProfile({\n          displayName,\n          username,\n        });\n\n        const nextHandle = result.profile.username ?? artist?.handle;\n        const nextName = result.profile.displayName ?? artist?.name;\n        const nextAvatar =\n          typeof result.profile.avatarUrl === 'string'\n            ? result.profile.avatarUrl\n            : artist?.image_url;\n\n        if (nextHandle || nextName || nextAvatar) {\n          setArtist(prev => {\n            if (!prev) return prev;\n            return {\n              ...prev,\n              handle: nextHandle ?? prev.handle,\n              name: nextName ?? prev.name,\n              image_url: nextAvatar ?? prev.image_url,\n            };\n          });\n        }\n\n        lastProfileSavedRef.current = { displayName, username };\n\n        setProfileSaveStatus({\n          saving: false,\n          success: true,\n          error: null,\n          lastSaved: new Date(),\n        });\n\n        if (result.warning) {\n          toast.message(result.warning);\n        }\n\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : 'Failed to update profile';\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: message,\n          lastSaved: null,\n        });\n        toast.error(message);\n      }\n    },\n    [\n      artist?.handle,\n      artist?.image_url,\n      artist?.name,\n      profileId,\n      router,\n      updateProfile,\n    ]\n  );\n\n  const debouncedProfileSave = useMemo(\n    () =>\n      debounce(async (...args: unknown[]) => {\n        const [next] = args as [{ displayName: string; username: string }];\n        await saveProfile(next);\n      }, 900),\n    [saveProfile]\n  );\n\n  useEffect(() => {\n    return () => {\n      debouncedProfileSave.flush();\n    };\n  }, [debouncedProfileSave]);\n\n  const handleAvatarUpload = useCallback(\n    async (file: File): Promise<string> => {\n      try {\n        const blobUrl = await uploadAvatar(file);\n        const result = await updateProfile({ avatarUrl: blobUrl });\n        const nextAvatar = result.profile.avatarUrl ?? blobUrl;\n        setArtist(prev => {\n          if (!prev) return prev;\n          return { ...prev, image_url: nextAvatar };\n        });\n        if (result.warning) {\n          toast.message(result.warning);\n        } else {\n          toast.success('Profile photo updated');\n        }\n        router.refresh();\n        return nextAvatar;\n      } finally {\n        // no-op\n      }\n    },\n    [router, updateProfile, uploadAvatar]\n  );\n\n  const buildPlatformMeta = useCallback((link: ProfileSocialLink): Platform => {\n    const displayName = getSocialPlatformLabel(link.platform as SocialPlatform);\n    const category: PlatformType =\n      (link.platformType as PlatformType | null | undefined) ??\n      getPlatformCategory(link.platform);\n    return {\n      id: link.platform,\n      name: displayName,\n      category,\n      icon: link.platform,\n      color: '#000000',\n      placeholder: link.url,\n    };\n  }, []);\n\n  const convertDbLinkToDetected = useCallback(\n    (\n      link: ProfileSocialLink\n    ): DetectedLink & {\n      id: string;\n      state?: 'active' | 'suggested' | 'rejected';\n      confidence?: number | null;\n      sourcePlatform?: string | null;\n      sourceType?: 'manual' | 'admin' | 'ingested' | null;\n      evidence?: { sources?: string[]; signals?: string[] } | null;\n    } => {\n      const platform = buildPlatformMeta(link);\n      const title = link.displayText || platform.name;\n      return {\n        // DetectedLink fields\n        platform,\n        normalizedUrl: link.url,\n        originalUrl: link.url,\n        suggestedTitle: title,\n        isValid: true,\n        // Extended metadata\n        id: link.id,\n        state: link.state ?? 'active',\n        confidence:\n          typeof link.confidence === 'number'\n            ? link.confidence\n            : Number.parseFloat(String(link.confidence ?? '0')) || null,\n        sourcePlatform: link.sourcePlatform ?? null,\n        sourceType: link.sourceType ?? null,\n        evidence: link.evidence ?? null,\n      };\n    },\n    [buildPlatformMeta]\n  );\n\n  // Convert database social links to LinkItem format\n  const convertDbLinksToLinkItems = useCallback(\n    (dbLinks: ProfileSocialLink[] = []): LinkItem[] => {\n      return dbLinks.map((link, index) => {\n        const detected = convertDbLinkToDetected(link);\n        const platformMeta = buildPlatformMeta(link);\n        const order =\n          typeof link.sortOrder === 'number' ? link.sortOrder : index;\n        const isVisible = link.isActive ?? true;\n        const category = platformMeta.category;\n\n        const item: LinkItem = {\n          id: detected.id,\n          title: detected.suggestedTitle,\n          url: detected.normalizedUrl,\n          platform: platformMeta,\n          isVisible,\n          order,\n          category,\n          normalizedUrl: detected.normalizedUrl,\n          originalUrl: detected.originalUrl,\n          suggestedTitle: detected.suggestedTitle,\n          isValid: detected.isValid,\n          state: detected.state,\n          confidence: detected.confidence ?? null,\n          sourcePlatform: detected.sourcePlatform ?? null,\n          sourceType: detected.sourceType ?? null,\n          evidence: detected.evidence ?? null,\n          version: link.version ?? 1,\n        };\n\n        return item;\n      });\n    },\n    [buildPlatformMeta, convertDbLinkToDetected]\n  );\n\n  const [links, setLinks] = useState<LinkItem[]>(() =>\n    convertDbLinksToLinkItems(initialLinks)\n  );\n\n  const [suggestions, setSuggestions] = useState<SuggestedLink[]>([]);\n  const suggestionsRef = useRef<SuggestedLink[]>(suggestions);\n\n  useEffect(() => {\n    suggestionsRef.current = suggestions;\n  }, [suggestions]);\n\n  const handleLinkUpdate = useCallback(\n    async (\n      updatedLinks: LinkItem[]\n    ): Promise<{ success: boolean; error?: string }> => {\n      try {\n        const formattedLinks = updatedLinks.map(item => ({\n          id: item.id,\n          sortOrder: item.order,\n          isActive: item.isVisible,\n          platform: item.platform.id,\n        }));\n\n        await updateSocialLinksSafe(formattedLinks);\n        setLinks(updatedLinks);\n        return { success: true };\n      } catch (error) {\n        const errorMessage =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error\n              ? error.message\n              : 'Unknown error updating links';\n        return { success: false, error: errorMessage };\n      }\n    },\n    []\n  );\n\n  const handleAcceptSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await acceptSuggestion(suggestionId);\n\n        const suggestion = suggestionsRef.current.find(\n          s => s.suggestionId === suggestionId\n        );\n        if (suggestion) {\n          const newLinkItem: LinkItem = {\n            id: suggestionId,\n            title: suggestion.suggestedTitle,\n            url: suggestion.normalizedUrl,\n            platform: suggestion.platform,\n            isVisible: true,\n            order: links.length,\n            category: suggestion.platform.category,\n            normalizedUrl: suggestion.normalizedUrl,\n            originalUrl: suggestion.originalUrl,\n            suggestedTitle: suggestion.suggestedTitle,\n            isValid: suggestion.isValid,\n            state: 'active',\n            confidence: suggestion.confidence ?? null,\n            sourcePlatform: suggestion.sourcePlatform ?? null,\n            sourceType: suggestion.sourceType ?? null,\n            evidence: suggestion.evidence ?? null,\n            version: 1,\n          };\n\n          const updatedLinks = [...links, newLinkItem];\n          await handleLinkUpdate(updatedLinks);\n\n          setSuggestions(prev =>\n            prev.filter(s => s.suggestionId !== suggestionId)\n          );\n        }\n\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to accept suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    [links, handleLinkUpdate]\n  );\n\n  const handleRejectSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await dismissSuggestion(suggestionId);\n        setSuggestions(prev =>\n          prev.filter(s => s.suggestionId !== suggestionId)\n        );\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to reject suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    []\n  );\n\n  const loadSocialLinks = useCallback(async (): Promise<void> => {\n    if (!profileId) return;\n\n    try {\n      const response = await getSocialLinks(profileId);\n      if (response.links) {\n        const dbLinks = response.links as ProfileSocialLink[];\n        const convertedLinks = convertDbLinksToLinkItems(dbLinks);\n        setLinks(convertedLinks);\n      }\n\n      if (suggestionsEnabled && response.suggestions) {\n        setSuggestions(\n          response.suggestions.map((suggestion: SuggestedLink, index: number) => ({\n            ...suggestion,\n            suggestionId: suggestion.suggestionId ?? `suggestion-${index}`,\n          }))\n        );\n      }\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to load links';\n      console.error('Error loading social links:', message);\n    }\n  }, [profileId, suggestionsEnabled, convertDbLinksToLinkItems]);\n\n  // Poll for social links if suggestions are enabled\n  const pollingEnabled =\n    suggestionsEnabled && profileId ? autoRefreshUntilMs !== null : false;\n  usePollingCoordinator(\n    () => {\n      loadSocialLinks();\n    },\n    {\n      enabled: pollingEnabled,\n      interval: 3000,\n      maxDuration: autoRefreshUntilMs,\n    }\n  );\n\n  // Load links on mount and profile change\n  useEffect(() => {\n    loadSocialLinks();\n  }, [loadSocialLinks]);\n\n  return (\n    <div className='w-full'>\n      <div className='space-y-6'>\n        <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n          <div className='space-y-4'>\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Display Name\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'displayName' ? (\n                  <Input\n                    ref={displayNameInputRef}\n                    value={profileDisplayName}\n                    onChange={e => {\n                      setProfileDisplayName(e.target.value);\n                      debouncedProfileSave({\n                        displayName: e.target.value,\n                        username: profileUsername,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('displayName')}\n                  >\n                    {profileDisplayName || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Username\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'username' ? (\n                  <Input\n                    ref={usernameInputRef}\n                    value={profileUsername}\n                    onChange={e => {\n                      setProfileUsername(e.target.value);\n                      debouncedProfileSave({\n                        displayName: profileDisplayName,\n                        username: e.target.value,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('username')}\n                  >\n                    {profileUsername || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Profile Photo\n              </label>\n              <AvatarUploadable\n                src={artist?.image_url}\n                onUpload={handleAvatarUpload}\n                maxFileSizeBytes={AVATAR_MAX_FILE_SIZE_BYTES}\n                supportedMimeTypes={SUPPORTED_IMAGE_MIME_TYPES}\n                aria-label='Upload profile photo'\n              />\n            </div>\n\n            {profileSaveStatus.error && (\n              <div className='rounded bg-red-100 p-3 text-sm text-red-800'>\n                {profileSaveStatus.error}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {isMusicProfile && (\n          <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n            <h2 className='mb-4 text-lg font-semibold text-content-primary'>\n              Social Links\n            </h2>\n            <GroupedLinksManager\n              links={links}\n              suggestions={suggestions}\n              onLinksUpdate={handleLinkUpdate}\n              onAcceptSuggestion={handleAcceptSuggestion}\n              onRejectSuggestion={handleRejectSuggestion}\n              onRefreshStart={() => setAutoRefreshUntilMs(Date.now() + 30000)}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noStaticElementInteractions",
      "severity": "warning",
      "description": "Static Elements should not be interactive.",
      "message": [
        {
          "elements": [],
          "content": "Static Elements should not be interactive."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "To add interactivity such as a mouse or key event listener to a static element, give the element an appropriate role value."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/EnhancedDashboardLinks.tsx"
        },
        "span": [20327, 20509],
        "sourceCode": "'use client';\n\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { toast } from 'sonner';\nimport type { ProfileSocialLink } from '@/app/app/dashboard/actions';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport { usePreviewPanel } from '@/app/app/dashboard/PreviewPanelContext';\nimport { Input } from '@/components/atoms/Input';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\n\nimport { updateProfile as updateProfileApi } from '@/lib/api-client/endpoints/dashboard/profile';\nimport {\n  acceptSuggestion,\n  dismissSuggestion,\n  getSocialLinks,\n  updateSocialLinksSafe,\n} from '@/lib/api-client/endpoints/dashboard/social-links';\nimport { ApiError } from '@/lib/api-client/types';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { usePollingCoordinator } from '@/lib/hooks/usePollingCoordinator';\nimport { useProfileSaveToasts } from '@/lib/hooks/useProfileSaveToasts';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { getProfileIdentity } from '@/lib/profile/profile-identity';\nimport { debounce } from '@/lib/utils';\nimport {\n  type DetectedLink,\n  getPlatformCategory,\n  type PlatformCategory,\n} from '@/lib/utils/platform-detection';\nimport {\n  getSocialPlatformLabel,\n  type SaveStatus,\n  type SocialPlatform,\n} from '@/types';\nimport { type Artist, convertDrizzleCreatorProfileToArtist } from '@/types/db';\n\nconst GroupedLinksManager = dynamic(\n  () =>\n    import('@/components/dashboard/organisms/GroupedLinksManager').then(\n      mod => ({\n        default: mod.GroupedLinksManager,\n      })\n    ),\n  {\n    loading: () => (\n      <div className='space-y-3'>\n        {Array.from({ length: 4 }).map((_, i) => (\n          <div key={i} className='h-16 animate-pulse rounded-lg bg-surface-1' />\n        ))}\n      </div>\n    ),\n    ssr: false,\n  }\n);\n\ntype ProfileUpdatePayload = {\n  username?: string;\n  displayName?: string;\n  avatarUrl?: string;\n};\n\ntype ProfileUpdateResponse = {\n  profile: {\n    username?: string;\n    displayName?: string | null;\n    avatarUrl?: string | null;\n  };\n  warning?: string;\n};\n\n// Alias PlatformCategory from shared utility for local usage\ntype PlatformType = PlatformCategory;\n\ninterface Platform {\n  id: string;\n  name: string;\n  category: PlatformType;\n  icon: string;\n  color: string;\n  placeholder: string;\n}\n\ninterface LinkItem {\n  id: string;\n  title: string;\n  url: string;\n  platform: Platform;\n  isVisible: boolean;\n  order: number;\n  category: PlatformType;\n  normalizedUrl: string;\n  originalUrl: string;\n  suggestedTitle: string;\n  isValid: boolean;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n  version?: number;\n}\n\ninterface SuggestedLink extends DetectedLink {\n  suggestionId: string;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n}\n\nfunction areLinkItemsEqual(a: LinkItem[], b: LinkItem[]): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i += 1) {\n    const left = a[i];\n    const right = b[i];\n    if (!right) return false;\n    if (left.id !== right.id) return false;\n    if (left.normalizedUrl !== right.normalizedUrl) return false;\n    if (left.originalUrl !== right.originalUrl) return false;\n    if (left.isVisible !== right.isVisible) return false;\n    if (left.category !== right.category) return false;\n    if (left.platform.id !== right.platform.id) return false;\n  }\n  return true;\n}\n\nfunction areSuggestionListsEqual(\n  a: SuggestedLink[],\n  b: SuggestedLink[]\n): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n\n  const serialize = (list: SuggestedLink[]) =>\n    list\n      .map(\n        item =>\n          `${item.suggestionId ?? item.normalizedUrl}:${item.platform.id}:${item.normalizedUrl}`\n      )\n      .sort();\n\n  const aSig = serialize(a);\n  const bSig = serialize(b);\n  return aSig.every((value, index) => value === bSig[index]);\n}\n\nexport function EnhancedDashboardLinks({\n  initialLinks,\n}: {\n  initialLinks: ProfileSocialLink[];\n}) {\n  const router = useRouter();\n  const dashboardData = useDashboardData();\n  const [artist, setArtist] = useState<Artist | null>(\n    dashboardData.selectedProfile\n      ? convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n      : null\n  );\n  const isMusicProfile =\n    dashboardData.selectedProfile?.creatorType === 'artist';\n  const profileId = dashboardData.selectedProfile?.id;\n\n  const [profileDisplayName, setProfileDisplayName] = useState<string>(\n    dashboardData.selectedProfile?.displayName ?? ''\n  );\n  const [profileUsername, setProfileUsername] = useState<string>(\n    dashboardData.selectedProfile?.username ?? ''\n  );\n\n  const [editingField, setEditingField] = useState<\n    'displayName' | 'username' | null\n  >(null);\n  const displayNameInputRef = useRef<HTMLInputElement>(null);\n  const usernameInputRef = useRef<HTMLInputElement>(null);\n\n  const [profileSaveStatus, setProfileSaveStatus] = useState<SaveStatus>({\n    saving: false,\n    success: null,\n    error: null,\n    lastSaved: null,\n  });\n  const lastProfileSavedRef = useRef<{\n    displayName: string;\n    username: string;\n  } | null>(null);\n  const linkIngestionGate = useFeatureGate(STATSIG_FLAGS.LINK_INGESTION);\n  const suggestionsEnabled = linkIngestionGate?.value ?? false;\n\n  useEffect(() => {\n    if (!profileSaveStatus.success) return;\n    const timeoutId = window.setTimeout(() => {\n      setProfileSaveStatus(prev => ({ ...prev, success: null }));\n    }, 1500);\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [profileSaveStatus.success]);\n\n  useProfileSaveToasts(profileSaveStatus);\n\n  const [autoRefreshUntilMs, setAutoRefreshUntilMs] = useState<number | null>(\n    null\n  );\n  useEffect(() => {\n    if (!dashboardData.selectedProfile) {\n      setArtist(null);\n      setProfileDisplayName('');\n      setProfileUsername('');\n      setEditingField(null);\n      lastProfileSavedRef.current = null;\n      return;\n    }\n\n    setArtist(\n      convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n    );\n    setProfileDisplayName(dashboardData.selectedProfile.displayName ?? '');\n    setProfileUsername(dashboardData.selectedProfile.username ?? '');\n\n    lastProfileSavedRef.current = {\n      displayName: dashboardData.selectedProfile.displayName ?? '',\n      username: dashboardData.selectedProfile.username ?? '',\n    };\n    setProfileSaveStatus({\n      saving: false,\n      success: null,\n      error: null,\n      lastSaved: null,\n    });\n  }, [dashboardData.selectedProfile]);\n\n  useEffect(() => {\n    if (editingField === 'displayName') {\n      displayNameInputRef.current?.focus();\n      displayNameInputRef.current?.select();\n    }\n    if (editingField === 'username') {\n      usernameInputRef.current?.focus();\n      usernameInputRef.current?.select();\n    }\n  }, [editingField]);\n\n  const updateProfile = useCallback(\n    async (updates: ProfileUpdatePayload): Promise<ProfileUpdateResponse> => {\n      const response = await updateProfileApi(updates);\n      return response as ProfileUpdateResponse;\n    },\n    []\n  );\n\n  const uploadAvatar = useCallback(async (file: File): Promise<string> => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await fetch('/api/images/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const body = (await response.json().catch(() => null)) as {\n      blobUrl?: string;\n      error?: string;\n    } | null;\n\n    if (!response.ok) {\n      const message = body?.error ?? 'Upload failed';\n      throw new Error(message);\n    }\n\n    if (!body?.blobUrl) {\n      throw new Error('Upload failed');\n    }\n\n    return body.blobUrl;\n  }, []);\n\n  const saveProfile = useCallback(\n    async (next: { displayName: string; username: string }): Promise<void> => {\n      if (!profileId) {\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: 'Missing profile id; please refresh and try again.',\n          lastSaved: null,\n        });\n        toast.error('Missing profile id; please refresh and try again.');\n        return;\n      }\n\n      const username = next.username.trim();\n      const displayName = next.displayName.trim();\n\n      if (displayName.length === 0 || username.length === 0) {\n        return;\n      }\n\n      const lastSaved = lastProfileSavedRef.current;\n      if (\n        lastSaved &&\n        lastSaved.displayName === displayName &&\n        lastSaved.username === username\n      ) {\n        return;\n      }\n\n      setProfileSaveStatus(prev => ({\n        ...prev,\n        saving: true,\n        success: null,\n        error: null,\n      }));\n\n      try {\n        const result = await updateProfile({\n          displayName,\n          username,\n        });\n\n        const nextHandle = result.profile.username ?? artist?.handle;\n        const nextName = result.profile.displayName ?? artist?.name;\n        const nextAvatar =\n          typeof result.profile.avatarUrl === 'string'\n            ? result.profile.avatarUrl\n            : artist?.image_url;\n\n        if (nextHandle || nextName || nextAvatar) {\n          setArtist(prev => {\n            if (!prev) return prev;\n            return {\n              ...prev,\n              handle: nextHandle ?? prev.handle,\n              name: nextName ?? prev.name,\n              image_url: nextAvatar ?? prev.image_url,\n            };\n          });\n        }\n\n        lastProfileSavedRef.current = { displayName, username };\n\n        setProfileSaveStatus({\n          saving: false,\n          success: true,\n          error: null,\n          lastSaved: new Date(),\n        });\n\n        if (result.warning) {\n          toast.message(result.warning);\n        }\n\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : 'Failed to update profile';\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: message,\n          lastSaved: null,\n        });\n        toast.error(message);\n      }\n    },\n    [\n      artist?.handle,\n      artist?.image_url,\n      artist?.name,\n      profileId,\n      router,\n      updateProfile,\n    ]\n  );\n\n  const debouncedProfileSave = useMemo(\n    () =>\n      debounce(async (...args: unknown[]) => {\n        const [next] = args as [{ displayName: string; username: string }];\n        await saveProfile(next);\n      }, 900),\n    [saveProfile]\n  );\n\n  useEffect(() => {\n    return () => {\n      debouncedProfileSave.flush();\n    };\n  }, [debouncedProfileSave]);\n\n  const handleAvatarUpload = useCallback(\n    async (file: File): Promise<string> => {\n      try {\n        const blobUrl = await uploadAvatar(file);\n        const result = await updateProfile({ avatarUrl: blobUrl });\n        const nextAvatar = result.profile.avatarUrl ?? blobUrl;\n        setArtist(prev => {\n          if (!prev) return prev;\n          return { ...prev, image_url: nextAvatar };\n        });\n        if (result.warning) {\n          toast.message(result.warning);\n        } else {\n          toast.success('Profile photo updated');\n        }\n        router.refresh();\n        return nextAvatar;\n      } finally {\n        // no-op\n      }\n    },\n    [router, updateProfile, uploadAvatar]\n  );\n\n  const buildPlatformMeta = useCallback((link: ProfileSocialLink): Platform => {\n    const displayName = getSocialPlatformLabel(link.platform as SocialPlatform);\n    const category: PlatformType =\n      (link.platformType as PlatformType | null | undefined) ??\n      getPlatformCategory(link.platform);\n    return {\n      id: link.platform,\n      name: displayName,\n      category,\n      icon: link.platform,\n      color: '#000000',\n      placeholder: link.url,\n    };\n  }, []);\n\n  const convertDbLinkToDetected = useCallback(\n    (\n      link: ProfileSocialLink\n    ): DetectedLink & {\n      id: string;\n      state?: 'active' | 'suggested' | 'rejected';\n      confidence?: number | null;\n      sourcePlatform?: string | null;\n      sourceType?: 'manual' | 'admin' | 'ingested' | null;\n      evidence?: { sources?: string[]; signals?: string[] } | null;\n    } => {\n      const platform = buildPlatformMeta(link);\n      const title = link.displayText || platform.name;\n      return {\n        // DetectedLink fields\n        platform,\n        normalizedUrl: link.url,\n        originalUrl: link.url,\n        suggestedTitle: title,\n        isValid: true,\n        // Extended metadata\n        id: link.id,\n        state: link.state ?? 'active',\n        confidence:\n          typeof link.confidence === 'number'\n            ? link.confidence\n            : Number.parseFloat(String(link.confidence ?? '0')) || null,\n        sourcePlatform: link.sourcePlatform ?? null,\n        sourceType: link.sourceType ?? null,\n        evidence: link.evidence ?? null,\n      };\n    },\n    [buildPlatformMeta]\n  );\n\n  // Convert database social links to LinkItem format\n  const convertDbLinksToLinkItems = useCallback(\n    (dbLinks: ProfileSocialLink[] = []): LinkItem[] => {\n      return dbLinks.map((link, index) => {\n        const detected = convertDbLinkToDetected(link);\n        const platformMeta = buildPlatformMeta(link);\n        const order =\n          typeof link.sortOrder === 'number' ? link.sortOrder : index;\n        const isVisible = link.isActive ?? true;\n        const category = platformMeta.category;\n\n        const item: LinkItem = {\n          id: detected.id,\n          title: detected.suggestedTitle,\n          url: detected.normalizedUrl,\n          platform: platformMeta,\n          isVisible,\n          order,\n          category,\n          normalizedUrl: detected.normalizedUrl,\n          originalUrl: detected.originalUrl,\n          suggestedTitle: detected.suggestedTitle,\n          isValid: detected.isValid,\n          state: detected.state,\n          confidence: detected.confidence ?? null,\n          sourcePlatform: detected.sourcePlatform ?? null,\n          sourceType: detected.sourceType ?? null,\n          evidence: detected.evidence ?? null,\n          version: link.version ?? 1,\n        };\n\n        return item;\n      });\n    },\n    [buildPlatformMeta, convertDbLinkToDetected]\n  );\n\n  const [links, setLinks] = useState<LinkItem[]>(() =>\n    convertDbLinksToLinkItems(initialLinks)\n  );\n\n  const [suggestions, setSuggestions] = useState<SuggestedLink[]>([]);\n  const suggestionsRef = useRef<SuggestedLink[]>(suggestions);\n\n  useEffect(() => {\n    suggestionsRef.current = suggestions;\n  }, [suggestions]);\n\n  const handleLinkUpdate = useCallback(\n    async (\n      updatedLinks: LinkItem[]\n    ): Promise<{ success: boolean; error?: string }> => {\n      try {\n        const formattedLinks = updatedLinks.map(item => ({\n          id: item.id,\n          sortOrder: item.order,\n          isActive: item.isVisible,\n          platform: item.platform.id,\n        }));\n\n        await updateSocialLinksSafe(formattedLinks);\n        setLinks(updatedLinks);\n        return { success: true };\n      } catch (error) {\n        const errorMessage =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error\n              ? error.message\n              : 'Unknown error updating links';\n        return { success: false, error: errorMessage };\n      }\n    },\n    []\n  );\n\n  const handleAcceptSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await acceptSuggestion(suggestionId);\n\n        const suggestion = suggestionsRef.current.find(\n          s => s.suggestionId === suggestionId\n        );\n        if (suggestion) {\n          const newLinkItem: LinkItem = {\n            id: suggestionId,\n            title: suggestion.suggestedTitle,\n            url: suggestion.normalizedUrl,\n            platform: suggestion.platform,\n            isVisible: true,\n            order: links.length,\n            category: suggestion.platform.category,\n            normalizedUrl: suggestion.normalizedUrl,\n            originalUrl: suggestion.originalUrl,\n            suggestedTitle: suggestion.suggestedTitle,\n            isValid: suggestion.isValid,\n            state: 'active',\n            confidence: suggestion.confidence ?? null,\n            sourcePlatform: suggestion.sourcePlatform ?? null,\n            sourceType: suggestion.sourceType ?? null,\n            evidence: suggestion.evidence ?? null,\n            version: 1,\n          };\n\n          const updatedLinks = [...links, newLinkItem];\n          await handleLinkUpdate(updatedLinks);\n\n          setSuggestions(prev =>\n            prev.filter(s => s.suggestionId !== suggestionId)\n          );\n        }\n\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to accept suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    [links, handleLinkUpdate]\n  );\n\n  const handleRejectSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await dismissSuggestion(suggestionId);\n        setSuggestions(prev =>\n          prev.filter(s => s.suggestionId !== suggestionId)\n        );\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to reject suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    []\n  );\n\n  const loadSocialLinks = useCallback(async (): Promise<void> => {\n    if (!profileId) return;\n\n    try {\n      const response = await getSocialLinks(profileId);\n      if (response.links) {\n        const dbLinks = response.links as ProfileSocialLink[];\n        const convertedLinks = convertDbLinksToLinkItems(dbLinks);\n        setLinks(convertedLinks);\n      }\n\n      if (suggestionsEnabled && response.suggestions) {\n        setSuggestions(\n          response.suggestions.map((suggestion: SuggestedLink, index: number) => ({\n            ...suggestion,\n            suggestionId: suggestion.suggestionId ?? `suggestion-${index}`,\n          }))\n        );\n      }\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to load links';\n      console.error('Error loading social links:', message);\n    }\n  }, [profileId, suggestionsEnabled, convertDbLinksToLinkItems]);\n\n  // Poll for social links if suggestions are enabled\n  const pollingEnabled =\n    suggestionsEnabled && profileId ? autoRefreshUntilMs !== null : false;\n  usePollingCoordinator(\n    () => {\n      loadSocialLinks();\n    },\n    {\n      enabled: pollingEnabled,\n      interval: 3000,\n      maxDuration: autoRefreshUntilMs,\n    }\n  );\n\n  // Load links on mount and profile change\n  useEffect(() => {\n    loadSocialLinks();\n  }, [loadSocialLinks]);\n\n  return (\n    <div className='w-full'>\n      <div className='space-y-6'>\n        <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n          <div className='space-y-4'>\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Display Name\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'displayName' ? (\n                  <Input\n                    ref={displayNameInputRef}\n                    value={profileDisplayName}\n                    onChange={e => {\n                      setProfileDisplayName(e.target.value);\n                      debouncedProfileSave({\n                        displayName: e.target.value,\n                        username: profileUsername,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('displayName')}\n                  >\n                    {profileDisplayName || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Username\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'username' ? (\n                  <Input\n                    ref={usernameInputRef}\n                    value={profileUsername}\n                    onChange={e => {\n                      setProfileUsername(e.target.value);\n                      debouncedProfileSave({\n                        displayName: profileDisplayName,\n                        username: e.target.value,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('username')}\n                  >\n                    {profileUsername || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Profile Photo\n              </label>\n              <AvatarUploadable\n                src={artist?.image_url}\n                onUpload={handleAvatarUpload}\n                maxFileSizeBytes={AVATAR_MAX_FILE_SIZE_BYTES}\n                supportedMimeTypes={SUPPORTED_IMAGE_MIME_TYPES}\n                aria-label='Upload profile photo'\n              />\n            </div>\n\n            {profileSaveStatus.error && (\n              <div className='rounded bg-red-100 p-3 text-sm text-red-800'>\n                {profileSaveStatus.error}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {isMusicProfile && (\n          <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n            <h2 className='mb-4 text-lg font-semibold text-content-primary'>\n              Social Links\n            </h2>\n            <GroupedLinksManager\n              links={links}\n              suggestions={suggestions}\n              onLinksUpdate={handleLinkUpdate}\n              onAcceptSuggestion={handleAcceptSuggestion}\n              onRejectSuggestion={handleRejectSuggestion}\n              onRefreshStart={() => setAutoRefreshUntilMs(Date.now() + 30000)}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/EnhancedDashboardLinks.tsx"
        },
        "span": [20327, 20509],
        "sourceCode": "'use client';\n\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { toast } from 'sonner';\nimport type { ProfileSocialLink } from '@/app/app/dashboard/actions';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport { usePreviewPanel } from '@/app/app/dashboard/PreviewPanelContext';\nimport { Input } from '@/components/atoms/Input';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\n\nimport { updateProfile as updateProfileApi } from '@/lib/api-client/endpoints/dashboard/profile';\nimport {\n  acceptSuggestion,\n  dismissSuggestion,\n  getSocialLinks,\n  updateSocialLinksSafe,\n} from '@/lib/api-client/endpoints/dashboard/social-links';\nimport { ApiError } from '@/lib/api-client/types';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { usePollingCoordinator } from '@/lib/hooks/usePollingCoordinator';\nimport { useProfileSaveToasts } from '@/lib/hooks/useProfileSaveToasts';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { getProfileIdentity } from '@/lib/profile/profile-identity';\nimport { debounce } from '@/lib/utils';\nimport {\n  type DetectedLink,\n  getPlatformCategory,\n  type PlatformCategory,\n} from '@/lib/utils/platform-detection';\nimport {\n  getSocialPlatformLabel,\n  type SaveStatus,\n  type SocialPlatform,\n} from '@/types';\nimport { type Artist, convertDrizzleCreatorProfileToArtist } from '@/types/db';\n\nconst GroupedLinksManager = dynamic(\n  () =>\n    import('@/components/dashboard/organisms/GroupedLinksManager').then(\n      mod => ({\n        default: mod.GroupedLinksManager,\n      })\n    ),\n  {\n    loading: () => (\n      <div className='space-y-3'>\n        {Array.from({ length: 4 }).map((_, i) => (\n          <div key={i} className='h-16 animate-pulse rounded-lg bg-surface-1' />\n        ))}\n      </div>\n    ),\n    ssr: false,\n  }\n);\n\ntype ProfileUpdatePayload = {\n  username?: string;\n  displayName?: string;\n  avatarUrl?: string;\n};\n\ntype ProfileUpdateResponse = {\n  profile: {\n    username?: string;\n    displayName?: string | null;\n    avatarUrl?: string | null;\n  };\n  warning?: string;\n};\n\n// Alias PlatformCategory from shared utility for local usage\ntype PlatformType = PlatformCategory;\n\ninterface Platform {\n  id: string;\n  name: string;\n  category: PlatformType;\n  icon: string;\n  color: string;\n  placeholder: string;\n}\n\ninterface LinkItem {\n  id: string;\n  title: string;\n  url: string;\n  platform: Platform;\n  isVisible: boolean;\n  order: number;\n  category: PlatformType;\n  normalizedUrl: string;\n  originalUrl: string;\n  suggestedTitle: string;\n  isValid: boolean;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n  version?: number;\n}\n\ninterface SuggestedLink extends DetectedLink {\n  suggestionId: string;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n}\n\nfunction areLinkItemsEqual(a: LinkItem[], b: LinkItem[]): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i += 1) {\n    const left = a[i];\n    const right = b[i];\n    if (!right) return false;\n    if (left.id !== right.id) return false;\n    if (left.normalizedUrl !== right.normalizedUrl) return false;\n    if (left.originalUrl !== right.originalUrl) return false;\n    if (left.isVisible !== right.isVisible) return false;\n    if (left.category !== right.category) return false;\n    if (left.platform.id !== right.platform.id) return false;\n  }\n  return true;\n}\n\nfunction areSuggestionListsEqual(\n  a: SuggestedLink[],\n  b: SuggestedLink[]\n): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n\n  const serialize = (list: SuggestedLink[]) =>\n    list\n      .map(\n        item =>\n          `${item.suggestionId ?? item.normalizedUrl}:${item.platform.id}:${item.normalizedUrl}`\n      )\n      .sort();\n\n  const aSig = serialize(a);\n  const bSig = serialize(b);\n  return aSig.every((value, index) => value === bSig[index]);\n}\n\nexport function EnhancedDashboardLinks({\n  initialLinks,\n}: {\n  initialLinks: ProfileSocialLink[];\n}) {\n  const router = useRouter();\n  const dashboardData = useDashboardData();\n  const [artist, setArtist] = useState<Artist | null>(\n    dashboardData.selectedProfile\n      ? convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n      : null\n  );\n  const isMusicProfile =\n    dashboardData.selectedProfile?.creatorType === 'artist';\n  const profileId = dashboardData.selectedProfile?.id;\n\n  const [profileDisplayName, setProfileDisplayName] = useState<string>(\n    dashboardData.selectedProfile?.displayName ?? ''\n  );\n  const [profileUsername, setProfileUsername] = useState<string>(\n    dashboardData.selectedProfile?.username ?? ''\n  );\n\n  const [editingField, setEditingField] = useState<\n    'displayName' | 'username' | null\n  >(null);\n  const displayNameInputRef = useRef<HTMLInputElement>(null);\n  const usernameInputRef = useRef<HTMLInputElement>(null);\n\n  const [profileSaveStatus, setProfileSaveStatus] = useState<SaveStatus>({\n    saving: false,\n    success: null,\n    error: null,\n    lastSaved: null,\n  });\n  const lastProfileSavedRef = useRef<{\n    displayName: string;\n    username: string;\n  } | null>(null);\n  const linkIngestionGate = useFeatureGate(STATSIG_FLAGS.LINK_INGESTION);\n  const suggestionsEnabled = linkIngestionGate?.value ?? false;\n\n  useEffect(() => {\n    if (!profileSaveStatus.success) return;\n    const timeoutId = window.setTimeout(() => {\n      setProfileSaveStatus(prev => ({ ...prev, success: null }));\n    }, 1500);\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [profileSaveStatus.success]);\n\n  useProfileSaveToasts(profileSaveStatus);\n\n  const [autoRefreshUntilMs, setAutoRefreshUntilMs] = useState<number | null>(\n    null\n  );\n  useEffect(() => {\n    if (!dashboardData.selectedProfile) {\n      setArtist(null);\n      setProfileDisplayName('');\n      setProfileUsername('');\n      setEditingField(null);\n      lastProfileSavedRef.current = null;\n      return;\n    }\n\n    setArtist(\n      convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n    );\n    setProfileDisplayName(dashboardData.selectedProfile.displayName ?? '');\n    setProfileUsername(dashboardData.selectedProfile.username ?? '');\n\n    lastProfileSavedRef.current = {\n      displayName: dashboardData.selectedProfile.displayName ?? '',\n      username: dashboardData.selectedProfile.username ?? '',\n    };\n    setProfileSaveStatus({\n      saving: false,\n      success: null,\n      error: null,\n      lastSaved: null,\n    });\n  }, [dashboardData.selectedProfile]);\n\n  useEffect(() => {\n    if (editingField === 'displayName') {\n      displayNameInputRef.current?.focus();\n      displayNameInputRef.current?.select();\n    }\n    if (editingField === 'username') {\n      usernameInputRef.current?.focus();\n      usernameInputRef.current?.select();\n    }\n  }, [editingField]);\n\n  const updateProfile = useCallback(\n    async (updates: ProfileUpdatePayload): Promise<ProfileUpdateResponse> => {\n      const response = await updateProfileApi(updates);\n      return response as ProfileUpdateResponse;\n    },\n    []\n  );\n\n  const uploadAvatar = useCallback(async (file: File): Promise<string> => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await fetch('/api/images/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const body = (await response.json().catch(() => null)) as {\n      blobUrl?: string;\n      error?: string;\n    } | null;\n\n    if (!response.ok) {\n      const message = body?.error ?? 'Upload failed';\n      throw new Error(message);\n    }\n\n    if (!body?.blobUrl) {\n      throw new Error('Upload failed');\n    }\n\n    return body.blobUrl;\n  }, []);\n\n  const saveProfile = useCallback(\n    async (next: { displayName: string; username: string }): Promise<void> => {\n      if (!profileId) {\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: 'Missing profile id; please refresh and try again.',\n          lastSaved: null,\n        });\n        toast.error('Missing profile id; please refresh and try again.');\n        return;\n      }\n\n      const username = next.username.trim();\n      const displayName = next.displayName.trim();\n\n      if (displayName.length === 0 || username.length === 0) {\n        return;\n      }\n\n      const lastSaved = lastProfileSavedRef.current;\n      if (\n        lastSaved &&\n        lastSaved.displayName === displayName &&\n        lastSaved.username === username\n      ) {\n        return;\n      }\n\n      setProfileSaveStatus(prev => ({\n        ...prev,\n        saving: true,\n        success: null,\n        error: null,\n      }));\n\n      try {\n        const result = await updateProfile({\n          displayName,\n          username,\n        });\n\n        const nextHandle = result.profile.username ?? artist?.handle;\n        const nextName = result.profile.displayName ?? artist?.name;\n        const nextAvatar =\n          typeof result.profile.avatarUrl === 'string'\n            ? result.profile.avatarUrl\n            : artist?.image_url;\n\n        if (nextHandle || nextName || nextAvatar) {\n          setArtist(prev => {\n            if (!prev) return prev;\n            return {\n              ...prev,\n              handle: nextHandle ?? prev.handle,\n              name: nextName ?? prev.name,\n              image_url: nextAvatar ?? prev.image_url,\n            };\n          });\n        }\n\n        lastProfileSavedRef.current = { displayName, username };\n\n        setProfileSaveStatus({\n          saving: false,\n          success: true,\n          error: null,\n          lastSaved: new Date(),\n        });\n\n        if (result.warning) {\n          toast.message(result.warning);\n        }\n\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : 'Failed to update profile';\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: message,\n          lastSaved: null,\n        });\n        toast.error(message);\n      }\n    },\n    [\n      artist?.handle,\n      artist?.image_url,\n      artist?.name,\n      profileId,\n      router,\n      updateProfile,\n    ]\n  );\n\n  const debouncedProfileSave = useMemo(\n    () =>\n      debounce(async (...args: unknown[]) => {\n        const [next] = args as [{ displayName: string; username: string }];\n        await saveProfile(next);\n      }, 900),\n    [saveProfile]\n  );\n\n  useEffect(() => {\n    return () => {\n      debouncedProfileSave.flush();\n    };\n  }, [debouncedProfileSave]);\n\n  const handleAvatarUpload = useCallback(\n    async (file: File): Promise<string> => {\n      try {\n        const blobUrl = await uploadAvatar(file);\n        const result = await updateProfile({ avatarUrl: blobUrl });\n        const nextAvatar = result.profile.avatarUrl ?? blobUrl;\n        setArtist(prev => {\n          if (!prev) return prev;\n          return { ...prev, image_url: nextAvatar };\n        });\n        if (result.warning) {\n          toast.message(result.warning);\n        } else {\n          toast.success('Profile photo updated');\n        }\n        router.refresh();\n        return nextAvatar;\n      } finally {\n        // no-op\n      }\n    },\n    [router, updateProfile, uploadAvatar]\n  );\n\n  const buildPlatformMeta = useCallback((link: ProfileSocialLink): Platform => {\n    const displayName = getSocialPlatformLabel(link.platform as SocialPlatform);\n    const category: PlatformType =\n      (link.platformType as PlatformType | null | undefined) ??\n      getPlatformCategory(link.platform);\n    return {\n      id: link.platform,\n      name: displayName,\n      category,\n      icon: link.platform,\n      color: '#000000',\n      placeholder: link.url,\n    };\n  }, []);\n\n  const convertDbLinkToDetected = useCallback(\n    (\n      link: ProfileSocialLink\n    ): DetectedLink & {\n      id: string;\n      state?: 'active' | 'suggested' | 'rejected';\n      confidence?: number | null;\n      sourcePlatform?: string | null;\n      sourceType?: 'manual' | 'admin' | 'ingested' | null;\n      evidence?: { sources?: string[]; signals?: string[] } | null;\n    } => {\n      const platform = buildPlatformMeta(link);\n      const title = link.displayText || platform.name;\n      return {\n        // DetectedLink fields\n        platform,\n        normalizedUrl: link.url,\n        originalUrl: link.url,\n        suggestedTitle: title,\n        isValid: true,\n        // Extended metadata\n        id: link.id,\n        state: link.state ?? 'active',\n        confidence:\n          typeof link.confidence === 'number'\n            ? link.confidence\n            : Number.parseFloat(String(link.confidence ?? '0')) || null,\n        sourcePlatform: link.sourcePlatform ?? null,\n        sourceType: link.sourceType ?? null,\n        evidence: link.evidence ?? null,\n      };\n    },\n    [buildPlatformMeta]\n  );\n\n  // Convert database social links to LinkItem format\n  const convertDbLinksToLinkItems = useCallback(\n    (dbLinks: ProfileSocialLink[] = []): LinkItem[] => {\n      return dbLinks.map((link, index) => {\n        const detected = convertDbLinkToDetected(link);\n        const platformMeta = buildPlatformMeta(link);\n        const order =\n          typeof link.sortOrder === 'number' ? link.sortOrder : index;\n        const isVisible = link.isActive ?? true;\n        const category = platformMeta.category;\n\n        const item: LinkItem = {\n          id: detected.id,\n          title: detected.suggestedTitle,\n          url: detected.normalizedUrl,\n          platform: platformMeta,\n          isVisible,\n          order,\n          category,\n          normalizedUrl: detected.normalizedUrl,\n          originalUrl: detected.originalUrl,\n          suggestedTitle: detected.suggestedTitle,\n          isValid: detected.isValid,\n          state: detected.state,\n          confidence: detected.confidence ?? null,\n          sourcePlatform: detected.sourcePlatform ?? null,\n          sourceType: detected.sourceType ?? null,\n          evidence: detected.evidence ?? null,\n          version: link.version ?? 1,\n        };\n\n        return item;\n      });\n    },\n    [buildPlatformMeta, convertDbLinkToDetected]\n  );\n\n  const [links, setLinks] = useState<LinkItem[]>(() =>\n    convertDbLinksToLinkItems(initialLinks)\n  );\n\n  const [suggestions, setSuggestions] = useState<SuggestedLink[]>([]);\n  const suggestionsRef = useRef<SuggestedLink[]>(suggestions);\n\n  useEffect(() => {\n    suggestionsRef.current = suggestions;\n  }, [suggestions]);\n\n  const handleLinkUpdate = useCallback(\n    async (\n      updatedLinks: LinkItem[]\n    ): Promise<{ success: boolean; error?: string }> => {\n      try {\n        const formattedLinks = updatedLinks.map(item => ({\n          id: item.id,\n          sortOrder: item.order,\n          isActive: item.isVisible,\n          platform: item.platform.id,\n        }));\n\n        await updateSocialLinksSafe(formattedLinks);\n        setLinks(updatedLinks);\n        return { success: true };\n      } catch (error) {\n        const errorMessage =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error\n              ? error.message\n              : 'Unknown error updating links';\n        return { success: false, error: errorMessage };\n      }\n    },\n    []\n  );\n\n  const handleAcceptSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await acceptSuggestion(suggestionId);\n\n        const suggestion = suggestionsRef.current.find(\n          s => s.suggestionId === suggestionId\n        );\n        if (suggestion) {\n          const newLinkItem: LinkItem = {\n            id: suggestionId,\n            title: suggestion.suggestedTitle,\n            url: suggestion.normalizedUrl,\n            platform: suggestion.platform,\n            isVisible: true,\n            order: links.length,\n            category: suggestion.platform.category,\n            normalizedUrl: suggestion.normalizedUrl,\n            originalUrl: suggestion.originalUrl,\n            suggestedTitle: suggestion.suggestedTitle,\n            isValid: suggestion.isValid,\n            state: 'active',\n            confidence: suggestion.confidence ?? null,\n            sourcePlatform: suggestion.sourcePlatform ?? null,\n            sourceType: suggestion.sourceType ?? null,\n            evidence: suggestion.evidence ?? null,\n            version: 1,\n          };\n\n          const updatedLinks = [...links, newLinkItem];\n          await handleLinkUpdate(updatedLinks);\n\n          setSuggestions(prev =>\n            prev.filter(s => s.suggestionId !== suggestionId)\n          );\n        }\n\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to accept suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    [links, handleLinkUpdate]\n  );\n\n  const handleRejectSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await dismissSuggestion(suggestionId);\n        setSuggestions(prev =>\n          prev.filter(s => s.suggestionId !== suggestionId)\n        );\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to reject suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    []\n  );\n\n  const loadSocialLinks = useCallback(async (): Promise<void> => {\n    if (!profileId) return;\n\n    try {\n      const response = await getSocialLinks(profileId);\n      if (response.links) {\n        const dbLinks = response.links as ProfileSocialLink[];\n        const convertedLinks = convertDbLinksToLinkItems(dbLinks);\n        setLinks(convertedLinks);\n      }\n\n      if (suggestionsEnabled && response.suggestions) {\n        setSuggestions(\n          response.suggestions.map((suggestion: SuggestedLink, index: number) => ({\n            ...suggestion,\n            suggestionId: suggestion.suggestionId ?? `suggestion-${index}`,\n          }))\n        );\n      }\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to load links';\n      console.error('Error loading social links:', message);\n    }\n  }, [profileId, suggestionsEnabled, convertDbLinksToLinkItems]);\n\n  // Poll for social links if suggestions are enabled\n  const pollingEnabled =\n    suggestionsEnabled && profileId ? autoRefreshUntilMs !== null : false;\n  usePollingCoordinator(\n    () => {\n      loadSocialLinks();\n    },\n    {\n      enabled: pollingEnabled,\n      interval: 3000,\n      maxDuration: autoRefreshUntilMs,\n    }\n  );\n\n  // Load links on mount and profile change\n  useEffect(() => {\n    loadSocialLinks();\n  }, [loadSocialLinks]);\n\n  return (\n    <div className='w-full'>\n      <div className='space-y-6'>\n        <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n          <div className='space-y-4'>\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Display Name\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'displayName' ? (\n                  <Input\n                    ref={displayNameInputRef}\n                    value={profileDisplayName}\n                    onChange={e => {\n                      setProfileDisplayName(e.target.value);\n                      debouncedProfileSave({\n                        displayName: e.target.value,\n                        username: profileUsername,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('displayName')}\n                  >\n                    {profileDisplayName || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Username\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'username' ? (\n                  <Input\n                    ref={usernameInputRef}\n                    value={profileUsername}\n                    onChange={e => {\n                      setProfileUsername(e.target.value);\n                      debouncedProfileSave({\n                        displayName: profileDisplayName,\n                        username: e.target.value,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('username')}\n                  >\n                    {profileUsername || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Profile Photo\n              </label>\n              <AvatarUploadable\n                src={artist?.image_url}\n                onUpload={handleAvatarUpload}\n                maxFileSizeBytes={AVATAR_MAX_FILE_SIZE_BYTES}\n                supportedMimeTypes={SUPPORTED_IMAGE_MIME_TYPES}\n                aria-label='Upload profile photo'\n              />\n            </div>\n\n            {profileSaveStatus.error && (\n              <div className='rounded bg-red-100 p-3 text-sm text-red-800'>\n                {profileSaveStatus.error}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {isMusicProfile && (\n          <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n            <h2 className='mb-4 text-lg font-semibold text-content-primary'>\n              Social Links\n            </h2>\n            <GroupedLinksManager\n              links={links}\n              suggestions={suggestions}\n              onLinksUpdate={handleLinkUpdate}\n              onAcceptSuggestion={handleAcceptSuggestion}\n              onRejectSuggestion={handleRejectSuggestion}\n              onRefreshStart={() => setAutoRefreshUntilMs(Date.now() + 30000)}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useKeyWithClickEvents",
      "severity": "warning",
      "description": "Enforce to have the onClick mouse event with the onKeyUp, the onKeyDown, or the onKeyPress keyboard event.",
      "message": [
        { "elements": [], "content": "Enforce to have the " },
        { "elements": ["Emphasis"], "content": "onClick" },
        { "elements": [], "content": " mouse event with the " },
        { "elements": ["Emphasis"], "content": "onKeyUp" },
        { "elements": [], "content": ", the " },
        { "elements": ["Emphasis"], "content": "onKeyDown" },
        { "elements": [], "content": ", or the " },
        { "elements": ["Emphasis"], "content": "onKeyPress" },
        { "elements": [], "content": " keyboard event." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Actions triggered using mouse events should have corresponding keyboard events to account for keyboard-only navigation."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/EnhancedDashboardLinks.tsx"
        },
        "span": [20327, 20509],
        "sourceCode": "'use client';\n\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { toast } from 'sonner';\nimport type { ProfileSocialLink } from '@/app/app/dashboard/actions';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport { usePreviewPanel } from '@/app/app/dashboard/PreviewPanelContext';\nimport { Input } from '@/components/atoms/Input';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\n\nimport { updateProfile as updateProfileApi } from '@/lib/api-client/endpoints/dashboard/profile';\nimport {\n  acceptSuggestion,\n  dismissSuggestion,\n  getSocialLinks,\n  updateSocialLinksSafe,\n} from '@/lib/api-client/endpoints/dashboard/social-links';\nimport { ApiError } from '@/lib/api-client/types';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { usePollingCoordinator } from '@/lib/hooks/usePollingCoordinator';\nimport { useProfileSaveToasts } from '@/lib/hooks/useProfileSaveToasts';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { getProfileIdentity } from '@/lib/profile/profile-identity';\nimport { debounce } from '@/lib/utils';\nimport {\n  type DetectedLink,\n  getPlatformCategory,\n  type PlatformCategory,\n} from '@/lib/utils/platform-detection';\nimport {\n  getSocialPlatformLabel,\n  type SaveStatus,\n  type SocialPlatform,\n} from '@/types';\nimport { type Artist, convertDrizzleCreatorProfileToArtist } from '@/types/db';\n\nconst GroupedLinksManager = dynamic(\n  () =>\n    import('@/components/dashboard/organisms/GroupedLinksManager').then(\n      mod => ({\n        default: mod.GroupedLinksManager,\n      })\n    ),\n  {\n    loading: () => (\n      <div className='space-y-3'>\n        {Array.from({ length: 4 }).map((_, i) => (\n          <div key={i} className='h-16 animate-pulse rounded-lg bg-surface-1' />\n        ))}\n      </div>\n    ),\n    ssr: false,\n  }\n);\n\ntype ProfileUpdatePayload = {\n  username?: string;\n  displayName?: string;\n  avatarUrl?: string;\n};\n\ntype ProfileUpdateResponse = {\n  profile: {\n    username?: string;\n    displayName?: string | null;\n    avatarUrl?: string | null;\n  };\n  warning?: string;\n};\n\n// Alias PlatformCategory from shared utility for local usage\ntype PlatformType = PlatformCategory;\n\ninterface Platform {\n  id: string;\n  name: string;\n  category: PlatformType;\n  icon: string;\n  color: string;\n  placeholder: string;\n}\n\ninterface LinkItem {\n  id: string;\n  title: string;\n  url: string;\n  platform: Platform;\n  isVisible: boolean;\n  order: number;\n  category: PlatformType;\n  normalizedUrl: string;\n  originalUrl: string;\n  suggestedTitle: string;\n  isValid: boolean;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n  version?: number;\n}\n\ninterface SuggestedLink extends DetectedLink {\n  suggestionId: string;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n}\n\nfunction areLinkItemsEqual(a: LinkItem[], b: LinkItem[]): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i += 1) {\n    const left = a[i];\n    const right = b[i];\n    if (!right) return false;\n    if (left.id !== right.id) return false;\n    if (left.normalizedUrl !== right.normalizedUrl) return false;\n    if (left.originalUrl !== right.originalUrl) return false;\n    if (left.isVisible !== right.isVisible) return false;\n    if (left.category !== right.category) return false;\n    if (left.platform.id !== right.platform.id) return false;\n  }\n  return true;\n}\n\nfunction areSuggestionListsEqual(\n  a: SuggestedLink[],\n  b: SuggestedLink[]\n): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n\n  const serialize = (list: SuggestedLink[]) =>\n    list\n      .map(\n        item =>\n          `${item.suggestionId ?? item.normalizedUrl}:${item.platform.id}:${item.normalizedUrl}`\n      )\n      .sort();\n\n  const aSig = serialize(a);\n  const bSig = serialize(b);\n  return aSig.every((value, index) => value === bSig[index]);\n}\n\nexport function EnhancedDashboardLinks({\n  initialLinks,\n}: {\n  initialLinks: ProfileSocialLink[];\n}) {\n  const router = useRouter();\n  const dashboardData = useDashboardData();\n  const [artist, setArtist] = useState<Artist | null>(\n    dashboardData.selectedProfile\n      ? convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n      : null\n  );\n  const isMusicProfile =\n    dashboardData.selectedProfile?.creatorType === 'artist';\n  const profileId = dashboardData.selectedProfile?.id;\n\n  const [profileDisplayName, setProfileDisplayName] = useState<string>(\n    dashboardData.selectedProfile?.displayName ?? ''\n  );\n  const [profileUsername, setProfileUsername] = useState<string>(\n    dashboardData.selectedProfile?.username ?? ''\n  );\n\n  const [editingField, setEditingField] = useState<\n    'displayName' | 'username' | null\n  >(null);\n  const displayNameInputRef = useRef<HTMLInputElement>(null);\n  const usernameInputRef = useRef<HTMLInputElement>(null);\n\n  const [profileSaveStatus, setProfileSaveStatus] = useState<SaveStatus>({\n    saving: false,\n    success: null,\n    error: null,\n    lastSaved: null,\n  });\n  const lastProfileSavedRef = useRef<{\n    displayName: string;\n    username: string;\n  } | null>(null);\n  const linkIngestionGate = useFeatureGate(STATSIG_FLAGS.LINK_INGESTION);\n  const suggestionsEnabled = linkIngestionGate?.value ?? false;\n\n  useEffect(() => {\n    if (!profileSaveStatus.success) return;\n    const timeoutId = window.setTimeout(() => {\n      setProfileSaveStatus(prev => ({ ...prev, success: null }));\n    }, 1500);\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [profileSaveStatus.success]);\n\n  useProfileSaveToasts(profileSaveStatus);\n\n  const [autoRefreshUntilMs, setAutoRefreshUntilMs] = useState<number | null>(\n    null\n  );\n  useEffect(() => {\n    if (!dashboardData.selectedProfile) {\n      setArtist(null);\n      setProfileDisplayName('');\n      setProfileUsername('');\n      setEditingField(null);\n      lastProfileSavedRef.current = null;\n      return;\n    }\n\n    setArtist(\n      convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n    );\n    setProfileDisplayName(dashboardData.selectedProfile.displayName ?? '');\n    setProfileUsername(dashboardData.selectedProfile.username ?? '');\n\n    lastProfileSavedRef.current = {\n      displayName: dashboardData.selectedProfile.displayName ?? '',\n      username: dashboardData.selectedProfile.username ?? '',\n    };\n    setProfileSaveStatus({\n      saving: false,\n      success: null,\n      error: null,\n      lastSaved: null,\n    });\n  }, [dashboardData.selectedProfile]);\n\n  useEffect(() => {\n    if (editingField === 'displayName') {\n      displayNameInputRef.current?.focus();\n      displayNameInputRef.current?.select();\n    }\n    if (editingField === 'username') {\n      usernameInputRef.current?.focus();\n      usernameInputRef.current?.select();\n    }\n  }, [editingField]);\n\n  const updateProfile = useCallback(\n    async (updates: ProfileUpdatePayload): Promise<ProfileUpdateResponse> => {\n      const response = await updateProfileApi(updates);\n      return response as ProfileUpdateResponse;\n    },\n    []\n  );\n\n  const uploadAvatar = useCallback(async (file: File): Promise<string> => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await fetch('/api/images/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const body = (await response.json().catch(() => null)) as {\n      blobUrl?: string;\n      error?: string;\n    } | null;\n\n    if (!response.ok) {\n      const message = body?.error ?? 'Upload failed';\n      throw new Error(message);\n    }\n\n    if (!body?.blobUrl) {\n      throw new Error('Upload failed');\n    }\n\n    return body.blobUrl;\n  }, []);\n\n  const saveProfile = useCallback(\n    async (next: { displayName: string; username: string }): Promise<void> => {\n      if (!profileId) {\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: 'Missing profile id; please refresh and try again.',\n          lastSaved: null,\n        });\n        toast.error('Missing profile id; please refresh and try again.');\n        return;\n      }\n\n      const username = next.username.trim();\n      const displayName = next.displayName.trim();\n\n      if (displayName.length === 0 || username.length === 0) {\n        return;\n      }\n\n      const lastSaved = lastProfileSavedRef.current;\n      if (\n        lastSaved &&\n        lastSaved.displayName === displayName &&\n        lastSaved.username === username\n      ) {\n        return;\n      }\n\n      setProfileSaveStatus(prev => ({\n        ...prev,\n        saving: true,\n        success: null,\n        error: null,\n      }));\n\n      try {\n        const result = await updateProfile({\n          displayName,\n          username,\n        });\n\n        const nextHandle = result.profile.username ?? artist?.handle;\n        const nextName = result.profile.displayName ?? artist?.name;\n        const nextAvatar =\n          typeof result.profile.avatarUrl === 'string'\n            ? result.profile.avatarUrl\n            : artist?.image_url;\n\n        if (nextHandle || nextName || nextAvatar) {\n          setArtist(prev => {\n            if (!prev) return prev;\n            return {\n              ...prev,\n              handle: nextHandle ?? prev.handle,\n              name: nextName ?? prev.name,\n              image_url: nextAvatar ?? prev.image_url,\n            };\n          });\n        }\n\n        lastProfileSavedRef.current = { displayName, username };\n\n        setProfileSaveStatus({\n          saving: false,\n          success: true,\n          error: null,\n          lastSaved: new Date(),\n        });\n\n        if (result.warning) {\n          toast.message(result.warning);\n        }\n\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : 'Failed to update profile';\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: message,\n          lastSaved: null,\n        });\n        toast.error(message);\n      }\n    },\n    [\n      artist?.handle,\n      artist?.image_url,\n      artist?.name,\n      profileId,\n      router,\n      updateProfile,\n    ]\n  );\n\n  const debouncedProfileSave = useMemo(\n    () =>\n      debounce(async (...args: unknown[]) => {\n        const [next] = args as [{ displayName: string; username: string }];\n        await saveProfile(next);\n      }, 900),\n    [saveProfile]\n  );\n\n  useEffect(() => {\n    return () => {\n      debouncedProfileSave.flush();\n    };\n  }, [debouncedProfileSave]);\n\n  const handleAvatarUpload = useCallback(\n    async (file: File): Promise<string> => {\n      try {\n        const blobUrl = await uploadAvatar(file);\n        const result = await updateProfile({ avatarUrl: blobUrl });\n        const nextAvatar = result.profile.avatarUrl ?? blobUrl;\n        setArtist(prev => {\n          if (!prev) return prev;\n          return { ...prev, image_url: nextAvatar };\n        });\n        if (result.warning) {\n          toast.message(result.warning);\n        } else {\n          toast.success('Profile photo updated');\n        }\n        router.refresh();\n        return nextAvatar;\n      } finally {\n        // no-op\n      }\n    },\n    [router, updateProfile, uploadAvatar]\n  );\n\n  const buildPlatformMeta = useCallback((link: ProfileSocialLink): Platform => {\n    const displayName = getSocialPlatformLabel(link.platform as SocialPlatform);\n    const category: PlatformType =\n      (link.platformType as PlatformType | null | undefined) ??\n      getPlatformCategory(link.platform);\n    return {\n      id: link.platform,\n      name: displayName,\n      category,\n      icon: link.platform,\n      color: '#000000',\n      placeholder: link.url,\n    };\n  }, []);\n\n  const convertDbLinkToDetected = useCallback(\n    (\n      link: ProfileSocialLink\n    ): DetectedLink & {\n      id: string;\n      state?: 'active' | 'suggested' | 'rejected';\n      confidence?: number | null;\n      sourcePlatform?: string | null;\n      sourceType?: 'manual' | 'admin' | 'ingested' | null;\n      evidence?: { sources?: string[]; signals?: string[] } | null;\n    } => {\n      const platform = buildPlatformMeta(link);\n      const title = link.displayText || platform.name;\n      return {\n        // DetectedLink fields\n        platform,\n        normalizedUrl: link.url,\n        originalUrl: link.url,\n        suggestedTitle: title,\n        isValid: true,\n        // Extended metadata\n        id: link.id,\n        state: link.state ?? 'active',\n        confidence:\n          typeof link.confidence === 'number'\n            ? link.confidence\n            : Number.parseFloat(String(link.confidence ?? '0')) || null,\n        sourcePlatform: link.sourcePlatform ?? null,\n        sourceType: link.sourceType ?? null,\n        evidence: link.evidence ?? null,\n      };\n    },\n    [buildPlatformMeta]\n  );\n\n  // Convert database social links to LinkItem format\n  const convertDbLinksToLinkItems = useCallback(\n    (dbLinks: ProfileSocialLink[] = []): LinkItem[] => {\n      return dbLinks.map((link, index) => {\n        const detected = convertDbLinkToDetected(link);\n        const platformMeta = buildPlatformMeta(link);\n        const order =\n          typeof link.sortOrder === 'number' ? link.sortOrder : index;\n        const isVisible = link.isActive ?? true;\n        const category = platformMeta.category;\n\n        const item: LinkItem = {\n          id: detected.id,\n          title: detected.suggestedTitle,\n          url: detected.normalizedUrl,\n          platform: platformMeta,\n          isVisible,\n          order,\n          category,\n          normalizedUrl: detected.normalizedUrl,\n          originalUrl: detected.originalUrl,\n          suggestedTitle: detected.suggestedTitle,\n          isValid: detected.isValid,\n          state: detected.state,\n          confidence: detected.confidence ?? null,\n          sourcePlatform: detected.sourcePlatform ?? null,\n          sourceType: detected.sourceType ?? null,\n          evidence: detected.evidence ?? null,\n          version: link.version ?? 1,\n        };\n\n        return item;\n      });\n    },\n    [buildPlatformMeta, convertDbLinkToDetected]\n  );\n\n  const [links, setLinks] = useState<LinkItem[]>(() =>\n    convertDbLinksToLinkItems(initialLinks)\n  );\n\n  const [suggestions, setSuggestions] = useState<SuggestedLink[]>([]);\n  const suggestionsRef = useRef<SuggestedLink[]>(suggestions);\n\n  useEffect(() => {\n    suggestionsRef.current = suggestions;\n  }, [suggestions]);\n\n  const handleLinkUpdate = useCallback(\n    async (\n      updatedLinks: LinkItem[]\n    ): Promise<{ success: boolean; error?: string }> => {\n      try {\n        const formattedLinks = updatedLinks.map(item => ({\n          id: item.id,\n          sortOrder: item.order,\n          isActive: item.isVisible,\n          platform: item.platform.id,\n        }));\n\n        await updateSocialLinksSafe(formattedLinks);\n        setLinks(updatedLinks);\n        return { success: true };\n      } catch (error) {\n        const errorMessage =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error\n              ? error.message\n              : 'Unknown error updating links';\n        return { success: false, error: errorMessage };\n      }\n    },\n    []\n  );\n\n  const handleAcceptSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await acceptSuggestion(suggestionId);\n\n        const suggestion = suggestionsRef.current.find(\n          s => s.suggestionId === suggestionId\n        );\n        if (suggestion) {\n          const newLinkItem: LinkItem = {\n            id: suggestionId,\n            title: suggestion.suggestedTitle,\n            url: suggestion.normalizedUrl,\n            platform: suggestion.platform,\n            isVisible: true,\n            order: links.length,\n            category: suggestion.platform.category,\n            normalizedUrl: suggestion.normalizedUrl,\n            originalUrl: suggestion.originalUrl,\n            suggestedTitle: suggestion.suggestedTitle,\n            isValid: suggestion.isValid,\n            state: 'active',\n            confidence: suggestion.confidence ?? null,\n            sourcePlatform: suggestion.sourcePlatform ?? null,\n            sourceType: suggestion.sourceType ?? null,\n            evidence: suggestion.evidence ?? null,\n            version: 1,\n          };\n\n          const updatedLinks = [...links, newLinkItem];\n          await handleLinkUpdate(updatedLinks);\n\n          setSuggestions(prev =>\n            prev.filter(s => s.suggestionId !== suggestionId)\n          );\n        }\n\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to accept suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    [links, handleLinkUpdate]\n  );\n\n  const handleRejectSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await dismissSuggestion(suggestionId);\n        setSuggestions(prev =>\n          prev.filter(s => s.suggestionId !== suggestionId)\n        );\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to reject suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    []\n  );\n\n  const loadSocialLinks = useCallback(async (): Promise<void> => {\n    if (!profileId) return;\n\n    try {\n      const response = await getSocialLinks(profileId);\n      if (response.links) {\n        const dbLinks = response.links as ProfileSocialLink[];\n        const convertedLinks = convertDbLinksToLinkItems(dbLinks);\n        setLinks(convertedLinks);\n      }\n\n      if (suggestionsEnabled && response.suggestions) {\n        setSuggestions(\n          response.suggestions.map((suggestion: SuggestedLink, index: number) => ({\n            ...suggestion,\n            suggestionId: suggestion.suggestionId ?? `suggestion-${index}`,\n          }))\n        );\n      }\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to load links';\n      console.error('Error loading social links:', message);\n    }\n  }, [profileId, suggestionsEnabled, convertDbLinksToLinkItems]);\n\n  // Poll for social links if suggestions are enabled\n  const pollingEnabled =\n    suggestionsEnabled && profileId ? autoRefreshUntilMs !== null : false;\n  usePollingCoordinator(\n    () => {\n      loadSocialLinks();\n    },\n    {\n      enabled: pollingEnabled,\n      interval: 3000,\n      maxDuration: autoRefreshUntilMs,\n    }\n  );\n\n  // Load links on mount and profile change\n  useEffect(() => {\n    loadSocialLinks();\n  }, [loadSocialLinks]);\n\n  return (\n    <div className='w-full'>\n      <div className='space-y-6'>\n        <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n          <div className='space-y-4'>\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Display Name\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'displayName' ? (\n                  <Input\n                    ref={displayNameInputRef}\n                    value={profileDisplayName}\n                    onChange={e => {\n                      setProfileDisplayName(e.target.value);\n                      debouncedProfileSave({\n                        displayName: e.target.value,\n                        username: profileUsername,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('displayName')}\n                  >\n                    {profileDisplayName || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Username\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'username' ? (\n                  <Input\n                    ref={usernameInputRef}\n                    value={profileUsername}\n                    onChange={e => {\n                      setProfileUsername(e.target.value);\n                      debouncedProfileSave({\n                        displayName: profileDisplayName,\n                        username: e.target.value,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('username')}\n                  >\n                    {profileUsername || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Profile Photo\n              </label>\n              <AvatarUploadable\n                src={artist?.image_url}\n                onUpload={handleAvatarUpload}\n                maxFileSizeBytes={AVATAR_MAX_FILE_SIZE_BYTES}\n                supportedMimeTypes={SUPPORTED_IMAGE_MIME_TYPES}\n                aria-label='Upload profile photo'\n              />\n            </div>\n\n            {profileSaveStatus.error && (\n              <div className='rounded bg-red-100 p-3 text-sm text-red-800'>\n                {profileSaveStatus.error}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {isMusicProfile && (\n          <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n            <h2 className='mb-4 text-lg font-semibold text-content-primary'>\n              Social Links\n            </h2>\n            <GroupedLinksManager\n              links={links}\n              suggestions={suggestions}\n              onLinksUpdate={handleLinkUpdate}\n              onAcceptSuggestion={handleAcceptSuggestion}\n              onRejectSuggestion={handleRejectSuggestion}\n              onRefreshStart={() => setAutoRefreshUntilMs(Date.now() + 30000)}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/EnhancedDashboardLinks.tsx"
        },
        "span": [19524, 19642],
        "sourceCode": "'use client';\n\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { toast } from 'sonner';\nimport type { ProfileSocialLink } from '@/app/app/dashboard/actions';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport { usePreviewPanel } from '@/app/app/dashboard/PreviewPanelContext';\nimport { Input } from '@/components/atoms/Input';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\n\nimport { updateProfile as updateProfileApi } from '@/lib/api-client/endpoints/dashboard/profile';\nimport {\n  acceptSuggestion,\n  dismissSuggestion,\n  getSocialLinks,\n  updateSocialLinksSafe,\n} from '@/lib/api-client/endpoints/dashboard/social-links';\nimport { ApiError } from '@/lib/api-client/types';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { usePollingCoordinator } from '@/lib/hooks/usePollingCoordinator';\nimport { useProfileSaveToasts } from '@/lib/hooks/useProfileSaveToasts';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { getProfileIdentity } from '@/lib/profile/profile-identity';\nimport { debounce } from '@/lib/utils';\nimport {\n  type DetectedLink,\n  getPlatformCategory,\n  type PlatformCategory,\n} from '@/lib/utils/platform-detection';\nimport {\n  getSocialPlatformLabel,\n  type SaveStatus,\n  type SocialPlatform,\n} from '@/types';\nimport { type Artist, convertDrizzleCreatorProfileToArtist } from '@/types/db';\n\nconst GroupedLinksManager = dynamic(\n  () =>\n    import('@/components/dashboard/organisms/GroupedLinksManager').then(\n      mod => ({\n        default: mod.GroupedLinksManager,\n      })\n    ),\n  {\n    loading: () => (\n      <div className='space-y-3'>\n        {Array.from({ length: 4 }).map((_, i) => (\n          <div key={i} className='h-16 animate-pulse rounded-lg bg-surface-1' />\n        ))}\n      </div>\n    ),\n    ssr: false,\n  }\n);\n\ntype ProfileUpdatePayload = {\n  username?: string;\n  displayName?: string;\n  avatarUrl?: string;\n};\n\ntype ProfileUpdateResponse = {\n  profile: {\n    username?: string;\n    displayName?: string | null;\n    avatarUrl?: string | null;\n  };\n  warning?: string;\n};\n\n// Alias PlatformCategory from shared utility for local usage\ntype PlatformType = PlatformCategory;\n\ninterface Platform {\n  id: string;\n  name: string;\n  category: PlatformType;\n  icon: string;\n  color: string;\n  placeholder: string;\n}\n\ninterface LinkItem {\n  id: string;\n  title: string;\n  url: string;\n  platform: Platform;\n  isVisible: boolean;\n  order: number;\n  category: PlatformType;\n  normalizedUrl: string;\n  originalUrl: string;\n  suggestedTitle: string;\n  isValid: boolean;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n  version?: number;\n}\n\ninterface SuggestedLink extends DetectedLink {\n  suggestionId: string;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n}\n\nfunction areLinkItemsEqual(a: LinkItem[], b: LinkItem[]): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i += 1) {\n    const left = a[i];\n    const right = b[i];\n    if (!right) return false;\n    if (left.id !== right.id) return false;\n    if (left.normalizedUrl !== right.normalizedUrl) return false;\n    if (left.originalUrl !== right.originalUrl) return false;\n    if (left.isVisible !== right.isVisible) return false;\n    if (left.category !== right.category) return false;\n    if (left.platform.id !== right.platform.id) return false;\n  }\n  return true;\n}\n\nfunction areSuggestionListsEqual(\n  a: SuggestedLink[],\n  b: SuggestedLink[]\n): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n\n  const serialize = (list: SuggestedLink[]) =>\n    list\n      .map(\n        item =>\n          `${item.suggestionId ?? item.normalizedUrl}:${item.platform.id}:${item.normalizedUrl}`\n      )\n      .sort();\n\n  const aSig = serialize(a);\n  const bSig = serialize(b);\n  return aSig.every((value, index) => value === bSig[index]);\n}\n\nexport function EnhancedDashboardLinks({\n  initialLinks,\n}: {\n  initialLinks: ProfileSocialLink[];\n}) {\n  const router = useRouter();\n  const dashboardData = useDashboardData();\n  const [artist, setArtist] = useState<Artist | null>(\n    dashboardData.selectedProfile\n      ? convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n      : null\n  );\n  const isMusicProfile =\n    dashboardData.selectedProfile?.creatorType === 'artist';\n  const profileId = dashboardData.selectedProfile?.id;\n\n  const [profileDisplayName, setProfileDisplayName] = useState<string>(\n    dashboardData.selectedProfile?.displayName ?? ''\n  );\n  const [profileUsername, setProfileUsername] = useState<string>(\n    dashboardData.selectedProfile?.username ?? ''\n  );\n\n  const [editingField, setEditingField] = useState<\n    'displayName' | 'username' | null\n  >(null);\n  const displayNameInputRef = useRef<HTMLInputElement>(null);\n  const usernameInputRef = useRef<HTMLInputElement>(null);\n\n  const [profileSaveStatus, setProfileSaveStatus] = useState<SaveStatus>({\n    saving: false,\n    success: null,\n    error: null,\n    lastSaved: null,\n  });\n  const lastProfileSavedRef = useRef<{\n    displayName: string;\n    username: string;\n  } | null>(null);\n  const linkIngestionGate = useFeatureGate(STATSIG_FLAGS.LINK_INGESTION);\n  const suggestionsEnabled = linkIngestionGate?.value ?? false;\n\n  useEffect(() => {\n    if (!profileSaveStatus.success) return;\n    const timeoutId = window.setTimeout(() => {\n      setProfileSaveStatus(prev => ({ ...prev, success: null }));\n    }, 1500);\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [profileSaveStatus.success]);\n\n  useProfileSaveToasts(profileSaveStatus);\n\n  const [autoRefreshUntilMs, setAutoRefreshUntilMs] = useState<number | null>(\n    null\n  );\n  useEffect(() => {\n    if (!dashboardData.selectedProfile) {\n      setArtist(null);\n      setProfileDisplayName('');\n      setProfileUsername('');\n      setEditingField(null);\n      lastProfileSavedRef.current = null;\n      return;\n    }\n\n    setArtist(\n      convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n    );\n    setProfileDisplayName(dashboardData.selectedProfile.displayName ?? '');\n    setProfileUsername(dashboardData.selectedProfile.username ?? '');\n\n    lastProfileSavedRef.current = {\n      displayName: dashboardData.selectedProfile.displayName ?? '',\n      username: dashboardData.selectedProfile.username ?? '',\n    };\n    setProfileSaveStatus({\n      saving: false,\n      success: null,\n      error: null,\n      lastSaved: null,\n    });\n  }, [dashboardData.selectedProfile]);\n\n  useEffect(() => {\n    if (editingField === 'displayName') {\n      displayNameInputRef.current?.focus();\n      displayNameInputRef.current?.select();\n    }\n    if (editingField === 'username') {\n      usernameInputRef.current?.focus();\n      usernameInputRef.current?.select();\n    }\n  }, [editingField]);\n\n  const updateProfile = useCallback(\n    async (updates: ProfileUpdatePayload): Promise<ProfileUpdateResponse> => {\n      const response = await updateProfileApi(updates);\n      return response as ProfileUpdateResponse;\n    },\n    []\n  );\n\n  const uploadAvatar = useCallback(async (file: File): Promise<string> => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await fetch('/api/images/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const body = (await response.json().catch(() => null)) as {\n      blobUrl?: string;\n      error?: string;\n    } | null;\n\n    if (!response.ok) {\n      const message = body?.error ?? 'Upload failed';\n      throw new Error(message);\n    }\n\n    if (!body?.blobUrl) {\n      throw new Error('Upload failed');\n    }\n\n    return body.blobUrl;\n  }, []);\n\n  const saveProfile = useCallback(\n    async (next: { displayName: string; username: string }): Promise<void> => {\n      if (!profileId) {\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: 'Missing profile id; please refresh and try again.',\n          lastSaved: null,\n        });\n        toast.error('Missing profile id; please refresh and try again.');\n        return;\n      }\n\n      const username = next.username.trim();\n      const displayName = next.displayName.trim();\n\n      if (displayName.length === 0 || username.length === 0) {\n        return;\n      }\n\n      const lastSaved = lastProfileSavedRef.current;\n      if (\n        lastSaved &&\n        lastSaved.displayName === displayName &&\n        lastSaved.username === username\n      ) {\n        return;\n      }\n\n      setProfileSaveStatus(prev => ({\n        ...prev,\n        saving: true,\n        success: null,\n        error: null,\n      }));\n\n      try {\n        const result = await updateProfile({\n          displayName,\n          username,\n        });\n\n        const nextHandle = result.profile.username ?? artist?.handle;\n        const nextName = result.profile.displayName ?? artist?.name;\n        const nextAvatar =\n          typeof result.profile.avatarUrl === 'string'\n            ? result.profile.avatarUrl\n            : artist?.image_url;\n\n        if (nextHandle || nextName || nextAvatar) {\n          setArtist(prev => {\n            if (!prev) return prev;\n            return {\n              ...prev,\n              handle: nextHandle ?? prev.handle,\n              name: nextName ?? prev.name,\n              image_url: nextAvatar ?? prev.image_url,\n            };\n          });\n        }\n\n        lastProfileSavedRef.current = { displayName, username };\n\n        setProfileSaveStatus({\n          saving: false,\n          success: true,\n          error: null,\n          lastSaved: new Date(),\n        });\n\n        if (result.warning) {\n          toast.message(result.warning);\n        }\n\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : 'Failed to update profile';\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: message,\n          lastSaved: null,\n        });\n        toast.error(message);\n      }\n    },\n    [\n      artist?.handle,\n      artist?.image_url,\n      artist?.name,\n      profileId,\n      router,\n      updateProfile,\n    ]\n  );\n\n  const debouncedProfileSave = useMemo(\n    () =>\n      debounce(async (...args: unknown[]) => {\n        const [next] = args as [{ displayName: string; username: string }];\n        await saveProfile(next);\n      }, 900),\n    [saveProfile]\n  );\n\n  useEffect(() => {\n    return () => {\n      debouncedProfileSave.flush();\n    };\n  }, [debouncedProfileSave]);\n\n  const handleAvatarUpload = useCallback(\n    async (file: File): Promise<string> => {\n      try {\n        const blobUrl = await uploadAvatar(file);\n        const result = await updateProfile({ avatarUrl: blobUrl });\n        const nextAvatar = result.profile.avatarUrl ?? blobUrl;\n        setArtist(prev => {\n          if (!prev) return prev;\n          return { ...prev, image_url: nextAvatar };\n        });\n        if (result.warning) {\n          toast.message(result.warning);\n        } else {\n          toast.success('Profile photo updated');\n        }\n        router.refresh();\n        return nextAvatar;\n      } finally {\n        // no-op\n      }\n    },\n    [router, updateProfile, uploadAvatar]\n  );\n\n  const buildPlatformMeta = useCallback((link: ProfileSocialLink): Platform => {\n    const displayName = getSocialPlatformLabel(link.platform as SocialPlatform);\n    const category: PlatformType =\n      (link.platformType as PlatformType | null | undefined) ??\n      getPlatformCategory(link.platform);\n    return {\n      id: link.platform,\n      name: displayName,\n      category,\n      icon: link.platform,\n      color: '#000000',\n      placeholder: link.url,\n    };\n  }, []);\n\n  const convertDbLinkToDetected = useCallback(\n    (\n      link: ProfileSocialLink\n    ): DetectedLink & {\n      id: string;\n      state?: 'active' | 'suggested' | 'rejected';\n      confidence?: number | null;\n      sourcePlatform?: string | null;\n      sourceType?: 'manual' | 'admin' | 'ingested' | null;\n      evidence?: { sources?: string[]; signals?: string[] } | null;\n    } => {\n      const platform = buildPlatformMeta(link);\n      const title = link.displayText || platform.name;\n      return {\n        // DetectedLink fields\n        platform,\n        normalizedUrl: link.url,\n        originalUrl: link.url,\n        suggestedTitle: title,\n        isValid: true,\n        // Extended metadata\n        id: link.id,\n        state: link.state ?? 'active',\n        confidence:\n          typeof link.confidence === 'number'\n            ? link.confidence\n            : Number.parseFloat(String(link.confidence ?? '0')) || null,\n        sourcePlatform: link.sourcePlatform ?? null,\n        sourceType: link.sourceType ?? null,\n        evidence: link.evidence ?? null,\n      };\n    },\n    [buildPlatformMeta]\n  );\n\n  // Convert database social links to LinkItem format\n  const convertDbLinksToLinkItems = useCallback(\n    (dbLinks: ProfileSocialLink[] = []): LinkItem[] => {\n      return dbLinks.map((link, index) => {\n        const detected = convertDbLinkToDetected(link);\n        const platformMeta = buildPlatformMeta(link);\n        const order =\n          typeof link.sortOrder === 'number' ? link.sortOrder : index;\n        const isVisible = link.isActive ?? true;\n        const category = platformMeta.category;\n\n        const item: LinkItem = {\n          id: detected.id,\n          title: detected.suggestedTitle,\n          url: detected.normalizedUrl,\n          platform: platformMeta,\n          isVisible,\n          order,\n          category,\n          normalizedUrl: detected.normalizedUrl,\n          originalUrl: detected.originalUrl,\n          suggestedTitle: detected.suggestedTitle,\n          isValid: detected.isValid,\n          state: detected.state,\n          confidence: detected.confidence ?? null,\n          sourcePlatform: detected.sourcePlatform ?? null,\n          sourceType: detected.sourceType ?? null,\n          evidence: detected.evidence ?? null,\n          version: link.version ?? 1,\n        };\n\n        return item;\n      });\n    },\n    [buildPlatformMeta, convertDbLinkToDetected]\n  );\n\n  const [links, setLinks] = useState<LinkItem[]>(() =>\n    convertDbLinksToLinkItems(initialLinks)\n  );\n\n  const [suggestions, setSuggestions] = useState<SuggestedLink[]>([]);\n  const suggestionsRef = useRef<SuggestedLink[]>(suggestions);\n\n  useEffect(() => {\n    suggestionsRef.current = suggestions;\n  }, [suggestions]);\n\n  const handleLinkUpdate = useCallback(\n    async (\n      updatedLinks: LinkItem[]\n    ): Promise<{ success: boolean; error?: string }> => {\n      try {\n        const formattedLinks = updatedLinks.map(item => ({\n          id: item.id,\n          sortOrder: item.order,\n          isActive: item.isVisible,\n          platform: item.platform.id,\n        }));\n\n        await updateSocialLinksSafe(formattedLinks);\n        setLinks(updatedLinks);\n        return { success: true };\n      } catch (error) {\n        const errorMessage =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error\n              ? error.message\n              : 'Unknown error updating links';\n        return { success: false, error: errorMessage };\n      }\n    },\n    []\n  );\n\n  const handleAcceptSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await acceptSuggestion(suggestionId);\n\n        const suggestion = suggestionsRef.current.find(\n          s => s.suggestionId === suggestionId\n        );\n        if (suggestion) {\n          const newLinkItem: LinkItem = {\n            id: suggestionId,\n            title: suggestion.suggestedTitle,\n            url: suggestion.normalizedUrl,\n            platform: suggestion.platform,\n            isVisible: true,\n            order: links.length,\n            category: suggestion.platform.category,\n            normalizedUrl: suggestion.normalizedUrl,\n            originalUrl: suggestion.originalUrl,\n            suggestedTitle: suggestion.suggestedTitle,\n            isValid: suggestion.isValid,\n            state: 'active',\n            confidence: suggestion.confidence ?? null,\n            sourcePlatform: suggestion.sourcePlatform ?? null,\n            sourceType: suggestion.sourceType ?? null,\n            evidence: suggestion.evidence ?? null,\n            version: 1,\n          };\n\n          const updatedLinks = [...links, newLinkItem];\n          await handleLinkUpdate(updatedLinks);\n\n          setSuggestions(prev =>\n            prev.filter(s => s.suggestionId !== suggestionId)\n          );\n        }\n\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to accept suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    [links, handleLinkUpdate]\n  );\n\n  const handleRejectSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await dismissSuggestion(suggestionId);\n        setSuggestions(prev =>\n          prev.filter(s => s.suggestionId !== suggestionId)\n        );\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to reject suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    []\n  );\n\n  const loadSocialLinks = useCallback(async (): Promise<void> => {\n    if (!profileId) return;\n\n    try {\n      const response = await getSocialLinks(profileId);\n      if (response.links) {\n        const dbLinks = response.links as ProfileSocialLink[];\n        const convertedLinks = convertDbLinksToLinkItems(dbLinks);\n        setLinks(convertedLinks);\n      }\n\n      if (suggestionsEnabled && response.suggestions) {\n        setSuggestions(\n          response.suggestions.map((suggestion: SuggestedLink, index: number) => ({\n            ...suggestion,\n            suggestionId: suggestion.suggestionId ?? `suggestion-${index}`,\n          }))\n        );\n      }\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to load links';\n      console.error('Error loading social links:', message);\n    }\n  }, [profileId, suggestionsEnabled, convertDbLinksToLinkItems]);\n\n  // Poll for social links if suggestions are enabled\n  const pollingEnabled =\n    suggestionsEnabled && profileId ? autoRefreshUntilMs !== null : false;\n  usePollingCoordinator(\n    () => {\n      loadSocialLinks();\n    },\n    {\n      enabled: pollingEnabled,\n      interval: 3000,\n      maxDuration: autoRefreshUntilMs,\n    }\n  );\n\n  // Load links on mount and profile change\n  useEffect(() => {\n    loadSocialLinks();\n  }, [loadSocialLinks]);\n\n  return (\n    <div className='w-full'>\n      <div className='space-y-6'>\n        <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n          <div className='space-y-4'>\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Display Name\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'displayName' ? (\n                  <Input\n                    ref={displayNameInputRef}\n                    value={profileDisplayName}\n                    onChange={e => {\n                      setProfileDisplayName(e.target.value);\n                      debouncedProfileSave({\n                        displayName: e.target.value,\n                        username: profileUsername,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('displayName')}\n                  >\n                    {profileDisplayName || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Username\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'username' ? (\n                  <Input\n                    ref={usernameInputRef}\n                    value={profileUsername}\n                    onChange={e => {\n                      setProfileUsername(e.target.value);\n                      debouncedProfileSave({\n                        displayName: profileDisplayName,\n                        username: e.target.value,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('username')}\n                  >\n                    {profileUsername || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Profile Photo\n              </label>\n              <AvatarUploadable\n                src={artist?.image_url}\n                onUpload={handleAvatarUpload}\n                maxFileSizeBytes={AVATAR_MAX_FILE_SIZE_BYTES}\n                supportedMimeTypes={SUPPORTED_IMAGE_MIME_TYPES}\n                aria-label='Upload profile photo'\n              />\n            </div>\n\n            {profileSaveStatus.error && (\n              <div className='rounded bg-red-100 p-3 text-sm text-red-800'>\n                {profileSaveStatus.error}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {isMusicProfile && (\n          <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n            <h2 className='mb-4 text-lg font-semibold text-content-primary'>\n              Social Links\n            </h2>\n            <GroupedLinksManager\n              links={links}\n              suggestions={suggestions}\n              onLinksUpdate={handleLinkUpdate}\n              onAcceptSuggestion={handleAcceptSuggestion}\n              onRejectSuggestion={handleRejectSuggestion}\n              onRefreshStart={() => setAutoRefreshUntilMs(Date.now() + 30000)}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noStaticElementInteractions",
      "severity": "warning",
      "description": "Static Elements should not be interactive.",
      "message": [
        {
          "elements": [],
          "content": "Static Elements should not be interactive."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "To add interactivity such as a mouse or key event listener to a static element, give the element an appropriate role value."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/EnhancedDashboardLinks.tsx"
        },
        "span": [21477, 21656],
        "sourceCode": "'use client';\n\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { toast } from 'sonner';\nimport type { ProfileSocialLink } from '@/app/app/dashboard/actions';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport { usePreviewPanel } from '@/app/app/dashboard/PreviewPanelContext';\nimport { Input } from '@/components/atoms/Input';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\n\nimport { updateProfile as updateProfileApi } from '@/lib/api-client/endpoints/dashboard/profile';\nimport {\n  acceptSuggestion,\n  dismissSuggestion,\n  getSocialLinks,\n  updateSocialLinksSafe,\n} from '@/lib/api-client/endpoints/dashboard/social-links';\nimport { ApiError } from '@/lib/api-client/types';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { usePollingCoordinator } from '@/lib/hooks/usePollingCoordinator';\nimport { useProfileSaveToasts } from '@/lib/hooks/useProfileSaveToasts';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { getProfileIdentity } from '@/lib/profile/profile-identity';\nimport { debounce } from '@/lib/utils';\nimport {\n  type DetectedLink,\n  getPlatformCategory,\n  type PlatformCategory,\n} from '@/lib/utils/platform-detection';\nimport {\n  getSocialPlatformLabel,\n  type SaveStatus,\n  type SocialPlatform,\n} from '@/types';\nimport { type Artist, convertDrizzleCreatorProfileToArtist } from '@/types/db';\n\nconst GroupedLinksManager = dynamic(\n  () =>\n    import('@/components/dashboard/organisms/GroupedLinksManager').then(\n      mod => ({\n        default: mod.GroupedLinksManager,\n      })\n    ),\n  {\n    loading: () => (\n      <div className='space-y-3'>\n        {Array.from({ length: 4 }).map((_, i) => (\n          <div key={i} className='h-16 animate-pulse rounded-lg bg-surface-1' />\n        ))}\n      </div>\n    ),\n    ssr: false,\n  }\n);\n\ntype ProfileUpdatePayload = {\n  username?: string;\n  displayName?: string;\n  avatarUrl?: string;\n};\n\ntype ProfileUpdateResponse = {\n  profile: {\n    username?: string;\n    displayName?: string | null;\n    avatarUrl?: string | null;\n  };\n  warning?: string;\n};\n\n// Alias PlatformCategory from shared utility for local usage\ntype PlatformType = PlatformCategory;\n\ninterface Platform {\n  id: string;\n  name: string;\n  category: PlatformType;\n  icon: string;\n  color: string;\n  placeholder: string;\n}\n\ninterface LinkItem {\n  id: string;\n  title: string;\n  url: string;\n  platform: Platform;\n  isVisible: boolean;\n  order: number;\n  category: PlatformType;\n  normalizedUrl: string;\n  originalUrl: string;\n  suggestedTitle: string;\n  isValid: boolean;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n  version?: number;\n}\n\ninterface SuggestedLink extends DetectedLink {\n  suggestionId: string;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n}\n\nfunction areLinkItemsEqual(a: LinkItem[], b: LinkItem[]): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i += 1) {\n    const left = a[i];\n    const right = b[i];\n    if (!right) return false;\n    if (left.id !== right.id) return false;\n    if (left.normalizedUrl !== right.normalizedUrl) return false;\n    if (left.originalUrl !== right.originalUrl) return false;\n    if (left.isVisible !== right.isVisible) return false;\n    if (left.category !== right.category) return false;\n    if (left.platform.id !== right.platform.id) return false;\n  }\n  return true;\n}\n\nfunction areSuggestionListsEqual(\n  a: SuggestedLink[],\n  b: SuggestedLink[]\n): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n\n  const serialize = (list: SuggestedLink[]) =>\n    list\n      .map(\n        item =>\n          `${item.suggestionId ?? item.normalizedUrl}:${item.platform.id}:${item.normalizedUrl}`\n      )\n      .sort();\n\n  const aSig = serialize(a);\n  const bSig = serialize(b);\n  return aSig.every((value, index) => value === bSig[index]);\n}\n\nexport function EnhancedDashboardLinks({\n  initialLinks,\n}: {\n  initialLinks: ProfileSocialLink[];\n}) {\n  const router = useRouter();\n  const dashboardData = useDashboardData();\n  const [artist, setArtist] = useState<Artist | null>(\n    dashboardData.selectedProfile\n      ? convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n      : null\n  );\n  const isMusicProfile =\n    dashboardData.selectedProfile?.creatorType === 'artist';\n  const profileId = dashboardData.selectedProfile?.id;\n\n  const [profileDisplayName, setProfileDisplayName] = useState<string>(\n    dashboardData.selectedProfile?.displayName ?? ''\n  );\n  const [profileUsername, setProfileUsername] = useState<string>(\n    dashboardData.selectedProfile?.username ?? ''\n  );\n\n  const [editingField, setEditingField] = useState<\n    'displayName' | 'username' | null\n  >(null);\n  const displayNameInputRef = useRef<HTMLInputElement>(null);\n  const usernameInputRef = useRef<HTMLInputElement>(null);\n\n  const [profileSaveStatus, setProfileSaveStatus] = useState<SaveStatus>({\n    saving: false,\n    success: null,\n    error: null,\n    lastSaved: null,\n  });\n  const lastProfileSavedRef = useRef<{\n    displayName: string;\n    username: string;\n  } | null>(null);\n  const linkIngestionGate = useFeatureGate(STATSIG_FLAGS.LINK_INGESTION);\n  const suggestionsEnabled = linkIngestionGate?.value ?? false;\n\n  useEffect(() => {\n    if (!profileSaveStatus.success) return;\n    const timeoutId = window.setTimeout(() => {\n      setProfileSaveStatus(prev => ({ ...prev, success: null }));\n    }, 1500);\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [profileSaveStatus.success]);\n\n  useProfileSaveToasts(profileSaveStatus);\n\n  const [autoRefreshUntilMs, setAutoRefreshUntilMs] = useState<number | null>(\n    null\n  );\n  useEffect(() => {\n    if (!dashboardData.selectedProfile) {\n      setArtist(null);\n      setProfileDisplayName('');\n      setProfileUsername('');\n      setEditingField(null);\n      lastProfileSavedRef.current = null;\n      return;\n    }\n\n    setArtist(\n      convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n    );\n    setProfileDisplayName(dashboardData.selectedProfile.displayName ?? '');\n    setProfileUsername(dashboardData.selectedProfile.username ?? '');\n\n    lastProfileSavedRef.current = {\n      displayName: dashboardData.selectedProfile.displayName ?? '',\n      username: dashboardData.selectedProfile.username ?? '',\n    };\n    setProfileSaveStatus({\n      saving: false,\n      success: null,\n      error: null,\n      lastSaved: null,\n    });\n  }, [dashboardData.selectedProfile]);\n\n  useEffect(() => {\n    if (editingField === 'displayName') {\n      displayNameInputRef.current?.focus();\n      displayNameInputRef.current?.select();\n    }\n    if (editingField === 'username') {\n      usernameInputRef.current?.focus();\n      usernameInputRef.current?.select();\n    }\n  }, [editingField]);\n\n  const updateProfile = useCallback(\n    async (updates: ProfileUpdatePayload): Promise<ProfileUpdateResponse> => {\n      const response = await updateProfileApi(updates);\n      return response as ProfileUpdateResponse;\n    },\n    []\n  );\n\n  const uploadAvatar = useCallback(async (file: File): Promise<string> => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await fetch('/api/images/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const body = (await response.json().catch(() => null)) as {\n      blobUrl?: string;\n      error?: string;\n    } | null;\n\n    if (!response.ok) {\n      const message = body?.error ?? 'Upload failed';\n      throw new Error(message);\n    }\n\n    if (!body?.blobUrl) {\n      throw new Error('Upload failed');\n    }\n\n    return body.blobUrl;\n  }, []);\n\n  const saveProfile = useCallback(\n    async (next: { displayName: string; username: string }): Promise<void> => {\n      if (!profileId) {\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: 'Missing profile id; please refresh and try again.',\n          lastSaved: null,\n        });\n        toast.error('Missing profile id; please refresh and try again.');\n        return;\n      }\n\n      const username = next.username.trim();\n      const displayName = next.displayName.trim();\n\n      if (displayName.length === 0 || username.length === 0) {\n        return;\n      }\n\n      const lastSaved = lastProfileSavedRef.current;\n      if (\n        lastSaved &&\n        lastSaved.displayName === displayName &&\n        lastSaved.username === username\n      ) {\n        return;\n      }\n\n      setProfileSaveStatus(prev => ({\n        ...prev,\n        saving: true,\n        success: null,\n        error: null,\n      }));\n\n      try {\n        const result = await updateProfile({\n          displayName,\n          username,\n        });\n\n        const nextHandle = result.profile.username ?? artist?.handle;\n        const nextName = result.profile.displayName ?? artist?.name;\n        const nextAvatar =\n          typeof result.profile.avatarUrl === 'string'\n            ? result.profile.avatarUrl\n            : artist?.image_url;\n\n        if (nextHandle || nextName || nextAvatar) {\n          setArtist(prev => {\n            if (!prev) return prev;\n            return {\n              ...prev,\n              handle: nextHandle ?? prev.handle,\n              name: nextName ?? prev.name,\n              image_url: nextAvatar ?? prev.image_url,\n            };\n          });\n        }\n\n        lastProfileSavedRef.current = { displayName, username };\n\n        setProfileSaveStatus({\n          saving: false,\n          success: true,\n          error: null,\n          lastSaved: new Date(),\n        });\n\n        if (result.warning) {\n          toast.message(result.warning);\n        }\n\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : 'Failed to update profile';\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: message,\n          lastSaved: null,\n        });\n        toast.error(message);\n      }\n    },\n    [\n      artist?.handle,\n      artist?.image_url,\n      artist?.name,\n      profileId,\n      router,\n      updateProfile,\n    ]\n  );\n\n  const debouncedProfileSave = useMemo(\n    () =>\n      debounce(async (...args: unknown[]) => {\n        const [next] = args as [{ displayName: string; username: string }];\n        await saveProfile(next);\n      }, 900),\n    [saveProfile]\n  );\n\n  useEffect(() => {\n    return () => {\n      debouncedProfileSave.flush();\n    };\n  }, [debouncedProfileSave]);\n\n  const handleAvatarUpload = useCallback(\n    async (file: File): Promise<string> => {\n      try {\n        const blobUrl = await uploadAvatar(file);\n        const result = await updateProfile({ avatarUrl: blobUrl });\n        const nextAvatar = result.profile.avatarUrl ?? blobUrl;\n        setArtist(prev => {\n          if (!prev) return prev;\n          return { ...prev, image_url: nextAvatar };\n        });\n        if (result.warning) {\n          toast.message(result.warning);\n        } else {\n          toast.success('Profile photo updated');\n        }\n        router.refresh();\n        return nextAvatar;\n      } finally {\n        // no-op\n      }\n    },\n    [router, updateProfile, uploadAvatar]\n  );\n\n  const buildPlatformMeta = useCallback((link: ProfileSocialLink): Platform => {\n    const displayName = getSocialPlatformLabel(link.platform as SocialPlatform);\n    const category: PlatformType =\n      (link.platformType as PlatformType | null | undefined) ??\n      getPlatformCategory(link.platform);\n    return {\n      id: link.platform,\n      name: displayName,\n      category,\n      icon: link.platform,\n      color: '#000000',\n      placeholder: link.url,\n    };\n  }, []);\n\n  const convertDbLinkToDetected = useCallback(\n    (\n      link: ProfileSocialLink\n    ): DetectedLink & {\n      id: string;\n      state?: 'active' | 'suggested' | 'rejected';\n      confidence?: number | null;\n      sourcePlatform?: string | null;\n      sourceType?: 'manual' | 'admin' | 'ingested' | null;\n      evidence?: { sources?: string[]; signals?: string[] } | null;\n    } => {\n      const platform = buildPlatformMeta(link);\n      const title = link.displayText || platform.name;\n      return {\n        // DetectedLink fields\n        platform,\n        normalizedUrl: link.url,\n        originalUrl: link.url,\n        suggestedTitle: title,\n        isValid: true,\n        // Extended metadata\n        id: link.id,\n        state: link.state ?? 'active',\n        confidence:\n          typeof link.confidence === 'number'\n            ? link.confidence\n            : Number.parseFloat(String(link.confidence ?? '0')) || null,\n        sourcePlatform: link.sourcePlatform ?? null,\n        sourceType: link.sourceType ?? null,\n        evidence: link.evidence ?? null,\n      };\n    },\n    [buildPlatformMeta]\n  );\n\n  // Convert database social links to LinkItem format\n  const convertDbLinksToLinkItems = useCallback(\n    (dbLinks: ProfileSocialLink[] = []): LinkItem[] => {\n      return dbLinks.map((link, index) => {\n        const detected = convertDbLinkToDetected(link);\n        const platformMeta = buildPlatformMeta(link);\n        const order =\n          typeof link.sortOrder === 'number' ? link.sortOrder : index;\n        const isVisible = link.isActive ?? true;\n        const category = platformMeta.category;\n\n        const item: LinkItem = {\n          id: detected.id,\n          title: detected.suggestedTitle,\n          url: detected.normalizedUrl,\n          platform: platformMeta,\n          isVisible,\n          order,\n          category,\n          normalizedUrl: detected.normalizedUrl,\n          originalUrl: detected.originalUrl,\n          suggestedTitle: detected.suggestedTitle,\n          isValid: detected.isValid,\n          state: detected.state,\n          confidence: detected.confidence ?? null,\n          sourcePlatform: detected.sourcePlatform ?? null,\n          sourceType: detected.sourceType ?? null,\n          evidence: detected.evidence ?? null,\n          version: link.version ?? 1,\n        };\n\n        return item;\n      });\n    },\n    [buildPlatformMeta, convertDbLinkToDetected]\n  );\n\n  const [links, setLinks] = useState<LinkItem[]>(() =>\n    convertDbLinksToLinkItems(initialLinks)\n  );\n\n  const [suggestions, setSuggestions] = useState<SuggestedLink[]>([]);\n  const suggestionsRef = useRef<SuggestedLink[]>(suggestions);\n\n  useEffect(() => {\n    suggestionsRef.current = suggestions;\n  }, [suggestions]);\n\n  const handleLinkUpdate = useCallback(\n    async (\n      updatedLinks: LinkItem[]\n    ): Promise<{ success: boolean; error?: string }> => {\n      try {\n        const formattedLinks = updatedLinks.map(item => ({\n          id: item.id,\n          sortOrder: item.order,\n          isActive: item.isVisible,\n          platform: item.platform.id,\n        }));\n\n        await updateSocialLinksSafe(formattedLinks);\n        setLinks(updatedLinks);\n        return { success: true };\n      } catch (error) {\n        const errorMessage =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error\n              ? error.message\n              : 'Unknown error updating links';\n        return { success: false, error: errorMessage };\n      }\n    },\n    []\n  );\n\n  const handleAcceptSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await acceptSuggestion(suggestionId);\n\n        const suggestion = suggestionsRef.current.find(\n          s => s.suggestionId === suggestionId\n        );\n        if (suggestion) {\n          const newLinkItem: LinkItem = {\n            id: suggestionId,\n            title: suggestion.suggestedTitle,\n            url: suggestion.normalizedUrl,\n            platform: suggestion.platform,\n            isVisible: true,\n            order: links.length,\n            category: suggestion.platform.category,\n            normalizedUrl: suggestion.normalizedUrl,\n            originalUrl: suggestion.originalUrl,\n            suggestedTitle: suggestion.suggestedTitle,\n            isValid: suggestion.isValid,\n            state: 'active',\n            confidence: suggestion.confidence ?? null,\n            sourcePlatform: suggestion.sourcePlatform ?? null,\n            sourceType: suggestion.sourceType ?? null,\n            evidence: suggestion.evidence ?? null,\n            version: 1,\n          };\n\n          const updatedLinks = [...links, newLinkItem];\n          await handleLinkUpdate(updatedLinks);\n\n          setSuggestions(prev =>\n            prev.filter(s => s.suggestionId !== suggestionId)\n          );\n        }\n\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to accept suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    [links, handleLinkUpdate]\n  );\n\n  const handleRejectSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await dismissSuggestion(suggestionId);\n        setSuggestions(prev =>\n          prev.filter(s => s.suggestionId !== suggestionId)\n        );\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to reject suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    []\n  );\n\n  const loadSocialLinks = useCallback(async (): Promise<void> => {\n    if (!profileId) return;\n\n    try {\n      const response = await getSocialLinks(profileId);\n      if (response.links) {\n        const dbLinks = response.links as ProfileSocialLink[];\n        const convertedLinks = convertDbLinksToLinkItems(dbLinks);\n        setLinks(convertedLinks);\n      }\n\n      if (suggestionsEnabled && response.suggestions) {\n        setSuggestions(\n          response.suggestions.map((suggestion: SuggestedLink, index: number) => ({\n            ...suggestion,\n            suggestionId: suggestion.suggestionId ?? `suggestion-${index}`,\n          }))\n        );\n      }\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to load links';\n      console.error('Error loading social links:', message);\n    }\n  }, [profileId, suggestionsEnabled, convertDbLinksToLinkItems]);\n\n  // Poll for social links if suggestions are enabled\n  const pollingEnabled =\n    suggestionsEnabled && profileId ? autoRefreshUntilMs !== null : false;\n  usePollingCoordinator(\n    () => {\n      loadSocialLinks();\n    },\n    {\n      enabled: pollingEnabled,\n      interval: 3000,\n      maxDuration: autoRefreshUntilMs,\n    }\n  );\n\n  // Load links on mount and profile change\n  useEffect(() => {\n    loadSocialLinks();\n  }, [loadSocialLinks]);\n\n  return (\n    <div className='w-full'>\n      <div className='space-y-6'>\n        <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n          <div className='space-y-4'>\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Display Name\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'displayName' ? (\n                  <Input\n                    ref={displayNameInputRef}\n                    value={profileDisplayName}\n                    onChange={e => {\n                      setProfileDisplayName(e.target.value);\n                      debouncedProfileSave({\n                        displayName: e.target.value,\n                        username: profileUsername,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('displayName')}\n                  >\n                    {profileDisplayName || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Username\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'username' ? (\n                  <Input\n                    ref={usernameInputRef}\n                    value={profileUsername}\n                    onChange={e => {\n                      setProfileUsername(e.target.value);\n                      debouncedProfileSave({\n                        displayName: profileDisplayName,\n                        username: e.target.value,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('username')}\n                  >\n                    {profileUsername || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Profile Photo\n              </label>\n              <AvatarUploadable\n                src={artist?.image_url}\n                onUpload={handleAvatarUpload}\n                maxFileSizeBytes={AVATAR_MAX_FILE_SIZE_BYTES}\n                supportedMimeTypes={SUPPORTED_IMAGE_MIME_TYPES}\n                aria-label='Upload profile photo'\n              />\n            </div>\n\n            {profileSaveStatus.error && (\n              <div className='rounded bg-red-100 p-3 text-sm text-red-800'>\n                {profileSaveStatus.error}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {isMusicProfile && (\n          <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n            <h2 className='mb-4 text-lg font-semibold text-content-primary'>\n              Social Links\n            </h2>\n            <GroupedLinksManager\n              links={links}\n              suggestions={suggestions}\n              onLinksUpdate={handleLinkUpdate}\n              onAcceptSuggestion={handleAcceptSuggestion}\n              onRejectSuggestion={handleRejectSuggestion}\n              onRefreshStart={() => setAutoRefreshUntilMs(Date.now() + 30000)}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useKeyWithClickEvents",
      "severity": "warning",
      "description": "Enforce to have the onClick mouse event with the onKeyUp, the onKeyDown, or the onKeyPress keyboard event.",
      "message": [
        { "elements": [], "content": "Enforce to have the " },
        { "elements": ["Emphasis"], "content": "onClick" },
        { "elements": [], "content": " mouse event with the " },
        { "elements": ["Emphasis"], "content": "onKeyUp" },
        { "elements": [], "content": ", the " },
        { "elements": ["Emphasis"], "content": "onKeyDown" },
        { "elements": [], "content": ", or the " },
        { "elements": ["Emphasis"], "content": "onKeyPress" },
        { "elements": [], "content": " keyboard event." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Actions triggered using mouse events should have corresponding keyboard events to account for keyboard-only navigation."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/EnhancedDashboardLinks.tsx"
        },
        "span": [21477, 21656],
        "sourceCode": "'use client';\n\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { toast } from 'sonner';\nimport type { ProfileSocialLink } from '@/app/app/dashboard/actions';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport { usePreviewPanel } from '@/app/app/dashboard/PreviewPanelContext';\nimport { Input } from '@/components/atoms/Input';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\n\nimport { updateProfile as updateProfileApi } from '@/lib/api-client/endpoints/dashboard/profile';\nimport {\n  acceptSuggestion,\n  dismissSuggestion,\n  getSocialLinks,\n  updateSocialLinksSafe,\n} from '@/lib/api-client/endpoints/dashboard/social-links';\nimport { ApiError } from '@/lib/api-client/types';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { usePollingCoordinator } from '@/lib/hooks/usePollingCoordinator';\nimport { useProfileSaveToasts } from '@/lib/hooks/useProfileSaveToasts';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { getProfileIdentity } from '@/lib/profile/profile-identity';\nimport { debounce } from '@/lib/utils';\nimport {\n  type DetectedLink,\n  getPlatformCategory,\n  type PlatformCategory,\n} from '@/lib/utils/platform-detection';\nimport {\n  getSocialPlatformLabel,\n  type SaveStatus,\n  type SocialPlatform,\n} from '@/types';\nimport { type Artist, convertDrizzleCreatorProfileToArtist } from '@/types/db';\n\nconst GroupedLinksManager = dynamic(\n  () =>\n    import('@/components/dashboard/organisms/GroupedLinksManager').then(\n      mod => ({\n        default: mod.GroupedLinksManager,\n      })\n    ),\n  {\n    loading: () => (\n      <div className='space-y-3'>\n        {Array.from({ length: 4 }).map((_, i) => (\n          <div key={i} className='h-16 animate-pulse rounded-lg bg-surface-1' />\n        ))}\n      </div>\n    ),\n    ssr: false,\n  }\n);\n\ntype ProfileUpdatePayload = {\n  username?: string;\n  displayName?: string;\n  avatarUrl?: string;\n};\n\ntype ProfileUpdateResponse = {\n  profile: {\n    username?: string;\n    displayName?: string | null;\n    avatarUrl?: string | null;\n  };\n  warning?: string;\n};\n\n// Alias PlatformCategory from shared utility for local usage\ntype PlatformType = PlatformCategory;\n\ninterface Platform {\n  id: string;\n  name: string;\n  category: PlatformType;\n  icon: string;\n  color: string;\n  placeholder: string;\n}\n\ninterface LinkItem {\n  id: string;\n  title: string;\n  url: string;\n  platform: Platform;\n  isVisible: boolean;\n  order: number;\n  category: PlatformType;\n  normalizedUrl: string;\n  originalUrl: string;\n  suggestedTitle: string;\n  isValid: boolean;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n  version?: number;\n}\n\ninterface SuggestedLink extends DetectedLink {\n  suggestionId: string;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n}\n\nfunction areLinkItemsEqual(a: LinkItem[], b: LinkItem[]): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i += 1) {\n    const left = a[i];\n    const right = b[i];\n    if (!right) return false;\n    if (left.id !== right.id) return false;\n    if (left.normalizedUrl !== right.normalizedUrl) return false;\n    if (left.originalUrl !== right.originalUrl) return false;\n    if (left.isVisible !== right.isVisible) return false;\n    if (left.category !== right.category) return false;\n    if (left.platform.id !== right.platform.id) return false;\n  }\n  return true;\n}\n\nfunction areSuggestionListsEqual(\n  a: SuggestedLink[],\n  b: SuggestedLink[]\n): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n\n  const serialize = (list: SuggestedLink[]) =>\n    list\n      .map(\n        item =>\n          `${item.suggestionId ?? item.normalizedUrl}:${item.platform.id}:${item.normalizedUrl}`\n      )\n      .sort();\n\n  const aSig = serialize(a);\n  const bSig = serialize(b);\n  return aSig.every((value, index) => value === bSig[index]);\n}\n\nexport function EnhancedDashboardLinks({\n  initialLinks,\n}: {\n  initialLinks: ProfileSocialLink[];\n}) {\n  const router = useRouter();\n  const dashboardData = useDashboardData();\n  const [artist, setArtist] = useState<Artist | null>(\n    dashboardData.selectedProfile\n      ? convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n      : null\n  );\n  const isMusicProfile =\n    dashboardData.selectedProfile?.creatorType === 'artist';\n  const profileId = dashboardData.selectedProfile?.id;\n\n  const [profileDisplayName, setProfileDisplayName] = useState<string>(\n    dashboardData.selectedProfile?.displayName ?? ''\n  );\n  const [profileUsername, setProfileUsername] = useState<string>(\n    dashboardData.selectedProfile?.username ?? ''\n  );\n\n  const [editingField, setEditingField] = useState<\n    'displayName' | 'username' | null\n  >(null);\n  const displayNameInputRef = useRef<HTMLInputElement>(null);\n  const usernameInputRef = useRef<HTMLInputElement>(null);\n\n  const [profileSaveStatus, setProfileSaveStatus] = useState<SaveStatus>({\n    saving: false,\n    success: null,\n    error: null,\n    lastSaved: null,\n  });\n  const lastProfileSavedRef = useRef<{\n    displayName: string;\n    username: string;\n  } | null>(null);\n  const linkIngestionGate = useFeatureGate(STATSIG_FLAGS.LINK_INGESTION);\n  const suggestionsEnabled = linkIngestionGate?.value ?? false;\n\n  useEffect(() => {\n    if (!profileSaveStatus.success) return;\n    const timeoutId = window.setTimeout(() => {\n      setProfileSaveStatus(prev => ({ ...prev, success: null }));\n    }, 1500);\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [profileSaveStatus.success]);\n\n  useProfileSaveToasts(profileSaveStatus);\n\n  const [autoRefreshUntilMs, setAutoRefreshUntilMs] = useState<number | null>(\n    null\n  );\n  useEffect(() => {\n    if (!dashboardData.selectedProfile) {\n      setArtist(null);\n      setProfileDisplayName('');\n      setProfileUsername('');\n      setEditingField(null);\n      lastProfileSavedRef.current = null;\n      return;\n    }\n\n    setArtist(\n      convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n    );\n    setProfileDisplayName(dashboardData.selectedProfile.displayName ?? '');\n    setProfileUsername(dashboardData.selectedProfile.username ?? '');\n\n    lastProfileSavedRef.current = {\n      displayName: dashboardData.selectedProfile.displayName ?? '',\n      username: dashboardData.selectedProfile.username ?? '',\n    };\n    setProfileSaveStatus({\n      saving: false,\n      success: null,\n      error: null,\n      lastSaved: null,\n    });\n  }, [dashboardData.selectedProfile]);\n\n  useEffect(() => {\n    if (editingField === 'displayName') {\n      displayNameInputRef.current?.focus();\n      displayNameInputRef.current?.select();\n    }\n    if (editingField === 'username') {\n      usernameInputRef.current?.focus();\n      usernameInputRef.current?.select();\n    }\n  }, [editingField]);\n\n  const updateProfile = useCallback(\n    async (updates: ProfileUpdatePayload): Promise<ProfileUpdateResponse> => {\n      const response = await updateProfileApi(updates);\n      return response as ProfileUpdateResponse;\n    },\n    []\n  );\n\n  const uploadAvatar = useCallback(async (file: File): Promise<string> => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await fetch('/api/images/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const body = (await response.json().catch(() => null)) as {\n      blobUrl?: string;\n      error?: string;\n    } | null;\n\n    if (!response.ok) {\n      const message = body?.error ?? 'Upload failed';\n      throw new Error(message);\n    }\n\n    if (!body?.blobUrl) {\n      throw new Error('Upload failed');\n    }\n\n    return body.blobUrl;\n  }, []);\n\n  const saveProfile = useCallback(\n    async (next: { displayName: string; username: string }): Promise<void> => {\n      if (!profileId) {\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: 'Missing profile id; please refresh and try again.',\n          lastSaved: null,\n        });\n        toast.error('Missing profile id; please refresh and try again.');\n        return;\n      }\n\n      const username = next.username.trim();\n      const displayName = next.displayName.trim();\n\n      if (displayName.length === 0 || username.length === 0) {\n        return;\n      }\n\n      const lastSaved = lastProfileSavedRef.current;\n      if (\n        lastSaved &&\n        lastSaved.displayName === displayName &&\n        lastSaved.username === username\n      ) {\n        return;\n      }\n\n      setProfileSaveStatus(prev => ({\n        ...prev,\n        saving: true,\n        success: null,\n        error: null,\n      }));\n\n      try {\n        const result = await updateProfile({\n          displayName,\n          username,\n        });\n\n        const nextHandle = result.profile.username ?? artist?.handle;\n        const nextName = result.profile.displayName ?? artist?.name;\n        const nextAvatar =\n          typeof result.profile.avatarUrl === 'string'\n            ? result.profile.avatarUrl\n            : artist?.image_url;\n\n        if (nextHandle || nextName || nextAvatar) {\n          setArtist(prev => {\n            if (!prev) return prev;\n            return {\n              ...prev,\n              handle: nextHandle ?? prev.handle,\n              name: nextName ?? prev.name,\n              image_url: nextAvatar ?? prev.image_url,\n            };\n          });\n        }\n\n        lastProfileSavedRef.current = { displayName, username };\n\n        setProfileSaveStatus({\n          saving: false,\n          success: true,\n          error: null,\n          lastSaved: new Date(),\n        });\n\n        if (result.warning) {\n          toast.message(result.warning);\n        }\n\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : 'Failed to update profile';\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: message,\n          lastSaved: null,\n        });\n        toast.error(message);\n      }\n    },\n    [\n      artist?.handle,\n      artist?.image_url,\n      artist?.name,\n      profileId,\n      router,\n      updateProfile,\n    ]\n  );\n\n  const debouncedProfileSave = useMemo(\n    () =>\n      debounce(async (...args: unknown[]) => {\n        const [next] = args as [{ displayName: string; username: string }];\n        await saveProfile(next);\n      }, 900),\n    [saveProfile]\n  );\n\n  useEffect(() => {\n    return () => {\n      debouncedProfileSave.flush();\n    };\n  }, [debouncedProfileSave]);\n\n  const handleAvatarUpload = useCallback(\n    async (file: File): Promise<string> => {\n      try {\n        const blobUrl = await uploadAvatar(file);\n        const result = await updateProfile({ avatarUrl: blobUrl });\n        const nextAvatar = result.profile.avatarUrl ?? blobUrl;\n        setArtist(prev => {\n          if (!prev) return prev;\n          return { ...prev, image_url: nextAvatar };\n        });\n        if (result.warning) {\n          toast.message(result.warning);\n        } else {\n          toast.success('Profile photo updated');\n        }\n        router.refresh();\n        return nextAvatar;\n      } finally {\n        // no-op\n      }\n    },\n    [router, updateProfile, uploadAvatar]\n  );\n\n  const buildPlatformMeta = useCallback((link: ProfileSocialLink): Platform => {\n    const displayName = getSocialPlatformLabel(link.platform as SocialPlatform);\n    const category: PlatformType =\n      (link.platformType as PlatformType | null | undefined) ??\n      getPlatformCategory(link.platform);\n    return {\n      id: link.platform,\n      name: displayName,\n      category,\n      icon: link.platform,\n      color: '#000000',\n      placeholder: link.url,\n    };\n  }, []);\n\n  const convertDbLinkToDetected = useCallback(\n    (\n      link: ProfileSocialLink\n    ): DetectedLink & {\n      id: string;\n      state?: 'active' | 'suggested' | 'rejected';\n      confidence?: number | null;\n      sourcePlatform?: string | null;\n      sourceType?: 'manual' | 'admin' | 'ingested' | null;\n      evidence?: { sources?: string[]; signals?: string[] } | null;\n    } => {\n      const platform = buildPlatformMeta(link);\n      const title = link.displayText || platform.name;\n      return {\n        // DetectedLink fields\n        platform,\n        normalizedUrl: link.url,\n        originalUrl: link.url,\n        suggestedTitle: title,\n        isValid: true,\n        // Extended metadata\n        id: link.id,\n        state: link.state ?? 'active',\n        confidence:\n          typeof link.confidence === 'number'\n            ? link.confidence\n            : Number.parseFloat(String(link.confidence ?? '0')) || null,\n        sourcePlatform: link.sourcePlatform ?? null,\n        sourceType: link.sourceType ?? null,\n        evidence: link.evidence ?? null,\n      };\n    },\n    [buildPlatformMeta]\n  );\n\n  // Convert database social links to LinkItem format\n  const convertDbLinksToLinkItems = useCallback(\n    (dbLinks: ProfileSocialLink[] = []): LinkItem[] => {\n      return dbLinks.map((link, index) => {\n        const detected = convertDbLinkToDetected(link);\n        const platformMeta = buildPlatformMeta(link);\n        const order =\n          typeof link.sortOrder === 'number' ? link.sortOrder : index;\n        const isVisible = link.isActive ?? true;\n        const category = platformMeta.category;\n\n        const item: LinkItem = {\n          id: detected.id,\n          title: detected.suggestedTitle,\n          url: detected.normalizedUrl,\n          platform: platformMeta,\n          isVisible,\n          order,\n          category,\n          normalizedUrl: detected.normalizedUrl,\n          originalUrl: detected.originalUrl,\n          suggestedTitle: detected.suggestedTitle,\n          isValid: detected.isValid,\n          state: detected.state,\n          confidence: detected.confidence ?? null,\n          sourcePlatform: detected.sourcePlatform ?? null,\n          sourceType: detected.sourceType ?? null,\n          evidence: detected.evidence ?? null,\n          version: link.version ?? 1,\n        };\n\n        return item;\n      });\n    },\n    [buildPlatformMeta, convertDbLinkToDetected]\n  );\n\n  const [links, setLinks] = useState<LinkItem[]>(() =>\n    convertDbLinksToLinkItems(initialLinks)\n  );\n\n  const [suggestions, setSuggestions] = useState<SuggestedLink[]>([]);\n  const suggestionsRef = useRef<SuggestedLink[]>(suggestions);\n\n  useEffect(() => {\n    suggestionsRef.current = suggestions;\n  }, [suggestions]);\n\n  const handleLinkUpdate = useCallback(\n    async (\n      updatedLinks: LinkItem[]\n    ): Promise<{ success: boolean; error?: string }> => {\n      try {\n        const formattedLinks = updatedLinks.map(item => ({\n          id: item.id,\n          sortOrder: item.order,\n          isActive: item.isVisible,\n          platform: item.platform.id,\n        }));\n\n        await updateSocialLinksSafe(formattedLinks);\n        setLinks(updatedLinks);\n        return { success: true };\n      } catch (error) {\n        const errorMessage =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error\n              ? error.message\n              : 'Unknown error updating links';\n        return { success: false, error: errorMessage };\n      }\n    },\n    []\n  );\n\n  const handleAcceptSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await acceptSuggestion(suggestionId);\n\n        const suggestion = suggestionsRef.current.find(\n          s => s.suggestionId === suggestionId\n        );\n        if (suggestion) {\n          const newLinkItem: LinkItem = {\n            id: suggestionId,\n            title: suggestion.suggestedTitle,\n            url: suggestion.normalizedUrl,\n            platform: suggestion.platform,\n            isVisible: true,\n            order: links.length,\n            category: suggestion.platform.category,\n            normalizedUrl: suggestion.normalizedUrl,\n            originalUrl: suggestion.originalUrl,\n            suggestedTitle: suggestion.suggestedTitle,\n            isValid: suggestion.isValid,\n            state: 'active',\n            confidence: suggestion.confidence ?? null,\n            sourcePlatform: suggestion.sourcePlatform ?? null,\n            sourceType: suggestion.sourceType ?? null,\n            evidence: suggestion.evidence ?? null,\n            version: 1,\n          };\n\n          const updatedLinks = [...links, newLinkItem];\n          await handleLinkUpdate(updatedLinks);\n\n          setSuggestions(prev =>\n            prev.filter(s => s.suggestionId !== suggestionId)\n          );\n        }\n\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to accept suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    [links, handleLinkUpdate]\n  );\n\n  const handleRejectSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await dismissSuggestion(suggestionId);\n        setSuggestions(prev =>\n          prev.filter(s => s.suggestionId !== suggestionId)\n        );\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to reject suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    []\n  );\n\n  const loadSocialLinks = useCallback(async (): Promise<void> => {\n    if (!profileId) return;\n\n    try {\n      const response = await getSocialLinks(profileId);\n      if (response.links) {\n        const dbLinks = response.links as ProfileSocialLink[];\n        const convertedLinks = convertDbLinksToLinkItems(dbLinks);\n        setLinks(convertedLinks);\n      }\n\n      if (suggestionsEnabled && response.suggestions) {\n        setSuggestions(\n          response.suggestions.map((suggestion: SuggestedLink, index: number) => ({\n            ...suggestion,\n            suggestionId: suggestion.suggestionId ?? `suggestion-${index}`,\n          }))\n        );\n      }\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to load links';\n      console.error('Error loading social links:', message);\n    }\n  }, [profileId, suggestionsEnabled, convertDbLinksToLinkItems]);\n\n  // Poll for social links if suggestions are enabled\n  const pollingEnabled =\n    suggestionsEnabled && profileId ? autoRefreshUntilMs !== null : false;\n  usePollingCoordinator(\n    () => {\n      loadSocialLinks();\n    },\n    {\n      enabled: pollingEnabled,\n      interval: 3000,\n      maxDuration: autoRefreshUntilMs,\n    }\n  );\n\n  // Load links on mount and profile change\n  useEffect(() => {\n    loadSocialLinks();\n  }, [loadSocialLinks]);\n\n  return (\n    <div className='w-full'>\n      <div className='space-y-6'>\n        <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n          <div className='space-y-4'>\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Display Name\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'displayName' ? (\n                  <Input\n                    ref={displayNameInputRef}\n                    value={profileDisplayName}\n                    onChange={e => {\n                      setProfileDisplayName(e.target.value);\n                      debouncedProfileSave({\n                        displayName: e.target.value,\n                        username: profileUsername,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('displayName')}\n                  >\n                    {profileDisplayName || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Username\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'username' ? (\n                  <Input\n                    ref={usernameInputRef}\n                    value={profileUsername}\n                    onChange={e => {\n                      setProfileUsername(e.target.value);\n                      debouncedProfileSave({\n                        displayName: profileDisplayName,\n                        username: e.target.value,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('username')}\n                  >\n                    {profileUsername || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Profile Photo\n              </label>\n              <AvatarUploadable\n                src={artist?.image_url}\n                onUpload={handleAvatarUpload}\n                maxFileSizeBytes={AVATAR_MAX_FILE_SIZE_BYTES}\n                supportedMimeTypes={SUPPORTED_IMAGE_MIME_TYPES}\n                aria-label='Upload profile photo'\n              />\n            </div>\n\n            {profileSaveStatus.error && (\n              <div className='rounded bg-red-100 p-3 text-sm text-red-800'>\n                {profileSaveStatus.error}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {isMusicProfile && (\n          <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n            <h2 className='mb-4 text-lg font-semibold text-content-primary'>\n              Social Links\n            </h2>\n            <GroupedLinksManager\n              links={links}\n              suggestions={suggestions}\n              onLinksUpdate={handleLinkUpdate}\n              onAcceptSuggestion={handleAcceptSuggestion}\n              onRejectSuggestion={handleRejectSuggestion}\n              onRefreshStart={() => setAutoRefreshUntilMs(Date.now() + 30000)}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/EnhancedDashboardLinks.tsx"
        },
        "span": [21477, 21656],
        "sourceCode": "'use client';\n\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { toast } from 'sonner';\nimport type { ProfileSocialLink } from '@/app/app/dashboard/actions';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport { usePreviewPanel } from '@/app/app/dashboard/PreviewPanelContext';\nimport { Input } from '@/components/atoms/Input';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\n\nimport { updateProfile as updateProfileApi } from '@/lib/api-client/endpoints/dashboard/profile';\nimport {\n  acceptSuggestion,\n  dismissSuggestion,\n  getSocialLinks,\n  updateSocialLinksSafe,\n} from '@/lib/api-client/endpoints/dashboard/social-links';\nimport { ApiError } from '@/lib/api-client/types';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { usePollingCoordinator } from '@/lib/hooks/usePollingCoordinator';\nimport { useProfileSaveToasts } from '@/lib/hooks/useProfileSaveToasts';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { getProfileIdentity } from '@/lib/profile/profile-identity';\nimport { debounce } from '@/lib/utils';\nimport {\n  type DetectedLink,\n  getPlatformCategory,\n  type PlatformCategory,\n} from '@/lib/utils/platform-detection';\nimport {\n  getSocialPlatformLabel,\n  type SaveStatus,\n  type SocialPlatform,\n} from '@/types';\nimport { type Artist, convertDrizzleCreatorProfileToArtist } from '@/types/db';\n\nconst GroupedLinksManager = dynamic(\n  () =>\n    import('@/components/dashboard/organisms/GroupedLinksManager').then(\n      mod => ({\n        default: mod.GroupedLinksManager,\n      })\n    ),\n  {\n    loading: () => (\n      <div className='space-y-3'>\n        {Array.from({ length: 4 }).map((_, i) => (\n          <div key={i} className='h-16 animate-pulse rounded-lg bg-surface-1' />\n        ))}\n      </div>\n    ),\n    ssr: false,\n  }\n);\n\ntype ProfileUpdatePayload = {\n  username?: string;\n  displayName?: string;\n  avatarUrl?: string;\n};\n\ntype ProfileUpdateResponse = {\n  profile: {\n    username?: string;\n    displayName?: string | null;\n    avatarUrl?: string | null;\n  };\n  warning?: string;\n};\n\n// Alias PlatformCategory from shared utility for local usage\ntype PlatformType = PlatformCategory;\n\ninterface Platform {\n  id: string;\n  name: string;\n  category: PlatformType;\n  icon: string;\n  color: string;\n  placeholder: string;\n}\n\ninterface LinkItem {\n  id: string;\n  title: string;\n  url: string;\n  platform: Platform;\n  isVisible: boolean;\n  order: number;\n  category: PlatformType;\n  normalizedUrl: string;\n  originalUrl: string;\n  suggestedTitle: string;\n  isValid: boolean;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n  version?: number;\n}\n\ninterface SuggestedLink extends DetectedLink {\n  suggestionId: string;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n}\n\nfunction areLinkItemsEqual(a: LinkItem[], b: LinkItem[]): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i += 1) {\n    const left = a[i];\n    const right = b[i];\n    if (!right) return false;\n    if (left.id !== right.id) return false;\n    if (left.normalizedUrl !== right.normalizedUrl) return false;\n    if (left.originalUrl !== right.originalUrl) return false;\n    if (left.isVisible !== right.isVisible) return false;\n    if (left.category !== right.category) return false;\n    if (left.platform.id !== right.platform.id) return false;\n  }\n  return true;\n}\n\nfunction areSuggestionListsEqual(\n  a: SuggestedLink[],\n  b: SuggestedLink[]\n): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n\n  const serialize = (list: SuggestedLink[]) =>\n    list\n      .map(\n        item =>\n          `${item.suggestionId ?? item.normalizedUrl}:${item.platform.id}:${item.normalizedUrl}`\n      )\n      .sort();\n\n  const aSig = serialize(a);\n  const bSig = serialize(b);\n  return aSig.every((value, index) => value === bSig[index]);\n}\n\nexport function EnhancedDashboardLinks({\n  initialLinks,\n}: {\n  initialLinks: ProfileSocialLink[];\n}) {\n  const router = useRouter();\n  const dashboardData = useDashboardData();\n  const [artist, setArtist] = useState<Artist | null>(\n    dashboardData.selectedProfile\n      ? convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n      : null\n  );\n  const isMusicProfile =\n    dashboardData.selectedProfile?.creatorType === 'artist';\n  const profileId = dashboardData.selectedProfile?.id;\n\n  const [profileDisplayName, setProfileDisplayName] = useState<string>(\n    dashboardData.selectedProfile?.displayName ?? ''\n  );\n  const [profileUsername, setProfileUsername] = useState<string>(\n    dashboardData.selectedProfile?.username ?? ''\n  );\n\n  const [editingField, setEditingField] = useState<\n    'displayName' | 'username' | null\n  >(null);\n  const displayNameInputRef = useRef<HTMLInputElement>(null);\n  const usernameInputRef = useRef<HTMLInputElement>(null);\n\n  const [profileSaveStatus, setProfileSaveStatus] = useState<SaveStatus>({\n    saving: false,\n    success: null,\n    error: null,\n    lastSaved: null,\n  });\n  const lastProfileSavedRef = useRef<{\n    displayName: string;\n    username: string;\n  } | null>(null);\n  const linkIngestionGate = useFeatureGate(STATSIG_FLAGS.LINK_INGESTION);\n  const suggestionsEnabled = linkIngestionGate?.value ?? false;\n\n  useEffect(() => {\n    if (!profileSaveStatus.success) return;\n    const timeoutId = window.setTimeout(() => {\n      setProfileSaveStatus(prev => ({ ...prev, success: null }));\n    }, 1500);\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [profileSaveStatus.success]);\n\n  useProfileSaveToasts(profileSaveStatus);\n\n  const [autoRefreshUntilMs, setAutoRefreshUntilMs] = useState<number | null>(\n    null\n  );\n  useEffect(() => {\n    if (!dashboardData.selectedProfile) {\n      setArtist(null);\n      setProfileDisplayName('');\n      setProfileUsername('');\n      setEditingField(null);\n      lastProfileSavedRef.current = null;\n      return;\n    }\n\n    setArtist(\n      convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n    );\n    setProfileDisplayName(dashboardData.selectedProfile.displayName ?? '');\n    setProfileUsername(dashboardData.selectedProfile.username ?? '');\n\n    lastProfileSavedRef.current = {\n      displayName: dashboardData.selectedProfile.displayName ?? '',\n      username: dashboardData.selectedProfile.username ?? '',\n    };\n    setProfileSaveStatus({\n      saving: false,\n      success: null,\n      error: null,\n      lastSaved: null,\n    });\n  }, [dashboardData.selectedProfile]);\n\n  useEffect(() => {\n    if (editingField === 'displayName') {\n      displayNameInputRef.current?.focus();\n      displayNameInputRef.current?.select();\n    }\n    if (editingField === 'username') {\n      usernameInputRef.current?.focus();\n      usernameInputRef.current?.select();\n    }\n  }, [editingField]);\n\n  const updateProfile = useCallback(\n    async (updates: ProfileUpdatePayload): Promise<ProfileUpdateResponse> => {\n      const response = await updateProfileApi(updates);\n      return response as ProfileUpdateResponse;\n    },\n    []\n  );\n\n  const uploadAvatar = useCallback(async (file: File): Promise<string> => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await fetch('/api/images/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const body = (await response.json().catch(() => null)) as {\n      blobUrl?: string;\n      error?: string;\n    } | null;\n\n    if (!response.ok) {\n      const message = body?.error ?? 'Upload failed';\n      throw new Error(message);\n    }\n\n    if (!body?.blobUrl) {\n      throw new Error('Upload failed');\n    }\n\n    return body.blobUrl;\n  }, []);\n\n  const saveProfile = useCallback(\n    async (next: { displayName: string; username: string }): Promise<void> => {\n      if (!profileId) {\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: 'Missing profile id; please refresh and try again.',\n          lastSaved: null,\n        });\n        toast.error('Missing profile id; please refresh and try again.');\n        return;\n      }\n\n      const username = next.username.trim();\n      const displayName = next.displayName.trim();\n\n      if (displayName.length === 0 || username.length === 0) {\n        return;\n      }\n\n      const lastSaved = lastProfileSavedRef.current;\n      if (\n        lastSaved &&\n        lastSaved.displayName === displayName &&\n        lastSaved.username === username\n      ) {\n        return;\n      }\n\n      setProfileSaveStatus(prev => ({\n        ...prev,\n        saving: true,\n        success: null,\n        error: null,\n      }));\n\n      try {\n        const result = await updateProfile({\n          displayName,\n          username,\n        });\n\n        const nextHandle = result.profile.username ?? artist?.handle;\n        const nextName = result.profile.displayName ?? artist?.name;\n        const nextAvatar =\n          typeof result.profile.avatarUrl === 'string'\n            ? result.profile.avatarUrl\n            : artist?.image_url;\n\n        if (nextHandle || nextName || nextAvatar) {\n          setArtist(prev => {\n            if (!prev) return prev;\n            return {\n              ...prev,\n              handle: nextHandle ?? prev.handle,\n              name: nextName ?? prev.name,\n              image_url: nextAvatar ?? prev.image_url,\n            };\n          });\n        }\n\n        lastProfileSavedRef.current = { displayName, username };\n\n        setProfileSaveStatus({\n          saving: false,\n          success: true,\n          error: null,\n          lastSaved: new Date(),\n        });\n\n        if (result.warning) {\n          toast.message(result.warning);\n        }\n\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : 'Failed to update profile';\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: message,\n          lastSaved: null,\n        });\n        toast.error(message);\n      }\n    },\n    [\n      artist?.handle,\n      artist?.image_url,\n      artist?.name,\n      profileId,\n      router,\n      updateProfile,\n    ]\n  );\n\n  const debouncedProfileSave = useMemo(\n    () =>\n      debounce(async (...args: unknown[]) => {\n        const [next] = args as [{ displayName: string; username: string }];\n        await saveProfile(next);\n      }, 900),\n    [saveProfile]\n  );\n\n  useEffect(() => {\n    return () => {\n      debouncedProfileSave.flush();\n    };\n  }, [debouncedProfileSave]);\n\n  const handleAvatarUpload = useCallback(\n    async (file: File): Promise<string> => {\n      try {\n        const blobUrl = await uploadAvatar(file);\n        const result = await updateProfile({ avatarUrl: blobUrl });\n        const nextAvatar = result.profile.avatarUrl ?? blobUrl;\n        setArtist(prev => {\n          if (!prev) return prev;\n          return { ...prev, image_url: nextAvatar };\n        });\n        if (result.warning) {\n          toast.message(result.warning);\n        } else {\n          toast.success('Profile photo updated');\n        }\n        router.refresh();\n        return nextAvatar;\n      } finally {\n        // no-op\n      }\n    },\n    [router, updateProfile, uploadAvatar]\n  );\n\n  const buildPlatformMeta = useCallback((link: ProfileSocialLink): Platform => {\n    const displayName = getSocialPlatformLabel(link.platform as SocialPlatform);\n    const category: PlatformType =\n      (link.platformType as PlatformType | null | undefined) ??\n      getPlatformCategory(link.platform);\n    return {\n      id: link.platform,\n      name: displayName,\n      category,\n      icon: link.platform,\n      color: '#000000',\n      placeholder: link.url,\n    };\n  }, []);\n\n  const convertDbLinkToDetected = useCallback(\n    (\n      link: ProfileSocialLink\n    ): DetectedLink & {\n      id: string;\n      state?: 'active' | 'suggested' | 'rejected';\n      confidence?: number | null;\n      sourcePlatform?: string | null;\n      sourceType?: 'manual' | 'admin' | 'ingested' | null;\n      evidence?: { sources?: string[]; signals?: string[] } | null;\n    } => {\n      const platform = buildPlatformMeta(link);\n      const title = link.displayText || platform.name;\n      return {\n        // DetectedLink fields\n        platform,\n        normalizedUrl: link.url,\n        originalUrl: link.url,\n        suggestedTitle: title,\n        isValid: true,\n        // Extended metadata\n        id: link.id,\n        state: link.state ?? 'active',\n        confidence:\n          typeof link.confidence === 'number'\n            ? link.confidence\n            : Number.parseFloat(String(link.confidence ?? '0')) || null,\n        sourcePlatform: link.sourcePlatform ?? null,\n        sourceType: link.sourceType ?? null,\n        evidence: link.evidence ?? null,\n      };\n    },\n    [buildPlatformMeta]\n  );\n\n  // Convert database social links to LinkItem format\n  const convertDbLinksToLinkItems = useCallback(\n    (dbLinks: ProfileSocialLink[] = []): LinkItem[] => {\n      return dbLinks.map((link, index) => {\n        const detected = convertDbLinkToDetected(link);\n        const platformMeta = buildPlatformMeta(link);\n        const order =\n          typeof link.sortOrder === 'number' ? link.sortOrder : index;\n        const isVisible = link.isActive ?? true;\n        const category = platformMeta.category;\n\n        const item: LinkItem = {\n          id: detected.id,\n          title: detected.suggestedTitle,\n          url: detected.normalizedUrl,\n          platform: platformMeta,\n          isVisible,\n          order,\n          category,\n          normalizedUrl: detected.normalizedUrl,\n          originalUrl: detected.originalUrl,\n          suggestedTitle: detected.suggestedTitle,\n          isValid: detected.isValid,\n          state: detected.state,\n          confidence: detected.confidence ?? null,\n          sourcePlatform: detected.sourcePlatform ?? null,\n          sourceType: detected.sourceType ?? null,\n          evidence: detected.evidence ?? null,\n          version: link.version ?? 1,\n        };\n\n        return item;\n      });\n    },\n    [buildPlatformMeta, convertDbLinkToDetected]\n  );\n\n  const [links, setLinks] = useState<LinkItem[]>(() =>\n    convertDbLinksToLinkItems(initialLinks)\n  );\n\n  const [suggestions, setSuggestions] = useState<SuggestedLink[]>([]);\n  const suggestionsRef = useRef<SuggestedLink[]>(suggestions);\n\n  useEffect(() => {\n    suggestionsRef.current = suggestions;\n  }, [suggestions]);\n\n  const handleLinkUpdate = useCallback(\n    async (\n      updatedLinks: LinkItem[]\n    ): Promise<{ success: boolean; error?: string }> => {\n      try {\n        const formattedLinks = updatedLinks.map(item => ({\n          id: item.id,\n          sortOrder: item.order,\n          isActive: item.isVisible,\n          platform: item.platform.id,\n        }));\n\n        await updateSocialLinksSafe(formattedLinks);\n        setLinks(updatedLinks);\n        return { success: true };\n      } catch (error) {\n        const errorMessage =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error\n              ? error.message\n              : 'Unknown error updating links';\n        return { success: false, error: errorMessage };\n      }\n    },\n    []\n  );\n\n  const handleAcceptSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await acceptSuggestion(suggestionId);\n\n        const suggestion = suggestionsRef.current.find(\n          s => s.suggestionId === suggestionId\n        );\n        if (suggestion) {\n          const newLinkItem: LinkItem = {\n            id: suggestionId,\n            title: suggestion.suggestedTitle,\n            url: suggestion.normalizedUrl,\n            platform: suggestion.platform,\n            isVisible: true,\n            order: links.length,\n            category: suggestion.platform.category,\n            normalizedUrl: suggestion.normalizedUrl,\n            originalUrl: suggestion.originalUrl,\n            suggestedTitle: suggestion.suggestedTitle,\n            isValid: suggestion.isValid,\n            state: 'active',\n            confidence: suggestion.confidence ?? null,\n            sourcePlatform: suggestion.sourcePlatform ?? null,\n            sourceType: suggestion.sourceType ?? null,\n            evidence: suggestion.evidence ?? null,\n            version: 1,\n          };\n\n          const updatedLinks = [...links, newLinkItem];\n          await handleLinkUpdate(updatedLinks);\n\n          setSuggestions(prev =>\n            prev.filter(s => s.suggestionId !== suggestionId)\n          );\n        }\n\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to accept suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    [links, handleLinkUpdate]\n  );\n\n  const handleRejectSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await dismissSuggestion(suggestionId);\n        setSuggestions(prev =>\n          prev.filter(s => s.suggestionId !== suggestionId)\n        );\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to reject suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    []\n  );\n\n  const loadSocialLinks = useCallback(async (): Promise<void> => {\n    if (!profileId) return;\n\n    try {\n      const response = await getSocialLinks(profileId);\n      if (response.links) {\n        const dbLinks = response.links as ProfileSocialLink[];\n        const convertedLinks = convertDbLinksToLinkItems(dbLinks);\n        setLinks(convertedLinks);\n      }\n\n      if (suggestionsEnabled && response.suggestions) {\n        setSuggestions(\n          response.suggestions.map((suggestion: SuggestedLink, index: number) => ({\n            ...suggestion,\n            suggestionId: suggestion.suggestionId ?? `suggestion-${index}`,\n          }))\n        );\n      }\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to load links';\n      console.error('Error loading social links:', message);\n    }\n  }, [profileId, suggestionsEnabled, convertDbLinksToLinkItems]);\n\n  // Poll for social links if suggestions are enabled\n  const pollingEnabled =\n    suggestionsEnabled && profileId ? autoRefreshUntilMs !== null : false;\n  usePollingCoordinator(\n    () => {\n      loadSocialLinks();\n    },\n    {\n      enabled: pollingEnabled,\n      interval: 3000,\n      maxDuration: autoRefreshUntilMs,\n    }\n  );\n\n  // Load links on mount and profile change\n  useEffect(() => {\n    loadSocialLinks();\n  }, [loadSocialLinks]);\n\n  return (\n    <div className='w-full'>\n      <div className='space-y-6'>\n        <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n          <div className='space-y-4'>\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Display Name\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'displayName' ? (\n                  <Input\n                    ref={displayNameInputRef}\n                    value={profileDisplayName}\n                    onChange={e => {\n                      setProfileDisplayName(e.target.value);\n                      debouncedProfileSave({\n                        displayName: e.target.value,\n                        username: profileUsername,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('displayName')}\n                  >\n                    {profileDisplayName || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Username\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'username' ? (\n                  <Input\n                    ref={usernameInputRef}\n                    value={profileUsername}\n                    onChange={e => {\n                      setProfileUsername(e.target.value);\n                      debouncedProfileSave({\n                        displayName: profileDisplayName,\n                        username: e.target.value,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('username')}\n                  >\n                    {profileUsername || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Profile Photo\n              </label>\n              <AvatarUploadable\n                src={artist?.image_url}\n                onUpload={handleAvatarUpload}\n                maxFileSizeBytes={AVATAR_MAX_FILE_SIZE_BYTES}\n                supportedMimeTypes={SUPPORTED_IMAGE_MIME_TYPES}\n                aria-label='Upload profile photo'\n              />\n            </div>\n\n            {profileSaveStatus.error && (\n              <div className='rounded bg-red-100 p-3 text-sm text-red-800'>\n                {profileSaveStatus.error}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {isMusicProfile && (\n          <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n            <h2 className='mb-4 text-lg font-semibold text-content-primary'>\n              Social Links\n            </h2>\n            <GroupedLinksManager\n              links={links}\n              suggestions={suggestions}\n              onLinksUpdate={handleLinkUpdate}\n              onAcceptSuggestion={handleAcceptSuggestion}\n              onRejectSuggestion={handleRejectSuggestion}\n              onRefreshStart={() => setAutoRefreshUntilMs(Date.now() + 30000)}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/EnhancedDashboardLinks.tsx"
        },
        "span": [21831, 21950],
        "sourceCode": "'use client';\n\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { toast } from 'sonner';\nimport type { ProfileSocialLink } from '@/app/app/dashboard/actions';\nimport { useDashboardData } from '@/app/app/dashboard/DashboardDataContext';\nimport { usePreviewPanel } from '@/app/app/dashboard/PreviewPanelContext';\nimport { Input } from '@/components/atoms/Input';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\n\nimport { updateProfile as updateProfileApi } from '@/lib/api-client/endpoints/dashboard/profile';\nimport {\n  acceptSuggestion,\n  dismissSuggestion,\n  getSocialLinks,\n  updateSocialLinksSafe,\n} from '@/lib/api-client/endpoints/dashboard/social-links';\nimport { ApiError } from '@/lib/api-client/types';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { usePollingCoordinator } from '@/lib/hooks/usePollingCoordinator';\nimport { useProfileSaveToasts } from '@/lib/hooks/useProfileSaveToasts';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { getProfileIdentity } from '@/lib/profile/profile-identity';\nimport { debounce } from '@/lib/utils';\nimport {\n  type DetectedLink,\n  getPlatformCategory,\n  type PlatformCategory,\n} from '@/lib/utils/platform-detection';\nimport {\n  getSocialPlatformLabel,\n  type SaveStatus,\n  type SocialPlatform,\n} from '@/types';\nimport { type Artist, convertDrizzleCreatorProfileToArtist } from '@/types/db';\n\nconst GroupedLinksManager = dynamic(\n  () =>\n    import('@/components/dashboard/organisms/GroupedLinksManager').then(\n      mod => ({\n        default: mod.GroupedLinksManager,\n      })\n    ),\n  {\n    loading: () => (\n      <div className='space-y-3'>\n        {Array.from({ length: 4 }).map((_, i) => (\n          <div key={i} className='h-16 animate-pulse rounded-lg bg-surface-1' />\n        ))}\n      </div>\n    ),\n    ssr: false,\n  }\n);\n\ntype ProfileUpdatePayload = {\n  username?: string;\n  displayName?: string;\n  avatarUrl?: string;\n};\n\ntype ProfileUpdateResponse = {\n  profile: {\n    username?: string;\n    displayName?: string | null;\n    avatarUrl?: string | null;\n  };\n  warning?: string;\n};\n\n// Alias PlatformCategory from shared utility for local usage\ntype PlatformType = PlatformCategory;\n\ninterface Platform {\n  id: string;\n  name: string;\n  category: PlatformType;\n  icon: string;\n  color: string;\n  placeholder: string;\n}\n\ninterface LinkItem {\n  id: string;\n  title: string;\n  url: string;\n  platform: Platform;\n  isVisible: boolean;\n  order: number;\n  category: PlatformType;\n  normalizedUrl: string;\n  originalUrl: string;\n  suggestedTitle: string;\n  isValid: boolean;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n  version?: number;\n}\n\ninterface SuggestedLink extends DetectedLink {\n  suggestionId: string;\n  state?: 'active' | 'suggested' | 'rejected';\n  confidence?: number | null;\n  sourcePlatform?: string | null;\n  sourceType?: 'manual' | 'admin' | 'ingested' | null;\n  evidence?: { sources?: string[]; signals?: string[] } | null;\n}\n\nfunction areLinkItemsEqual(a: LinkItem[], b: LinkItem[]): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i += 1) {\n    const left = a[i];\n    const right = b[i];\n    if (!right) return false;\n    if (left.id !== right.id) return false;\n    if (left.normalizedUrl !== right.normalizedUrl) return false;\n    if (left.originalUrl !== right.originalUrl) return false;\n    if (left.isVisible !== right.isVisible) return false;\n    if (left.category !== right.category) return false;\n    if (left.platform.id !== right.platform.id) return false;\n  }\n  return true;\n}\n\nfunction areSuggestionListsEqual(\n  a: SuggestedLink[],\n  b: SuggestedLink[]\n): boolean {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n\n  const serialize = (list: SuggestedLink[]) =>\n    list\n      .map(\n        item =>\n          `${item.suggestionId ?? item.normalizedUrl}:${item.platform.id}:${item.normalizedUrl}`\n      )\n      .sort();\n\n  const aSig = serialize(a);\n  const bSig = serialize(b);\n  return aSig.every((value, index) => value === bSig[index]);\n}\n\nexport function EnhancedDashboardLinks({\n  initialLinks,\n}: {\n  initialLinks: ProfileSocialLink[];\n}) {\n  const router = useRouter();\n  const dashboardData = useDashboardData();\n  const [artist, setArtist] = useState<Artist | null>(\n    dashboardData.selectedProfile\n      ? convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n      : null\n  );\n  const isMusicProfile =\n    dashboardData.selectedProfile?.creatorType === 'artist';\n  const profileId = dashboardData.selectedProfile?.id;\n\n  const [profileDisplayName, setProfileDisplayName] = useState<string>(\n    dashboardData.selectedProfile?.displayName ?? ''\n  );\n  const [profileUsername, setProfileUsername] = useState<string>(\n    dashboardData.selectedProfile?.username ?? ''\n  );\n\n  const [editingField, setEditingField] = useState<\n    'displayName' | 'username' | null\n  >(null);\n  const displayNameInputRef = useRef<HTMLInputElement>(null);\n  const usernameInputRef = useRef<HTMLInputElement>(null);\n\n  const [profileSaveStatus, setProfileSaveStatus] = useState<SaveStatus>({\n    saving: false,\n    success: null,\n    error: null,\n    lastSaved: null,\n  });\n  const lastProfileSavedRef = useRef<{\n    displayName: string;\n    username: string;\n  } | null>(null);\n  const linkIngestionGate = useFeatureGate(STATSIG_FLAGS.LINK_INGESTION);\n  const suggestionsEnabled = linkIngestionGate?.value ?? false;\n\n  useEffect(() => {\n    if (!profileSaveStatus.success) return;\n    const timeoutId = window.setTimeout(() => {\n      setProfileSaveStatus(prev => ({ ...prev, success: null }));\n    }, 1500);\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [profileSaveStatus.success]);\n\n  useProfileSaveToasts(profileSaveStatus);\n\n  const [autoRefreshUntilMs, setAutoRefreshUntilMs] = useState<number | null>(\n    null\n  );\n  useEffect(() => {\n    if (!dashboardData.selectedProfile) {\n      setArtist(null);\n      setProfileDisplayName('');\n      setProfileUsername('');\n      setEditingField(null);\n      lastProfileSavedRef.current = null;\n      return;\n    }\n\n    setArtist(\n      convertDrizzleCreatorProfileToArtist(dashboardData.selectedProfile)\n    );\n    setProfileDisplayName(dashboardData.selectedProfile.displayName ?? '');\n    setProfileUsername(dashboardData.selectedProfile.username ?? '');\n\n    lastProfileSavedRef.current = {\n      displayName: dashboardData.selectedProfile.displayName ?? '',\n      username: dashboardData.selectedProfile.username ?? '',\n    };\n    setProfileSaveStatus({\n      saving: false,\n      success: null,\n      error: null,\n      lastSaved: null,\n    });\n  }, [dashboardData.selectedProfile]);\n\n  useEffect(() => {\n    if (editingField === 'displayName') {\n      displayNameInputRef.current?.focus();\n      displayNameInputRef.current?.select();\n    }\n    if (editingField === 'username') {\n      usernameInputRef.current?.focus();\n      usernameInputRef.current?.select();\n    }\n  }, [editingField]);\n\n  const updateProfile = useCallback(\n    async (updates: ProfileUpdatePayload): Promise<ProfileUpdateResponse> => {\n      const response = await updateProfileApi(updates);\n      return response as ProfileUpdateResponse;\n    },\n    []\n  );\n\n  const uploadAvatar = useCallback(async (file: File): Promise<string> => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await fetch('/api/images/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const body = (await response.json().catch(() => null)) as {\n      blobUrl?: string;\n      error?: string;\n    } | null;\n\n    if (!response.ok) {\n      const message = body?.error ?? 'Upload failed';\n      throw new Error(message);\n    }\n\n    if (!body?.blobUrl) {\n      throw new Error('Upload failed');\n    }\n\n    return body.blobUrl;\n  }, []);\n\n  const saveProfile = useCallback(\n    async (next: { displayName: string; username: string }): Promise<void> => {\n      if (!profileId) {\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: 'Missing profile id; please refresh and try again.',\n          lastSaved: null,\n        });\n        toast.error('Missing profile id; please refresh and try again.');\n        return;\n      }\n\n      const username = next.username.trim();\n      const displayName = next.displayName.trim();\n\n      if (displayName.length === 0 || username.length === 0) {\n        return;\n      }\n\n      const lastSaved = lastProfileSavedRef.current;\n      if (\n        lastSaved &&\n        lastSaved.displayName === displayName &&\n        lastSaved.username === username\n      ) {\n        return;\n      }\n\n      setProfileSaveStatus(prev => ({\n        ...prev,\n        saving: true,\n        success: null,\n        error: null,\n      }));\n\n      try {\n        const result = await updateProfile({\n          displayName,\n          username,\n        });\n\n        const nextHandle = result.profile.username ?? artist?.handle;\n        const nextName = result.profile.displayName ?? artist?.name;\n        const nextAvatar =\n          typeof result.profile.avatarUrl === 'string'\n            ? result.profile.avatarUrl\n            : artist?.image_url;\n\n        if (nextHandle || nextName || nextAvatar) {\n          setArtist(prev => {\n            if (!prev) return prev;\n            return {\n              ...prev,\n              handle: nextHandle ?? prev.handle,\n              name: nextName ?? prev.name,\n              image_url: nextAvatar ?? prev.image_url,\n            };\n          });\n        }\n\n        lastProfileSavedRef.current = { displayName, username };\n\n        setProfileSaveStatus({\n          saving: false,\n          success: true,\n          error: null,\n          lastSaved: new Date(),\n        });\n\n        if (result.warning) {\n          toast.message(result.warning);\n        }\n\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof Error ? error.message : 'Failed to update profile';\n        setProfileSaveStatus({\n          saving: false,\n          success: false,\n          error: message,\n          lastSaved: null,\n        });\n        toast.error(message);\n      }\n    },\n    [\n      artist?.handle,\n      artist?.image_url,\n      artist?.name,\n      profileId,\n      router,\n      updateProfile,\n    ]\n  );\n\n  const debouncedProfileSave = useMemo(\n    () =>\n      debounce(async (...args: unknown[]) => {\n        const [next] = args as [{ displayName: string; username: string }];\n        await saveProfile(next);\n      }, 900),\n    [saveProfile]\n  );\n\n  useEffect(() => {\n    return () => {\n      debouncedProfileSave.flush();\n    };\n  }, [debouncedProfileSave]);\n\n  const handleAvatarUpload = useCallback(\n    async (file: File): Promise<string> => {\n      try {\n        const blobUrl = await uploadAvatar(file);\n        const result = await updateProfile({ avatarUrl: blobUrl });\n        const nextAvatar = result.profile.avatarUrl ?? blobUrl;\n        setArtist(prev => {\n          if (!prev) return prev;\n          return { ...prev, image_url: nextAvatar };\n        });\n        if (result.warning) {\n          toast.message(result.warning);\n        } else {\n          toast.success('Profile photo updated');\n        }\n        router.refresh();\n        return nextAvatar;\n      } finally {\n        // no-op\n      }\n    },\n    [router, updateProfile, uploadAvatar]\n  );\n\n  const buildPlatformMeta = useCallback((link: ProfileSocialLink): Platform => {\n    const displayName = getSocialPlatformLabel(link.platform as SocialPlatform);\n    const category: PlatformType =\n      (link.platformType as PlatformType | null | undefined) ??\n      getPlatformCategory(link.platform);\n    return {\n      id: link.platform,\n      name: displayName,\n      category,\n      icon: link.platform,\n      color: '#000000',\n      placeholder: link.url,\n    };\n  }, []);\n\n  const convertDbLinkToDetected = useCallback(\n    (\n      link: ProfileSocialLink\n    ): DetectedLink & {\n      id: string;\n      state?: 'active' | 'suggested' | 'rejected';\n      confidence?: number | null;\n      sourcePlatform?: string | null;\n      sourceType?: 'manual' | 'admin' | 'ingested' | null;\n      evidence?: { sources?: string[]; signals?: string[] } | null;\n    } => {\n      const platform = buildPlatformMeta(link);\n      const title = link.displayText || platform.name;\n      return {\n        // DetectedLink fields\n        platform,\n        normalizedUrl: link.url,\n        originalUrl: link.url,\n        suggestedTitle: title,\n        isValid: true,\n        // Extended metadata\n        id: link.id,\n        state: link.state ?? 'active',\n        confidence:\n          typeof link.confidence === 'number'\n            ? link.confidence\n            : Number.parseFloat(String(link.confidence ?? '0')) || null,\n        sourcePlatform: link.sourcePlatform ?? null,\n        sourceType: link.sourceType ?? null,\n        evidence: link.evidence ?? null,\n      };\n    },\n    [buildPlatformMeta]\n  );\n\n  // Convert database social links to LinkItem format\n  const convertDbLinksToLinkItems = useCallback(\n    (dbLinks: ProfileSocialLink[] = []): LinkItem[] => {\n      return dbLinks.map((link, index) => {\n        const detected = convertDbLinkToDetected(link);\n        const platformMeta = buildPlatformMeta(link);\n        const order =\n          typeof link.sortOrder === 'number' ? link.sortOrder : index;\n        const isVisible = link.isActive ?? true;\n        const category = platformMeta.category;\n\n        const item: LinkItem = {\n          id: detected.id,\n          title: detected.suggestedTitle,\n          url: detected.normalizedUrl,\n          platform: platformMeta,\n          isVisible,\n          order,\n          category,\n          normalizedUrl: detected.normalizedUrl,\n          originalUrl: detected.originalUrl,\n          suggestedTitle: detected.suggestedTitle,\n          isValid: detected.isValid,\n          state: detected.state,\n          confidence: detected.confidence ?? null,\n          sourcePlatform: detected.sourcePlatform ?? null,\n          sourceType: detected.sourceType ?? null,\n          evidence: detected.evidence ?? null,\n          version: link.version ?? 1,\n        };\n\n        return item;\n      });\n    },\n    [buildPlatformMeta, convertDbLinkToDetected]\n  );\n\n  const [links, setLinks] = useState<LinkItem[]>(() =>\n    convertDbLinksToLinkItems(initialLinks)\n  );\n\n  const [suggestions, setSuggestions] = useState<SuggestedLink[]>([]);\n  const suggestionsRef = useRef<SuggestedLink[]>(suggestions);\n\n  useEffect(() => {\n    suggestionsRef.current = suggestions;\n  }, [suggestions]);\n\n  const handleLinkUpdate = useCallback(\n    async (\n      updatedLinks: LinkItem[]\n    ): Promise<{ success: boolean; error?: string }> => {\n      try {\n        const formattedLinks = updatedLinks.map(item => ({\n          id: item.id,\n          sortOrder: item.order,\n          isActive: item.isVisible,\n          platform: item.platform.id,\n        }));\n\n        await updateSocialLinksSafe(formattedLinks);\n        setLinks(updatedLinks);\n        return { success: true };\n      } catch (error) {\n        const errorMessage =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error\n              ? error.message\n              : 'Unknown error updating links';\n        return { success: false, error: errorMessage };\n      }\n    },\n    []\n  );\n\n  const handleAcceptSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await acceptSuggestion(suggestionId);\n\n        const suggestion = suggestionsRef.current.find(\n          s => s.suggestionId === suggestionId\n        );\n        if (suggestion) {\n          const newLinkItem: LinkItem = {\n            id: suggestionId,\n            title: suggestion.suggestedTitle,\n            url: suggestion.normalizedUrl,\n            platform: suggestion.platform,\n            isVisible: true,\n            order: links.length,\n            category: suggestion.platform.category,\n            normalizedUrl: suggestion.normalizedUrl,\n            originalUrl: suggestion.originalUrl,\n            suggestedTitle: suggestion.suggestedTitle,\n            isValid: suggestion.isValid,\n            state: 'active',\n            confidence: suggestion.confidence ?? null,\n            sourcePlatform: suggestion.sourcePlatform ?? null,\n            sourceType: suggestion.sourceType ?? null,\n            evidence: suggestion.evidence ?? null,\n            version: 1,\n          };\n\n          const updatedLinks = [...links, newLinkItem];\n          await handleLinkUpdate(updatedLinks);\n\n          setSuggestions(prev =>\n            prev.filter(s => s.suggestionId !== suggestionId)\n          );\n        }\n\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to accept suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    [links, handleLinkUpdate]\n  );\n\n  const handleRejectSuggestion = useCallback(\n    async (suggestionId: string): Promise<boolean> => {\n      try {\n        await dismissSuggestion(suggestionId);\n        setSuggestions(prev =>\n          prev.filter(s => s.suggestionId !== suggestionId)\n        );\n        return true;\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : 'Failed to reject suggestion';\n        toast.error(message);\n        return false;\n      }\n    },\n    []\n  );\n\n  const loadSocialLinks = useCallback(async (): Promise<void> => {\n    if (!profileId) return;\n\n    try {\n      const response = await getSocialLinks(profileId);\n      if (response.links) {\n        const dbLinks = response.links as ProfileSocialLink[];\n        const convertedLinks = convertDbLinksToLinkItems(dbLinks);\n        setLinks(convertedLinks);\n      }\n\n      if (suggestionsEnabled && response.suggestions) {\n        setSuggestions(\n          response.suggestions.map((suggestion: SuggestedLink, index: number) => ({\n            ...suggestion,\n            suggestionId: suggestion.suggestionId ?? `suggestion-${index}`,\n          }))\n        );\n      }\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to load links';\n      console.error('Error loading social links:', message);\n    }\n  }, [profileId, suggestionsEnabled, convertDbLinksToLinkItems]);\n\n  // Poll for social links if suggestions are enabled\n  const pollingEnabled =\n    suggestionsEnabled && profileId ? autoRefreshUntilMs !== null : false;\n  usePollingCoordinator(\n    () => {\n      loadSocialLinks();\n    },\n    {\n      enabled: pollingEnabled,\n      interval: 3000,\n      maxDuration: autoRefreshUntilMs,\n    }\n  );\n\n  // Load links on mount and profile change\n  useEffect(() => {\n    loadSocialLinks();\n  }, [loadSocialLinks]);\n\n  return (\n    <div className='w-full'>\n      <div className='space-y-6'>\n        <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n          <div className='space-y-4'>\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Display Name\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'displayName' ? (\n                  <Input\n                    ref={displayNameInputRef}\n                    value={profileDisplayName}\n                    onChange={e => {\n                      setProfileDisplayName(e.target.value);\n                      debouncedProfileSave({\n                        displayName: e.target.value,\n                        username: profileUsername,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('displayName')}\n                  >\n                    {profileDisplayName || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Username\n              </label>\n              <div className='mt-1 flex items-center gap-2'>\n                {editingField === 'username' ? (\n                  <Input\n                    ref={usernameInputRef}\n                    value={profileUsername}\n                    onChange={e => {\n                      setProfileUsername(e.target.value);\n                      debouncedProfileSave({\n                        displayName: profileDisplayName,\n                        username: e.target.value,\n                      });\n                    }}\n                    onBlur={() => setEditingField(null)}\n                    className='flex-1'\n                  />\n                ) : (\n                  <div\n                    className='flex-1 cursor-pointer rounded px-3 py-2 hover:bg-surface-2'\n                    onClick={() => setEditingField('username')}\n                  >\n                    {profileUsername || 'Click to edit'}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className='block text-sm font-medium text-content-primary'>\n                Profile Photo\n              </label>\n              <AvatarUploadable\n                src={artist?.image_url}\n                onUpload={handleAvatarUpload}\n                maxFileSizeBytes={AVATAR_MAX_FILE_SIZE_BYTES}\n                supportedMimeTypes={SUPPORTED_IMAGE_MIME_TYPES}\n                aria-label='Upload profile photo'\n              />\n            </div>\n\n            {profileSaveStatus.error && (\n              <div className='rounded bg-red-100 p-3 text-sm text-red-800'>\n                {profileSaveStatus.error}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {isMusicProfile && (\n          <div className='rounded-lg border border-surface-3 bg-surface-1 p-6'>\n            <h2 className='mb-4 text-lg font-semibold text-content-primary'>\n              Social Links\n            </h2>\n            <GroupedLinksManager\n              links={links}\n              suggestions={suggestions}\n              onLinksUpdate={handleLinkUpdate}\n              onAcceptSuggestion={handleAcceptSuggestion}\n              onRejectSuggestion={handleRejectSuggestion}\n              onRefreshStart={() => setAutoRefreshUntilMs(Date.now() + 30000)}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/dashboard/organisms/ProfileForm.tsx" },
        "span": [8630, 8643],
        "sourceCode": "'use client';\n\nimport { useAuth } from '@clerk/nextjs';\nimport { Button } from '@jovie/ui';\nimport { useMemo, useRef, useState } from 'react';\nimport { Input } from '@/components/atoms/Input';\nimport { FormField } from '@/components/molecules/FormField';\nimport { ErrorSummary } from '@/components/organisms/ErrorSummary';\nimport {\n  UpdateProfileResponse,\n  updateProfile,\n} from '@/lib/api-client/endpoints/dashboard/profile';\nimport { ApiError } from '@/lib/api-client/types';\n// flags import removed - pre-launch\nimport { Artist, convertDrizzleCreatorProfileToArtist } from '@/types/db';\n\ninterface ProfileFormProps {\n  artist: Artist;\n  onUpdate: (artist: Artist) => void;\n}\n\nexport function ProfileForm({ artist, onUpdate }: ProfileFormProps) {\n  const { has } = useAuth();\n  const formRef = useRef<HTMLFormElement>(null);\n  const nameInputRef = useRef<HTMLInputElement>(null);\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | undefined>();\n  const [success, setSuccess] = useState(false);\n  const [formSubmitted, setFormSubmitted] = useState(false);\n  const [validationErrors, setValidationErrors] = useState<\n    Record<string, string>\n  >({});\n\n  // Check if user has the remove_branding feature\n  const hasRemoveBrandingFeature =\n    has?.({ feature: 'remove_branding' }) ?? false;\n\n  const [formData, setFormData] = useState({\n    name: artist.name || '',\n    tagline: artist.tagline || '',\n    image_url: artist.image_url || '',\n    hide_branding: artist.settings?.hide_branding ?? false,\n  });\n\n  // Validate form data\n  const validateForm = () => {\n    const errors: Record<string, string> = {};\n\n    if (!formData.name.trim()) {\n      errors.name = 'Artist name is required';\n    } else if (formData.name.length > 50) {\n      errors.name = 'Artist name must be less than 50 characters';\n    }\n\n    if (formData.tagline.length > 160) {\n      errors.tagline = 'Tagline must be less than 160 characters';\n    }\n\n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setFormSubmitted(true);\n\n    // Validate form\n    if (!validateForm()) {\n      // Focus the first field with an error\n      if (validationErrors.name && nameInputRef.current) {\n        nameInputRef.current.focus();\n      }\n      return;\n    }\n\n    setLoading(true);\n    setError(undefined);\n    setSuccess(false);\n\n    try {\n      const settingsUpdates = hasRemoveBrandingFeature\n        ? { hide_branding: formData.hide_branding }\n        : undefined;\n\n      // Use the API client for consistent error handling and type safety\n      const response: UpdateProfileResponse = await updateProfile({\n        displayName: formData.name,\n        bio: formData.tagline,\n        avatarUrl: formData.image_url || null,\n        ...(settingsUpdates ? { settings: settingsUpdates } : {}),\n      });\n\n      const updatedArtist = convertDrizzleCreatorProfileToArtist(\n        response.profile as Parameters<\n          typeof convertDrizzleCreatorProfileToArtist\n        >[0]\n      );\n      onUpdate(updatedArtist);\n      setSuccess(true);\n\n      // Announce success to screen readers\n      const successMessage = document.getElementById('success-message');\n      if (successMessage) {\n        successMessage.textContent = 'Profile updated successfully!';\n      }\n\n      setTimeout(() => setSuccess(false), 3000);\n    } catch (err) {\n      const message =\n        err instanceof ApiError ? err.message : 'Failed to update profile';\n      setError(message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Collect all form errors for the error summary\n  const formErrors = useMemo(() => {\n    const errors: Record<string, string> = {};\n\n    // Include validation errors\n    Object.entries(validationErrors).forEach(([key, value]) => {\n      errors[key] = value;\n    });\n\n    // Include API error if present\n    if (error) {\n      errors.form = error;\n    }\n\n    return errors;\n  }, [validationErrors, error]);\n\n  return (\n    <form\n      ref={formRef}\n      onSubmit={handleSubmit}\n      className='space-y-4'\n      noValidate\n      data-testid='profile-form'\n    >\n      {/* Screen reader announcements */}\n      <div\n        className='sr-only'\n        aria-live='assertive'\n        aria-atomic='true'\n        id='success-message'\n      ></div>\n\n      {/* Error summary for screen readers */}\n      <ErrorSummary\n        errors={formErrors}\n        onFocusField={fieldName => {\n          if (fieldName === 'name' && nameInputRef.current) {\n            nameInputRef.current.focus();\n          }\n        }}\n      />\n\n      {/* Avatar uploader (disabled by default) */}\n      <FormField\n        label='Artist Name'\n        error={formSubmitted ? validationErrors.name : undefined}\n        helpText='Your name as it will appear on your profile'\n        id='artist-name'\n        required\n      >\n        <Input\n          ref={nameInputRef}\n          type='text'\n          value={formData.name}\n          onChange={e => setFormData({ ...formData, name: e.target.value })}\n          placeholder='Your Artist Name'\n          required\n          autoCapitalize='words'\n          autoCorrect='on'\n          autoComplete='name'\n          validationState={\n            formSubmitted && validationErrors.name ? 'invalid' : null\n          }\n        />\n      </FormField>\n\n      <FormField\n        label='Tagline'\n        error={formSubmitted ? validationErrors.tagline : undefined}\n        helpText='A brief description that appears under your name (max 160 characters)'\n        id='artist-tagline'\n      >\n        <Input\n          type='text'\n          value={formData.tagline}\n          onChange={e => setFormData({ ...formData, tagline: e.target.value })}\n          placeholder='Share your story, music journey, or what inspires you...'\n          autoCapitalize='sentences'\n          autoCorrect='on'\n          autoComplete='off'\n          validationState={\n            formSubmitted && validationErrors.tagline ? 'invalid' : null\n          }\n        />\n      </FormField>\n\n      {/* Branding Toggle - only show if user has the feature */}\n      {hasRemoveBrandingFeature && (\n        <FormField\n          label='Branding'\n          helpText='Control whether Jovie branding appears on your profile'\n          id='branding-toggle'\n        >\n          <div className='flex items-center justify-between'>\n            <div className='flex flex-col'>\n              <span className='text-sm font-medium text-primary-token'>\n                Show Jovie branding\n              </span>\n              <span className='text-xs text-secondary-token'>\n                Display Jovie branding on your profile\n              </span>\n            </div>\n            <button\n              type='button'\n              onClick={() =>\n                setFormData({\n                  ...formData,\n                  hide_branding: !formData.hide_branding,\n                })\n              }\n              className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-2 focus-visible:ring-offset-bg-base ${\n                formData.hide_branding ? 'bg-surface-3' : 'bg-accent'\n              }`}\n              disabled={loading}\n              aria-pressed={!formData.hide_branding}\n              aria-label={\n                formData.hide_branding\n                  ? 'Enable Jovie branding'\n                  : 'Disable Jovie branding'\n              }\n            >\n              <span\n                className={`inline-block h-4 w-4 transform rounded-full bg-surface-1 transition-transform ${\n                  formData.hide_branding ? 'translate-x-1' : 'translate-x-6'\n                }`}\n                aria-hidden='true'\n              />\n            </button>\n          </div>\n        </FormField>\n      )}\n\n      <Button\n        type='submit'\n        disabled={loading}\n        variant='primary'\n        className='w-full'\n        aria-busy={loading}\n      >\n        {loading ? (\n          <div className='flex items-center justify-center space-x-2'>\n            <span\n              className='animate-spin motion-reduce:animate-none h-4 w-4 border-2 border-white border-t-transparent rounded-full'\n              aria-hidden='true'\n            ></span>\n            <span>Updating...</span>\n          </div>\n        ) : (\n          'Update Profile'\n        )}\n      </Button>\n\n      {success && (\n        <div\n          className='bg-green-500/10 border border-green-500/20 rounded-lg p-3'\n          role='status'\n          aria-live='polite'\n        >\n          <p className='text-sm text-green-600 dark:text-green-400'>\n            Profile updated successfully!\n          </p>\n        </div>\n      )}\n    </form>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/SettingsPolished.tsx"
        },
        "span": [20716, 20917],
        "sourceCode": "'use client';\n\nimport {\n  CreditCardIcon,\n  RocketLaunchIcon,\n  SparklesIcon,\n} from '@heroicons/react/24/outline';\nimport { Button } from '@jovie/ui';\nimport { useRouter } from 'next/navigation';\nimport { useTheme } from 'next-themes';\nimport {\n  type ComponentType,\n  type FormEvent,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { Input } from '@/components/atoms/Input';\nimport { Textarea } from '@/components/atoms/Textarea';\nimport { SettingsStatusPill } from '@/components/dashboard/molecules/SettingsStatusPill';\nimport { SettingsToggleRow } from '@/components/dashboard/molecules/SettingsToggleRow';\nimport { AccountSettingsSection } from '@/components/dashboard/organisms/AccountSettingsSection';\nimport { SettingsProGateCard } from '@/components/dashboard/organisms/SettingsProGateCard';\nimport { SettingsSection } from '@/components/dashboard/organisms/SettingsSection';\nimport { useToast } from '@/components/molecules/ToastContainer';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\nimport { APP_URL } from '@/constants/app';\nimport { useBillingStatus } from '@/hooks/use-billing-status';\nimport { api } from '@/lib/api-client';\nimport {\n  updateAvatar,\n  updateProfile,\n  updateSettings,\n} from '@/lib/api-client/endpoints/dashboard/profile';\nimport { setThemeSafe } from '@/lib/api-client/endpoints/dashboard/theme';\nimport { ApiError } from '@/lib/api-client/types';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { cn, debounce } from '@/lib/utils';\nimport type { Artist } from '@/types/db';\nimport { DashboardCard } from '../atoms/DashboardCard';\n\ninterface SettingsPolishedProps {\n  artist: Artist;\n  onArtistUpdate?: (updatedArtist: Artist) => void;\n  focusSection?: string;\n}\n\n// Use Geist button styling directly; keep layout helper only.\nconst SETTINGS_BUTTON_CLASS = 'w-full sm:w-auto';\n\nexport function SettingsPolished({\n  artist,\n  onArtistUpdate,\n  focusSection,\n}: SettingsPolishedProps) {\n  const { theme, setTheme } = useTheme();\n  const router = useRouter();\n  const billingStatus = useBillingStatus();\n  const { isPro } = billingStatus;\n  const [isMarketingSaving, setIsMarketingSaving] = useState(false);\n  const [isPixelSaving, setIsPixelSaving] = useState(false);\n  const [isBillingLoading, setIsBillingLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    username: artist.handle || '',\n    displayName: artist.name || '',\n  });\n\n  const [profileSaveStatus, setProfileSaveStatus] = useState<{\n    saving: boolean;\n    success: boolean | null;\n    error: string | null;\n  }>({\n    saving: false,\n    success: null,\n    error: null,\n  });\n\n  const lastProfileSavedRef = useRef<{\n    displayName: string;\n    username: string;\n  } | null>(null);\n\n  const [marketingEmails, setMarketingEmails] = useState(true); // Default to true, should be loaded from user preferences\n\n  const notificationsGate = useFeatureGate(STATSIG_FLAGS.NOTIFICATIONS);\n  const notificationsEnabled = notificationsGate.value;\n\n  const [pixelData, setPixelData] = useState({\n    facebookPixel: '',\n    googleAdsConversion: '',\n    tiktokPixel: '',\n    customPixel: '',\n  });\n\n  // State for branding removal toggle\n  const [hideBranding, setHideBranding] = useState(\n    artist.settings?.hide_branding ?? false\n  );\n  const [isSavingBranding, setIsSavingBranding] = useState(false);\n  const { showToast } = useToast();\n  const maxAvatarSize = AVATAR_MAX_FILE_SIZE_BYTES;\n  const acceptedAvatarTypes = SUPPORTED_IMAGE_MIME_TYPES;\n\n  const handleAvatarUpload = useCallback(async (file: File) => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await fetch('/api/images/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const data = (await response.json().catch(() => ({}))) as {\n      blobUrl?: string;\n      error?: string;\n      code?: string;\n      retryable?: boolean;\n    };\n\n    if (!response.ok) {\n      // Throw structured error for AvatarUploadable to handle\n      const error = new Error(data.error || 'Upload failed') as Error & {\n        code?: string;\n        retryable?: boolean;\n      };\n      error.code = data.code;\n      error.retryable = data.retryable;\n      throw error;\n    }\n\n    if (!data.blobUrl) {\n      throw new Error('No image URL returned from upload');\n    }\n\n    return data.blobUrl;\n  }, []);\n\n  const handleAvatarUpdate = useCallback(\n    async (imageUrl: string) => {\n      const previousImage = artist.image_url;\n\n      try {\n        const { profile, warning } = await updateAvatar(imageUrl);\n\n        if (onArtistUpdate) {\n          onArtistUpdate({\n            ...artist,\n            image_url: profile?.avatarUrl ?? imageUrl,\n          });\n        }\n\n        // Show warning if Clerk sync failed but don't treat as error\n        if (warning) {\n          showToast({ type: 'warning', message: warning });\n        }\n      } catch (error) {\n        if (onArtistUpdate) {\n          onArtistUpdate({\n            ...artist,\n            image_url: previousImage,\n          });\n        }\n\n        const message =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error && error.message\n              ? error.message\n              : 'Failed to update profile photo';\n        showToast({ type: 'error', message });\n      }\n    },\n    [artist, onArtistUpdate, showToast]\n  );\n\n  const handleBrandingToggle = useCallback(\n    async (enabled: boolean) => {\n      setIsSavingBranding(true);\n      try {\n        await updateSettings({ hide_branding: enabled });\n\n        setHideBranding(enabled);\n\n        if (onArtistUpdate) {\n          onArtistUpdate({\n            ...artist,\n            settings: {\n              ...artist.settings,\n              hide_branding: enabled,\n            },\n          });\n        }\n      } catch {\n        // Revert the toggle on error\n        setHideBranding(!enabled);\n      } finally {\n        setIsSavingBranding(false);\n      }\n    },\n    [artist, onArtistUpdate]\n  );\n\n  const handleBilling = async () => {\n    setIsBillingLoading(true);\n    await router.push('/app/settings/billing');\n  };\n\n  const saveProfile = useCallback(\n    async (next: { displayName: string; username: string }) => {\n      const displayName = next.displayName.trim();\n      const username = next.username.trim();\n\n      if (!displayName || !username) {\n        return;\n      }\n\n      const lastSaved = lastProfileSavedRef.current;\n      if (\n        lastSaved &&\n        lastSaved.displayName === displayName &&\n        lastSaved.username === username\n      ) {\n        return;\n      }\n\n      setProfileSaveStatus({ saving: true, success: null, error: null });\n\n      try {\n        const { profile } = await updateProfile({ username, displayName });\n\n        lastProfileSavedRef.current = { displayName, username };\n\n        if (profile && onArtistUpdate) {\n          onArtistUpdate({\n            ...artist,\n            handle: profile.username ?? artist.handle,\n            name: profile.displayName ?? artist.name,\n            tagline: profile.bio ?? artist.tagline,\n          });\n        }\n\n        setFormData(prev => ({\n          ...prev,\n          username: profile?.username ?? username,\n          displayName: profile?.displayName ?? displayName,\n        }));\n\n        setProfileSaveStatus({ saving: false, success: true, error: null });\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error && error.message\n              ? error.message\n              : 'Failed to update profile';\n        setProfileSaveStatus({ saving: false, success: false, error: message });\n        showToast({ type: 'error', message });\n      }\n    },\n    [artist, onArtistUpdate, router, showToast]\n  );\n\n  useEffect(() => {\n    lastProfileSavedRef.current = {\n      displayName: artist.name || '',\n      username: artist.handle || '',\n    };\n    setProfileSaveStatus({ saving: false, success: null, error: null });\n  }, [artist.handle, artist.name]);\n\n  const debouncedProfileSave = useMemo(\n    () =>\n      debounce(async (...args: unknown[]) => {\n        const [next] = args as [{ displayName: string; username: string }];\n        await saveProfile(next);\n      }, 900),\n    [saveProfile]\n  );\n\n  useEffect(() => {\n    return () => {\n      debouncedProfileSave.flush();\n    };\n  }, [debouncedProfileSave]);\n\n  const handlePixelInputChange = (field: string, value: string) => {\n    setPixelData(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleThemeChange = async (newTheme: 'light' | 'dark' | 'system') => {\n    setTheme(newTheme);\n\n    // Save theme preference to database for signed-in users (fire-and-forget)\n    void setThemeSafe(newTheme);\n  };\n\n  const handleMarketingToggle = useCallback(async (enabled: boolean) => {\n    setIsMarketingSaving(true);\n    try {\n      await updateSettings({ marketing_emails: enabled });\n\n      setMarketingEmails(enabled);\n    } catch {\n      setMarketingEmails(!enabled);\n    } finally {\n      setIsMarketingSaving(false);\n    }\n  }, []);\n\n  const handlePixelSubmit = useCallback(\n    async (e: FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      setIsPixelSaving(true);\n\n      try {\n        await api.dashboard.put('/pixels', {\n          body: {\n            facebookPixel: pixelData.facebookPixel,\n            googleAdsConversion: pixelData.googleAdsConversion,\n            tiktokPixel: pixelData.tiktokPixel,\n            customPixel: pixelData.customPixel,\n          },\n        });\n\n        showToast({ type: 'success', message: 'Pixels saved successfully' });\n      } catch {\n        showToast({ type: 'error', message: 'Failed to save pixels' });\n      } finally {\n        setIsPixelSaving(false);\n      }\n    },\n    [pixelData, showToast]\n  );\n\n  const appDomain = APP_URL.replace(/^https?:\\/\\//, '');\n\n  useEffect(() => {\n    if (!profileSaveStatus.success) return;\n    const timeoutId = window.setTimeout(() => {\n      setProfileSaveStatus(prev => ({ ...prev, success: null }));\n    }, 1500);\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [profileSaveStatus.success]);\n\n  const renderProfileSection = () => (\n    <DashboardCard variant='settings' className='relative'>\n      {profileSaveStatus.saving ? (\n        <SettingsStatusPill state='saving' className='absolute right-6 top-6' />\n      ) : profileSaveStatus.success ? (\n        <SettingsStatusPill state='saved' className='absolute right-6 top-6' />\n      ) : null}\n      <div className='flex flex-col gap-6'>\n        <div className='flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between'>\n          <div>\n            <p className='text-sm text-secondary-token'>\n              Photo, name, username.\n            </p>\n          </div>\n        </div>\n\n        <div className='grid gap-6 lg:grid-cols-[240px,1fr]'>\n          <div>\n            <div className='flex justify-center'>\n              <AvatarUploadable\n                src={artist.image_url}\n                alt={artist.name || 'Profile photo'}\n                name={artist.name || artist.handle}\n                size='display-xl'\n                uploadable\n                showHoverOverlay\n                onUpload={handleAvatarUpload}\n                onSuccess={handleAvatarUpdate}\n                onError={message => showToast({ type: 'error', message })}\n                maxFileSize={maxAvatarSize}\n                acceptedTypes={acceptedAvatarTypes}\n                className='mx-auto animate-in fade-in duration-300'\n              />\n            </div>\n            <p className='text-sm text-secondary text-center mt-3'>\n              Drag & drop or click to upload.\n            </p>\n          </div>\n\n          <div className='space-y-6'>\n            <div>\n              <label\n                htmlFor='username'\n                className='block text-xs font-medium text-primary-token mb-2'\n              >\n                Username\n              </label>\n              <div className='mb-2 text-xs text-secondary-token/70'>\n                Used in your profile URL\n              </div>\n              <div className='relative'>\n                <div className='flex rounded-lg shadow-sm'>\n                  <span className='inline-flex items-center px-3 rounded-l-lg border border-r-0 border-subtle bg-surface-2 text-secondary-token text-sm select-none'>\n                    {appDomain}/\n                  </span>\n                  <Input\n                    type='text'\n                    name='username'\n                    id='username'\n                    value={formData.username}\n                    onChange={e => {\n                      const nextValue = e.target.value;\n                      setFormData(prev => {\n                        const next = { ...prev, username: nextValue };\n                        setProfileSaveStatus(s => ({\n                          ...s,\n                          success: null,\n                          error: null,\n                        }));\n                        debouncedProfileSave({\n                          displayName: next.displayName,\n                          username: next.username,\n                        });\n                        return next;\n                      });\n                    }}\n                    onBlur={() => debouncedProfileSave.flush()}\n                    placeholder='yourname'\n                    className='flex-1 min-w-0'\n                    inputClassName='block w-full px-3 py-2 rounded-none rounded-r-lg border border-subtle bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm transition-colors'\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <label\n                htmlFor='displayName'\n                className='block text-xs font-medium text-primary-token mb-2'\n              >\n                Display Name\n              </label>\n              <Input\n                type='text'\n                name='displayName'\n                id='displayName'\n                value={formData.displayName}\n                onChange={e => {\n                  const nextValue = e.target.value;\n                  setFormData(prev => {\n                    const next = { ...prev, displayName: nextValue };\n                    setProfileSaveStatus(s => ({\n                      ...s,\n                      success: null,\n                      error: null,\n                    }));\n                    debouncedProfileSave({\n                      displayName: next.displayName,\n                      username: next.username,\n                    });\n                    return next;\n                  });\n                }}\n                onBlur={() => debouncedProfileSave.flush()}\n                placeholder='The name your fans will see'\n                inputClassName='block w-full px-3 py-2 border border-subtle rounded-lg bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm shadow-sm transition-colors'\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </DashboardCard>\n  );\n\n  const renderAccountSection = () => (\n    <div className='space-y-6'>\n      {process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY ? (\n        <AccountSettingsSection />\n      ) : (\n        <DashboardCard variant='settings'>\n          <div className='text-center py-4'>\n            <h3 className='text-lg font-medium text-primary mb-2'>\n              Account settings unavailable\n            </h3>\n            <p className='text-sm text-secondary'>\n              Clerk is not configured (missing publishable key). Set\n              NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY to enable account management.\n            </p>\n          </div>\n        </DashboardCard>\n      )}\n    </div>\n  );\n\n  const renderAppearanceSection = () => (\n    <div>\n      <DashboardCard variant='settings' className='space-y-4'>\n        <h3 className='text-lg font-medium text-primary mb-6'>\n          Interface Theme\n        </h3>\n\n        <div className='grid grid-cols-3 gap-4'>\n          {[\n            {\n              value: 'light',\n              label: 'Light',\n              description: 'Bright and clean.',\n            },\n            {\n              value: 'dark',\n              label: 'Dark',\n              description: 'Bold and focused.',\n            },\n            {\n              value: 'system',\n              label: 'System',\n              description: 'Match device settings.',\n            },\n          ].map(option => (\n            <button\n              key={option.value}\n              onClick={() =>\n                handleThemeChange(option.value as 'light' | 'dark' | 'system')\n              }\n              className={cn(\n                'group relative flex flex-col p-4 rounded-xl border-2 transition-all duration-300 ease-in-out',\n                'hover:translate-y-[-2px] hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base',\n                theme === option.value\n                  ? 'border-accent/70 bg-surface-2'\n                  : 'border-subtle hover:border-accent/50'\n              )}\n            >\n              {/* Miniature Dashboard Preview */}\n              <div className='relative w-full h-20 rounded-lg overflow-hidden mb-3'>\n                {option.value === 'system' ? (\n                  <div className='flex w-full h-full'>\n                    <div className='relative flex-1 bg-surface-1'>\n                      {/* Sidebar */}\n                      <div className='absolute left-0 top-0 w-3.5 h-full bg-surface-2 rounded-r' />\n                      {/* Content area with some mock elements */}\n                      <div className='absolute left-5 top-2 right-2 bottom-2 space-y-1'>\n                        <div className='h-2 bg-surface-3 rounded w-1/3' />\n                        <div className='h-1.5 bg-surface-3 rounded w-1/2 opacity-60' />\n                        <div className='h-1.5 bg-surface-3 rounded w-2/3 opacity-40' />\n                      </div>\n                    </div>\n                    <div className='dark relative flex-1 bg-surface-1'>\n                      {/* Sidebar */}\n                      <div className='absolute left-0 top-0 w-3.5 h-full bg-surface-2 rounded-r' />\n                      {/* Content area with some mock elements */}\n                      <div className='absolute left-5 top-2 right-2 bottom-2 space-y-1'>\n                        <div className='h-2 bg-surface-3 rounded w-1/3' />\n                        <div className='h-1.5 bg-surface-3 rounded w-1/2 opacity-60' />\n                        <div className='h-1.5 bg-surface-3 rounded w-2/3 opacity-40' />\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <div\n                    className={cn(\n                      'relative w-full h-full bg-surface-1',\n                      option.value === 'dark' && 'dark'\n                    )}\n                  >\n                    {/* Sidebar */}\n                    <div className='absolute left-0 top-0 w-6 h-full bg-surface-2 rounded-r' />\n                    {/* Content area with some mock elements */}\n                    <div className='absolute left-8 top-2 right-2 bottom-2 space-y-1'>\n                      <div className='h-2 bg-surface-3 rounded w-1/3' />\n                      <div className='h-1.5 bg-surface-3 rounded w-1/2 opacity-60' />\n                      <div className='h-1.5 bg-surface-3 rounded w-2/3 opacity-40' />\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className='text-left'>\n                <h4 className='font-medium text-primary text-sm mb-1'>\n                  {option.label}\n                </h4>\n                <p className='text-xs text-secondary mt-1'>\n                  {option.description}\n                </p>\n              </div>\n\n              {theme === option.value && (\n                <div className='absolute top-2 right-2 w-5 h-5 bg-accent-token rounded-full flex items-center justify-center animate-in zoom-in-95 fade-in duration-200'>\n                  <svg\n                    className='w-3 h-3 text-accent-foreground'\n                    fill='none'\n                    stroke='currentColor'\n                    viewBox='0 0 24 24'\n                  >\n                    <path\n                      strokeLinecap='round'\n                      strokeLinejoin='round'\n                      strokeWidth={3}\n                      d='M5 13l4 4L19 7'\n                    />\n                  </svg>\n                </div>\n              )}\n            </button>\n          ))}\n        </div>\n\n        <p className='text-xs text-secondary mt-4'>\n          Choose how the interface appears. System automatically matches your\n          device settings.\n        </p>\n      </DashboardCard>\n    </div>\n  );\n\n  const renderRemoveBrandingSection = () => {\n    return (\n      <DashboardCard variant='settings'>\n        <SettingsToggleRow\n          title='Hide Jovie Branding'\n          description='When enabled, Jovie branding will be removed from your profile page, giving your fans a fully custom experience.'\n          checked={hideBranding}\n          onCheckedChange={enabled => {\n            void handleBrandingToggle(enabled);\n          }}\n          disabled={isSavingBranding}\n          ariaLabel='Hide Jovie branding'\n        />\n\n        {hideBranding && (\n          <div className='mt-4 p-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg'>\n            <div className='flex items-start gap-3'>\n              <SparklesIcon className='h-5 w-5 text-green-600 dark:text-green-400 mt-0.5 shrink-0' />\n              <div>\n                <p className='text-sm font-medium text-green-800 dark:text-green-200'>\n                  Branding Hidden\n                </p>\n                <p className='text-xs text-green-600 dark:text-green-400 mt-1'>\n                  Your profile now shows a completely custom experience without\n                  Jovie branding.\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n      </DashboardCard>\n    );\n  };\n\n  const renderAdPixelsSection = () => (\n    <form onSubmit={handlePixelSubmit} className='space-y-6'>\n      <DashboardCard variant='settings'>\n        <h3 className='text-lg font-medium text-primary mb-6'>Pixel IDs</h3>\n\n        <div className='space-y-6'>\n          <div>\n            <label\n              htmlFor='facebookPixel'\n              className='block text-xs font-medium text-primary-token mb-2'\n            >\n              Facebook Pixel ID\n            </label>\n            <Input\n              type='text'\n              id='facebookPixel'\n              value={pixelData.facebookPixel}\n              onChange={e =>\n                handlePixelInputChange('facebookPixel', e.target.value)\n              }\n              placeholder='1234567890'\n              inputClassName='block w-full px-3 py-2 border border-subtle rounded-lg bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm shadow-sm transition-colors'\n            />\n          </div>\n\n          <div>\n            <label\n              htmlFor='googleAdsConversion'\n              className='block text-xs font-medium text-primary-token mb-2'\n            >\n              Google Ads Conversion ID\n            </label>\n            <Input\n              type='text'\n              id='googleAdsConversion'\n              value={pixelData.googleAdsConversion}\n              onChange={e =>\n                handlePixelInputChange('googleAdsConversion', e.target.value)\n              }\n              placeholder='AW-123456789'\n              inputClassName='block w-full px-3 py-2 border border-subtle rounded-lg bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm shadow-sm transition-colors'\n            />\n          </div>\n\n          <div>\n            <label\n              htmlFor='tiktokPixel'\n              className='block text-xs font-medium text-primary-token mb-2'\n            >\n              TikTok Pixel ID\n            </label>\n            <Input\n              type='text'\n              id='tiktokPixel'\n              value={pixelData.tiktokPixel}\n              onChange={e =>\n                handlePixelInputChange('tiktokPixel', e.target.value)\n              }\n              placeholder='ABCDEF1234567890'\n              inputClassName='block w-full px-3 py-2 border border-subtle rounded-lg bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm shadow-sm transition-colors'\n            />\n          </div>\n\n          <div>\n            <label\n              htmlFor='customPixel'\n              className='block text-xs font-medium text-primary-token mb-2'\n            >\n              Additional Snippet\n            </label>\n            <Textarea\n              id='customPixel'\n              rows={4}\n              value={pixelData.customPixel}\n              onChange={e =>\n                handlePixelInputChange('customPixel', e.target.value)\n              }\n              placeholder='<script>/* your tag */</script>'\n              className='block w-full px-3 py-2 border border-subtle rounded-lg bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm shadow-sm resize-none transition-colors'\n            />\n            <p className='mt-2 text-xs text-secondary-token/70'>\n              For other ad networks or tag managers.\n            </p>\n          </div>\n        </div>\n      </DashboardCard>\n\n      <div className='flex justify-end pt-2'>\n        <Button\n          type='submit'\n          loading={isPixelSaving}\n          className={SETTINGS_BUTTON_CLASS}\n        >\n          Save pixels\n        </Button>\n      </div>\n    </form>\n  );\n\n  const renderNotificationsSection = () => (\n    <DashboardCard variant='settings'>\n      <SettingsToggleRow\n        title='Marketing Emails'\n        description='Receive updates about new features, tips, and promotional offers from Jovie.'\n        checked={marketingEmails}\n        onCheckedChange={enabled => {\n          void handleMarketingToggle(enabled);\n        }}\n        disabled={isMarketingSaving}\n        ariaLabel='Toggle marketing emails'\n      />\n    </DashboardCard>\n  );\n\n  const renderBillingSection = () => (\n    <DashboardCard variant='settings'>\n      <div className='text-center py-4'>\n        <CreditCardIcon className='mx-auto h-12 w-12 text-secondary mb-4' />\n        <h3 className='text-lg font-medium text-primary mb-2'>\n          Manage your plan\n        </h3>\n        <p className='text-sm text-secondary mb-4'>\n          Update payment details, change plans, or view invoices.\n        </p>\n        <Button\n          onClick={handleBilling}\n          loading={isBillingLoading || billingStatus.loading}\n          className={SETTINGS_BUTTON_CLASS}\n          variant='primary'\n        >\n          {billingStatus.isPro ? 'Open Billing Portal' : 'Upgrade to Pro'}\n        </Button>\n      </div>\n    </DashboardCard>\n  );\n\n  const renderProUpgradeCard = (\n    title: string,\n    description: string,\n    icon: ComponentType<{ className?: string }>\n  ) => (\n    <SettingsProGateCard\n      title={title}\n      description={description}\n      icon={icon}\n      onUpgrade={handleBilling}\n      loading={isBillingLoading || billingStatus.loading}\n      buttonClassName={SETTINGS_BUTTON_CLASS}\n    />\n  );\n\n  const sections = [\n    {\n      id: 'profile',\n      title: 'Profile',\n      description: 'Manage your public profile and account details.',\n      render: renderProfileSection,\n    },\n    {\n      id: 'account',\n      title: 'Account',\n      description:\n        'Manage email addresses, password, connected accounts, and more.',\n      render: renderAccountSection,\n    },\n    {\n      id: 'appearance',\n      title: 'Appearance',\n      description: 'Customize how the interface looks and feels.',\n      render: renderAppearanceSection,\n    },\n    {\n      id: 'notifications',\n      title: 'Notifications',\n      description: 'Manage your email preferences and communication settings.',\n      render: () =>\n        notificationsEnabled ? (\n          renderNotificationsSection()\n        ) : (\n          <DashboardCard variant='settings'>\n            <div className='text-center py-4'>\n              <h3 className='text-lg font-medium text-primary mb-2'>\n                Notifications are not available yet\n              </h3>\n              <p className='text-sm text-secondary'>\n                We&apos;re focused on getting the core Jovie profile experience\n                right before launching notifications.\n              </p>\n            </div>\n          </DashboardCard>\n        ),\n    },\n    {\n      id: 'remove-branding',\n      title: 'Remove Branding',\n      description:\n        'Remove Jovie branding to create a fully custom experience for your fans.',\n      render: () =>\n        isPro\n          ? renderRemoveBrandingSection()\n          : renderProUpgradeCard(\n              'Professional Appearance',\n              'Remove Jovie branding to create a fully custom experience for your fans.',\n              SparklesIcon\n            ),\n    },\n    {\n      id: 'ad-pixels',\n      title: 'Ad Pixels',\n      description:\n        'Connect Facebook, Google, and TikTok pixels to track conversions.',\n      render: () =>\n        isPro\n          ? renderAdPixelsSection()\n          : renderProUpgradeCard(\n              'Unlock Growth Tracking',\n              'Seamlessly integrate Facebook, Google, and TikTok pixels.',\n              RocketLaunchIcon\n            ),\n    },\n    {\n      id: 'billing',\n      title: 'Billing & Subscription',\n      description:\n        'Manage your subscription, payment methods, and billing history.',\n      render: renderBillingSection,\n    },\n  ];\n\n  const visibleSections = focusSection\n    ? sections.filter(section => section.id === focusSection)\n    : sections;\n\n  return (\n    <div className='space-y-8 pb-8' data-testid='settings-polished'>\n      {visibleSections.map(section => (\n        <SettingsSection\n          key={section.id}\n          id={section.id}\n          title={section.title}\n          description={section.description}\n        >\n          {section.render()}\n        </SettingsSection>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/SettingsPolished.tsx"
        },
        "span": [17022, 17709],
        "sourceCode": "'use client';\n\nimport {\n  CreditCardIcon,\n  RocketLaunchIcon,\n  SparklesIcon,\n} from '@heroicons/react/24/outline';\nimport { Button } from '@jovie/ui';\nimport { useRouter } from 'next/navigation';\nimport { useTheme } from 'next-themes';\nimport {\n  type ComponentType,\n  type FormEvent,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { Input } from '@/components/atoms/Input';\nimport { Textarea } from '@/components/atoms/Textarea';\nimport { SettingsStatusPill } from '@/components/dashboard/molecules/SettingsStatusPill';\nimport { SettingsToggleRow } from '@/components/dashboard/molecules/SettingsToggleRow';\nimport { AccountSettingsSection } from '@/components/dashboard/organisms/AccountSettingsSection';\nimport { SettingsProGateCard } from '@/components/dashboard/organisms/SettingsProGateCard';\nimport { SettingsSection } from '@/components/dashboard/organisms/SettingsSection';\nimport { useToast } from '@/components/molecules/ToastContainer';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\nimport { APP_URL } from '@/constants/app';\nimport { useBillingStatus } from '@/hooks/use-billing-status';\nimport { api } from '@/lib/api-client';\nimport {\n  updateAvatar,\n  updateProfile,\n  updateSettings,\n} from '@/lib/api-client/endpoints/dashboard/profile';\nimport { setThemeSafe } from '@/lib/api-client/endpoints/dashboard/theme';\nimport { ApiError } from '@/lib/api-client/types';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { cn, debounce } from '@/lib/utils';\nimport type { Artist } from '@/types/db';\nimport { DashboardCard } from '../atoms/DashboardCard';\n\ninterface SettingsPolishedProps {\n  artist: Artist;\n  onArtistUpdate?: (updatedArtist: Artist) => void;\n  focusSection?: string;\n}\n\n// Use Geist button styling directly; keep layout helper only.\nconst SETTINGS_BUTTON_CLASS = 'w-full sm:w-auto';\n\nexport function SettingsPolished({\n  artist,\n  onArtistUpdate,\n  focusSection,\n}: SettingsPolishedProps) {\n  const { theme, setTheme } = useTheme();\n  const router = useRouter();\n  const billingStatus = useBillingStatus();\n  const { isPro } = billingStatus;\n  const [isMarketingSaving, setIsMarketingSaving] = useState(false);\n  const [isPixelSaving, setIsPixelSaving] = useState(false);\n  const [isBillingLoading, setIsBillingLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    username: artist.handle || '',\n    displayName: artist.name || '',\n  });\n\n  const [profileSaveStatus, setProfileSaveStatus] = useState<{\n    saving: boolean;\n    success: boolean | null;\n    error: string | null;\n  }>({\n    saving: false,\n    success: null,\n    error: null,\n  });\n\n  const lastProfileSavedRef = useRef<{\n    displayName: string;\n    username: string;\n  } | null>(null);\n\n  const [marketingEmails, setMarketingEmails] = useState(true); // Default to true, should be loaded from user preferences\n\n  const notificationsGate = useFeatureGate(STATSIG_FLAGS.NOTIFICATIONS);\n  const notificationsEnabled = notificationsGate.value;\n\n  const [pixelData, setPixelData] = useState({\n    facebookPixel: '',\n    googleAdsConversion: '',\n    tiktokPixel: '',\n    customPixel: '',\n  });\n\n  // State for branding removal toggle\n  const [hideBranding, setHideBranding] = useState(\n    artist.settings?.hide_branding ?? false\n  );\n  const [isSavingBranding, setIsSavingBranding] = useState(false);\n  const { showToast } = useToast();\n  const maxAvatarSize = AVATAR_MAX_FILE_SIZE_BYTES;\n  const acceptedAvatarTypes = SUPPORTED_IMAGE_MIME_TYPES;\n\n  const handleAvatarUpload = useCallback(async (file: File) => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await fetch('/api/images/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const data = (await response.json().catch(() => ({}))) as {\n      blobUrl?: string;\n      error?: string;\n      code?: string;\n      retryable?: boolean;\n    };\n\n    if (!response.ok) {\n      // Throw structured error for AvatarUploadable to handle\n      const error = new Error(data.error || 'Upload failed') as Error & {\n        code?: string;\n        retryable?: boolean;\n      };\n      error.code = data.code;\n      error.retryable = data.retryable;\n      throw error;\n    }\n\n    if (!data.blobUrl) {\n      throw new Error('No image URL returned from upload');\n    }\n\n    return data.blobUrl;\n  }, []);\n\n  const handleAvatarUpdate = useCallback(\n    async (imageUrl: string) => {\n      const previousImage = artist.image_url;\n\n      try {\n        const { profile, warning } = await updateAvatar(imageUrl);\n\n        if (onArtistUpdate) {\n          onArtistUpdate({\n            ...artist,\n            image_url: profile?.avatarUrl ?? imageUrl,\n          });\n        }\n\n        // Show warning if Clerk sync failed but don't treat as error\n        if (warning) {\n          showToast({ type: 'warning', message: warning });\n        }\n      } catch (error) {\n        if (onArtistUpdate) {\n          onArtistUpdate({\n            ...artist,\n            image_url: previousImage,\n          });\n        }\n\n        const message =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error && error.message\n              ? error.message\n              : 'Failed to update profile photo';\n        showToast({ type: 'error', message });\n      }\n    },\n    [artist, onArtistUpdate, showToast]\n  );\n\n  const handleBrandingToggle = useCallback(\n    async (enabled: boolean) => {\n      setIsSavingBranding(true);\n      try {\n        await updateSettings({ hide_branding: enabled });\n\n        setHideBranding(enabled);\n\n        if (onArtistUpdate) {\n          onArtistUpdate({\n            ...artist,\n            settings: {\n              ...artist.settings,\n              hide_branding: enabled,\n            },\n          });\n        }\n      } catch {\n        // Revert the toggle on error\n        setHideBranding(!enabled);\n      } finally {\n        setIsSavingBranding(false);\n      }\n    },\n    [artist, onArtistUpdate]\n  );\n\n  const handleBilling = async () => {\n    setIsBillingLoading(true);\n    await router.push('/app/settings/billing');\n  };\n\n  const saveProfile = useCallback(\n    async (next: { displayName: string; username: string }) => {\n      const displayName = next.displayName.trim();\n      const username = next.username.trim();\n\n      if (!displayName || !username) {\n        return;\n      }\n\n      const lastSaved = lastProfileSavedRef.current;\n      if (\n        lastSaved &&\n        lastSaved.displayName === displayName &&\n        lastSaved.username === username\n      ) {\n        return;\n      }\n\n      setProfileSaveStatus({ saving: true, success: null, error: null });\n\n      try {\n        const { profile } = await updateProfile({ username, displayName });\n\n        lastProfileSavedRef.current = { displayName, username };\n\n        if (profile && onArtistUpdate) {\n          onArtistUpdate({\n            ...artist,\n            handle: profile.username ?? artist.handle,\n            name: profile.displayName ?? artist.name,\n            tagline: profile.bio ?? artist.tagline,\n          });\n        }\n\n        setFormData(prev => ({\n          ...prev,\n          username: profile?.username ?? username,\n          displayName: profile?.displayName ?? displayName,\n        }));\n\n        setProfileSaveStatus({ saving: false, success: true, error: null });\n        router.refresh();\n      } catch (error) {\n        const message =\n          error instanceof ApiError\n            ? error.message\n            : error instanceof Error && error.message\n              ? error.message\n              : 'Failed to update profile';\n        setProfileSaveStatus({ saving: false, success: false, error: message });\n        showToast({ type: 'error', message });\n      }\n    },\n    [artist, onArtistUpdate, router, showToast]\n  );\n\n  useEffect(() => {\n    lastProfileSavedRef.current = {\n      displayName: artist.name || '',\n      username: artist.handle || '',\n    };\n    setProfileSaveStatus({ saving: false, success: null, error: null });\n  }, [artist.handle, artist.name]);\n\n  const debouncedProfileSave = useMemo(\n    () =>\n      debounce(async (...args: unknown[]) => {\n        const [next] = args as [{ displayName: string; username: string }];\n        await saveProfile(next);\n      }, 900),\n    [saveProfile]\n  );\n\n  useEffect(() => {\n    return () => {\n      debouncedProfileSave.flush();\n    };\n  }, [debouncedProfileSave]);\n\n  const handlePixelInputChange = (field: string, value: string) => {\n    setPixelData(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleThemeChange = async (newTheme: 'light' | 'dark' | 'system') => {\n    setTheme(newTheme);\n\n    // Save theme preference to database for signed-in users (fire-and-forget)\n    void setThemeSafe(newTheme);\n  };\n\n  const handleMarketingToggle = useCallback(async (enabled: boolean) => {\n    setIsMarketingSaving(true);\n    try {\n      await updateSettings({ marketing_emails: enabled });\n\n      setMarketingEmails(enabled);\n    } catch {\n      setMarketingEmails(!enabled);\n    } finally {\n      setIsMarketingSaving(false);\n    }\n  }, []);\n\n  const handlePixelSubmit = useCallback(\n    async (e: FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      setIsPixelSaving(true);\n\n      try {\n        await api.dashboard.put('/pixels', {\n          body: {\n            facebookPixel: pixelData.facebookPixel,\n            googleAdsConversion: pixelData.googleAdsConversion,\n            tiktokPixel: pixelData.tiktokPixel,\n            customPixel: pixelData.customPixel,\n          },\n        });\n\n        showToast({ type: 'success', message: 'Pixels saved successfully' });\n      } catch {\n        showToast({ type: 'error', message: 'Failed to save pixels' });\n      } finally {\n        setIsPixelSaving(false);\n      }\n    },\n    [pixelData, showToast]\n  );\n\n  const appDomain = APP_URL.replace(/^https?:\\/\\//, '');\n\n  useEffect(() => {\n    if (!profileSaveStatus.success) return;\n    const timeoutId = window.setTimeout(() => {\n      setProfileSaveStatus(prev => ({ ...prev, success: null }));\n    }, 1500);\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [profileSaveStatus.success]);\n\n  const renderProfileSection = () => (\n    <DashboardCard variant='settings' className='relative'>\n      {profileSaveStatus.saving ? (\n        <SettingsStatusPill state='saving' className='absolute right-6 top-6' />\n      ) : profileSaveStatus.success ? (\n        <SettingsStatusPill state='saved' className='absolute right-6 top-6' />\n      ) : null}\n      <div className='flex flex-col gap-6'>\n        <div className='flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between'>\n          <div>\n            <p className='text-sm text-secondary-token'>\n              Photo, name, username.\n            </p>\n          </div>\n        </div>\n\n        <div className='grid gap-6 lg:grid-cols-[240px,1fr]'>\n          <div>\n            <div className='flex justify-center'>\n              <AvatarUploadable\n                src={artist.image_url}\n                alt={artist.name || 'Profile photo'}\n                name={artist.name || artist.handle}\n                size='display-xl'\n                uploadable\n                showHoverOverlay\n                onUpload={handleAvatarUpload}\n                onSuccess={handleAvatarUpdate}\n                onError={message => showToast({ type: 'error', message })}\n                maxFileSize={maxAvatarSize}\n                acceptedTypes={acceptedAvatarTypes}\n                className='mx-auto animate-in fade-in duration-300'\n              />\n            </div>\n            <p className='text-sm text-secondary text-center mt-3'>\n              Drag & drop or click to upload.\n            </p>\n          </div>\n\n          <div className='space-y-6'>\n            <div>\n              <label\n                htmlFor='username'\n                className='block text-xs font-medium text-primary-token mb-2'\n              >\n                Username\n              </label>\n              <div className='mb-2 text-xs text-secondary-token/70'>\n                Used in your profile URL\n              </div>\n              <div className='relative'>\n                <div className='flex rounded-lg shadow-sm'>\n                  <span className='inline-flex items-center px-3 rounded-l-lg border border-r-0 border-subtle bg-surface-2 text-secondary-token text-sm select-none'>\n                    {appDomain}/\n                  </span>\n                  <Input\n                    type='text'\n                    name='username'\n                    id='username'\n                    value={formData.username}\n                    onChange={e => {\n                      const nextValue = e.target.value;\n                      setFormData(prev => {\n                        const next = { ...prev, username: nextValue };\n                        setProfileSaveStatus(s => ({\n                          ...s,\n                          success: null,\n                          error: null,\n                        }));\n                        debouncedProfileSave({\n                          displayName: next.displayName,\n                          username: next.username,\n                        });\n                        return next;\n                      });\n                    }}\n                    onBlur={() => debouncedProfileSave.flush()}\n                    placeholder='yourname'\n                    className='flex-1 min-w-0'\n                    inputClassName='block w-full px-3 py-2 rounded-none rounded-r-lg border border-subtle bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm transition-colors'\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <label\n                htmlFor='displayName'\n                className='block text-xs font-medium text-primary-token mb-2'\n              >\n                Display Name\n              </label>\n              <Input\n                type='text'\n                name='displayName'\n                id='displayName'\n                value={formData.displayName}\n                onChange={e => {\n                  const nextValue = e.target.value;\n                  setFormData(prev => {\n                    const next = { ...prev, displayName: nextValue };\n                    setProfileSaveStatus(s => ({\n                      ...s,\n                      success: null,\n                      error: null,\n                    }));\n                    debouncedProfileSave({\n                      displayName: next.displayName,\n                      username: next.username,\n                    });\n                    return next;\n                  });\n                }}\n                onBlur={() => debouncedProfileSave.flush()}\n                placeholder='The name your fans will see'\n                inputClassName='block w-full px-3 py-2 border border-subtle rounded-lg bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm shadow-sm transition-colors'\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </DashboardCard>\n  );\n\n  const renderAccountSection = () => (\n    <div className='space-y-6'>\n      {process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY ? (\n        <AccountSettingsSection />\n      ) : (\n        <DashboardCard variant='settings'>\n          <div className='text-center py-4'>\n            <h3 className='text-lg font-medium text-primary mb-2'>\n              Account settings unavailable\n            </h3>\n            <p className='text-sm text-secondary'>\n              Clerk is not configured (missing publishable key). Set\n              NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY to enable account management.\n            </p>\n          </div>\n        </DashboardCard>\n      )}\n    </div>\n  );\n\n  const renderAppearanceSection = () => (\n    <div>\n      <DashboardCard variant='settings' className='space-y-4'>\n        <h3 className='text-lg font-medium text-primary mb-6'>\n          Interface Theme\n        </h3>\n\n        <div className='grid grid-cols-3 gap-4'>\n          {[\n            {\n              value: 'light',\n              label: 'Light',\n              description: 'Bright and clean.',\n            },\n            {\n              value: 'dark',\n              label: 'Dark',\n              description: 'Bold and focused.',\n            },\n            {\n              value: 'system',\n              label: 'System',\n              description: 'Match device settings.',\n            },\n          ].map(option => (\n            <button\n              key={option.value}\n              onClick={() =>\n                handleThemeChange(option.value as 'light' | 'dark' | 'system')\n              }\n              className={cn(\n                'group relative flex flex-col p-4 rounded-xl border-2 transition-all duration-300 ease-in-out',\n                'hover:translate-y-[-2px] hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base',\n                theme === option.value\n                  ? 'border-accent/70 bg-surface-2'\n                  : 'border-subtle hover:border-accent/50'\n              )}\n            >\n              {/* Miniature Dashboard Preview */}\n              <div className='relative w-full h-20 rounded-lg overflow-hidden mb-3'>\n                {option.value === 'system' ? (\n                  <div className='flex w-full h-full'>\n                    <div className='relative flex-1 bg-surface-1'>\n                      {/* Sidebar */}\n                      <div className='absolute left-0 top-0 w-3.5 h-full bg-surface-2 rounded-r' />\n                      {/* Content area with some mock elements */}\n                      <div className='absolute left-5 top-2 right-2 bottom-2 space-y-1'>\n                        <div className='h-2 bg-surface-3 rounded w-1/3' />\n                        <div className='h-1.5 bg-surface-3 rounded w-1/2 opacity-60' />\n                        <div className='h-1.5 bg-surface-3 rounded w-2/3 opacity-40' />\n                      </div>\n                    </div>\n                    <div className='dark relative flex-1 bg-surface-1'>\n                      {/* Sidebar */}\n                      <div className='absolute left-0 top-0 w-3.5 h-full bg-surface-2 rounded-r' />\n                      {/* Content area with some mock elements */}\n                      <div className='absolute left-5 top-2 right-2 bottom-2 space-y-1'>\n                        <div className='h-2 bg-surface-3 rounded w-1/3' />\n                        <div className='h-1.5 bg-surface-3 rounded w-1/2 opacity-60' />\n                        <div className='h-1.5 bg-surface-3 rounded w-2/3 opacity-40' />\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <div\n                    className={cn(\n                      'relative w-full h-full bg-surface-1',\n                      option.value === 'dark' && 'dark'\n                    )}\n                  >\n                    {/* Sidebar */}\n                    <div className='absolute left-0 top-0 w-6 h-full bg-surface-2 rounded-r' />\n                    {/* Content area with some mock elements */}\n                    <div className='absolute left-8 top-2 right-2 bottom-2 space-y-1'>\n                      <div className='h-2 bg-surface-3 rounded w-1/3' />\n                      <div className='h-1.5 bg-surface-3 rounded w-1/2 opacity-60' />\n                      <div className='h-1.5 bg-surface-3 rounded w-2/3 opacity-40' />\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className='text-left'>\n                <h4 className='font-medium text-primary text-sm mb-1'>\n                  {option.label}\n                </h4>\n                <p className='text-xs text-secondary mt-1'>\n                  {option.description}\n                </p>\n              </div>\n\n              {theme === option.value && (\n                <div className='absolute top-2 right-2 w-5 h-5 bg-accent-token rounded-full flex items-center justify-center animate-in zoom-in-95 fade-in duration-200'>\n                  <svg\n                    className='w-3 h-3 text-accent-foreground'\n                    fill='none'\n                    stroke='currentColor'\n                    viewBox='0 0 24 24'\n                  >\n                    <path\n                      strokeLinecap='round'\n                      strokeLinejoin='round'\n                      strokeWidth={3}\n                      d='M5 13l4 4L19 7'\n                    />\n                  </svg>\n                </div>\n              )}\n            </button>\n          ))}\n        </div>\n\n        <p className='text-xs text-secondary mt-4'>\n          Choose how the interface appears. System automatically matches your\n          device settings.\n        </p>\n      </DashboardCard>\n    </div>\n  );\n\n  const renderRemoveBrandingSection = () => {\n    return (\n      <DashboardCard variant='settings'>\n        <SettingsToggleRow\n          title='Hide Jovie Branding'\n          description='When enabled, Jovie branding will be removed from your profile page, giving your fans a fully custom experience.'\n          checked={hideBranding}\n          onCheckedChange={enabled => {\n            void handleBrandingToggle(enabled);\n          }}\n          disabled={isSavingBranding}\n          ariaLabel='Hide Jovie branding'\n        />\n\n        {hideBranding && (\n          <div className='mt-4 p-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg'>\n            <div className='flex items-start gap-3'>\n              <SparklesIcon className='h-5 w-5 text-green-600 dark:text-green-400 mt-0.5 shrink-0' />\n              <div>\n                <p className='text-sm font-medium text-green-800 dark:text-green-200'>\n                  Branding Hidden\n                </p>\n                <p className='text-xs text-green-600 dark:text-green-400 mt-1'>\n                  Your profile now shows a completely custom experience without\n                  Jovie branding.\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n      </DashboardCard>\n    );\n  };\n\n  const renderAdPixelsSection = () => (\n    <form onSubmit={handlePixelSubmit} className='space-y-6'>\n      <DashboardCard variant='settings'>\n        <h3 className='text-lg font-medium text-primary mb-6'>Pixel IDs</h3>\n\n        <div className='space-y-6'>\n          <div>\n            <label\n              htmlFor='facebookPixel'\n              className='block text-xs font-medium text-primary-token mb-2'\n            >\n              Facebook Pixel ID\n            </label>\n            <Input\n              type='text'\n              id='facebookPixel'\n              value={pixelData.facebookPixel}\n              onChange={e =>\n                handlePixelInputChange('facebookPixel', e.target.value)\n              }\n              placeholder='1234567890'\n              inputClassName='block w-full px-3 py-2 border border-subtle rounded-lg bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm shadow-sm transition-colors'\n            />\n          </div>\n\n          <div>\n            <label\n              htmlFor='googleAdsConversion'\n              className='block text-xs font-medium text-primary-token mb-2'\n            >\n              Google Ads Conversion ID\n            </label>\n            <Input\n              type='text'\n              id='googleAdsConversion'\n              value={pixelData.googleAdsConversion}\n              onChange={e =>\n                handlePixelInputChange('googleAdsConversion', e.target.value)\n              }\n              placeholder='AW-123456789'\n              inputClassName='block w-full px-3 py-2 border border-subtle rounded-lg bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm shadow-sm transition-colors'\n            />\n          </div>\n\n          <div>\n            <label\n              htmlFor='tiktokPixel'\n              className='block text-xs font-medium text-primary-token mb-2'\n            >\n              TikTok Pixel ID\n            </label>\n            <Input\n              type='text'\n              id='tiktokPixel'\n              value={pixelData.tiktokPixel}\n              onChange={e =>\n                handlePixelInputChange('tiktokPixel', e.target.value)\n              }\n              placeholder='ABCDEF1234567890'\n              inputClassName='block w-full px-3 py-2 border border-subtle rounded-lg bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm shadow-sm transition-colors'\n            />\n          </div>\n\n          <div>\n            <label\n              htmlFor='customPixel'\n              className='block text-xs font-medium text-primary-token mb-2'\n            >\n              Additional Snippet\n            </label>\n            <Textarea\n              id='customPixel'\n              rows={4}\n              value={pixelData.customPixel}\n              onChange={e =>\n                handlePixelInputChange('customPixel', e.target.value)\n              }\n              placeholder='<script>/* your tag */</script>'\n              className='block w-full px-3 py-2 border border-subtle rounded-lg bg-surface-1 text-primary placeholder:text-secondary focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-1 focus-visible:ring-offset-bg-base focus-visible:border-transparent sm:text-sm shadow-sm resize-none transition-colors'\n            />\n            <p className='mt-2 text-xs text-secondary-token/70'>\n              For other ad networks or tag managers.\n            </p>\n          </div>\n        </div>\n      </DashboardCard>\n\n      <div className='flex justify-end pt-2'>\n        <Button\n          type='submit'\n          loading={isPixelSaving}\n          className={SETTINGS_BUTTON_CLASS}\n        >\n          Save pixels\n        </Button>\n      </div>\n    </form>\n  );\n\n  const renderNotificationsSection = () => (\n    <DashboardCard variant='settings'>\n      <SettingsToggleRow\n        title='Marketing Emails'\n        description='Receive updates about new features, tips, and promotional offers from Jovie.'\n        checked={marketingEmails}\n        onCheckedChange={enabled => {\n          void handleMarketingToggle(enabled);\n        }}\n        disabled={isMarketingSaving}\n        ariaLabel='Toggle marketing emails'\n      />\n    </DashboardCard>\n  );\n\n  const renderBillingSection = () => (\n    <DashboardCard variant='settings'>\n      <div className='text-center py-4'>\n        <CreditCardIcon className='mx-auto h-12 w-12 text-secondary mb-4' />\n        <h3 className='text-lg font-medium text-primary mb-2'>\n          Manage your plan\n        </h3>\n        <p className='text-sm text-secondary mb-4'>\n          Update payment details, change plans, or view invoices.\n        </p>\n        <Button\n          onClick={handleBilling}\n          loading={isBillingLoading || billingStatus.loading}\n          className={SETTINGS_BUTTON_CLASS}\n          variant='primary'\n        >\n          {billingStatus.isPro ? 'Open Billing Portal' : 'Upgrade to Pro'}\n        </Button>\n      </div>\n    </DashboardCard>\n  );\n\n  const renderProUpgradeCard = (\n    title: string,\n    description: string,\n    icon: ComponentType<{ className?: string }>\n  ) => (\n    <SettingsProGateCard\n      title={title}\n      description={description}\n      icon={icon}\n      onUpgrade={handleBilling}\n      loading={isBillingLoading || billingStatus.loading}\n      buttonClassName={SETTINGS_BUTTON_CLASS}\n    />\n  );\n\n  const sections = [\n    {\n      id: 'profile',\n      title: 'Profile',\n      description: 'Manage your public profile and account details.',\n      render: renderProfileSection,\n    },\n    {\n      id: 'account',\n      title: 'Account',\n      description:\n        'Manage email addresses, password, connected accounts, and more.',\n      render: renderAccountSection,\n    },\n    {\n      id: 'appearance',\n      title: 'Appearance',\n      description: 'Customize how the interface looks and feels.',\n      render: renderAppearanceSection,\n    },\n    {\n      id: 'notifications',\n      title: 'Notifications',\n      description: 'Manage your email preferences and communication settings.',\n      render: () =>\n        notificationsEnabled ? (\n          renderNotificationsSection()\n        ) : (\n          <DashboardCard variant='settings'>\n            <div className='text-center py-4'>\n              <h3 className='text-lg font-medium text-primary mb-2'>\n                Notifications are not available yet\n              </h3>\n              <p className='text-sm text-secondary'>\n                We&apos;re focused on getting the core Jovie profile experience\n                right before launching notifications.\n              </p>\n            </div>\n          </DashboardCard>\n        ),\n    },\n    {\n      id: 'remove-branding',\n      title: 'Remove Branding',\n      description:\n        'Remove Jovie branding to create a fully custom experience for your fans.',\n      render: () =>\n        isPro\n          ? renderRemoveBrandingSection()\n          : renderProUpgradeCard(\n              'Professional Appearance',\n              'Remove Jovie branding to create a fully custom experience for your fans.',\n              SparklesIcon\n            ),\n    },\n    {\n      id: 'ad-pixels',\n      title: 'Ad Pixels',\n      description:\n        'Connect Facebook, Google, and TikTok pixels to track conversions.',\n      render: () =>\n        isPro\n          ? renderAdPixelsSection()\n          : renderProUpgradeCard(\n              'Unlock Growth Tracking',\n              'Seamlessly integrate Facebook, Google, and TikTok pixels.',\n              RocketLaunchIcon\n            ),\n    },\n    {\n      id: 'billing',\n      title: 'Billing & Subscription',\n      description:\n        'Manage your subscription, payment methods, and billing history.',\n      render: renderBillingSection,\n    },\n  ];\n\n  const visibleSections = focusSection\n    ? sections.filter(section => section.id === focusSection)\n    : sections;\n\n  return (\n    <div className='space-y-8 pb-8' data-testid='settings-polished'>\n      {visibleSections.map(section => (\n        <SettingsSection\n          key={section.id}\n          id={section.id}\n          title={section.title}\n          description={section.description}\n        >\n          {section.render()}\n        </SettingsSection>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/links/IngestedSuggestions.tsx"
        },
        "span": [6442, 6622],
        "sourceCode": "'use client';\n\nimport { Plus, X } from 'lucide-react';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport { PlatformPill } from '@/components/dashboard/atoms/PlatformPill';\nimport { track } from '@/lib/analytics';\nimport type { SuggestedLink } from './hooks/useSuggestions';\nimport { compactUrlDisplay, suggestionIdentity } from './utils';\n\n/**\n * Props for the IngestedSuggestions component\n */\nexport interface IngestedSuggestionsProps {\n  /**\n   * Array of pending suggestions to display.\n   * These are AI-discovered links that the user can accept or dismiss.\n   */\n  suggestions: SuggestedLink[];\n\n  /**\n   * Callback when a suggestion is accepted.\n   * The component will remove the suggestion from the list after this callback completes.\n   */\n  onAccept: (suggestion: SuggestedLink) => void | Promise<void>;\n\n  /**\n   * Callback when a suggestion is dismissed.\n   * The component will remove the suggestion from the list after this callback completes.\n   */\n  onDismiss: (suggestion: SuggestedLink) => void | Promise<void>;\n\n  /**\n   * Profile ID for analytics tracking (optional).\n   */\n  profileId?: string;\n\n  /**\n   * Function to generate a unique key for each suggestion.\n   * Defaults to using suggestionId or platform::normalizedUrl combo.\n   */\n  suggestionKey?: (suggestion: SuggestedLink) => string;\n\n  /**\n   * Optional additional CSS classes\n   */\n  className?: string;\n}\n\n/**\n * Build analytics event properties for a suggestion\n */\nfunction buildSuggestionEventProperties(\n  suggestion: SuggestedLink,\n  profileId?: string\n) {\n  const confidenceValue =\n    typeof suggestion.confidence === 'number' ? suggestion.confidence : null;\n\n  return {\n    platformId: suggestion.platform.id,\n    sourcePlatform: suggestion.sourcePlatform ?? null,\n    sourceType: suggestion.sourceType ?? null,\n    confidence: confidenceValue,\n    profileId: profileId ?? null,\n  };\n}\n\n/**\n * Default suggestion key generator\n */\nfunction defaultSuggestionKey(suggestion: SuggestedLink): string {\n  return (\n    suggestion.suggestionId ||\n    `${suggestion.platform.id}::${suggestion.normalizedUrl}`\n  );\n}\n\n/**\n * IngestedSuggestions - Displays AI-discovered link suggestions with accept/dismiss actions.\n *\n * This component renders a row of pending suggestions that were automatically\n * discovered by AI from external sources (e.g., other social profiles, linktrees).\n * Users can accept suggestions to add them to their links, or dismiss them.\n *\n * Features:\n * - Renders PlatformPill for each suggestion with \"Suggested\" badge\n * - Click pill to accept, X button to dismiss\n * - Analytics tracking for surfaced/accepted/dismissed events\n * - Memoized for performance\n *\n * @example\n * ```tsx\n * <IngestedSuggestions\n *   suggestions={pendingSuggestions}\n *   onAccept={(s) => handleAcceptSuggestion(s)}\n *   onDismiss={(s) => handleDismissSuggestion(s)}\n *   profileId={profileId}\n * />\n * ```\n */\nexport const IngestedSuggestions = React.memo(function IngestedSuggestions({\n  suggestions,\n  onAccept,\n  onDismiss,\n  profileId,\n  suggestionKey = defaultSuggestionKey,\n  className,\n}: IngestedSuggestionsProps) {\n  // Track which suggestions have already been surfaced to avoid duplicate events\n  const surfacedKeysRef = useRef<Set<string>>(new Set());\n\n  // Track when suggestions are surfaced to the user\n  useEffect(() => {\n    if (suggestions.length === 0) return;\n\n    suggestions.forEach(suggestion => {\n      const key = suggestionKey(suggestion);\n      if (surfacedKeysRef.current.has(key)) return;\n\n      surfacedKeysRef.current.add(key);\n      void track(\n        'link_suggestion_surfaced',\n        buildSuggestionEventProperties(suggestion, profileId)\n      );\n    });\n  }, [suggestions, profileId, suggestionKey]);\n\n  /**\n   * Build the secondary text (identity) for a suggestion.\n   * Returns @-prefixed handle if available.\n   */\n  const buildSecondaryText = useCallback(\n    (suggestion: SuggestedLink): string | undefined => {\n      return suggestionIdentity(suggestion);\n    },\n    []\n  );\n\n  /**\n   * Handle accepting a suggestion with analytics tracking\n   */\n  const handleAccept = useCallback(\n    (suggestion: SuggestedLink) => {\n      // Track acceptance with detailed properties\n      void track('dashboard_link_suggestion_accept', {\n        platform: suggestion.platform.id,\n        sourcePlatform: suggestion.sourcePlatform ?? undefined,\n        sourceType: suggestion.sourceType ?? undefined,\n        confidence: suggestion.confidence ?? undefined,\n        hasIdentity: Boolean(suggestionIdentity(suggestion)),\n      });\n\n      // Call the parent handler\n      const result = onAccept(suggestion);\n\n      // Also track the post-acceptance event\n      if (result instanceof Promise) {\n        void result.then(() => {\n          void track(\n            'link_suggestion_accepted',\n            buildSuggestionEventProperties(suggestion, profileId)\n          );\n        });\n      } else {\n        void track(\n          'link_suggestion_accepted',\n          buildSuggestionEventProperties(suggestion, profileId)\n        );\n      }\n    },\n    [onAccept, profileId]\n  );\n\n  /**\n   * Handle dismissing a suggestion with analytics tracking\n   */\n  const handleDismiss = useCallback(\n    (suggestion: SuggestedLink, event: React.MouseEvent) => {\n      // Stop propagation to prevent triggering the accept click\n      event.stopPropagation();\n\n      // Track dismissal with detailed properties\n      void track('dashboard_link_suggestion_dismiss', {\n        platform: suggestion.platform.id,\n        sourcePlatform: suggestion.sourcePlatform ?? undefined,\n        sourceType: suggestion.sourceType ?? undefined,\n        confidence: suggestion.confidence ?? undefined,\n        hasIdentity: Boolean(suggestionIdentity(suggestion)),\n      });\n\n      // Call the parent handler\n      const result = onDismiss(suggestion);\n\n      // Also track the post-dismissal event\n      if (result instanceof Promise) {\n        void result.then(() => {\n          void track(\n            'link_suggestion_dismissed',\n            buildSuggestionEventProperties(suggestion, profileId)\n          );\n        });\n      } else {\n        void track(\n          'link_suggestion_dismissed',\n          buildSuggestionEventProperties(suggestion, profileId)\n        );\n      }\n    },\n    [onDismiss, profileId]\n  );\n\n  // Don't render if there are no suggestions\n  if (suggestions.length === 0) {\n    return null;\n  }\n\n  return (\n    <div\n      className={`rounded-2xl border border-subtle bg-surface-1/60 px-3 py-2.5 shadow-sm shadow-black/5 ${className ?? ''}`}\n      aria-label='Ingested link suggestions'\n    >\n      <div className='flex flex-wrap items-center justify-center gap-2'>\n        {suggestions.map(suggestion => {\n          const key = suggestionKey(suggestion);\n          const identity =\n            buildSecondaryText(suggestion) ||\n            compactUrlDisplay(suggestion.platform.id, suggestion.normalizedUrl);\n          const pillText = identity\n            ? `${suggestion.platform.name} • ${identity}`\n            : suggestion.platform.name;\n\n          return (\n            <PlatformPill\n              key={key}\n              platformIcon={suggestion.platform.icon}\n              platformName={suggestion.platform.name}\n              primaryText={pillText}\n              badgeText='Suggested'\n              state='ready'\n              suffix={<Plus className='h-3.5 w-3.5' aria-hidden />}\n              trailing={\n                <button\n                  type='button'\n                  aria-label={`Dismiss ${suggestion.platform.name} suggestion`}\n                  className='grid h-6 w-6 place-items-center rounded-full border border-subtle bg-surface-1 text-secondary-token transition hover:bg-surface-2 hover:text-primary-token'\n                  onClick={event => handleDismiss(suggestion, event)}\n                >\n                  <X className='h-3.5 w-3.5' aria-hidden />\n                </button>\n              }\n              onClick={() => handleAccept(suggestion)}\n              className='pr-1.5'\n              testId='ingested-suggestion-pill'\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n});\n\nIngestedSuggestions.displayName = 'IngestedSuggestions';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/dashboard/organisms/links/QuickAddSuggestions.tsx"
        },
        "span": [3238, 3378],
        "sourceCode": "'use client';\n\nimport React, { useMemo } from 'react';\nimport { PlatformPill } from '@/components/dashboard/atoms/PlatformPill';\nimport {\n  MUSIC_FIRST_ORDER,\n  SOCIAL_FIRST_ORDER,\n  SUGGESTION_PILLS,\n  type SuggestionPillConfig,\n} from './config';\nimport { buildPrefillUrl } from './utils';\n\n/**\n * Props for the QuickAddSuggestions component\n */\nexport interface QuickAddSuggestionsProps {\n  /**\n   * Set of platform IDs that the user has already added.\n   * These platforms will be filtered out of the suggestions.\n   */\n  existingPlatforms: Set<string>;\n\n  /**\n   * Whether the profile is music-focused.\n   * When true, streaming platforms (Spotify, Apple Music) are prioritized.\n   * When false, social platforms (Instagram, TikTok) are prioritized.\n   */\n  isMusicProfile?: boolean;\n\n  /**\n   * Callback when a platform is selected.\n   * Receives the prefill URL for the selected platform.\n   */\n  onPlatformSelect: (prefillUrl: string) => void;\n\n  /**\n   * Optional additional CSS classes\n   */\n  className?: string;\n}\n\n/**\n * QuickAddSuggestions - Renders a row of quick-add platform buttons.\n *\n * This component displays suggestion pills for popular platforms that the user\n * hasn't added yet. Clicking a pill triggers the onPlatformSelect callback with\n * a prefill URL that can be used to populate a link input.\n *\n * The order of suggestions is based on the profile type:\n * - Music profiles: Streaming platforms first (Spotify, Apple Music, YouTube Music)\n * - Social profiles: Social platforms first (Instagram, TikTok, YouTube)\n *\n * @example\n * ```tsx\n * <QuickAddSuggestions\n *   existingPlatforms={new Set(['instagram', 'spotify'])}\n *   isMusicProfile={true}\n *   onPlatformSelect={(url) => setPrefillUrl(url)}\n * />\n * ```\n */\nexport const QuickAddSuggestions = React.memo(function QuickAddSuggestions({\n  existingPlatforms,\n  isMusicProfile = false,\n  onPlatformSelect,\n  className,\n}: QuickAddSuggestionsProps) {\n  /**\n   * Filter and sort suggestion pills based on:\n   * 1. Whether the platform is already added (exclude if so)\n   * 2. Special case: YouTube Music is hidden if YouTube is already added\n   * 3. Profile type ordering (music-first vs social-first)\n   */\n  const suggestionPills = useMemo(() => {\n    const base = SUGGESTION_PILLS.filter((pill: SuggestionPillConfig) => {\n      // Exclude platforms already added\n      if (existingPlatforms.has(pill.id)) return false;\n      // Hide YouTube Music if YouTube is already present\n      if (pill.id === 'youtube-music' && existingPlatforms.has('youtube')) {\n        return false;\n      }\n      return true;\n    });\n\n    // Determine ordering based on profile type\n    const order = isMusicProfile ? MUSIC_FIRST_ORDER : SOCIAL_FIRST_ORDER;\n    const rank = new Map<string, number>();\n    order.forEach((id, index) => {\n      rank.set(id, index);\n    });\n\n    // Sort by rank (unknown platforms go to the end)\n    return base\n      .slice()\n      .sort(\n        (a, b) =>\n          (rank.get(a.id) ?? Number.MAX_SAFE_INTEGER) -\n          (rank.get(b.id) ?? Number.MAX_SAFE_INTEGER)\n      );\n  }, [existingPlatforms, isMusicProfile]);\n\n  // Don't render if there are no suggestions\n  if (suggestionPills.length === 0) {\n    return null;\n  }\n\n  return (\n    <div\n      className={`flex flex-wrap items-center justify-center gap-2 ${className ?? ''}`}\n      aria-label='Quick link suggestions'\n    >\n      {suggestionPills.map(pill => (\n        <PlatformPill\n          key={pill.id}\n          platformIcon={pill.simpleIconId}\n          platformName={pill.label}\n          primaryText={pill.label}\n          suffix='+'\n          tone='faded'\n          onClick={() => onPlatformSelect(buildPrefillUrl(pill.id))}\n          className='whitespace-nowrap'\n        />\n      ))}\n    </div>\n  );\n});\n\nQuickAddSuggestions.displayName = 'QuickAddSuggestions';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/feedback/ErrorBanner.stories.tsx" },
        "span": [2098, 2157],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { ErrorBanner } from './ErrorBanner';\n\nconst meta: Meta<typeof ErrorBanner> = {\n  title: 'Feedback/ErrorBanner',\n  component: ErrorBanner,\n  parameters: {\n    layout: 'centered',\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof ErrorBanner>;\n\nexport const Default: Story = {\n  args: {\n    title: 'Something went wrong',\n    className: 'w-96',\n  },\n};\n\nexport const WithDescription: Story = {\n  args: {\n    title: 'Failed to save changes',\n    description: 'Please check your connection and try again.',\n    className: 'w-96',\n  },\n};\n\nexport const WithSingleAction: Story = {\n  args: {\n    title: 'Session expired',\n    description: 'Your session has expired. Please sign in again to continue.',\n    actions: [{ label: 'Sign In', href: '/signin' }],\n    className: 'w-96',\n  },\n};\n\nexport const WithMultipleActions: Story = {\n  args: {\n    title: 'Failed to load profile',\n    description: 'We encountered an error while loading your profile data.',\n    actions: [\n      { label: 'Retry', onClick: () => console.log('Retry clicked') },\n      { label: 'Contact Support', href: '/support' },\n    ],\n    className: 'w-96',\n  },\n};\n\nexport const NetworkError: Story = {\n  args: {\n    title: 'Network connection lost',\n    description: 'Please check your internet connection and try again.',\n    actions: [{ label: 'Retry', onClick: () => console.log('Retry') }],\n    className: 'w-96',\n  },\n};\n\nexport const ValidationError: Story = {\n  args: {\n    title: 'Invalid form data',\n    description: 'Please correct the errors below and submit again.',\n    className: 'w-96',\n  },\n};\n\nexport const InContext: Story = {\n  render: () => (\n    <div className='w-96 space-y-4 p-6 border border-subtle rounded-xl bg-surface'>\n      <h2 className='text-lg font-semibold'>Profile Settings</h2>\n      <ErrorBanner\n        title='Failed to update profile'\n        description='Your changes could not be saved. Please try again.'\n        actions={[{ label: 'Retry', onClick: () => {} }]}\n      />\n      <div className='space-y-2'>\n        <label className='text-sm font-medium'>Display Name</label>\n        <input\n          type='text'\n          className='w-full px-3 py-2 border border-subtle rounded-lg'\n          defaultValue='John Doe'\n        />\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/feedback/StarterEmptyState.tsx" },
        "span": [2978, 2991],
        "sourceCode": "import { RocketLaunchIcon, SparklesIcon } from '@heroicons/react/24/outline';\nimport Link from 'next/link';\nimport React from 'react';\nimport { cn } from '@/lib/utils';\n\nexport interface StarterEmptyStateAction {\n  label: string;\n  onClick?: () => void;\n  href?: string;\n  variant?: 'primary' | 'secondary';\n}\n\nexport interface StarterEmptyStateProps {\n  title: string;\n  description: string;\n  icon?: React.ReactNode;\n  primaryAction?: StarterEmptyStateAction;\n  secondaryAction?: StarterEmptyStateAction;\n  className?: string;\n  testId?: string;\n}\n\nexport function StarterEmptyState({\n  title,\n  description,\n  icon,\n  primaryAction,\n  secondaryAction,\n  className,\n  testId,\n}: StarterEmptyStateProps) {\n  const renderAction = (\n    action: StarterEmptyStateAction,\n    isPrimary: boolean\n  ) => {\n    const variant = action.variant ?? (isPrimary ? 'primary' : 'secondary');\n    const baseClasses =\n      'inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2';\n\n    if (action.href) {\n      const isInternal = action.href.startsWith('/');\n\n      if (isInternal && !action.onClick) {\n        return (\n          <Link\n            key={`${action.label}-${action.href}`}\n            href={action.href}\n            className={cn(\n              baseClasses,\n              variant === 'primary'\n                ? 'bg-black text-white hover:bg-zinc-900 focus-visible:ring-zinc-900 dark:bg-white dark:text-black'\n                : 'border border-subtle bg-white text-zinc-800 hover:bg-zinc-50 focus-visible:ring-zinc-900 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white dark:hover:bg-zinc-800'\n            )}\n          >\n            {action.label}\n          </Link>\n        );\n      }\n\n      return (\n        <a\n          key={`${action.label}-${action.href}`}\n          href={action.href}\n          onClick={action.onClick}\n          className={cn(\n            baseClasses,\n            variant === 'primary'\n              ? 'bg-black text-white hover:bg-zinc-900 focus-visible:ring-zinc-900 dark:bg-white dark:text-black'\n              : 'border border-subtle bg-white text-zinc-800 hover:bg-zinc-50 focus-visible:ring-zinc-900 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white dark:hover:bg-zinc-800'\n          )}\n        >\n          {action.label}\n        </a>\n      );\n    }\n\n    return (\n      <button\n        key={action.label}\n        type='button'\n        onClick={action.onClick}\n        className={cn(\n          baseClasses,\n          variant === 'primary'\n            ? 'bg-black text-white hover:bg-zinc-900 focus-visible:ring-zinc-900 dark:bg-white dark:text-black'\n            : 'border border-subtle bg-white text-zinc-800 hover:bg-zinc-50 focus-visible:ring-zinc-900 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white dark:hover:bg-zinc-800'\n        )}\n      >\n        {action.label}\n      </button>\n    );\n  };\n\n  return (\n    <div\n      role='status'\n      aria-live='polite'\n      data-testid={testId ?? 'app-empty-state'}\n      className={cn(\n        'rounded-2xl border border-dashed border-subtle bg-surface-1 p-6 shadow-sm dark:border-zinc-800',\n        className\n      )}\n    >\n      <div className='flex items-start gap-4'>\n        <div className='flex h-12 w-12 items-center justify-center rounded-xl bg-white text-zinc-900 shadow-sm ring-1 ring-subtle dark:bg-zinc-900 dark:text-white'>\n          {icon ?? <SparklesIcon className='h-6 w-6' aria-hidden='true' />}\n        </div>\n        <div className='flex-1 space-y-2'>\n          <div>\n            <p className='text-base font-semibold text-primary-token'>\n              {title}\n            </p>\n            <p className='text-sm text-secondary-token'>{description}</p>\n          </div>\n\n          {(primaryAction || secondaryAction) && (\n            <div className='flex flex-wrap gap-2'>\n              {primaryAction ? renderAction(primaryAction, true) : null}\n              {secondaryAction ? renderAction(secondaryAction, false) : null}\n            </div>\n          )}\n        </div>\n\n        <RocketLaunchIcon className='hidden h-10 w-10 text-accent-token sm:block' />\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/ArtistSearch.tsx" },
        "span": [1564, 1735],
        "sourceCode": "'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { useState } from 'react';\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\n\nexport function ArtistSearch() {\n  const [query, setQuery] = useState('');\n  const [isSearching, setIsSearching] = useState(false);\n  const router = useRouter();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!query.trim()) return;\n\n    setIsSearching(true);\n\n    try {\n      // Simulate search delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Redirect to waitlist (invite-only)\n      router.push('/waitlist');\n    } catch (error) {\n      console.error('Search error:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className='w-full'>\n      <div className='relative'>\n        <input\n          type='text'\n          value={query}\n          onChange={e => setQuery(e.target.value)}\n          placeholder='Search for your artist name...'\n          className='w-full px-4 py-3 pl-12 pr-4 text-lg bg-white/80 dark:bg-white/10 backdrop-blur-sm border border-gray-200/50 dark:border-white/20 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-white/50 focus-visible:ring-2 focus-visible:ring-blue-500 dark:focus-visible:ring-purple-500 focus-visible:border-transparent transition-all duration-300'\n          disabled={isSearching}\n        />\n        <div className='absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none'>\n          <svg\n            className='h-5 w-5 text-gray-400 dark:text-white/50'\n            fill='none'\n            viewBox='0 0 24 24'\n            stroke='currentColor'\n          >\n            <path\n              strokeLinecap='round'\n              strokeLinejoin='round'\n              strokeWidth={2}\n              d='M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z'\n            />\n          </svg>\n        </div>\n        <button\n          type='submit'\n          disabled={isSearching || !query.trim()}\n          className='absolute inset-y-0 right-0 px-4 flex items-center bg-blue-600 hover:bg-blue-700 dark:bg-purple-600 dark:hover:bg-purple-700 text-white font-semibold rounded-r-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed'\n        >\n          {isSearching ? <LoadingSpinner size='sm' tone='inverse' /> : 'Search'}\n        </button>\n      </div>\n    </form>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/ClaimHandleForm.tsx" },
        "span": [13427, 13632],
        "sourceCode": "'use client';\n\nimport { useAuth } from '@clerk/nextjs';\nimport { Button } from '@jovie/ui';\nimport { useRouter } from 'next/navigation';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Input } from '@/components/atoms/Input';\nimport { ErrorSummary } from '@/components/organisms/ErrorSummary';\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\nimport { APP_URL } from '@/constants/app';\n\ninterface ClaimHandleFormProps {\n  onHandleChange?: (handle: string) => void;\n}\n\nexport function ClaimHandleForm({ onHandleChange }: ClaimHandleFormProps) {\n  const router = useRouter();\n  const { isSignedIn } = useAuth();\n  const formRef = useRef<HTMLFormElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const shakeTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Extract domain from APP_URL for display\n  const displayDomain = APP_URL.replace(/^https?:\\/\\//, '');\n\n  const [handle, setHandle] = useState('');\n  // Navigating (redirecting after submit)\n  const [navigating, setNavigating] = useState(false);\n  // Live availability\n  const [checkingAvail, setCheckingAvail] = useState(false);\n  const [available, setAvailable] = useState<boolean | null>(null);\n  const [availError, setAvailError] = useState<string | null>(null);\n  // UI micro-interactions\n  const [isShaking, setIsShaking] = useState(false);\n  const lastQueriedRef = useRef<string>('');\n  // Form submission state\n  const [formSubmitted, setFormSubmitted] = useState(false);\n\n  // Better handle validation with stricter regex for lowercase a-z, 0-9, hyphen\n  const handleError = useMemo(() => {\n    if (!handle) return null;\n    if (handle.length < 3) return 'Handle must be at least 3 characters';\n    if (handle.length > 30) return 'Handle must be less than 30 characters';\n    if (!/^[a-z0-9-]+$/.test(handle))\n      return 'Handle can only contain lowercase letters, numbers, and hyphens';\n    if (handle.startsWith('-') || handle.endsWith('-'))\n      return 'Handle cannot start or end with a hyphen';\n    return null;\n  }, [handle]);\n\n  // Notify parent component about handle changes\n  useEffect(() => {\n    if (onHandleChange) {\n      onHandleChange(handle);\n    }\n\n    if (typeof window !== 'undefined') {\n      window.dispatchEvent(\n        new CustomEvent('jovie-hero-handle-change', {\n          detail: { handle },\n        })\n      );\n    }\n  }, [handle, onHandleChange]);\n\n  // Optimistic prefetch when handle becomes available\n  useEffect(() => {\n    if (available === true && handle) {\n      const target = `/onboarding?handle=${encodeURIComponent(handle.toLowerCase())}`;\n      router.prefetch(target);\n    }\n  }, [available, handle, router]);\n\n  // Debounced live availability check (350-500ms per requirements)\n  useEffect(() => {\n    setAvailError(null);\n    if (!handle || handleError) {\n      setAvailable(null);\n      setCheckingAvail(false);\n      return;\n    }\n\n    const value = handle.toLowerCase();\n    lastQueriedRef.current = value;\n    setCheckingAvail(true);\n    const controller = new AbortController();\n    const id = setTimeout(async () => {\n      try {\n        const res = await fetch(\n          `/api/handle/check?handle=${encodeURIComponent(value)}`,\n          { signal: controller.signal }\n        );\n        const json = await res\n          .json()\n          .catch(() => ({ available: false, error: 'Parse error' }));\n        // Ignore out-of-order responses\n        if (lastQueriedRef.current !== value) return;\n        if (!res.ok) {\n          setAvailable(null);\n          setAvailError(json?.error || 'Error checking availability');\n        } else {\n          setAvailable(Boolean(json?.available));\n          setAvailError(null);\n        }\n      } catch (err: unknown) {\n        if (err instanceof DOMException && err.name === 'AbortError') return;\n        if (lastQueriedRef.current !== value) return;\n        setAvailable(null);\n        setAvailError('Network error');\n      } finally {\n        if (lastQueriedRef.current === value) setCheckingAvail(false);\n      }\n    }, 450); // 450ms debounce (within 350-500ms requirement)\n\n    return () => {\n      clearTimeout(id);\n      controller.abort();\n    };\n  }, [handle, handleError]);\n\n  // Cleanup timeouts on unmount\n  useEffect(() => {\n    return () => {\n      if (shakeTimeoutRef.current) {\n        clearTimeout(shakeTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const onSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      setFormSubmitted(true);\n\n      // Guard: invalid or unavailable or still checking\n      if (handleError || checkingAvail || available !== true) {\n        // Micro shake for quick feedback\n        setIsShaking(true);\n        if (shakeTimeoutRef.current) {\n          clearTimeout(shakeTimeoutRef.current);\n        }\n        shakeTimeoutRef.current = setTimeout(() => {\n          setIsShaking(false);\n          shakeTimeoutRef.current = null;\n        }, 180);\n\n        // Focus the input for accessibility\n        if (inputRef.current) {\n          inputRef.current.focus();\n        }\n\n        // Announce error to screen readers\n        return;\n      }\n\n      // Persist pending claim so onboarding can pick it up\n      try {\n        sessionStorage.setItem(\n          'pendingClaim',\n          JSON.stringify({ handle: handle.toLowerCase(), ts: Date.now() })\n        );\n      } catch {}\n\n      const target = `/onboarding?handle=${encodeURIComponent(\n        handle.toLowerCase()\n      )}`;\n\n      setNavigating(true);\n\n      // Announce loading state to screen readers\n      const loadingMessage = document.getElementById('loading-announcement');\n      if (loadingMessage) {\n        loadingMessage.textContent = 'Creating your profile. Please wait...';\n      }\n\n      if (!isSignedIn) {\n        // Send users to waitlist; early access is invite-only\n        router.push('/waitlist');\n        return;\n      }\n\n      router.push(target);\n    },\n    [available, checkingAvail, handle, handleError, isSignedIn, router]\n  );\n\n  // Button state logic with \"Create Profile\" copy\n  const showChecking = checkingAvail;\n  const unavailable = available === false || !!handleError || !!availError;\n  const canSubmit = available === true && !checkingAvail && !navigating;\n  // Previously used a color prop to swap tones; now rely on variant styling only\n  const btnDisabled = !canSubmit;\n\n  const fieldId = 'handle-input';\n  const helperId = `${fieldId}-hint`;\n\n  // Collect all form errors for the error summary\n  const formErrors = useMemo(() => {\n    const errors: Record<string, string> = {};\n\n    if (formSubmitted) {\n      if (handleError) {\n        errors.handle = handleError;\n      } else if (availError) {\n        errors.handle = availError;\n      } else if (available === false) {\n        errors.handle = 'Handle already taken';\n      }\n    }\n\n    return errors;\n  }, [formSubmitted, handleError, availError, available]);\n\n  // Status icon to show inside the input\n  const StatusIcon = () => {\n    if (showChecking) {\n      return (\n        <LoadingSpinner\n          size='sm'\n          className='text-zinc-500 dark:text-zinc-400'\n        />\n      );\n    }\n    if (!handle) return null;\n    if (available === true && !handleError) {\n      return (\n        <svg\n          className='h-4 w-4 text-green-600'\n          viewBox='0 0 20 20'\n          fill='currentColor'\n          aria-hidden='true'\n        >\n          <path\n            fillRule='evenodd'\n            d='M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 10-1.214-.882l-3.2 4.4-1.63-1.63a.75.75 0 10-1.06 1.06l2.25 2.25a.75.75 0 001.145-.089l3.71-5.109z'\n            clipRule='evenodd'\n          />\n        </svg>\n      );\n    }\n    if (unavailable) {\n      return (\n        <svg\n          className='h-4 w-4 text-red-600'\n          viewBox='0 0 20 20'\n          fill='currentColor'\n          aria-hidden='true'\n        >\n          <path\n            fillRule='evenodd'\n            d='M10 18a8 8 0 100-16 8 8 0 000 16zM7.75 7.75a.75.75 0 011.06 0L10 8.94l1.19-1.19a.75.75 0 111.06 1.06L11.06 10l1.19 1.19a.75.75 0 11-1.06 1.06L10 11.06l-1.19 1.19a.75.75 0 11-1.06-1.06L8.94 10 7.75 8.81a.75.75 0 010-1.06z'\n            clipRule='evenodd'\n          />\n        </svg>\n      );\n    }\n    return null;\n  };\n\n  const helperState = useMemo(() => {\n    if (!handle) {\n      return {\n        tone: 'idle' as const,\n        text: `Your Jovie profile will live at ${displayDomain}/your-handle`,\n      };\n    }\n\n    if (handleError) {\n      return { tone: 'error' as const, text: handleError };\n    }\n\n    if (checkingAvail) {\n      return { tone: 'pending' as const, text: 'Checking availability…' };\n    }\n\n    if (available === true) {\n      return {\n        tone: 'success' as const,\n        text: `@${handle} is available — tap the button to claim it.`,\n      };\n    }\n\n    if (available === false) {\n      return { tone: 'error' as const, text: 'Handle already taken' };\n    }\n\n    if (availError) {\n      return { tone: 'error' as const, text: availError };\n    }\n\n    return {\n      tone: 'idle' as const,\n      text: 'Use lowercase letters, numbers, or hyphens (3–30 chars).',\n    };\n  }, [\n    available,\n    availError,\n    checkingAvail,\n    displayDomain,\n    handle,\n    handleError,\n  ]);\n\n  const helperToneClass = {\n    idle: 'text-gray-600 dark:text-gray-300',\n    pending: 'text-gray-600 dark:text-gray-300',\n    success: 'text-emerald-600 dark:text-emerald-400',\n    error: 'text-red-600 dark:text-red-400',\n  }[helperState.tone];\n\n  const helperAriaLive = helperState.tone === 'error' ? 'assertive' : 'polite';\n  return (\n    <form ref={formRef} onSubmit={onSubmit} className='space-y-4' noValidate>\n      {/* Screen reader announcements */}\n      <div\n        className='sr-only'\n        aria-live='assertive'\n        aria-atomic='true'\n        id='loading-announcement'\n      ></div>\n\n      {/* Error summary for screen readers */}\n      <ErrorSummary\n        errors={formErrors}\n        onFocusField={fieldName => {\n          if (fieldName === 'handle' && inputRef.current) {\n            inputRef.current.focus();\n          }\n        }}\n      />\n\n      <div className='space-y-2'>\n        <label\n          htmlFor={fieldId}\n          className='text-sm font-semibold text-gray-900 dark:text-white'\n        >\n          Choose your handle\n        </label>\n\n        <div className='relative'>\n          <span className='pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 text-sm font-semibold text-gray-700 dark:text-gray-200'>\n            {displayDomain}/\n          </span>\n          <Input\n            ref={inputRef}\n            id={fieldId}\n            type='text'\n            value={handle}\n            onChange={e => setHandle(e.target.value.toLowerCase())}\n            placeholder='your-handle'\n            required\n            autoCapitalize='none'\n            autoCorrect='off'\n            aria-describedby={helperState.text ? helperId : undefined}\n            validationState={\n              !handle\n                ? null\n                : unavailable\n                  ? 'invalid'\n                  : available === true\n                    ? 'valid'\n                    : checkingAvail\n                      ? 'pending'\n                      : null\n            }\n            className={`${isShaking ? 'jv-shake' : ''} ${\n              available === true ? 'jv-available' : ''\n            } transition-all duration-150 hover:shadow-lg focus-within:shadow-lg`}\n            inputClassName='text-[16px] leading-6 tracking-tight font-medium placeholder:text-zinc-400 dark:placeholder:text-zinc-500 pr-12 min-h-[54px] sm:min-h-[56px] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 border-2 border-zinc-900/70 dark:border-white/60 bg-white/90 dark:bg-white/10 pl-24 sm:pl-28'\n            statusIcon={<StatusIcon />}\n          />\n        </div>\n\n        {helperState.text && (\n          <div id='handle-preview-text' className='min-h-5'>\n            <p\n              id={helperId}\n              className={`text-sm leading-5 transition-colors duration-200 ${helperToneClass}`}\n              aria-live={helperAriaLive}\n            >\n              {helperState.text}\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Submit button - separate from input for clean UX */}\n      <Button\n        type='submit'\n        variant='primary'\n        size='lg'\n        className='w-full justify-center disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-lg focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500 group h-[54px]! px-6! text-base font-semibold tracking-wide bg-linear-to-br! from-blue-600/95! via-indigo-600/85! to-cyan-500/90! text-white! shadow-[0_18px_35px_rgba(15,23,42,0.25)]'\n        disabled={btnDisabled || !handle}\n      >\n        <span className='inline-flex items-center justify-center gap-2 transition-opacity duration-200'>\n          {showChecking ? (\n            <>\n              <LoadingSpinner size='sm' className='text-white' />\n              <span>Checking availability…</span>\n            </>\n          ) : navigating ? (\n            <>\n              <LoadingSpinner size='sm' className='text-white' />\n              <span>Creating your profile…</span>\n            </>\n          ) : available === true ? (\n            <>\n              <span>Claim @{handle}</span>\n              <svg\n                className='w-4 h-4 transition-transform group-hover:translate-x-1'\n                fill='none'\n                viewBox='0 0 24 24'\n                stroke='currentColor'\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  strokeWidth={2}\n                  d='M9 5l7 7-7 7'\n                />\n              </svg>\n            </>\n          ) : (\n            'Request Early Access'\n          )}\n        </span>\n      </Button>\n\n      <style jsx>{`\n        .jv-shake {\n          animation: jv-shake 150ms ease-in-out;\n        }\n        @keyframes jv-shake {\n          0%,\n          100% {\n            transform: translateX(0);\n          }\n          25% {\n            transform: translateX(-2px);\n          }\n          50% {\n            transform: translateX(2px);\n          }\n          75% {\n            transform: translateX(-2px);\n          }\n        }\n        .jv-available {\n          box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.35);\n          animation: jv-available-pulse 900ms ease-out 1;\n        }\n        @keyframes jv-available-pulse {\n          0% {\n            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);\n          }\n          70% {\n            box-shadow: 0 0 0 8px rgba(16, 185, 129, 0);\n          }\n          100% {\n            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);\n          }\n        }\n        /* Reduced motion: disable shake, use opacity fade instead of box-shadow pulse */\n        @media (prefers-reduced-motion: reduce) {\n          .jv-shake {\n            animation: none;\n          }\n          .jv-available {\n            box-shadow: none;\n            animation: jv-available-fade 900ms ease-out 1;\n          }\n          @keyframes jv-available-fade {\n            0% {\n              opacity: 0.7;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 1;\n            }\n          }\n        }\n      `}</style>\n    </form>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/ComparisonSection.tsx" },
        "span": [1466, 1624],
        "sourceCode": "export function SocialProofSection() {\n  const testimonials = [\n    {\n      quote:\n        'Jovie turned my profile from a dead end into a conversion machine. My streams went up 47% in the first month.',\n      author: 'Sarah Chen',\n      role: 'Indie Artist',\n      avatar: 'SC',\n      metric: '+47% streams',\n    },\n    {\n      quote:\n        'Finally, a profile that actually works. My fans can find my music instantly without getting lost.',\n      author: 'Marcus Rodriguez',\n      role: 'Hip-Hop Producer',\n      avatar: 'MR',\n      metric: '0.8s load time',\n    },\n    {\n      quote:\n        'The smart routing feature is genius. My fans go straight to their favorite platform. No more confusion.',\n      author: 'Emma Thompson',\n      role: 'Pop Singer',\n      avatar: 'ET',\n      metric: '1-click streaming',\n    },\n  ];\n\n  const stats = [\n    { number: '10,000+', label: 'Artists using Jovie' },\n    { number: '1M+', label: 'Fans converted to streams' },\n    { number: '99.9%', label: 'Uptime guarantee' },\n    { number: '47%', label: 'Average conversion increase' },\n  ];\n\n  return (\n    <section className='relative py-24 sm:py-32'>\n      <div className='mx-auto max-w-7xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-3xl text-center mb-16'>\n          <div className='mb-8'>\n            <div className='inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-500/10 border border-blue-500/20 text-sm font-medium text-blue-400'>\n              <svg\n                className='w-4 h-4'\n                fill='none'\n                viewBox='0 0 24 24'\n                stroke='currentColor'\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  strokeWidth={2}\n                  d='M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z'\n                />\n              </svg>\n              Trusted by Musicians\n            </div>\n          </div>\n\n          <h2 className='text-4xl font-medium tracking-tight text-gray-900 dark:text-white sm:text-5xl lg:text-6xl'>\n            Musicians love Jovie\n          </h2>\n\n          <p className='mt-6 text-xl text-gray-600 dark:text-white/70'>\n            Join thousands of artists who&apos;ve transformed their fan\n            experience\n          </p>\n        </div>\n\n        {/* Stats */}\n        <div className='mx-auto max-w-4xl mb-16'>\n          <div className='grid grid-cols-2 md:grid-cols-4 gap-8'>\n            {stats.map(stat => (\n              <div key={stat.label} className='text-center'>\n                <div className='text-3xl font-bold text-gray-900 dark:text-white'>\n                  {stat.number}\n                </div>\n                <div className='text-sm text-gray-500 dark:text-white/60 mt-1'>\n                  {stat.label}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Testimonials */}\n        <div className='mx-auto max-w-6xl'>\n          <div className='grid grid-cols-1 md:grid-cols-3 gap-8'>\n            {testimonials.map(testimonial => (\n              <div key={testimonial.author} className='relative group'>\n                <div className='absolute -inset-4 bg-linear-to-r from-white/5 to-white/10 rounded-2xl blur opacity-0 group-hover:opacity-100 transition-opacity duration-500' />\n                <div className='relative bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-8 hover:border-white/20 transition-all duration-300'>\n                  <div className='mb-6'>\n                    <span className='inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-500/20 text-green-400'>\n                      {testimonial.metric}\n                    </span>\n                  </div>\n\n                  <blockquote className='text-gray-700 dark:text-white/90 leading-relaxed mb-6'>\n                    &ldquo;{testimonial.quote}&rdquo;\n                  </blockquote>\n\n                  <div className='flex items-center'>\n                    <div className='w-10 h-10 rounded-full bg-linear-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm'>\n                      {testimonial.avatar}\n                    </div>\n                    <div className='ml-3'>\n                      <div className='text-gray-900 dark:text-white font-medium'>\n                        {testimonial.author}\n                      </div>\n                      <div className='text-gray-500 dark:text-white/60 text-sm'>\n                        {testimonial.role}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/HeroExampleProfiles.tsx" },
        "span": [1069, 1209],
        "sourceCode": "import Image from 'next/image';\nimport Link from 'next/link';\nimport { getFeaturedCreators } from '@/lib/featured-creators';\n\nconst HERO_PREVIEW_COUNT = 12;\n\nexport async function HeroExampleProfiles() {\n  try {\n    const creators = await getFeaturedCreators();\n    const previews = creators.slice(0, HERO_PREVIEW_COUNT);\n\n    if (!previews.length) {\n      return null;\n    }\n\n    return (\n      <div className='py-10 sm:py-12'>\n        {/* Section header */}\n        <div className='flex items-center gap-3 mb-6'>\n          <div className='h-px flex-1 bg-neutral-200 dark:bg-neutral-800' />\n          <p className='text-xs font-medium tracking-wide uppercase text-neutral-500 dark:text-neutral-400'>\n            Live profiles\n          </p>\n          <div className='h-px flex-1 bg-neutral-200 dark:bg-neutral-800' />\n        </div>\n\n        {/* Full-width horizontal scroll (no fades, no visible scrollbar) */}\n        <div className='w-full overflow-x-auto overflow-y-hidden [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden'>\n          <div\n            aria-label='Example creator profiles'\n            className='flex w-max items-start gap-6 px-4 sm:px-6 lg:px-8'\n          >\n            {previews.map(creator => (\n              <Link\n                key={creator.id}\n                href={`/${creator.handle}`}\n                className='group relative flex shrink-0 flex-col items-center'\n              >\n                <div className='w-14 h-14 rounded-full overflow-hidden border-2 border-neutral-200 dark:border-neutral-700 group-hover:border-neutral-400 dark:group-hover:border-neutral-500 transition-colors duration-150'>\n                  <Image\n                    src={creator.src}\n                    alt={creator.name}\n                    width={56}\n                    height={56}\n                    className='w-full h-full object-cover'\n                  />\n                </div>\n\n                <p className='mt-2 text-xs font-medium text-neutral-600 dark:text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-neutral-100 transition-colors duration-150'>\n                  @{creator.handle}\n                </p>\n              </Link>\n            ))}\n          </div>\n        </div>\n\n        {/* View all link */}\n        <div className='mt-6 text-center'>\n          <Link\n            href='/explore'\n            className='inline-flex items-center gap-1 text-xs font-medium text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100 transition-colors duration-150'\n          >\n            View all creators\n          </Link>\n        </div>\n      </div>\n    );\n  } catch (error: unknown) {\n    console.error('Error loading hero example profiles:', error);\n    return null;\n  }\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/NewFeaturesSection.tsx" },
        "span": [1426, 1568],
        "sourceCode": "'use client';\n\nimport { Container } from '@/components/site/Container';\n\n// Geist Design System colors\nconst geistColors = {\n  blue: {\n    icon: 'text-[color:var(--accent-analytics)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  purple: {\n    icon: 'text-[color:var(--accent-conv)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  teal: {\n    icon: 'text-[color:var(--accent-pro)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  pink: {\n    icon: 'text-[color:var(--accent-links)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  amber: {\n    icon: 'text-[color:var(--accent-beauty)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  green: {\n    icon: 'text-[color:var(--accent-speed)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n};\n\n// Feature data with Geist colors\nconst outcomes = [\n  {\n    title: 'Higher conversion',\n    description: 'App deep links + smart routing.',\n  },\n  {\n    title: 'Owned audience',\n    description: 'Capture fan identity, not just clicks.',\n  },\n  {\n    title: 'Optimization over time',\n    description: 'Automatic A/B testing by persona.',\n  },\n] as const;\n\nconst featureDetails = [\n  {\n    title: 'Blazing-fast, SEO-ready profiles',\n    description:\n      'Optimized for speed and search engines to maximize your visibility and conversions.',\n    color: 'blue' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13 10V3L4 14h7v7l9-11h-7z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Conversion-focused analytics',\n    description:\n      'Track clicks to conversions, referrers, and countries to optimize your profile performance.',\n    color: 'green' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'AI-driven personalization',\n    description:\n      'Ongoing A/B optimization for higher conversion with location, device, and persona awareness.',\n    color: 'purple' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Smart deep links',\n    description:\n      \"Intuitive /listen, /tip paths that work with Instagram's multiple links for seamless navigation.\",\n    color: 'teal' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'App deep links',\n    description:\n      'Skip browser and login friction by opening native apps directly for better user experience.',\n    color: 'amber' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Clean light/dark modes',\n    description:\n      'Desktop to mobile QR handoff for a seamless experience across all devices and preferences.',\n    color: 'pink' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'\n        />\n      </svg>\n    ),\n  },\n];\n\nexport function NewFeaturesSection() {\n  return (\n    <section\n      id='features'\n      className='relative py-20 sm:py-24 bg-base overflow-hidden'\n    >\n      <div className='absolute inset-0 -z-10'>\n        <div className='absolute inset-0 grid-bg opacity-60' />\n        <div className='absolute inset-0 bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.10),transparent)] dark:bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.20),transparent)]' />\n        <div className='pointer-events-none absolute inset-x-0 top-0 h-24 bg-linear-to-b from-base to-transparent dark:from-base' />\n        <div className='pointer-events-none absolute inset-x-0 bottom-0 h-24 bg-linear-to-t from-base to-transparent dark:from-base' />\n      </div>\n      <Container>\n        {/* Section header */}\n        <div className='text-center mb-12 sm:mb-16'>\n          <h2 className='text-3xl md:text-4xl font-medium tracking-tight text-primary-token'>\n            Sharable profile{' '}\n            <span className='text-accent-token'>built to convert</span>\n          </h2>\n          <p className='mt-4 text-base text-secondary-token max-w-xl mx-auto'>\n            A focused profile system designed to turn attention into real fan\n            actions.\n          </p>\n        </div>\n\n        {/* Outcome cards (YC-style: 3 outcomes) */}\n        <div className='grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6'>\n          {outcomes.map(outcome => (\n            <div\n              key={outcome.title}\n              className='p-6 rounded-2xl border border-subtle bg-surface-1 hover:bg-surface-2 hover:border-default transition-colors duration-200'\n            >\n              <h3 className='text-base font-semibold text-primary-token'>\n                {outcome.title}\n              </h3>\n              <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                {outcome.description}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {/* Expandable details */}\n        <div className='mt-10'>\n          <details className='mx-auto max-w-5xl rounded-2xl border border-subtle bg-surface-0 p-6 sm:p-7'>\n            <summary className='cursor-pointer select-none text-sm font-medium text-secondary-token hover:text-primary-token focus-ring-themed rounded-md'>\n              More details\n            </summary>\n            <div className='mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'>\n              {featureDetails.map(feature => {\n                const colorClasses = geistColors[feature.color];\n                return (\n                  <div\n                    key={feature.title}\n                    className='p-5 rounded-2xl border border-subtle bg-surface-1'\n                  >\n                    <div\n                      className={`inline-flex items-center justify-center w-10 h-10 rounded-xl ${colorClasses.bg} ${colorClasses.border} border mb-4`}\n                    >\n                      <span className={colorClasses.icon}>{feature.icon}</span>\n                    </div>\n                    <h4 className='text-sm font-semibold text-primary-token'>\n                      {feature.title}\n                    </h4>\n                    <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                      {feature.description}\n                    </p>\n                  </div>\n                );\n              })}\n            </div>\n          </details>\n        </div>\n      </Container>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/NewFeaturesSection.tsx" },
        "span": [1956, 2098],
        "sourceCode": "'use client';\n\nimport { Container } from '@/components/site/Container';\n\n// Geist Design System colors\nconst geistColors = {\n  blue: {\n    icon: 'text-[color:var(--accent-analytics)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  purple: {\n    icon: 'text-[color:var(--accent-conv)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  teal: {\n    icon: 'text-[color:var(--accent-pro)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  pink: {\n    icon: 'text-[color:var(--accent-links)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  amber: {\n    icon: 'text-[color:var(--accent-beauty)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  green: {\n    icon: 'text-[color:var(--accent-speed)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n};\n\n// Feature data with Geist colors\nconst outcomes = [\n  {\n    title: 'Higher conversion',\n    description: 'App deep links + smart routing.',\n  },\n  {\n    title: 'Owned audience',\n    description: 'Capture fan identity, not just clicks.',\n  },\n  {\n    title: 'Optimization over time',\n    description: 'Automatic A/B testing by persona.',\n  },\n] as const;\n\nconst featureDetails = [\n  {\n    title: 'Blazing-fast, SEO-ready profiles',\n    description:\n      'Optimized for speed and search engines to maximize your visibility and conversions.',\n    color: 'blue' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13 10V3L4 14h7v7l9-11h-7z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Conversion-focused analytics',\n    description:\n      'Track clicks to conversions, referrers, and countries to optimize your profile performance.',\n    color: 'green' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'AI-driven personalization',\n    description:\n      'Ongoing A/B optimization for higher conversion with location, device, and persona awareness.',\n    color: 'purple' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Smart deep links',\n    description:\n      \"Intuitive /listen, /tip paths that work with Instagram's multiple links for seamless navigation.\",\n    color: 'teal' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'App deep links',\n    description:\n      'Skip browser and login friction by opening native apps directly for better user experience.',\n    color: 'amber' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Clean light/dark modes',\n    description:\n      'Desktop to mobile QR handoff for a seamless experience across all devices and preferences.',\n    color: 'pink' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'\n        />\n      </svg>\n    ),\n  },\n];\n\nexport function NewFeaturesSection() {\n  return (\n    <section\n      id='features'\n      className='relative py-20 sm:py-24 bg-base overflow-hidden'\n    >\n      <div className='absolute inset-0 -z-10'>\n        <div className='absolute inset-0 grid-bg opacity-60' />\n        <div className='absolute inset-0 bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.10),transparent)] dark:bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.20),transparent)]' />\n        <div className='pointer-events-none absolute inset-x-0 top-0 h-24 bg-linear-to-b from-base to-transparent dark:from-base' />\n        <div className='pointer-events-none absolute inset-x-0 bottom-0 h-24 bg-linear-to-t from-base to-transparent dark:from-base' />\n      </div>\n      <Container>\n        {/* Section header */}\n        <div className='text-center mb-12 sm:mb-16'>\n          <h2 className='text-3xl md:text-4xl font-medium tracking-tight text-primary-token'>\n            Sharable profile{' '}\n            <span className='text-accent-token'>built to convert</span>\n          </h2>\n          <p className='mt-4 text-base text-secondary-token max-w-xl mx-auto'>\n            A focused profile system designed to turn attention into real fan\n            actions.\n          </p>\n        </div>\n\n        {/* Outcome cards (YC-style: 3 outcomes) */}\n        <div className='grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6'>\n          {outcomes.map(outcome => (\n            <div\n              key={outcome.title}\n              className='p-6 rounded-2xl border border-subtle bg-surface-1 hover:bg-surface-2 hover:border-default transition-colors duration-200'\n            >\n              <h3 className='text-base font-semibold text-primary-token'>\n                {outcome.title}\n              </h3>\n              <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                {outcome.description}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {/* Expandable details */}\n        <div className='mt-10'>\n          <details className='mx-auto max-w-5xl rounded-2xl border border-subtle bg-surface-0 p-6 sm:p-7'>\n            <summary className='cursor-pointer select-none text-sm font-medium text-secondary-token hover:text-primary-token focus-ring-themed rounded-md'>\n              More details\n            </summary>\n            <div className='mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'>\n              {featureDetails.map(feature => {\n                const colorClasses = geistColors[feature.color];\n                return (\n                  <div\n                    key={feature.title}\n                    className='p-5 rounded-2xl border border-subtle bg-surface-1'\n                  >\n                    <div\n                      className={`inline-flex items-center justify-center w-10 h-10 rounded-xl ${colorClasses.bg} ${colorClasses.border} border mb-4`}\n                    >\n                      <span className={colorClasses.icon}>{feature.icon}</span>\n                    </div>\n                    <h4 className='text-sm font-semibold text-primary-token'>\n                      {feature.title}\n                    </h4>\n                    <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                      {feature.description}\n                    </p>\n                  </div>\n                );\n              })}\n            </div>\n          </details>\n        </div>\n      </Container>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/NewFeaturesSection.tsx" },
        "span": [2655, 2797],
        "sourceCode": "'use client';\n\nimport { Container } from '@/components/site/Container';\n\n// Geist Design System colors\nconst geistColors = {\n  blue: {\n    icon: 'text-[color:var(--accent-analytics)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  purple: {\n    icon: 'text-[color:var(--accent-conv)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  teal: {\n    icon: 'text-[color:var(--accent-pro)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  pink: {\n    icon: 'text-[color:var(--accent-links)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  amber: {\n    icon: 'text-[color:var(--accent-beauty)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  green: {\n    icon: 'text-[color:var(--accent-speed)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n};\n\n// Feature data with Geist colors\nconst outcomes = [\n  {\n    title: 'Higher conversion',\n    description: 'App deep links + smart routing.',\n  },\n  {\n    title: 'Owned audience',\n    description: 'Capture fan identity, not just clicks.',\n  },\n  {\n    title: 'Optimization over time',\n    description: 'Automatic A/B testing by persona.',\n  },\n] as const;\n\nconst featureDetails = [\n  {\n    title: 'Blazing-fast, SEO-ready profiles',\n    description:\n      'Optimized for speed and search engines to maximize your visibility and conversions.',\n    color: 'blue' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13 10V3L4 14h7v7l9-11h-7z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Conversion-focused analytics',\n    description:\n      'Track clicks to conversions, referrers, and countries to optimize your profile performance.',\n    color: 'green' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'AI-driven personalization',\n    description:\n      'Ongoing A/B optimization for higher conversion with location, device, and persona awareness.',\n    color: 'purple' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Smart deep links',\n    description:\n      \"Intuitive /listen, /tip paths that work with Instagram's multiple links for seamless navigation.\",\n    color: 'teal' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'App deep links',\n    description:\n      'Skip browser and login friction by opening native apps directly for better user experience.',\n    color: 'amber' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Clean light/dark modes',\n    description:\n      'Desktop to mobile QR handoff for a seamless experience across all devices and preferences.',\n    color: 'pink' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'\n        />\n      </svg>\n    ),\n  },\n];\n\nexport function NewFeaturesSection() {\n  return (\n    <section\n      id='features'\n      className='relative py-20 sm:py-24 bg-base overflow-hidden'\n    >\n      <div className='absolute inset-0 -z-10'>\n        <div className='absolute inset-0 grid-bg opacity-60' />\n        <div className='absolute inset-0 bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.10),transparent)] dark:bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.20),transparent)]' />\n        <div className='pointer-events-none absolute inset-x-0 top-0 h-24 bg-linear-to-b from-base to-transparent dark:from-base' />\n        <div className='pointer-events-none absolute inset-x-0 bottom-0 h-24 bg-linear-to-t from-base to-transparent dark:from-base' />\n      </div>\n      <Container>\n        {/* Section header */}\n        <div className='text-center mb-12 sm:mb-16'>\n          <h2 className='text-3xl md:text-4xl font-medium tracking-tight text-primary-token'>\n            Sharable profile{' '}\n            <span className='text-accent-token'>built to convert</span>\n          </h2>\n          <p className='mt-4 text-base text-secondary-token max-w-xl mx-auto'>\n            A focused profile system designed to turn attention into real fan\n            actions.\n          </p>\n        </div>\n\n        {/* Outcome cards (YC-style: 3 outcomes) */}\n        <div className='grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6'>\n          {outcomes.map(outcome => (\n            <div\n              key={outcome.title}\n              className='p-6 rounded-2xl border border-subtle bg-surface-1 hover:bg-surface-2 hover:border-default transition-colors duration-200'\n            >\n              <h3 className='text-base font-semibold text-primary-token'>\n                {outcome.title}\n              </h3>\n              <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                {outcome.description}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {/* Expandable details */}\n        <div className='mt-10'>\n          <details className='mx-auto max-w-5xl rounded-2xl border border-subtle bg-surface-0 p-6 sm:p-7'>\n            <summary className='cursor-pointer select-none text-sm font-medium text-secondary-token hover:text-primary-token focus-ring-themed rounded-md'>\n              More details\n            </summary>\n            <div className='mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'>\n              {featureDetails.map(feature => {\n                const colorClasses = geistColors[feature.color];\n                return (\n                  <div\n                    key={feature.title}\n                    className='p-5 rounded-2xl border border-subtle bg-surface-1'\n                  >\n                    <div\n                      className={`inline-flex items-center justify-center w-10 h-10 rounded-xl ${colorClasses.bg} ${colorClasses.border} border mb-4`}\n                    >\n                      <span className={colorClasses.icon}>{feature.icon}</span>\n                    </div>\n                    <h4 className='text-sm font-semibold text-primary-token'>\n                      {feature.title}\n                    </h4>\n                    <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                      {feature.description}\n                    </p>\n                  </div>\n                );\n              })}\n            </div>\n          </details>\n        </div>\n      </Container>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/NewFeaturesSection.tsx" },
        "span": [3359, 3501],
        "sourceCode": "'use client';\n\nimport { Container } from '@/components/site/Container';\n\n// Geist Design System colors\nconst geistColors = {\n  blue: {\n    icon: 'text-[color:var(--accent-analytics)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  purple: {\n    icon: 'text-[color:var(--accent-conv)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  teal: {\n    icon: 'text-[color:var(--accent-pro)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  pink: {\n    icon: 'text-[color:var(--accent-links)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  amber: {\n    icon: 'text-[color:var(--accent-beauty)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  green: {\n    icon: 'text-[color:var(--accent-speed)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n};\n\n// Feature data with Geist colors\nconst outcomes = [\n  {\n    title: 'Higher conversion',\n    description: 'App deep links + smart routing.',\n  },\n  {\n    title: 'Owned audience',\n    description: 'Capture fan identity, not just clicks.',\n  },\n  {\n    title: 'Optimization over time',\n    description: 'Automatic A/B testing by persona.',\n  },\n] as const;\n\nconst featureDetails = [\n  {\n    title: 'Blazing-fast, SEO-ready profiles',\n    description:\n      'Optimized for speed and search engines to maximize your visibility and conversions.',\n    color: 'blue' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13 10V3L4 14h7v7l9-11h-7z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Conversion-focused analytics',\n    description:\n      'Track clicks to conversions, referrers, and countries to optimize your profile performance.',\n    color: 'green' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'AI-driven personalization',\n    description:\n      'Ongoing A/B optimization for higher conversion with location, device, and persona awareness.',\n    color: 'purple' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Smart deep links',\n    description:\n      \"Intuitive /listen, /tip paths that work with Instagram's multiple links for seamless navigation.\",\n    color: 'teal' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'App deep links',\n    description:\n      'Skip browser and login friction by opening native apps directly for better user experience.',\n    color: 'amber' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Clean light/dark modes',\n    description:\n      'Desktop to mobile QR handoff for a seamless experience across all devices and preferences.',\n    color: 'pink' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'\n        />\n      </svg>\n    ),\n  },\n];\n\nexport function NewFeaturesSection() {\n  return (\n    <section\n      id='features'\n      className='relative py-20 sm:py-24 bg-base overflow-hidden'\n    >\n      <div className='absolute inset-0 -z-10'>\n        <div className='absolute inset-0 grid-bg opacity-60' />\n        <div className='absolute inset-0 bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.10),transparent)] dark:bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.20),transparent)]' />\n        <div className='pointer-events-none absolute inset-x-0 top-0 h-24 bg-linear-to-b from-base to-transparent dark:from-base' />\n        <div className='pointer-events-none absolute inset-x-0 bottom-0 h-24 bg-linear-to-t from-base to-transparent dark:from-base' />\n      </div>\n      <Container>\n        {/* Section header */}\n        <div className='text-center mb-12 sm:mb-16'>\n          <h2 className='text-3xl md:text-4xl font-medium tracking-tight text-primary-token'>\n            Sharable profile{' '}\n            <span className='text-accent-token'>built to convert</span>\n          </h2>\n          <p className='mt-4 text-base text-secondary-token max-w-xl mx-auto'>\n            A focused profile system designed to turn attention into real fan\n            actions.\n          </p>\n        </div>\n\n        {/* Outcome cards (YC-style: 3 outcomes) */}\n        <div className='grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6'>\n          {outcomes.map(outcome => (\n            <div\n              key={outcome.title}\n              className='p-6 rounded-2xl border border-subtle bg-surface-1 hover:bg-surface-2 hover:border-default transition-colors duration-200'\n            >\n              <h3 className='text-base font-semibold text-primary-token'>\n                {outcome.title}\n              </h3>\n              <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                {outcome.description}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {/* Expandable details */}\n        <div className='mt-10'>\n          <details className='mx-auto max-w-5xl rounded-2xl border border-subtle bg-surface-0 p-6 sm:p-7'>\n            <summary className='cursor-pointer select-none text-sm font-medium text-secondary-token hover:text-primary-token focus-ring-themed rounded-md'>\n              More details\n            </summary>\n            <div className='mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'>\n              {featureDetails.map(feature => {\n                const colorClasses = geistColors[feature.color];\n                return (\n                  <div\n                    key={feature.title}\n                    className='p-5 rounded-2xl border border-subtle bg-surface-1'\n                  >\n                    <div\n                      className={`inline-flex items-center justify-center w-10 h-10 rounded-xl ${colorClasses.bg} ${colorClasses.border} border mb-4`}\n                    >\n                      <span className={colorClasses.icon}>{feature.icon}</span>\n                    </div>\n                    <h4 className='text-sm font-semibold text-primary-token'>\n                      {feature.title}\n                    </h4>\n                    <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                      {feature.description}\n                    </p>\n                  </div>\n                );\n              })}\n            </div>\n          </details>\n        </div>\n      </Container>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/NewFeaturesSection.tsx" },
        "span": [3979, 4121],
        "sourceCode": "'use client';\n\nimport { Container } from '@/components/site/Container';\n\n// Geist Design System colors\nconst geistColors = {\n  blue: {\n    icon: 'text-[color:var(--accent-analytics)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  purple: {\n    icon: 'text-[color:var(--accent-conv)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  teal: {\n    icon: 'text-[color:var(--accent-pro)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  pink: {\n    icon: 'text-[color:var(--accent-links)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  amber: {\n    icon: 'text-[color:var(--accent-beauty)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  green: {\n    icon: 'text-[color:var(--accent-speed)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n};\n\n// Feature data with Geist colors\nconst outcomes = [\n  {\n    title: 'Higher conversion',\n    description: 'App deep links + smart routing.',\n  },\n  {\n    title: 'Owned audience',\n    description: 'Capture fan identity, not just clicks.',\n  },\n  {\n    title: 'Optimization over time',\n    description: 'Automatic A/B testing by persona.',\n  },\n] as const;\n\nconst featureDetails = [\n  {\n    title: 'Blazing-fast, SEO-ready profiles',\n    description:\n      'Optimized for speed and search engines to maximize your visibility and conversions.',\n    color: 'blue' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13 10V3L4 14h7v7l9-11h-7z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Conversion-focused analytics',\n    description:\n      'Track clicks to conversions, referrers, and countries to optimize your profile performance.',\n    color: 'green' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'AI-driven personalization',\n    description:\n      'Ongoing A/B optimization for higher conversion with location, device, and persona awareness.',\n    color: 'purple' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Smart deep links',\n    description:\n      \"Intuitive /listen, /tip paths that work with Instagram's multiple links for seamless navigation.\",\n    color: 'teal' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'App deep links',\n    description:\n      'Skip browser and login friction by opening native apps directly for better user experience.',\n    color: 'amber' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Clean light/dark modes',\n    description:\n      'Desktop to mobile QR handoff for a seamless experience across all devices and preferences.',\n    color: 'pink' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'\n        />\n      </svg>\n    ),\n  },\n];\n\nexport function NewFeaturesSection() {\n  return (\n    <section\n      id='features'\n      className='relative py-20 sm:py-24 bg-base overflow-hidden'\n    >\n      <div className='absolute inset-0 -z-10'>\n        <div className='absolute inset-0 grid-bg opacity-60' />\n        <div className='absolute inset-0 bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.10),transparent)] dark:bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.20),transparent)]' />\n        <div className='pointer-events-none absolute inset-x-0 top-0 h-24 bg-linear-to-b from-base to-transparent dark:from-base' />\n        <div className='pointer-events-none absolute inset-x-0 bottom-0 h-24 bg-linear-to-t from-base to-transparent dark:from-base' />\n      </div>\n      <Container>\n        {/* Section header */}\n        <div className='text-center mb-12 sm:mb-16'>\n          <h2 className='text-3xl md:text-4xl font-medium tracking-tight text-primary-token'>\n            Sharable profile{' '}\n            <span className='text-accent-token'>built to convert</span>\n          </h2>\n          <p className='mt-4 text-base text-secondary-token max-w-xl mx-auto'>\n            A focused profile system designed to turn attention into real fan\n            actions.\n          </p>\n        </div>\n\n        {/* Outcome cards (YC-style: 3 outcomes) */}\n        <div className='grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6'>\n          {outcomes.map(outcome => (\n            <div\n              key={outcome.title}\n              className='p-6 rounded-2xl border border-subtle bg-surface-1 hover:bg-surface-2 hover:border-default transition-colors duration-200'\n            >\n              <h3 className='text-base font-semibold text-primary-token'>\n                {outcome.title}\n              </h3>\n              <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                {outcome.description}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {/* Expandable details */}\n        <div className='mt-10'>\n          <details className='mx-auto max-w-5xl rounded-2xl border border-subtle bg-surface-0 p-6 sm:p-7'>\n            <summary className='cursor-pointer select-none text-sm font-medium text-secondary-token hover:text-primary-token focus-ring-themed rounded-md'>\n              More details\n            </summary>\n            <div className='mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'>\n              {featureDetails.map(feature => {\n                const colorClasses = geistColors[feature.color];\n                return (\n                  <div\n                    key={feature.title}\n                    className='p-5 rounded-2xl border border-subtle bg-surface-1'\n                  >\n                    <div\n                      className={`inline-flex items-center justify-center w-10 h-10 rounded-xl ${colorClasses.bg} ${colorClasses.border} border mb-4`}\n                    >\n                      <span className={colorClasses.icon}>{feature.icon}</span>\n                    </div>\n                    <h4 className='text-sm font-semibold text-primary-token'>\n                      {feature.title}\n                    </h4>\n                    <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                      {feature.description}\n                    </p>\n                  </div>\n                );\n              })}\n            </div>\n          </details>\n        </div>\n      </Container>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/NewFeaturesSection.tsx" },
        "span": [4550, 4692],
        "sourceCode": "'use client';\n\nimport { Container } from '@/components/site/Container';\n\n// Geist Design System colors\nconst geistColors = {\n  blue: {\n    icon: 'text-[color:var(--accent-analytics)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  purple: {\n    icon: 'text-[color:var(--accent-conv)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  teal: {\n    icon: 'text-[color:var(--accent-pro)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  pink: {\n    icon: 'text-[color:var(--accent-links)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  amber: {\n    icon: 'text-[color:var(--accent-beauty)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n  green: {\n    icon: 'text-[color:var(--accent-speed)]',\n    bg: 'bg-surface-0',\n    border: 'border-subtle',\n  },\n};\n\n// Feature data with Geist colors\nconst outcomes = [\n  {\n    title: 'Higher conversion',\n    description: 'App deep links + smart routing.',\n  },\n  {\n    title: 'Owned audience',\n    description: 'Capture fan identity, not just clicks.',\n  },\n  {\n    title: 'Optimization over time',\n    description: 'Automatic A/B testing by persona.',\n  },\n] as const;\n\nconst featureDetails = [\n  {\n    title: 'Blazing-fast, SEO-ready profiles',\n    description:\n      'Optimized for speed and search engines to maximize your visibility and conversions.',\n    color: 'blue' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13 10V3L4 14h7v7l9-11h-7z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Conversion-focused analytics',\n    description:\n      'Track clicks to conversions, referrers, and countries to optimize your profile performance.',\n    color: 'green' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'AI-driven personalization',\n    description:\n      'Ongoing A/B optimization for higher conversion with location, device, and persona awareness.',\n    color: 'purple' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Smart deep links',\n    description:\n      \"Intuitive /listen, /tip paths that work with Instagram's multiple links for seamless navigation.\",\n    color: 'teal' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'App deep links',\n    description:\n      'Skip browser and login friction by opening native apps directly for better user experience.',\n    color: 'amber' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z'\n        />\n      </svg>\n    ),\n  },\n  {\n    title: 'Clean light/dark modes',\n    description:\n      'Desktop to mobile QR handoff for a seamless experience across all devices and preferences.',\n    color: 'pink' as keyof typeof geistColors,\n    icon: (\n      <svg\n        className='w-5 h-5'\n        fill='none'\n        viewBox='0 0 24 24'\n        stroke='currentColor'\n        strokeWidth={2}\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'\n        />\n      </svg>\n    ),\n  },\n];\n\nexport function NewFeaturesSection() {\n  return (\n    <section\n      id='features'\n      className='relative py-20 sm:py-24 bg-base overflow-hidden'\n    >\n      <div className='absolute inset-0 -z-10'>\n        <div className='absolute inset-0 grid-bg opacity-60' />\n        <div className='absolute inset-0 bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.10),transparent)] dark:bg-[radial-gradient(ellipse_70%_55%_at_50%_-10%,rgba(120,119,198,0.20),transparent)]' />\n        <div className='pointer-events-none absolute inset-x-0 top-0 h-24 bg-linear-to-b from-base to-transparent dark:from-base' />\n        <div className='pointer-events-none absolute inset-x-0 bottom-0 h-24 bg-linear-to-t from-base to-transparent dark:from-base' />\n      </div>\n      <Container>\n        {/* Section header */}\n        <div className='text-center mb-12 sm:mb-16'>\n          <h2 className='text-3xl md:text-4xl font-medium tracking-tight text-primary-token'>\n            Sharable profile{' '}\n            <span className='text-accent-token'>built to convert</span>\n          </h2>\n          <p className='mt-4 text-base text-secondary-token max-w-xl mx-auto'>\n            A focused profile system designed to turn attention into real fan\n            actions.\n          </p>\n        </div>\n\n        {/* Outcome cards (YC-style: 3 outcomes) */}\n        <div className='grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6'>\n          {outcomes.map(outcome => (\n            <div\n              key={outcome.title}\n              className='p-6 rounded-2xl border border-subtle bg-surface-1 hover:bg-surface-2 hover:border-default transition-colors duration-200'\n            >\n              <h3 className='text-base font-semibold text-primary-token'>\n                {outcome.title}\n              </h3>\n              <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                {outcome.description}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {/* Expandable details */}\n        <div className='mt-10'>\n          <details className='mx-auto max-w-5xl rounded-2xl border border-subtle bg-surface-0 p-6 sm:p-7'>\n            <summary className='cursor-pointer select-none text-sm font-medium text-secondary-token hover:text-primary-token focus-ring-themed rounded-md'>\n              More details\n            </summary>\n            <div className='mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'>\n              {featureDetails.map(feature => {\n                const colorClasses = geistColors[feature.color];\n                return (\n                  <div\n                    key={feature.title}\n                    className='p-5 rounded-2xl border border-subtle bg-surface-1'\n                  >\n                    <div\n                      className={`inline-flex items-center justify-center w-10 h-10 rounded-xl ${colorClasses.bg} ${colorClasses.border} border mb-4`}\n                    >\n                      <span className={colorClasses.icon}>{feature.icon}</span>\n                    </div>\n                    <h4 className='text-sm font-semibold text-primary-token'>\n                      {feature.title}\n                    </h4>\n                    <p className='mt-2 text-sm text-secondary-token leading-relaxed'>\n                      {feature.description}\n                    </p>\n                  </div>\n                );\n              })}\n            </div>\n          </details>\n        </div>\n      </Container>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/PreFooterCTA.tsx" },
        "span": [1775, 1966],
        "sourceCode": "import { Button } from '@jovie/ui';\nimport Link from 'next/link';\n\nexport function PreFooterCTA() {\n  return (\n    <section className='relative py-24 sm:py-32 bg-white dark:bg-gray-900 transition-colors duration-300'>\n      {/* Background with gradient - Light theme */}\n      <div className='absolute inset-0 bg-linear-to-br from-blue-500/5 via-purple-500/5 to-cyan-500/5 dark:from-blue-500/10 dark:via-purple-500/10 dark:to-cyan-500/10' />\n\n      {/* Grid pattern - Theme aware */}\n      <div className='absolute inset-0 bg-[linear-gradient(rgba(0,0,0,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(0,0,0,0.02)_1px,transparent_1px)] dark:bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-size-[50px_50px]' />\n\n      {/* Ambient light effects for glass morphism */}\n      <div className='absolute top-1/4 left-1/4 w-96 h-96 bg-linear-to-r from-blue-400/10 to-purple-400/10 dark:from-blue-400/20 dark:to-purple-400/20 rounded-full blur-3xl opacity-50' />\n      <div className='absolute bottom-1/4 right-1/4 w-96 h-96 bg-linear-to-r from-purple-400/10 to-cyan-400/10 dark:from-purple-400/20 dark:to-cyan-400/20 rounded-full blur-3xl opacity-50' />\n\n      <div className='relative mx-auto max-w-5xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-4xl text-center'>\n          {/* Badge with glass morphism effect */}\n          <div className='mb-8'>\n            <div className='inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gray-100/80 dark:bg-white/10 border border-gray-200/50 dark:border-white/20 backdrop-blur-sm text-sm font-medium text-gray-700 dark:text-white transition-all duration-300 hover:bg-gray-200/80 dark:hover:bg-white/20 hover:scale-105'>\n              <svg\n                className='w-4 h-4 text-blue-600 dark:text-blue-400'\n                fill='none'\n                viewBox='0 0 24 24'\n                stroke='currentColor'\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  strokeWidth={2}\n                  d='M13 10V3L4 14h7v7l9-11h-7z'\n                />\n              </svg>\n              Ready to Start\n            </div>\n          </div>\n\n          {/* Main heading with improved typography hierarchy */}\n          <h2 className='text-4xl sm:text-5xl lg:text-6xl font-medium text-gray-900 dark:text-white tracking-tight leading-[1.1] transition-colors duration-300'>\n            Ready to turn fans\n            <br />\n            <span className='text-transparent bg-linear-to-r from-blue-600 via-purple-600 to-cyan-600 dark:from-blue-400 dark:via-purple-400 dark:to-cyan-400 bg-clip-text font-extrabold'>\n              into streams?\n            </span>\n          </h2>\n\n          {/* Description with improved readability */}\n          <p className='mt-8 text-xl text-gray-600 dark:text-gray-300 font-light leading-relaxed max-w-2xl mx-auto transition-colors duration-300'>\n            Create your professional music profile in 60 seconds.\n            <br />\n            <span className='text-gray-500 dark:text-gray-400'>\n              Start converting fans today.\n            </span>\n          </p>\n\n          {/* CTA buttons with enhanced spacing and interactions */}\n          <div className='mt-12 flex flex-col sm:flex-row gap-6 justify-center items-center'>\n            <Button\n              asChild\n              size='lg'\n              variant='primary'\n              className='text-lg px-8 py-4 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-indigo-500/25 dark:hover:shadow-indigo-400/25'\n            >\n              <Link href='/onboarding'>Create Your Profile</Link>\n            </Button>\n\n            <Button\n              asChild\n              size='lg'\n              variant='secondary'\n              className='text-lg px-8 py-4 transition-all duration-300 hover:scale-105'\n            >\n              <Link href='/pricing'>View Pricing</Link>\n            </Button>\n\n            {/* Secondary info with better visual hierarchy */}\n            <div className='flex items-center gap-2 text-gray-600 dark:text-gray-400 transition-colors duration-300'>\n              <svg\n                className='w-5 h-5 text-green-600 dark:text-green-400'\n                fill='none'\n                viewBox='0 0 24 24'\n                stroke='currentColor'\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  strokeWidth={2}\n                  d='M5 13l4 4L19 7'\n                />\n              </svg>\n              <span className='font-medium'>60-second setup</span>\n            </div>\n          </div>\n\n          {/* Social proof with enhanced styling */}\n          <div className='mt-10 p-4 rounded-2xl bg-gray-50/50 dark:bg-white/5 backdrop-blur-sm border border-gray-200/50 dark:border-white/10 transition-all duration-300'>\n            <p className='text-sm text-gray-600 dark:text-gray-400 font-medium'>\n              Join{' '}\n              <span className='text-blue-600 dark:text-blue-400 font-semibold'>\n                10,000+\n              </span>{' '}\n              artists already using Jovie\n            </p>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/PreFooterCTA.tsx" },
        "span": [4226, 4419],
        "sourceCode": "import { Button } from '@jovie/ui';\nimport Link from 'next/link';\n\nexport function PreFooterCTA() {\n  return (\n    <section className='relative py-24 sm:py-32 bg-white dark:bg-gray-900 transition-colors duration-300'>\n      {/* Background with gradient - Light theme */}\n      <div className='absolute inset-0 bg-linear-to-br from-blue-500/5 via-purple-500/5 to-cyan-500/5 dark:from-blue-500/10 dark:via-purple-500/10 dark:to-cyan-500/10' />\n\n      {/* Grid pattern - Theme aware */}\n      <div className='absolute inset-0 bg-[linear-gradient(rgba(0,0,0,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(0,0,0,0.02)_1px,transparent_1px)] dark:bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-size-[50px_50px]' />\n\n      {/* Ambient light effects for glass morphism */}\n      <div className='absolute top-1/4 left-1/4 w-96 h-96 bg-linear-to-r from-blue-400/10 to-purple-400/10 dark:from-blue-400/20 dark:to-purple-400/20 rounded-full blur-3xl opacity-50' />\n      <div className='absolute bottom-1/4 right-1/4 w-96 h-96 bg-linear-to-r from-purple-400/10 to-cyan-400/10 dark:from-purple-400/20 dark:to-cyan-400/20 rounded-full blur-3xl opacity-50' />\n\n      <div className='relative mx-auto max-w-5xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-4xl text-center'>\n          {/* Badge with glass morphism effect */}\n          <div className='mb-8'>\n            <div className='inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gray-100/80 dark:bg-white/10 border border-gray-200/50 dark:border-white/20 backdrop-blur-sm text-sm font-medium text-gray-700 dark:text-white transition-all duration-300 hover:bg-gray-200/80 dark:hover:bg-white/20 hover:scale-105'>\n              <svg\n                className='w-4 h-4 text-blue-600 dark:text-blue-400'\n                fill='none'\n                viewBox='0 0 24 24'\n                stroke='currentColor'\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  strokeWidth={2}\n                  d='M13 10V3L4 14h7v7l9-11h-7z'\n                />\n              </svg>\n              Ready to Start\n            </div>\n          </div>\n\n          {/* Main heading with improved typography hierarchy */}\n          <h2 className='text-4xl sm:text-5xl lg:text-6xl font-medium text-gray-900 dark:text-white tracking-tight leading-[1.1] transition-colors duration-300'>\n            Ready to turn fans\n            <br />\n            <span className='text-transparent bg-linear-to-r from-blue-600 via-purple-600 to-cyan-600 dark:from-blue-400 dark:via-purple-400 dark:to-cyan-400 bg-clip-text font-extrabold'>\n              into streams?\n            </span>\n          </h2>\n\n          {/* Description with improved readability */}\n          <p className='mt-8 text-xl text-gray-600 dark:text-gray-300 font-light leading-relaxed max-w-2xl mx-auto transition-colors duration-300'>\n            Create your professional music profile in 60 seconds.\n            <br />\n            <span className='text-gray-500 dark:text-gray-400'>\n              Start converting fans today.\n            </span>\n          </p>\n\n          {/* CTA buttons with enhanced spacing and interactions */}\n          <div className='mt-12 flex flex-col sm:flex-row gap-6 justify-center items-center'>\n            <Button\n              asChild\n              size='lg'\n              variant='primary'\n              className='text-lg px-8 py-4 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-indigo-500/25 dark:hover:shadow-indigo-400/25'\n            >\n              <Link href='/onboarding'>Create Your Profile</Link>\n            </Button>\n\n            <Button\n              asChild\n              size='lg'\n              variant='secondary'\n              className='text-lg px-8 py-4 transition-all duration-300 hover:scale-105'\n            >\n              <Link href='/pricing'>View Pricing</Link>\n            </Button>\n\n            {/* Secondary info with better visual hierarchy */}\n            <div className='flex items-center gap-2 text-gray-600 dark:text-gray-400 transition-colors duration-300'>\n              <svg\n                className='w-5 h-5 text-green-600 dark:text-green-400'\n                fill='none'\n                viewBox='0 0 24 24'\n                stroke='currentColor'\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  strokeWidth={2}\n                  d='M5 13l4 4L19 7'\n                />\n              </svg>\n              <span className='font-medium'>60-second setup</span>\n            </div>\n          </div>\n\n          {/* Social proof with enhanced styling */}\n          <div className='mt-10 p-4 rounded-2xl bg-gray-50/50 dark:bg-white/5 backdrop-blur-sm border border-gray-200/50 dark:border-white/10 transition-all duration-300'>\n            <p className='text-sm text-gray-600 dark:text-gray-400 font-medium'>\n              Join{' '}\n              <span className='text-blue-600 dark:text-blue-400 font-semibold'>\n                10,000+\n              </span>{' '}\n              artists already using Jovie\n            </p>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/ProblemSolutionSection.tsx" },
        "span": [2998, 3241],
        "sourceCode": "'use client';\n\nimport Link from 'next/link';\nimport { track } from '@/lib/analytics';\n\nexport function ProblemSolutionSection() {\n  const handleClick = () => {\n    track('claim_handle_click', { section: 'problem-solution' });\n  };\n\n  return (\n    <section\n      id='problem'\n      aria-labelledby='problem-solution-heading'\n      className='relative border-t border-gray-200 dark:border-white/10'\n    >\n      <div className='mx-auto max-w-5xl px-4 py-14 md:py-18 text-center'>\n        {/* Unified badge with Linear-inspired styling */}\n        <div className='inline-flex items-center rounded-full bg-gray-100/80 dark:bg-white/5 px-4 py-2 text-sm font-medium text-gray-700 dark:text-white/80 backdrop-blur-sm border border-gray-200 dark:border-white/10'>\n          <div className='flex h-2 w-2 items-center justify-center mr-2'>\n            <div className='h-1.5 w-1.5 rounded-full bg-amber-400 dark:bg-amber-500 animate-pulse motion-reduce:animate-none' />\n          </div>\n          The Problem & Our Solution\n        </div>\n\n        {/* Unified heading */}\n        <h2\n          id='problem-solution-heading'\n          className='mt-6 text-4xl md:text-6xl font-medium tracking-tight text-balance text-gray-900 dark:text-white'\n        >\n          Your bio link is a speed bump.\n          <br />\n          <span className='text-3xl md:text-5xl text-gray-600 dark:text-white/70 font-semibold'>\n            We built the off-ramp.\n          </span>\n        </h2>\n\n        <h3 className='mt-6 text-2xl md:text-3xl font-bold text-gray-900 dark:text-white'>\n          Stop designing. Start converting.\n        </h3>\n\n        {/* Unified narrative flow */}\n        <div className='mt-6 space-y-4 max-w-4xl mx-auto'>\n          <p className='text-lg text-gray-600 dark:text-white/70 leading-relaxed'>\n            Every extra tap taxes attention. &ldquo;Cute&rdquo; layouts bleed\n            streams, follows, and ticket sales.\n          </p>\n          <p className='text-lg text-gray-700 dark:text-white/80 leading-relaxed font-medium'>\n            Jovie ships a locked, elite artist page in seconds—built for streams\n            and sales, not vibes. One link. One funnel. More plays, more pay.\n          </p>\n        </div>\n\n        {/* Linear-inspired CTA button */}\n        <div className='mt-8'>\n          <Link\n            href='/onboarding'\n            onClick={handleClick}\n            className='inline-flex items-center justify-center px-8 py-4 text-base font-semibold text-white bg-gray-900 hover:bg-gray-800 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-200 rounded-lg border border-gray-900 dark:border-gray-50 transition-all duration-200 ease-in-out focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-gray-400 dark:focus-visible:ring-gray-600 focus-visible:ring-offset-2 dark:focus-visible:ring-offset-gray-900 shadow-sm hover:shadow-md disabled:opacity-50 disabled:pointer-events-none group'\n          >\n            <span>Request Early Access</span>\n            <svg\n              className='ml-2 h-4 w-4 transition-transform duration-200 group-hover:translate-x-1'\n              fill='none'\n              viewBox='0 0 24 24'\n              stroke='currentColor'\n              strokeWidth={2}\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                d='M13 7l5 5m0 0l-5 5m5-5H6'\n              />\n            </svg>\n          </Link>\n          <p className='mt-3 text-sm text-gray-500 dark:text-white/50'>\n            Go live in 60 seconds\n          </p>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/home/ProblemStatement.tsx" },
        "span": [412, 570],
        "sourceCode": "export function ProblemStatement() {\n  return (\n    <section className='relative py-24 sm:py-32'>\n      <div className='mx-auto max-w-7xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-4xl text-center'>\n          <div className='mb-8'>\n            <div className='inline-flex items-center gap-2 px-4 py-2 rounded-full bg-red-500/10 border border-red-500/20 text-sm font-medium text-red-400'>\n              <svg\n                className='w-4 h-4'\n                fill='none'\n                viewBox='0 0 24 24'\n                stroke='currentColor'\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  strokeWidth={2}\n                  d='M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z'\n                />\n              </svg>\n              The Problem\n            </div>\n          </div>\n\n          <h2 className='text-4xl font-medium tracking-tight text-gray-900 dark:text-white sm:text-5xl lg:text-6xl'>\n            Musicians lose fans to bad profile experiences\n          </h2>\n\n          <div className='mt-12 space-y-8 text-lg leading-relaxed text-gray-600 dark:text-white/70'>\n            <p className='text-xl'>\n              73% of fans abandon music discovery when they hit slow, cluttered,\n              or confusing profile pages.\n            </p>\n\n            <div className='grid grid-cols-1 md:grid-cols-3 gap-8 mt-16'>\n              <div className='text-center'>\n                <div className='text-3xl font-bold text-red-400'>73%</div>\n                <div className='text-sm text-gray-500 dark:text-white/60'>\n                  Abandon rate on slow pages\n                </div>\n              </div>\n              <div className='text-center'>\n                <div className='text-3xl font-bold text-yellow-400'>2.3s</div>\n                <div className='text-sm text-gray-500 dark:text-white/60'>\n                  Average load time on competitors\n                </div>\n              </div>\n              <div className='text-center'>\n                <div className='text-3xl font-bold text-green-400'>3.2x</div>\n                <div className='text-sm text-gray-500 dark:text-white/60'>\n                  Faster than Linktree\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/link-in-bio/LinkInBioCTA.tsx" },
        "span": [1092, 1240],
        "sourceCode": "import { Button } from '@jovie/ui';\nimport Link from 'next/link';\n\nexport function LinkInBioCTA() {\n  return (\n    <section className='relative py-24 sm:py-32 bg-white dark:bg-gray-900 transition-colors duration-300'>\n      {/* Background with gradient */}\n      <div className='absolute inset-0 bg-gradient-to-br from-blue-500/5 via-purple-500/5 to-cyan-500/5 dark:from-blue-500/10 dark:via-purple-500/10 dark:to-cyan-500/10' />\n\n      {/* Grid pattern - Theme aware */}\n      <div className='absolute inset-0 bg-[linear-gradient(rgba(0,0,0,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(0,0,0,0.02)_1px,transparent_1px)] dark:bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-[size:30px_30px]' />\n\n      <div className='relative mx-auto max-w-4xl px-6 lg:px-8 text-center'>\n        {/* Badge */}\n        <div className='mb-8'>\n          <div className='inline-flex items-center gap-2 px-4 py-2 rounded-full bg-green-500/10 border border-green-500/20 text-sm font-medium text-green-400'>\n            <svg\n              className='w-4 h-4'\n              fill='none'\n              viewBox='0 0 24 24'\n              stroke='currentColor'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M13 10V3L4 14h7v7l9-11h-7z'\n              />\n            </svg>\n            Ready to convert fans\n          </div>\n        </div>\n\n        {/* Main headline */}\n        <h2 className='text-4xl font-semibold tracking-tight text-gray-900 dark:text-white sm:text-5xl lg:text-6xl mb-8'>\n          <span className='block'>\n            Ready to turn{' '}\n            <span className='text-transparent bg-gradient-to-r from-blue-600 via-purple-600 to-cyan-600 dark:from-blue-400 dark:via-purple-400 dark:to-cyan-400 bg-clip-text'>\n              clicks\n            </span>\n          </span>\n          <span className='block'>into streams?</span>\n        </h2>\n\n        {/* Description */}\n        <p className='mt-8 text-xl text-gray-600 dark:text-gray-300 font-light leading-relaxed max-w-2xl mx-auto'>\n          Create your professional music profile in 60 seconds.\n          <br />\n          <span className='text-gray-500 dark:text-gray-400'>\n            Start converting fans today.\n          </span>\n        </p>\n\n        {/* CTA buttons */}\n        <div className='mt-12 flex flex-col sm:flex-row gap-6 justify-center items-center'>\n          <Button\n            asChild\n            size='lg'\n            variant='primary'\n            className='text-lg px-8 py-4 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-indigo-500/25 dark:hover:shadow-indigo-400/25'\n          >\n            <Link href='/onboarding'>Create Your Profile</Link>\n          </Button>\n\n          <Button\n            asChild\n            size='lg'\n            variant='secondary'\n            className='text-lg px-8 py-4 transition-all duration-300 hover:scale-105'\n          >\n            <Link href='/pricing'>View Pricing</Link>\n          </Button>\n        </div>\n\n        {/* Trust indicators */}\n        <div className='mt-12 flex items-center justify-center gap-2 text-gray-600 dark:text-gray-400'>\n          <svg\n            className='w-5 h-5 text-green-600 dark:text-green-400'\n            fill='none'\n            viewBox='0 0 24 24'\n            stroke='currentColor'\n          >\n            <path\n              strokeLinecap='round'\n              strokeLinejoin='round'\n              strokeWidth={2}\n              d='M5 13l4 4L19 7'\n            />\n          </svg>\n          <span className='text-sm'>\n            Free forever • No credit card required • Live in 60 seconds\n          </span>\n        </div>\n\n        {/* Social proof */}\n        <div className='mt-8'>\n          <p className='text-xs text-gray-400 dark:text-white/40 font-medium'>\n            Join 10,000+ artists already converting fans with Jovie\n          </p>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/link-in-bio/LinkInBioCTA.tsx" },
        "span": [3296, 3469],
        "sourceCode": "import { Button } from '@jovie/ui';\nimport Link from 'next/link';\n\nexport function LinkInBioCTA() {\n  return (\n    <section className='relative py-24 sm:py-32 bg-white dark:bg-gray-900 transition-colors duration-300'>\n      {/* Background with gradient */}\n      <div className='absolute inset-0 bg-gradient-to-br from-blue-500/5 via-purple-500/5 to-cyan-500/5 dark:from-blue-500/10 dark:via-purple-500/10 dark:to-cyan-500/10' />\n\n      {/* Grid pattern - Theme aware */}\n      <div className='absolute inset-0 bg-[linear-gradient(rgba(0,0,0,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(0,0,0,0.02)_1px,transparent_1px)] dark:bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-[size:30px_30px]' />\n\n      <div className='relative mx-auto max-w-4xl px-6 lg:px-8 text-center'>\n        {/* Badge */}\n        <div className='mb-8'>\n          <div className='inline-flex items-center gap-2 px-4 py-2 rounded-full bg-green-500/10 border border-green-500/20 text-sm font-medium text-green-400'>\n            <svg\n              className='w-4 h-4'\n              fill='none'\n              viewBox='0 0 24 24'\n              stroke='currentColor'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M13 10V3L4 14h7v7l9-11h-7z'\n              />\n            </svg>\n            Ready to convert fans\n          </div>\n        </div>\n\n        {/* Main headline */}\n        <h2 className='text-4xl font-semibold tracking-tight text-gray-900 dark:text-white sm:text-5xl lg:text-6xl mb-8'>\n          <span className='block'>\n            Ready to turn{' '}\n            <span className='text-transparent bg-gradient-to-r from-blue-600 via-purple-600 to-cyan-600 dark:from-blue-400 dark:via-purple-400 dark:to-cyan-400 bg-clip-text'>\n              clicks\n            </span>\n          </span>\n          <span className='block'>into streams?</span>\n        </h2>\n\n        {/* Description */}\n        <p className='mt-8 text-xl text-gray-600 dark:text-gray-300 font-light leading-relaxed max-w-2xl mx-auto'>\n          Create your professional music profile in 60 seconds.\n          <br />\n          <span className='text-gray-500 dark:text-gray-400'>\n            Start converting fans today.\n          </span>\n        </p>\n\n        {/* CTA buttons */}\n        <div className='mt-12 flex flex-col sm:flex-row gap-6 justify-center items-center'>\n          <Button\n            asChild\n            size='lg'\n            variant='primary'\n            className='text-lg px-8 py-4 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-indigo-500/25 dark:hover:shadow-indigo-400/25'\n          >\n            <Link href='/onboarding'>Create Your Profile</Link>\n          </Button>\n\n          <Button\n            asChild\n            size='lg'\n            variant='secondary'\n            className='text-lg px-8 py-4 transition-all duration-300 hover:scale-105'\n          >\n            <Link href='/pricing'>View Pricing</Link>\n          </Button>\n        </div>\n\n        {/* Trust indicators */}\n        <div className='mt-12 flex items-center justify-center gap-2 text-gray-600 dark:text-gray-400'>\n          <svg\n            className='w-5 h-5 text-green-600 dark:text-green-400'\n            fill='none'\n            viewBox='0 0 24 24'\n            stroke='currentColor'\n          >\n            <path\n              strokeLinecap='round'\n              strokeLinejoin='round'\n              strokeWidth={2}\n              d='M5 13l4 4L19 7'\n            />\n          </svg>\n          <span className='text-sm'>\n            Free forever • No credit card required • Live in 60 seconds\n          </span>\n        </div>\n\n        {/* Social proof */}\n        <div className='mt-8'>\n          <p className='text-xs text-gray-400 dark:text-white/40 font-medium'>\n            Join 10,000+ artists already converting fans with Jovie\n          </p>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/link-in-bio/LinkInBioHero.tsx" },
        "span": [665, 838],
        "sourceCode": "'use client';\n\nimport { Button } from '@jovie/ui';\nimport Link from 'next/link';\nimport { HeroSection } from '@/components/organisms/HeroSection';\n\nexport function LinkInBioHero() {\n  return (\n    <HeroSection\n      headline='Jovie: Built to Convert Not to Decorate'\n      highlightText='Convert'\n      gradientVariant='purple-cyan'\n      subtitle=\"Your fans don't care about button colors—they care about your music. Jovie's AI tests every word, layout, and CTA behind the scenes to make sure more fans click, listen, and buy.\"\n      icon='🚀'\n      supportingText={\n        <div className='flex items-center gap-2 text-gray-600 dark:text-gray-400'>\n          <svg\n            className='w-5 h-5 text-green-600 dark:text-green-400'\n            fill='none'\n            viewBox='0 0 24 24'\n            stroke='currentColor'\n          >\n            <path\n              strokeLinecap='round'\n              strokeLinejoin='round'\n              strokeWidth={2}\n              d='M5 13l4 4L19 7'\n            />\n          </svg>\n          <span className='text-sm'>\n            You focus on creating. We focus on converting.\n          </span>\n        </div>\n      }\n      trustIndicators={\n        <p className='text-xs text-gray-400 dark:text-white/40 font-medium'>\n          Trusted by 10,000+ artists worldwide\n        </p>\n      }\n      showBackgroundEffects={false}\n    >\n      <div className='flex flex-col sm:flex-row gap-6 justify-center items-center'>\n        <Button\n          asChild\n          size='lg'\n          variant='primary'\n          className='text-lg px-8 py-4 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-indigo-500/25 dark:hover:shadow-indigo-400/25'\n        >\n          <Link href='/onboarding'>Create Your Profile</Link>\n        </Button>\n\n        <Button\n          asChild\n          size='lg'\n          variant='secondary'\n          className='text-lg px-8 py-4 transition-all duration-300 hover:scale-105'\n        >\n          <Link href='/pricing'>View Pricing</Link>\n        </Button>\n      </div>\n    </HeroSection>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/FeatureCard.stories.tsx" },
        "span": [150, 248],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { FeatureCard } from './FeatureCard';\n\n// Sample icons\nconst LightningIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nconst ChartIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n    />\n  </svg>\n);\n\nconst BulbIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n    />\n  </svg>\n);\n\nconst meta: Meta<typeof FeatureCard> = {\n  title: 'Atoms/FeatureCard',\n  component: FeatureCard,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    accent: {\n      control: { type: 'select' },\n      options: ['blue', 'green', 'purple', 'orange', 'red', 'gray'],\n    },\n    interactive: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    title: '3.2x Faster Loading',\n    description: 'Fans discover your music instantly. No waiting, no bouncing.',\n    metric: '0.8s load time',\n    icon: LightningIcon,\n    accent: 'blue',\n  },\n};\n\nexport const Green: Story = {\n  args: {\n    title: '47% More Streams',\n    description: 'Optimized for conversion. Fans click and stream immediately.',\n    metric: '+47% conversion',\n    icon: ChartIcon,\n    accent: 'green',\n  },\n};\n\nexport const Purple: Story = {\n  args: {\n    title: 'Smart Fan Routing',\n    description:\n      \"Remembers each fan's favorite platform. One click to their preferred streaming service.\",\n    metric: '1-click streaming',\n    icon: BulbIcon,\n    accent: 'purple',\n  },\n};\n\nexport const WithoutMetric: Story = {\n  args: {\n    title: 'Simple Feature',\n    description:\n      'This is a feature card without a metric badge to show the layout.',\n    icon: LightningIcon,\n    accent: 'blue',\n  },\n};\n\nexport const NonInteractive: Story = {\n  args: {\n    title: 'Static Card',\n    description: 'This card has no hover effects and is purely informational.',\n    metric: 'No hover',\n    icon: ChartIcon,\n    accent: 'gray',\n    interactive: false,\n  },\n};\n\nexport const AllAccents: Story = {\n  render: () => (\n    <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl'>\n      <FeatureCard\n        title='Blue Accent'\n        description='This card uses the blue accent color for the icon background.'\n        metric='Blue'\n        icon={LightningIcon}\n        accent='blue'\n      />\n      <FeatureCard\n        title='Green Accent'\n        description='This card uses the green accent color for the icon background.'\n        metric='Green'\n        icon={ChartIcon}\n        accent='green'\n      />\n      <FeatureCard\n        title='Purple Accent'\n        description='This card uses the purple accent color for the icon background.'\n        metric='Purple'\n        icon={BulbIcon}\n        accent='purple'\n      />\n      <FeatureCard\n        title='Orange Accent'\n        description='This card uses the orange accent color for the icon background.'\n        metric='Orange'\n        icon={LightningIcon}\n        accent='orange'\n      />\n      <FeatureCard\n        title='Red Accent'\n        description='This card uses the red accent color for the icon background.'\n        metric='Red'\n        icon={ChartIcon}\n        accent='red'\n      />\n      <FeatureCard\n        title='Gray Accent'\n        description='This card uses the gray accent color for the icon background.'\n        metric='Gray'\n        icon={BulbIcon}\n        accent='gray'\n      />\n    </div>\n  ),\n};\n\nexport const InBenefitsSection: Story = {\n  render: () => (\n    <div className='max-w-6xl p-8 bg-gray-50 dark:bg-gray-900 rounded-lg'>\n      <div className='text-center mb-12'>\n        <h2 className='text-4xl font-bold mb-4'>Benefits Section</h2>\n        <p className='text-gray-600 dark:text-gray-300'>\n          See how feature cards work together in a benefits section\n        </p>\n      </div>\n      <div className='grid grid-cols-1 md:grid-cols-3 gap-8'>\n        <FeatureCard\n          title='3.2x Faster Loading'\n          description='Fans discover your music instantly. No waiting, no bouncing.'\n          metric='0.8s load time'\n          icon={LightningIcon}\n          accent='blue'\n        />\n        <FeatureCard\n          title='47% More Streams'\n          description='Optimized for conversion. Fans click and stream immediately.'\n          metric='+47% conversion'\n          icon={ChartIcon}\n          accent='green'\n        />\n        <FeatureCard\n          title='Smart Fan Routing'\n          description=\"Remembers each fan's favorite platform. One click to their preferred streaming service.\"\n          metric='1-click streaming'\n          icon={BulbIcon}\n          accent='purple'\n        />\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/FeatureCard.stories.tsx" },
        "span": [417, 515],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { FeatureCard } from './FeatureCard';\n\n// Sample icons\nconst LightningIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nconst ChartIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n    />\n  </svg>\n);\n\nconst BulbIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n    />\n  </svg>\n);\n\nconst meta: Meta<typeof FeatureCard> = {\n  title: 'Atoms/FeatureCard',\n  component: FeatureCard,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    accent: {\n      control: { type: 'select' },\n      options: ['blue', 'green', 'purple', 'orange', 'red', 'gray'],\n    },\n    interactive: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    title: '3.2x Faster Loading',\n    description: 'Fans discover your music instantly. No waiting, no bouncing.',\n    metric: '0.8s load time',\n    icon: LightningIcon,\n    accent: 'blue',\n  },\n};\n\nexport const Green: Story = {\n  args: {\n    title: '47% More Streams',\n    description: 'Optimized for conversion. Fans click and stream immediately.',\n    metric: '+47% conversion',\n    icon: ChartIcon,\n    accent: 'green',\n  },\n};\n\nexport const Purple: Story = {\n  args: {\n    title: 'Smart Fan Routing',\n    description:\n      \"Remembers each fan's favorite platform. One click to their preferred streaming service.\",\n    metric: '1-click streaming',\n    icon: BulbIcon,\n    accent: 'purple',\n  },\n};\n\nexport const WithoutMetric: Story = {\n  args: {\n    title: 'Simple Feature',\n    description:\n      'This is a feature card without a metric badge to show the layout.',\n    icon: LightningIcon,\n    accent: 'blue',\n  },\n};\n\nexport const NonInteractive: Story = {\n  args: {\n    title: 'Static Card',\n    description: 'This card has no hover effects and is purely informational.',\n    metric: 'No hover',\n    icon: ChartIcon,\n    accent: 'gray',\n    interactive: false,\n  },\n};\n\nexport const AllAccents: Story = {\n  render: () => (\n    <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl'>\n      <FeatureCard\n        title='Blue Accent'\n        description='This card uses the blue accent color for the icon background.'\n        metric='Blue'\n        icon={LightningIcon}\n        accent='blue'\n      />\n      <FeatureCard\n        title='Green Accent'\n        description='This card uses the green accent color for the icon background.'\n        metric='Green'\n        icon={ChartIcon}\n        accent='green'\n      />\n      <FeatureCard\n        title='Purple Accent'\n        description='This card uses the purple accent color for the icon background.'\n        metric='Purple'\n        icon={BulbIcon}\n        accent='purple'\n      />\n      <FeatureCard\n        title='Orange Accent'\n        description='This card uses the orange accent color for the icon background.'\n        metric='Orange'\n        icon={LightningIcon}\n        accent='orange'\n      />\n      <FeatureCard\n        title='Red Accent'\n        description='This card uses the red accent color for the icon background.'\n        metric='Red'\n        icon={ChartIcon}\n        accent='red'\n      />\n      <FeatureCard\n        title='Gray Accent'\n        description='This card uses the gray accent color for the icon background.'\n        metric='Gray'\n        icon={BulbIcon}\n        accent='gray'\n      />\n    </div>\n  ),\n};\n\nexport const InBenefitsSection: Story = {\n  render: () => (\n    <div className='max-w-6xl p-8 bg-gray-50 dark:bg-gray-900 rounded-lg'>\n      <div className='text-center mb-12'>\n        <h2 className='text-4xl font-bold mb-4'>Benefits Section</h2>\n        <p className='text-gray-600 dark:text-gray-300'>\n          See how feature cards work together in a benefits section\n        </p>\n      </div>\n      <div className='grid grid-cols-1 md:grid-cols-3 gap-8'>\n        <FeatureCard\n          title='3.2x Faster Loading'\n          description='Fans discover your music instantly. No waiting, no bouncing.'\n          metric='0.8s load time'\n          icon={LightningIcon}\n          accent='blue'\n        />\n        <FeatureCard\n          title='47% More Streams'\n          description='Optimized for conversion. Fans click and stream immediately.'\n          metric='+47% conversion'\n          icon={ChartIcon}\n          accent='green'\n        />\n        <FeatureCard\n          title='Smart Fan Routing'\n          description=\"Remembers each fan's favorite platform. One click to their preferred streaming service.\"\n          metric='1-click streaming'\n          icon={BulbIcon}\n          accent='purple'\n        />\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/FeatureCard.stories.tsx" },
        "span": [853, 951],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { FeatureCard } from './FeatureCard';\n\n// Sample icons\nconst LightningIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nconst ChartIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n    />\n  </svg>\n);\n\nconst BulbIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n    />\n  </svg>\n);\n\nconst meta: Meta<typeof FeatureCard> = {\n  title: 'Atoms/FeatureCard',\n  component: FeatureCard,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    accent: {\n      control: { type: 'select' },\n      options: ['blue', 'green', 'purple', 'orange', 'red', 'gray'],\n    },\n    interactive: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    title: '3.2x Faster Loading',\n    description: 'Fans discover your music instantly. No waiting, no bouncing.',\n    metric: '0.8s load time',\n    icon: LightningIcon,\n    accent: 'blue',\n  },\n};\n\nexport const Green: Story = {\n  args: {\n    title: '47% More Streams',\n    description: 'Optimized for conversion. Fans click and stream immediately.',\n    metric: '+47% conversion',\n    icon: ChartIcon,\n    accent: 'green',\n  },\n};\n\nexport const Purple: Story = {\n  args: {\n    title: 'Smart Fan Routing',\n    description:\n      \"Remembers each fan's favorite platform. One click to their preferred streaming service.\",\n    metric: '1-click streaming',\n    icon: BulbIcon,\n    accent: 'purple',\n  },\n};\n\nexport const WithoutMetric: Story = {\n  args: {\n    title: 'Simple Feature',\n    description:\n      'This is a feature card without a metric badge to show the layout.',\n    icon: LightningIcon,\n    accent: 'blue',\n  },\n};\n\nexport const NonInteractive: Story = {\n  args: {\n    title: 'Static Card',\n    description: 'This card has no hover effects and is purely informational.',\n    metric: 'No hover',\n    icon: ChartIcon,\n    accent: 'gray',\n    interactive: false,\n  },\n};\n\nexport const AllAccents: Story = {\n  render: () => (\n    <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl'>\n      <FeatureCard\n        title='Blue Accent'\n        description='This card uses the blue accent color for the icon background.'\n        metric='Blue'\n        icon={LightningIcon}\n        accent='blue'\n      />\n      <FeatureCard\n        title='Green Accent'\n        description='This card uses the green accent color for the icon background.'\n        metric='Green'\n        icon={ChartIcon}\n        accent='green'\n      />\n      <FeatureCard\n        title='Purple Accent'\n        description='This card uses the purple accent color for the icon background.'\n        metric='Purple'\n        icon={BulbIcon}\n        accent='purple'\n      />\n      <FeatureCard\n        title='Orange Accent'\n        description='This card uses the orange accent color for the icon background.'\n        metric='Orange'\n        icon={LightningIcon}\n        accent='orange'\n      />\n      <FeatureCard\n        title='Red Accent'\n        description='This card uses the red accent color for the icon background.'\n        metric='Red'\n        icon={ChartIcon}\n        accent='red'\n      />\n      <FeatureCard\n        title='Gray Accent'\n        description='This card uses the gray accent color for the icon background.'\n        metric='Gray'\n        icon={BulbIcon}\n        accent='gray'\n      />\n    </div>\n  ),\n};\n\nexport const InBenefitsSection: Story = {\n  render: () => (\n    <div className='max-w-6xl p-8 bg-gray-50 dark:bg-gray-900 rounded-lg'>\n      <div className='text-center mb-12'>\n        <h2 className='text-4xl font-bold mb-4'>Benefits Section</h2>\n        <p className='text-gray-600 dark:text-gray-300'>\n          See how feature cards work together in a benefits section\n        </p>\n      </div>\n      <div className='grid grid-cols-1 md:grid-cols-3 gap-8'>\n        <FeatureCard\n          title='3.2x Faster Loading'\n          description='Fans discover your music instantly. No waiting, no bouncing.'\n          metric='0.8s load time'\n          icon={LightningIcon}\n          accent='blue'\n        />\n        <FeatureCard\n          title='47% More Streams'\n          description='Optimized for conversion. Fans click and stream immediately.'\n          metric='+47% conversion'\n          icon={ChartIcon}\n          accent='green'\n        />\n        <FeatureCard\n          title='Smart Fan Routing'\n          description=\"Remembers each fan's favorite platform. One click to their preferred streaming service.\"\n          metric='1-click streaming'\n          icon={BulbIcon}\n          accent='purple'\n        />\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/FrostedContainer.stories.tsx" },
        "span": [903, 1008],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { FrostedContainer } from './FrostedContainer';\n\nconst meta: Meta<typeof FrostedContainer> = {\n  title: 'Molecules/FrostedContainer',\n  component: FrostedContainer,\n  parameters: {\n    layout: 'fullscreen',\n  },\n  argTypes: {\n    variant: {\n      control: 'select',\n      options: ['default', 'glass', 'solid'],\n    },\n    backgroundPattern: {\n      control: 'select',\n      options: ['grid', 'dots', 'gradient', 'none'],\n    },\n    showGradientBlurs: {\n      control: 'boolean',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof FrostedContainer>;\n\nconst SampleContent = () => (\n  <div className='p-8 max-w-md mx-auto text-center'>\n    <h2 className='text-2xl font-bold mb-4'>Welcome to Jovie</h2>\n    <p className='text-secondary mb-6'>\n      Create your artist profile and connect with fans worldwide.\n    </p>\n    <button className='px-6 py-2 bg-black text-white dark:bg-white dark:text-black rounded-full font-medium'>\n      Get Started\n    </button>\n  </div>\n);\n\nexport const Default: Story = {\n  args: {\n    variant: 'default',\n    backgroundPattern: 'grid',\n    showGradientBlurs: true,\n    children: <SampleContent />,\n    className: 'max-w-lg mx-auto my-20',\n  },\n};\n\nexport const Glass: Story = {\n  args: {\n    variant: 'glass',\n    backgroundPattern: 'gradient',\n    showGradientBlurs: true,\n    children: <SampleContent />,\n    className: 'max-w-lg mx-auto my-20',\n  },\n};\n\nexport const Solid: Story = {\n  args: {\n    variant: 'solid',\n    backgroundPattern: 'dots',\n    showGradientBlurs: false,\n    children: <SampleContent />,\n    className: 'max-w-lg mx-auto my-20',\n  },\n};\n\nexport const NoBackground: Story = {\n  args: {\n    variant: 'default',\n    backgroundPattern: 'none',\n    showGradientBlurs: false,\n    children: <SampleContent />,\n    className: 'max-w-lg mx-auto my-20',\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingButton.stories.tsx" },
        "span": [2352, 2379],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport React from 'react';\nimport { LoadingButton } from './LoadingButton';\n\nconst meta: Meta<typeof LoadingButton> = {\n  title: 'Molecules/LoadingButton',\n  component: LoadingButton,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    isLoading: {\n      control: { type: 'boolean' },\n    },\n    spinnerSize: {\n      control: { type: 'select' },\n      options: ['xs', 'sm', 'md', 'lg'],\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    children: 'Click me',\n  },\n};\n\nexport const Loading: Story = {\n  args: {\n    isLoading: true,\n    children: 'Submit',\n  },\n};\n\nexport const CustomLoadingText: Story = {\n  args: {\n    isLoading: true,\n    loadingText: 'Processing...',\n    children: 'Pay Now',\n  },\n};\n\nexport const ListenNowButton: Story = {\n  args: {\n    isLoading: false,\n    children: 'Listen Now',\n  },\n};\n\nexport const ListenNowLoading: Story = {\n  args: {\n    isLoading: true,\n    loadingText: 'Opening...',\n    children: 'Listen Now',\n  },\n};\n\nexport const TipButton: Story = {\n  args: {\n    isLoading: false,\n    children: '$5 Tip',\n  },\n};\n\nexport const TipButtonLoading: Story = {\n  args: {\n    isLoading: true,\n    loadingText: 'Processing…',\n    children: '$5 Tip',\n  },\n};\n\nexport const SmallSpinner: Story = {\n  args: {\n    isLoading: true,\n    spinnerSize: 'xs',\n    children: 'Save',\n  },\n};\n\nexport const LargeSpinner: Story = {\n  args: {\n    isLoading: true,\n    spinnerSize: 'lg',\n    loadingText: 'Please wait...',\n    children: 'Submit Order',\n  },\n};\n\nexport const SecondaryVariant: Story = {\n  args: {\n    isLoading: true,\n    children: 'Save Draft',\n  },\n};\n\nexport const OutlineVariant: Story = {\n  args: {\n    isLoading: true,\n    children: 'Cancel Order',\n  },\n};\n\nexport const Disabled: Story = {\n  args: {\n    children: 'Disabled Button',\n  },\n};\n\nexport const LoadingDisabled: Story = {\n  args: {\n    isLoading: true,\n    children: 'This should show loading',\n  },\n};\n\nexport const InteractiveDemo: Story = {\n  render: function InteractiveDemoRender() {\n    const [isLoading, setIsLoading] = React.useState(false);\n\n    const handleClick = () => {\n      setIsLoading(true);\n      setTimeout(() => setIsLoading(false), 2000);\n    };\n\n    return (\n      <div onClick={handleClick}>\n        <LoadingButton isLoading={isLoading} loadingText='Processing...'>\n          {isLoading ? 'Processing...' : 'Click to test'}\n        </LoadingButton>\n      </div>\n    );\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noStaticElementInteractions",
      "severity": "warning",
      "description": "Static Elements should not be interactive.",
      "message": [
        {
          "elements": [],
          "content": "Static Elements should not be interactive."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "To add interactivity such as a mouse or key event listener to a static element, give the element an appropriate role value."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingButton.stories.tsx" },
        "span": [2352, 2379],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport React from 'react';\nimport { LoadingButton } from './LoadingButton';\n\nconst meta: Meta<typeof LoadingButton> = {\n  title: 'Molecules/LoadingButton',\n  component: LoadingButton,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    isLoading: {\n      control: { type: 'boolean' },\n    },\n    spinnerSize: {\n      control: { type: 'select' },\n      options: ['xs', 'sm', 'md', 'lg'],\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    children: 'Click me',\n  },\n};\n\nexport const Loading: Story = {\n  args: {\n    isLoading: true,\n    children: 'Submit',\n  },\n};\n\nexport const CustomLoadingText: Story = {\n  args: {\n    isLoading: true,\n    loadingText: 'Processing...',\n    children: 'Pay Now',\n  },\n};\n\nexport const ListenNowButton: Story = {\n  args: {\n    isLoading: false,\n    children: 'Listen Now',\n  },\n};\n\nexport const ListenNowLoading: Story = {\n  args: {\n    isLoading: true,\n    loadingText: 'Opening...',\n    children: 'Listen Now',\n  },\n};\n\nexport const TipButton: Story = {\n  args: {\n    isLoading: false,\n    children: '$5 Tip',\n  },\n};\n\nexport const TipButtonLoading: Story = {\n  args: {\n    isLoading: true,\n    loadingText: 'Processing…',\n    children: '$5 Tip',\n  },\n};\n\nexport const SmallSpinner: Story = {\n  args: {\n    isLoading: true,\n    spinnerSize: 'xs',\n    children: 'Save',\n  },\n};\n\nexport const LargeSpinner: Story = {\n  args: {\n    isLoading: true,\n    spinnerSize: 'lg',\n    loadingText: 'Please wait...',\n    children: 'Submit Order',\n  },\n};\n\nexport const SecondaryVariant: Story = {\n  args: {\n    isLoading: true,\n    children: 'Save Draft',\n  },\n};\n\nexport const OutlineVariant: Story = {\n  args: {\n    isLoading: true,\n    children: 'Cancel Order',\n  },\n};\n\nexport const Disabled: Story = {\n  args: {\n    children: 'Disabled Button',\n  },\n};\n\nexport const LoadingDisabled: Story = {\n  args: {\n    isLoading: true,\n    children: 'This should show loading',\n  },\n};\n\nexport const InteractiveDemo: Story = {\n  render: function InteractiveDemoRender() {\n    const [isLoading, setIsLoading] = React.useState(false);\n\n    const handleClick = () => {\n      setIsLoading(true);\n      setTimeout(() => setIsLoading(false), 2000);\n    };\n\n    return (\n      <div onClick={handleClick}>\n        <LoadingButton isLoading={isLoading} loadingText='Processing...'>\n          {isLoading ? 'Processing...' : 'Click to test'}\n        </LoadingButton>\n      </div>\n    );\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useKeyWithClickEvents",
      "severity": "warning",
      "description": "Enforce to have the onClick mouse event with the onKeyUp, the onKeyDown, or the onKeyPress keyboard event.",
      "message": [
        { "elements": [], "content": "Enforce to have the " },
        { "elements": ["Emphasis"], "content": "onClick" },
        { "elements": [], "content": " mouse event with the " },
        { "elements": ["Emphasis"], "content": "onKeyUp" },
        { "elements": [], "content": ", the " },
        { "elements": ["Emphasis"], "content": "onKeyDown" },
        { "elements": [], "content": ", or the " },
        { "elements": ["Emphasis"], "content": "onKeyPress" },
        { "elements": [], "content": " keyboard event." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Actions triggered using mouse events should have corresponding keyboard events to account for keyboard-only navigation."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingButton.stories.tsx" },
        "span": [2352, 2379],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport React from 'react';\nimport { LoadingButton } from './LoadingButton';\n\nconst meta: Meta<typeof LoadingButton> = {\n  title: 'Molecules/LoadingButton',\n  component: LoadingButton,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    isLoading: {\n      control: { type: 'boolean' },\n    },\n    spinnerSize: {\n      control: { type: 'select' },\n      options: ['xs', 'sm', 'md', 'lg'],\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    children: 'Click me',\n  },\n};\n\nexport const Loading: Story = {\n  args: {\n    isLoading: true,\n    children: 'Submit',\n  },\n};\n\nexport const CustomLoadingText: Story = {\n  args: {\n    isLoading: true,\n    loadingText: 'Processing...',\n    children: 'Pay Now',\n  },\n};\n\nexport const ListenNowButton: Story = {\n  args: {\n    isLoading: false,\n    children: 'Listen Now',\n  },\n};\n\nexport const ListenNowLoading: Story = {\n  args: {\n    isLoading: true,\n    loadingText: 'Opening...',\n    children: 'Listen Now',\n  },\n};\n\nexport const TipButton: Story = {\n  args: {\n    isLoading: false,\n    children: '$5 Tip',\n  },\n};\n\nexport const TipButtonLoading: Story = {\n  args: {\n    isLoading: true,\n    loadingText: 'Processing…',\n    children: '$5 Tip',\n  },\n};\n\nexport const SmallSpinner: Story = {\n  args: {\n    isLoading: true,\n    spinnerSize: 'xs',\n    children: 'Save',\n  },\n};\n\nexport const LargeSpinner: Story = {\n  args: {\n    isLoading: true,\n    spinnerSize: 'lg',\n    loadingText: 'Please wait...',\n    children: 'Submit Order',\n  },\n};\n\nexport const SecondaryVariant: Story = {\n  args: {\n    isLoading: true,\n    children: 'Save Draft',\n  },\n};\n\nexport const OutlineVariant: Story = {\n  args: {\n    isLoading: true,\n    children: 'Cancel Order',\n  },\n};\n\nexport const Disabled: Story = {\n  args: {\n    children: 'Disabled Button',\n  },\n};\n\nexport const LoadingDisabled: Story = {\n  args: {\n    isLoading: true,\n    children: 'This should show loading',\n  },\n};\n\nexport const InteractiveDemo: Story = {\n  render: function InteractiveDemoRender() {\n    const [isLoading, setIsLoading] = React.useState(false);\n\n    const handleClick = () => {\n      setIsLoading(true);\n      setTimeout(() => setIsLoading(false), 2000);\n    };\n\n    return (\n      <div onClick={handleClick}>\n        <LoadingButton isLoading={isLoading} loadingText='Processing...'>\n          {isLoading ? 'Processing...' : 'Click to test'}\n        </LoadingButton>\n      </div>\n    );\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<button>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<button>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingSkeleton.tsx" },
        "span": [3346, 3359],
        "sourceCode": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  lines?: number;\n  height?: string;\n  width?: string;\n  rounded?: 'sm' | 'md' | 'lg' | 'full';\n}\n\n// Valid Tailwind height/width classes for validation\nconst VALID_SIZE_CLASSES = new Set([\n  'h-1',\n  'h-2',\n  'h-3',\n  'h-4',\n  'h-5',\n  'h-6',\n  'h-7',\n  'h-8',\n  'h-9',\n  'h-10',\n  'h-11',\n  'h-12',\n  'h-16',\n  'h-20',\n  'h-24',\n  'h-32',\n  'h-40',\n  'h-48',\n  'h-56',\n  'h-64',\n  'h-72',\n  'h-80',\n  'h-96',\n  'h-auto',\n  'h-full',\n  'h-screen',\n  'w-1',\n  'w-2',\n  'w-3',\n  'w-4',\n  'w-5',\n  'w-6',\n  'w-7',\n  'w-8',\n  'w-9',\n  'w-10',\n  'w-11',\n  'w-12',\n  'w-16',\n  'w-20',\n  'w-24',\n  'w-32',\n  'w-40',\n  'w-48',\n  'w-56',\n  'w-64',\n  'w-72',\n  'w-80',\n  'w-96',\n  'w-auto',\n  'w-full',\n  'w-screen',\n  'w-1/2',\n  'w-1/3',\n  'w-2/3',\n  'w-1/4',\n  'w-2/4',\n  'w-3/4',\n  'w-1/5',\n  'w-2/5',\n  'w-3/5',\n  'w-4/5',\n  'w-1/6',\n  'w-2/6',\n  'w-3/6',\n  'w-4/6',\n  'w-5/6',\n]);\n\nfunction validateSizeClass(value: string, propName: string): string {\n  if (!VALID_SIZE_CLASSES.has(value)) {\n    console.warn(\n      `LoadingSkeleton: Invalid ${propName} class \"${value}\". Using default value instead.`\n    );\n    return propName === 'height' ? 'h-4' : 'w-full';\n  }\n  return value;\n}\n\nexport function LoadingSkeleton({\n  className,\n  lines = 1,\n  height = 'h-4',\n  width = 'w-full',\n  rounded = 'sm',\n}: LoadingSkeletonProps) {\n  // Validate height and width classes\n  const validatedHeight = validateSizeClass(height, 'height');\n  const validatedWidth = validateSizeClass(width, 'width');\n\n  const roundedClasses = {\n    sm: 'rounded-sm',\n    md: 'rounded-md',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  if (lines === 1) {\n    return (\n      <div\n        className={clsx(\n          'skeleton motion-reduce:animate-none',\n          roundedClasses[rounded],\n          validatedHeight,\n          validatedWidth,\n          className\n        )}\n        aria-hidden='true'\n      />\n    );\n  }\n\n  return (\n    <div className='space-y-2' aria-hidden='true'>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={clsx(\n            'skeleton motion-reduce:animate-none',\n            roundedClasses[rounded],\n            validatedHeight,\n            index === lines - 1 ? 'w-3/4' : validatedWidth,\n            className\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Specific skeleton components for common use cases\nexport function ProfileSkeleton() {\n  return (\n    <div className='flex flex-col items-center space-y-4 text-center'>\n      <div\n        className='h-32 w-32 rounded-full skeleton motion-reduce:animate-none'\n        aria-label='Loading artist profile image'\n        role='img'\n      />\n      <div className='space-y-2'>\n        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ButtonSkeleton() {\n  return (\n    <div\n      className='h-12 w-full max-w-sm rounded-lg skeleton motion-reduce:animate-none'\n      aria-label='Loading action button'\n      role='button'\n    />\n  );\n}\n\nexport function SocialBarSkeleton() {\n  return (\n    <div\n      className='flex flex-wrap justify-center gap-4'\n      aria-label='Loading social media links'\n      role='navigation'\n    >\n      {Array.from({ length: 4 }).map((_, index) => (\n        <div\n          key={index}\n          className='h-12 w-12 rounded-full skeleton motion-reduce:animate-none'\n          aria-label={`Loading social link ${index + 1}`}\n          role='button'\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function AuthFormSkeleton() {\n  return (\n    <div\n      className='space-y-4'\n      aria-label='Loading authentication form'\n      role='status'\n    >\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-12 w-full rounded-md skeleton motion-reduce:animate-none' />\n    </div>\n  );\n}\n\nexport function CardSkeleton() {\n  return (\n    <div className='w-full p-4 border border-subtle rounded-lg'>\n      <div className='space-y-3'>\n        <div className='flex items-center space-x-3'>\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        </div>\n        <div className='h-24 rounded-md skeleton motion-reduce:animate-none' />\n        <div className='flex justify-between'>\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ListSkeleton({ items = 3 }: { items?: number }) {\n  return (\n    <div className='space-y-4' aria-label='Loading list items' role='list'>\n      {Array.from({ length: items }).map((_, index) => (\n        <div\n          key={index}\n          className='flex items-center space-x-3 p-3 border border-subtle rounded-md'\n        >\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n          <div className='h-8 w-8 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function TableSkeleton({\n  rows = 5,\n  columns = 3,\n}: {\n  rows?: number;\n  columns?: number;\n}) {\n  return (\n    <div className='w-full overflow-hidden border border-subtle rounded-lg'>\n      {/* Header */}\n      <div className='flex border-b border-subtle bg-surface-1'>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className='flex-1 p-3'>\n            <div className='h-5 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className='flex border-b border-subtle last:border-b-0'\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div key={`cell-${rowIndex}-${colIndex}`} className='flex-1 p-3'>\n              <div\n                className={clsx(\n                  'h-4 rounded-sm skeleton motion-reduce:animate-none',\n                  colIndex === 0 ? 'w-3/4' : 'w-full'\n                )}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useFocusableInteractive",
      "severity": "warning",
      "description": "The HTML element with the interactive role 'button' is not focusable.",
      "message": [
        {
          "elements": [],
          "content": "The HTML element with the interactive role "
        },
        { "elements": ["Emphasis"], "content": "'button'" },
        { "elements": [], "content": " is not focusable." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "A non-interactive HTML element that is not focusable may not be reachable for users that rely on keyboard navigation, even with an added role like "
                },
                { "elements": ["Emphasis"], "content": "'button'" },
                { "elements": [], "content": "." }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Add a " },
                { "elements": ["Emphasis"], "content": "tabIndex" },
                {
                  "elements": [],
                  "content": " attribute to make this element focusable."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingSkeleton.tsx" },
        "span": [3208, 3366],
        "sourceCode": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  lines?: number;\n  height?: string;\n  width?: string;\n  rounded?: 'sm' | 'md' | 'lg' | 'full';\n}\n\n// Valid Tailwind height/width classes for validation\nconst VALID_SIZE_CLASSES = new Set([\n  'h-1',\n  'h-2',\n  'h-3',\n  'h-4',\n  'h-5',\n  'h-6',\n  'h-7',\n  'h-8',\n  'h-9',\n  'h-10',\n  'h-11',\n  'h-12',\n  'h-16',\n  'h-20',\n  'h-24',\n  'h-32',\n  'h-40',\n  'h-48',\n  'h-56',\n  'h-64',\n  'h-72',\n  'h-80',\n  'h-96',\n  'h-auto',\n  'h-full',\n  'h-screen',\n  'w-1',\n  'w-2',\n  'w-3',\n  'w-4',\n  'w-5',\n  'w-6',\n  'w-7',\n  'w-8',\n  'w-9',\n  'w-10',\n  'w-11',\n  'w-12',\n  'w-16',\n  'w-20',\n  'w-24',\n  'w-32',\n  'w-40',\n  'w-48',\n  'w-56',\n  'w-64',\n  'w-72',\n  'w-80',\n  'w-96',\n  'w-auto',\n  'w-full',\n  'w-screen',\n  'w-1/2',\n  'w-1/3',\n  'w-2/3',\n  'w-1/4',\n  'w-2/4',\n  'w-3/4',\n  'w-1/5',\n  'w-2/5',\n  'w-3/5',\n  'w-4/5',\n  'w-1/6',\n  'w-2/6',\n  'w-3/6',\n  'w-4/6',\n  'w-5/6',\n]);\n\nfunction validateSizeClass(value: string, propName: string): string {\n  if (!VALID_SIZE_CLASSES.has(value)) {\n    console.warn(\n      `LoadingSkeleton: Invalid ${propName} class \"${value}\". Using default value instead.`\n    );\n    return propName === 'height' ? 'h-4' : 'w-full';\n  }\n  return value;\n}\n\nexport function LoadingSkeleton({\n  className,\n  lines = 1,\n  height = 'h-4',\n  width = 'w-full',\n  rounded = 'sm',\n}: LoadingSkeletonProps) {\n  // Validate height and width classes\n  const validatedHeight = validateSizeClass(height, 'height');\n  const validatedWidth = validateSizeClass(width, 'width');\n\n  const roundedClasses = {\n    sm: 'rounded-sm',\n    md: 'rounded-md',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  if (lines === 1) {\n    return (\n      <div\n        className={clsx(\n          'skeleton motion-reduce:animate-none',\n          roundedClasses[rounded],\n          validatedHeight,\n          validatedWidth,\n          className\n        )}\n        aria-hidden='true'\n      />\n    );\n  }\n\n  return (\n    <div className='space-y-2' aria-hidden='true'>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={clsx(\n            'skeleton motion-reduce:animate-none',\n            roundedClasses[rounded],\n            validatedHeight,\n            index === lines - 1 ? 'w-3/4' : validatedWidth,\n            className\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Specific skeleton components for common use cases\nexport function ProfileSkeleton() {\n  return (\n    <div className='flex flex-col items-center space-y-4 text-center'>\n      <div\n        className='h-32 w-32 rounded-full skeleton motion-reduce:animate-none'\n        aria-label='Loading artist profile image'\n        role='img'\n      />\n      <div className='space-y-2'>\n        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ButtonSkeleton() {\n  return (\n    <div\n      className='h-12 w-full max-w-sm rounded-lg skeleton motion-reduce:animate-none'\n      aria-label='Loading action button'\n      role='button'\n    />\n  );\n}\n\nexport function SocialBarSkeleton() {\n  return (\n    <div\n      className='flex flex-wrap justify-center gap-4'\n      aria-label='Loading social media links'\n      role='navigation'\n    >\n      {Array.from({ length: 4 }).map((_, index) => (\n        <div\n          key={index}\n          className='h-12 w-12 rounded-full skeleton motion-reduce:animate-none'\n          aria-label={`Loading social link ${index + 1}`}\n          role='button'\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function AuthFormSkeleton() {\n  return (\n    <div\n      className='space-y-4'\n      aria-label='Loading authentication form'\n      role='status'\n    >\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-12 w-full rounded-md skeleton motion-reduce:animate-none' />\n    </div>\n  );\n}\n\nexport function CardSkeleton() {\n  return (\n    <div className='w-full p-4 border border-subtle rounded-lg'>\n      <div className='space-y-3'>\n        <div className='flex items-center space-x-3'>\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        </div>\n        <div className='h-24 rounded-md skeleton motion-reduce:animate-none' />\n        <div className='flex justify-between'>\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ListSkeleton({ items = 3 }: { items?: number }) {\n  return (\n    <div className='space-y-4' aria-label='Loading list items' role='list'>\n      {Array.from({ length: items }).map((_, index) => (\n        <div\n          key={index}\n          className='flex items-center space-x-3 p-3 border border-subtle rounded-md'\n        >\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n          <div className='h-8 w-8 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function TableSkeleton({\n  rows = 5,\n  columns = 3,\n}: {\n  rows?: number;\n  columns?: number;\n}) {\n  return (\n    <div className='w-full overflow-hidden border border-subtle rounded-lg'>\n      {/* Header */}\n      <div className='flex border-b border-subtle bg-surface-1'>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className='flex-1 p-3'>\n            <div className='h-5 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className='flex border-b border-subtle last:border-b-0'\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div key={`cell-${rowIndex}-${colIndex}`} className='flex-1 p-3'>\n              <div\n                className={clsx(\n                  'h-4 rounded-sm skeleton motion-reduce:animate-none',\n                  colIndex === 0 ? 'w-3/4' : 'w-full'\n                )}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<nav>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<nav>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingSkeleton.tsx" },
        "span": [3539, 3556],
        "sourceCode": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  lines?: number;\n  height?: string;\n  width?: string;\n  rounded?: 'sm' | 'md' | 'lg' | 'full';\n}\n\n// Valid Tailwind height/width classes for validation\nconst VALID_SIZE_CLASSES = new Set([\n  'h-1',\n  'h-2',\n  'h-3',\n  'h-4',\n  'h-5',\n  'h-6',\n  'h-7',\n  'h-8',\n  'h-9',\n  'h-10',\n  'h-11',\n  'h-12',\n  'h-16',\n  'h-20',\n  'h-24',\n  'h-32',\n  'h-40',\n  'h-48',\n  'h-56',\n  'h-64',\n  'h-72',\n  'h-80',\n  'h-96',\n  'h-auto',\n  'h-full',\n  'h-screen',\n  'w-1',\n  'w-2',\n  'w-3',\n  'w-4',\n  'w-5',\n  'w-6',\n  'w-7',\n  'w-8',\n  'w-9',\n  'w-10',\n  'w-11',\n  'w-12',\n  'w-16',\n  'w-20',\n  'w-24',\n  'w-32',\n  'w-40',\n  'w-48',\n  'w-56',\n  'w-64',\n  'w-72',\n  'w-80',\n  'w-96',\n  'w-auto',\n  'w-full',\n  'w-screen',\n  'w-1/2',\n  'w-1/3',\n  'w-2/3',\n  'w-1/4',\n  'w-2/4',\n  'w-3/4',\n  'w-1/5',\n  'w-2/5',\n  'w-3/5',\n  'w-4/5',\n  'w-1/6',\n  'w-2/6',\n  'w-3/6',\n  'w-4/6',\n  'w-5/6',\n]);\n\nfunction validateSizeClass(value: string, propName: string): string {\n  if (!VALID_SIZE_CLASSES.has(value)) {\n    console.warn(\n      `LoadingSkeleton: Invalid ${propName} class \"${value}\". Using default value instead.`\n    );\n    return propName === 'height' ? 'h-4' : 'w-full';\n  }\n  return value;\n}\n\nexport function LoadingSkeleton({\n  className,\n  lines = 1,\n  height = 'h-4',\n  width = 'w-full',\n  rounded = 'sm',\n}: LoadingSkeletonProps) {\n  // Validate height and width classes\n  const validatedHeight = validateSizeClass(height, 'height');\n  const validatedWidth = validateSizeClass(width, 'width');\n\n  const roundedClasses = {\n    sm: 'rounded-sm',\n    md: 'rounded-md',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  if (lines === 1) {\n    return (\n      <div\n        className={clsx(\n          'skeleton motion-reduce:animate-none',\n          roundedClasses[rounded],\n          validatedHeight,\n          validatedWidth,\n          className\n        )}\n        aria-hidden='true'\n      />\n    );\n  }\n\n  return (\n    <div className='space-y-2' aria-hidden='true'>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={clsx(\n            'skeleton motion-reduce:animate-none',\n            roundedClasses[rounded],\n            validatedHeight,\n            index === lines - 1 ? 'w-3/4' : validatedWidth,\n            className\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Specific skeleton components for common use cases\nexport function ProfileSkeleton() {\n  return (\n    <div className='flex flex-col items-center space-y-4 text-center'>\n      <div\n        className='h-32 w-32 rounded-full skeleton motion-reduce:animate-none'\n        aria-label='Loading artist profile image'\n        role='img'\n      />\n      <div className='space-y-2'>\n        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ButtonSkeleton() {\n  return (\n    <div\n      className='h-12 w-full max-w-sm rounded-lg skeleton motion-reduce:animate-none'\n      aria-label='Loading action button'\n      role='button'\n    />\n  );\n}\n\nexport function SocialBarSkeleton() {\n  return (\n    <div\n      className='flex flex-wrap justify-center gap-4'\n      aria-label='Loading social media links'\n      role='navigation'\n    >\n      {Array.from({ length: 4 }).map((_, index) => (\n        <div\n          key={index}\n          className='h-12 w-12 rounded-full skeleton motion-reduce:animate-none'\n          aria-label={`Loading social link ${index + 1}`}\n          role='button'\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function AuthFormSkeleton() {\n  return (\n    <div\n      className='space-y-4'\n      aria-label='Loading authentication form'\n      role='status'\n    >\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-12 w-full rounded-md skeleton motion-reduce:animate-none' />\n    </div>\n  );\n}\n\nexport function CardSkeleton() {\n  return (\n    <div className='w-full p-4 border border-subtle rounded-lg'>\n      <div className='space-y-3'>\n        <div className='flex items-center space-x-3'>\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        </div>\n        <div className='h-24 rounded-md skeleton motion-reduce:animate-none' />\n        <div className='flex justify-between'>\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ListSkeleton({ items = 3 }: { items?: number }) {\n  return (\n    <div className='space-y-4' aria-label='Loading list items' role='list'>\n      {Array.from({ length: items }).map((_, index) => (\n        <div\n          key={index}\n          className='flex items-center space-x-3 p-3 border border-subtle rounded-md'\n        >\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n          <div className='h-8 w-8 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function TableSkeleton({\n  rows = 5,\n  columns = 3,\n}: {\n  rows?: number;\n  columns?: number;\n}) {\n  return (\n    <div className='w-full overflow-hidden border border-subtle rounded-lg'>\n      {/* Header */}\n      <div className='flex border-b border-subtle bg-surface-1'>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className='flex-1 p-3'>\n            <div className='h-5 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className='flex border-b border-subtle last:border-b-0'\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div key={`cell-${rowIndex}-${colIndex}`} className='flex-1 p-3'>\n              <div\n                className={clsx(\n                  'h-4 rounded-sm skeleton motion-reduce:animate-none',\n                  colIndex === 0 ? 'w-3/4' : 'w-full'\n                )}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<button>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<button>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingSkeleton.tsx" },
        "span": [3800, 3813],
        "sourceCode": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  lines?: number;\n  height?: string;\n  width?: string;\n  rounded?: 'sm' | 'md' | 'lg' | 'full';\n}\n\n// Valid Tailwind height/width classes for validation\nconst VALID_SIZE_CLASSES = new Set([\n  'h-1',\n  'h-2',\n  'h-3',\n  'h-4',\n  'h-5',\n  'h-6',\n  'h-7',\n  'h-8',\n  'h-9',\n  'h-10',\n  'h-11',\n  'h-12',\n  'h-16',\n  'h-20',\n  'h-24',\n  'h-32',\n  'h-40',\n  'h-48',\n  'h-56',\n  'h-64',\n  'h-72',\n  'h-80',\n  'h-96',\n  'h-auto',\n  'h-full',\n  'h-screen',\n  'w-1',\n  'w-2',\n  'w-3',\n  'w-4',\n  'w-5',\n  'w-6',\n  'w-7',\n  'w-8',\n  'w-9',\n  'w-10',\n  'w-11',\n  'w-12',\n  'w-16',\n  'w-20',\n  'w-24',\n  'w-32',\n  'w-40',\n  'w-48',\n  'w-56',\n  'w-64',\n  'w-72',\n  'w-80',\n  'w-96',\n  'w-auto',\n  'w-full',\n  'w-screen',\n  'w-1/2',\n  'w-1/3',\n  'w-2/3',\n  'w-1/4',\n  'w-2/4',\n  'w-3/4',\n  'w-1/5',\n  'w-2/5',\n  'w-3/5',\n  'w-4/5',\n  'w-1/6',\n  'w-2/6',\n  'w-3/6',\n  'w-4/6',\n  'w-5/6',\n]);\n\nfunction validateSizeClass(value: string, propName: string): string {\n  if (!VALID_SIZE_CLASSES.has(value)) {\n    console.warn(\n      `LoadingSkeleton: Invalid ${propName} class \"${value}\". Using default value instead.`\n    );\n    return propName === 'height' ? 'h-4' : 'w-full';\n  }\n  return value;\n}\n\nexport function LoadingSkeleton({\n  className,\n  lines = 1,\n  height = 'h-4',\n  width = 'w-full',\n  rounded = 'sm',\n}: LoadingSkeletonProps) {\n  // Validate height and width classes\n  const validatedHeight = validateSizeClass(height, 'height');\n  const validatedWidth = validateSizeClass(width, 'width');\n\n  const roundedClasses = {\n    sm: 'rounded-sm',\n    md: 'rounded-md',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  if (lines === 1) {\n    return (\n      <div\n        className={clsx(\n          'skeleton motion-reduce:animate-none',\n          roundedClasses[rounded],\n          validatedHeight,\n          validatedWidth,\n          className\n        )}\n        aria-hidden='true'\n      />\n    );\n  }\n\n  return (\n    <div className='space-y-2' aria-hidden='true'>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={clsx(\n            'skeleton motion-reduce:animate-none',\n            roundedClasses[rounded],\n            validatedHeight,\n            index === lines - 1 ? 'w-3/4' : validatedWidth,\n            className\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Specific skeleton components for common use cases\nexport function ProfileSkeleton() {\n  return (\n    <div className='flex flex-col items-center space-y-4 text-center'>\n      <div\n        className='h-32 w-32 rounded-full skeleton motion-reduce:animate-none'\n        aria-label='Loading artist profile image'\n        role='img'\n      />\n      <div className='space-y-2'>\n        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ButtonSkeleton() {\n  return (\n    <div\n      className='h-12 w-full max-w-sm rounded-lg skeleton motion-reduce:animate-none'\n      aria-label='Loading action button'\n      role='button'\n    />\n  );\n}\n\nexport function SocialBarSkeleton() {\n  return (\n    <div\n      className='flex flex-wrap justify-center gap-4'\n      aria-label='Loading social media links'\n      role='navigation'\n    >\n      {Array.from({ length: 4 }).map((_, index) => (\n        <div\n          key={index}\n          className='h-12 w-12 rounded-full skeleton motion-reduce:animate-none'\n          aria-label={`Loading social link ${index + 1}`}\n          role='button'\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function AuthFormSkeleton() {\n  return (\n    <div\n      className='space-y-4'\n      aria-label='Loading authentication form'\n      role='status'\n    >\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-12 w-full rounded-md skeleton motion-reduce:animate-none' />\n    </div>\n  );\n}\n\nexport function CardSkeleton() {\n  return (\n    <div className='w-full p-4 border border-subtle rounded-lg'>\n      <div className='space-y-3'>\n        <div className='flex items-center space-x-3'>\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        </div>\n        <div className='h-24 rounded-md skeleton motion-reduce:animate-none' />\n        <div className='flex justify-between'>\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ListSkeleton({ items = 3 }: { items?: number }) {\n  return (\n    <div className='space-y-4' aria-label='Loading list items' role='list'>\n      {Array.from({ length: items }).map((_, index) => (\n        <div\n          key={index}\n          className='flex items-center space-x-3 p-3 border border-subtle rounded-md'\n        >\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n          <div className='h-8 w-8 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function TableSkeleton({\n  rows = 5,\n  columns = 3,\n}: {\n  rows?: number;\n  columns?: number;\n}) {\n  return (\n    <div className='w-full overflow-hidden border border-subtle rounded-lg'>\n      {/* Header */}\n      <div className='flex border-b border-subtle bg-surface-1'>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className='flex-1 p-3'>\n            <div className='h-5 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className='flex border-b border-subtle last:border-b-0'\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div key={`cell-${rowIndex}-${colIndex}`} className='flex-1 p-3'>\n              <div\n                className={clsx(\n                  'h-4 rounded-sm skeleton motion-reduce:animate-none',\n                  colIndex === 0 ? 'w-3/4' : 'w-full'\n                )}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useFocusableInteractive",
      "severity": "warning",
      "description": "The HTML element with the interactive role 'button' is not focusable.",
      "message": [
        {
          "elements": [],
          "content": "The HTML element with the interactive role "
        },
        { "elements": ["Emphasis"], "content": "'button'" },
        { "elements": [], "content": " is not focusable." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "A non-interactive HTML element that is not focusable may not be reachable for users that rely on keyboard navigation, even with an added role like "
                },
                { "elements": ["Emphasis"], "content": "'button'" },
                { "elements": [], "content": "." }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Add a " },
                { "elements": ["Emphasis"], "content": "tabIndex" },
                {
                  "elements": [],
                  "content": " attribute to make this element focusable."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingSkeleton.tsx" },
        "span": [3624, 3824],
        "sourceCode": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  lines?: number;\n  height?: string;\n  width?: string;\n  rounded?: 'sm' | 'md' | 'lg' | 'full';\n}\n\n// Valid Tailwind height/width classes for validation\nconst VALID_SIZE_CLASSES = new Set([\n  'h-1',\n  'h-2',\n  'h-3',\n  'h-4',\n  'h-5',\n  'h-6',\n  'h-7',\n  'h-8',\n  'h-9',\n  'h-10',\n  'h-11',\n  'h-12',\n  'h-16',\n  'h-20',\n  'h-24',\n  'h-32',\n  'h-40',\n  'h-48',\n  'h-56',\n  'h-64',\n  'h-72',\n  'h-80',\n  'h-96',\n  'h-auto',\n  'h-full',\n  'h-screen',\n  'w-1',\n  'w-2',\n  'w-3',\n  'w-4',\n  'w-5',\n  'w-6',\n  'w-7',\n  'w-8',\n  'w-9',\n  'w-10',\n  'w-11',\n  'w-12',\n  'w-16',\n  'w-20',\n  'w-24',\n  'w-32',\n  'w-40',\n  'w-48',\n  'w-56',\n  'w-64',\n  'w-72',\n  'w-80',\n  'w-96',\n  'w-auto',\n  'w-full',\n  'w-screen',\n  'w-1/2',\n  'w-1/3',\n  'w-2/3',\n  'w-1/4',\n  'w-2/4',\n  'w-3/4',\n  'w-1/5',\n  'w-2/5',\n  'w-3/5',\n  'w-4/5',\n  'w-1/6',\n  'w-2/6',\n  'w-3/6',\n  'w-4/6',\n  'w-5/6',\n]);\n\nfunction validateSizeClass(value: string, propName: string): string {\n  if (!VALID_SIZE_CLASSES.has(value)) {\n    console.warn(\n      `LoadingSkeleton: Invalid ${propName} class \"${value}\". Using default value instead.`\n    );\n    return propName === 'height' ? 'h-4' : 'w-full';\n  }\n  return value;\n}\n\nexport function LoadingSkeleton({\n  className,\n  lines = 1,\n  height = 'h-4',\n  width = 'w-full',\n  rounded = 'sm',\n}: LoadingSkeletonProps) {\n  // Validate height and width classes\n  const validatedHeight = validateSizeClass(height, 'height');\n  const validatedWidth = validateSizeClass(width, 'width');\n\n  const roundedClasses = {\n    sm: 'rounded-sm',\n    md: 'rounded-md',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  if (lines === 1) {\n    return (\n      <div\n        className={clsx(\n          'skeleton motion-reduce:animate-none',\n          roundedClasses[rounded],\n          validatedHeight,\n          validatedWidth,\n          className\n        )}\n        aria-hidden='true'\n      />\n    );\n  }\n\n  return (\n    <div className='space-y-2' aria-hidden='true'>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={clsx(\n            'skeleton motion-reduce:animate-none',\n            roundedClasses[rounded],\n            validatedHeight,\n            index === lines - 1 ? 'w-3/4' : validatedWidth,\n            className\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Specific skeleton components for common use cases\nexport function ProfileSkeleton() {\n  return (\n    <div className='flex flex-col items-center space-y-4 text-center'>\n      <div\n        className='h-32 w-32 rounded-full skeleton motion-reduce:animate-none'\n        aria-label='Loading artist profile image'\n        role='img'\n      />\n      <div className='space-y-2'>\n        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ButtonSkeleton() {\n  return (\n    <div\n      className='h-12 w-full max-w-sm rounded-lg skeleton motion-reduce:animate-none'\n      aria-label='Loading action button'\n      role='button'\n    />\n  );\n}\n\nexport function SocialBarSkeleton() {\n  return (\n    <div\n      className='flex flex-wrap justify-center gap-4'\n      aria-label='Loading social media links'\n      role='navigation'\n    >\n      {Array.from({ length: 4 }).map((_, index) => (\n        <div\n          key={index}\n          className='h-12 w-12 rounded-full skeleton motion-reduce:animate-none'\n          aria-label={`Loading social link ${index + 1}`}\n          role='button'\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function AuthFormSkeleton() {\n  return (\n    <div\n      className='space-y-4'\n      aria-label='Loading authentication form'\n      role='status'\n    >\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-12 w-full rounded-md skeleton motion-reduce:animate-none' />\n    </div>\n  );\n}\n\nexport function CardSkeleton() {\n  return (\n    <div className='w-full p-4 border border-subtle rounded-lg'>\n      <div className='space-y-3'>\n        <div className='flex items-center space-x-3'>\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        </div>\n        <div className='h-24 rounded-md skeleton motion-reduce:animate-none' />\n        <div className='flex justify-between'>\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ListSkeleton({ items = 3 }: { items?: number }) {\n  return (\n    <div className='space-y-4' aria-label='Loading list items' role='list'>\n      {Array.from({ length: items }).map((_, index) => (\n        <div\n          key={index}\n          className='flex items-center space-x-3 p-3 border border-subtle rounded-md'\n        >\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n          <div className='h-8 w-8 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function TableSkeleton({\n  rows = 5,\n  columns = 3,\n}: {\n  rows?: number;\n  columns?: number;\n}) {\n  return (\n    <div className='w-full overflow-hidden border border-subtle rounded-lg'>\n      {/* Header */}\n      <div className='flex border-b border-subtle bg-surface-1'>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className='flex-1 p-3'>\n            <div className='h-5 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className='flex border-b border-subtle last:border-b-0'\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div key={`cell-${rowIndex}-${colIndex}`} className='flex-1 p-3'>\n              <div\n                className={clsx(\n                  'h-4 rounded-sm skeleton motion-reduce:animate-none',\n                  colIndex === 0 ? 'w-3/4' : 'w-full'\n                )}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingSkeleton.tsx" },
        "span": [3992, 4005],
        "sourceCode": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  lines?: number;\n  height?: string;\n  width?: string;\n  rounded?: 'sm' | 'md' | 'lg' | 'full';\n}\n\n// Valid Tailwind height/width classes for validation\nconst VALID_SIZE_CLASSES = new Set([\n  'h-1',\n  'h-2',\n  'h-3',\n  'h-4',\n  'h-5',\n  'h-6',\n  'h-7',\n  'h-8',\n  'h-9',\n  'h-10',\n  'h-11',\n  'h-12',\n  'h-16',\n  'h-20',\n  'h-24',\n  'h-32',\n  'h-40',\n  'h-48',\n  'h-56',\n  'h-64',\n  'h-72',\n  'h-80',\n  'h-96',\n  'h-auto',\n  'h-full',\n  'h-screen',\n  'w-1',\n  'w-2',\n  'w-3',\n  'w-4',\n  'w-5',\n  'w-6',\n  'w-7',\n  'w-8',\n  'w-9',\n  'w-10',\n  'w-11',\n  'w-12',\n  'w-16',\n  'w-20',\n  'w-24',\n  'w-32',\n  'w-40',\n  'w-48',\n  'w-56',\n  'w-64',\n  'w-72',\n  'w-80',\n  'w-96',\n  'w-auto',\n  'w-full',\n  'w-screen',\n  'w-1/2',\n  'w-1/3',\n  'w-2/3',\n  'w-1/4',\n  'w-2/4',\n  'w-3/4',\n  'w-1/5',\n  'w-2/5',\n  'w-3/5',\n  'w-4/5',\n  'w-1/6',\n  'w-2/6',\n  'w-3/6',\n  'w-4/6',\n  'w-5/6',\n]);\n\nfunction validateSizeClass(value: string, propName: string): string {\n  if (!VALID_SIZE_CLASSES.has(value)) {\n    console.warn(\n      `LoadingSkeleton: Invalid ${propName} class \"${value}\". Using default value instead.`\n    );\n    return propName === 'height' ? 'h-4' : 'w-full';\n  }\n  return value;\n}\n\nexport function LoadingSkeleton({\n  className,\n  lines = 1,\n  height = 'h-4',\n  width = 'w-full',\n  rounded = 'sm',\n}: LoadingSkeletonProps) {\n  // Validate height and width classes\n  const validatedHeight = validateSizeClass(height, 'height');\n  const validatedWidth = validateSizeClass(width, 'width');\n\n  const roundedClasses = {\n    sm: 'rounded-sm',\n    md: 'rounded-md',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  if (lines === 1) {\n    return (\n      <div\n        className={clsx(\n          'skeleton motion-reduce:animate-none',\n          roundedClasses[rounded],\n          validatedHeight,\n          validatedWidth,\n          className\n        )}\n        aria-hidden='true'\n      />\n    );\n  }\n\n  return (\n    <div className='space-y-2' aria-hidden='true'>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={clsx(\n            'skeleton motion-reduce:animate-none',\n            roundedClasses[rounded],\n            validatedHeight,\n            index === lines - 1 ? 'w-3/4' : validatedWidth,\n            className\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Specific skeleton components for common use cases\nexport function ProfileSkeleton() {\n  return (\n    <div className='flex flex-col items-center space-y-4 text-center'>\n      <div\n        className='h-32 w-32 rounded-full skeleton motion-reduce:animate-none'\n        aria-label='Loading artist profile image'\n        role='img'\n      />\n      <div className='space-y-2'>\n        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ButtonSkeleton() {\n  return (\n    <div\n      className='h-12 w-full max-w-sm rounded-lg skeleton motion-reduce:animate-none'\n      aria-label='Loading action button'\n      role='button'\n    />\n  );\n}\n\nexport function SocialBarSkeleton() {\n  return (\n    <div\n      className='flex flex-wrap justify-center gap-4'\n      aria-label='Loading social media links'\n      role='navigation'\n    >\n      {Array.from({ length: 4 }).map((_, index) => (\n        <div\n          key={index}\n          className='h-12 w-12 rounded-full skeleton motion-reduce:animate-none'\n          aria-label={`Loading social link ${index + 1}`}\n          role='button'\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function AuthFormSkeleton() {\n  return (\n    <div\n      className='space-y-4'\n      aria-label='Loading authentication form'\n      role='status'\n    >\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-12 w-full rounded-md skeleton motion-reduce:animate-none' />\n    </div>\n  );\n}\n\nexport function CardSkeleton() {\n  return (\n    <div className='w-full p-4 border border-subtle rounded-lg'>\n      <div className='space-y-3'>\n        <div className='flex items-center space-x-3'>\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        </div>\n        <div className='h-24 rounded-md skeleton motion-reduce:animate-none' />\n        <div className='flex justify-between'>\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ListSkeleton({ items = 3 }: { items?: number }) {\n  return (\n    <div className='space-y-4' aria-label='Loading list items' role='list'>\n      {Array.from({ length: items }).map((_, index) => (\n        <div\n          key={index}\n          className='flex items-center space-x-3 p-3 border border-subtle rounded-md'\n        >\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n          <div className='h-8 w-8 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function TableSkeleton({\n  rows = 5,\n  columns = 3,\n}: {\n  rows?: number;\n  columns?: number;\n}) {\n  return (\n    <div className='w-full overflow-hidden border border-subtle rounded-lg'>\n      {/* Header */}\n      <div className='flex border-b border-subtle bg-surface-1'>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className='flex-1 p-3'>\n            <div className='h-5 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className='flex border-b border-subtle last:border-b-0'\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div key={`cell-${rowIndex}-${colIndex}`} className='flex-1 p-3'>\n              <div\n                className={clsx(\n                  'h-4 rounded-sm skeleton motion-reduce:animate-none',\n                  colIndex === 0 ? 'w-3/4' : 'w-full'\n                )}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<ol>\n<ul>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<ol>\n<ul>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingSkeleton.tsx" },
        "span": [5398, 5409],
        "sourceCode": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  lines?: number;\n  height?: string;\n  width?: string;\n  rounded?: 'sm' | 'md' | 'lg' | 'full';\n}\n\n// Valid Tailwind height/width classes for validation\nconst VALID_SIZE_CLASSES = new Set([\n  'h-1',\n  'h-2',\n  'h-3',\n  'h-4',\n  'h-5',\n  'h-6',\n  'h-7',\n  'h-8',\n  'h-9',\n  'h-10',\n  'h-11',\n  'h-12',\n  'h-16',\n  'h-20',\n  'h-24',\n  'h-32',\n  'h-40',\n  'h-48',\n  'h-56',\n  'h-64',\n  'h-72',\n  'h-80',\n  'h-96',\n  'h-auto',\n  'h-full',\n  'h-screen',\n  'w-1',\n  'w-2',\n  'w-3',\n  'w-4',\n  'w-5',\n  'w-6',\n  'w-7',\n  'w-8',\n  'w-9',\n  'w-10',\n  'w-11',\n  'w-12',\n  'w-16',\n  'w-20',\n  'w-24',\n  'w-32',\n  'w-40',\n  'w-48',\n  'w-56',\n  'w-64',\n  'w-72',\n  'w-80',\n  'w-96',\n  'w-auto',\n  'w-full',\n  'w-screen',\n  'w-1/2',\n  'w-1/3',\n  'w-2/3',\n  'w-1/4',\n  'w-2/4',\n  'w-3/4',\n  'w-1/5',\n  'w-2/5',\n  'w-3/5',\n  'w-4/5',\n  'w-1/6',\n  'w-2/6',\n  'w-3/6',\n  'w-4/6',\n  'w-5/6',\n]);\n\nfunction validateSizeClass(value: string, propName: string): string {\n  if (!VALID_SIZE_CLASSES.has(value)) {\n    console.warn(\n      `LoadingSkeleton: Invalid ${propName} class \"${value}\". Using default value instead.`\n    );\n    return propName === 'height' ? 'h-4' : 'w-full';\n  }\n  return value;\n}\n\nexport function LoadingSkeleton({\n  className,\n  lines = 1,\n  height = 'h-4',\n  width = 'w-full',\n  rounded = 'sm',\n}: LoadingSkeletonProps) {\n  // Validate height and width classes\n  const validatedHeight = validateSizeClass(height, 'height');\n  const validatedWidth = validateSizeClass(width, 'width');\n\n  const roundedClasses = {\n    sm: 'rounded-sm',\n    md: 'rounded-md',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  if (lines === 1) {\n    return (\n      <div\n        className={clsx(\n          'skeleton motion-reduce:animate-none',\n          roundedClasses[rounded],\n          validatedHeight,\n          validatedWidth,\n          className\n        )}\n        aria-hidden='true'\n      />\n    );\n  }\n\n  return (\n    <div className='space-y-2' aria-hidden='true'>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={clsx(\n            'skeleton motion-reduce:animate-none',\n            roundedClasses[rounded],\n            validatedHeight,\n            index === lines - 1 ? 'w-3/4' : validatedWidth,\n            className\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Specific skeleton components for common use cases\nexport function ProfileSkeleton() {\n  return (\n    <div className='flex flex-col items-center space-y-4 text-center'>\n      <div\n        className='h-32 w-32 rounded-full skeleton motion-reduce:animate-none'\n        aria-label='Loading artist profile image'\n        role='img'\n      />\n      <div className='space-y-2'>\n        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ButtonSkeleton() {\n  return (\n    <div\n      className='h-12 w-full max-w-sm rounded-lg skeleton motion-reduce:animate-none'\n      aria-label='Loading action button'\n      role='button'\n    />\n  );\n}\n\nexport function SocialBarSkeleton() {\n  return (\n    <div\n      className='flex flex-wrap justify-center gap-4'\n      aria-label='Loading social media links'\n      role='navigation'\n    >\n      {Array.from({ length: 4 }).map((_, index) => (\n        <div\n          key={index}\n          className='h-12 w-12 rounded-full skeleton motion-reduce:animate-none'\n          aria-label={`Loading social link ${index + 1}`}\n          role='button'\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function AuthFormSkeleton() {\n  return (\n    <div\n      className='space-y-4'\n      aria-label='Loading authentication form'\n      role='status'\n    >\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-12 w-full rounded-md skeleton motion-reduce:animate-none' />\n    </div>\n  );\n}\n\nexport function CardSkeleton() {\n  return (\n    <div className='w-full p-4 border border-subtle rounded-lg'>\n      <div className='space-y-3'>\n        <div className='flex items-center space-x-3'>\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        </div>\n        <div className='h-24 rounded-md skeleton motion-reduce:animate-none' />\n        <div className='flex justify-between'>\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ListSkeleton({ items = 3 }: { items?: number }) {\n  return (\n    <div className='space-y-4' aria-label='Loading list items' role='list'>\n      {Array.from({ length: items }).map((_, index) => (\n        <div\n          key={index}\n          className='flex items-center space-x-3 p-3 border border-subtle rounded-md'\n        >\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n          <div className='h-8 w-8 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function TableSkeleton({\n  rows = 5,\n  columns = 3,\n}: {\n  rows?: number;\n  columns?: number;\n}) {\n  return (\n    <div className='w-full overflow-hidden border border-subtle rounded-lg'>\n      {/* Header */}\n      <div className='flex border-b border-subtle bg-surface-1'>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className='flex-1 p-3'>\n            <div className='h-5 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className='flex border-b border-subtle last:border-b-0'\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div key={`cell-${rowIndex}-${colIndex}`} className='flex-1 p-3'>\n              <div\n                className={clsx(\n                  'h-4 rounded-sm skeleton motion-reduce:animate-none',\n                  colIndex === 0 ? 'w-3/4' : 'w-full'\n                )}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAriaRole",
      "severity": "warning",
      "description": "Enforce that elements with ARIA roles must use a valid, non-abstract ARIA role.",
      "message": [
        {
          "elements": [],
          "content": "Enforce that elements with ARIA roles must use a valid, non-abstract ARIA role."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://www.w3.org/TR/wai-aria/#namefromauthor"
                      }
                    }
                  ],
                  "content": "WAI-ARIA"
                },
                {
                  "elements": [],
                  "content": " for valid roles or provide options accordingly."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Unsafe fix: Remove the invalid "
                },
                { "elements": ["Emphasis"], "content": "role" },
                {
                  "elements": [],
                  "content": " attribute.\n Check the list of all "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://www.w3.org/TR/wai-aria/#role_definitions"
                      }
                    }
                  ],
                  "content": "valid"
                },
                { "elements": [], "content": " role attributes." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 62] } } },
                { "equalLines": { "line_count": 149 } },
                { "diffOp": { "equal": { "range": [62, 195] } } },
                { "diffOp": { "delete": { "range": [195, 217] } } },
                { "diffOp": { "equal": { "range": [217, 241] } } },
                { "equalLines": { "line_count": 131 } },
                { "diffOp": { "equal": { "range": [241, 248] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingSkeleton.tsx" },
        "span": [2797, 2955],
        "sourceCode": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  lines?: number;\n  height?: string;\n  width?: string;\n  rounded?: 'sm' | 'md' | 'lg' | 'full';\n}\n\n// Valid Tailwind height/width classes for validation\nconst VALID_SIZE_CLASSES = new Set([\n  'h-1',\n  'h-2',\n  'h-3',\n  'h-4',\n  'h-5',\n  'h-6',\n  'h-7',\n  'h-8',\n  'h-9',\n  'h-10',\n  'h-11',\n  'h-12',\n  'h-16',\n  'h-20',\n  'h-24',\n  'h-32',\n  'h-40',\n  'h-48',\n  'h-56',\n  'h-64',\n  'h-72',\n  'h-80',\n  'h-96',\n  'h-auto',\n  'h-full',\n  'h-screen',\n  'w-1',\n  'w-2',\n  'w-3',\n  'w-4',\n  'w-5',\n  'w-6',\n  'w-7',\n  'w-8',\n  'w-9',\n  'w-10',\n  'w-11',\n  'w-12',\n  'w-16',\n  'w-20',\n  'w-24',\n  'w-32',\n  'w-40',\n  'w-48',\n  'w-56',\n  'w-64',\n  'w-72',\n  'w-80',\n  'w-96',\n  'w-auto',\n  'w-full',\n  'w-screen',\n  'w-1/2',\n  'w-1/3',\n  'w-2/3',\n  'w-1/4',\n  'w-2/4',\n  'w-3/4',\n  'w-1/5',\n  'w-2/5',\n  'w-3/5',\n  'w-4/5',\n  'w-1/6',\n  'w-2/6',\n  'w-3/6',\n  'w-4/6',\n  'w-5/6',\n]);\n\nfunction validateSizeClass(value: string, propName: string): string {\n  if (!VALID_SIZE_CLASSES.has(value)) {\n    console.warn(\n      `LoadingSkeleton: Invalid ${propName} class \"${value}\". Using default value instead.`\n    );\n    return propName === 'height' ? 'h-4' : 'w-full';\n  }\n  return value;\n}\n\nexport function LoadingSkeleton({\n  className,\n  lines = 1,\n  height = 'h-4',\n  width = 'w-full',\n  rounded = 'sm',\n}: LoadingSkeletonProps) {\n  // Validate height and width classes\n  const validatedHeight = validateSizeClass(height, 'height');\n  const validatedWidth = validateSizeClass(width, 'width');\n\n  const roundedClasses = {\n    sm: 'rounded-sm',\n    md: 'rounded-md',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  if (lines === 1) {\n    return (\n      <div\n        className={clsx(\n          'skeleton motion-reduce:animate-none',\n          roundedClasses[rounded],\n          validatedHeight,\n          validatedWidth,\n          className\n        )}\n        aria-hidden='true'\n      />\n    );\n  }\n\n  return (\n    <div className='space-y-2' aria-hidden='true'>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={clsx(\n            'skeleton motion-reduce:animate-none',\n            roundedClasses[rounded],\n            validatedHeight,\n            index === lines - 1 ? 'w-3/4' : validatedWidth,\n            className\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Specific skeleton components for common use cases\nexport function ProfileSkeleton() {\n  return (\n    <div className='flex flex-col items-center space-y-4 text-center'>\n      <div\n        className='h-32 w-32 rounded-full skeleton motion-reduce:animate-none'\n        aria-label='Loading artist profile image'\n        role='img'\n      />\n      <div className='space-y-2'>\n        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ButtonSkeleton() {\n  return (\n    <div\n      className='h-12 w-full max-w-sm rounded-lg skeleton motion-reduce:animate-none'\n      aria-label='Loading action button'\n      role='button'\n    />\n  );\n}\n\nexport function SocialBarSkeleton() {\n  return (\n    <div\n      className='flex flex-wrap justify-center gap-4'\n      aria-label='Loading social media links'\n      role='navigation'\n    >\n      {Array.from({ length: 4 }).map((_, index) => (\n        <div\n          key={index}\n          className='h-12 w-12 rounded-full skeleton motion-reduce:animate-none'\n          aria-label={`Loading social link ${index + 1}`}\n          role='button'\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function AuthFormSkeleton() {\n  return (\n    <div\n      className='space-y-4'\n      aria-label='Loading authentication form'\n      role='status'\n    >\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-12 w-full rounded-md skeleton motion-reduce:animate-none' />\n    </div>\n  );\n}\n\nexport function CardSkeleton() {\n  return (\n    <div className='w-full p-4 border border-subtle rounded-lg'>\n      <div className='space-y-3'>\n        <div className='flex items-center space-x-3'>\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        </div>\n        <div className='h-24 rounded-md skeleton motion-reduce:animate-none' />\n        <div className='flex justify-between'>\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ListSkeleton({ items = 3 }: { items?: number }) {\n  return (\n    <div className='space-y-4' aria-label='Loading list items' role='list'>\n      {Array.from({ length: items }).map((_, index) => (\n        <div\n          key={index}\n          className='flex items-center space-x-3 p-3 border border-subtle rounded-md'\n        >\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n          <div className='h-8 w-8 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function TableSkeleton({\n  rows = 5,\n  columns = 3,\n}: {\n  rows?: number;\n  columns?: number;\n}) {\n  return (\n    <div className='w-full overflow-hidden border border-subtle rounded-lg'>\n      {/* Header */}\n      <div className='flex border-b border-subtle bg-surface-1'>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className='flex-1 p-3'>\n            <div className='h-5 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className='flex border-b border-subtle last:border-b-0'\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div key={`cell-${rowIndex}-${colIndex}`} className='flex-1 p-3'>\n              <div\n                className={clsx(\n                  'h-4 rounded-sm skeleton motion-reduce:animate-none',\n                  colIndex === 0 ? 'w-3/4' : 'w-full'\n                )}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingSkeleton.tsx" },
        "span": [2964, 3125],
        "sourceCode": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  lines?: number;\n  height?: string;\n  width?: string;\n  rounded?: 'sm' | 'md' | 'lg' | 'full';\n}\n\n// Valid Tailwind height/width classes for validation\nconst VALID_SIZE_CLASSES = new Set([\n  'h-1',\n  'h-2',\n  'h-3',\n  'h-4',\n  'h-5',\n  'h-6',\n  'h-7',\n  'h-8',\n  'h-9',\n  'h-10',\n  'h-11',\n  'h-12',\n  'h-16',\n  'h-20',\n  'h-24',\n  'h-32',\n  'h-40',\n  'h-48',\n  'h-56',\n  'h-64',\n  'h-72',\n  'h-80',\n  'h-96',\n  'h-auto',\n  'h-full',\n  'h-screen',\n  'w-1',\n  'w-2',\n  'w-3',\n  'w-4',\n  'w-5',\n  'w-6',\n  'w-7',\n  'w-8',\n  'w-9',\n  'w-10',\n  'w-11',\n  'w-12',\n  'w-16',\n  'w-20',\n  'w-24',\n  'w-32',\n  'w-40',\n  'w-48',\n  'w-56',\n  'w-64',\n  'w-72',\n  'w-80',\n  'w-96',\n  'w-auto',\n  'w-full',\n  'w-screen',\n  'w-1/2',\n  'w-1/3',\n  'w-2/3',\n  'w-1/4',\n  'w-2/4',\n  'w-3/4',\n  'w-1/5',\n  'w-2/5',\n  'w-3/5',\n  'w-4/5',\n  'w-1/6',\n  'w-2/6',\n  'w-3/6',\n  'w-4/6',\n  'w-5/6',\n]);\n\nfunction validateSizeClass(value: string, propName: string): string {\n  if (!VALID_SIZE_CLASSES.has(value)) {\n    console.warn(\n      `LoadingSkeleton: Invalid ${propName} class \"${value}\". Using default value instead.`\n    );\n    return propName === 'height' ? 'h-4' : 'w-full';\n  }\n  return value;\n}\n\nexport function LoadingSkeleton({\n  className,\n  lines = 1,\n  height = 'h-4',\n  width = 'w-full',\n  rounded = 'sm',\n}: LoadingSkeletonProps) {\n  // Validate height and width classes\n  const validatedHeight = validateSizeClass(height, 'height');\n  const validatedWidth = validateSizeClass(width, 'width');\n\n  const roundedClasses = {\n    sm: 'rounded-sm',\n    md: 'rounded-md',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  if (lines === 1) {\n    return (\n      <div\n        className={clsx(\n          'skeleton motion-reduce:animate-none',\n          roundedClasses[rounded],\n          validatedHeight,\n          validatedWidth,\n          className\n        )}\n        aria-hidden='true'\n      />\n    );\n  }\n\n  return (\n    <div className='space-y-2' aria-hidden='true'>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={clsx(\n            'skeleton motion-reduce:animate-none',\n            roundedClasses[rounded],\n            validatedHeight,\n            index === lines - 1 ? 'w-3/4' : validatedWidth,\n            className\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Specific skeleton components for common use cases\nexport function ProfileSkeleton() {\n  return (\n    <div className='flex flex-col items-center space-y-4 text-center'>\n      <div\n        className='h-32 w-32 rounded-full skeleton motion-reduce:animate-none'\n        aria-label='Loading artist profile image'\n        role='img'\n      />\n      <div className='space-y-2'>\n        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ButtonSkeleton() {\n  return (\n    <div\n      className='h-12 w-full max-w-sm rounded-lg skeleton motion-reduce:animate-none'\n      aria-label='Loading action button'\n      role='button'\n    />\n  );\n}\n\nexport function SocialBarSkeleton() {\n  return (\n    <div\n      className='flex flex-wrap justify-center gap-4'\n      aria-label='Loading social media links'\n      role='navigation'\n    >\n      {Array.from({ length: 4 }).map((_, index) => (\n        <div\n          key={index}\n          className='h-12 w-12 rounded-full skeleton motion-reduce:animate-none'\n          aria-label={`Loading social link ${index + 1}`}\n          role='button'\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function AuthFormSkeleton() {\n  return (\n    <div\n      className='space-y-4'\n      aria-label='Loading authentication form'\n      role='status'\n    >\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-12 w-full rounded-md skeleton motion-reduce:animate-none' />\n    </div>\n  );\n}\n\nexport function CardSkeleton() {\n  return (\n    <div className='w-full p-4 border border-subtle rounded-lg'>\n      <div className='space-y-3'>\n        <div className='flex items-center space-x-3'>\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        </div>\n        <div className='h-24 rounded-md skeleton motion-reduce:animate-none' />\n        <div className='flex justify-between'>\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ListSkeleton({ items = 3 }: { items?: number }) {\n  return (\n    <div className='space-y-4' aria-label='Loading list items' role='list'>\n      {Array.from({ length: items }).map((_, index) => (\n        <div\n          key={index}\n          className='flex items-center space-x-3 p-3 border border-subtle rounded-md'\n        >\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n          <div className='h-8 w-8 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function TableSkeleton({\n  rows = 5,\n  columns = 3,\n}: {\n  rows?: number;\n  columns?: number;\n}) {\n  return (\n    <div className='w-full overflow-hidden border border-subtle rounded-lg'>\n      {/* Header */}\n      <div className='flex border-b border-subtle bg-surface-1'>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className='flex-1 p-3'>\n            <div className='h-5 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className='flex border-b border-subtle last:border-b-0'\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div key={`cell-${rowIndex}-${colIndex}`} className='flex-1 p-3'>\n              <div\n                className={clsx(\n                  'h-4 rounded-sm skeleton motion-reduce:animate-none',\n                  colIndex === 0 ? 'w-3/4' : 'w-full'\n                )}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useValidAriaRole",
      "severity": "warning",
      "description": "Enforce that elements with ARIA roles must use a valid, non-abstract ARIA role.",
      "message": [
        {
          "elements": [],
          "content": "Enforce that elements with ARIA roles must use a valid, non-abstract ARIA role."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Check " },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://www.w3.org/TR/wai-aria/#namefromauthor"
                      }
                    }
                  ],
                  "content": "WAI-ARIA"
                },
                {
                  "elements": [],
                  "content": " for valid roles or provide options accordingly."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Unsafe fix: Remove the invalid "
                },
                { "elements": ["Emphasis"], "content": "role" },
                {
                  "elements": [],
                  "content": " attribute.\n Check the list of all "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://www.w3.org/TR/wai-aria/#role_definitions"
                      }
                    }
                  ],
                  "content": "valid"
                },
                { "elements": [], "content": " role attributes." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 62] } } },
                { "equalLines": { "line_count": 154 } },
                { "diffOp": { "equal": { "range": [62, 198] } } },
                { "diffOp": { "delete": { "range": [198, 220] } } },
                { "diffOp": { "equal": { "range": [220, 244] } } },
                { "equalLines": { "line_count": 126 } },
                { "diffOp": { "equal": { "range": [244, 251] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingSkeleton.tsx" },
        "span": [2964, 3125],
        "sourceCode": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  lines?: number;\n  height?: string;\n  width?: string;\n  rounded?: 'sm' | 'md' | 'lg' | 'full';\n}\n\n// Valid Tailwind height/width classes for validation\nconst VALID_SIZE_CLASSES = new Set([\n  'h-1',\n  'h-2',\n  'h-3',\n  'h-4',\n  'h-5',\n  'h-6',\n  'h-7',\n  'h-8',\n  'h-9',\n  'h-10',\n  'h-11',\n  'h-12',\n  'h-16',\n  'h-20',\n  'h-24',\n  'h-32',\n  'h-40',\n  'h-48',\n  'h-56',\n  'h-64',\n  'h-72',\n  'h-80',\n  'h-96',\n  'h-auto',\n  'h-full',\n  'h-screen',\n  'w-1',\n  'w-2',\n  'w-3',\n  'w-4',\n  'w-5',\n  'w-6',\n  'w-7',\n  'w-8',\n  'w-9',\n  'w-10',\n  'w-11',\n  'w-12',\n  'w-16',\n  'w-20',\n  'w-24',\n  'w-32',\n  'w-40',\n  'w-48',\n  'w-56',\n  'w-64',\n  'w-72',\n  'w-80',\n  'w-96',\n  'w-auto',\n  'w-full',\n  'w-screen',\n  'w-1/2',\n  'w-1/3',\n  'w-2/3',\n  'w-1/4',\n  'w-2/4',\n  'w-3/4',\n  'w-1/5',\n  'w-2/5',\n  'w-3/5',\n  'w-4/5',\n  'w-1/6',\n  'w-2/6',\n  'w-3/6',\n  'w-4/6',\n  'w-5/6',\n]);\n\nfunction validateSizeClass(value: string, propName: string): string {\n  if (!VALID_SIZE_CLASSES.has(value)) {\n    console.warn(\n      `LoadingSkeleton: Invalid ${propName} class \"${value}\". Using default value instead.`\n    );\n    return propName === 'height' ? 'h-4' : 'w-full';\n  }\n  return value;\n}\n\nexport function LoadingSkeleton({\n  className,\n  lines = 1,\n  height = 'h-4',\n  width = 'w-full',\n  rounded = 'sm',\n}: LoadingSkeletonProps) {\n  // Validate height and width classes\n  const validatedHeight = validateSizeClass(height, 'height');\n  const validatedWidth = validateSizeClass(width, 'width');\n\n  const roundedClasses = {\n    sm: 'rounded-sm',\n    md: 'rounded-md',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  if (lines === 1) {\n    return (\n      <div\n        className={clsx(\n          'skeleton motion-reduce:animate-none',\n          roundedClasses[rounded],\n          validatedHeight,\n          validatedWidth,\n          className\n        )}\n        aria-hidden='true'\n      />\n    );\n  }\n\n  return (\n    <div className='space-y-2' aria-hidden='true'>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={clsx(\n            'skeleton motion-reduce:animate-none',\n            roundedClasses[rounded],\n            validatedHeight,\n            index === lines - 1 ? 'w-3/4' : validatedWidth,\n            className\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Specific skeleton components for common use cases\nexport function ProfileSkeleton() {\n  return (\n    <div className='flex flex-col items-center space-y-4 text-center'>\n      <div\n        className='h-32 w-32 rounded-full skeleton motion-reduce:animate-none'\n        aria-label='Loading artist profile image'\n        role='img'\n      />\n      <div className='space-y-2'>\n        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ButtonSkeleton() {\n  return (\n    <div\n      className='h-12 w-full max-w-sm rounded-lg skeleton motion-reduce:animate-none'\n      aria-label='Loading action button'\n      role='button'\n    />\n  );\n}\n\nexport function SocialBarSkeleton() {\n  return (\n    <div\n      className='flex flex-wrap justify-center gap-4'\n      aria-label='Loading social media links'\n      role='navigation'\n    >\n      {Array.from({ length: 4 }).map((_, index) => (\n        <div\n          key={index}\n          className='h-12 w-12 rounded-full skeleton motion-reduce:animate-none'\n          aria-label={`Loading social link ${index + 1}`}\n          role='button'\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function AuthFormSkeleton() {\n  return (\n    <div\n      className='space-y-4'\n      aria-label='Loading authentication form'\n      role='status'\n    >\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-12 w-full rounded-md skeleton motion-reduce:animate-none' />\n    </div>\n  );\n}\n\nexport function CardSkeleton() {\n  return (\n    <div className='w-full p-4 border border-subtle rounded-lg'>\n      <div className='space-y-3'>\n        <div className='flex items-center space-x-3'>\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        </div>\n        <div className='h-24 rounded-md skeleton motion-reduce:animate-none' />\n        <div className='flex justify-between'>\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ListSkeleton({ items = 3 }: { items?: number }) {\n  return (\n    <div className='space-y-4' aria-label='Loading list items' role='list'>\n      {Array.from({ length: items }).map((_, index) => (\n        <div\n          key={index}\n          className='flex items-center space-x-3 p-3 border border-subtle rounded-md'\n        >\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n          <div className='h-8 w-8 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function TableSkeleton({\n  rows = 5,\n  columns = 3,\n}: {\n  rows?: number;\n  columns?: number;\n}) {\n  return (\n    <div className='w-full overflow-hidden border border-subtle rounded-lg'>\n      {/* Header */}\n      <div className='flex border-b border-subtle bg-surface-1'>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className='flex-1 p-3'>\n            <div className='h-5 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className='flex border-b border-subtle last:border-b-0'\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div key={`cell-${rowIndex}-${colIndex}`} className='flex-1 p-3'>\n              <div\n                className={clsx(\n                  'h-4 rounded-sm skeleton motion-reduce:animate-none',\n                  colIndex === 0 ? 'w-3/4' : 'w-full'\n                )}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/LoadingSkeleton.tsx" },
        "span": [2797, 2955],
        "sourceCode": "import { clsx } from 'clsx';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  lines?: number;\n  height?: string;\n  width?: string;\n  rounded?: 'sm' | 'md' | 'lg' | 'full';\n}\n\n// Valid Tailwind height/width classes for validation\nconst VALID_SIZE_CLASSES = new Set([\n  'h-1',\n  'h-2',\n  'h-3',\n  'h-4',\n  'h-5',\n  'h-6',\n  'h-7',\n  'h-8',\n  'h-9',\n  'h-10',\n  'h-11',\n  'h-12',\n  'h-16',\n  'h-20',\n  'h-24',\n  'h-32',\n  'h-40',\n  'h-48',\n  'h-56',\n  'h-64',\n  'h-72',\n  'h-80',\n  'h-96',\n  'h-auto',\n  'h-full',\n  'h-screen',\n  'w-1',\n  'w-2',\n  'w-3',\n  'w-4',\n  'w-5',\n  'w-6',\n  'w-7',\n  'w-8',\n  'w-9',\n  'w-10',\n  'w-11',\n  'w-12',\n  'w-16',\n  'w-20',\n  'w-24',\n  'w-32',\n  'w-40',\n  'w-48',\n  'w-56',\n  'w-64',\n  'w-72',\n  'w-80',\n  'w-96',\n  'w-auto',\n  'w-full',\n  'w-screen',\n  'w-1/2',\n  'w-1/3',\n  'w-2/3',\n  'w-1/4',\n  'w-2/4',\n  'w-3/4',\n  'w-1/5',\n  'w-2/5',\n  'w-3/5',\n  'w-4/5',\n  'w-1/6',\n  'w-2/6',\n  'w-3/6',\n  'w-4/6',\n  'w-5/6',\n]);\n\nfunction validateSizeClass(value: string, propName: string): string {\n  if (!VALID_SIZE_CLASSES.has(value)) {\n    console.warn(\n      `LoadingSkeleton: Invalid ${propName} class \"${value}\". Using default value instead.`\n    );\n    return propName === 'height' ? 'h-4' : 'w-full';\n  }\n  return value;\n}\n\nexport function LoadingSkeleton({\n  className,\n  lines = 1,\n  height = 'h-4',\n  width = 'w-full',\n  rounded = 'sm',\n}: LoadingSkeletonProps) {\n  // Validate height and width classes\n  const validatedHeight = validateSizeClass(height, 'height');\n  const validatedWidth = validateSizeClass(width, 'width');\n\n  const roundedClasses = {\n    sm: 'rounded-sm',\n    md: 'rounded-md',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  if (lines === 1) {\n    return (\n      <div\n        className={clsx(\n          'skeleton motion-reduce:animate-none',\n          roundedClasses[rounded],\n          validatedHeight,\n          validatedWidth,\n          className\n        )}\n        aria-hidden='true'\n      />\n    );\n  }\n\n  return (\n    <div className='space-y-2' aria-hidden='true'>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={clsx(\n            'skeleton motion-reduce:animate-none',\n            roundedClasses[rounded],\n            validatedHeight,\n            index === lines - 1 ? 'w-3/4' : validatedWidth,\n            className\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Specific skeleton components for common use cases\nexport function ProfileSkeleton() {\n  return (\n    <div className='flex flex-col items-center space-y-4 text-center'>\n      <div\n        className='h-32 w-32 rounded-full skeleton motion-reduce:animate-none'\n        aria-label='Loading artist profile image'\n        role='img'\n      />\n      <div className='space-y-2'>\n        <div\n          className='h-8 w-48 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist name'\n          role='text'\n        />\n        <div\n          className='h-6 w-64 rounded-sm skeleton motion-reduce:animate-none'\n          aria-label='Loading artist tagline'\n          role='text'\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ButtonSkeleton() {\n  return (\n    <div\n      className='h-12 w-full max-w-sm rounded-lg skeleton motion-reduce:animate-none'\n      aria-label='Loading action button'\n      role='button'\n    />\n  );\n}\n\nexport function SocialBarSkeleton() {\n  return (\n    <div\n      className='flex flex-wrap justify-center gap-4'\n      aria-label='Loading social media links'\n      role='navigation'\n    >\n      {Array.from({ length: 4 }).map((_, index) => (\n        <div\n          key={index}\n          className='h-12 w-12 rounded-full skeleton motion-reduce:animate-none'\n          aria-label={`Loading social link ${index + 1}`}\n          role='button'\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function AuthFormSkeleton() {\n  return (\n    <div\n      className='space-y-4'\n      aria-label='Loading authentication form'\n      role='status'\n    >\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-10 w-full rounded-md skeleton motion-reduce:animate-none' />\n      <div className='h-12 w-full rounded-md skeleton motion-reduce:animate-none' />\n    </div>\n  );\n}\n\nexport function CardSkeleton() {\n  return (\n    <div className='w-full p-4 border border-subtle rounded-lg'>\n      <div className='space-y-3'>\n        <div className='flex items-center space-x-3'>\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        </div>\n        <div className='h-24 rounded-md skeleton motion-reduce:animate-none' />\n        <div className='flex justify-between'>\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n          <div className='h-8 w-24 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function ListSkeleton({ items = 3 }: { items?: number }) {\n  return (\n    <div className='space-y-4' aria-label='Loading list items' role='list'>\n      {Array.from({ length: items }).map((_, index) => (\n        <div\n          key={index}\n          className='flex items-center space-x-3 p-3 border border-subtle rounded-md'\n        >\n          <div className='h-10 w-10 rounded-full skeleton motion-reduce:animate-none' />\n          <div className='space-y-1 flex-1'>\n            <div className='h-4 w-1/3 rounded-sm skeleton motion-reduce:animate-none' />\n            <div className='h-3 w-1/2 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n          <div className='h-8 w-8 rounded-md skeleton motion-reduce:animate-none' />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function TableSkeleton({\n  rows = 5,\n  columns = 3,\n}: {\n  rows?: number;\n  columns?: number;\n}) {\n  return (\n    <div className='w-full overflow-hidden border border-subtle rounded-lg'>\n      {/* Header */}\n      <div className='flex border-b border-subtle bg-surface-1'>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className='flex-1 p-3'>\n            <div className='h-5 rounded-sm skeleton motion-reduce:animate-none' />\n          </div>\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className='flex border-b border-subtle last:border-b-0'\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div key={`cell-${rowIndex}-${colIndex}`} className='flex-1 p-3'>\n              <div\n                className={clsx(\n                  'h-4 rounded-sm skeleton motion-reduce:animate-none',\n                  colIndex === 0 ? 'w-3/4' : 'w-full'\n                )}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/OptimisticProgress.tsx" },
        "span": [2133, 2146],
        "sourceCode": "'use client';\n\nimport { useEffect, useState } from 'react';\n\ninterface OptimisticProgressProps {\n  isActive: boolean;\n  steps: Array<{\n    key: string;\n    label: string;\n    duration: number; // milliseconds for this step\n  }>;\n  onComplete?: () => void;\n}\n\ninterface ProgressState {\n  currentStep: number;\n  progress: number;\n  isComplete: boolean;\n}\n\nexport function OptimisticProgress({\n  isActive,\n  steps,\n  onComplete,\n}: OptimisticProgressProps) {\n  const [state, setState] = useState<ProgressState>({\n    currentStep: 0,\n    progress: 0,\n    isComplete: false,\n  });\n\n  useEffect(() => {\n    if (!isActive || steps.length === 0) {\n      setState({ currentStep: 0, progress: 0, isComplete: false });\n      return;\n    }\n\n    let timeoutId: NodeJS.Timeout;\n    let currentStepIndex = 0;\n    let elapsedTime = 0;\n\n    const totalDuration = steps.reduce((sum, step) => sum + step.duration, 0);\n\n    const updateProgress = () => {\n      if (currentStepIndex >= steps.length) {\n        setState({\n          currentStep: steps.length - 1,\n          progress: 100,\n          isComplete: true,\n        });\n        onComplete?.();\n        return;\n      }\n\n      const currentStep = steps[currentStepIndex];\n      const stepProgress = Math.min(100, (elapsedTime / totalDuration) * 100);\n\n      setState({\n        currentStep: currentStepIndex,\n        progress: stepProgress,\n        isComplete: false,\n      });\n\n      // Move to next step when current step duration is reached\n      const stepStartTime = steps\n        .slice(0, currentStepIndex)\n        .reduce((sum, step) => sum + step.duration, 0);\n\n      if (elapsedTime >= stepStartTime + currentStep.duration) {\n        currentStepIndex++;\n      }\n\n      elapsedTime += 50; // Update every 50ms for smooth animation\n      timeoutId = setTimeout(updateProgress, 50);\n    };\n\n    updateProgress();\n\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [isActive, steps, onComplete]);\n\n  if (!isActive) {\n    return null;\n  }\n\n  const currentStep = steps[state.currentStep];\n\n  return (\n    <div className='space-y-3' aria-live='polite' role='status'>\n      {/* Progress bar */}\n      <div className='space-y-2'>\n        <div className='flex justify-between text-sm text-gray-600 dark:text-gray-400'>\n          <span>{currentStep?.label || 'Processing...'}</span>\n          <span>{Math.round(state.progress)}%</span>\n        </div>\n        <div className='w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden'>\n          <div\n            className='bg-gradient-to-r from-blue-500 to-blue-600 h-full rounded-full transition-all duration-100 ease-out'\n            style={{ width: `${state.progress}%` }}\n            role='progressbar'\n            aria-valuenow={Math.round(state.progress)}\n            aria-valuemin={0}\n            aria-valuemax={100}\n            aria-label='Operation progress'\n          />\n        </div>\n      </div>\n\n      {/* Step indicators */}\n      <div className='flex justify-between'>\n        {steps.map((step, index) => (\n          <div\n            key={step.key}\n            className={`flex items-center space-x-1 text-xs transition-colors duration-200 ${\n              index < state.currentStep\n                ? 'text-green-600 dark:text-green-400'\n                : index === state.currentStep\n                  ? 'text-blue-600 dark:text-blue-400'\n                  : 'text-gray-400 dark:text-gray-600'\n            }`}\n          >\n            <div\n              className={`w-2 h-2 rounded-full transition-colors duration-200 ${\n                index < state.currentStep\n                  ? 'bg-green-500'\n                  : index === state.currentStep\n                    ? 'bg-blue-500'\n                    : 'bg-gray-300 dark:bg-gray-600'\n              }`}\n            />\n            <span className='hidden sm:inline'>{step.label}</span>\n          </div>\n        ))}\n      </div>\n\n      {/* Completion indicator */}\n      {state.isComplete && (\n        <div className='flex items-center justify-center space-x-2 text-green-600 dark:text-green-400 text-sm font-medium'>\n          <svg className='w-4 h-4' fill='currentColor' viewBox='0 0 20 20'>\n            <path\n              fillRule='evenodd'\n              d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z'\n              clipRule='evenodd'\n            />\n          </svg>\n          <span>Profile created successfully!</span>\n        </div>\n      )}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/OptimisticProgress.tsx" },
        "span": [4129, 4194],
        "sourceCode": "'use client';\n\nimport { useEffect, useState } from 'react';\n\ninterface OptimisticProgressProps {\n  isActive: boolean;\n  steps: Array<{\n    key: string;\n    label: string;\n    duration: number; // milliseconds for this step\n  }>;\n  onComplete?: () => void;\n}\n\ninterface ProgressState {\n  currentStep: number;\n  progress: number;\n  isComplete: boolean;\n}\n\nexport function OptimisticProgress({\n  isActive,\n  steps,\n  onComplete,\n}: OptimisticProgressProps) {\n  const [state, setState] = useState<ProgressState>({\n    currentStep: 0,\n    progress: 0,\n    isComplete: false,\n  });\n\n  useEffect(() => {\n    if (!isActive || steps.length === 0) {\n      setState({ currentStep: 0, progress: 0, isComplete: false });\n      return;\n    }\n\n    let timeoutId: NodeJS.Timeout;\n    let currentStepIndex = 0;\n    let elapsedTime = 0;\n\n    const totalDuration = steps.reduce((sum, step) => sum + step.duration, 0);\n\n    const updateProgress = () => {\n      if (currentStepIndex >= steps.length) {\n        setState({\n          currentStep: steps.length - 1,\n          progress: 100,\n          isComplete: true,\n        });\n        onComplete?.();\n        return;\n      }\n\n      const currentStep = steps[currentStepIndex];\n      const stepProgress = Math.min(100, (elapsedTime / totalDuration) * 100);\n\n      setState({\n        currentStep: currentStepIndex,\n        progress: stepProgress,\n        isComplete: false,\n      });\n\n      // Move to next step when current step duration is reached\n      const stepStartTime = steps\n        .slice(0, currentStepIndex)\n        .reduce((sum, step) => sum + step.duration, 0);\n\n      if (elapsedTime >= stepStartTime + currentStep.duration) {\n        currentStepIndex++;\n      }\n\n      elapsedTime += 50; // Update every 50ms for smooth animation\n      timeoutId = setTimeout(updateProgress, 50);\n    };\n\n    updateProgress();\n\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [isActive, steps, onComplete]);\n\n  if (!isActive) {\n    return null;\n  }\n\n  const currentStep = steps[state.currentStep];\n\n  return (\n    <div className='space-y-3' aria-live='polite' role='status'>\n      {/* Progress bar */}\n      <div className='space-y-2'>\n        <div className='flex justify-between text-sm text-gray-600 dark:text-gray-400'>\n          <span>{currentStep?.label || 'Processing...'}</span>\n          <span>{Math.round(state.progress)}%</span>\n        </div>\n        <div className='w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden'>\n          <div\n            className='bg-gradient-to-r from-blue-500 to-blue-600 h-full rounded-full transition-all duration-100 ease-out'\n            style={{ width: `${state.progress}%` }}\n            role='progressbar'\n            aria-valuenow={Math.round(state.progress)}\n            aria-valuemin={0}\n            aria-valuemax={100}\n            aria-label='Operation progress'\n          />\n        </div>\n      </div>\n\n      {/* Step indicators */}\n      <div className='flex justify-between'>\n        {steps.map((step, index) => (\n          <div\n            key={step.key}\n            className={`flex items-center space-x-1 text-xs transition-colors duration-200 ${\n              index < state.currentStep\n                ? 'text-green-600 dark:text-green-400'\n                : index === state.currentStep\n                  ? 'text-blue-600 dark:text-blue-400'\n                  : 'text-gray-400 dark:text-gray-600'\n            }`}\n          >\n            <div\n              className={`w-2 h-2 rounded-full transition-colors duration-200 ${\n                index < state.currentStep\n                  ? 'bg-green-500'\n                  : index === state.currentStep\n                    ? 'bg-blue-500'\n                    : 'bg-gray-300 dark:bg-gray-600'\n              }`}\n            />\n            <span className='hidden sm:inline'>{step.label}</span>\n          </div>\n        ))}\n      </div>\n\n      {/* Completion indicator */}\n      {state.isComplete && (\n        <div className='flex items-center justify-center space-x-2 text-green-600 dark:text-green-400 text-sm font-medium'>\n          <svg className='w-4 h-4' fill='currentColor' viewBox='0 0 20 20'>\n            <path\n              fillRule='evenodd'\n              d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z'\n              clipRule='evenodd'\n            />\n          </svg>\n          <span>Profile created successfully!</span>\n        </div>\n      )}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/PrimaryCTA.stories.tsx" },
        "span": [1757, 1809],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { PrimaryCTA } from './PrimaryCTA';\n\nconst meta: Meta<typeof PrimaryCTA> = {\n  title: 'Molecules/PrimaryCTA',\n  component: PrimaryCTA,\n  parameters: {\n    layout: 'centered',\n  },\n  argTypes: {\n    size: {\n      control: 'radio',\n      options: ['md', 'lg'],\n    },\n    fullWidth: {\n      control: 'boolean',\n    },\n    loading: {\n      control: 'boolean',\n    },\n    disabled: {\n      control: 'boolean',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof PrimaryCTA>;\n\nexport const Default: Story = {\n  args: {\n    children: 'Get Started',\n    ariaLabel: 'Get started with Jovie',\n    fullWidth: false,\n  },\n};\n\nexport const Large: Story = {\n  args: {\n    children: 'Claim Your Handle',\n    ariaLabel: 'Claim your Jovie handle',\n    size: 'lg',\n    fullWidth: false,\n  },\n};\n\nexport const Medium: Story = {\n  args: {\n    children: 'Sign Up',\n    ariaLabel: 'Sign up for Jovie',\n    size: 'md',\n    fullWidth: false,\n  },\n};\n\nexport const FullWidth: Story = {\n  args: {\n    children: 'Continue',\n    ariaLabel: 'Continue to next step',\n    fullWidth: true,\n  },\n  decorators: [\n    Story => (\n      <div className='w-80'>\n        <Story />\n      </div>\n    ),\n  ],\n};\n\nexport const Loading: Story = {\n  args: {\n    children: 'Saving...',\n    ariaLabel: 'Save changes',\n    loadingLabel: 'Saving your changes',\n    loading: true,\n    fullWidth: false,\n  },\n};\n\nexport const Disabled: Story = {\n  args: {\n    children: 'Submit',\n    ariaLabel: 'Submit form',\n    disabled: true,\n    fullWidth: false,\n  },\n};\n\nexport const InForm: Story = {\n  render: () => (\n    <div className='w-80 space-y-4 p-6 border border-subtle rounded-xl'>\n      <div className='space-y-2'>\n        <label className='text-sm font-medium'>Email</label>\n        <input\n          type='email'\n          placeholder='you@example.com'\n          className='w-full px-3 py-2 border border-subtle rounded-lg'\n        />\n      </div>\n      <PrimaryCTA ariaLabel='Subscribe to newsletter' fullWidth>\n        Subscribe\n      </PrimaryCTA>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/StepCard.stories.tsx" },
        "span": [139, 237],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { StepCard } from './StepCard';\n\n// Sample icons\nconst LinkIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n    />\n  </svg>\n);\n\nconst LockIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z'\n    />\n  </svg>\n);\n\nconst MusicIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H15'\n    />\n  </svg>\n);\n\nconst meta: Meta<typeof StepCard> = {\n  title: 'Atoms/StepCard',\n  component: StepCard,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    showConnectionLine: {\n      control: { type: 'boolean' },\n    },\n    interactive: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    stepNumber: '01',\n    title: 'Connect Your Spotify',\n    description:\n      'Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.',\n    icon: LinkIcon,\n  },\n};\n\nexport const Step2: Story = {\n  args: {\n    stepNumber: '02',\n    title: 'Get Your Link',\n    description:\n      'Get your custom jov.ie link and professional profile. Add your social media and merch links.',\n    icon: LockIcon,\n  },\n};\n\nexport const Step3: Story = {\n  args: {\n    stepNumber: '03',\n    title: 'Fans Stream Your Music',\n    description:\n      'Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.',\n    icon: MusicIcon,\n  },\n};\n\nexport const WithConnectionLine: Story = {\n  args: {\n    stepNumber: '01',\n    title: 'Connect Your Spotify',\n    description:\n      'Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.',\n    icon: LinkIcon,\n    showConnectionLine: true,\n  },\n};\n\nexport const NonInteractive: Story = {\n  args: {\n    stepNumber: '01',\n    title: 'Static Step Card',\n    description:\n      'This step card has no hover effects and is purely informational.',\n    icon: LinkIcon,\n    interactive: false,\n  },\n};\n\nexport const AllSteps: Story = {\n  render: () => (\n    <div className='grid grid-cols-1 md:grid-cols-3 gap-12 max-w-6xl'>\n      <StepCard\n        stepNumber='01'\n        title='Connect Your Spotify'\n        description='Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.'\n        icon={LinkIcon}\n        showConnectionLine={true}\n      />\n      <StepCard\n        stepNumber='02'\n        title='Get Your Link'\n        description='Get your custom jov.ie link and professional profile. Add your social media and merch links.'\n        icon={LockIcon}\n        showConnectionLine={true}\n      />\n      <StepCard\n        stepNumber='03'\n        title='Fans Stream Your Music'\n        description='Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.'\n        icon={MusicIcon}\n      />\n    </div>\n  ),\n};\n\nexport const InHowItWorksSection: Story = {\n  render: () => (\n    <div className='max-w-6xl p-8 bg-gray-50 dark:bg-gray-900 rounded-lg'>\n      <div className='text-center mb-12'>\n        <h2 className='text-4xl font-bold mb-4'>How It Works</h2>\n        <p className='text-gray-600 dark:text-gray-300'>\n          From Spotify artist to fan conversion in 60 seconds\n        </p>\n      </div>\n      <div className='grid grid-cols-1 md:grid-cols-3 gap-12'>\n        <StepCard\n          stepNumber='01'\n          title='Connect Your Spotify'\n          description='Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.'\n          icon={LinkIcon}\n          showConnectionLine={true}\n        />\n        <StepCard\n          stepNumber='02'\n          title='Get Your Link'\n          description='Get your custom jov.ie link and professional profile. Add your social media and merch links.'\n          icon={LockIcon}\n          showConnectionLine={true}\n        />\n        <StepCard\n          stepNumber='03'\n          title='Fans Stream Your Music'\n          description='Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.'\n          icon={MusicIcon}\n        />\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/StepCard.stories.tsx" },
        "span": [509, 607],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { StepCard } from './StepCard';\n\n// Sample icons\nconst LinkIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n    />\n  </svg>\n);\n\nconst LockIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z'\n    />\n  </svg>\n);\n\nconst MusicIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H15'\n    />\n  </svg>\n);\n\nconst meta: Meta<typeof StepCard> = {\n  title: 'Atoms/StepCard',\n  component: StepCard,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    showConnectionLine: {\n      control: { type: 'boolean' },\n    },\n    interactive: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    stepNumber: '01',\n    title: 'Connect Your Spotify',\n    description:\n      'Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.',\n    icon: LinkIcon,\n  },\n};\n\nexport const Step2: Story = {\n  args: {\n    stepNumber: '02',\n    title: 'Get Your Link',\n    description:\n      'Get your custom jov.ie link and professional profile. Add your social media and merch links.',\n    icon: LockIcon,\n  },\n};\n\nexport const Step3: Story = {\n  args: {\n    stepNumber: '03',\n    title: 'Fans Stream Your Music',\n    description:\n      'Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.',\n    icon: MusicIcon,\n  },\n};\n\nexport const WithConnectionLine: Story = {\n  args: {\n    stepNumber: '01',\n    title: 'Connect Your Spotify',\n    description:\n      'Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.',\n    icon: LinkIcon,\n    showConnectionLine: true,\n  },\n};\n\nexport const NonInteractive: Story = {\n  args: {\n    stepNumber: '01',\n    title: 'Static Step Card',\n    description:\n      'This step card has no hover effects and is purely informational.',\n    icon: LinkIcon,\n    interactive: false,\n  },\n};\n\nexport const AllSteps: Story = {\n  render: () => (\n    <div className='grid grid-cols-1 md:grid-cols-3 gap-12 max-w-6xl'>\n      <StepCard\n        stepNumber='01'\n        title='Connect Your Spotify'\n        description='Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.'\n        icon={LinkIcon}\n        showConnectionLine={true}\n      />\n      <StepCard\n        stepNumber='02'\n        title='Get Your Link'\n        description='Get your custom jov.ie link and professional profile. Add your social media and merch links.'\n        icon={LockIcon}\n        showConnectionLine={true}\n      />\n      <StepCard\n        stepNumber='03'\n        title='Fans Stream Your Music'\n        description='Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.'\n        icon={MusicIcon}\n      />\n    </div>\n  ),\n};\n\nexport const InHowItWorksSection: Story = {\n  render: () => (\n    <div className='max-w-6xl p-8 bg-gray-50 dark:bg-gray-900 rounded-lg'>\n      <div className='text-center mb-12'>\n        <h2 className='text-4xl font-bold mb-4'>How It Works</h2>\n        <p className='text-gray-600 dark:text-gray-300'>\n          From Spotify artist to fan conversion in 60 seconds\n        </p>\n      </div>\n      <div className='grid grid-cols-1 md:grid-cols-3 gap-12'>\n        <StepCard\n          stepNumber='01'\n          title='Connect Your Spotify'\n          description='Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.'\n          icon={LinkIcon}\n          showConnectionLine={true}\n        />\n        <StepCard\n          stepNumber='02'\n          title='Get Your Link'\n          description='Get your custom jov.ie link and professional profile. Add your social media and merch links.'\n          icon={LockIcon}\n          showConnectionLine={true}\n        />\n        <StepCard\n          stepNumber='03'\n          title='Fans Stream Your Music'\n          description='Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.'\n          icon={MusicIcon}\n        />\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/StepCard.stories.tsx" },
        "span": [850, 948],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { StepCard } from './StepCard';\n\n// Sample icons\nconst LinkIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n    />\n  </svg>\n);\n\nconst LockIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z'\n    />\n  </svg>\n);\n\nconst MusicIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H15'\n    />\n  </svg>\n);\n\nconst meta: Meta<typeof StepCard> = {\n  title: 'Atoms/StepCard',\n  component: StepCard,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    showConnectionLine: {\n      control: { type: 'boolean' },\n    },\n    interactive: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    stepNumber: '01',\n    title: 'Connect Your Spotify',\n    description:\n      'Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.',\n    icon: LinkIcon,\n  },\n};\n\nexport const Step2: Story = {\n  args: {\n    stepNumber: '02',\n    title: 'Get Your Link',\n    description:\n      'Get your custom jov.ie link and professional profile. Add your social media and merch links.',\n    icon: LockIcon,\n  },\n};\n\nexport const Step3: Story = {\n  args: {\n    stepNumber: '03',\n    title: 'Fans Stream Your Music',\n    description:\n      'Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.',\n    icon: MusicIcon,\n  },\n};\n\nexport const WithConnectionLine: Story = {\n  args: {\n    stepNumber: '01',\n    title: 'Connect Your Spotify',\n    description:\n      'Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.',\n    icon: LinkIcon,\n    showConnectionLine: true,\n  },\n};\n\nexport const NonInteractive: Story = {\n  args: {\n    stepNumber: '01',\n    title: 'Static Step Card',\n    description:\n      'This step card has no hover effects and is purely informational.',\n    icon: LinkIcon,\n    interactive: false,\n  },\n};\n\nexport const AllSteps: Story = {\n  render: () => (\n    <div className='grid grid-cols-1 md:grid-cols-3 gap-12 max-w-6xl'>\n      <StepCard\n        stepNumber='01'\n        title='Connect Your Spotify'\n        description='Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.'\n        icon={LinkIcon}\n        showConnectionLine={true}\n      />\n      <StepCard\n        stepNumber='02'\n        title='Get Your Link'\n        description='Get your custom jov.ie link and professional profile. Add your social media and merch links.'\n        icon={LockIcon}\n        showConnectionLine={true}\n      />\n      <StepCard\n        stepNumber='03'\n        title='Fans Stream Your Music'\n        description='Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.'\n        icon={MusicIcon}\n      />\n    </div>\n  ),\n};\n\nexport const InHowItWorksSection: Story = {\n  render: () => (\n    <div className='max-w-6xl p-8 bg-gray-50 dark:bg-gray-900 rounded-lg'>\n      <div className='text-center mb-12'>\n        <h2 className='text-4xl font-bold mb-4'>How It Works</h2>\n        <p className='text-gray-600 dark:text-gray-300'>\n          From Spotify artist to fan conversion in 60 seconds\n        </p>\n      </div>\n      <div className='grid grid-cols-1 md:grid-cols-3 gap-12'>\n        <StepCard\n          stepNumber='01'\n          title='Connect Your Spotify'\n          description='Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.'\n          icon={LinkIcon}\n          showConnectionLine={true}\n        />\n        <StepCard\n          stepNumber='02'\n          title='Get Your Link'\n          description='Get your custom jov.ie link and professional profile. Add your social media and merch links.'\n          icon={LockIcon}\n          showConnectionLine={true}\n        />\n        <StepCard\n          stepNumber='03'\n          title='Fans Stream Your Music'\n          description='Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.'\n          icon={MusicIcon}\n        />\n      </div>\n    </div>\n  ),\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/TipSelector.stories.tsx" },
        "span": [1584, 1662],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { TipSelector } from './TipSelector';\n\nconst meta: Meta<typeof TipSelector> = {\n  title: 'Molecules/TipSelector',\n  component: TipSelector,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    isLoading: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    onContinue: amount => console.log(`Selected amount: $${amount}`),\n  },\n};\n\nexport const CustomAmounts: Story = {\n  args: {\n    amounts: [2, 5, 10],\n    onContinue: amount => console.log(`Selected amount: $${amount}`),\n  },\n};\n\nexport const LargeAmounts: Story = {\n  args: {\n    amounts: [10, 25, 50],\n    onContinue: amount => console.log(`Selected amount: $${amount}`),\n  },\n};\n\nexport const FiveOptions: Story = {\n  args: {\n    amounts: [1, 3, 5, 10, 20],\n    onContinue: amount => console.log(`Selected amount: $${amount}`),\n  },\n  render: args => (\n    <div className='w-80'>\n      <div className='grid grid-cols-5 gap-2 mb-4'>\n        {args.amounts?.map(amount => (\n          <button\n            key={amount}\n            type='button'\n            className='w-full aspect-square rounded-xl border text-sm font-semibold transition-colors flex items-center justify-center cursor-pointer bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100 border-black/40 hover:border-black/70 dark:border-white/30 dark:hover:border-white/60'\n          >\n            ${amount}\n          </button>\n        ))}\n      </div>\n      <button className='w-full bg-blue-600 text-white rounded-md py-3 font-medium'>\n        Continue\n      </button>\n    </div>\n  ),\n};\n\nexport const Loading: Story = {\n  args: {\n    isLoading: true,\n    onContinue: amount => console.log(`Selected amount: $${amount}`),\n  },\n};\n\nexport const VenmoAmounts: Story = {\n  args: {\n    amounts: [3, 5, 7],\n    onContinue: amount => console.log(`Continue to Venmo with $${amount}`),\n  },\n};\n\nexport const StripeAmounts: Story = {\n  args: {\n    amounts: [2, 5, 10],\n    onContinue: amount => console.log(`Process $${amount} tip via Stripe`),\n  },\n};\n\nexport const InteractiveDemo: Story = {\n  render: () => {\n    const handleContinue = (amount: number) => {\n      alert(\n        `You selected $${amount}! This would normally continue to payment.`\n      );\n    };\n\n    return (\n      <div className='max-w-sm'>\n        <TipSelector amounts={[3, 5, 10]} onContinue={handleContinue} />\n      </div>\n    );\n  },\n};\n\nexport const InDarkMode: Story = {\n  args: {\n    amounts: [5, 10, 20],\n    onContinue: amount => console.log(`Selected amount: $${amount}`),\n  },\n  parameters: {\n    backgrounds: { default: 'dark' },\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<fieldset>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<fieldset>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/molecules/TipSelector.tsx" },
        "span": [1311, 1323],
        "sourceCode": "import { Button } from '@jovie/ui';\nimport { useEffect, useRef, useState } from 'react';\nimport { AmountSelector } from '@/components/atoms/AmountSelector';\n\ninterface TipSelectorProps {\n  amounts?: number[];\n  onContinue: (amount: number) => void;\n  isLoading?: boolean;\n  className?: string;\n}\n\nexport function TipSelector({\n  amounts = [3, 5, 7],\n  onContinue,\n  isLoading = false,\n  className = '',\n}: TipSelectorProps) {\n  const defaultIdx = Math.floor(Math.max(0, amounts.length - 1) / 2);\n  const [selectedIdx, setSelectedIdx] = useState<number>(defaultIdx);\n  const statusRef = useRef<HTMLDivElement>(null);\n\n  const selectedAmount = amounts[selectedIdx];\n\n  const handleContinue = () => {\n    onContinue(selectedAmount);\n  };\n\n  // Announce selection changes to screen readers\n  useEffect(() => {\n    if (statusRef.current) {\n      statusRef.current.textContent = `$${selectedAmount} selected`;\n    }\n  }, [selectedAmount]);\n\n  return (\n    <div className={`space-y-4 ${className}`} data-test='tip-selector'>\n      <h3 id='tip-selector-heading' className='sr-only'>\n        Select tip amount\n      </h3>\n\n      {/* Visually hidden live region for screen readers */}\n      <div className='sr-only' aria-live='polite' ref={statusRef}></div>\n\n      <div\n        className='grid grid-cols-3 gap-3'\n        role='group'\n        aria-label='Tip amount options'\n      >\n        {amounts.map((amount, idx) => (\n          <AmountSelector\n            key={amount}\n            amount={amount}\n            isSelected={idx === selectedIdx}\n            onClick={() => setSelectedIdx(idx)}\n          />\n        ))}\n      </div>\n\n      <hr className='mt-3 pt-3 border-t border-black/5 dark:border-white/10' />\n\n      <Button\n        onClick={handleContinue}\n        className='w-full !bg-black !text-white hover:!bg-gray-800 dark:!bg-white dark:!text-black dark:hover:!bg-gray-100'\n        size='lg'\n        disabled={isLoading}\n        variant='ghost'\n        aria-label={`Continue with $${selectedAmount} tip`}\n      >\n        {isLoading ? 'Processing...' : 'Continue'}\n      </Button>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/monitoring/PerformanceDashboard.tsx" },
        "span": [2817, 2986],
        "sourceCode": "'use client';\n\nimport { useEffect, useState } from 'react';\nimport type { Metric } from 'web-vitals';\n\ninterface PerformanceMetric {\n  name: string;\n  value: number;\n  rating: 'good' | 'needs-improvement' | 'poor';\n  timestamp: number;\n}\n\ninterface PerformanceDashboardProps {\n  showDebug?: boolean;\n}\n\nexport function PerformanceDashboard({\n  showDebug = false,\n}: PerformanceDashboardProps) {\n  const [metrics, setMetrics] = useState<Record<string, PerformanceMetric>>({});\n  const [expanded, setExpanded] = useState<boolean>(false);\n\n  // Listen for web vitals metrics\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    // Create a custom event listener for web vitals metrics\n    const handleWebVitalMetric = (event: CustomEvent) => {\n      const metric = event.detail as Metric & {\n        rating: 'good' | 'needs-improvement' | 'poor';\n      };\n\n      setMetrics(prev => ({\n        ...prev,\n        [metric.name]: {\n          name: metric.name,\n          value: metric.value,\n          rating: metric.rating,\n          timestamp: Date.now(),\n        },\n      }));\n    };\n\n    // Add event listener\n    window.addEventListener(\n      'web-vitals',\n      handleWebVitalMetric as EventListener\n    );\n\n    // Clean up\n    return () => {\n      window.removeEventListener(\n        'web-vitals',\n        handleWebVitalMetric as EventListener\n      );\n    };\n  }, []);\n\n  // Only render in development or when showDebug is true\n  if (process.env.NODE_ENV !== 'development' && !showDebug) {\n    return null;\n  }\n\n  // Format metric value based on metric name\n  const formatMetricValue = (name: string, value: number): string => {\n    switch (name.toLowerCase()) {\n      case 'cls':\n        return value.toFixed(3);\n      case 'lcp':\n      case 'fcp':\n      case 'fid':\n      case 'ttfb':\n        return `${value.toFixed(0)}ms`;\n      default:\n        return value.toFixed(2);\n    }\n  };\n\n  // Get color based on rating\n  const getRatingColor = (rating: string): string => {\n    switch (rating) {\n      case 'good':\n        return 'bg-green-100 text-green-800';\n      case 'needs-improvement':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'poor':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // Get metric display name\n  const getMetricDisplayName = (name: string): string => {\n    switch (name.toLowerCase()) {\n      case 'cls':\n        return 'CLS';\n      case 'lcp':\n        return 'LCP';\n      case 'fid':\n        return 'FID';\n      case 'fcp':\n        return 'FCP';\n      case 'ttfb':\n        return 'TTFB';\n      default:\n        return name.toUpperCase();\n    }\n  };\n\n  return (\n    <div className='fixed bottom-4 right-4 z-50'>\n      <div className='bg-white rounded-lg shadow-lg overflow-hidden'>\n        <div\n          className='px-4 py-2 bg-indigo-600 text-white cursor-pointer flex justify-between items-center'\n          onClick={() => setExpanded(!expanded)}\n        >\n          <h3 className='text-sm font-medium'>Performance Metrics</h3>\n          <span>{expanded ? '▼' : '▲'}</span>\n        </div>\n\n        {expanded && (\n          <div className='p-4'>\n            {Object.keys(metrics).length === 0 ? (\n              <p className='text-sm text-gray-500'>Collecting metrics...</p>\n            ) : (\n              <div className='space-y-2'>\n                {Object.values(metrics).map(metric => (\n                  <div\n                    key={metric.name}\n                    className='flex items-center justify-between'\n                  >\n                    <span className='text-sm font-medium'>\n                      {getMetricDisplayName(metric.name)}:\n                    </span>\n                    <span\n                      className={`text-sm px-2 py-1 rounded ${getRatingColor(metric.rating)}`}\n                    >\n                      {formatMetricValue(metric.name, metric.value)}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noStaticElementInteractions",
      "severity": "warning",
      "description": "Static Elements should not be interactive.",
      "message": [
        {
          "elements": [],
          "content": "Static Elements should not be interactive."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "To add interactivity such as a mouse or key event listener to a static element, give the element an appropriate role value."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/monitoring/PerformanceDashboard.tsx" },
        "span": [2817, 2986],
        "sourceCode": "'use client';\n\nimport { useEffect, useState } from 'react';\nimport type { Metric } from 'web-vitals';\n\ninterface PerformanceMetric {\n  name: string;\n  value: number;\n  rating: 'good' | 'needs-improvement' | 'poor';\n  timestamp: number;\n}\n\ninterface PerformanceDashboardProps {\n  showDebug?: boolean;\n}\n\nexport function PerformanceDashboard({\n  showDebug = false,\n}: PerformanceDashboardProps) {\n  const [metrics, setMetrics] = useState<Record<string, PerformanceMetric>>({});\n  const [expanded, setExpanded] = useState<boolean>(false);\n\n  // Listen for web vitals metrics\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    // Create a custom event listener for web vitals metrics\n    const handleWebVitalMetric = (event: CustomEvent) => {\n      const metric = event.detail as Metric & {\n        rating: 'good' | 'needs-improvement' | 'poor';\n      };\n\n      setMetrics(prev => ({\n        ...prev,\n        [metric.name]: {\n          name: metric.name,\n          value: metric.value,\n          rating: metric.rating,\n          timestamp: Date.now(),\n        },\n      }));\n    };\n\n    // Add event listener\n    window.addEventListener(\n      'web-vitals',\n      handleWebVitalMetric as EventListener\n    );\n\n    // Clean up\n    return () => {\n      window.removeEventListener(\n        'web-vitals',\n        handleWebVitalMetric as EventListener\n      );\n    };\n  }, []);\n\n  // Only render in development or when showDebug is true\n  if (process.env.NODE_ENV !== 'development' && !showDebug) {\n    return null;\n  }\n\n  // Format metric value based on metric name\n  const formatMetricValue = (name: string, value: number): string => {\n    switch (name.toLowerCase()) {\n      case 'cls':\n        return value.toFixed(3);\n      case 'lcp':\n      case 'fcp':\n      case 'fid':\n      case 'ttfb':\n        return `${value.toFixed(0)}ms`;\n      default:\n        return value.toFixed(2);\n    }\n  };\n\n  // Get color based on rating\n  const getRatingColor = (rating: string): string => {\n    switch (rating) {\n      case 'good':\n        return 'bg-green-100 text-green-800';\n      case 'needs-improvement':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'poor':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // Get metric display name\n  const getMetricDisplayName = (name: string): string => {\n    switch (name.toLowerCase()) {\n      case 'cls':\n        return 'CLS';\n      case 'lcp':\n        return 'LCP';\n      case 'fid':\n        return 'FID';\n      case 'fcp':\n        return 'FCP';\n      case 'ttfb':\n        return 'TTFB';\n      default:\n        return name.toUpperCase();\n    }\n  };\n\n  return (\n    <div className='fixed bottom-4 right-4 z-50'>\n      <div className='bg-white rounded-lg shadow-lg overflow-hidden'>\n        <div\n          className='px-4 py-2 bg-indigo-600 text-white cursor-pointer flex justify-between items-center'\n          onClick={() => setExpanded(!expanded)}\n        >\n          <h3 className='text-sm font-medium'>Performance Metrics</h3>\n          <span>{expanded ? '▼' : '▲'}</span>\n        </div>\n\n        {expanded && (\n          <div className='p-4'>\n            {Object.keys(metrics).length === 0 ? (\n              <p className='text-sm text-gray-500'>Collecting metrics...</p>\n            ) : (\n              <div className='space-y-2'>\n                {Object.values(metrics).map(metric => (\n                  <div\n                    key={metric.name}\n                    className='flex items-center justify-between'\n                  >\n                    <span className='text-sm font-medium'>\n                      {getMetricDisplayName(metric.name)}:\n                    </span>\n                    <span\n                      className={`text-sm px-2 py-1 rounded ${getRatingColor(metric.rating)}`}\n                    >\n                      {formatMetricValue(metric.name, metric.value)}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useKeyWithClickEvents",
      "severity": "warning",
      "description": "Enforce to have the onClick mouse event with the onKeyUp, the onKeyDown, or the onKeyPress keyboard event.",
      "message": [
        { "elements": [], "content": "Enforce to have the " },
        { "elements": ["Emphasis"], "content": "onClick" },
        { "elements": [], "content": " mouse event with the " },
        { "elements": ["Emphasis"], "content": "onKeyUp" },
        { "elements": [], "content": ", the " },
        { "elements": ["Emphasis"], "content": "onKeyDown" },
        { "elements": [], "content": ", or the " },
        { "elements": ["Emphasis"], "content": "onKeyPress" },
        { "elements": [], "content": " keyboard event." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Actions triggered using mouse events should have corresponding keyboard events to account for keyboard-only navigation."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/monitoring/PerformanceDashboard.tsx" },
        "span": [2817, 2986],
        "sourceCode": "'use client';\n\nimport { useEffect, useState } from 'react';\nimport type { Metric } from 'web-vitals';\n\ninterface PerformanceMetric {\n  name: string;\n  value: number;\n  rating: 'good' | 'needs-improvement' | 'poor';\n  timestamp: number;\n}\n\ninterface PerformanceDashboardProps {\n  showDebug?: boolean;\n}\n\nexport function PerformanceDashboard({\n  showDebug = false,\n}: PerformanceDashboardProps) {\n  const [metrics, setMetrics] = useState<Record<string, PerformanceMetric>>({});\n  const [expanded, setExpanded] = useState<boolean>(false);\n\n  // Listen for web vitals metrics\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    // Create a custom event listener for web vitals metrics\n    const handleWebVitalMetric = (event: CustomEvent) => {\n      const metric = event.detail as Metric & {\n        rating: 'good' | 'needs-improvement' | 'poor';\n      };\n\n      setMetrics(prev => ({\n        ...prev,\n        [metric.name]: {\n          name: metric.name,\n          value: metric.value,\n          rating: metric.rating,\n          timestamp: Date.now(),\n        },\n      }));\n    };\n\n    // Add event listener\n    window.addEventListener(\n      'web-vitals',\n      handleWebVitalMetric as EventListener\n    );\n\n    // Clean up\n    return () => {\n      window.removeEventListener(\n        'web-vitals',\n        handleWebVitalMetric as EventListener\n      );\n    };\n  }, []);\n\n  // Only render in development or when showDebug is true\n  if (process.env.NODE_ENV !== 'development' && !showDebug) {\n    return null;\n  }\n\n  // Format metric value based on metric name\n  const formatMetricValue = (name: string, value: number): string => {\n    switch (name.toLowerCase()) {\n      case 'cls':\n        return value.toFixed(3);\n      case 'lcp':\n      case 'fcp':\n      case 'fid':\n      case 'ttfb':\n        return `${value.toFixed(0)}ms`;\n      default:\n        return value.toFixed(2);\n    }\n  };\n\n  // Get color based on rating\n  const getRatingColor = (rating: string): string => {\n    switch (rating) {\n      case 'good':\n        return 'bg-green-100 text-green-800';\n      case 'needs-improvement':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'poor':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // Get metric display name\n  const getMetricDisplayName = (name: string): string => {\n    switch (name.toLowerCase()) {\n      case 'cls':\n        return 'CLS';\n      case 'lcp':\n        return 'LCP';\n      case 'fid':\n        return 'FID';\n      case 'fcp':\n        return 'FCP';\n      case 'ttfb':\n        return 'TTFB';\n      default:\n        return name.toUpperCase();\n    }\n  };\n\n  return (\n    <div className='fixed bottom-4 right-4 z-50'>\n      <div className='bg-white rounded-lg shadow-lg overflow-hidden'>\n        <div\n          className='px-4 py-2 bg-indigo-600 text-white cursor-pointer flex justify-between items-center'\n          onClick={() => setExpanded(!expanded)}\n        >\n          <h3 className='text-sm font-medium'>Performance Metrics</h3>\n          <span>{expanded ? '▼' : '▲'}</span>\n        </div>\n\n        {expanded && (\n          <div className='p-4'>\n            {Object.keys(metrics).length === 0 ? (\n              <p className='text-sm text-gray-500'>Collecting metrics...</p>\n            ) : (\n              <div className='space-y-2'>\n                {Object.values(metrics).map(metric => (\n                  <div\n                    key={metric.name}\n                    className='flex items-center justify-between'\n                  >\n                    <span className='text-sm font-medium'>\n                      {getMetricDisplayName(metric.name)}:\n                    </span>\n                    <span\n                      className={`text-sm px-2 py-1 rounded ${getRatingColor(metric.rating)}`}\n                    >\n                      {formatMetricValue(metric.name, metric.value)}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/organisms/AnimatedAccordion.stories.tsx"
        },
        "span": [1551, 1725],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { useState } from 'react';\nimport { AnimatedAccordion } from './AnimatedAccordion';\n\nconst meta: Meta<typeof AnimatedAccordion> = {\n  title: 'Organisms/AnimatedAccordion',\n  component: AnimatedAccordion,\n  parameters: {\n    layout: 'centered',\n  },\n  argTypes: {\n    delay: {\n      control: { type: 'range', min: 0, max: 1, step: 0.1 },\n    },\n    duration: {\n      control: { type: 'range', min: 0.1, max: 1, step: 0.1 },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof AnimatedAccordion>;\n\nexport const Open: Story = {\n  args: {\n    isOpen: true,\n    children: (\n      <div className='p-4 bg-surface-1 border border-subtle rounded-lg'>\n        <p className='text-secondary'>\n          This content is visible when the accordion is open. It animates\n          smoothly in and out.\n        </p>\n      </div>\n    ),\n  },\n  decorators: [\n    Story => (\n      <div className='w-80'>\n        <Story />\n      </div>\n    ),\n  ],\n};\n\nexport const Closed: Story = {\n  args: {\n    isOpen: false,\n    children: (\n      <div className='p-4 bg-surface-1 border border-subtle rounded-lg'>\n        <p className='text-secondary'>This content is hidden.</p>\n      </div>\n    ),\n  },\n  decorators: [\n    Story => (\n      <div className='w-80'>\n        <Story />\n      </div>\n    ),\n  ],\n};\n\nexport const Interactive: Story = {\n  render: function InteractiveAccordion() {\n    const [isOpen, setIsOpen] = useState(false);\n\n    return (\n      <div className='w-80 space-y-4'>\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className='w-full px-4 py-2 bg-black text-white dark:bg-white dark:text-black rounded-md font-medium'\n        >\n          {isOpen ? 'Close' : 'Open'} Accordion\n        </button>\n        <AnimatedAccordion isOpen={isOpen}>\n          <div className='p-4 bg-surface-1 border border-subtle rounded-lg'>\n            <h3 className='font-semibold mb-2'>Accordion Content</h3>\n            <p className='text-secondary text-sm'>\n              This content animates smoothly when toggled. The animation\n              respects reduced motion preferences.\n            </p>\n          </div>\n        </AnimatedAccordion>\n      </div>\n    );\n  },\n};\n\nexport const FAQExample: Story = {\n  render: function FAQAccordion() {\n    const [openIndex, setOpenIndex] = useState<number | null>(null);\n\n    const faqs = [\n      {\n        q: 'What is Jovie?',\n        a: 'Jovie is a link-in-bio platform for artists and creators.',\n      },\n      {\n        q: 'Is it free?',\n        a: 'Yes! Jovie offers a free tier with all essential features.',\n      },\n      {\n        q: 'Can I remove branding?',\n        a: 'Yes, upgrade to Pro for $5/month to remove branding.',\n      },\n    ];\n\n    return (\n      <div className='w-96 space-y-2'>\n        {faqs.map((faq, index) => (\n          <div\n            key={index}\n            className='border border-subtle rounded-lg overflow-hidden'\n          >\n            <button\n              onClick={() => setOpenIndex(openIndex === index ? null : index)}\n              className='w-full px-4 py-3 text-left font-medium flex justify-between items-center'\n            >\n              {faq.q}\n              <span>{openIndex === index ? '−' : '+'}</span>\n            </button>\n            <AnimatedAccordion isOpen={openIndex === index}>\n              <div className='px-4 pb-3 text-secondary text-sm'>{faq.a}</div>\n            </AnimatedAccordion>\n          </div>\n        ))}\n      </div>\n    );\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/organisms/AnimatedAccordion.stories.tsx"
        },
        "span": [2996, 3195],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { useState } from 'react';\nimport { AnimatedAccordion } from './AnimatedAccordion';\n\nconst meta: Meta<typeof AnimatedAccordion> = {\n  title: 'Organisms/AnimatedAccordion',\n  component: AnimatedAccordion,\n  parameters: {\n    layout: 'centered',\n  },\n  argTypes: {\n    delay: {\n      control: { type: 'range', min: 0, max: 1, step: 0.1 },\n    },\n    duration: {\n      control: { type: 'range', min: 0.1, max: 1, step: 0.1 },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof AnimatedAccordion>;\n\nexport const Open: Story = {\n  args: {\n    isOpen: true,\n    children: (\n      <div className='p-4 bg-surface-1 border border-subtle rounded-lg'>\n        <p className='text-secondary'>\n          This content is visible when the accordion is open. It animates\n          smoothly in and out.\n        </p>\n      </div>\n    ),\n  },\n  decorators: [\n    Story => (\n      <div className='w-80'>\n        <Story />\n      </div>\n    ),\n  ],\n};\n\nexport const Closed: Story = {\n  args: {\n    isOpen: false,\n    children: (\n      <div className='p-4 bg-surface-1 border border-subtle rounded-lg'>\n        <p className='text-secondary'>This content is hidden.</p>\n      </div>\n    ),\n  },\n  decorators: [\n    Story => (\n      <div className='w-80'>\n        <Story />\n      </div>\n    ),\n  ],\n};\n\nexport const Interactive: Story = {\n  render: function InteractiveAccordion() {\n    const [isOpen, setIsOpen] = useState(false);\n\n    return (\n      <div className='w-80 space-y-4'>\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className='w-full px-4 py-2 bg-black text-white dark:bg-white dark:text-black rounded-md font-medium'\n        >\n          {isOpen ? 'Close' : 'Open'} Accordion\n        </button>\n        <AnimatedAccordion isOpen={isOpen}>\n          <div className='p-4 bg-surface-1 border border-subtle rounded-lg'>\n            <h3 className='font-semibold mb-2'>Accordion Content</h3>\n            <p className='text-secondary text-sm'>\n              This content animates smoothly when toggled. The animation\n              respects reduced motion preferences.\n            </p>\n          </div>\n        </AnimatedAccordion>\n      </div>\n    );\n  },\n};\n\nexport const FAQExample: Story = {\n  render: function FAQAccordion() {\n    const [openIndex, setOpenIndex] = useState<number | null>(null);\n\n    const faqs = [\n      {\n        q: 'What is Jovie?',\n        a: 'Jovie is a link-in-bio platform for artists and creators.',\n      },\n      {\n        q: 'Is it free?',\n        a: 'Yes! Jovie offers a free tier with all essential features.',\n      },\n      {\n        q: 'Can I remove branding?',\n        a: 'Yes, upgrade to Pro for $5/month to remove branding.',\n      },\n    ];\n\n    return (\n      <div className='w-96 space-y-2'>\n        {faqs.map((faq, index) => (\n          <div\n            key={index}\n            className='border border-subtle rounded-lg overflow-hidden'\n          >\n            <button\n              onClick={() => setOpenIndex(openIndex === index ? null : index)}\n              className='w-full px-4 py-3 text-left font-medium flex justify-between items-center'\n            >\n              {faq.q}\n              <span>{openIndex === index ? '−' : '+'}</span>\n            </button>\n            <AnimatedAccordion isOpen={openIndex === index}>\n              <div className='px-4 pb-3 text-secondary text-sm'>{faq.a}</div>\n            </AnimatedAccordion>\n          </div>\n        ))}\n      </div>\n    );\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/ArtistCard.tsx" },
        "span": [3097, 3220],
        "sourceCode": "'use client';\n\nimport { type MotionProps, motion, useReducedMotion } from 'framer-motion';\nimport Image from 'next/image';\n\n// import { Button } from './Button'; // Not used in current implementation\n\ninterface ArtistCardProps {\n  id: string;\n  name: string;\n  imageUrl?: string;\n  popularity?: number;\n  followers?: number;\n  spotifyUrl?: string;\n  isSelected?: boolean;\n  onSelect?: () => void;\n  className?: string;\n}\n\n// Note: id prop is kept for future extensibility\n\nexport function ArtistCard({\n  id: _id, // eslint-disable-line @typescript-eslint/no-unused-vars\n  name,\n  imageUrl,\n  popularity,\n  followers,\n  spotifyUrl,\n  isSelected = false,\n  onSelect,\n  className = '',\n}: ArtistCardProps) {\n  const formatFollowers = (count: number): string => {\n    if (count >= 1000000) {\n      return `${(count / 1000000).toFixed(1)}M`;\n    }\n    if (count >= 1000) {\n      return `${(count / 1000).toFixed(1)}K`;\n    }\n    return count.toString();\n  };\n\n  const getPopularityLabel = (score: number): string => {\n    if (score >= 80) return 'Very Popular';\n    if (score >= 60) return 'Popular';\n    if (score >= 40) return 'Emerging';\n    return 'Growing';\n  };\n\n  // Check if user prefers reduced motion\n  const prefersReducedMotion = useReducedMotion();\n\n  const whileHover: MotionProps['whileHover'] = prefersReducedMotion\n    ? { boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }\n    : {\n        scale: 1.02,\n        boxShadow:\n          '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\n        borderColor: isSelected ? undefined : 'rgb(209, 213, 219)',\n      };\n\n  const whileFocus: MotionProps['whileFocus'] = prefersReducedMotion\n    ? { boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }\n    : {\n        scale: 1.02,\n        boxShadow:\n          '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\n        borderColor: isSelected ? undefined : 'rgb(209, 213, 219)',\n      };\n\n  const transition: MotionProps['transition'] = prefersReducedMotion\n    ? { duration: 0.1 }\n    : {\n        type: 'spring',\n        stiffness: 400,\n        damping: 17,\n        mass: 0.8,\n      };\n\n  return (\n    <motion.div\n      className={`\n        relative p-4 rounded-xl border-2 cursor-pointer\n        ${\n          isSelected\n            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n            : 'border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800'\n        }\n        ${className}\n      `}\n      onClick={onSelect}\n      role='button'\n      tabIndex={0}\n      onKeyDown={e => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          onSelect?.();\n        }\n      }}\n      aria-label={`Select ${name} as your artist profile`}\n      aria-pressed={isSelected}\n      whileHover={whileHover}\n      whileFocus={whileFocus}\n      transition={transition}\n      initial={{ scale: 1, boxShadow: '0 0 0 rgba(0, 0, 0, 0)' }}\n    >\n      {/* Selection indicator */}\n      {isSelected && (\n        <div className='absolute top-2 right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center'>\n          <svg\n            className='w-4 h-4 text-white'\n            fill='currentColor'\n            viewBox='0 0 20 20'\n          >\n            <path\n              fillRule='evenodd'\n              d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z'\n              clipRule='evenodd'\n            />\n          </svg>\n        </div>\n      )}\n\n      <div className='flex items-center space-x-4'>\n        {/* Artist image */}\n        <div className='w-16 h-16 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 flex-shrink-0'>\n          {imageUrl ? (\n            <Image\n              src={imageUrl}\n              alt={name}\n              width={64}\n              height={64}\n              className='w-full h-full object-cover'\n              loading='lazy'\n            />\n          ) : (\n            <div className='w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500'>\n              <svg className='w-8 h-8' fill='currentColor' viewBox='0 0 20 20'>\n                <path\n                  fillRule='evenodd'\n                  d='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            </div>\n          )}\n        </div>\n\n        {/* Artist info */}\n        <div className='flex-1 min-w-0'>\n          <h3 className='font-semibold text-gray-900 dark:text-white text-lg truncate'>\n            {name}\n          </h3>\n\n          <div className='flex items-center space-x-3 mt-1'>\n            {followers && (\n              <span className='text-sm text-gray-600 dark:text-gray-400'>\n                {formatFollowers(followers)} followers\n              </span>\n            )}\n\n            {popularity && (\n              <span\n                className={`text-xs px-2 py-1 rounded-full font-medium ${\n                  popularity >= 80\n                    ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\n                    : popularity >= 60\n                      ? 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400'\n                      : popularity >= 40\n                        ? 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400'\n                        : 'bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400'\n                }`}\n              >\n                {getPopularityLabel(popularity)}\n              </span>\n            )}\n          </div>\n\n          {/* Spotify link */}\n          {spotifyUrl && (\n            <div className='mt-2'>\n              <a\n                href={spotifyUrl}\n                target='_blank'\n                rel='noopener noreferrer'\n                className='text-xs text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 flex items-center space-x-1'\n                onClick={e => e.stopPropagation()}\n              >\n                <svg\n                  className='w-3 h-3'\n                  viewBox='0 0 24 24'\n                  fill='currentColor'\n                >\n                  <path d='M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.84-.179-.959-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.361 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z' />\n                </svg>\n                <span>View on Spotify</span>\n              </a>\n            </div>\n          )}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/ArtistCard.tsx" },
        "span": [4069, 4134],
        "sourceCode": "'use client';\n\nimport { type MotionProps, motion, useReducedMotion } from 'framer-motion';\nimport Image from 'next/image';\n\n// import { Button } from './Button'; // Not used in current implementation\n\ninterface ArtistCardProps {\n  id: string;\n  name: string;\n  imageUrl?: string;\n  popularity?: number;\n  followers?: number;\n  spotifyUrl?: string;\n  isSelected?: boolean;\n  onSelect?: () => void;\n  className?: string;\n}\n\n// Note: id prop is kept for future extensibility\n\nexport function ArtistCard({\n  id: _id, // eslint-disable-line @typescript-eslint/no-unused-vars\n  name,\n  imageUrl,\n  popularity,\n  followers,\n  spotifyUrl,\n  isSelected = false,\n  onSelect,\n  className = '',\n}: ArtistCardProps) {\n  const formatFollowers = (count: number): string => {\n    if (count >= 1000000) {\n      return `${(count / 1000000).toFixed(1)}M`;\n    }\n    if (count >= 1000) {\n      return `${(count / 1000).toFixed(1)}K`;\n    }\n    return count.toString();\n  };\n\n  const getPopularityLabel = (score: number): string => {\n    if (score >= 80) return 'Very Popular';\n    if (score >= 60) return 'Popular';\n    if (score >= 40) return 'Emerging';\n    return 'Growing';\n  };\n\n  // Check if user prefers reduced motion\n  const prefersReducedMotion = useReducedMotion();\n\n  const whileHover: MotionProps['whileHover'] = prefersReducedMotion\n    ? { boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }\n    : {\n        scale: 1.02,\n        boxShadow:\n          '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\n        borderColor: isSelected ? undefined : 'rgb(209, 213, 219)',\n      };\n\n  const whileFocus: MotionProps['whileFocus'] = prefersReducedMotion\n    ? { boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }\n    : {\n        scale: 1.02,\n        boxShadow:\n          '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\n        borderColor: isSelected ? undefined : 'rgb(209, 213, 219)',\n      };\n\n  const transition: MotionProps['transition'] = prefersReducedMotion\n    ? { duration: 0.1 }\n    : {\n        type: 'spring',\n        stiffness: 400,\n        damping: 17,\n        mass: 0.8,\n      };\n\n  return (\n    <motion.div\n      className={`\n        relative p-4 rounded-xl border-2 cursor-pointer\n        ${\n          isSelected\n            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n            : 'border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800'\n        }\n        ${className}\n      `}\n      onClick={onSelect}\n      role='button'\n      tabIndex={0}\n      onKeyDown={e => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          onSelect?.();\n        }\n      }}\n      aria-label={`Select ${name} as your artist profile`}\n      aria-pressed={isSelected}\n      whileHover={whileHover}\n      whileFocus={whileFocus}\n      transition={transition}\n      initial={{ scale: 1, boxShadow: '0 0 0 rgba(0, 0, 0, 0)' }}\n    >\n      {/* Selection indicator */}\n      {isSelected && (\n        <div className='absolute top-2 right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center'>\n          <svg\n            className='w-4 h-4 text-white'\n            fill='currentColor'\n            viewBox='0 0 20 20'\n          >\n            <path\n              fillRule='evenodd'\n              d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z'\n              clipRule='evenodd'\n            />\n          </svg>\n        </div>\n      )}\n\n      <div className='flex items-center space-x-4'>\n        {/* Artist image */}\n        <div className='w-16 h-16 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 flex-shrink-0'>\n          {imageUrl ? (\n            <Image\n              src={imageUrl}\n              alt={name}\n              width={64}\n              height={64}\n              className='w-full h-full object-cover'\n              loading='lazy'\n            />\n          ) : (\n            <div className='w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500'>\n              <svg className='w-8 h-8' fill='currentColor' viewBox='0 0 20 20'>\n                <path\n                  fillRule='evenodd'\n                  d='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            </div>\n          )}\n        </div>\n\n        {/* Artist info */}\n        <div className='flex-1 min-w-0'>\n          <h3 className='font-semibold text-gray-900 dark:text-white text-lg truncate'>\n            {name}\n          </h3>\n\n          <div className='flex items-center space-x-3 mt-1'>\n            {followers && (\n              <span className='text-sm text-gray-600 dark:text-gray-400'>\n                {formatFollowers(followers)} followers\n              </span>\n            )}\n\n            {popularity && (\n              <span\n                className={`text-xs px-2 py-1 rounded-full font-medium ${\n                  popularity >= 80\n                    ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\n                    : popularity >= 60\n                      ? 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400'\n                      : popularity >= 40\n                        ? 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400'\n                        : 'bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400'\n                }`}\n              >\n                {getPopularityLabel(popularity)}\n              </span>\n            )}\n          </div>\n\n          {/* Spotify link */}\n          {spotifyUrl && (\n            <div className='mt-2'>\n              <a\n                href={spotifyUrl}\n                target='_blank'\n                rel='noopener noreferrer'\n                className='text-xs text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 flex items-center space-x-1'\n                onClick={e => e.stopPropagation()}\n              >\n                <svg\n                  className='w-3 h-3'\n                  viewBox='0 0 24 24'\n                  fill='currentColor'\n                >\n                  <path d='M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.84-.179-.959-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.361 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z' />\n                </svg>\n                <span>View on Spotify</span>\n              </a>\n            </div>\n          )}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/ArtistCard.tsx" },
        "span": [6150, 6286],
        "sourceCode": "'use client';\n\nimport { type MotionProps, motion, useReducedMotion } from 'framer-motion';\nimport Image from 'next/image';\n\n// import { Button } from './Button'; // Not used in current implementation\n\ninterface ArtistCardProps {\n  id: string;\n  name: string;\n  imageUrl?: string;\n  popularity?: number;\n  followers?: number;\n  spotifyUrl?: string;\n  isSelected?: boolean;\n  onSelect?: () => void;\n  className?: string;\n}\n\n// Note: id prop is kept for future extensibility\n\nexport function ArtistCard({\n  id: _id, // eslint-disable-line @typescript-eslint/no-unused-vars\n  name,\n  imageUrl,\n  popularity,\n  followers,\n  spotifyUrl,\n  isSelected = false,\n  onSelect,\n  className = '',\n}: ArtistCardProps) {\n  const formatFollowers = (count: number): string => {\n    if (count >= 1000000) {\n      return `${(count / 1000000).toFixed(1)}M`;\n    }\n    if (count >= 1000) {\n      return `${(count / 1000).toFixed(1)}K`;\n    }\n    return count.toString();\n  };\n\n  const getPopularityLabel = (score: number): string => {\n    if (score >= 80) return 'Very Popular';\n    if (score >= 60) return 'Popular';\n    if (score >= 40) return 'Emerging';\n    return 'Growing';\n  };\n\n  // Check if user prefers reduced motion\n  const prefersReducedMotion = useReducedMotion();\n\n  const whileHover: MotionProps['whileHover'] = prefersReducedMotion\n    ? { boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }\n    : {\n        scale: 1.02,\n        boxShadow:\n          '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\n        borderColor: isSelected ? undefined : 'rgb(209, 213, 219)',\n      };\n\n  const whileFocus: MotionProps['whileFocus'] = prefersReducedMotion\n    ? { boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }\n    : {\n        scale: 1.02,\n        boxShadow:\n          '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\n        borderColor: isSelected ? undefined : 'rgb(209, 213, 219)',\n      };\n\n  const transition: MotionProps['transition'] = prefersReducedMotion\n    ? { duration: 0.1 }\n    : {\n        type: 'spring',\n        stiffness: 400,\n        damping: 17,\n        mass: 0.8,\n      };\n\n  return (\n    <motion.div\n      className={`\n        relative p-4 rounded-xl border-2 cursor-pointer\n        ${\n          isSelected\n            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n            : 'border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800'\n        }\n        ${className}\n      `}\n      onClick={onSelect}\n      role='button'\n      tabIndex={0}\n      onKeyDown={e => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          onSelect?.();\n        }\n      }}\n      aria-label={`Select ${name} as your artist profile`}\n      aria-pressed={isSelected}\n      whileHover={whileHover}\n      whileFocus={whileFocus}\n      transition={transition}\n      initial={{ scale: 1, boxShadow: '0 0 0 rgba(0, 0, 0, 0)' }}\n    >\n      {/* Selection indicator */}\n      {isSelected && (\n        <div className='absolute top-2 right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center'>\n          <svg\n            className='w-4 h-4 text-white'\n            fill='currentColor'\n            viewBox='0 0 20 20'\n          >\n            <path\n              fillRule='evenodd'\n              d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z'\n              clipRule='evenodd'\n            />\n          </svg>\n        </div>\n      )}\n\n      <div className='flex items-center space-x-4'>\n        {/* Artist image */}\n        <div className='w-16 h-16 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 flex-shrink-0'>\n          {imageUrl ? (\n            <Image\n              src={imageUrl}\n              alt={name}\n              width={64}\n              height={64}\n              className='w-full h-full object-cover'\n              loading='lazy'\n            />\n          ) : (\n            <div className='w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500'>\n              <svg className='w-8 h-8' fill='currentColor' viewBox='0 0 20 20'>\n                <path\n                  fillRule='evenodd'\n                  d='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z'\n                  clipRule='evenodd'\n                />\n              </svg>\n            </div>\n          )}\n        </div>\n\n        {/* Artist info */}\n        <div className='flex-1 min-w-0'>\n          <h3 className='font-semibold text-gray-900 dark:text-white text-lg truncate'>\n            {name}\n          </h3>\n\n          <div className='flex items-center space-x-3 mt-1'>\n            {followers && (\n              <span className='text-sm text-gray-600 dark:text-gray-400'>\n                {formatFollowers(followers)} followers\n              </span>\n            )}\n\n            {popularity && (\n              <span\n                className={`text-xs px-2 py-1 rounded-full font-medium ${\n                  popularity >= 80\n                    ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\n                    : popularity >= 60\n                      ? 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400'\n                      : popularity >= 40\n                        ? 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400'\n                        : 'bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400'\n                }`}\n              >\n                {getPopularityLabel(popularity)}\n              </span>\n            )}\n          </div>\n\n          {/* Spotify link */}\n          {spotifyUrl && (\n            <div className='mt-2'>\n              <a\n                href={spotifyUrl}\n                target='_blank'\n                rel='noopener noreferrer'\n                className='text-xs text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 flex items-center space-x-1'\n                onClick={e => e.stopPropagation()}\n              >\n                <svg\n                  className='w-3 h-3'\n                  viewBox='0 0 24 24'\n                  fill='currentColor'\n                >\n                  <path d='M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.84-.179-.959-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.361 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z' />\n                </svg>\n                <span>View on Spotify</span>\n              </a>\n            </div>\n          )}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/AvatarUploadable.tsx" },
        "span": [13175, 13828],
        "sourceCode": "'use client';\n\nimport { Check, Upload, X } from 'lucide-react';\nimport React, {\n  forwardRef,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport type { UploadErrorCode } from '@/app/api/images/upload/route';\nimport { Avatar, type AvatarProps } from '@/components/atoms/Avatar';\nimport { track } from '@/lib/analytics';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  formatAcceptedImageTypes,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { cn } from '@/lib/utils';\n\nexport interface AvatarUploadableProps extends Omit<AvatarProps, 'src'> {\n  /** Current avatar image URL */\n  src?: string | null;\n  /** Whether uploading is enabled (controlled by feature flag) */\n  uploadable?: boolean;\n  /** Upload callback that returns a promise with the new image URL */\n  onUpload?: (file: File) => Promise<string>;\n  /** Progress percentage (0-100) for upload progress */\n  progress?: number;\n  /** Error callback */\n  onError?: (error: string) => void;\n  /** Success callback with new image URL */\n  onSuccess?: (imageUrl: string) => void;\n  /** Retry callback when upload fails with retryable error */\n  onRetryableError?: (error: string, code: UploadErrorCode) => void;\n  /** Maximum file size in bytes (default: 4MB, aligned with /api/images/upload) */\n  maxFileSize?: number;\n  /** Accepted file types */\n  acceptedTypes?: readonly string[];\n  /** Whether to show hover overlay when uploadable */\n  showHoverOverlay?: boolean;\n}\n\n// Progress ring SVG constants\nconst STROKE_WIDTH = 3;\n// const RING_SIZE = 100; // Percentage of avatar size (unused for now)\nconst RADIUS = 50 - STROKE_WIDTH / 2;\nconst CIRCUMFERENCE = 2 * Math.PI * RADIUS;\nconst SIZE_MAP = {\n  xs: 24,\n  sm: 32,\n  md: 48,\n  lg: 64,\n  xl: 80,\n  '2xl': 96,\n  'display-sm': 112,\n  'display-md': 128,\n  'display-lg': 160,\n  'display-xl': 192,\n  'display-2xl': 224,\n  'display-3xl': 256,\n  'display-4xl': 384,\n};\n\n// File validation\nconst DEFAULT_MAX_FILE_SIZE = AVATAR_MAX_FILE_SIZE_BYTES; // API enforced\nconst DEFAULT_ACCEPTED_TYPES = SUPPORTED_IMAGE_MIME_TYPES;\n\nconst STATUS_COLORS = {\n  uploading: 'text-indigo-500',\n  success: 'text-green-500',\n  error: 'text-red-500',\n  idle: 'text-secondary-token',\n} as const;\n\nfunction mergeRefs<T>(...refs: Array<React.Ref<T>>) {\n  return (node: T) => {\n    refs.forEach(ref => {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        (ref as React.MutableRefObject<T | null>).current = node;\n      }\n    });\n  };\n}\n\n/**\n * Validates a file for upload\n */\nfunction validateFile(\n  file: File,\n  maxFileSize: number = DEFAULT_MAX_FILE_SIZE,\n  acceptedTypes: readonly string[] = DEFAULT_ACCEPTED_TYPES\n): string | null {\n  const normalizedType = file.type.toLowerCase?.() ?? file.type;\n  if (!acceptedTypes.includes(normalizedType)) {\n    const allowedTypes = formatAcceptedImageTypes(acceptedTypes);\n    return `Invalid file type. Please select ${allowedTypes.join(', ')} files only.`;\n  }\n\n  if (file.size > maxFileSize) {\n    const sizeMB = Math.round(maxFileSize / (1024 * 1024));\n    return `File too large. Please select a file smaller than ${sizeMB}MB.`;\n  }\n\n  return null;\n}\n\n/**\n * Progress Ring Component for radial upload progress\n */\nfunction ProgressRing({\n  progress,\n  size,\n  status,\n}: {\n  progress: number;\n  size: number;\n  status: 'uploading' | 'success' | 'error' | 'idle';\n}) {\n  const strokeDasharray = `${(progress / 100) * CIRCUMFERENCE} ${CIRCUMFERENCE}`;\n  const ringColor = STATUS_COLORS[status];\n\n  return (\n    <div\n      className='pointer-events-none absolute inset-0 flex items-center justify-center'\n      aria-hidden='true'\n      data-testid='avatar-uploadable-progress'\n    >\n      <svg\n        width={size}\n        height={size}\n        viewBox='0 0 100 100'\n        className='-rotate-90'\n      >\n        {/* Background ring */}\n        <circle\n          cx='50'\n          cy='50'\n          r={RADIUS}\n          fill='none'\n          stroke='currentColor'\n          strokeWidth={STROKE_WIDTH}\n          className='text-border-subtle'\n        />\n        {/* Progress ring */}\n        <circle\n          cx='50'\n          cy='50'\n          r={RADIUS}\n          fill='none'\n          stroke='currentColor'\n          strokeWidth={STROKE_WIDTH}\n          strokeDasharray={strokeDasharray}\n          strokeLinecap='round'\n          className={cn(\n            'stroke-current transition-all duration-300 ease-out',\n            ringColor\n          )}\n        />\n      </svg>\n\n      {/* Status icons */}\n      <div className='absolute inset-0 flex items-center justify-center'>\n        {status === 'success' && (\n          <div className='rounded-full bg-white text-green-600 ring-1 ring-green-100 shadow-sm transition-all duration-200 ease-out animate-in fade-in zoom-in motion-reduce:animate-none'>\n            <Check size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n        {status === 'error' && (\n          <div className='rounded-full bg-white text-red-600 ring-1 ring-red-100 shadow-sm transition-all duration-200 ease-out animate-in fade-in zoom-in motion-reduce:animate-none'>\n            <X size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n        {status === 'uploading' && (\n          <div className='rounded-full bg-indigo-500 text-white ring-1 ring-indigo-100 shadow-sm animate-pulse motion-reduce:animate-none transition-all duration-200 ease-out'>\n            <Upload size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/**\n * Uploadable Avatar component with radial progress and drag/drop\n *\n * Features:\n * - Radial progress arc around avatar during upload\n * - Drag & drop file upload\n * - Click to upload with file picker\n * - File validation with user-friendly errors\n * - Success/error states with visual feedback\n * - Keyboard accessibility\n * - Analytics tracking\n * - Feature flag controlled\n */\nexport const AvatarUploadable = React.memo(\n  forwardRef<HTMLDivElement, AvatarUploadableProps>(function AvatarUploadable(\n    {\n      src,\n      uploadable = false,\n      onUpload,\n      progress = 0,\n      onError,\n      onSuccess,\n      onRetryableError,\n      maxFileSize = DEFAULT_MAX_FILE_SIZE,\n      acceptedTypes = DEFAULT_ACCEPTED_TYPES,\n      showHoverOverlay = true,\n      className,\n      ...avatarProps\n    },\n    forwardedRef\n  ) {\n    const [isDragOver, setIsDragOver] = useState(false);\n    const [isUploading, setIsUploading] = useState(false);\n    const [uploadStatus, setUploadStatus] = useState<\n      'idle' | 'uploading' | 'success' | 'error'\n    >('idle');\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n    const statusResetTimeoutRef = useRef<number | null>(null);\n    const mergedRef = useMemo(\n      () => mergeRefs<HTMLDivElement>(containerRef, forwardedRef),\n      [forwardedRef]\n    );\n\n    const avatarSize = avatarProps.size || 'md';\n    const numericSize = SIZE_MAP[avatarSize];\n    const acceptedTypeList = useMemo(\n      () => acceptedTypes.join(','),\n      [acceptedTypes]\n    );\n\n    const clearStatusReset = useCallback(() => {\n      if (statusResetTimeoutRef.current) {\n        window.clearTimeout(statusResetTimeoutRef.current);\n        statusResetTimeoutRef.current = null;\n      }\n    }, []);\n\n    const resetStatus = useCallback(\n      (delay: number) => {\n        clearStatusReset();\n        statusResetTimeoutRef.current = window.setTimeout(() => {\n          setUploadStatus('idle');\n          statusResetTimeoutRef.current = null;\n        }, delay);\n      },\n      [clearStatusReset]\n    );\n\n    const setPreviewFromFile = useCallback((file: File) => {\n      const canUseObjectUrl =\n        typeof URL !== 'undefined' && typeof URL.createObjectURL === 'function';\n\n      if (!canUseObjectUrl) {\n        return;\n      }\n\n      const url = URL.createObjectURL(file);\n      setPreviewUrl(prev => {\n        if (\n          prev &&\n          prev.startsWith('blob:') &&\n          typeof URL.revokeObjectURL === 'function'\n        ) {\n          URL.revokeObjectURL(prev);\n        }\n        return url;\n      });\n    }, []);\n\n    useEffect(\n      () => () => {\n        if (\n          previewUrl &&\n          previewUrl.startsWith('blob:') &&\n          typeof URL !== 'undefined' &&\n          typeof URL.revokeObjectURL === 'function'\n        ) {\n          URL.revokeObjectURL(previewUrl);\n        }\n      },\n      [previewUrl]\n    );\n\n    const handleFileUpload = useCallback(\n      async (file: File) => {\n        if (!onUpload) return;\n\n        clearStatusReset();\n        const validationError = validateFile(file, maxFileSize, acceptedTypes);\n        if (validationError) {\n          onError?.(validationError);\n          setUploadStatus('error');\n          track('avatar_upload_error', {\n            error: 'validation_failed',\n            message: validationError,\n          });\n          resetStatus(3000);\n          return;\n        }\n\n        setIsUploading(true);\n        setUploadStatus('uploading');\n        setPreviewFromFile(file);\n        track('avatar_upload_start', {\n          file_size: file.size,\n          file_type: file.type,\n        });\n\n        try {\n          const imageUrl = await onUpload(file);\n          setUploadStatus('success');\n          setPreviewUrl(imageUrl);\n          onSuccess?.(imageUrl);\n          track('avatar_upload_success', { file_size: file.size });\n          resetStatus(2000);\n        } catch (error) {\n          // Handle structured error responses\n          const errorData = error as {\n            message?: string;\n            code?: UploadErrorCode;\n            retryable?: boolean;\n          };\n          const errorMessage = errorData.message ?? 'Upload failed';\n          const errorCode = errorData.code;\n          const isRetryable = errorData.retryable ?? false;\n\n          setUploadStatus('error');\n          onError?.(errorMessage);\n\n          if (isRetryable && errorCode && onRetryableError) {\n            onRetryableError(errorMessage, errorCode);\n          }\n\n          track('avatar_upload_error', {\n            error: errorCode ?? 'upload_failed',\n            message: errorMessage,\n            retryable: isRetryable,\n          });\n          // Revert preview to previous image on failure\n          setPreviewUrl(null);\n          resetStatus(3000);\n        } finally {\n          setIsUploading(false);\n        }\n      },\n      [\n        acceptedTypes,\n        clearStatusReset,\n        maxFileSize,\n        onError,\n        onRetryableError,\n        onSuccess,\n        onUpload,\n        resetStatus,\n        setPreviewFromFile,\n      ]\n    );\n\n    const handleFileSelect = useCallback(\n      (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        if (file) {\n          handleFileUpload(file);\n        }\n      },\n      [handleFileUpload]\n    );\n\n    const handleDragEnter = useCallback(\n      (e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        if (uploadable && onUpload && !isUploading) {\n          setIsDragOver(true);\n        }\n      },\n      [uploadable, onUpload, isUploading]\n    );\n\n    const handleDragLeave = useCallback((e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!containerRef.current?.contains(e.relatedTarget as Node)) {\n        setIsDragOver(false);\n      }\n    }, []);\n\n    const handleDragOver = useCallback((e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n    }, []);\n\n    const handleDrop = useCallback(\n      (e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragOver(false);\n\n        if (!uploadable || !onUpload || isUploading) return;\n\n        const file = e.dataTransfer.files?.[0];\n        if (file) {\n          handleFileUpload(file);\n        }\n      },\n      [uploadable, onUpload, isUploading, handleFileUpload]\n    );\n\n    const handleClick = useCallback(() => {\n      if (uploadable && onUpload && !isUploading) {\n        fileInputRef.current?.click();\n      }\n    }, [uploadable, onUpload, isUploading]);\n\n    const handleKeyDown = useCallback(\n      (e: React.KeyboardEvent) => {\n        if (\n          uploadable &&\n          onUpload &&\n          !isUploading &&\n          (e.key === 'Enter' || e.key === ' ')\n        ) {\n          e.preventDefault();\n          fileInputRef.current?.click();\n        }\n      },\n      [uploadable, onUpload, isUploading]\n    );\n\n    useEffect(() => {\n      if (isUploading && progress > 0) {\n        track('avatar_upload_progress', { progress });\n      }\n    }, [isUploading, progress]);\n\n    useEffect(() => clearStatusReset, [clearStatusReset]);\n\n    const canUpload = uploadable && Boolean(onUpload);\n    const isInteractive = canUpload && !isUploading;\n    const showProgress =\n      isUploading || uploadStatus === 'success' || uploadStatus === 'error';\n    const currentProgress =\n      uploadStatus === 'success' || uploadStatus === 'error' ? 100 : progress;\n\n    return (\n      <div\n        ref={mergedRef}\n        className={cn(\n          'relative group outline-none',\n          isInteractive ? 'cursor-pointer focus-ring' : 'cursor-default',\n          className\n        )}\n        onDragEnter={handleDragEnter}\n        onDragLeave={handleDragLeave}\n        onDragOver={handleDragOver}\n        onDrop={handleDrop}\n        onClick={handleClick}\n        onKeyDown={handleKeyDown}\n        tabIndex={isInteractive ? 0 : undefined}\n        role={isInteractive ? 'button' : undefined}\n        aria-label={isInteractive ? 'Upload profile photo' : undefined}\n        aria-disabled={!isInteractive}\n        aria-busy={isUploading}\n      >\n        <Avatar\n          src={previewUrl ?? src}\n          className={cn(\n            'transition-all duration-200 ease-out',\n            isInteractive &&\n              'group-hover:brightness-95 group-focus-visible:ring-2 group-focus-visible:ring-accent group-focus-visible:ring-offset-2 group-focus-visible:ring-offset-(--color-bg-base)',\n            isDragOver && 'scale-105',\n            isUploading && 'opacity-80'\n          )}\n          {...avatarProps}\n        />\n\n        {isInteractive && showHoverOverlay && (\n          <div\n            className={cn(\n              'absolute inset-0 flex items-center justify-center rounded-full',\n              'bg-surface-3/80 text-primary-token ring-1 ring-[color:var(--color-border-subtle)] backdrop-blur',\n              'opacity-0 transition-opacity duration-200 group-hover:opacity-100'\n            )}\n            aria-hidden='true'\n            data-testid='avatar-uploadable-hover-overlay'\n          >\n            <Upload size={numericSize * 0.3} />\n          </div>\n        )}\n\n        {isDragOver && (\n          <div\n            className={cn(\n              'absolute inset-0 flex items-center justify-center rounded-full',\n              'bg-[color:var(--color-accent)]/90 text-[color:var(--color-accent-foreground)]',\n              'border-2 border-[color:var(--color-accent)] shadow-md transition-transform duration-200'\n            )}\n            aria-hidden='true'\n            data-testid='avatar-uploadable-drag-overlay'\n          >\n            <Upload size={numericSize * 0.4} />\n          </div>\n        )}\n\n        {showProgress && (\n          <ProgressRing\n            progress={Math.min(100, Math.max(0, currentProgress))}\n            size={numericSize}\n            status={uploadStatus}\n          />\n        )}\n\n        {canUpload && (\n          <input\n            ref={fileInputRef}\n            type='file'\n            accept={acceptedTypeList}\n            onChange={handleFileSelect}\n            className='sr-only'\n            aria-label='Choose profile photo file'\n          />\n        )}\n\n        {progress > 0 && (\n          <div className='sr-only' aria-live='polite' aria-atomic='true'>\n            Uploading profile photo: {Math.round(progress)}% complete\n          </div>\n        )}\n\n        {uploadStatus === 'success' && (\n          <div className='sr-only' aria-live='polite'>\n            Profile photo uploaded successfully\n          </div>\n        )}\n\n        {uploadStatus === 'error' && (\n          <div className='sr-only' aria-live='assertive'>\n            Profile photo upload failed\n          </div>\n        )}\n      </div>\n    );\n  })\n);\n\nAvatarUploadable.displayName = 'AvatarUploadable';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noStaticElementInteractions",
      "severity": "warning",
      "description": "Static Elements should not be interactive.",
      "message": [
        {
          "elements": [],
          "content": "Static Elements should not be interactive."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "To add interactivity such as a mouse or key event listener to a static element, give the element an appropriate role value."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/AvatarUploadable.tsx" },
        "span": [13175, 13828],
        "sourceCode": "'use client';\n\nimport { Check, Upload, X } from 'lucide-react';\nimport React, {\n  forwardRef,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport type { UploadErrorCode } from '@/app/api/images/upload/route';\nimport { Avatar, type AvatarProps } from '@/components/atoms/Avatar';\nimport { track } from '@/lib/analytics';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  formatAcceptedImageTypes,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { cn } from '@/lib/utils';\n\nexport interface AvatarUploadableProps extends Omit<AvatarProps, 'src'> {\n  /** Current avatar image URL */\n  src?: string | null;\n  /** Whether uploading is enabled (controlled by feature flag) */\n  uploadable?: boolean;\n  /** Upload callback that returns a promise with the new image URL */\n  onUpload?: (file: File) => Promise<string>;\n  /** Progress percentage (0-100) for upload progress */\n  progress?: number;\n  /** Error callback */\n  onError?: (error: string) => void;\n  /** Success callback with new image URL */\n  onSuccess?: (imageUrl: string) => void;\n  /** Retry callback when upload fails with retryable error */\n  onRetryableError?: (error: string, code: UploadErrorCode) => void;\n  /** Maximum file size in bytes (default: 4MB, aligned with /api/images/upload) */\n  maxFileSize?: number;\n  /** Accepted file types */\n  acceptedTypes?: readonly string[];\n  /** Whether to show hover overlay when uploadable */\n  showHoverOverlay?: boolean;\n}\n\n// Progress ring SVG constants\nconst STROKE_WIDTH = 3;\n// const RING_SIZE = 100; // Percentage of avatar size (unused for now)\nconst RADIUS = 50 - STROKE_WIDTH / 2;\nconst CIRCUMFERENCE = 2 * Math.PI * RADIUS;\nconst SIZE_MAP = {\n  xs: 24,\n  sm: 32,\n  md: 48,\n  lg: 64,\n  xl: 80,\n  '2xl': 96,\n  'display-sm': 112,\n  'display-md': 128,\n  'display-lg': 160,\n  'display-xl': 192,\n  'display-2xl': 224,\n  'display-3xl': 256,\n  'display-4xl': 384,\n};\n\n// File validation\nconst DEFAULT_MAX_FILE_SIZE = AVATAR_MAX_FILE_SIZE_BYTES; // API enforced\nconst DEFAULT_ACCEPTED_TYPES = SUPPORTED_IMAGE_MIME_TYPES;\n\nconst STATUS_COLORS = {\n  uploading: 'text-indigo-500',\n  success: 'text-green-500',\n  error: 'text-red-500',\n  idle: 'text-secondary-token',\n} as const;\n\nfunction mergeRefs<T>(...refs: Array<React.Ref<T>>) {\n  return (node: T) => {\n    refs.forEach(ref => {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        (ref as React.MutableRefObject<T | null>).current = node;\n      }\n    });\n  };\n}\n\n/**\n * Validates a file for upload\n */\nfunction validateFile(\n  file: File,\n  maxFileSize: number = DEFAULT_MAX_FILE_SIZE,\n  acceptedTypes: readonly string[] = DEFAULT_ACCEPTED_TYPES\n): string | null {\n  const normalizedType = file.type.toLowerCase?.() ?? file.type;\n  if (!acceptedTypes.includes(normalizedType)) {\n    const allowedTypes = formatAcceptedImageTypes(acceptedTypes);\n    return `Invalid file type. Please select ${allowedTypes.join(', ')} files only.`;\n  }\n\n  if (file.size > maxFileSize) {\n    const sizeMB = Math.round(maxFileSize / (1024 * 1024));\n    return `File too large. Please select a file smaller than ${sizeMB}MB.`;\n  }\n\n  return null;\n}\n\n/**\n * Progress Ring Component for radial upload progress\n */\nfunction ProgressRing({\n  progress,\n  size,\n  status,\n}: {\n  progress: number;\n  size: number;\n  status: 'uploading' | 'success' | 'error' | 'idle';\n}) {\n  const strokeDasharray = `${(progress / 100) * CIRCUMFERENCE} ${CIRCUMFERENCE}`;\n  const ringColor = STATUS_COLORS[status];\n\n  return (\n    <div\n      className='pointer-events-none absolute inset-0 flex items-center justify-center'\n      aria-hidden='true'\n      data-testid='avatar-uploadable-progress'\n    >\n      <svg\n        width={size}\n        height={size}\n        viewBox='0 0 100 100'\n        className='-rotate-90'\n      >\n        {/* Background ring */}\n        <circle\n          cx='50'\n          cy='50'\n          r={RADIUS}\n          fill='none'\n          stroke='currentColor'\n          strokeWidth={STROKE_WIDTH}\n          className='text-border-subtle'\n        />\n        {/* Progress ring */}\n        <circle\n          cx='50'\n          cy='50'\n          r={RADIUS}\n          fill='none'\n          stroke='currentColor'\n          strokeWidth={STROKE_WIDTH}\n          strokeDasharray={strokeDasharray}\n          strokeLinecap='round'\n          className={cn(\n            'stroke-current transition-all duration-300 ease-out',\n            ringColor\n          )}\n        />\n      </svg>\n\n      {/* Status icons */}\n      <div className='absolute inset-0 flex items-center justify-center'>\n        {status === 'success' && (\n          <div className='rounded-full bg-white text-green-600 ring-1 ring-green-100 shadow-sm transition-all duration-200 ease-out animate-in fade-in zoom-in motion-reduce:animate-none'>\n            <Check size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n        {status === 'error' && (\n          <div className='rounded-full bg-white text-red-600 ring-1 ring-red-100 shadow-sm transition-all duration-200 ease-out animate-in fade-in zoom-in motion-reduce:animate-none'>\n            <X size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n        {status === 'uploading' && (\n          <div className='rounded-full bg-indigo-500 text-white ring-1 ring-indigo-100 shadow-sm animate-pulse motion-reduce:animate-none transition-all duration-200 ease-out'>\n            <Upload size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/**\n * Uploadable Avatar component with radial progress and drag/drop\n *\n * Features:\n * - Radial progress arc around avatar during upload\n * - Drag & drop file upload\n * - Click to upload with file picker\n * - File validation with user-friendly errors\n * - Success/error states with visual feedback\n * - Keyboard accessibility\n * - Analytics tracking\n * - Feature flag controlled\n */\nexport const AvatarUploadable = React.memo(\n  forwardRef<HTMLDivElement, AvatarUploadableProps>(function AvatarUploadable(\n    {\n      src,\n      uploadable = false,\n      onUpload,\n      progress = 0,\n      onError,\n      onSuccess,\n      onRetryableError,\n      maxFileSize = DEFAULT_MAX_FILE_SIZE,\n      acceptedTypes = DEFAULT_ACCEPTED_TYPES,\n      showHoverOverlay = true,\n      className,\n      ...avatarProps\n    },\n    forwardedRef\n  ) {\n    const [isDragOver, setIsDragOver] = useState(false);\n    const [isUploading, setIsUploading] = useState(false);\n    const [uploadStatus, setUploadStatus] = useState<\n      'idle' | 'uploading' | 'success' | 'error'\n    >('idle');\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n    const statusResetTimeoutRef = useRef<number | null>(null);\n    const mergedRef = useMemo(\n      () => mergeRefs<HTMLDivElement>(containerRef, forwardedRef),\n      [forwardedRef]\n    );\n\n    const avatarSize = avatarProps.size || 'md';\n    const numericSize = SIZE_MAP[avatarSize];\n    const acceptedTypeList = useMemo(\n      () => acceptedTypes.join(','),\n      [acceptedTypes]\n    );\n\n    const clearStatusReset = useCallback(() => {\n      if (statusResetTimeoutRef.current) {\n        window.clearTimeout(statusResetTimeoutRef.current);\n        statusResetTimeoutRef.current = null;\n      }\n    }, []);\n\n    const resetStatus = useCallback(\n      (delay: number) => {\n        clearStatusReset();\n        statusResetTimeoutRef.current = window.setTimeout(() => {\n          setUploadStatus('idle');\n          statusResetTimeoutRef.current = null;\n        }, delay);\n      },\n      [clearStatusReset]\n    );\n\n    const setPreviewFromFile = useCallback((file: File) => {\n      const canUseObjectUrl =\n        typeof URL !== 'undefined' && typeof URL.createObjectURL === 'function';\n\n      if (!canUseObjectUrl) {\n        return;\n      }\n\n      const url = URL.createObjectURL(file);\n      setPreviewUrl(prev => {\n        if (\n          prev &&\n          prev.startsWith('blob:') &&\n          typeof URL.revokeObjectURL === 'function'\n        ) {\n          URL.revokeObjectURL(prev);\n        }\n        return url;\n      });\n    }, []);\n\n    useEffect(\n      () => () => {\n        if (\n          previewUrl &&\n          previewUrl.startsWith('blob:') &&\n          typeof URL !== 'undefined' &&\n          typeof URL.revokeObjectURL === 'function'\n        ) {\n          URL.revokeObjectURL(previewUrl);\n        }\n      },\n      [previewUrl]\n    );\n\n    const handleFileUpload = useCallback(\n      async (file: File) => {\n        if (!onUpload) return;\n\n        clearStatusReset();\n        const validationError = validateFile(file, maxFileSize, acceptedTypes);\n        if (validationError) {\n          onError?.(validationError);\n          setUploadStatus('error');\n          track('avatar_upload_error', {\n            error: 'validation_failed',\n            message: validationError,\n          });\n          resetStatus(3000);\n          return;\n        }\n\n        setIsUploading(true);\n        setUploadStatus('uploading');\n        setPreviewFromFile(file);\n        track('avatar_upload_start', {\n          file_size: file.size,\n          file_type: file.type,\n        });\n\n        try {\n          const imageUrl = await onUpload(file);\n          setUploadStatus('success');\n          setPreviewUrl(imageUrl);\n          onSuccess?.(imageUrl);\n          track('avatar_upload_success', { file_size: file.size });\n          resetStatus(2000);\n        } catch (error) {\n          // Handle structured error responses\n          const errorData = error as {\n            message?: string;\n            code?: UploadErrorCode;\n            retryable?: boolean;\n          };\n          const errorMessage = errorData.message ?? 'Upload failed';\n          const errorCode = errorData.code;\n          const isRetryable = errorData.retryable ?? false;\n\n          setUploadStatus('error');\n          onError?.(errorMessage);\n\n          if (isRetryable && errorCode && onRetryableError) {\n            onRetryableError(errorMessage, errorCode);\n          }\n\n          track('avatar_upload_error', {\n            error: errorCode ?? 'upload_failed',\n            message: errorMessage,\n            retryable: isRetryable,\n          });\n          // Revert preview to previous image on failure\n          setPreviewUrl(null);\n          resetStatus(3000);\n        } finally {\n          setIsUploading(false);\n        }\n      },\n      [\n        acceptedTypes,\n        clearStatusReset,\n        maxFileSize,\n        onError,\n        onRetryableError,\n        onSuccess,\n        onUpload,\n        resetStatus,\n        setPreviewFromFile,\n      ]\n    );\n\n    const handleFileSelect = useCallback(\n      (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        if (file) {\n          handleFileUpload(file);\n        }\n      },\n      [handleFileUpload]\n    );\n\n    const handleDragEnter = useCallback(\n      (e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        if (uploadable && onUpload && !isUploading) {\n          setIsDragOver(true);\n        }\n      },\n      [uploadable, onUpload, isUploading]\n    );\n\n    const handleDragLeave = useCallback((e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!containerRef.current?.contains(e.relatedTarget as Node)) {\n        setIsDragOver(false);\n      }\n    }, []);\n\n    const handleDragOver = useCallback((e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n    }, []);\n\n    const handleDrop = useCallback(\n      (e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragOver(false);\n\n        if (!uploadable || !onUpload || isUploading) return;\n\n        const file = e.dataTransfer.files?.[0];\n        if (file) {\n          handleFileUpload(file);\n        }\n      },\n      [uploadable, onUpload, isUploading, handleFileUpload]\n    );\n\n    const handleClick = useCallback(() => {\n      if (uploadable && onUpload && !isUploading) {\n        fileInputRef.current?.click();\n      }\n    }, [uploadable, onUpload, isUploading]);\n\n    const handleKeyDown = useCallback(\n      (e: React.KeyboardEvent) => {\n        if (\n          uploadable &&\n          onUpload &&\n          !isUploading &&\n          (e.key === 'Enter' || e.key === ' ')\n        ) {\n          e.preventDefault();\n          fileInputRef.current?.click();\n        }\n      },\n      [uploadable, onUpload, isUploading]\n    );\n\n    useEffect(() => {\n      if (isUploading && progress > 0) {\n        track('avatar_upload_progress', { progress });\n      }\n    }, [isUploading, progress]);\n\n    useEffect(() => clearStatusReset, [clearStatusReset]);\n\n    const canUpload = uploadable && Boolean(onUpload);\n    const isInteractive = canUpload && !isUploading;\n    const showProgress =\n      isUploading || uploadStatus === 'success' || uploadStatus === 'error';\n    const currentProgress =\n      uploadStatus === 'success' || uploadStatus === 'error' ? 100 : progress;\n\n    return (\n      <div\n        ref={mergedRef}\n        className={cn(\n          'relative group outline-none',\n          isInteractive ? 'cursor-pointer focus-ring' : 'cursor-default',\n          className\n        )}\n        onDragEnter={handleDragEnter}\n        onDragLeave={handleDragLeave}\n        onDragOver={handleDragOver}\n        onDrop={handleDrop}\n        onClick={handleClick}\n        onKeyDown={handleKeyDown}\n        tabIndex={isInteractive ? 0 : undefined}\n        role={isInteractive ? 'button' : undefined}\n        aria-label={isInteractive ? 'Upload profile photo' : undefined}\n        aria-disabled={!isInteractive}\n        aria-busy={isUploading}\n      >\n        <Avatar\n          src={previewUrl ?? src}\n          className={cn(\n            'transition-all duration-200 ease-out',\n            isInteractive &&\n              'group-hover:brightness-95 group-focus-visible:ring-2 group-focus-visible:ring-accent group-focus-visible:ring-offset-2 group-focus-visible:ring-offset-(--color-bg-base)',\n            isDragOver && 'scale-105',\n            isUploading && 'opacity-80'\n          )}\n          {...avatarProps}\n        />\n\n        {isInteractive && showHoverOverlay && (\n          <div\n            className={cn(\n              'absolute inset-0 flex items-center justify-center rounded-full',\n              'bg-surface-3/80 text-primary-token ring-1 ring-[color:var(--color-border-subtle)] backdrop-blur',\n              'opacity-0 transition-opacity duration-200 group-hover:opacity-100'\n            )}\n            aria-hidden='true'\n            data-testid='avatar-uploadable-hover-overlay'\n          >\n            <Upload size={numericSize * 0.3} />\n          </div>\n        )}\n\n        {isDragOver && (\n          <div\n            className={cn(\n              'absolute inset-0 flex items-center justify-center rounded-full',\n              'bg-[color:var(--color-accent)]/90 text-[color:var(--color-accent-foreground)]',\n              'border-2 border-[color:var(--color-accent)] shadow-md transition-transform duration-200'\n            )}\n            aria-hidden='true'\n            data-testid='avatar-uploadable-drag-overlay'\n          >\n            <Upload size={numericSize * 0.4} />\n          </div>\n        )}\n\n        {showProgress && (\n          <ProgressRing\n            progress={Math.min(100, Math.max(0, currentProgress))}\n            size={numericSize}\n            status={uploadStatus}\n          />\n        )}\n\n        {canUpload && (\n          <input\n            ref={fileInputRef}\n            type='file'\n            accept={acceptedTypeList}\n            onChange={handleFileSelect}\n            className='sr-only'\n            aria-label='Choose profile photo file'\n          />\n        )}\n\n        {progress > 0 && (\n          <div className='sr-only' aria-live='polite' aria-atomic='true'>\n            Uploading profile photo: {Math.round(progress)}% complete\n          </div>\n        )}\n\n        {uploadStatus === 'success' && (\n          <div className='sr-only' aria-live='polite'>\n            Profile photo uploaded successfully\n          </div>\n        )}\n\n        {uploadStatus === 'error' && (\n          <div className='sr-only' aria-live='assertive'>\n            Profile photo upload failed\n          </div>\n        )}\n      </div>\n    );\n  })\n);\n\nAvatarUploadable.displayName = 'AvatarUploadable';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/AvatarUploadable.tsx" },
        "span": [13175, 13828],
        "sourceCode": "'use client';\n\nimport { Check, Upload, X } from 'lucide-react';\nimport React, {\n  forwardRef,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport type { UploadErrorCode } from '@/app/api/images/upload/route';\nimport { Avatar, type AvatarProps } from '@/components/atoms/Avatar';\nimport { track } from '@/lib/analytics';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  formatAcceptedImageTypes,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { cn } from '@/lib/utils';\n\nexport interface AvatarUploadableProps extends Omit<AvatarProps, 'src'> {\n  /** Current avatar image URL */\n  src?: string | null;\n  /** Whether uploading is enabled (controlled by feature flag) */\n  uploadable?: boolean;\n  /** Upload callback that returns a promise with the new image URL */\n  onUpload?: (file: File) => Promise<string>;\n  /** Progress percentage (0-100) for upload progress */\n  progress?: number;\n  /** Error callback */\n  onError?: (error: string) => void;\n  /** Success callback with new image URL */\n  onSuccess?: (imageUrl: string) => void;\n  /** Retry callback when upload fails with retryable error */\n  onRetryableError?: (error: string, code: UploadErrorCode) => void;\n  /** Maximum file size in bytes (default: 4MB, aligned with /api/images/upload) */\n  maxFileSize?: number;\n  /** Accepted file types */\n  acceptedTypes?: readonly string[];\n  /** Whether to show hover overlay when uploadable */\n  showHoverOverlay?: boolean;\n}\n\n// Progress ring SVG constants\nconst STROKE_WIDTH = 3;\n// const RING_SIZE = 100; // Percentage of avatar size (unused for now)\nconst RADIUS = 50 - STROKE_WIDTH / 2;\nconst CIRCUMFERENCE = 2 * Math.PI * RADIUS;\nconst SIZE_MAP = {\n  xs: 24,\n  sm: 32,\n  md: 48,\n  lg: 64,\n  xl: 80,\n  '2xl': 96,\n  'display-sm': 112,\n  'display-md': 128,\n  'display-lg': 160,\n  'display-xl': 192,\n  'display-2xl': 224,\n  'display-3xl': 256,\n  'display-4xl': 384,\n};\n\n// File validation\nconst DEFAULT_MAX_FILE_SIZE = AVATAR_MAX_FILE_SIZE_BYTES; // API enforced\nconst DEFAULT_ACCEPTED_TYPES = SUPPORTED_IMAGE_MIME_TYPES;\n\nconst STATUS_COLORS = {\n  uploading: 'text-indigo-500',\n  success: 'text-green-500',\n  error: 'text-red-500',\n  idle: 'text-secondary-token',\n} as const;\n\nfunction mergeRefs<T>(...refs: Array<React.Ref<T>>) {\n  return (node: T) => {\n    refs.forEach(ref => {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        (ref as React.MutableRefObject<T | null>).current = node;\n      }\n    });\n  };\n}\n\n/**\n * Validates a file for upload\n */\nfunction validateFile(\n  file: File,\n  maxFileSize: number = DEFAULT_MAX_FILE_SIZE,\n  acceptedTypes: readonly string[] = DEFAULT_ACCEPTED_TYPES\n): string | null {\n  const normalizedType = file.type.toLowerCase?.() ?? file.type;\n  if (!acceptedTypes.includes(normalizedType)) {\n    const allowedTypes = formatAcceptedImageTypes(acceptedTypes);\n    return `Invalid file type. Please select ${allowedTypes.join(', ')} files only.`;\n  }\n\n  if (file.size > maxFileSize) {\n    const sizeMB = Math.round(maxFileSize / (1024 * 1024));\n    return `File too large. Please select a file smaller than ${sizeMB}MB.`;\n  }\n\n  return null;\n}\n\n/**\n * Progress Ring Component for radial upload progress\n */\nfunction ProgressRing({\n  progress,\n  size,\n  status,\n}: {\n  progress: number;\n  size: number;\n  status: 'uploading' | 'success' | 'error' | 'idle';\n}) {\n  const strokeDasharray = `${(progress / 100) * CIRCUMFERENCE} ${CIRCUMFERENCE}`;\n  const ringColor = STATUS_COLORS[status];\n\n  return (\n    <div\n      className='pointer-events-none absolute inset-0 flex items-center justify-center'\n      aria-hidden='true'\n      data-testid='avatar-uploadable-progress'\n    >\n      <svg\n        width={size}\n        height={size}\n        viewBox='0 0 100 100'\n        className='-rotate-90'\n      >\n        {/* Background ring */}\n        <circle\n          cx='50'\n          cy='50'\n          r={RADIUS}\n          fill='none'\n          stroke='currentColor'\n          strokeWidth={STROKE_WIDTH}\n          className='text-border-subtle'\n        />\n        {/* Progress ring */}\n        <circle\n          cx='50'\n          cy='50'\n          r={RADIUS}\n          fill='none'\n          stroke='currentColor'\n          strokeWidth={STROKE_WIDTH}\n          strokeDasharray={strokeDasharray}\n          strokeLinecap='round'\n          className={cn(\n            'stroke-current transition-all duration-300 ease-out',\n            ringColor\n          )}\n        />\n      </svg>\n\n      {/* Status icons */}\n      <div className='absolute inset-0 flex items-center justify-center'>\n        {status === 'success' && (\n          <div className='rounded-full bg-white text-green-600 ring-1 ring-green-100 shadow-sm transition-all duration-200 ease-out animate-in fade-in zoom-in motion-reduce:animate-none'>\n            <Check size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n        {status === 'error' && (\n          <div className='rounded-full bg-white text-red-600 ring-1 ring-red-100 shadow-sm transition-all duration-200 ease-out animate-in fade-in zoom-in motion-reduce:animate-none'>\n            <X size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n        {status === 'uploading' && (\n          <div className='rounded-full bg-indigo-500 text-white ring-1 ring-indigo-100 shadow-sm animate-pulse motion-reduce:animate-none transition-all duration-200 ease-out'>\n            <Upload size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/**\n * Uploadable Avatar component with radial progress and drag/drop\n *\n * Features:\n * - Radial progress arc around avatar during upload\n * - Drag & drop file upload\n * - Click to upload with file picker\n * - File validation with user-friendly errors\n * - Success/error states with visual feedback\n * - Keyboard accessibility\n * - Analytics tracking\n * - Feature flag controlled\n */\nexport const AvatarUploadable = React.memo(\n  forwardRef<HTMLDivElement, AvatarUploadableProps>(function AvatarUploadable(\n    {\n      src,\n      uploadable = false,\n      onUpload,\n      progress = 0,\n      onError,\n      onSuccess,\n      onRetryableError,\n      maxFileSize = DEFAULT_MAX_FILE_SIZE,\n      acceptedTypes = DEFAULT_ACCEPTED_TYPES,\n      showHoverOverlay = true,\n      className,\n      ...avatarProps\n    },\n    forwardedRef\n  ) {\n    const [isDragOver, setIsDragOver] = useState(false);\n    const [isUploading, setIsUploading] = useState(false);\n    const [uploadStatus, setUploadStatus] = useState<\n      'idle' | 'uploading' | 'success' | 'error'\n    >('idle');\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n    const statusResetTimeoutRef = useRef<number | null>(null);\n    const mergedRef = useMemo(\n      () => mergeRefs<HTMLDivElement>(containerRef, forwardedRef),\n      [forwardedRef]\n    );\n\n    const avatarSize = avatarProps.size || 'md';\n    const numericSize = SIZE_MAP[avatarSize];\n    const acceptedTypeList = useMemo(\n      () => acceptedTypes.join(','),\n      [acceptedTypes]\n    );\n\n    const clearStatusReset = useCallback(() => {\n      if (statusResetTimeoutRef.current) {\n        window.clearTimeout(statusResetTimeoutRef.current);\n        statusResetTimeoutRef.current = null;\n      }\n    }, []);\n\n    const resetStatus = useCallback(\n      (delay: number) => {\n        clearStatusReset();\n        statusResetTimeoutRef.current = window.setTimeout(() => {\n          setUploadStatus('idle');\n          statusResetTimeoutRef.current = null;\n        }, delay);\n      },\n      [clearStatusReset]\n    );\n\n    const setPreviewFromFile = useCallback((file: File) => {\n      const canUseObjectUrl =\n        typeof URL !== 'undefined' && typeof URL.createObjectURL === 'function';\n\n      if (!canUseObjectUrl) {\n        return;\n      }\n\n      const url = URL.createObjectURL(file);\n      setPreviewUrl(prev => {\n        if (\n          prev &&\n          prev.startsWith('blob:') &&\n          typeof URL.revokeObjectURL === 'function'\n        ) {\n          URL.revokeObjectURL(prev);\n        }\n        return url;\n      });\n    }, []);\n\n    useEffect(\n      () => () => {\n        if (\n          previewUrl &&\n          previewUrl.startsWith('blob:') &&\n          typeof URL !== 'undefined' &&\n          typeof URL.revokeObjectURL === 'function'\n        ) {\n          URL.revokeObjectURL(previewUrl);\n        }\n      },\n      [previewUrl]\n    );\n\n    const handleFileUpload = useCallback(\n      async (file: File) => {\n        if (!onUpload) return;\n\n        clearStatusReset();\n        const validationError = validateFile(file, maxFileSize, acceptedTypes);\n        if (validationError) {\n          onError?.(validationError);\n          setUploadStatus('error');\n          track('avatar_upload_error', {\n            error: 'validation_failed',\n            message: validationError,\n          });\n          resetStatus(3000);\n          return;\n        }\n\n        setIsUploading(true);\n        setUploadStatus('uploading');\n        setPreviewFromFile(file);\n        track('avatar_upload_start', {\n          file_size: file.size,\n          file_type: file.type,\n        });\n\n        try {\n          const imageUrl = await onUpload(file);\n          setUploadStatus('success');\n          setPreviewUrl(imageUrl);\n          onSuccess?.(imageUrl);\n          track('avatar_upload_success', { file_size: file.size });\n          resetStatus(2000);\n        } catch (error) {\n          // Handle structured error responses\n          const errorData = error as {\n            message?: string;\n            code?: UploadErrorCode;\n            retryable?: boolean;\n          };\n          const errorMessage = errorData.message ?? 'Upload failed';\n          const errorCode = errorData.code;\n          const isRetryable = errorData.retryable ?? false;\n\n          setUploadStatus('error');\n          onError?.(errorMessage);\n\n          if (isRetryable && errorCode && onRetryableError) {\n            onRetryableError(errorMessage, errorCode);\n          }\n\n          track('avatar_upload_error', {\n            error: errorCode ?? 'upload_failed',\n            message: errorMessage,\n            retryable: isRetryable,\n          });\n          // Revert preview to previous image on failure\n          setPreviewUrl(null);\n          resetStatus(3000);\n        } finally {\n          setIsUploading(false);\n        }\n      },\n      [\n        acceptedTypes,\n        clearStatusReset,\n        maxFileSize,\n        onError,\n        onRetryableError,\n        onSuccess,\n        onUpload,\n        resetStatus,\n        setPreviewFromFile,\n      ]\n    );\n\n    const handleFileSelect = useCallback(\n      (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        if (file) {\n          handleFileUpload(file);\n        }\n      },\n      [handleFileUpload]\n    );\n\n    const handleDragEnter = useCallback(\n      (e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        if (uploadable && onUpload && !isUploading) {\n          setIsDragOver(true);\n        }\n      },\n      [uploadable, onUpload, isUploading]\n    );\n\n    const handleDragLeave = useCallback((e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!containerRef.current?.contains(e.relatedTarget as Node)) {\n        setIsDragOver(false);\n      }\n    }, []);\n\n    const handleDragOver = useCallback((e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n    }, []);\n\n    const handleDrop = useCallback(\n      (e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragOver(false);\n\n        if (!uploadable || !onUpload || isUploading) return;\n\n        const file = e.dataTransfer.files?.[0];\n        if (file) {\n          handleFileUpload(file);\n        }\n      },\n      [uploadable, onUpload, isUploading, handleFileUpload]\n    );\n\n    const handleClick = useCallback(() => {\n      if (uploadable && onUpload && !isUploading) {\n        fileInputRef.current?.click();\n      }\n    }, [uploadable, onUpload, isUploading]);\n\n    const handleKeyDown = useCallback(\n      (e: React.KeyboardEvent) => {\n        if (\n          uploadable &&\n          onUpload &&\n          !isUploading &&\n          (e.key === 'Enter' || e.key === ' ')\n        ) {\n          e.preventDefault();\n          fileInputRef.current?.click();\n        }\n      },\n      [uploadable, onUpload, isUploading]\n    );\n\n    useEffect(() => {\n      if (isUploading && progress > 0) {\n        track('avatar_upload_progress', { progress });\n      }\n    }, [isUploading, progress]);\n\n    useEffect(() => clearStatusReset, [clearStatusReset]);\n\n    const canUpload = uploadable && Boolean(onUpload);\n    const isInteractive = canUpload && !isUploading;\n    const showProgress =\n      isUploading || uploadStatus === 'success' || uploadStatus === 'error';\n    const currentProgress =\n      uploadStatus === 'success' || uploadStatus === 'error' ? 100 : progress;\n\n    return (\n      <div\n        ref={mergedRef}\n        className={cn(\n          'relative group outline-none',\n          isInteractive ? 'cursor-pointer focus-ring' : 'cursor-default',\n          className\n        )}\n        onDragEnter={handleDragEnter}\n        onDragLeave={handleDragLeave}\n        onDragOver={handleDragOver}\n        onDrop={handleDrop}\n        onClick={handleClick}\n        onKeyDown={handleKeyDown}\n        tabIndex={isInteractive ? 0 : undefined}\n        role={isInteractive ? 'button' : undefined}\n        aria-label={isInteractive ? 'Upload profile photo' : undefined}\n        aria-disabled={!isInteractive}\n        aria-busy={isUploading}\n      >\n        <Avatar\n          src={previewUrl ?? src}\n          className={cn(\n            'transition-all duration-200 ease-out',\n            isInteractive &&\n              'group-hover:brightness-95 group-focus-visible:ring-2 group-focus-visible:ring-accent group-focus-visible:ring-offset-2 group-focus-visible:ring-offset-(--color-bg-base)',\n            isDragOver && 'scale-105',\n            isUploading && 'opacity-80'\n          )}\n          {...avatarProps}\n        />\n\n        {isInteractive && showHoverOverlay && (\n          <div\n            className={cn(\n              'absolute inset-0 flex items-center justify-center rounded-full',\n              'bg-surface-3/80 text-primary-token ring-1 ring-[color:var(--color-border-subtle)] backdrop-blur',\n              'opacity-0 transition-opacity duration-200 group-hover:opacity-100'\n            )}\n            aria-hidden='true'\n            data-testid='avatar-uploadable-hover-overlay'\n          >\n            <Upload size={numericSize * 0.3} />\n          </div>\n        )}\n\n        {isDragOver && (\n          <div\n            className={cn(\n              'absolute inset-0 flex items-center justify-center rounded-full',\n              'bg-[color:var(--color-accent)]/90 text-[color:var(--color-accent-foreground)]',\n              'border-2 border-[color:var(--color-accent)] shadow-md transition-transform duration-200'\n            )}\n            aria-hidden='true'\n            data-testid='avatar-uploadable-drag-overlay'\n          >\n            <Upload size={numericSize * 0.4} />\n          </div>\n        )}\n\n        {showProgress && (\n          <ProgressRing\n            progress={Math.min(100, Math.max(0, currentProgress))}\n            size={numericSize}\n            status={uploadStatus}\n          />\n        )}\n\n        {canUpload && (\n          <input\n            ref={fileInputRef}\n            type='file'\n            accept={acceptedTypeList}\n            onChange={handleFileSelect}\n            className='sr-only'\n            aria-label='Choose profile photo file'\n          />\n        )}\n\n        {progress > 0 && (\n          <div className='sr-only' aria-live='polite' aria-atomic='true'>\n            Uploading profile photo: {Math.round(progress)}% complete\n          </div>\n        )}\n\n        {uploadStatus === 'success' && (\n          <div className='sr-only' aria-live='polite'>\n            Profile photo uploaded successfully\n          </div>\n        )}\n\n        {uploadStatus === 'error' && (\n          <div className='sr-only' aria-live='assertive'>\n            Profile photo upload failed\n          </div>\n        )}\n      </div>\n    );\n  })\n);\n\nAvatarUploadable.displayName = 'AvatarUploadable';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/AvatarUploadable.tsx" },
        "span": [3702, 3818],
        "sourceCode": "'use client';\n\nimport { Check, Upload, X } from 'lucide-react';\nimport React, {\n  forwardRef,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport type { UploadErrorCode } from '@/app/api/images/upload/route';\nimport { Avatar, type AvatarProps } from '@/components/atoms/Avatar';\nimport { track } from '@/lib/analytics';\nimport {\n  AVATAR_MAX_FILE_SIZE_BYTES,\n  formatAcceptedImageTypes,\n  SUPPORTED_IMAGE_MIME_TYPES,\n} from '@/lib/images/config';\nimport { cn } from '@/lib/utils';\n\nexport interface AvatarUploadableProps extends Omit<AvatarProps, 'src'> {\n  /** Current avatar image URL */\n  src?: string | null;\n  /** Whether uploading is enabled (controlled by feature flag) */\n  uploadable?: boolean;\n  /** Upload callback that returns a promise with the new image URL */\n  onUpload?: (file: File) => Promise<string>;\n  /** Progress percentage (0-100) for upload progress */\n  progress?: number;\n  /** Error callback */\n  onError?: (error: string) => void;\n  /** Success callback with new image URL */\n  onSuccess?: (imageUrl: string) => void;\n  /** Retry callback when upload fails with retryable error */\n  onRetryableError?: (error: string, code: UploadErrorCode) => void;\n  /** Maximum file size in bytes (default: 4MB, aligned with /api/images/upload) */\n  maxFileSize?: number;\n  /** Accepted file types */\n  acceptedTypes?: readonly string[];\n  /** Whether to show hover overlay when uploadable */\n  showHoverOverlay?: boolean;\n}\n\n// Progress ring SVG constants\nconst STROKE_WIDTH = 3;\n// const RING_SIZE = 100; // Percentage of avatar size (unused for now)\nconst RADIUS = 50 - STROKE_WIDTH / 2;\nconst CIRCUMFERENCE = 2 * Math.PI * RADIUS;\nconst SIZE_MAP = {\n  xs: 24,\n  sm: 32,\n  md: 48,\n  lg: 64,\n  xl: 80,\n  '2xl': 96,\n  'display-sm': 112,\n  'display-md': 128,\n  'display-lg': 160,\n  'display-xl': 192,\n  'display-2xl': 224,\n  'display-3xl': 256,\n  'display-4xl': 384,\n};\n\n// File validation\nconst DEFAULT_MAX_FILE_SIZE = AVATAR_MAX_FILE_SIZE_BYTES; // API enforced\nconst DEFAULT_ACCEPTED_TYPES = SUPPORTED_IMAGE_MIME_TYPES;\n\nconst STATUS_COLORS = {\n  uploading: 'text-indigo-500',\n  success: 'text-green-500',\n  error: 'text-red-500',\n  idle: 'text-secondary-token',\n} as const;\n\nfunction mergeRefs<T>(...refs: Array<React.Ref<T>>) {\n  return (node: T) => {\n    refs.forEach(ref => {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        (ref as React.MutableRefObject<T | null>).current = node;\n      }\n    });\n  };\n}\n\n/**\n * Validates a file for upload\n */\nfunction validateFile(\n  file: File,\n  maxFileSize: number = DEFAULT_MAX_FILE_SIZE,\n  acceptedTypes: readonly string[] = DEFAULT_ACCEPTED_TYPES\n): string | null {\n  const normalizedType = file.type.toLowerCase?.() ?? file.type;\n  if (!acceptedTypes.includes(normalizedType)) {\n    const allowedTypes = formatAcceptedImageTypes(acceptedTypes);\n    return `Invalid file type. Please select ${allowedTypes.join(', ')} files only.`;\n  }\n\n  if (file.size > maxFileSize) {\n    const sizeMB = Math.round(maxFileSize / (1024 * 1024));\n    return `File too large. Please select a file smaller than ${sizeMB}MB.`;\n  }\n\n  return null;\n}\n\n/**\n * Progress Ring Component for radial upload progress\n */\nfunction ProgressRing({\n  progress,\n  size,\n  status,\n}: {\n  progress: number;\n  size: number;\n  status: 'uploading' | 'success' | 'error' | 'idle';\n}) {\n  const strokeDasharray = `${(progress / 100) * CIRCUMFERENCE} ${CIRCUMFERENCE}`;\n  const ringColor = STATUS_COLORS[status];\n\n  return (\n    <div\n      className='pointer-events-none absolute inset-0 flex items-center justify-center'\n      aria-hidden='true'\n      data-testid='avatar-uploadable-progress'\n    >\n      <svg\n        width={size}\n        height={size}\n        viewBox='0 0 100 100'\n        className='-rotate-90'\n      >\n        {/* Background ring */}\n        <circle\n          cx='50'\n          cy='50'\n          r={RADIUS}\n          fill='none'\n          stroke='currentColor'\n          strokeWidth={STROKE_WIDTH}\n          className='text-border-subtle'\n        />\n        {/* Progress ring */}\n        <circle\n          cx='50'\n          cy='50'\n          r={RADIUS}\n          fill='none'\n          stroke='currentColor'\n          strokeWidth={STROKE_WIDTH}\n          strokeDasharray={strokeDasharray}\n          strokeLinecap='round'\n          className={cn(\n            'stroke-current transition-all duration-300 ease-out',\n            ringColor\n          )}\n        />\n      </svg>\n\n      {/* Status icons */}\n      <div className='absolute inset-0 flex items-center justify-center'>\n        {status === 'success' && (\n          <div className='rounded-full bg-white text-green-600 ring-1 ring-green-100 shadow-sm transition-all duration-200 ease-out animate-in fade-in zoom-in motion-reduce:animate-none'>\n            <Check size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n        {status === 'error' && (\n          <div className='rounded-full bg-white text-red-600 ring-1 ring-red-100 shadow-sm transition-all duration-200 ease-out animate-in fade-in zoom-in motion-reduce:animate-none'>\n            <X size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n        {status === 'uploading' && (\n          <div className='rounded-full bg-indigo-500 text-white ring-1 ring-indigo-100 shadow-sm animate-pulse motion-reduce:animate-none transition-all duration-200 ease-out'>\n            <Upload size={size * 0.15} className='p-1' aria-hidden='true' />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/**\n * Uploadable Avatar component with radial progress and drag/drop\n *\n * Features:\n * - Radial progress arc around avatar during upload\n * - Drag & drop file upload\n * - Click to upload with file picker\n * - File validation with user-friendly errors\n * - Success/error states with visual feedback\n * - Keyboard accessibility\n * - Analytics tracking\n * - Feature flag controlled\n */\nexport const AvatarUploadable = React.memo(\n  forwardRef<HTMLDivElement, AvatarUploadableProps>(function AvatarUploadable(\n    {\n      src,\n      uploadable = false,\n      onUpload,\n      progress = 0,\n      onError,\n      onSuccess,\n      onRetryableError,\n      maxFileSize = DEFAULT_MAX_FILE_SIZE,\n      acceptedTypes = DEFAULT_ACCEPTED_TYPES,\n      showHoverOverlay = true,\n      className,\n      ...avatarProps\n    },\n    forwardedRef\n  ) {\n    const [isDragOver, setIsDragOver] = useState(false);\n    const [isUploading, setIsUploading] = useState(false);\n    const [uploadStatus, setUploadStatus] = useState<\n      'idle' | 'uploading' | 'success' | 'error'\n    >('idle');\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n    const statusResetTimeoutRef = useRef<number | null>(null);\n    const mergedRef = useMemo(\n      () => mergeRefs<HTMLDivElement>(containerRef, forwardedRef),\n      [forwardedRef]\n    );\n\n    const avatarSize = avatarProps.size || 'md';\n    const numericSize = SIZE_MAP[avatarSize];\n    const acceptedTypeList = useMemo(\n      () => acceptedTypes.join(','),\n      [acceptedTypes]\n    );\n\n    const clearStatusReset = useCallback(() => {\n      if (statusResetTimeoutRef.current) {\n        window.clearTimeout(statusResetTimeoutRef.current);\n        statusResetTimeoutRef.current = null;\n      }\n    }, []);\n\n    const resetStatus = useCallback(\n      (delay: number) => {\n        clearStatusReset();\n        statusResetTimeoutRef.current = window.setTimeout(() => {\n          setUploadStatus('idle');\n          statusResetTimeoutRef.current = null;\n        }, delay);\n      },\n      [clearStatusReset]\n    );\n\n    const setPreviewFromFile = useCallback((file: File) => {\n      const canUseObjectUrl =\n        typeof URL !== 'undefined' && typeof URL.createObjectURL === 'function';\n\n      if (!canUseObjectUrl) {\n        return;\n      }\n\n      const url = URL.createObjectURL(file);\n      setPreviewUrl(prev => {\n        if (\n          prev &&\n          prev.startsWith('blob:') &&\n          typeof URL.revokeObjectURL === 'function'\n        ) {\n          URL.revokeObjectURL(prev);\n        }\n        return url;\n      });\n    }, []);\n\n    useEffect(\n      () => () => {\n        if (\n          previewUrl &&\n          previewUrl.startsWith('blob:') &&\n          typeof URL !== 'undefined' &&\n          typeof URL.revokeObjectURL === 'function'\n        ) {\n          URL.revokeObjectURL(previewUrl);\n        }\n      },\n      [previewUrl]\n    );\n\n    const handleFileUpload = useCallback(\n      async (file: File) => {\n        if (!onUpload) return;\n\n        clearStatusReset();\n        const validationError = validateFile(file, maxFileSize, acceptedTypes);\n        if (validationError) {\n          onError?.(validationError);\n          setUploadStatus('error');\n          track('avatar_upload_error', {\n            error: 'validation_failed',\n            message: validationError,\n          });\n          resetStatus(3000);\n          return;\n        }\n\n        setIsUploading(true);\n        setUploadStatus('uploading');\n        setPreviewFromFile(file);\n        track('avatar_upload_start', {\n          file_size: file.size,\n          file_type: file.type,\n        });\n\n        try {\n          const imageUrl = await onUpload(file);\n          setUploadStatus('success');\n          setPreviewUrl(imageUrl);\n          onSuccess?.(imageUrl);\n          track('avatar_upload_success', { file_size: file.size });\n          resetStatus(2000);\n        } catch (error) {\n          // Handle structured error responses\n          const errorData = error as {\n            message?: string;\n            code?: UploadErrorCode;\n            retryable?: boolean;\n          };\n          const errorMessage = errorData.message ?? 'Upload failed';\n          const errorCode = errorData.code;\n          const isRetryable = errorData.retryable ?? false;\n\n          setUploadStatus('error');\n          onError?.(errorMessage);\n\n          if (isRetryable && errorCode && onRetryableError) {\n            onRetryableError(errorMessage, errorCode);\n          }\n\n          track('avatar_upload_error', {\n            error: errorCode ?? 'upload_failed',\n            message: errorMessage,\n            retryable: isRetryable,\n          });\n          // Revert preview to previous image on failure\n          setPreviewUrl(null);\n          resetStatus(3000);\n        } finally {\n          setIsUploading(false);\n        }\n      },\n      [\n        acceptedTypes,\n        clearStatusReset,\n        maxFileSize,\n        onError,\n        onRetryableError,\n        onSuccess,\n        onUpload,\n        resetStatus,\n        setPreviewFromFile,\n      ]\n    );\n\n    const handleFileSelect = useCallback(\n      (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        if (file) {\n          handleFileUpload(file);\n        }\n      },\n      [handleFileUpload]\n    );\n\n    const handleDragEnter = useCallback(\n      (e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        if (uploadable && onUpload && !isUploading) {\n          setIsDragOver(true);\n        }\n      },\n      [uploadable, onUpload, isUploading]\n    );\n\n    const handleDragLeave = useCallback((e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!containerRef.current?.contains(e.relatedTarget as Node)) {\n        setIsDragOver(false);\n      }\n    }, []);\n\n    const handleDragOver = useCallback((e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n    }, []);\n\n    const handleDrop = useCallback(\n      (e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragOver(false);\n\n        if (!uploadable || !onUpload || isUploading) return;\n\n        const file = e.dataTransfer.files?.[0];\n        if (file) {\n          handleFileUpload(file);\n        }\n      },\n      [uploadable, onUpload, isUploading, handleFileUpload]\n    );\n\n    const handleClick = useCallback(() => {\n      if (uploadable && onUpload && !isUploading) {\n        fileInputRef.current?.click();\n      }\n    }, [uploadable, onUpload, isUploading]);\n\n    const handleKeyDown = useCallback(\n      (e: React.KeyboardEvent) => {\n        if (\n          uploadable &&\n          onUpload &&\n          !isUploading &&\n          (e.key === 'Enter' || e.key === ' ')\n        ) {\n          e.preventDefault();\n          fileInputRef.current?.click();\n        }\n      },\n      [uploadable, onUpload, isUploading]\n    );\n\n    useEffect(() => {\n      if (isUploading && progress > 0) {\n        track('avatar_upload_progress', { progress });\n      }\n    }, [isUploading, progress]);\n\n    useEffect(() => clearStatusReset, [clearStatusReset]);\n\n    const canUpload = uploadable && Boolean(onUpload);\n    const isInteractive = canUpload && !isUploading;\n    const showProgress =\n      isUploading || uploadStatus === 'success' || uploadStatus === 'error';\n    const currentProgress =\n      uploadStatus === 'success' || uploadStatus === 'error' ? 100 : progress;\n\n    return (\n      <div\n        ref={mergedRef}\n        className={cn(\n          'relative group outline-none',\n          isInteractive ? 'cursor-pointer focus-ring' : 'cursor-default',\n          className\n        )}\n        onDragEnter={handleDragEnter}\n        onDragLeave={handleDragLeave}\n        onDragOver={handleDragOver}\n        onDrop={handleDrop}\n        onClick={handleClick}\n        onKeyDown={handleKeyDown}\n        tabIndex={isInteractive ? 0 : undefined}\n        role={isInteractive ? 'button' : undefined}\n        aria-label={isInteractive ? 'Upload profile photo' : undefined}\n        aria-disabled={!isInteractive}\n        aria-busy={isUploading}\n      >\n        <Avatar\n          src={previewUrl ?? src}\n          className={cn(\n            'transition-all duration-200 ease-out',\n            isInteractive &&\n              'group-hover:brightness-95 group-focus-visible:ring-2 group-focus-visible:ring-accent group-focus-visible:ring-offset-2 group-focus-visible:ring-offset-(--color-bg-base)',\n            isDragOver && 'scale-105',\n            isUploading && 'opacity-80'\n          )}\n          {...avatarProps}\n        />\n\n        {isInteractive && showHoverOverlay && (\n          <div\n            className={cn(\n              'absolute inset-0 flex items-center justify-center rounded-full',\n              'bg-surface-3/80 text-primary-token ring-1 ring-[color:var(--color-border-subtle)] backdrop-blur',\n              'opacity-0 transition-opacity duration-200 group-hover:opacity-100'\n            )}\n            aria-hidden='true'\n            data-testid='avatar-uploadable-hover-overlay'\n          >\n            <Upload size={numericSize * 0.3} />\n          </div>\n        )}\n\n        {isDragOver && (\n          <div\n            className={cn(\n              'absolute inset-0 flex items-center justify-center rounded-full',\n              'bg-[color:var(--color-accent)]/90 text-[color:var(--color-accent-foreground)]',\n              'border-2 border-[color:var(--color-accent)] shadow-md transition-transform duration-200'\n            )}\n            aria-hidden='true'\n            data-testid='avatar-uploadable-drag-overlay'\n          >\n            <Upload size={numericSize * 0.4} />\n          </div>\n        )}\n\n        {showProgress && (\n          <ProgressRing\n            progress={Math.min(100, Math.max(0, currentProgress))}\n            size={numericSize}\n            status={uploadStatus}\n          />\n        )}\n\n        {canUpload && (\n          <input\n            ref={fileInputRef}\n            type='file'\n            accept={acceptedTypeList}\n            onChange={handleFileSelect}\n            className='sr-only'\n            aria-label='Choose profile photo file'\n          />\n        )}\n\n        {progress > 0 && (\n          <div className='sr-only' aria-live='polite' aria-atomic='true'>\n            Uploading profile photo: {Math.round(progress)}% complete\n          </div>\n        )}\n\n        {uploadStatus === 'success' && (\n          <div className='sr-only' aria-live='polite'>\n            Profile photo uploaded successfully\n          </div>\n        )}\n\n        {uploadStatus === 'error' && (\n          <div className='sr-only' aria-live='assertive'>\n            Profile photo upload failed\n          </div>\n        )}\n      </div>\n    );\n  })\n);\n\nAvatarUploadable.displayName = 'AvatarUploadable';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/BenefitsSection.tsx" },
        "span": [232, 330],
        "sourceCode": "import { SectionHeading } from '@/components/atoms/SectionHeading';\nimport { StatusBadge } from '@/components/atoms/StatusBadge';\nimport { FeatureCard } from '@/components/molecules/FeatureCard';\n\n// Icons\nconst LightningIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nconst ChartIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n    />\n  </svg>\n);\n\nconst BulbIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n    />\n  </svg>\n);\n\nconst CheckIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M5 13l4 4L19 7'\n    />\n  </svg>\n);\n\nexport interface BenefitsSectionProps {\n  /** Section title */\n  title?: string;\n  /** Section description */\n  description?: string;\n  /** Badge text */\n  badgeText?: string;\n  /** Benefits data */\n  benefits?: Array<{\n    title: string;\n    description: string;\n    metric: string;\n    accent: 'blue' | 'green' | 'purple' | 'orange' | 'red' | 'gray';\n  }>;\n  /** Additional CSS classes */\n  className?: string;\n}\n\nconst defaultBenefits = [\n  {\n    title: '3.2x Faster Loading',\n    description: 'Fans discover your music instantly. No waiting, no bouncing.',\n    metric: '0.8s load time',\n    accent: 'blue' as const,\n  },\n  {\n    title: '47% More Streams',\n    description: 'Optimized for conversion. Fans click and stream immediately.',\n    metric: '+47% conversion',\n    accent: 'green' as const,\n  },\n  {\n    title: 'Smart Fan Routing',\n    description:\n      \"Remembers each fan's favorite platform. One click to their preferred streaming service.\",\n    metric: '1-click streaming',\n    accent: 'purple' as const,\n  },\n];\n\nexport function BenefitsSection({\n  title = 'Built for musicians, optimized for conversion',\n  description = 'Every element is designed to turn fans into streams. No distractions, just results.',\n  badgeText = 'The Solution',\n  benefits = defaultBenefits,\n  className = '',\n}: BenefitsSectionProps) {\n  const icons = [LightningIcon, ChartIcon, BulbIcon];\n\n  return (\n    <section className={`relative py-14 sm:py-18 ${className}`}>\n      <div className='mx-auto max-w-7xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-3xl text-center mb-12'>\n          <div className='mb-8'>\n            <StatusBadge variant='green' icon={CheckIcon}>\n              {badgeText}\n            </StatusBadge>\n          </div>\n\n          <SectionHeading level={2} size='xl' className='mb-6'>\n            {title}\n          </SectionHeading>\n\n          <p className='text-xl text-gray-600 dark:text-white/70'>\n            {description}\n          </p>\n        </div>\n\n        <div className='mx-auto max-w-6xl'>\n          <div className='grid grid-cols-1 gap-8 md:grid-cols-3'>\n            {benefits.map((benefit, index) => (\n              <FeatureCard\n                key={benefit.title}\n                title={benefit.title}\n                description={benefit.description}\n                metric={benefit.metric}\n                icon={icons[index % icons.length]}\n                accent={benefit.accent}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/BenefitsSection.tsx" },
        "span": [499, 597],
        "sourceCode": "import { SectionHeading } from '@/components/atoms/SectionHeading';\nimport { StatusBadge } from '@/components/atoms/StatusBadge';\nimport { FeatureCard } from '@/components/molecules/FeatureCard';\n\n// Icons\nconst LightningIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nconst ChartIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n    />\n  </svg>\n);\n\nconst BulbIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n    />\n  </svg>\n);\n\nconst CheckIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M5 13l4 4L19 7'\n    />\n  </svg>\n);\n\nexport interface BenefitsSectionProps {\n  /** Section title */\n  title?: string;\n  /** Section description */\n  description?: string;\n  /** Badge text */\n  badgeText?: string;\n  /** Benefits data */\n  benefits?: Array<{\n    title: string;\n    description: string;\n    metric: string;\n    accent: 'blue' | 'green' | 'purple' | 'orange' | 'red' | 'gray';\n  }>;\n  /** Additional CSS classes */\n  className?: string;\n}\n\nconst defaultBenefits = [\n  {\n    title: '3.2x Faster Loading',\n    description: 'Fans discover your music instantly. No waiting, no bouncing.',\n    metric: '0.8s load time',\n    accent: 'blue' as const,\n  },\n  {\n    title: '47% More Streams',\n    description: 'Optimized for conversion. Fans click and stream immediately.',\n    metric: '+47% conversion',\n    accent: 'green' as const,\n  },\n  {\n    title: 'Smart Fan Routing',\n    description:\n      \"Remembers each fan's favorite platform. One click to their preferred streaming service.\",\n    metric: '1-click streaming',\n    accent: 'purple' as const,\n  },\n];\n\nexport function BenefitsSection({\n  title = 'Built for musicians, optimized for conversion',\n  description = 'Every element is designed to turn fans into streams. No distractions, just results.',\n  badgeText = 'The Solution',\n  benefits = defaultBenefits,\n  className = '',\n}: BenefitsSectionProps) {\n  const icons = [LightningIcon, ChartIcon, BulbIcon];\n\n  return (\n    <section className={`relative py-14 sm:py-18 ${className}`}>\n      <div className='mx-auto max-w-7xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-3xl text-center mb-12'>\n          <div className='mb-8'>\n            <StatusBadge variant='green' icon={CheckIcon}>\n              {badgeText}\n            </StatusBadge>\n          </div>\n\n          <SectionHeading level={2} size='xl' className='mb-6'>\n            {title}\n          </SectionHeading>\n\n          <p className='text-xl text-gray-600 dark:text-white/70'>\n            {description}\n          </p>\n        </div>\n\n        <div className='mx-auto max-w-6xl'>\n          <div className='grid grid-cols-1 gap-8 md:grid-cols-3'>\n            {benefits.map((benefit, index) => (\n              <FeatureCard\n                key={benefit.title}\n                title={benefit.title}\n                description={benefit.description}\n                metric={benefit.metric}\n                icon={icons[index % icons.length]}\n                accent={benefit.accent}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/BenefitsSection.tsx" },
        "span": [935, 1033],
        "sourceCode": "import { SectionHeading } from '@/components/atoms/SectionHeading';\nimport { StatusBadge } from '@/components/atoms/StatusBadge';\nimport { FeatureCard } from '@/components/molecules/FeatureCard';\n\n// Icons\nconst LightningIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nconst ChartIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n    />\n  </svg>\n);\n\nconst BulbIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n    />\n  </svg>\n);\n\nconst CheckIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M5 13l4 4L19 7'\n    />\n  </svg>\n);\n\nexport interface BenefitsSectionProps {\n  /** Section title */\n  title?: string;\n  /** Section description */\n  description?: string;\n  /** Badge text */\n  badgeText?: string;\n  /** Benefits data */\n  benefits?: Array<{\n    title: string;\n    description: string;\n    metric: string;\n    accent: 'blue' | 'green' | 'purple' | 'orange' | 'red' | 'gray';\n  }>;\n  /** Additional CSS classes */\n  className?: string;\n}\n\nconst defaultBenefits = [\n  {\n    title: '3.2x Faster Loading',\n    description: 'Fans discover your music instantly. No waiting, no bouncing.',\n    metric: '0.8s load time',\n    accent: 'blue' as const,\n  },\n  {\n    title: '47% More Streams',\n    description: 'Optimized for conversion. Fans click and stream immediately.',\n    metric: '+47% conversion',\n    accent: 'green' as const,\n  },\n  {\n    title: 'Smart Fan Routing',\n    description:\n      \"Remembers each fan's favorite platform. One click to their preferred streaming service.\",\n    metric: '1-click streaming',\n    accent: 'purple' as const,\n  },\n];\n\nexport function BenefitsSection({\n  title = 'Built for musicians, optimized for conversion',\n  description = 'Every element is designed to turn fans into streams. No distractions, just results.',\n  badgeText = 'The Solution',\n  benefits = defaultBenefits,\n  className = '',\n}: BenefitsSectionProps) {\n  const icons = [LightningIcon, ChartIcon, BulbIcon];\n\n  return (\n    <section className={`relative py-14 sm:py-18 ${className}`}>\n      <div className='mx-auto max-w-7xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-3xl text-center mb-12'>\n          <div className='mb-8'>\n            <StatusBadge variant='green' icon={CheckIcon}>\n              {badgeText}\n            </StatusBadge>\n          </div>\n\n          <SectionHeading level={2} size='xl' className='mb-6'>\n            {title}\n          </SectionHeading>\n\n          <p className='text-xl text-gray-600 dark:text-white/70'>\n            {description}\n          </p>\n        </div>\n\n        <div className='mx-auto max-w-6xl'>\n          <div className='grid grid-cols-1 gap-8 md:grid-cols-3'>\n            {benefits.map((benefit, index) => (\n              <FeatureCard\n                key={benefit.title}\n                title={benefit.title}\n                description={benefit.description}\n                metric={benefit.metric}\n                icon={icons[index % icons.length]}\n                accent={benefit.accent}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/BenefitsSection.tsx" },
        "span": [1384, 1482],
        "sourceCode": "import { SectionHeading } from '@/components/atoms/SectionHeading';\nimport { StatusBadge } from '@/components/atoms/StatusBadge';\nimport { FeatureCard } from '@/components/molecules/FeatureCard';\n\n// Icons\nconst LightningIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nconst ChartIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'\n    />\n  </svg>\n);\n\nconst BulbIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'\n    />\n  </svg>\n);\n\nconst CheckIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M5 13l4 4L19 7'\n    />\n  </svg>\n);\n\nexport interface BenefitsSectionProps {\n  /** Section title */\n  title?: string;\n  /** Section description */\n  description?: string;\n  /** Badge text */\n  badgeText?: string;\n  /** Benefits data */\n  benefits?: Array<{\n    title: string;\n    description: string;\n    metric: string;\n    accent: 'blue' | 'green' | 'purple' | 'orange' | 'red' | 'gray';\n  }>;\n  /** Additional CSS classes */\n  className?: string;\n}\n\nconst defaultBenefits = [\n  {\n    title: '3.2x Faster Loading',\n    description: 'Fans discover your music instantly. No waiting, no bouncing.',\n    metric: '0.8s load time',\n    accent: 'blue' as const,\n  },\n  {\n    title: '47% More Streams',\n    description: 'Optimized for conversion. Fans click and stream immediately.',\n    metric: '+47% conversion',\n    accent: 'green' as const,\n  },\n  {\n    title: 'Smart Fan Routing',\n    description:\n      \"Remembers each fan's favorite platform. One click to their preferred streaming service.\",\n    metric: '1-click streaming',\n    accent: 'purple' as const,\n  },\n];\n\nexport function BenefitsSection({\n  title = 'Built for musicians, optimized for conversion',\n  description = 'Every element is designed to turn fans into streams. No distractions, just results.',\n  badgeText = 'The Solution',\n  benefits = defaultBenefits,\n  className = '',\n}: BenefitsSectionProps) {\n  const icons = [LightningIcon, ChartIcon, BulbIcon];\n\n  return (\n    <section className={`relative py-14 sm:py-18 ${className}`}>\n      <div className='mx-auto max-w-7xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-3xl text-center mb-12'>\n          <div className='mb-8'>\n            <StatusBadge variant='green' icon={CheckIcon}>\n              {badgeText}\n            </StatusBadge>\n          </div>\n\n          <SectionHeading level={2} size='xl' className='mb-6'>\n            {title}\n          </SectionHeading>\n\n          <p className='text-xl text-gray-600 dark:text-white/70'>\n            {description}\n          </p>\n        </div>\n\n        <div className='mx-auto max-w-6xl'>\n          <div className='grid grid-cols-1 gap-8 md:grid-cols-3'>\n            {benefits.map((benefit, index) => (\n              <FeatureCard\n                key={benefit.title}\n                title={benefit.title}\n                description={benefit.description}\n                metric={benefit.metric}\n                icon={icons[index % icons.length]}\n                accent={benefit.accent}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/BlogPostPage.tsx" },
        "span": [1031, 1270],
        "sourceCode": "import Link from 'next/link';\nimport { Avatar } from '@/components/atoms/Avatar';\nimport { BlogMarkdownReader } from '@/components/molecules/BlogMarkdownReader';\nimport { Container } from '@/components/site/Container';\nimport type { BlogPost } from '@/lib/blog/getBlogPosts';\n\nexport interface BlogPostPageProps {\n  post: BlogPost;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString('en-US', {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\nexport function BlogPostPage({ post }: BlogPostPageProps) {\n  return (\n    <div className='min-h-screen'>\n      {/* Header Section */}\n      <Container size='lg' className='pt-16 sm:pt-24 pb-12'>\n        <div className='mx-auto max-w-3xl'>\n          {/* Back link */}\n          <Link\n            href='/blog'\n            className='inline-flex items-center gap-2 text-sm font-medium text-tertiary-token hover:text-primary-token transition-colors duration-200 mb-10 group'\n          >\n            <svg\n              className='w-4 h-4 transition-transform duration-200 group-hover:-translate-x-1'\n              fill='none'\n              viewBox='0 0 24 24'\n              stroke='currentColor'\n              strokeWidth={2}\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                d='M15 19l-7-7 7-7'\n              />\n            </svg>\n            Back to updates\n          </Link>\n\n          {/* Meta info */}\n          <div className='flex flex-wrap items-center gap-3 mb-6'>\n            <time\n              dateTime={post.date}\n              className='text-sm font-medium text-tertiary-token tabular-nums'\n            >\n              {formatDate(post.date)}\n            </time>\n            {post.category && (\n              <>\n                <span className='text-quaternary-token'>·</span>\n                <span className='text-sm font-medium text-tertiary-token'>\n                  {post.category}\n                </span>\n              </>\n            )}\n          </div>\n\n          {/* Title */}\n          <h1\n            className='marketing-h1-linear text-primary-token mb-6'\n            data-testid='blog-post-page'\n          >\n            {post.title}\n          </h1>\n\n          {/* Excerpt / Lede */}\n          <p className='marketing-lead-linear text-secondary-token mb-10'>\n            {post.excerpt}\n          </p>\n\n          {/* Author section */}\n          <div className='flex items-center gap-4 pb-10 border-b border-border-subtle'>\n            <Avatar\n              name={post.author}\n              alt={`${post.author} avatar`}\n              size='md'\n            />\n            <div className='flex flex-col'>\n              <span className='font-semibold text-primary-token'>\n                {post.author}\n              </span>\n              {post.authorTitle && (\n                <span className='text-sm text-tertiary-token'>\n                  {post.authorTitle}\n                </span>\n              )}\n            </div>\n            {post.authorProfile && (\n              <Link\n                href={post.authorProfile}\n                className='ml-auto text-sm font-medium text-tertiary-token hover:text-primary-token transition-colors duration-200'\n              >\n                View profile →\n              </Link>\n            )}\n          </div>\n        </div>\n      </Container>\n\n      {/* Article Content */}\n      <Container size='lg' className='pb-16 sm:pb-24'>\n        <div className='mx-auto max-w-3xl'>\n          <BlogMarkdownReader html={post.html} />\n\n          {/* Footer */}\n          <div className='mt-16 pt-10 border-t border-border-subtle'>\n            <Link\n              href='/blog'\n              className='inline-flex items-center gap-2 text-sm font-medium text-tertiary-token hover:text-primary-token transition-colors duration-200 group'\n            >\n              <svg\n                className='w-4 h-4 transition-transform duration-200 group-hover:-translate-x-1'\n                fill='none'\n                viewBox='0 0 24 24'\n                stroke='currentColor'\n                strokeWidth={2}\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  d='M15 19l-7-7 7-7'\n                />\n              </svg>\n              Back to updates\n            </Link>\n          </div>\n        </div>\n      </Container>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/BlogPostPage.tsx" },
        "span": [3929, 4180],
        "sourceCode": "import Link from 'next/link';\nimport { Avatar } from '@/components/atoms/Avatar';\nimport { BlogMarkdownReader } from '@/components/molecules/BlogMarkdownReader';\nimport { Container } from '@/components/site/Container';\nimport type { BlogPost } from '@/lib/blog/getBlogPosts';\n\nexport interface BlogPostPageProps {\n  post: BlogPost;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString('en-US', {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\nexport function BlogPostPage({ post }: BlogPostPageProps) {\n  return (\n    <div className='min-h-screen'>\n      {/* Header Section */}\n      <Container size='lg' className='pt-16 sm:pt-24 pb-12'>\n        <div className='mx-auto max-w-3xl'>\n          {/* Back link */}\n          <Link\n            href='/blog'\n            className='inline-flex items-center gap-2 text-sm font-medium text-tertiary-token hover:text-primary-token transition-colors duration-200 mb-10 group'\n          >\n            <svg\n              className='w-4 h-4 transition-transform duration-200 group-hover:-translate-x-1'\n              fill='none'\n              viewBox='0 0 24 24'\n              stroke='currentColor'\n              strokeWidth={2}\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                d='M15 19l-7-7 7-7'\n              />\n            </svg>\n            Back to updates\n          </Link>\n\n          {/* Meta info */}\n          <div className='flex flex-wrap items-center gap-3 mb-6'>\n            <time\n              dateTime={post.date}\n              className='text-sm font-medium text-tertiary-token tabular-nums'\n            >\n              {formatDate(post.date)}\n            </time>\n            {post.category && (\n              <>\n                <span className='text-quaternary-token'>·</span>\n                <span className='text-sm font-medium text-tertiary-token'>\n                  {post.category}\n                </span>\n              </>\n            )}\n          </div>\n\n          {/* Title */}\n          <h1\n            className='marketing-h1-linear text-primary-token mb-6'\n            data-testid='blog-post-page'\n          >\n            {post.title}\n          </h1>\n\n          {/* Excerpt / Lede */}\n          <p className='marketing-lead-linear text-secondary-token mb-10'>\n            {post.excerpt}\n          </p>\n\n          {/* Author section */}\n          <div className='flex items-center gap-4 pb-10 border-b border-border-subtle'>\n            <Avatar\n              name={post.author}\n              alt={`${post.author} avatar`}\n              size='md'\n            />\n            <div className='flex flex-col'>\n              <span className='font-semibold text-primary-token'>\n                {post.author}\n              </span>\n              {post.authorTitle && (\n                <span className='text-sm text-tertiary-token'>\n                  {post.authorTitle}\n                </span>\n              )}\n            </div>\n            {post.authorProfile && (\n              <Link\n                href={post.authorProfile}\n                className='ml-auto text-sm font-medium text-tertiary-token hover:text-primary-token transition-colors duration-200'\n              >\n                View profile →\n              </Link>\n            )}\n          </div>\n        </div>\n      </Container>\n\n      {/* Article Content */}\n      <Container size='lg' className='pb-16 sm:pb-24'>\n        <div className='mx-auto max-w-3xl'>\n          <BlogMarkdownReader html={post.html} />\n\n          {/* Footer */}\n          <div className='mt-16 pt-10 border-t border-border-subtle'>\n            <Link\n              href='/blog'\n              className='inline-flex items-center gap-2 text-sm font-medium text-tertiary-token hover:text-primary-token transition-colors duration-200 group'\n            >\n              <svg\n                className='w-4 h-4 transition-transform duration-200 group-hover:-translate-x-1'\n                fill='none'\n                viewBox='0 0 24 24'\n                stroke='currentColor'\n                strokeWidth={2}\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  d='M15 19l-7-7 7-7'\n                />\n              </svg>\n              Back to updates\n            </Link>\n          </div>\n        </div>\n      </Container>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Combobox.tsx" },
        "span": [13034, 13047],
        "sourceCode": "'use client';\n\nimport * as Headless from '@headlessui/react';\nimport {\n  ChevronDownIcon,\n  MagnifyingGlassIcon,\n} from '@heroicons/react/20/solid';\nimport { clsx } from 'clsx';\nimport Image from 'next/image';\nimport {\n  forwardRef,\n  KeyboardEvent,\n  useCallback,\n  useEffect,\n  useId,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\n\ninterface ComboboxOption {\n  id: string;\n  name: string;\n  imageUrl?: string;\n}\n\ninterface ComboboxProps {\n  options: ComboboxOption[];\n  value: ComboboxOption | null;\n  onChange: (option: ComboboxOption | null) => void;\n  onInputChange: (value: string) => void;\n  onSubmit?: () => void;\n  placeholder?: string;\n  label?: string;\n  className?: string;\n  disabled?: boolean;\n  maxDisplayedOptions?: number;\n  isLoading?: boolean;\n  error?: string | null;\n  ctaText?: string;\n  showCta?: boolean;\n}\n\nexport const Combobox = forwardRef<HTMLDivElement, ComboboxProps>(\n  (\n    {\n      options,\n      value,\n      onChange,\n      onInputChange,\n      onSubmit,\n      placeholder = 'Search for an artist...',\n      label = 'Search for an artist',\n      className,\n      disabled,\n      maxDisplayedOptions = 8,\n      isLoading = false,\n      error = null,\n      ctaText = 'Claim Profile',\n      showCta = true,\n    },\n    ref\n  ) => {\n    const [query, setQuery] = useState('');\n    const [activeIndex, setActiveIndex] = useState<number>(-1);\n    const inputId = useId();\n    const listboxId = useId();\n    const errorId = useId();\n    const optionsRef = useRef<HTMLDivElement>(null);\n    const inputRef = useRef<HTMLInputElement>(null);\n    const [isOpen, setIsOpen] = useState(false);\n\n    // Memoize filtered options for better performance\n    const filteredOptions = useMemo(() => {\n      if (query === '') {\n        return options.slice(0, maxDisplayedOptions);\n      }\n\n      const lowerQuery = query.toLowerCase();\n      return options\n        .filter(option => option.name.toLowerCase().includes(lowerQuery))\n        .slice(0, maxDisplayedOptions);\n    }, [options, query, maxDisplayedOptions]);\n\n    // Reset active index when filtered options change\n    useEffect(() => {\n      setActiveIndex(filteredOptions.length > 0 ? 0 : -1);\n    }, [filteredOptions]);\n\n    // Scroll active option into view\n    useEffect(() => {\n      if (isOpen && activeIndex >= 0 && optionsRef.current) {\n        const activeOption = optionsRef.current.querySelector(\n          `[data-index=\"${activeIndex}\"]`\n        );\n        if (activeOption) {\n          activeOption.scrollIntoView({ block: 'nearest' });\n        }\n      }\n    }, [activeIndex, isOpen]);\n\n    // Forward declaration of handleSelect for TypeScript\n    const handleSelect: (option: ComboboxOption | null) => void = useCallback(\n      (option: ComboboxOption | null) => {\n        if (option) {\n          onChange(option);\n        }\n        setQuery('');\n        setIsOpen(false);\n      },\n      [onChange]\n    );\n\n    // Handle keyboard navigation\n    const handleKeyDown = useCallback(\n      (e: KeyboardEvent<HTMLInputElement>) => {\n        if (!isOpen) {\n          if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n            e.preventDefault();\n            setIsOpen(true);\n          }\n          return;\n        }\n\n        switch (e.key) {\n          case 'ArrowDown':\n            e.preventDefault();\n            setActiveIndex(prev =>\n              prev < filteredOptions.length - 1 ? prev + 1 : 0\n            );\n            break;\n          case 'ArrowUp':\n            e.preventDefault();\n            setActiveIndex(prev =>\n              prev > 0 ? prev - 1 : filteredOptions.length - 1\n            );\n            break;\n          case 'Home':\n            e.preventDefault();\n            setActiveIndex(0);\n            break;\n          case 'End':\n            e.preventDefault();\n            setActiveIndex(filteredOptions.length - 1);\n            break;\n          case 'Enter':\n            e.preventDefault();\n            if (activeIndex >= 0 && activeIndex < filteredOptions.length) {\n              handleSelect(filteredOptions[activeIndex]);\n              setIsOpen(false);\n              inputRef.current?.focus();\n            }\n            break;\n          case 'Escape':\n            e.preventDefault();\n            setIsOpen(false);\n            inputRef.current?.focus();\n            break;\n          case 'Tab':\n            setIsOpen(false);\n            break;\n        }\n      },\n      [filteredOptions, isOpen, activeIndex, handleSelect]\n    );\n\n    // Memoize the input change handler\n    const handleInputChange = useCallback(\n      (newQuery: string) => {\n        setQuery(newQuery);\n        onInputChange(newQuery);\n        setIsOpen(true);\n      },\n      [onInputChange]\n    );\n\n    // handleSelect is already defined above\n\n    // Memoize the display value function\n    const displayValue = useCallback((item: ComboboxOption | null) => {\n      return item?.name || '';\n    }, []);\n\n    const handleSubmit = useCallback(() => {\n      if (onSubmit && value) {\n        onSubmit();\n      }\n    }, [onSubmit, value]);\n\n    // Handle open state changes\n    const handleOpenChange = useCallback(\n      (open: boolean) => {\n        setIsOpen(open);\n        if (open) {\n          // Reset active index when opening\n          setActiveIndex(filteredOptions.length > 0 ? 0 : -1);\n        }\n      },\n      [filteredOptions]\n    );\n\n    const hasResults = filteredOptions.length > 0;\n    const showNoResults = query.length > 0 && !hasResults && !isLoading;\n    const isValidSelection = value !== null;\n\n    return (\n      <div className={clsx('relative w-full', className)} ref={ref}>\n        {/* Hidden label for screen readers */}\n        <label htmlFor={inputId} className='sr-only'>\n          {label}\n        </label>\n\n        {/* Status announcer for screen readers */}\n        <div aria-live='polite' aria-atomic='true' className='sr-only'>\n          {value ? `Selected: ${value.name}` : ''}\n        </div>\n\n        <Headless.Combobox\n          value={value}\n          onChange={val => {\n            if (val) handleSelect(val);\n          }}\n          disabled={disabled}\n          nullable\n        >\n          {({ open }) => {\n            // Sync our internal open state with Headless UI's open state\n            if (open !== isOpen) {\n              handleOpenChange(open);\n            }\n\n            return (\n              <>\n                {/* Single container with unified styling */}\n                <div\n                  className={clsx(\n                    // Base container styles\n                    'relative flex w-full overflow-hidden',\n                    // Single border/ring system\n                    'rounded-xl bg-white/5 backdrop-blur-xl shadow-lg ring-1 ring-white/10',\n                    // Focus-within state for container\n                    'focus-within:ring-2 focus-within:ring-white/20',\n                    // Mobile stacking\n                    'flex-col sm:flex-row',\n                    // Error state\n                    error && 'ring-red-500/50 focus-within:ring-red-500/50',\n                    // Disabled state\n                    disabled && 'opacity-50 cursor-not-allowed'\n                  )}\n                >\n                  {/* Input section */}\n                  <div className='relative flex-1'>\n                    <Headless.Combobox.Input\n                      ref={inputRef}\n                      id={inputId}\n                      aria-controls={listboxId}\n                      aria-expanded={open}\n                      aria-describedby={error ? errorId : undefined}\n                      aria-activedescendant={\n                        open &&\n                        activeIndex >= 0 &&\n                        activeIndex < filteredOptions.length\n                          ? `option-${filteredOptions[activeIndex].id}`\n                          : undefined\n                      }\n                      className={clsx(\n                        // Remove native border and focus styles\n                        'w-full border-0 bg-transparent outline-none ring-0 focus-visible:ring-0',\n                        // Typography and spacing\n                        'px-4 py-3.5 text-sm/6 text-white placeholder-white/70',\n                        // Height matching (44px minimum for mobile)\n                        'h-12 sm:h-11',\n                        // Rounded corners (left only on desktop)\n                        'rounded-xl sm:rounded-l-xl sm:rounded-r-none',\n                        // Focus-visible for accessibility\n                        'focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white/50',\n                        // Disabled state\n                        disabled && 'cursor-not-allowed'\n                      )}\n                      placeholder={placeholder}\n                      onChange={event => handleInputChange(event.target.value)}\n                      onKeyDown={handleKeyDown}\n                      displayValue={displayValue}\n                      disabled={disabled}\n                      autoComplete='off'\n                    />\n\n                    {/* Dropdown button */}\n                    <Headless.Combobox.Button\n                      className={clsx(\n                        'absolute inset-y-0 right-0 flex items-center justify-center w-10',\n                        'focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white/50',\n                        disabled && 'cursor-not-allowed'\n                      )}\n                      disabled={disabled}\n                      aria-label={open ? 'Close dropdown' : 'Open dropdown'}\n                    >\n                      {isLoading ? (\n                        <LoadingSpinner size='sm' className='text-white/50' />\n                      ) : (\n                        <ChevronDownIcon\n                          className={clsx(\n                            'h-4 w-4 text-white/50 transition-transform',\n                            open && 'rotate-180'\n                          )}\n                          aria-hidden='true'\n                        />\n                      )}\n                    </Headless.Combobox.Button>\n                  </div>\n\n                  {/* Separator line */}\n                  {showCta && (\n                    <div\n                      className='hidden sm:block w-px bg-white/10'\n                      aria-hidden='true'\n                    />\n                  )}\n\n                  {/* CTA Button */}\n                  {showCta && (\n                    <button\n                      type='button'\n                      onClick={handleSubmit}\n                      disabled={disabled || !isValidSelection}\n                      className={clsx(\n                        // Remove default button styles and match container\n                        'border-0 shadow-none ring-0',\n                        // Height and radius matching\n                        'h-12 sm:h-11 rounded-xl sm:rounded-l-none sm:rounded-r-xl',\n                        // Spacing\n                        'px-4 sm:px-6 flex items-center justify-center',\n                        // Typography\n                        'text-sm font-medium',\n                        // Colors\n                        'bg-white text-gray-900 hover:bg-white/90 transition-colors',\n                        // Disabled state\n                        'disabled:bg-white/50 disabled:text-gray-500 disabled:cursor-not-allowed',\n                        // Focus state\n                        'focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white'\n                      )}\n                      aria-label={`${ctaText} for ${value?.name || 'selected artist'}`}\n                    >\n                      <MagnifyingGlassIcon\n                        className='h-4 w-4 mr-2'\n                        aria-hidden='true'\n                      />\n                      {ctaText}\n                    </button>\n                  )}\n                </div>\n\n                {/* Error message */}\n                {error && (\n                  <p\n                    id={errorId}\n                    className='mt-2 text-sm text-red-400'\n                    role='alert'\n                  >\n                    {error}\n                  </p>\n                )}\n\n                {/* Dropdown options */}\n                <Headless.Combobox.Options\n                  ref={optionsRef}\n                  id={listboxId}\n                  className={clsx(\n                    'absolute z-50 mt-2 max-h-60 w-full overflow-auto',\n                    'rounded-xl bg-white/95 backdrop-blur-xl shadow-xl ring-1 ring-white/20',\n                    'focus-visible:outline-none'\n                  )}\n                  static={open}\n                >\n                  {isLoading && query.length > 0 ? (\n                    <div\n                      className='px-4 py-3 text-sm text-gray-500'\n                      role='status'\n                    >\n                      <div className='flex items-center space-x-2'>\n                        <LoadingSpinner size='sm' className='text-gray-500' />\n                        <span>Searching artists...</span>\n                      </div>\n                    </div>\n                  ) : showNoResults ? (\n                    <div\n                      className='px-4 py-4 text-sm text-gray-500'\n                      role='status'\n                    >\n                      <p className='mb-2'>\n                        No artists found for &quot;{query}&quot;\n                      </p>\n                      <p className='text-xs text-gray-400'>\n                        Can&apos;t find your artist?{' '}\n                        <a\n                          href='https://artists.spotify.com'\n                          target='_blank'\n                          rel='noopener noreferrer'\n                          className='text-indigo-600 hover:text-indigo-500 underline'\n                        >\n                          Verify your Spotify artist profile\n                        </a>\n                      </p>\n                    </div>\n                  ) : (\n                    filteredOptions.map((option, index) => (\n                      <Headless.Combobox.Option\n                        key={option.id}\n                        className={({ active }) =>\n                          clsx(\n                            'relative cursor-pointer select-none px-4 py-3 transition-colors',\n                            'focus-visible:outline-none',\n                            active\n                              ? 'bg-indigo-600 text-white'\n                              : 'text-gray-900 hover:bg-gray-50'\n                          )\n                        }\n                        value={option}\n                        data-index={index}\n                        id={`option-${option.id}`}\n                      >\n                        {({ active, selected }) => (\n                          <div\n                            className='flex items-center space-x-3'\n                            role='option'\n                            aria-selected={selected}\n                          >\n                            {option.imageUrl ? (\n                              <Image\n                                src={option.imageUrl}\n                                alt=''\n                                width={32}\n                                height={32}\n                                className='h-8 w-8 rounded-full object-cover flex-shrink-0'\n                                loading='lazy'\n                                aria-hidden='true'\n                              />\n                            ) : (\n                              <div\n                                className='h-8 w-8 rounded-full bg-gray-200 flex-shrink-0'\n                                aria-hidden='true'\n                              />\n                            )}\n                            <span\n                              className={clsx(\n                                'truncate text-sm',\n                                active || selected\n                                  ? 'font-semibold'\n                                  : 'font-normal'\n                              )}\n                            >\n                              {option.name}\n                            </span>\n                            {(active || selected) && (\n                              <span\n                                className={clsx(\n                                  'absolute inset-y-0 right-0 flex items-center pr-4',\n                                  active ? 'text-white' : 'text-indigo-600'\n                                )}\n                                aria-hidden='true'\n                              >\n                                <svg\n                                  className='h-4 w-4'\n                                  fill='currentColor'\n                                  viewBox='0 0 20 20'\n                                  aria-hidden='true'\n                                >\n                                  <path\n                                    fillRule='evenodd'\n                                    d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z'\n                                    clipRule='evenodd'\n                                  />\n                                </svg>\n                              </span>\n                            )}\n                          </div>\n                        )}\n                      </Headless.Combobox.Option>\n                    ))\n                  )}\n                </Headless.Combobox.Options>\n              </>\n            );\n          }}\n        </Headless.Combobox>\n      </div>\n    );\n  }\n);\n\nCombobox.displayName = 'Combobox';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Combobox.tsx" },
        "span": [13484, 13497],
        "sourceCode": "'use client';\n\nimport * as Headless from '@headlessui/react';\nimport {\n  ChevronDownIcon,\n  MagnifyingGlassIcon,\n} from '@heroicons/react/20/solid';\nimport { clsx } from 'clsx';\nimport Image from 'next/image';\nimport {\n  forwardRef,\n  KeyboardEvent,\n  useCallback,\n  useEffect,\n  useId,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\n\ninterface ComboboxOption {\n  id: string;\n  name: string;\n  imageUrl?: string;\n}\n\ninterface ComboboxProps {\n  options: ComboboxOption[];\n  value: ComboboxOption | null;\n  onChange: (option: ComboboxOption | null) => void;\n  onInputChange: (value: string) => void;\n  onSubmit?: () => void;\n  placeholder?: string;\n  label?: string;\n  className?: string;\n  disabled?: boolean;\n  maxDisplayedOptions?: number;\n  isLoading?: boolean;\n  error?: string | null;\n  ctaText?: string;\n  showCta?: boolean;\n}\n\nexport const Combobox = forwardRef<HTMLDivElement, ComboboxProps>(\n  (\n    {\n      options,\n      value,\n      onChange,\n      onInputChange,\n      onSubmit,\n      placeholder = 'Search for an artist...',\n      label = 'Search for an artist',\n      className,\n      disabled,\n      maxDisplayedOptions = 8,\n      isLoading = false,\n      error = null,\n      ctaText = 'Claim Profile',\n      showCta = true,\n    },\n    ref\n  ) => {\n    const [query, setQuery] = useState('');\n    const [activeIndex, setActiveIndex] = useState<number>(-1);\n    const inputId = useId();\n    const listboxId = useId();\n    const errorId = useId();\n    const optionsRef = useRef<HTMLDivElement>(null);\n    const inputRef = useRef<HTMLInputElement>(null);\n    const [isOpen, setIsOpen] = useState(false);\n\n    // Memoize filtered options for better performance\n    const filteredOptions = useMemo(() => {\n      if (query === '') {\n        return options.slice(0, maxDisplayedOptions);\n      }\n\n      const lowerQuery = query.toLowerCase();\n      return options\n        .filter(option => option.name.toLowerCase().includes(lowerQuery))\n        .slice(0, maxDisplayedOptions);\n    }, [options, query, maxDisplayedOptions]);\n\n    // Reset active index when filtered options change\n    useEffect(() => {\n      setActiveIndex(filteredOptions.length > 0 ? 0 : -1);\n    }, [filteredOptions]);\n\n    // Scroll active option into view\n    useEffect(() => {\n      if (isOpen && activeIndex >= 0 && optionsRef.current) {\n        const activeOption = optionsRef.current.querySelector(\n          `[data-index=\"${activeIndex}\"]`\n        );\n        if (activeOption) {\n          activeOption.scrollIntoView({ block: 'nearest' });\n        }\n      }\n    }, [activeIndex, isOpen]);\n\n    // Forward declaration of handleSelect for TypeScript\n    const handleSelect: (option: ComboboxOption | null) => void = useCallback(\n      (option: ComboboxOption | null) => {\n        if (option) {\n          onChange(option);\n        }\n        setQuery('');\n        setIsOpen(false);\n      },\n      [onChange]\n    );\n\n    // Handle keyboard navigation\n    const handleKeyDown = useCallback(\n      (e: KeyboardEvent<HTMLInputElement>) => {\n        if (!isOpen) {\n          if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n            e.preventDefault();\n            setIsOpen(true);\n          }\n          return;\n        }\n\n        switch (e.key) {\n          case 'ArrowDown':\n            e.preventDefault();\n            setActiveIndex(prev =>\n              prev < filteredOptions.length - 1 ? prev + 1 : 0\n            );\n            break;\n          case 'ArrowUp':\n            e.preventDefault();\n            setActiveIndex(prev =>\n              prev > 0 ? prev - 1 : filteredOptions.length - 1\n            );\n            break;\n          case 'Home':\n            e.preventDefault();\n            setActiveIndex(0);\n            break;\n          case 'End':\n            e.preventDefault();\n            setActiveIndex(filteredOptions.length - 1);\n            break;\n          case 'Enter':\n            e.preventDefault();\n            if (activeIndex >= 0 && activeIndex < filteredOptions.length) {\n              handleSelect(filteredOptions[activeIndex]);\n              setIsOpen(false);\n              inputRef.current?.focus();\n            }\n            break;\n          case 'Escape':\n            e.preventDefault();\n            setIsOpen(false);\n            inputRef.current?.focus();\n            break;\n          case 'Tab':\n            setIsOpen(false);\n            break;\n        }\n      },\n      [filteredOptions, isOpen, activeIndex, handleSelect]\n    );\n\n    // Memoize the input change handler\n    const handleInputChange = useCallback(\n      (newQuery: string) => {\n        setQuery(newQuery);\n        onInputChange(newQuery);\n        setIsOpen(true);\n      },\n      [onInputChange]\n    );\n\n    // handleSelect is already defined above\n\n    // Memoize the display value function\n    const displayValue = useCallback((item: ComboboxOption | null) => {\n      return item?.name || '';\n    }, []);\n\n    const handleSubmit = useCallback(() => {\n      if (onSubmit && value) {\n        onSubmit();\n      }\n    }, [onSubmit, value]);\n\n    // Handle open state changes\n    const handleOpenChange = useCallback(\n      (open: boolean) => {\n        setIsOpen(open);\n        if (open) {\n          // Reset active index when opening\n          setActiveIndex(filteredOptions.length > 0 ? 0 : -1);\n        }\n      },\n      [filteredOptions]\n    );\n\n    const hasResults = filteredOptions.length > 0;\n    const showNoResults = query.length > 0 && !hasResults && !isLoading;\n    const isValidSelection = value !== null;\n\n    return (\n      <div className={clsx('relative w-full', className)} ref={ref}>\n        {/* Hidden label for screen readers */}\n        <label htmlFor={inputId} className='sr-only'>\n          {label}\n        </label>\n\n        {/* Status announcer for screen readers */}\n        <div aria-live='polite' aria-atomic='true' className='sr-only'>\n          {value ? `Selected: ${value.name}` : ''}\n        </div>\n\n        <Headless.Combobox\n          value={value}\n          onChange={val => {\n            if (val) handleSelect(val);\n          }}\n          disabled={disabled}\n          nullable\n        >\n          {({ open }) => {\n            // Sync our internal open state with Headless UI's open state\n            if (open !== isOpen) {\n              handleOpenChange(open);\n            }\n\n            return (\n              <>\n                {/* Single container with unified styling */}\n                <div\n                  className={clsx(\n                    // Base container styles\n                    'relative flex w-full overflow-hidden',\n                    // Single border/ring system\n                    'rounded-xl bg-white/5 backdrop-blur-xl shadow-lg ring-1 ring-white/10',\n                    // Focus-within state for container\n                    'focus-within:ring-2 focus-within:ring-white/20',\n                    // Mobile stacking\n                    'flex-col sm:flex-row',\n                    // Error state\n                    error && 'ring-red-500/50 focus-within:ring-red-500/50',\n                    // Disabled state\n                    disabled && 'opacity-50 cursor-not-allowed'\n                  )}\n                >\n                  {/* Input section */}\n                  <div className='relative flex-1'>\n                    <Headless.Combobox.Input\n                      ref={inputRef}\n                      id={inputId}\n                      aria-controls={listboxId}\n                      aria-expanded={open}\n                      aria-describedby={error ? errorId : undefined}\n                      aria-activedescendant={\n                        open &&\n                        activeIndex >= 0 &&\n                        activeIndex < filteredOptions.length\n                          ? `option-${filteredOptions[activeIndex].id}`\n                          : undefined\n                      }\n                      className={clsx(\n                        // Remove native border and focus styles\n                        'w-full border-0 bg-transparent outline-none ring-0 focus-visible:ring-0',\n                        // Typography and spacing\n                        'px-4 py-3.5 text-sm/6 text-white placeholder-white/70',\n                        // Height matching (44px minimum for mobile)\n                        'h-12 sm:h-11',\n                        // Rounded corners (left only on desktop)\n                        'rounded-xl sm:rounded-l-xl sm:rounded-r-none',\n                        // Focus-visible for accessibility\n                        'focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white/50',\n                        // Disabled state\n                        disabled && 'cursor-not-allowed'\n                      )}\n                      placeholder={placeholder}\n                      onChange={event => handleInputChange(event.target.value)}\n                      onKeyDown={handleKeyDown}\n                      displayValue={displayValue}\n                      disabled={disabled}\n                      autoComplete='off'\n                    />\n\n                    {/* Dropdown button */}\n                    <Headless.Combobox.Button\n                      className={clsx(\n                        'absolute inset-y-0 right-0 flex items-center justify-center w-10',\n                        'focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white/50',\n                        disabled && 'cursor-not-allowed'\n                      )}\n                      disabled={disabled}\n                      aria-label={open ? 'Close dropdown' : 'Open dropdown'}\n                    >\n                      {isLoading ? (\n                        <LoadingSpinner size='sm' className='text-white/50' />\n                      ) : (\n                        <ChevronDownIcon\n                          className={clsx(\n                            'h-4 w-4 text-white/50 transition-transform',\n                            open && 'rotate-180'\n                          )}\n                          aria-hidden='true'\n                        />\n                      )}\n                    </Headless.Combobox.Button>\n                  </div>\n\n                  {/* Separator line */}\n                  {showCta && (\n                    <div\n                      className='hidden sm:block w-px bg-white/10'\n                      aria-hidden='true'\n                    />\n                  )}\n\n                  {/* CTA Button */}\n                  {showCta && (\n                    <button\n                      type='button'\n                      onClick={handleSubmit}\n                      disabled={disabled || !isValidSelection}\n                      className={clsx(\n                        // Remove default button styles and match container\n                        'border-0 shadow-none ring-0',\n                        // Height and radius matching\n                        'h-12 sm:h-11 rounded-xl sm:rounded-l-none sm:rounded-r-xl',\n                        // Spacing\n                        'px-4 sm:px-6 flex items-center justify-center',\n                        // Typography\n                        'text-sm font-medium',\n                        // Colors\n                        'bg-white text-gray-900 hover:bg-white/90 transition-colors',\n                        // Disabled state\n                        'disabled:bg-white/50 disabled:text-gray-500 disabled:cursor-not-allowed',\n                        // Focus state\n                        'focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white'\n                      )}\n                      aria-label={`${ctaText} for ${value?.name || 'selected artist'}`}\n                    >\n                      <MagnifyingGlassIcon\n                        className='h-4 w-4 mr-2'\n                        aria-hidden='true'\n                      />\n                      {ctaText}\n                    </button>\n                  )}\n                </div>\n\n                {/* Error message */}\n                {error && (\n                  <p\n                    id={errorId}\n                    className='mt-2 text-sm text-red-400'\n                    role='alert'\n                  >\n                    {error}\n                  </p>\n                )}\n\n                {/* Dropdown options */}\n                <Headless.Combobox.Options\n                  ref={optionsRef}\n                  id={listboxId}\n                  className={clsx(\n                    'absolute z-50 mt-2 max-h-60 w-full overflow-auto',\n                    'rounded-xl bg-white/95 backdrop-blur-xl shadow-xl ring-1 ring-white/20',\n                    'focus-visible:outline-none'\n                  )}\n                  static={open}\n                >\n                  {isLoading && query.length > 0 ? (\n                    <div\n                      className='px-4 py-3 text-sm text-gray-500'\n                      role='status'\n                    >\n                      <div className='flex items-center space-x-2'>\n                        <LoadingSpinner size='sm' className='text-gray-500' />\n                        <span>Searching artists...</span>\n                      </div>\n                    </div>\n                  ) : showNoResults ? (\n                    <div\n                      className='px-4 py-4 text-sm text-gray-500'\n                      role='status'\n                    >\n                      <p className='mb-2'>\n                        No artists found for &quot;{query}&quot;\n                      </p>\n                      <p className='text-xs text-gray-400'>\n                        Can&apos;t find your artist?{' '}\n                        <a\n                          href='https://artists.spotify.com'\n                          target='_blank'\n                          rel='noopener noreferrer'\n                          className='text-indigo-600 hover:text-indigo-500 underline'\n                        >\n                          Verify your Spotify artist profile\n                        </a>\n                      </p>\n                    </div>\n                  ) : (\n                    filteredOptions.map((option, index) => (\n                      <Headless.Combobox.Option\n                        key={option.id}\n                        className={({ active }) =>\n                          clsx(\n                            'relative cursor-pointer select-none px-4 py-3 transition-colors',\n                            'focus-visible:outline-none',\n                            active\n                              ? 'bg-indigo-600 text-white'\n                              : 'text-gray-900 hover:bg-gray-50'\n                          )\n                        }\n                        value={option}\n                        data-index={index}\n                        id={`option-${option.id}`}\n                      >\n                        {({ active, selected }) => (\n                          <div\n                            className='flex items-center space-x-3'\n                            role='option'\n                            aria-selected={selected}\n                          >\n                            {option.imageUrl ? (\n                              <Image\n                                src={option.imageUrl}\n                                alt=''\n                                width={32}\n                                height={32}\n                                className='h-8 w-8 rounded-full object-cover flex-shrink-0'\n                                loading='lazy'\n                                aria-hidden='true'\n                              />\n                            ) : (\n                              <div\n                                className='h-8 w-8 rounded-full bg-gray-200 flex-shrink-0'\n                                aria-hidden='true'\n                              />\n                            )}\n                            <span\n                              className={clsx(\n                                'truncate text-sm',\n                                active || selected\n                                  ? 'font-semibold'\n                                  : 'font-normal'\n                              )}\n                            >\n                              {option.name}\n                            </span>\n                            {(active || selected) && (\n                              <span\n                                className={clsx(\n                                  'absolute inset-y-0 right-0 flex items-center pr-4',\n                                  active ? 'text-white' : 'text-indigo-600'\n                                )}\n                                aria-hidden='true'\n                              >\n                                <svg\n                                  className='h-4 w-4'\n                                  fill='currentColor'\n                                  viewBox='0 0 20 20'\n                                  aria-hidden='true'\n                                >\n                                  <path\n                                    fillRule='evenodd'\n                                    d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z'\n                                    clipRule='evenodd'\n                                  />\n                                </svg>\n                              </span>\n                            )}\n                          </div>\n                        )}\n                      </Headless.Combobox.Option>\n                    ))\n                  )}\n                </Headless.Combobox.Options>\n              </>\n            );\n          }}\n        </Headless.Combobox>\n      </div>\n    );\n  }\n);\n\nCombobox.displayName = 'Combobox';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useFocusableInteractive",
      "severity": "warning",
      "description": "The HTML element with the interactive role 'option' is not focusable.",
      "message": [
        {
          "elements": [],
          "content": "The HTML element with the interactive role "
        },
        { "elements": ["Emphasis"], "content": "'option'" },
        { "elements": [], "content": " is not focusable." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "A non-interactive HTML element that is not focusable may not be reachable for users that rely on keyboard navigation, even with an added role like "
                },
                { "elements": ["Emphasis"], "content": "'option'" },
                { "elements": [], "content": "." }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Add a " },
                { "elements": ["Emphasis"], "content": "tabIndex" },
                {
                  "elements": [],
                  "content": " attribute to make this element focusable."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Combobox.tsx" },
        "span": [15069, 15264],
        "sourceCode": "'use client';\n\nimport * as Headless from '@headlessui/react';\nimport {\n  ChevronDownIcon,\n  MagnifyingGlassIcon,\n} from '@heroicons/react/20/solid';\nimport { clsx } from 'clsx';\nimport Image from 'next/image';\nimport {\n  forwardRef,\n  KeyboardEvent,\n  useCallback,\n  useEffect,\n  useId,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\n\ninterface ComboboxOption {\n  id: string;\n  name: string;\n  imageUrl?: string;\n}\n\ninterface ComboboxProps {\n  options: ComboboxOption[];\n  value: ComboboxOption | null;\n  onChange: (option: ComboboxOption | null) => void;\n  onInputChange: (value: string) => void;\n  onSubmit?: () => void;\n  placeholder?: string;\n  label?: string;\n  className?: string;\n  disabled?: boolean;\n  maxDisplayedOptions?: number;\n  isLoading?: boolean;\n  error?: string | null;\n  ctaText?: string;\n  showCta?: boolean;\n}\n\nexport const Combobox = forwardRef<HTMLDivElement, ComboboxProps>(\n  (\n    {\n      options,\n      value,\n      onChange,\n      onInputChange,\n      onSubmit,\n      placeholder = 'Search for an artist...',\n      label = 'Search for an artist',\n      className,\n      disabled,\n      maxDisplayedOptions = 8,\n      isLoading = false,\n      error = null,\n      ctaText = 'Claim Profile',\n      showCta = true,\n    },\n    ref\n  ) => {\n    const [query, setQuery] = useState('');\n    const [activeIndex, setActiveIndex] = useState<number>(-1);\n    const inputId = useId();\n    const listboxId = useId();\n    const errorId = useId();\n    const optionsRef = useRef<HTMLDivElement>(null);\n    const inputRef = useRef<HTMLInputElement>(null);\n    const [isOpen, setIsOpen] = useState(false);\n\n    // Memoize filtered options for better performance\n    const filteredOptions = useMemo(() => {\n      if (query === '') {\n        return options.slice(0, maxDisplayedOptions);\n      }\n\n      const lowerQuery = query.toLowerCase();\n      return options\n        .filter(option => option.name.toLowerCase().includes(lowerQuery))\n        .slice(0, maxDisplayedOptions);\n    }, [options, query, maxDisplayedOptions]);\n\n    // Reset active index when filtered options change\n    useEffect(() => {\n      setActiveIndex(filteredOptions.length > 0 ? 0 : -1);\n    }, [filteredOptions]);\n\n    // Scroll active option into view\n    useEffect(() => {\n      if (isOpen && activeIndex >= 0 && optionsRef.current) {\n        const activeOption = optionsRef.current.querySelector(\n          `[data-index=\"${activeIndex}\"]`\n        );\n        if (activeOption) {\n          activeOption.scrollIntoView({ block: 'nearest' });\n        }\n      }\n    }, [activeIndex, isOpen]);\n\n    // Forward declaration of handleSelect for TypeScript\n    const handleSelect: (option: ComboboxOption | null) => void = useCallback(\n      (option: ComboboxOption | null) => {\n        if (option) {\n          onChange(option);\n        }\n        setQuery('');\n        setIsOpen(false);\n      },\n      [onChange]\n    );\n\n    // Handle keyboard navigation\n    const handleKeyDown = useCallback(\n      (e: KeyboardEvent<HTMLInputElement>) => {\n        if (!isOpen) {\n          if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n            e.preventDefault();\n            setIsOpen(true);\n          }\n          return;\n        }\n\n        switch (e.key) {\n          case 'ArrowDown':\n            e.preventDefault();\n            setActiveIndex(prev =>\n              prev < filteredOptions.length - 1 ? prev + 1 : 0\n            );\n            break;\n          case 'ArrowUp':\n            e.preventDefault();\n            setActiveIndex(prev =>\n              prev > 0 ? prev - 1 : filteredOptions.length - 1\n            );\n            break;\n          case 'Home':\n            e.preventDefault();\n            setActiveIndex(0);\n            break;\n          case 'End':\n            e.preventDefault();\n            setActiveIndex(filteredOptions.length - 1);\n            break;\n          case 'Enter':\n            e.preventDefault();\n            if (activeIndex >= 0 && activeIndex < filteredOptions.length) {\n              handleSelect(filteredOptions[activeIndex]);\n              setIsOpen(false);\n              inputRef.current?.focus();\n            }\n            break;\n          case 'Escape':\n            e.preventDefault();\n            setIsOpen(false);\n            inputRef.current?.focus();\n            break;\n          case 'Tab':\n            setIsOpen(false);\n            break;\n        }\n      },\n      [filteredOptions, isOpen, activeIndex, handleSelect]\n    );\n\n    // Memoize the input change handler\n    const handleInputChange = useCallback(\n      (newQuery: string) => {\n        setQuery(newQuery);\n        onInputChange(newQuery);\n        setIsOpen(true);\n      },\n      [onInputChange]\n    );\n\n    // handleSelect is already defined above\n\n    // Memoize the display value function\n    const displayValue = useCallback((item: ComboboxOption | null) => {\n      return item?.name || '';\n    }, []);\n\n    const handleSubmit = useCallback(() => {\n      if (onSubmit && value) {\n        onSubmit();\n      }\n    }, [onSubmit, value]);\n\n    // Handle open state changes\n    const handleOpenChange = useCallback(\n      (open: boolean) => {\n        setIsOpen(open);\n        if (open) {\n          // Reset active index when opening\n          setActiveIndex(filteredOptions.length > 0 ? 0 : -1);\n        }\n      },\n      [filteredOptions]\n    );\n\n    const hasResults = filteredOptions.length > 0;\n    const showNoResults = query.length > 0 && !hasResults && !isLoading;\n    const isValidSelection = value !== null;\n\n    return (\n      <div className={clsx('relative w-full', className)} ref={ref}>\n        {/* Hidden label for screen readers */}\n        <label htmlFor={inputId} className='sr-only'>\n          {label}\n        </label>\n\n        {/* Status announcer for screen readers */}\n        <div aria-live='polite' aria-atomic='true' className='sr-only'>\n          {value ? `Selected: ${value.name}` : ''}\n        </div>\n\n        <Headless.Combobox\n          value={value}\n          onChange={val => {\n            if (val) handleSelect(val);\n          }}\n          disabled={disabled}\n          nullable\n        >\n          {({ open }) => {\n            // Sync our internal open state with Headless UI's open state\n            if (open !== isOpen) {\n              handleOpenChange(open);\n            }\n\n            return (\n              <>\n                {/* Single container with unified styling */}\n                <div\n                  className={clsx(\n                    // Base container styles\n                    'relative flex w-full overflow-hidden',\n                    // Single border/ring system\n                    'rounded-xl bg-white/5 backdrop-blur-xl shadow-lg ring-1 ring-white/10',\n                    // Focus-within state for container\n                    'focus-within:ring-2 focus-within:ring-white/20',\n                    // Mobile stacking\n                    'flex-col sm:flex-row',\n                    // Error state\n                    error && 'ring-red-500/50 focus-within:ring-red-500/50',\n                    // Disabled state\n                    disabled && 'opacity-50 cursor-not-allowed'\n                  )}\n                >\n                  {/* Input section */}\n                  <div className='relative flex-1'>\n                    <Headless.Combobox.Input\n                      ref={inputRef}\n                      id={inputId}\n                      aria-controls={listboxId}\n                      aria-expanded={open}\n                      aria-describedby={error ? errorId : undefined}\n                      aria-activedescendant={\n                        open &&\n                        activeIndex >= 0 &&\n                        activeIndex < filteredOptions.length\n                          ? `option-${filteredOptions[activeIndex].id}`\n                          : undefined\n                      }\n                      className={clsx(\n                        // Remove native border and focus styles\n                        'w-full border-0 bg-transparent outline-none ring-0 focus-visible:ring-0',\n                        // Typography and spacing\n                        'px-4 py-3.5 text-sm/6 text-white placeholder-white/70',\n                        // Height matching (44px minimum for mobile)\n                        'h-12 sm:h-11',\n                        // Rounded corners (left only on desktop)\n                        'rounded-xl sm:rounded-l-xl sm:rounded-r-none',\n                        // Focus-visible for accessibility\n                        'focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white/50',\n                        // Disabled state\n                        disabled && 'cursor-not-allowed'\n                      )}\n                      placeholder={placeholder}\n                      onChange={event => handleInputChange(event.target.value)}\n                      onKeyDown={handleKeyDown}\n                      displayValue={displayValue}\n                      disabled={disabled}\n                      autoComplete='off'\n                    />\n\n                    {/* Dropdown button */}\n                    <Headless.Combobox.Button\n                      className={clsx(\n                        'absolute inset-y-0 right-0 flex items-center justify-center w-10',\n                        'focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white/50',\n                        disabled && 'cursor-not-allowed'\n                      )}\n                      disabled={disabled}\n                      aria-label={open ? 'Close dropdown' : 'Open dropdown'}\n                    >\n                      {isLoading ? (\n                        <LoadingSpinner size='sm' className='text-white/50' />\n                      ) : (\n                        <ChevronDownIcon\n                          className={clsx(\n                            'h-4 w-4 text-white/50 transition-transform',\n                            open && 'rotate-180'\n                          )}\n                          aria-hidden='true'\n                        />\n                      )}\n                    </Headless.Combobox.Button>\n                  </div>\n\n                  {/* Separator line */}\n                  {showCta && (\n                    <div\n                      className='hidden sm:block w-px bg-white/10'\n                      aria-hidden='true'\n                    />\n                  )}\n\n                  {/* CTA Button */}\n                  {showCta && (\n                    <button\n                      type='button'\n                      onClick={handleSubmit}\n                      disabled={disabled || !isValidSelection}\n                      className={clsx(\n                        // Remove default button styles and match container\n                        'border-0 shadow-none ring-0',\n                        // Height and radius matching\n                        'h-12 sm:h-11 rounded-xl sm:rounded-l-none sm:rounded-r-xl',\n                        // Spacing\n                        'px-4 sm:px-6 flex items-center justify-center',\n                        // Typography\n                        'text-sm font-medium',\n                        // Colors\n                        'bg-white text-gray-900 hover:bg-white/90 transition-colors',\n                        // Disabled state\n                        'disabled:bg-white/50 disabled:text-gray-500 disabled:cursor-not-allowed',\n                        // Focus state\n                        'focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white'\n                      )}\n                      aria-label={`${ctaText} for ${value?.name || 'selected artist'}`}\n                    >\n                      <MagnifyingGlassIcon\n                        className='h-4 w-4 mr-2'\n                        aria-hidden='true'\n                      />\n                      {ctaText}\n                    </button>\n                  )}\n                </div>\n\n                {/* Error message */}\n                {error && (\n                  <p\n                    id={errorId}\n                    className='mt-2 text-sm text-red-400'\n                    role='alert'\n                  >\n                    {error}\n                  </p>\n                )}\n\n                {/* Dropdown options */}\n                <Headless.Combobox.Options\n                  ref={optionsRef}\n                  id={listboxId}\n                  className={clsx(\n                    'absolute z-50 mt-2 max-h-60 w-full overflow-auto',\n                    'rounded-xl bg-white/95 backdrop-blur-xl shadow-xl ring-1 ring-white/20',\n                    'focus-visible:outline-none'\n                  )}\n                  static={open}\n                >\n                  {isLoading && query.length > 0 ? (\n                    <div\n                      className='px-4 py-3 text-sm text-gray-500'\n                      role='status'\n                    >\n                      <div className='flex items-center space-x-2'>\n                        <LoadingSpinner size='sm' className='text-gray-500' />\n                        <span>Searching artists...</span>\n                      </div>\n                    </div>\n                  ) : showNoResults ? (\n                    <div\n                      className='px-4 py-4 text-sm text-gray-500'\n                      role='status'\n                    >\n                      <p className='mb-2'>\n                        No artists found for &quot;{query}&quot;\n                      </p>\n                      <p className='text-xs text-gray-400'>\n                        Can&apos;t find your artist?{' '}\n                        <a\n                          href='https://artists.spotify.com'\n                          target='_blank'\n                          rel='noopener noreferrer'\n                          className='text-indigo-600 hover:text-indigo-500 underline'\n                        >\n                          Verify your Spotify artist profile\n                        </a>\n                      </p>\n                    </div>\n                  ) : (\n                    filteredOptions.map((option, index) => (\n                      <Headless.Combobox.Option\n                        key={option.id}\n                        className={({ active }) =>\n                          clsx(\n                            'relative cursor-pointer select-none px-4 py-3 transition-colors',\n                            'focus-visible:outline-none',\n                            active\n                              ? 'bg-indigo-600 text-white'\n                              : 'text-gray-900 hover:bg-gray-50'\n                          )\n                        }\n                        value={option}\n                        data-index={index}\n                        id={`option-${option.id}`}\n                      >\n                        {({ active, selected }) => (\n                          <div\n                            className='flex items-center space-x-3'\n                            role='option'\n                            aria-selected={selected}\n                          >\n                            {option.imageUrl ? (\n                              <Image\n                                src={option.imageUrl}\n                                alt=''\n                                width={32}\n                                height={32}\n                                className='h-8 w-8 rounded-full object-cover flex-shrink-0'\n                                loading='lazy'\n                                aria-hidden='true'\n                              />\n                            ) : (\n                              <div\n                                className='h-8 w-8 rounded-full bg-gray-200 flex-shrink-0'\n                                aria-hidden='true'\n                              />\n                            )}\n                            <span\n                              className={clsx(\n                                'truncate text-sm',\n                                active || selected\n                                  ? 'font-semibold'\n                                  : 'font-normal'\n                              )}\n                            >\n                              {option.name}\n                            </span>\n                            {(active || selected) && (\n                              <span\n                                className={clsx(\n                                  'absolute inset-y-0 right-0 flex items-center pr-4',\n                                  active ? 'text-white' : 'text-indigo-600'\n                                )}\n                                aria-hidden='true'\n                              >\n                                <svg\n                                  className='h-4 w-4'\n                                  fill='currentColor'\n                                  viewBox='0 0 20 20'\n                                  aria-hidden='true'\n                                >\n                                  <path\n                                    fillRule='evenodd'\n                                    d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z'\n                                    clipRule='evenodd'\n                                  />\n                                </svg>\n                              </span>\n                            )}\n                          </div>\n                        )}\n                      </Headless.Combobox.Option>\n                    ))\n                  )}\n                </Headless.Combobox.Options>\n              </>\n            );\n          }}\n        </Headless.Combobox>\n      </div>\n    );\n  }\n);\n\nCombobox.displayName = 'Combobox';\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<aside>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<aside>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/ContactSidebar.tsx" },
        "span": [7977, 7997],
        "sourceCode": "'use client';\n\nimport { Button, Input, Label } from '@jovie/ui';\nimport { Copy, ExternalLink, Plus, RefreshCw, X } from 'lucide-react';\nimport Link from 'next/link';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { Avatar } from '@/components/atoms/Avatar';\nimport { HeaderIconButton } from '@/components/atoms/HeaderIconButton';\nimport { PlatformPill } from '@/components/dashboard/atoms/PlatformPill';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\nimport { track } from '@/lib/analytics';\nimport { cn } from '@/lib/utils';\nimport { validateLink } from '@/lib/utils/platform-detection';\nimport type { Contact, ContactSidebarMode, ContactSocialLink } from '@/types';\n\nexport interface ContactSidebarProps {\n  contact: Contact | null;\n  mode: ContactSidebarMode;\n  isOpen: boolean;\n  onClose?: () => void;\n  onRefresh?: () => void;\n  onContactChange?: (contact: Contact) => void;\n  onSave?: (contact: Contact) => void | Promise<void>;\n  isSaving?: boolean;\n  /**\n   * Optional avatar upload handler. When provided and mode === 'admin',\n   * the avatar becomes uploadable and this callback is used to obtain\n   * the new avatar URL. The updated URL will be merged into the contact\n   * and emitted via onContactChange.\n   */\n  onAvatarUpload?: (file: File, contact: Contact) => Promise<string>;\n}\n\nfunction isFormElement(target: EventTarget | null): boolean {\n  if (!(target instanceof HTMLElement)) return false;\n  const tag = target.tagName;\n  return (\n    tag === 'INPUT' ||\n    tag === 'TEXTAREA' ||\n    tag === 'SELECT' ||\n    tag === 'BUTTON'\n  );\n}\n\nfunction formatUsername(username: string | undefined): string {\n  if (!username) return '';\n  return username.startsWith('@') ? username : `@${username}`;\n}\n\nfunction sanitizeUsernameInput(raw: string): string {\n  const trimmed = raw.trim();\n  const withoutAt = trimmed.startsWith('@') ? trimmed.slice(1) : trimmed;\n  return withoutAt;\n}\n\nfunction extractUsernameFromUrl(value: string): string | null {\n  if (!value) return null;\n\n  try {\n    const url = new URL(value);\n    const host = url.hostname.replace(/^www\\./, '').toLowerCase();\n    const segments = url.pathname.split('/').filter(Boolean);\n\n    if (segments.length === 0) return null;\n\n    const first = segments[0] ?? '';\n    const second = segments[1] ?? '';\n\n    // Define allowed hostnames for each platform (no partials)\n    const tiktokHosts = ['tiktok.com'];\n    const snapchatHosts = ['snapchat.com'];\n    const youtubeHosts = ['youtube.com'];\n\n    if (tiktokHosts.includes(host)) {\n      const candidate = first.startsWith('@') ? first.slice(1) : first;\n      return candidate || null;\n    }\n\n    if (snapchatHosts.includes(host)) {\n      const candidate = first === 'add' || first === 'u' ? second : first;\n      const cleaned = candidate.startsWith('@')\n        ? candidate.slice(1)\n        : candidate;\n      return cleaned || null;\n    }\n\n    if (youtubeHosts.includes(host)) {\n      if (first.startsWith('@')) return first.slice(1) || null;\n      return null;\n    }\n\n    const candidate = first.startsWith('@') ? first.slice(1) : first;\n    return candidate || null;\n  } catch {\n    return null;\n  }\n}\n\nfunction extractUsernameFromLabel(value: string | undefined): string | null {\n  if (!value) return null;\n  const trimmed = value.trim();\n  if (!trimmed) return null;\n\n  const lastSegment = trimmed\n    .replace(/^https?:\\/\\//, '')\n    .split('/')\n    .filter(Boolean)\n    .pop();\n\n  if (!lastSegment) return null;\n\n  const candidate = lastSegment.startsWith('@')\n    ? lastSegment.slice(1)\n    : lastSegment;\n  if (!candidate) return null;\n\n  if (!/^[a-zA-Z0-9._-]{2,}$/.test(candidate)) return null;\n  return candidate;\n}\n\nfunction isValidUrl(value: string): boolean {\n  if (!value) return false;\n  try {\n    const url = new URL(value);\n    const protocol = url.protocol.toLowerCase();\n    return protocol === 'http:' || protocol === 'https:';\n  } catch {\n    return false;\n  }\n}\n\nexport function ContactSidebar({\n  contact,\n  mode,\n  isOpen,\n  onClose,\n  onRefresh,\n  onContactChange,\n  onSave,\n  isSaving,\n  onAvatarUpload,\n}: ContactSidebarProps) {\n  const [isAddingLink, setIsAddingLink] = useState(false);\n  const [newLinkUrl, setNewLinkUrl] = useState('');\n\n  const isEditable = mode === 'admin';\n  const hasContact = Boolean(contact);\n\n  const fullName = useMemo(() => {\n    if (!contact) return '';\n    const parts = [contact.firstName, contact.lastName]\n      .filter(Boolean)\n      .join(' ');\n    return parts || contact.displayName || contact.username;\n  }, [contact]);\n\n  const handleFieldChange = useCallback(\n    (updater: (current: Contact) => Contact) => {\n      if (!contact || !onContactChange) return;\n      onContactChange(updater(contact));\n    },\n    [contact, onContactChange]\n  );\n\n  const handleAvatarUpload = useCallback(\n    async (file: File) => {\n      if (!contact || !onAvatarUpload || !onContactChange) {\n        return contact?.avatarUrl ?? '';\n      }\n      track('contact_avatar_upload_start', { contactId: contact.id });\n      const newUrl = await onAvatarUpload(file, contact);\n      onContactChange({ ...contact, avatarUrl: newUrl });\n      track('contact_avatar_upload_success', { contactId: contact.id });\n      return newUrl;\n    },\n    [contact, onAvatarUpload, onContactChange]\n  );\n\n  const handleCopyProfileUrl = useCallback(async () => {\n    if (!contact?.username) return;\n    try {\n      const url = new URL(\n        `/${contact.username}`,\n        window.location.origin\n      ).toString();\n      await navigator.clipboard.writeText(url);\n    } catch (error) {\n      console.error('Failed to copy profile URL', error);\n    }\n  }, [contact]);\n\n  const handleNameChange = (field: 'firstName' | 'lastName', value: string) => {\n    handleFieldChange(current => ({ ...current, [field]: value }));\n  };\n\n  const handleUsernameChange = (raw: string) => {\n    const username = sanitizeUsernameInput(raw);\n    handleFieldChange(current => ({ ...current, username }));\n  };\n\n  const handleAddLink = () => {\n    if (!contact || !onContactChange) return;\n    const trimmedUrl = newLinkUrl.trim();\n    if (!isValidUrl(trimmedUrl)) return;\n\n    const detected = validateLink(trimmedUrl);\n    if (!detected || !detected.isValid) return;\n\n    const nextLink: ContactSocialLink = {\n      id: undefined,\n      label: detected.suggestedTitle,\n      url: detected.normalizedUrl,\n      platformType: detected.platform.icon,\n    };\n\n    onContactChange({\n      ...contact,\n      socialLinks: [...contact.socialLinks, nextLink],\n    });\n\n    setIsAddingLink(false);\n    setNewLinkUrl('');\n  };\n\n  const handleRemoveLink = (index: number) => {\n    handleFieldChange(current => ({\n      ...current,\n      socialLinks: current.socialLinks.filter((_link, i) => i !== index),\n    }));\n  };\n\n  const handleNewLinkKeyDown = (\n    event: React.KeyboardEvent<HTMLInputElement>\n  ) => {\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      if (isValidUrl(newLinkUrl)) {\n        handleAddLink();\n      }\n    } else if (event.key === 'Escape') {\n      event.preventDefault();\n      setIsAddingLink(false);\n      setNewLinkUrl('');\n    }\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    if (event.key === 'Escape' && !isFormElement(event.target)) {\n      onClose?.();\n    }\n  };\n\n  const canUploadAvatar =\n    isEditable && Boolean(onAvatarUpload && contact && onContactChange);\n\n  return (\n    <aside\n      aria-label='Contact details'\n      aria-hidden={!isOpen}\n      data-testid='contact-sidebar'\n      className={cn(\n        'relative flex h-full min-h-screen flex-col bg-surface-0 text-sidebar-foreground border-l border-subtle transition-[width,opacity,transform] duration-200 ease-out overflow-hidden',\n        'w-0 opacity-0 translate-x-4 pointer-events-none',\n        isOpen &&\n          'pointer-events-auto w-full opacity-100 translate-x-0 md:w-[300px] lg:w-[320px]'\n      )}\n      onKeyDown={handleKeyDown}\n      role='complementary'\n    >\n      <div className='flex items-center justify-between border-b border-sidebar-border px-3 py-2'>\n        <p className='text-xs text-sidebar-muted'>\n          {hasContact ? `ID: ${contact?.id}` : 'No contact selected'}\n        </p>\n        <div className='flex items-center gap-1'>\n          {hasContact && contact?.username && (\n            <HeaderIconButton\n              size='xs'\n              ariaLabel='Copy profile link'\n              onClick={handleCopyProfileUrl}\n              className='text-secondary-token hover:text-primary-token transition-transform duration-150 ease-out hover:scale-105 active:scale-95 focus-visible:ring-2 focus-visible:ring-sidebar-ring'\n            >\n              <Copy className='h-4 w-4' aria-hidden />\n            </HeaderIconButton>\n          )}\n          {hasContact && contact?.username && (\n            <HeaderIconButton\n              size='xs'\n              ariaLabel='Refresh profile'\n              onClick={() => {\n                if (onRefresh) {\n                  onRefresh();\n                  return;\n                }\n                window.location.reload();\n              }}\n              className='text-secondary-token hover:text-primary-token transition-transform duration-150 ease-out hover:scale-105 active:scale-95 focus-visible:ring-2 focus-visible:ring-sidebar-ring'\n            >\n              <RefreshCw className='h-4 w-4' aria-hidden />\n            </HeaderIconButton>\n          )}\n          {hasContact && contact?.username && (\n            <HeaderIconButton\n              size='xs'\n              ariaLabel='Open profile'\n              asChild\n              className='text-secondary-token hover:text-primary-token transition-transform duration-150 ease-out hover:scale-105 active:scale-95 focus-visible:ring-2 focus-visible:ring-sidebar-ring'\n            >\n              <Link\n                href={`/${contact.username}`}\n                target='_blank'\n                rel='noopener noreferrer'\n              >\n                <ExternalLink className='h-4 w-4' aria-hidden />\n              </Link>\n            </HeaderIconButton>\n          )}\n          {onClose && (\n            <HeaderIconButton\n              size='xs'\n              ariaLabel='Close contact sidebar'\n              onClick={onClose}\n              className='text-secondary-token hover:text-primary-token transition-transform duration-150 ease-out hover:scale-105 active:scale-95 focus-visible:ring-2 focus-visible:ring-sidebar-ring'\n            >\n              <X className='h-4 w-4' aria-hidden='true' />\n            </HeaderIconButton>\n          )}\n        </div>\n      </div>\n\n      <div className='flex-1 space-y-6 overflow-auto px-4 py-4'>\n        {!contact ? (\n          <p className='text-xs text-sidebar-muted'>\n            Select a row in the table and press Space to view contact details.\n          </p>\n        ) : (\n          <>\n            {/* Avatar section */}\n            <div\n              className='flex items-center gap-3'\n              data-testid='contact-avatar'\n            >\n              {canUploadAvatar ? (\n                <AvatarUploadable\n                  src={contact.avatarUrl ?? null}\n                  alt={fullName ? `${fullName}'s avatar` : 'Contact avatar'}\n                  name={fullName || contact.username}\n                  size='lg'\n                  uploadable={canUploadAvatar}\n                  onUpload={canUploadAvatar ? handleAvatarUpload : undefined}\n                  showHoverOverlay\n                />\n              ) : (\n                <Avatar\n                  src={contact.avatarUrl ?? null}\n                  alt={fullName ? `${fullName}'s avatar` : 'Contact avatar'}\n                  name={fullName || contact.username}\n                  size='lg'\n                />\n              )}\n              <div className='min-w-0 flex-1'>\n                <div className='text-sm font-medium truncate'>{fullName}</div>\n                <div className='text-xs text-sidebar-muted truncate'>\n                  {formatUsername(contact.username) || 'No username'}\n                </div>\n              </div>\n            </div>\n\n            {/* Name and username fields */}\n            <div className='space-y-3'>\n              <div className='grid grid-cols-[96px,minmax(0,1fr)] items-start gap-2'>\n                <Label className='text-xs text-sidebar-muted pt-2'>Name</Label>\n                {isEditable ? (\n                  <div className='grid grid-cols-2 gap-2 min-w-0'>\n                    <div className='min-w-0'>\n                      <Label className='sr-only'>First name</Label>\n                      <Input\n                        value={contact.firstName ?? ''}\n                        onChange={(\n                          event: React.ChangeEvent<HTMLInputElement>\n                        ) => handleNameChange('firstName', event.target.value)}\n                        placeholder='First'\n                      />\n                    </div>\n                    <div className='min-w-0'>\n                      <Label className='sr-only'>Last name</Label>\n                      <Input\n                        value={contact.lastName ?? ''}\n                        onChange={(\n                          event: React.ChangeEvent<HTMLInputElement>\n                        ) => handleNameChange('lastName', event.target.value)}\n                        placeholder='Last'\n                      />\n                    </div>\n                  </div>\n                ) : (\n                  <div className='min-h-9 flex items-center text-sm'>\n                    {contact.firstName || contact.lastName ? (\n                      <span>\n                        {[contact.firstName, contact.lastName]\n                          .filter(Boolean)\n                          .join(' ')}\n                      </span>\n                    ) : (\n                      <span className='text-sidebar-muted italic'>\n                        Not provided\n                      </span>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              <div className='grid grid-cols-[96px,minmax(0,1fr)] items-center gap-2'>\n                <Label className='text-xs text-sidebar-muted'>Username</Label>\n                {isEditable ? (\n                  <Input\n                    value={formatUsername(contact.username)}\n                    onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                      handleUsernameChange(event.target.value)\n                    }\n                    placeholder='@username'\n                  />\n                ) : (\n                  <div className='min-h-9 flex items-center text-sm'>\n                    {contact.username ? (\n                      <span>{formatUsername(contact.username)}</span>\n                    ) : (\n                      <span className='text-sidebar-muted italic'>\n                        Not provided\n                      </span>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Social links */}\n            <div className='space-y-2 bg-sidebar-surface border border-sidebar-border p-3'>\n              <div className='flex items-center justify-between'>\n                <Label className='text-xs text-sidebar-muted'>\n                  Social links\n                </Label>\n                {isEditable && (\n                  <Button\n                    type='button'\n                    size='icon'\n                    variant='ghost'\n                    aria-label='Add social link'\n                    onClick={() => {\n                      setIsAddingLink(true);\n                      setTimeout(() => {\n                        // focus handled by browser via autoFocus below\n                      }, 0);\n                    }}\n                  >\n                    <Plus className='h-4 w-4' />\n                  </Button>\n                )}\n              </div>\n\n              {contact.socialLinks.length === 0 && !isAddingLink ? (\n                <p className='text-xs text-sidebar-muted'>\n                  No social links yet.{' '}\n                  {isEditable ? 'Use the + button to add one.' : ''}\n                </p>\n              ) : null}\n\n              {contact.socialLinks.length > 0 && (\n                <div className='flex flex-wrap gap-2'>\n                  {contact.socialLinks.map((link, index) => {\n                    const username =\n                      extractUsernameFromUrl(link.url) ??\n                      extractUsernameFromLabel(link.label) ??\n                      '';\n                    const displayUsername = formatUsername(username);\n                    const platformId =\n                      (link.platformType as string | undefined) ||\n                      validateLink(link.url)?.platform.icon ||\n                      'link';\n\n                    const ariaLabel = displayUsername\n                      ? `Open ${platformId} profile ${displayUsername}`\n                      : `Open ${platformId} link`;\n\n                    return (\n                      <PlatformPill\n                        key={link.id ?? `${link.url}-${index}`}\n                        platformIcon={platformId}\n                        platformName={platformId}\n                        primaryText={displayUsername || platformId}\n                        tone='faded'\n                        testId={`contact-social-pill-${platformId}-${index}`}\n                        onClick={() => {\n                          window.open(\n                            link.url,\n                            '_blank',\n                            'noopener,noreferrer'\n                          );\n                        }}\n                        trailing={\n                          <div className='flex items-center gap-1'>\n                            <ExternalLink\n                              className='h-3.5 w-3.5 text-tertiary-token'\n                              aria-hidden\n                            />\n                            {isEditable ? (\n                              <button\n                                type='button'\n                                className='inline-flex h-4 w-4 items-center justify-center rounded-full text-tertiary-token hover:text-destructive focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sidebar-ring'\n                                aria-label={`Remove ${ariaLabel}`}\n                                onClick={event => {\n                                  event.preventDefault();\n                                  event.stopPropagation();\n                                  handleRemoveLink(index);\n                                }}\n                              >\n                                <X className='h-3 w-3' aria-hidden />\n                              </button>\n                            ) : null}\n                          </div>\n                        }\n                        className='border-sidebar-border bg-sidebar-surface text-sidebar-foreground hover:bg-sidebar-surface-hover'\n                      />\n                    );\n                  })}\n                </div>\n              )}\n\n              {isEditable && isAddingLink && (\n                <div className='mt-2 space-y-2 rounded-lg border border-dashed border-sidebar-border bg-sidebar-surface p-3'>\n                  <div className='grid grid-cols-[96px,minmax(0,1fr)] items-center gap-2'>\n                    <Label className='text-xs text-sidebar-muted'>URL</Label>\n                    <Input\n                      type='url'\n                      value={newLinkUrl}\n                      onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                        setNewLinkUrl(event.target.value)\n                      }\n                      onKeyDown={handleNewLinkKeyDown}\n                      placeholder='https://instagram.com/username'\n                      inputMode='url'\n                      autoCapitalize='none'\n                      autoCorrect='off'\n                      autoFocus\n                    />\n                  </div>\n                  <div className='flex justify-end gap-2 pt-1'>\n                    <Button\n                      type='button'\n                      size='sm'\n                      variant='ghost'\n                      onClick={() => {\n                        setIsAddingLink(false);\n                        setNewLinkUrl('');\n                      }}\n                    >\n                      Cancel\n                    </Button>\n                    <Button\n                      type='button'\n                      size='sm'\n                      variant='primary'\n                      onClick={handleAddLink}\n                      disabled={!isValidUrl(newLinkUrl)}\n                    >\n                      Add\n                    </Button>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {isEditable && onSave && contact && (\n              <div className='pt-2 flex justify-end'>\n                <Button\n                  type='button'\n                  size='sm'\n                  variant='primary'\n                  onClick={() => onSave(contact)}\n                  disabled={isSaving}\n                >\n                  {isSaving ? 'Saving…' : 'Save changes'}\n                </Button>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </aside>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noRedundantRoles",
      "severity": "warning",
      "description": "Using the role attribute 'complementary' on the 'aside' element is redundant, because it is implied by its semantic.",
      "message": [
        {
          "elements": [],
          "content": "Using the role attribute 'complementary' on the 'aside' element is redundant, because it is implied by its semantic."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Unsafe fix: Remove the " },
                { "elements": ["Emphasis"], "content": "role" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "'use client';\n\nimport { Button, Input, Label } from '@jovie/ui';          'pointer-events-auto w-full opacity-100 translate-x-0 md:w-[300px] lg:w-[320px]'\n      )}\n      onKeyDown={handleKeyDown}\n      role='complementary'\n    >\n      <div className='flex items-center justify-between border-b border-sidebar-border px-3 py-2'>  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 64] } } },
                { "equalLines": { "line_count": 262 } },
                { "diffOp": { "equal": { "range": [64, 195] } } },
                { "diffOp": { "delete": { "range": [195, 222] } } },
                { "diffOp": { "equal": { "range": [222, 327] } } },
                { "equalLines": { "line_count": 318 } },
                { "diffOp": { "equal": { "range": [327, 334] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/ContactSidebar.tsx" },
        "span": [7982, 7997],
        "sourceCode": "'use client';\n\nimport { Button, Input, Label } from '@jovie/ui';\nimport { Copy, ExternalLink, Plus, RefreshCw, X } from 'lucide-react';\nimport Link from 'next/link';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { Avatar } from '@/components/atoms/Avatar';\nimport { HeaderIconButton } from '@/components/atoms/HeaderIconButton';\nimport { PlatformPill } from '@/components/dashboard/atoms/PlatformPill';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\nimport { track } from '@/lib/analytics';\nimport { cn } from '@/lib/utils';\nimport { validateLink } from '@/lib/utils/platform-detection';\nimport type { Contact, ContactSidebarMode, ContactSocialLink } from '@/types';\n\nexport interface ContactSidebarProps {\n  contact: Contact | null;\n  mode: ContactSidebarMode;\n  isOpen: boolean;\n  onClose?: () => void;\n  onRefresh?: () => void;\n  onContactChange?: (contact: Contact) => void;\n  onSave?: (contact: Contact) => void | Promise<void>;\n  isSaving?: boolean;\n  /**\n   * Optional avatar upload handler. When provided and mode === 'admin',\n   * the avatar becomes uploadable and this callback is used to obtain\n   * the new avatar URL. The updated URL will be merged into the contact\n   * and emitted via onContactChange.\n   */\n  onAvatarUpload?: (file: File, contact: Contact) => Promise<string>;\n}\n\nfunction isFormElement(target: EventTarget | null): boolean {\n  if (!(target instanceof HTMLElement)) return false;\n  const tag = target.tagName;\n  return (\n    tag === 'INPUT' ||\n    tag === 'TEXTAREA' ||\n    tag === 'SELECT' ||\n    tag === 'BUTTON'\n  );\n}\n\nfunction formatUsername(username: string | undefined): string {\n  if (!username) return '';\n  return username.startsWith('@') ? username : `@${username}`;\n}\n\nfunction sanitizeUsernameInput(raw: string): string {\n  const trimmed = raw.trim();\n  const withoutAt = trimmed.startsWith('@') ? trimmed.slice(1) : trimmed;\n  return withoutAt;\n}\n\nfunction extractUsernameFromUrl(value: string): string | null {\n  if (!value) return null;\n\n  try {\n    const url = new URL(value);\n    const host = url.hostname.replace(/^www\\./, '').toLowerCase();\n    const segments = url.pathname.split('/').filter(Boolean);\n\n    if (segments.length === 0) return null;\n\n    const first = segments[0] ?? '';\n    const second = segments[1] ?? '';\n\n    // Define allowed hostnames for each platform (no partials)\n    const tiktokHosts = ['tiktok.com'];\n    const snapchatHosts = ['snapchat.com'];\n    const youtubeHosts = ['youtube.com'];\n\n    if (tiktokHosts.includes(host)) {\n      const candidate = first.startsWith('@') ? first.slice(1) : first;\n      return candidate || null;\n    }\n\n    if (snapchatHosts.includes(host)) {\n      const candidate = first === 'add' || first === 'u' ? second : first;\n      const cleaned = candidate.startsWith('@')\n        ? candidate.slice(1)\n        : candidate;\n      return cleaned || null;\n    }\n\n    if (youtubeHosts.includes(host)) {\n      if (first.startsWith('@')) return first.slice(1) || null;\n      return null;\n    }\n\n    const candidate = first.startsWith('@') ? first.slice(1) : first;\n    return candidate || null;\n  } catch {\n    return null;\n  }\n}\n\nfunction extractUsernameFromLabel(value: string | undefined): string | null {\n  if (!value) return null;\n  const trimmed = value.trim();\n  if (!trimmed) return null;\n\n  const lastSegment = trimmed\n    .replace(/^https?:\\/\\//, '')\n    .split('/')\n    .filter(Boolean)\n    .pop();\n\n  if (!lastSegment) return null;\n\n  const candidate = lastSegment.startsWith('@')\n    ? lastSegment.slice(1)\n    : lastSegment;\n  if (!candidate) return null;\n\n  if (!/^[a-zA-Z0-9._-]{2,}$/.test(candidate)) return null;\n  return candidate;\n}\n\nfunction isValidUrl(value: string): boolean {\n  if (!value) return false;\n  try {\n    const url = new URL(value);\n    const protocol = url.protocol.toLowerCase();\n    return protocol === 'http:' || protocol === 'https:';\n  } catch {\n    return false;\n  }\n}\n\nexport function ContactSidebar({\n  contact,\n  mode,\n  isOpen,\n  onClose,\n  onRefresh,\n  onContactChange,\n  onSave,\n  isSaving,\n  onAvatarUpload,\n}: ContactSidebarProps) {\n  const [isAddingLink, setIsAddingLink] = useState(false);\n  const [newLinkUrl, setNewLinkUrl] = useState('');\n\n  const isEditable = mode === 'admin';\n  const hasContact = Boolean(contact);\n\n  const fullName = useMemo(() => {\n    if (!contact) return '';\n    const parts = [contact.firstName, contact.lastName]\n      .filter(Boolean)\n      .join(' ');\n    return parts || contact.displayName || contact.username;\n  }, [contact]);\n\n  const handleFieldChange = useCallback(\n    (updater: (current: Contact) => Contact) => {\n      if (!contact || !onContactChange) return;\n      onContactChange(updater(contact));\n    },\n    [contact, onContactChange]\n  );\n\n  const handleAvatarUpload = useCallback(\n    async (file: File) => {\n      if (!contact || !onAvatarUpload || !onContactChange) {\n        return contact?.avatarUrl ?? '';\n      }\n      track('contact_avatar_upload_start', { contactId: contact.id });\n      const newUrl = await onAvatarUpload(file, contact);\n      onContactChange({ ...contact, avatarUrl: newUrl });\n      track('contact_avatar_upload_success', { contactId: contact.id });\n      return newUrl;\n    },\n    [contact, onAvatarUpload, onContactChange]\n  );\n\n  const handleCopyProfileUrl = useCallback(async () => {\n    if (!contact?.username) return;\n    try {\n      const url = new URL(\n        `/${contact.username}`,\n        window.location.origin\n      ).toString();\n      await navigator.clipboard.writeText(url);\n    } catch (error) {\n      console.error('Failed to copy profile URL', error);\n    }\n  }, [contact]);\n\n  const handleNameChange = (field: 'firstName' | 'lastName', value: string) => {\n    handleFieldChange(current => ({ ...current, [field]: value }));\n  };\n\n  const handleUsernameChange = (raw: string) => {\n    const username = sanitizeUsernameInput(raw);\n    handleFieldChange(current => ({ ...current, username }));\n  };\n\n  const handleAddLink = () => {\n    if (!contact || !onContactChange) return;\n    const trimmedUrl = newLinkUrl.trim();\n    if (!isValidUrl(trimmedUrl)) return;\n\n    const detected = validateLink(trimmedUrl);\n    if (!detected || !detected.isValid) return;\n\n    const nextLink: ContactSocialLink = {\n      id: undefined,\n      label: detected.suggestedTitle,\n      url: detected.normalizedUrl,\n      platformType: detected.platform.icon,\n    };\n\n    onContactChange({\n      ...contact,\n      socialLinks: [...contact.socialLinks, nextLink],\n    });\n\n    setIsAddingLink(false);\n    setNewLinkUrl('');\n  };\n\n  const handleRemoveLink = (index: number) => {\n    handleFieldChange(current => ({\n      ...current,\n      socialLinks: current.socialLinks.filter((_link, i) => i !== index),\n    }));\n  };\n\n  const handleNewLinkKeyDown = (\n    event: React.KeyboardEvent<HTMLInputElement>\n  ) => {\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      if (isValidUrl(newLinkUrl)) {\n        handleAddLink();\n      }\n    } else if (event.key === 'Escape') {\n      event.preventDefault();\n      setIsAddingLink(false);\n      setNewLinkUrl('');\n    }\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    if (event.key === 'Escape' && !isFormElement(event.target)) {\n      onClose?.();\n    }\n  };\n\n  const canUploadAvatar =\n    isEditable && Boolean(onAvatarUpload && contact && onContactChange);\n\n  return (\n    <aside\n      aria-label='Contact details'\n      aria-hidden={!isOpen}\n      data-testid='contact-sidebar'\n      className={cn(\n        'relative flex h-full min-h-screen flex-col bg-surface-0 text-sidebar-foreground border-l border-subtle transition-[width,opacity,transform] duration-200 ease-out overflow-hidden',\n        'w-0 opacity-0 translate-x-4 pointer-events-none',\n        isOpen &&\n          'pointer-events-auto w-full opacity-100 translate-x-0 md:w-[300px] lg:w-[320px]'\n      )}\n      onKeyDown={handleKeyDown}\n      role='complementary'\n    >\n      <div className='flex items-center justify-between border-b border-sidebar-border px-3 py-2'>\n        <p className='text-xs text-sidebar-muted'>\n          {hasContact ? `ID: ${contact?.id}` : 'No contact selected'}\n        </p>\n        <div className='flex items-center gap-1'>\n          {hasContact && contact?.username && (\n            <HeaderIconButton\n              size='xs'\n              ariaLabel='Copy profile link'\n              onClick={handleCopyProfileUrl}\n              className='text-secondary-token hover:text-primary-token transition-transform duration-150 ease-out hover:scale-105 active:scale-95 focus-visible:ring-2 focus-visible:ring-sidebar-ring'\n            >\n              <Copy className='h-4 w-4' aria-hidden />\n            </HeaderIconButton>\n          )}\n          {hasContact && contact?.username && (\n            <HeaderIconButton\n              size='xs'\n              ariaLabel='Refresh profile'\n              onClick={() => {\n                if (onRefresh) {\n                  onRefresh();\n                  return;\n                }\n                window.location.reload();\n              }}\n              className='text-secondary-token hover:text-primary-token transition-transform duration-150 ease-out hover:scale-105 active:scale-95 focus-visible:ring-2 focus-visible:ring-sidebar-ring'\n            >\n              <RefreshCw className='h-4 w-4' aria-hidden />\n            </HeaderIconButton>\n          )}\n          {hasContact && contact?.username && (\n            <HeaderIconButton\n              size='xs'\n              ariaLabel='Open profile'\n              asChild\n              className='text-secondary-token hover:text-primary-token transition-transform duration-150 ease-out hover:scale-105 active:scale-95 focus-visible:ring-2 focus-visible:ring-sidebar-ring'\n            >\n              <Link\n                href={`/${contact.username}`}\n                target='_blank'\n                rel='noopener noreferrer'\n              >\n                <ExternalLink className='h-4 w-4' aria-hidden />\n              </Link>\n            </HeaderIconButton>\n          )}\n          {onClose && (\n            <HeaderIconButton\n              size='xs'\n              ariaLabel='Close contact sidebar'\n              onClick={onClose}\n              className='text-secondary-token hover:text-primary-token transition-transform duration-150 ease-out hover:scale-105 active:scale-95 focus-visible:ring-2 focus-visible:ring-sidebar-ring'\n            >\n              <X className='h-4 w-4' aria-hidden='true' />\n            </HeaderIconButton>\n          )}\n        </div>\n      </div>\n\n      <div className='flex-1 space-y-6 overflow-auto px-4 py-4'>\n        {!contact ? (\n          <p className='text-xs text-sidebar-muted'>\n            Select a row in the table and press Space to view contact details.\n          </p>\n        ) : (\n          <>\n            {/* Avatar section */}\n            <div\n              className='flex items-center gap-3'\n              data-testid='contact-avatar'\n            >\n              {canUploadAvatar ? (\n                <AvatarUploadable\n                  src={contact.avatarUrl ?? null}\n                  alt={fullName ? `${fullName}'s avatar` : 'Contact avatar'}\n                  name={fullName || contact.username}\n                  size='lg'\n                  uploadable={canUploadAvatar}\n                  onUpload={canUploadAvatar ? handleAvatarUpload : undefined}\n                  showHoverOverlay\n                />\n              ) : (\n                <Avatar\n                  src={contact.avatarUrl ?? null}\n                  alt={fullName ? `${fullName}'s avatar` : 'Contact avatar'}\n                  name={fullName || contact.username}\n                  size='lg'\n                />\n              )}\n              <div className='min-w-0 flex-1'>\n                <div className='text-sm font-medium truncate'>{fullName}</div>\n                <div className='text-xs text-sidebar-muted truncate'>\n                  {formatUsername(contact.username) || 'No username'}\n                </div>\n              </div>\n            </div>\n\n            {/* Name and username fields */}\n            <div className='space-y-3'>\n              <div className='grid grid-cols-[96px,minmax(0,1fr)] items-start gap-2'>\n                <Label className='text-xs text-sidebar-muted pt-2'>Name</Label>\n                {isEditable ? (\n                  <div className='grid grid-cols-2 gap-2 min-w-0'>\n                    <div className='min-w-0'>\n                      <Label className='sr-only'>First name</Label>\n                      <Input\n                        value={contact.firstName ?? ''}\n                        onChange={(\n                          event: React.ChangeEvent<HTMLInputElement>\n                        ) => handleNameChange('firstName', event.target.value)}\n                        placeholder='First'\n                      />\n                    </div>\n                    <div className='min-w-0'>\n                      <Label className='sr-only'>Last name</Label>\n                      <Input\n                        value={contact.lastName ?? ''}\n                        onChange={(\n                          event: React.ChangeEvent<HTMLInputElement>\n                        ) => handleNameChange('lastName', event.target.value)}\n                        placeholder='Last'\n                      />\n                    </div>\n                  </div>\n                ) : (\n                  <div className='min-h-9 flex items-center text-sm'>\n                    {contact.firstName || contact.lastName ? (\n                      <span>\n                        {[contact.firstName, contact.lastName]\n                          .filter(Boolean)\n                          .join(' ')}\n                      </span>\n                    ) : (\n                      <span className='text-sidebar-muted italic'>\n                        Not provided\n                      </span>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              <div className='grid grid-cols-[96px,minmax(0,1fr)] items-center gap-2'>\n                <Label className='text-xs text-sidebar-muted'>Username</Label>\n                {isEditable ? (\n                  <Input\n                    value={formatUsername(contact.username)}\n                    onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                      handleUsernameChange(event.target.value)\n                    }\n                    placeholder='@username'\n                  />\n                ) : (\n                  <div className='min-h-9 flex items-center text-sm'>\n                    {contact.username ? (\n                      <span>{formatUsername(contact.username)}</span>\n                    ) : (\n                      <span className='text-sidebar-muted italic'>\n                        Not provided\n                      </span>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Social links */}\n            <div className='space-y-2 bg-sidebar-surface border border-sidebar-border p-3'>\n              <div className='flex items-center justify-between'>\n                <Label className='text-xs text-sidebar-muted'>\n                  Social links\n                </Label>\n                {isEditable && (\n                  <Button\n                    type='button'\n                    size='icon'\n                    variant='ghost'\n                    aria-label='Add social link'\n                    onClick={() => {\n                      setIsAddingLink(true);\n                      setTimeout(() => {\n                        // focus handled by browser via autoFocus below\n                      }, 0);\n                    }}\n                  >\n                    <Plus className='h-4 w-4' />\n                  </Button>\n                )}\n              </div>\n\n              {contact.socialLinks.length === 0 && !isAddingLink ? (\n                <p className='text-xs text-sidebar-muted'>\n                  No social links yet.{' '}\n                  {isEditable ? 'Use the + button to add one.' : ''}\n                </p>\n              ) : null}\n\n              {contact.socialLinks.length > 0 && (\n                <div className='flex flex-wrap gap-2'>\n                  {contact.socialLinks.map((link, index) => {\n                    const username =\n                      extractUsernameFromUrl(link.url) ??\n                      extractUsernameFromLabel(link.label) ??\n                      '';\n                    const displayUsername = formatUsername(username);\n                    const platformId =\n                      (link.platformType as string | undefined) ||\n                      validateLink(link.url)?.platform.icon ||\n                      'link';\n\n                    const ariaLabel = displayUsername\n                      ? `Open ${platformId} profile ${displayUsername}`\n                      : `Open ${platformId} link`;\n\n                    return (\n                      <PlatformPill\n                        key={link.id ?? `${link.url}-${index}`}\n                        platformIcon={platformId}\n                        platformName={platformId}\n                        primaryText={displayUsername || platformId}\n                        tone='faded'\n                        testId={`contact-social-pill-${platformId}-${index}`}\n                        onClick={() => {\n                          window.open(\n                            link.url,\n                            '_blank',\n                            'noopener,noreferrer'\n                          );\n                        }}\n                        trailing={\n                          <div className='flex items-center gap-1'>\n                            <ExternalLink\n                              className='h-3.5 w-3.5 text-tertiary-token'\n                              aria-hidden\n                            />\n                            {isEditable ? (\n                              <button\n                                type='button'\n                                className='inline-flex h-4 w-4 items-center justify-center rounded-full text-tertiary-token hover:text-destructive focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sidebar-ring'\n                                aria-label={`Remove ${ariaLabel}`}\n                                onClick={event => {\n                                  event.preventDefault();\n                                  event.stopPropagation();\n                                  handleRemoveLink(index);\n                                }}\n                              >\n                                <X className='h-3 w-3' aria-hidden />\n                              </button>\n                            ) : null}\n                          </div>\n                        }\n                        className='border-sidebar-border bg-sidebar-surface text-sidebar-foreground hover:bg-sidebar-surface-hover'\n                      />\n                    );\n                  })}\n                </div>\n              )}\n\n              {isEditable && isAddingLink && (\n                <div className='mt-2 space-y-2 rounded-lg border border-dashed border-sidebar-border bg-sidebar-surface p-3'>\n                  <div className='grid grid-cols-[96px,minmax(0,1fr)] items-center gap-2'>\n                    <Label className='text-xs text-sidebar-muted'>URL</Label>\n                    <Input\n                      type='url'\n                      value={newLinkUrl}\n                      onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                        setNewLinkUrl(event.target.value)\n                      }\n                      onKeyDown={handleNewLinkKeyDown}\n                      placeholder='https://instagram.com/username'\n                      inputMode='url'\n                      autoCapitalize='none'\n                      autoCorrect='off'\n                      autoFocus\n                    />\n                  </div>\n                  <div className='flex justify-end gap-2 pt-1'>\n                    <Button\n                      type='button'\n                      size='sm'\n                      variant='ghost'\n                      onClick={() => {\n                        setIsAddingLink(false);\n                        setNewLinkUrl('');\n                      }}\n                    >\n                      Cancel\n                    </Button>\n                    <Button\n                      type='button'\n                      size='sm'\n                      variant='primary'\n                      onClick={handleAddLink}\n                      disabled={!isValidUrl(newLinkUrl)}\n                    >\n                      Add\n                    </Button>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {isEditable && onSave && contact && (\n              <div className='pt-2 flex justify-end'>\n                <Button\n                  type='button'\n                  size='sm'\n                  variant='primary'\n                  onClick={() => onSave(contact)}\n                  disabled={isSaving}\n                >\n                  {isSaving ? 'Saving…' : 'Save changes'}\n                </Button>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </aside>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Dialog.stories.tsx" },
        "span": [2172, 2231],
        "sourceCode": "import { Button } from '@jovie/ui';\nimport type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { useState } from 'react';\nimport {\n  Dialog,\n  DialogActions,\n  DialogBody,\n  DialogDescription,\n  DialogTitle,\n} from './Dialog';\n\nconst meta: Meta<typeof Dialog> = {\n  title: 'Organisms/Dialog',\n  component: Dialog,\n  parameters: {\n    layout: 'centered',\n  },\n  argTypes: {\n    size: {\n      control: 'select',\n      options: ['xs', 'sm', 'md', 'lg', 'xl', '2xl', '3xl', '4xl', '5xl'],\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof Dialog>;\n\nexport const Default: Story = {\n  args: {\n    open: true,\n    onClose: () => console.log('Close'),\n    size: 'lg',\n    children: (\n      <>\n        <DialogTitle>Dialog Title</DialogTitle>\n        <DialogDescription>\n          This is a description of the dialog content.\n        </DialogDescription>\n        <DialogBody>\n          <p className='text-secondary'>\n            This is the main body content of the dialog. You can put any content\n            here.\n          </p>\n        </DialogBody>\n        <DialogActions>\n          <Button variant='outline'>Cancel</Button>\n          <Button variant='primary'>Confirm</Button>\n        </DialogActions>\n      </>\n    ),\n  },\n};\n\nexport const Small: Story = {\n  args: {\n    open: true,\n    onClose: () => console.log('Close'),\n    size: 'sm',\n    children: (\n      <>\n        <DialogTitle>Confirm Action</DialogTitle>\n        <DialogDescription>Are you sure you want to proceed?</DialogDescription>\n        <DialogActions>\n          <Button variant='outline' size='sm'>\n            Cancel\n          </Button>\n          <Button variant='primary' size='sm'>\n            Confirm\n          </Button>\n        </DialogActions>\n      </>\n    ),\n  },\n};\n\nexport const Large: Story = {\n  args: {\n    open: true,\n    onClose: () => console.log('Close'),\n    size: '2xl',\n    children: (\n      <>\n        <DialogTitle>Edit Profile</DialogTitle>\n        <DialogDescription>\n          Update your profile information below.\n        </DialogDescription>\n        <DialogBody>\n          <div className='space-y-4'>\n            <div className='space-y-2'>\n              <label className='text-sm font-medium'>Display Name</label>\n              <input\n                type='text'\n                className='w-full px-3 py-2 border border-subtle rounded-lg'\n                placeholder='Your name'\n              />\n            </div>\n            <div className='space-y-2'>\n              <label className='text-sm font-medium'>Bio</label>\n              <textarea\n                className='w-full px-3 py-2 border border-subtle rounded-lg'\n                rows={3}\n                placeholder='Tell us about yourself'\n              />\n            </div>\n          </div>\n        </DialogBody>\n        <DialogActions>\n          <Button variant='outline'>Cancel</Button>\n          <Button variant='primary'>Save Changes</Button>\n        </DialogActions>\n      </>\n    ),\n  },\n};\n\nexport const Interactive: Story = {\n  render: function InteractiveDialog() {\n    const [open, setOpen] = useState(false);\n\n    return (\n      <div>\n        <Button onClick={() => setOpen(true)}>Open Dialog</Button>\n        <Dialog open={open} onClose={() => setOpen(false)} size='md'>\n          <DialogTitle>Interactive Dialog</DialogTitle>\n          <DialogDescription>\n            This dialog can be opened and closed interactively.\n          </DialogDescription>\n          <DialogBody>\n            <p className='text-secondary'>\n              Click the buttons below to interact with this dialog.\n            </p>\n          </DialogBody>\n          <DialogActions>\n            <Button variant='outline' onClick={() => setOpen(false)}>\n              Cancel\n            </Button>\n            <Button variant='primary' onClick={() => setOpen(false)}>\n              Confirm\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  },\n};\n\nexport const DeleteConfirmation: Story = {\n  args: {\n    open: true,\n    onClose: () => console.log('Close'),\n    size: 'sm',\n    children: (\n      <>\n        <DialogTitle>Delete Link</DialogTitle>\n        <DialogDescription>\n          Are you sure you want to delete this link? This action cannot be\n          undone.\n        </DialogDescription>\n        <DialogActions>\n          <Button variant='outline'>Cancel</Button>\n          <Button variant='destructive'>Delete</Button>\n        </DialogActions>\n      </>\n    ),\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Dialog.stories.tsx" },
        "span": [2488, 2538],
        "sourceCode": "import { Button } from '@jovie/ui';\nimport type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { useState } from 'react';\nimport {\n  Dialog,\n  DialogActions,\n  DialogBody,\n  DialogDescription,\n  DialogTitle,\n} from './Dialog';\n\nconst meta: Meta<typeof Dialog> = {\n  title: 'Organisms/Dialog',\n  component: Dialog,\n  parameters: {\n    layout: 'centered',\n  },\n  argTypes: {\n    size: {\n      control: 'select',\n      options: ['xs', 'sm', 'md', 'lg', 'xl', '2xl', '3xl', '4xl', '5xl'],\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof Dialog>;\n\nexport const Default: Story = {\n  args: {\n    open: true,\n    onClose: () => console.log('Close'),\n    size: 'lg',\n    children: (\n      <>\n        <DialogTitle>Dialog Title</DialogTitle>\n        <DialogDescription>\n          This is a description of the dialog content.\n        </DialogDescription>\n        <DialogBody>\n          <p className='text-secondary'>\n            This is the main body content of the dialog. You can put any content\n            here.\n          </p>\n        </DialogBody>\n        <DialogActions>\n          <Button variant='outline'>Cancel</Button>\n          <Button variant='primary'>Confirm</Button>\n        </DialogActions>\n      </>\n    ),\n  },\n};\n\nexport const Small: Story = {\n  args: {\n    open: true,\n    onClose: () => console.log('Close'),\n    size: 'sm',\n    children: (\n      <>\n        <DialogTitle>Confirm Action</DialogTitle>\n        <DialogDescription>Are you sure you want to proceed?</DialogDescription>\n        <DialogActions>\n          <Button variant='outline' size='sm'>\n            Cancel\n          </Button>\n          <Button variant='primary' size='sm'>\n            Confirm\n          </Button>\n        </DialogActions>\n      </>\n    ),\n  },\n};\n\nexport const Large: Story = {\n  args: {\n    open: true,\n    onClose: () => console.log('Close'),\n    size: '2xl',\n    children: (\n      <>\n        <DialogTitle>Edit Profile</DialogTitle>\n        <DialogDescription>\n          Update your profile information below.\n        </DialogDescription>\n        <DialogBody>\n          <div className='space-y-4'>\n            <div className='space-y-2'>\n              <label className='text-sm font-medium'>Display Name</label>\n              <input\n                type='text'\n                className='w-full px-3 py-2 border border-subtle rounded-lg'\n                placeholder='Your name'\n              />\n            </div>\n            <div className='space-y-2'>\n              <label className='text-sm font-medium'>Bio</label>\n              <textarea\n                className='w-full px-3 py-2 border border-subtle rounded-lg'\n                rows={3}\n                placeholder='Tell us about yourself'\n              />\n            </div>\n          </div>\n        </DialogBody>\n        <DialogActions>\n          <Button variant='outline'>Cancel</Button>\n          <Button variant='primary'>Save Changes</Button>\n        </DialogActions>\n      </>\n    ),\n  },\n};\n\nexport const Interactive: Story = {\n  render: function InteractiveDialog() {\n    const [open, setOpen] = useState(false);\n\n    return (\n      <div>\n        <Button onClick={() => setOpen(true)}>Open Dialog</Button>\n        <Dialog open={open} onClose={() => setOpen(false)} size='md'>\n          <DialogTitle>Interactive Dialog</DialogTitle>\n          <DialogDescription>\n            This dialog can be opened and closed interactively.\n          </DialogDescription>\n          <DialogBody>\n            <p className='text-secondary'>\n              Click the buttons below to interact with this dialog.\n            </p>\n          </DialogBody>\n          <DialogActions>\n            <Button variant='outline' onClick={() => setOpen(false)}>\n              Cancel\n            </Button>\n            <Button variant='primary' onClick={() => setOpen(false)}>\n              Confirm\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  },\n};\n\nexport const DeleteConfirmation: Story = {\n  args: {\n    open: true,\n    onClose: () => console.log('Close'),\n    size: 'sm',\n    children: (\n      <>\n        <DialogTitle>Delete Link</DialogTitle>\n        <DialogDescription>\n          Are you sure you want to delete this link? This action cannot be\n          undone.\n        </DialogDescription>\n        <DialogActions>\n          <Button variant='outline'>Cancel</Button>\n          <Button variant='destructive'>Delete</Button>\n        </DialogActions>\n      </>\n    ),\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noRedundantRoles",
      "severity": "warning",
      "description": "Using the role attribute 'list' on the 'ul' element is redundant, because it is implied by its semantic.",
      "message": [
        {
          "elements": [],
          "content": "Using the role attribute 'list' on the 'ul' element is redundant, because it is implied by its semantic."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Unsafe fix: Remove the " },
                { "elements": ["Emphasis"], "content": "role" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "import Link from 'next/link';\nimport { Copyright } from '@/components/atoms/Copyright';\nimport { CookieSettingsFooterButton } from '@/components/molecules/CookieSettingsFooterButton';                  Product\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {productLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 183] } } },
                { "equalLines": { "line_count": 212 } },
                { "diffOp": { "equal": { "range": [183, 273] } } },
                { "diffOp": { "delete": { "range": [273, 284] } } },
                { "diffOp": { "equal": { "range": [284, 391] } } },
                { "equalLines": { "line_count": 153 } },
                { "diffOp": { "equal": { "range": [391, 398] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Footer.tsx" },
        "span": [7581, 7587],
        "sourceCode": "import Link from 'next/link';\nimport { Copyright } from '@/components/atoms/Copyright';\nimport { CookieSettingsFooterButton } from '@/components/molecules/CookieSettingsFooterButton';\nimport { FooterBranding } from '@/components/molecules/FooterBranding';\nimport { FooterNavigation } from '@/components/molecules/FooterNavigation';\nimport { ThemeToggle } from '@/components/site/ThemeToggle';\nimport { FEATURES } from '@/lib/features';\nimport { cn } from '@/lib/utils';\n\nexport interface FooterProps {\n  variant?: 'marketing' | 'profile' | 'minimal' | 'regular';\n  artistHandle?: string;\n  hideBranding?: boolean;\n  artistSettings?: {\n    hide_branding?: boolean;\n  };\n  showThemeToggle?: boolean;\n  className?: string;\n  themeShortcutKey?: string;\n  brandingMark?: 'wordmark' | 'icon';\n  containerSize?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  links?: Array<{\n    href: string;\n    label: string;\n  }>;\n}\n\nexport function Footer({\n  variant = 'marketing',\n  artistHandle,\n  hideBranding = false,\n  artistSettings,\n  showThemeToggle = false,\n  themeShortcutKey,\n  className = '',\n  brandingMark = 'wordmark',\n  containerSize = 'lg',\n  links,\n}: FooterProps) {\n  // Use user's setting if available, otherwise fall back to hideBranding prop\n  const shouldHideBranding = artistSettings?.hide_branding ?? hideBranding;\n\n  const containerSizes = {\n    sm: 'max-w-3xl',\n    md: 'max-w-5xl',\n    lg: 'max-w-6xl',\n    xl: 'max-w-7xl',\n    full: 'max-w-none',\n  } as const;\n\n  const maxWidthClass = containerSizes[containerSize];\n\n  // Profile footer logic - hide if branding should be hidden\n  if (variant === 'profile' && shouldHideBranding) {\n    return null;\n  }\n\n  // Variant-specific configurations\n  const variantConfigs = {\n    marketing: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row items-center justify-between gap-4',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    profile: {\n      containerClass: 'relative mt-6 pt-4',\n      contentClass: '',\n      colorVariant: 'light' as const,\n      showBranding: true,\n      layout: 'vertical' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    minimal: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between gap-3 py-5 md:h-16 md:py-0',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'segmented' as const,\n    },\n    regular: {\n      // Clerk-like footer: subtle border top, compact spacing, segmented theme selector\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-6 flex items-center justify-between',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: false,\n      themeAppearance: 'segmented' as const,\n    },\n  };\n\n  const config = variantConfigs[variant];\n\n  // Profile footer has special positioning for privacy link\n  if (variant === 'profile') {\n    return (\n      <footer className={`${config.containerClass} ${className}`}>\n        <div className='flex flex-col items-center justify-center space-y-1.5 pb-2'>\n          <FooterBranding\n            artistHandle={artistHandle}\n            variant={config.colorVariant}\n            size='sm'\n            showCTA={false}\n            mark='wordmark'\n          />\n        </div>\n\n        {/* Mobile privacy link - small and corner-aligned to keep footer tight */}\n        <div className='md:hidden absolute bottom-2 right-4'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n\n        {/* Desktop privacy link - positioned in bottom left corner */}\n        <div className='hidden md:block fixed bottom-4 left-4 z-10'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n      </footer>\n    );\n  }\n\n  // Regular footer: full links grid (brand + Product, Company, Legal)\n  if (variant === 'regular') {\n    const productLinks = [\n      { href: '/link-in-bio', label: 'Profile' },\n      { href: '/pricing', label: 'Pricing' },\n      ...FEATURES.map(f => ({ href: f.href, label: f.title })),\n    ];\n\n    const companyLinks = [\n      { href: '/support', label: 'Support' },\n      // Additional company links can be added when routes exist\n    ];\n\n    const legalLinks = [\n      { href: '/legal/privacy', label: 'Privacy Policy' },\n      { href: '/legal/terms', label: 'Terms of Service' },\n    ];\n\n    // Linear-inspired link styling with smooth transitions and accessible focus states\n    const footerLinkClassName = cn(\n      'inline-flex rounded-md px-2 py-1.5 -mx-2 -my-1.5',\n      'text-[13px] leading-5 font-medium tracking-[-0.01em]',\n      'text-secondary-token hover:text-primary-token',\n      'transition-all duration-150 ease-out',\n      'hover:bg-surface-1',\n      'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-2 focus-visible:ring-offset-transparent'\n    );\n\n    // Linear-style section heading - uppercase, small, muted\n    const sectionHeadingClassName =\n      'text-[11px] leading-4 font-semibold tracking-[0.04em] uppercase text-tertiary-token mb-4';\n\n    return (\n      <footer\n        className={cn('border-t border-subtle bg-base', className)}\n        role='contentinfo'\n        aria-label='Site footer'\n      >\n        <div\n          className={cn(\n            'mx-auto px-5 sm:px-6 lg:px-8 pt-12 pb-8 sm:pt-10 sm:pb-6',\n            maxWidthClass\n          )}\n        >\n          {/* Mobile: centered single column, Desktop: two column grid */}\n          <div className='flex flex-col items-center gap-10 sm:grid sm:grid-cols-[minmax(0,1fr)_minmax(0,2.5fr)] sm:items-start sm:gap-10 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,2fr)]'>\n            {/* Brand */}\n            <div className='flex flex-col items-center text-center sm:items-start sm:text-left'>\n              <FooterBranding\n                variant='light'\n                showCTA={false}\n                mark={brandingMark}\n                className={cn(\n                  'items-center sm:items-start',\n                  brandingMark === 'icon' ? 'sm:justify-start' : ''\n                )}\n              />\n            </div>\n\n            {/* Links grid - centered on mobile, responsive grid on larger screens */}\n            <div className='grid w-full grid-cols-2 gap-8 text-center sm:grid-cols-2 sm:gap-6 sm:text-left lg:grid-cols-3'>\n              {/* Product */}\n              <nav aria-labelledby='footer-product-heading'>\n                <h3\n                  id='footer-product-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Product\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {productLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Company */}\n              <nav aria-labelledby='footer-company-heading'>\n                <h3\n                  id='footer-company-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Company\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {companyLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Legal */}\n              <nav\n                aria-labelledby='footer-legal-heading'\n                className='col-span-2 sm:col-span-1'\n              >\n                <h3\n                  id='footer-legal-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Legal\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {legalLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                  <li>\n                    <CookieSettingsFooterButton\n                      className={footerLinkClassName}\n                    />\n                  </li>\n                </ul>\n              </nav>\n            </div>\n          </div>\n\n          {/* Bottom bar with copyright and theme toggle */}\n          <div className='mt-10 sm:mt-8 border-t border-subtle pt-6 sm:pt-5'>\n            <div className='flex flex-col items-center gap-4 sm:flex-row sm:justify-between'>\n              <Copyright\n                variant='light'\n                className='text-[11px] leading-4 font-medium tracking-[-0.01em] text-tertiary-token order-2 sm:order-1'\n              />\n              {showThemeToggle && (\n                <div className='flex items-center gap-3 order-1 sm:order-2'>\n                  {/* Mobile: icon toggle */}\n                  <div className='flex items-center sm:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  {/* Desktop: segmented toggle */}\n                  <div className='hidden sm:flex items-center'>\n                    <ThemeToggle\n                      appearance='segmented'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </footer>\n    );\n  }\n\n  // Horizontal layout for marketing and minimal variants\n  return (\n    <footer className={`${config.containerClass} ${className}`}>\n      <div className={config.contentClass}>\n        {config.layout === 'horizontal' && (\n          <>\n            <div\n              className={`flex flex-col items-center md:items-start ${variant === 'minimal' ? 'space-y-1' : 'space-y-2'}`}\n            >\n              <Copyright\n                variant={config.colorVariant}\n                className={\n                  variant === 'minimal'\n                    ? 'text-[11px] leading-4 font-medium tracking-tight text-secondary-token'\n                    : 'text-[12px] leading-4 font-medium tracking-tight text-tertiary-token'\n                }\n              />\n              {variant === 'minimal' && (\n                <p className='text-[11px] leading-4 font-medium tracking-tight text-tertiary-token'>\n                  Made for musicians, by musicians\n                </p>\n              )}\n            </div>\n\n            <div\n              className={`flex items-center ${variant === 'minimal' ? 'gap-2' : 'gap-4'}`}\n            >\n              {config.showLinks && (\n                <FooterNavigation\n                  variant={config.colorVariant}\n                  ariaLabel={variant === 'minimal' ? 'Legal' : undefined}\n                  links={links}\n                  className={\n                    variant === 'minimal'\n                      ? 'gap-2 flex-wrap justify-center'\n                      : ''\n                  }\n                  linkClassName={\n                    variant === 'minimal'\n                      ? 'text-[11px] leading-4 font-medium tracking-tight'\n                      : ''\n                  }\n                />\n              )}\n              {showThemeToggle && (\n                <>\n                  <div className='flex items-center md:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  <div className='hidden md:flex items-center'>\n                    <ThemeToggle\n                      appearance={config.themeAppearance}\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </footer>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<footer>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<footer>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Footer.tsx" },
        "span": [6110, 6128],
        "sourceCode": "import Link from 'next/link';\nimport { Copyright } from '@/components/atoms/Copyright';\nimport { CookieSettingsFooterButton } from '@/components/molecules/CookieSettingsFooterButton';\nimport { FooterBranding } from '@/components/molecules/FooterBranding';\nimport { FooterNavigation } from '@/components/molecules/FooterNavigation';\nimport { ThemeToggle } from '@/components/site/ThemeToggle';\nimport { FEATURES } from '@/lib/features';\nimport { cn } from '@/lib/utils';\n\nexport interface FooterProps {\n  variant?: 'marketing' | 'profile' | 'minimal' | 'regular';\n  artistHandle?: string;\n  hideBranding?: boolean;\n  artistSettings?: {\n    hide_branding?: boolean;\n  };\n  showThemeToggle?: boolean;\n  className?: string;\n  themeShortcutKey?: string;\n  brandingMark?: 'wordmark' | 'icon';\n  containerSize?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  links?: Array<{\n    href: string;\n    label: string;\n  }>;\n}\n\nexport function Footer({\n  variant = 'marketing',\n  artistHandle,\n  hideBranding = false,\n  artistSettings,\n  showThemeToggle = false,\n  themeShortcutKey,\n  className = '',\n  brandingMark = 'wordmark',\n  containerSize = 'lg',\n  links,\n}: FooterProps) {\n  // Use user's setting if available, otherwise fall back to hideBranding prop\n  const shouldHideBranding = artistSettings?.hide_branding ?? hideBranding;\n\n  const containerSizes = {\n    sm: 'max-w-3xl',\n    md: 'max-w-5xl',\n    lg: 'max-w-6xl',\n    xl: 'max-w-7xl',\n    full: 'max-w-none',\n  } as const;\n\n  const maxWidthClass = containerSizes[containerSize];\n\n  // Profile footer logic - hide if branding should be hidden\n  if (variant === 'profile' && shouldHideBranding) {\n    return null;\n  }\n\n  // Variant-specific configurations\n  const variantConfigs = {\n    marketing: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row items-center justify-between gap-4',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    profile: {\n      containerClass: 'relative mt-6 pt-4',\n      contentClass: '',\n      colorVariant: 'light' as const,\n      showBranding: true,\n      layout: 'vertical' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    minimal: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between gap-3 py-5 md:h-16 md:py-0',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'segmented' as const,\n    },\n    regular: {\n      // Clerk-like footer: subtle border top, compact spacing, segmented theme selector\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-6 flex items-center justify-between',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: false,\n      themeAppearance: 'segmented' as const,\n    },\n  };\n\n  const config = variantConfigs[variant];\n\n  // Profile footer has special positioning for privacy link\n  if (variant === 'profile') {\n    return (\n      <footer className={`${config.containerClass} ${className}`}>\n        <div className='flex flex-col items-center justify-center space-y-1.5 pb-2'>\n          <FooterBranding\n            artistHandle={artistHandle}\n            variant={config.colorVariant}\n            size='sm'\n            showCTA={false}\n            mark='wordmark'\n          />\n        </div>\n\n        {/* Mobile privacy link - small and corner-aligned to keep footer tight */}\n        <div className='md:hidden absolute bottom-2 right-4'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n\n        {/* Desktop privacy link - positioned in bottom left corner */}\n        <div className='hidden md:block fixed bottom-4 left-4 z-10'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n      </footer>\n    );\n  }\n\n  // Regular footer: full links grid (brand + Product, Company, Legal)\n  if (variant === 'regular') {\n    const productLinks = [\n      { href: '/link-in-bio', label: 'Profile' },\n      { href: '/pricing', label: 'Pricing' },\n      ...FEATURES.map(f => ({ href: f.href, label: f.title })),\n    ];\n\n    const companyLinks = [\n      { href: '/support', label: 'Support' },\n      // Additional company links can be added when routes exist\n    ];\n\n    const legalLinks = [\n      { href: '/legal/privacy', label: 'Privacy Policy' },\n      { href: '/legal/terms', label: 'Terms of Service' },\n    ];\n\n    // Linear-inspired link styling with smooth transitions and accessible focus states\n    const footerLinkClassName = cn(\n      'inline-flex rounded-md px-2 py-1.5 -mx-2 -my-1.5',\n      'text-[13px] leading-5 font-medium tracking-[-0.01em]',\n      'text-secondary-token hover:text-primary-token',\n      'transition-all duration-150 ease-out',\n      'hover:bg-surface-1',\n      'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-2 focus-visible:ring-offset-transparent'\n    );\n\n    // Linear-style section heading - uppercase, small, muted\n    const sectionHeadingClassName =\n      'text-[11px] leading-4 font-semibold tracking-[0.04em] uppercase text-tertiary-token mb-4';\n\n    return (\n      <footer\n        className={cn('border-t border-subtle bg-base', className)}\n        role='contentinfo'\n        aria-label='Site footer'\n      >\n        <div\n          className={cn(\n            'mx-auto px-5 sm:px-6 lg:px-8 pt-12 pb-8 sm:pt-10 sm:pb-6',\n            maxWidthClass\n          )}\n        >\n          {/* Mobile: centered single column, Desktop: two column grid */}\n          <div className='flex flex-col items-center gap-10 sm:grid sm:grid-cols-[minmax(0,1fr)_minmax(0,2.5fr)] sm:items-start sm:gap-10 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,2fr)]'>\n            {/* Brand */}\n            <div className='flex flex-col items-center text-center sm:items-start sm:text-left'>\n              <FooterBranding\n                variant='light'\n                showCTA={false}\n                mark={brandingMark}\n                className={cn(\n                  'items-center sm:items-start',\n                  brandingMark === 'icon' ? 'sm:justify-start' : ''\n                )}\n              />\n            </div>\n\n            {/* Links grid - centered on mobile, responsive grid on larger screens */}\n            <div className='grid w-full grid-cols-2 gap-8 text-center sm:grid-cols-2 sm:gap-6 sm:text-left lg:grid-cols-3'>\n              {/* Product */}\n              <nav aria-labelledby='footer-product-heading'>\n                <h3\n                  id='footer-product-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Product\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {productLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Company */}\n              <nav aria-labelledby='footer-company-heading'>\n                <h3\n                  id='footer-company-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Company\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {companyLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Legal */}\n              <nav\n                aria-labelledby='footer-legal-heading'\n                className='col-span-2 sm:col-span-1'\n              >\n                <h3\n                  id='footer-legal-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Legal\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {legalLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                  <li>\n                    <CookieSettingsFooterButton\n                      className={footerLinkClassName}\n                    />\n                  </li>\n                </ul>\n              </nav>\n            </div>\n          </div>\n\n          {/* Bottom bar with copyright and theme toggle */}\n          <div className='mt-10 sm:mt-8 border-t border-subtle pt-6 sm:pt-5'>\n            <div className='flex flex-col items-center gap-4 sm:flex-row sm:justify-between'>\n              <Copyright\n                variant='light'\n                className='text-[11px] leading-4 font-medium tracking-[-0.01em] text-tertiary-token order-2 sm:order-1'\n              />\n              {showThemeToggle && (\n                <div className='flex items-center gap-3 order-1 sm:order-2'>\n                  {/* Mobile: icon toggle */}\n                  <div className='flex items-center sm:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  {/* Desktop: segmented toggle */}\n                  <div className='hidden sm:flex items-center'>\n                    <ThemeToggle\n                      appearance='segmented'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </footer>\n    );\n  }\n\n  // Horizontal layout for marketing and minimal variants\n  return (\n    <footer className={`${config.containerClass} ${className}`}>\n      <div className={config.contentClass}>\n        {config.layout === 'horizontal' && (\n          <>\n            <div\n              className={`flex flex-col items-center md:items-start ${variant === 'minimal' ? 'space-y-1' : 'space-y-2'}`}\n            >\n              <Copyright\n                variant={config.colorVariant}\n                className={\n                  variant === 'minimal'\n                    ? 'text-[11px] leading-4 font-medium tracking-tight text-secondary-token'\n                    : 'text-[12px] leading-4 font-medium tracking-tight text-tertiary-token'\n                }\n              />\n              {variant === 'minimal' && (\n                <p className='text-[11px] leading-4 font-medium tracking-tight text-tertiary-token'>\n                  Made for musicians, by musicians\n                </p>\n              )}\n            </div>\n\n            <div\n              className={`flex items-center ${variant === 'minimal' ? 'gap-2' : 'gap-4'}`}\n            >\n              {config.showLinks && (\n                <FooterNavigation\n                  variant={config.colorVariant}\n                  ariaLabel={variant === 'minimal' ? 'Legal' : undefined}\n                  links={links}\n                  className={\n                    variant === 'minimal'\n                      ? 'gap-2 flex-wrap justify-center'\n                      : ''\n                  }\n                  linkClassName={\n                    variant === 'minimal'\n                      ? 'text-[11px] leading-4 font-medium tracking-tight'\n                      : ''\n                  }\n                />\n              )}\n              {showThemeToggle && (\n                <>\n                  <div className='flex items-center md:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  <div className='hidden md:flex items-center'>\n                    <ThemeToggle\n                      appearance={config.themeAppearance}\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </footer>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<ol>\n<ul>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<ol>\n<ul>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Footer.tsx" },
        "span": [7576, 7587],
        "sourceCode": "import Link from 'next/link';\nimport { Copyright } from '@/components/atoms/Copyright';\nimport { CookieSettingsFooterButton } from '@/components/molecules/CookieSettingsFooterButton';\nimport { FooterBranding } from '@/components/molecules/FooterBranding';\nimport { FooterNavigation } from '@/components/molecules/FooterNavigation';\nimport { ThemeToggle } from '@/components/site/ThemeToggle';\nimport { FEATURES } from '@/lib/features';\nimport { cn } from '@/lib/utils';\n\nexport interface FooterProps {\n  variant?: 'marketing' | 'profile' | 'minimal' | 'regular';\n  artistHandle?: string;\n  hideBranding?: boolean;\n  artistSettings?: {\n    hide_branding?: boolean;\n  };\n  showThemeToggle?: boolean;\n  className?: string;\n  themeShortcutKey?: string;\n  brandingMark?: 'wordmark' | 'icon';\n  containerSize?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  links?: Array<{\n    href: string;\n    label: string;\n  }>;\n}\n\nexport function Footer({\n  variant = 'marketing',\n  artistHandle,\n  hideBranding = false,\n  artistSettings,\n  showThemeToggle = false,\n  themeShortcutKey,\n  className = '',\n  brandingMark = 'wordmark',\n  containerSize = 'lg',\n  links,\n}: FooterProps) {\n  // Use user's setting if available, otherwise fall back to hideBranding prop\n  const shouldHideBranding = artistSettings?.hide_branding ?? hideBranding;\n\n  const containerSizes = {\n    sm: 'max-w-3xl',\n    md: 'max-w-5xl',\n    lg: 'max-w-6xl',\n    xl: 'max-w-7xl',\n    full: 'max-w-none',\n  } as const;\n\n  const maxWidthClass = containerSizes[containerSize];\n\n  // Profile footer logic - hide if branding should be hidden\n  if (variant === 'profile' && shouldHideBranding) {\n    return null;\n  }\n\n  // Variant-specific configurations\n  const variantConfigs = {\n    marketing: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row items-center justify-between gap-4',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    profile: {\n      containerClass: 'relative mt-6 pt-4',\n      contentClass: '',\n      colorVariant: 'light' as const,\n      showBranding: true,\n      layout: 'vertical' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    minimal: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between gap-3 py-5 md:h-16 md:py-0',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'segmented' as const,\n    },\n    regular: {\n      // Clerk-like footer: subtle border top, compact spacing, segmented theme selector\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-6 flex items-center justify-between',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: false,\n      themeAppearance: 'segmented' as const,\n    },\n  };\n\n  const config = variantConfigs[variant];\n\n  // Profile footer has special positioning for privacy link\n  if (variant === 'profile') {\n    return (\n      <footer className={`${config.containerClass} ${className}`}>\n        <div className='flex flex-col items-center justify-center space-y-1.5 pb-2'>\n          <FooterBranding\n            artistHandle={artistHandle}\n            variant={config.colorVariant}\n            size='sm'\n            showCTA={false}\n            mark='wordmark'\n          />\n        </div>\n\n        {/* Mobile privacy link - small and corner-aligned to keep footer tight */}\n        <div className='md:hidden absolute bottom-2 right-4'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n\n        {/* Desktop privacy link - positioned in bottom left corner */}\n        <div className='hidden md:block fixed bottom-4 left-4 z-10'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n      </footer>\n    );\n  }\n\n  // Regular footer: full links grid (brand + Product, Company, Legal)\n  if (variant === 'regular') {\n    const productLinks = [\n      { href: '/link-in-bio', label: 'Profile' },\n      { href: '/pricing', label: 'Pricing' },\n      ...FEATURES.map(f => ({ href: f.href, label: f.title })),\n    ];\n\n    const companyLinks = [\n      { href: '/support', label: 'Support' },\n      // Additional company links can be added when routes exist\n    ];\n\n    const legalLinks = [\n      { href: '/legal/privacy', label: 'Privacy Policy' },\n      { href: '/legal/terms', label: 'Terms of Service' },\n    ];\n\n    // Linear-inspired link styling with smooth transitions and accessible focus states\n    const footerLinkClassName = cn(\n      'inline-flex rounded-md px-2 py-1.5 -mx-2 -my-1.5',\n      'text-[13px] leading-5 font-medium tracking-[-0.01em]',\n      'text-secondary-token hover:text-primary-token',\n      'transition-all duration-150 ease-out',\n      'hover:bg-surface-1',\n      'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-2 focus-visible:ring-offset-transparent'\n    );\n\n    // Linear-style section heading - uppercase, small, muted\n    const sectionHeadingClassName =\n      'text-[11px] leading-4 font-semibold tracking-[0.04em] uppercase text-tertiary-token mb-4';\n\n    return (\n      <footer\n        className={cn('border-t border-subtle bg-base', className)}\n        role='contentinfo'\n        aria-label='Site footer'\n      >\n        <div\n          className={cn(\n            'mx-auto px-5 sm:px-6 lg:px-8 pt-12 pb-8 sm:pt-10 sm:pb-6',\n            maxWidthClass\n          )}\n        >\n          {/* Mobile: centered single column, Desktop: two column grid */}\n          <div className='flex flex-col items-center gap-10 sm:grid sm:grid-cols-[minmax(0,1fr)_minmax(0,2.5fr)] sm:items-start sm:gap-10 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,2fr)]'>\n            {/* Brand */}\n            <div className='flex flex-col items-center text-center sm:items-start sm:text-left'>\n              <FooterBranding\n                variant='light'\n                showCTA={false}\n                mark={brandingMark}\n                className={cn(\n                  'items-center sm:items-start',\n                  brandingMark === 'icon' ? 'sm:justify-start' : ''\n                )}\n              />\n            </div>\n\n            {/* Links grid - centered on mobile, responsive grid on larger screens */}\n            <div className='grid w-full grid-cols-2 gap-8 text-center sm:grid-cols-2 sm:gap-6 sm:text-left lg:grid-cols-3'>\n              {/* Product */}\n              <nav aria-labelledby='footer-product-heading'>\n                <h3\n                  id='footer-product-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Product\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {productLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Company */}\n              <nav aria-labelledby='footer-company-heading'>\n                <h3\n                  id='footer-company-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Company\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {companyLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Legal */}\n              <nav\n                aria-labelledby='footer-legal-heading'\n                className='col-span-2 sm:col-span-1'\n              >\n                <h3\n                  id='footer-legal-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Legal\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {legalLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                  <li>\n                    <CookieSettingsFooterButton\n                      className={footerLinkClassName}\n                    />\n                  </li>\n                </ul>\n              </nav>\n            </div>\n          </div>\n\n          {/* Bottom bar with copyright and theme toggle */}\n          <div className='mt-10 sm:mt-8 border-t border-subtle pt-6 sm:pt-5'>\n            <div className='flex flex-col items-center gap-4 sm:flex-row sm:justify-between'>\n              <Copyright\n                variant='light'\n                className='text-[11px] leading-4 font-medium tracking-[-0.01em] text-tertiary-token order-2 sm:order-1'\n              />\n              {showThemeToggle && (\n                <div className='flex items-center gap-3 order-1 sm:order-2'>\n                  {/* Mobile: icon toggle */}\n                  <div className='flex items-center sm:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  {/* Desktop: segmented toggle */}\n                  <div className='hidden sm:flex items-center'>\n                    <ThemeToggle\n                      appearance='segmented'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </footer>\n    );\n  }\n\n  // Horizontal layout for marketing and minimal variants\n  return (\n    <footer className={`${config.containerClass} ${className}`}>\n      <div className={config.contentClass}>\n        {config.layout === 'horizontal' && (\n          <>\n            <div\n              className={`flex flex-col items-center md:items-start ${variant === 'minimal' ? 'space-y-1' : 'space-y-2'}`}\n            >\n              <Copyright\n                variant={config.colorVariant}\n                className={\n                  variant === 'minimal'\n                    ? 'text-[11px] leading-4 font-medium tracking-tight text-secondary-token'\n                    : 'text-[12px] leading-4 font-medium tracking-tight text-tertiary-token'\n                }\n              />\n              {variant === 'minimal' && (\n                <p className='text-[11px] leading-4 font-medium tracking-tight text-tertiary-token'>\n                  Made for musicians, by musicians\n                </p>\n              )}\n            </div>\n\n            <div\n              className={`flex items-center ${variant === 'minimal' ? 'gap-2' : 'gap-4'}`}\n            >\n              {config.showLinks && (\n                <FooterNavigation\n                  variant={config.colorVariant}\n                  ariaLabel={variant === 'minimal' ? 'Legal' : undefined}\n                  links={links}\n                  className={\n                    variant === 'minimal'\n                      ? 'gap-2 flex-wrap justify-center'\n                      : ''\n                  }\n                  linkClassName={\n                    variant === 'minimal'\n                      ? 'text-[11px] leading-4 font-medium tracking-tight'\n                      : ''\n                  }\n                />\n              )}\n              {showThemeToggle && (\n                <>\n                  <div className='flex items-center md:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  <div className='hidden md:flex items-center'>\n                    <ThemeToggle\n                      appearance={config.themeAppearance}\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </footer>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<ol>\n<ul>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<ol>\n<ul>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Footer.tsx" },
        "span": [8251, 8262],
        "sourceCode": "import Link from 'next/link';\nimport { Copyright } from '@/components/atoms/Copyright';\nimport { CookieSettingsFooterButton } from '@/components/molecules/CookieSettingsFooterButton';\nimport { FooterBranding } from '@/components/molecules/FooterBranding';\nimport { FooterNavigation } from '@/components/molecules/FooterNavigation';\nimport { ThemeToggle } from '@/components/site/ThemeToggle';\nimport { FEATURES } from '@/lib/features';\nimport { cn } from '@/lib/utils';\n\nexport interface FooterProps {\n  variant?: 'marketing' | 'profile' | 'minimal' | 'regular';\n  artistHandle?: string;\n  hideBranding?: boolean;\n  artistSettings?: {\n    hide_branding?: boolean;\n  };\n  showThemeToggle?: boolean;\n  className?: string;\n  themeShortcutKey?: string;\n  brandingMark?: 'wordmark' | 'icon';\n  containerSize?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  links?: Array<{\n    href: string;\n    label: string;\n  }>;\n}\n\nexport function Footer({\n  variant = 'marketing',\n  artistHandle,\n  hideBranding = false,\n  artistSettings,\n  showThemeToggle = false,\n  themeShortcutKey,\n  className = '',\n  brandingMark = 'wordmark',\n  containerSize = 'lg',\n  links,\n}: FooterProps) {\n  // Use user's setting if available, otherwise fall back to hideBranding prop\n  const shouldHideBranding = artistSettings?.hide_branding ?? hideBranding;\n\n  const containerSizes = {\n    sm: 'max-w-3xl',\n    md: 'max-w-5xl',\n    lg: 'max-w-6xl',\n    xl: 'max-w-7xl',\n    full: 'max-w-none',\n  } as const;\n\n  const maxWidthClass = containerSizes[containerSize];\n\n  // Profile footer logic - hide if branding should be hidden\n  if (variant === 'profile' && shouldHideBranding) {\n    return null;\n  }\n\n  // Variant-specific configurations\n  const variantConfigs = {\n    marketing: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row items-center justify-between gap-4',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    profile: {\n      containerClass: 'relative mt-6 pt-4',\n      contentClass: '',\n      colorVariant: 'light' as const,\n      showBranding: true,\n      layout: 'vertical' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    minimal: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between gap-3 py-5 md:h-16 md:py-0',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'segmented' as const,\n    },\n    regular: {\n      // Clerk-like footer: subtle border top, compact spacing, segmented theme selector\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-6 flex items-center justify-between',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: false,\n      themeAppearance: 'segmented' as const,\n    },\n  };\n\n  const config = variantConfigs[variant];\n\n  // Profile footer has special positioning for privacy link\n  if (variant === 'profile') {\n    return (\n      <footer className={`${config.containerClass} ${className}`}>\n        <div className='flex flex-col items-center justify-center space-y-1.5 pb-2'>\n          <FooterBranding\n            artistHandle={artistHandle}\n            variant={config.colorVariant}\n            size='sm'\n            showCTA={false}\n            mark='wordmark'\n          />\n        </div>\n\n        {/* Mobile privacy link - small and corner-aligned to keep footer tight */}\n        <div className='md:hidden absolute bottom-2 right-4'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n\n        {/* Desktop privacy link - positioned in bottom left corner */}\n        <div className='hidden md:block fixed bottom-4 left-4 z-10'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n      </footer>\n    );\n  }\n\n  // Regular footer: full links grid (brand + Product, Company, Legal)\n  if (variant === 'regular') {\n    const productLinks = [\n      { href: '/link-in-bio', label: 'Profile' },\n      { href: '/pricing', label: 'Pricing' },\n      ...FEATURES.map(f => ({ href: f.href, label: f.title })),\n    ];\n\n    const companyLinks = [\n      { href: '/support', label: 'Support' },\n      // Additional company links can be added when routes exist\n    ];\n\n    const legalLinks = [\n      { href: '/legal/privacy', label: 'Privacy Policy' },\n      { href: '/legal/terms', label: 'Terms of Service' },\n    ];\n\n    // Linear-inspired link styling with smooth transitions and accessible focus states\n    const footerLinkClassName = cn(\n      'inline-flex rounded-md px-2 py-1.5 -mx-2 -my-1.5',\n      'text-[13px] leading-5 font-medium tracking-[-0.01em]',\n      'text-secondary-token hover:text-primary-token',\n      'transition-all duration-150 ease-out',\n      'hover:bg-surface-1',\n      'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-2 focus-visible:ring-offset-transparent'\n    );\n\n    // Linear-style section heading - uppercase, small, muted\n    const sectionHeadingClassName =\n      'text-[11px] leading-4 font-semibold tracking-[0.04em] uppercase text-tertiary-token mb-4';\n\n    return (\n      <footer\n        className={cn('border-t border-subtle bg-base', className)}\n        role='contentinfo'\n        aria-label='Site footer'\n      >\n        <div\n          className={cn(\n            'mx-auto px-5 sm:px-6 lg:px-8 pt-12 pb-8 sm:pt-10 sm:pb-6',\n            maxWidthClass\n          )}\n        >\n          {/* Mobile: centered single column, Desktop: two column grid */}\n          <div className='flex flex-col items-center gap-10 sm:grid sm:grid-cols-[minmax(0,1fr)_minmax(0,2.5fr)] sm:items-start sm:gap-10 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,2fr)]'>\n            {/* Brand */}\n            <div className='flex flex-col items-center text-center sm:items-start sm:text-left'>\n              <FooterBranding\n                variant='light'\n                showCTA={false}\n                mark={brandingMark}\n                className={cn(\n                  'items-center sm:items-start',\n                  brandingMark === 'icon' ? 'sm:justify-start' : ''\n                )}\n              />\n            </div>\n\n            {/* Links grid - centered on mobile, responsive grid on larger screens */}\n            <div className='grid w-full grid-cols-2 gap-8 text-center sm:grid-cols-2 sm:gap-6 sm:text-left lg:grid-cols-3'>\n              {/* Product */}\n              <nav aria-labelledby='footer-product-heading'>\n                <h3\n                  id='footer-product-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Product\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {productLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Company */}\n              <nav aria-labelledby='footer-company-heading'>\n                <h3\n                  id='footer-company-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Company\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {companyLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Legal */}\n              <nav\n                aria-labelledby='footer-legal-heading'\n                className='col-span-2 sm:col-span-1'\n              >\n                <h3\n                  id='footer-legal-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Legal\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {legalLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                  <li>\n                    <CookieSettingsFooterButton\n                      className={footerLinkClassName}\n                    />\n                  </li>\n                </ul>\n              </nav>\n            </div>\n          </div>\n\n          {/* Bottom bar with copyright and theme toggle */}\n          <div className='mt-10 sm:mt-8 border-t border-subtle pt-6 sm:pt-5'>\n            <div className='flex flex-col items-center gap-4 sm:flex-row sm:justify-between'>\n              <Copyright\n                variant='light'\n                className='text-[11px] leading-4 font-medium tracking-[-0.01em] text-tertiary-token order-2 sm:order-1'\n              />\n              {showThemeToggle && (\n                <div className='flex items-center gap-3 order-1 sm:order-2'>\n                  {/* Mobile: icon toggle */}\n                  <div className='flex items-center sm:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  {/* Desktop: segmented toggle */}\n                  <div className='hidden sm:flex items-center'>\n                    <ThemeToggle\n                      appearance='segmented'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </footer>\n    );\n  }\n\n  // Horizontal layout for marketing and minimal variants\n  return (\n    <footer className={`${config.containerClass} ${className}`}>\n      <div className={config.contentClass}>\n        {config.layout === 'horizontal' && (\n          <>\n            <div\n              className={`flex flex-col items-center md:items-start ${variant === 'minimal' ? 'space-y-1' : 'space-y-2'}`}\n            >\n              <Copyright\n                variant={config.colorVariant}\n                className={\n                  variant === 'minimal'\n                    ? 'text-[11px] leading-4 font-medium tracking-tight text-secondary-token'\n                    : 'text-[12px] leading-4 font-medium tracking-tight text-tertiary-token'\n                }\n              />\n              {variant === 'minimal' && (\n                <p className='text-[11px] leading-4 font-medium tracking-tight text-tertiary-token'>\n                  Made for musicians, by musicians\n                </p>\n              )}\n            </div>\n\n            <div\n              className={`flex items-center ${variant === 'minimal' ? 'gap-2' : 'gap-4'}`}\n            >\n              {config.showLinks && (\n                <FooterNavigation\n                  variant={config.colorVariant}\n                  ariaLabel={variant === 'minimal' ? 'Legal' : undefined}\n                  links={links}\n                  className={\n                    variant === 'minimal'\n                      ? 'gap-2 flex-wrap justify-center'\n                      : ''\n                  }\n                  linkClassName={\n                    variant === 'minimal'\n                      ? 'text-[11px] leading-4 font-medium tracking-tight'\n                      : ''\n                  }\n                />\n              )}\n              {showThemeToggle && (\n                <>\n                  <div className='flex items-center md:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  <div className='hidden md:flex items-center'>\n                    <ThemeToggle\n                      appearance={config.themeAppearance}\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </footer>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noRedundantRoles",
      "severity": "warning",
      "description": "Using the role attribute 'list' on the 'ul' element is redundant, because it is implied by its semantic.",
      "message": [
        {
          "elements": [],
          "content": "Using the role attribute 'list' on the 'ul' element is redundant, because it is implied by its semantic."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Unsafe fix: Remove the " },
                { "elements": ["Emphasis"], "content": "role" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "import Link from 'next/link';\nimport { Copyright } from '@/components/atoms/Copyright';\nimport { CookieSettingsFooterButton } from '@/components/molecules/CookieSettingsFooterButton';                  Company\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {companyLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 183] } } },
                { "equalLines": { "line_count": 231 } },
                { "diffOp": { "equal": { "range": [183, 273] } } },
                { "diffOp": { "delete": { "range": [273, 284] } } },
                { "diffOp": { "equal": { "range": [284, 391] } } },
                { "equalLines": { "line_count": 134 } },
                { "diffOp": { "equal": { "range": [391, 398] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Footer.tsx" },
        "span": [8256, 8262],
        "sourceCode": "import Link from 'next/link';\nimport { Copyright } from '@/components/atoms/Copyright';\nimport { CookieSettingsFooterButton } from '@/components/molecules/CookieSettingsFooterButton';\nimport { FooterBranding } from '@/components/molecules/FooterBranding';\nimport { FooterNavigation } from '@/components/molecules/FooterNavigation';\nimport { ThemeToggle } from '@/components/site/ThemeToggle';\nimport { FEATURES } from '@/lib/features';\nimport { cn } from '@/lib/utils';\n\nexport interface FooterProps {\n  variant?: 'marketing' | 'profile' | 'minimal' | 'regular';\n  artistHandle?: string;\n  hideBranding?: boolean;\n  artistSettings?: {\n    hide_branding?: boolean;\n  };\n  showThemeToggle?: boolean;\n  className?: string;\n  themeShortcutKey?: string;\n  brandingMark?: 'wordmark' | 'icon';\n  containerSize?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  links?: Array<{\n    href: string;\n    label: string;\n  }>;\n}\n\nexport function Footer({\n  variant = 'marketing',\n  artistHandle,\n  hideBranding = false,\n  artistSettings,\n  showThemeToggle = false,\n  themeShortcutKey,\n  className = '',\n  brandingMark = 'wordmark',\n  containerSize = 'lg',\n  links,\n}: FooterProps) {\n  // Use user's setting if available, otherwise fall back to hideBranding prop\n  const shouldHideBranding = artistSettings?.hide_branding ?? hideBranding;\n\n  const containerSizes = {\n    sm: 'max-w-3xl',\n    md: 'max-w-5xl',\n    lg: 'max-w-6xl',\n    xl: 'max-w-7xl',\n    full: 'max-w-none',\n  } as const;\n\n  const maxWidthClass = containerSizes[containerSize];\n\n  // Profile footer logic - hide if branding should be hidden\n  if (variant === 'profile' && shouldHideBranding) {\n    return null;\n  }\n\n  // Variant-specific configurations\n  const variantConfigs = {\n    marketing: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row items-center justify-between gap-4',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    profile: {\n      containerClass: 'relative mt-6 pt-4',\n      contentClass: '',\n      colorVariant: 'light' as const,\n      showBranding: true,\n      layout: 'vertical' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    minimal: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between gap-3 py-5 md:h-16 md:py-0',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'segmented' as const,\n    },\n    regular: {\n      // Clerk-like footer: subtle border top, compact spacing, segmented theme selector\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-6 flex items-center justify-between',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: false,\n      themeAppearance: 'segmented' as const,\n    },\n  };\n\n  const config = variantConfigs[variant];\n\n  // Profile footer has special positioning for privacy link\n  if (variant === 'profile') {\n    return (\n      <footer className={`${config.containerClass} ${className}`}>\n        <div className='flex flex-col items-center justify-center space-y-1.5 pb-2'>\n          <FooterBranding\n            artistHandle={artistHandle}\n            variant={config.colorVariant}\n            size='sm'\n            showCTA={false}\n            mark='wordmark'\n          />\n        </div>\n\n        {/* Mobile privacy link - small and corner-aligned to keep footer tight */}\n        <div className='md:hidden absolute bottom-2 right-4'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n\n        {/* Desktop privacy link - positioned in bottom left corner */}\n        <div className='hidden md:block fixed bottom-4 left-4 z-10'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n      </footer>\n    );\n  }\n\n  // Regular footer: full links grid (brand + Product, Company, Legal)\n  if (variant === 'regular') {\n    const productLinks = [\n      { href: '/link-in-bio', label: 'Profile' },\n      { href: '/pricing', label: 'Pricing' },\n      ...FEATURES.map(f => ({ href: f.href, label: f.title })),\n    ];\n\n    const companyLinks = [\n      { href: '/support', label: 'Support' },\n      // Additional company links can be added when routes exist\n    ];\n\n    const legalLinks = [\n      { href: '/legal/privacy', label: 'Privacy Policy' },\n      { href: '/legal/terms', label: 'Terms of Service' },\n    ];\n\n    // Linear-inspired link styling with smooth transitions and accessible focus states\n    const footerLinkClassName = cn(\n      'inline-flex rounded-md px-2 py-1.5 -mx-2 -my-1.5',\n      'text-[13px] leading-5 font-medium tracking-[-0.01em]',\n      'text-secondary-token hover:text-primary-token',\n      'transition-all duration-150 ease-out',\n      'hover:bg-surface-1',\n      'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-2 focus-visible:ring-offset-transparent'\n    );\n\n    // Linear-style section heading - uppercase, small, muted\n    const sectionHeadingClassName =\n      'text-[11px] leading-4 font-semibold tracking-[0.04em] uppercase text-tertiary-token mb-4';\n\n    return (\n      <footer\n        className={cn('border-t border-subtle bg-base', className)}\n        role='contentinfo'\n        aria-label='Site footer'\n      >\n        <div\n          className={cn(\n            'mx-auto px-5 sm:px-6 lg:px-8 pt-12 pb-8 sm:pt-10 sm:pb-6',\n            maxWidthClass\n          )}\n        >\n          {/* Mobile: centered single column, Desktop: two column grid */}\n          <div className='flex flex-col items-center gap-10 sm:grid sm:grid-cols-[minmax(0,1fr)_minmax(0,2.5fr)] sm:items-start sm:gap-10 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,2fr)]'>\n            {/* Brand */}\n            <div className='flex flex-col items-center text-center sm:items-start sm:text-left'>\n              <FooterBranding\n                variant='light'\n                showCTA={false}\n                mark={brandingMark}\n                className={cn(\n                  'items-center sm:items-start',\n                  brandingMark === 'icon' ? 'sm:justify-start' : ''\n                )}\n              />\n            </div>\n\n            {/* Links grid - centered on mobile, responsive grid on larger screens */}\n            <div className='grid w-full grid-cols-2 gap-8 text-center sm:grid-cols-2 sm:gap-6 sm:text-left lg:grid-cols-3'>\n              {/* Product */}\n              <nav aria-labelledby='footer-product-heading'>\n                <h3\n                  id='footer-product-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Product\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {productLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Company */}\n              <nav aria-labelledby='footer-company-heading'>\n                <h3\n                  id='footer-company-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Company\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {companyLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Legal */}\n              <nav\n                aria-labelledby='footer-legal-heading'\n                className='col-span-2 sm:col-span-1'\n              >\n                <h3\n                  id='footer-legal-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Legal\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {legalLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                  <li>\n                    <CookieSettingsFooterButton\n                      className={footerLinkClassName}\n                    />\n                  </li>\n                </ul>\n              </nav>\n            </div>\n          </div>\n\n          {/* Bottom bar with copyright and theme toggle */}\n          <div className='mt-10 sm:mt-8 border-t border-subtle pt-6 sm:pt-5'>\n            <div className='flex flex-col items-center gap-4 sm:flex-row sm:justify-between'>\n              <Copyright\n                variant='light'\n                className='text-[11px] leading-4 font-medium tracking-[-0.01em] text-tertiary-token order-2 sm:order-1'\n              />\n              {showThemeToggle && (\n                <div className='flex items-center gap-3 order-1 sm:order-2'>\n                  {/* Mobile: icon toggle */}\n                  <div className='flex items-center sm:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  {/* Desktop: segmented toggle */}\n                  <div className='hidden sm:flex items-center'>\n                    <ThemeToggle\n                      appearance='segmented'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </footer>\n    );\n  }\n\n  // Horizontal layout for marketing and minimal variants\n  return (\n    <footer className={`${config.containerClass} ${className}`}>\n      <div className={config.contentClass}>\n        {config.layout === 'horizontal' && (\n          <>\n            <div\n              className={`flex flex-col items-center md:items-start ${variant === 'minimal' ? 'space-y-1' : 'space-y-2'}`}\n            >\n              <Copyright\n                variant={config.colorVariant}\n                className={\n                  variant === 'minimal'\n                    ? 'text-[11px] leading-4 font-medium tracking-tight text-secondary-token'\n                    : 'text-[12px] leading-4 font-medium tracking-tight text-tertiary-token'\n                }\n              />\n              {variant === 'minimal' && (\n                <p className='text-[11px] leading-4 font-medium tracking-tight text-tertiary-token'>\n                  Made for musicians, by musicians\n                </p>\n              )}\n            </div>\n\n            <div\n              className={`flex items-center ${variant === 'minimal' ? 'gap-2' : 'gap-4'}`}\n            >\n              {config.showLinks && (\n                <FooterNavigation\n                  variant={config.colorVariant}\n                  ariaLabel={variant === 'minimal' ? 'Legal' : undefined}\n                  links={links}\n                  className={\n                    variant === 'minimal'\n                      ? 'gap-2 flex-wrap justify-center'\n                      : ''\n                  }\n                  linkClassName={\n                    variant === 'minimal'\n                      ? 'text-[11px] leading-4 font-medium tracking-tight'\n                      : ''\n                  }\n                />\n              )}\n              {showThemeToggle && (\n                <>\n                  <div className='flex items-center md:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  <div className='hidden md:flex items-center'>\n                    <ThemeToggle\n                      appearance={config.themeAppearance}\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </footer>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<ol>\n<ul>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<ol>\n<ul>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Footer.tsx" },
        "span": [9002, 9013],
        "sourceCode": "import Link from 'next/link';\nimport { Copyright } from '@/components/atoms/Copyright';\nimport { CookieSettingsFooterButton } from '@/components/molecules/CookieSettingsFooterButton';\nimport { FooterBranding } from '@/components/molecules/FooterBranding';\nimport { FooterNavigation } from '@/components/molecules/FooterNavigation';\nimport { ThemeToggle } from '@/components/site/ThemeToggle';\nimport { FEATURES } from '@/lib/features';\nimport { cn } from '@/lib/utils';\n\nexport interface FooterProps {\n  variant?: 'marketing' | 'profile' | 'minimal' | 'regular';\n  artistHandle?: string;\n  hideBranding?: boolean;\n  artistSettings?: {\n    hide_branding?: boolean;\n  };\n  showThemeToggle?: boolean;\n  className?: string;\n  themeShortcutKey?: string;\n  brandingMark?: 'wordmark' | 'icon';\n  containerSize?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  links?: Array<{\n    href: string;\n    label: string;\n  }>;\n}\n\nexport function Footer({\n  variant = 'marketing',\n  artistHandle,\n  hideBranding = false,\n  artistSettings,\n  showThemeToggle = false,\n  themeShortcutKey,\n  className = '',\n  brandingMark = 'wordmark',\n  containerSize = 'lg',\n  links,\n}: FooterProps) {\n  // Use user's setting if available, otherwise fall back to hideBranding prop\n  const shouldHideBranding = artistSettings?.hide_branding ?? hideBranding;\n\n  const containerSizes = {\n    sm: 'max-w-3xl',\n    md: 'max-w-5xl',\n    lg: 'max-w-6xl',\n    xl: 'max-w-7xl',\n    full: 'max-w-none',\n  } as const;\n\n  const maxWidthClass = containerSizes[containerSize];\n\n  // Profile footer logic - hide if branding should be hidden\n  if (variant === 'profile' && shouldHideBranding) {\n    return null;\n  }\n\n  // Variant-specific configurations\n  const variantConfigs = {\n    marketing: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row items-center justify-between gap-4',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    profile: {\n      containerClass: 'relative mt-6 pt-4',\n      contentClass: '',\n      colorVariant: 'light' as const,\n      showBranding: true,\n      layout: 'vertical' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    minimal: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between gap-3 py-5 md:h-16 md:py-0',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'segmented' as const,\n    },\n    regular: {\n      // Clerk-like footer: subtle border top, compact spacing, segmented theme selector\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-6 flex items-center justify-between',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: false,\n      themeAppearance: 'segmented' as const,\n    },\n  };\n\n  const config = variantConfigs[variant];\n\n  // Profile footer has special positioning for privacy link\n  if (variant === 'profile') {\n    return (\n      <footer className={`${config.containerClass} ${className}`}>\n        <div className='flex flex-col items-center justify-center space-y-1.5 pb-2'>\n          <FooterBranding\n            artistHandle={artistHandle}\n            variant={config.colorVariant}\n            size='sm'\n            showCTA={false}\n            mark='wordmark'\n          />\n        </div>\n\n        {/* Mobile privacy link - small and corner-aligned to keep footer tight */}\n        <div className='md:hidden absolute bottom-2 right-4'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n\n        {/* Desktop privacy link - positioned in bottom left corner */}\n        <div className='hidden md:block fixed bottom-4 left-4 z-10'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n      </footer>\n    );\n  }\n\n  // Regular footer: full links grid (brand + Product, Company, Legal)\n  if (variant === 'regular') {\n    const productLinks = [\n      { href: '/link-in-bio', label: 'Profile' },\n      { href: '/pricing', label: 'Pricing' },\n      ...FEATURES.map(f => ({ href: f.href, label: f.title })),\n    ];\n\n    const companyLinks = [\n      { href: '/support', label: 'Support' },\n      // Additional company links can be added when routes exist\n    ];\n\n    const legalLinks = [\n      { href: '/legal/privacy', label: 'Privacy Policy' },\n      { href: '/legal/terms', label: 'Terms of Service' },\n    ];\n\n    // Linear-inspired link styling with smooth transitions and accessible focus states\n    const footerLinkClassName = cn(\n      'inline-flex rounded-md px-2 py-1.5 -mx-2 -my-1.5',\n      'text-[13px] leading-5 font-medium tracking-[-0.01em]',\n      'text-secondary-token hover:text-primary-token',\n      'transition-all duration-150 ease-out',\n      'hover:bg-surface-1',\n      'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-2 focus-visible:ring-offset-transparent'\n    );\n\n    // Linear-style section heading - uppercase, small, muted\n    const sectionHeadingClassName =\n      'text-[11px] leading-4 font-semibold tracking-[0.04em] uppercase text-tertiary-token mb-4';\n\n    return (\n      <footer\n        className={cn('border-t border-subtle bg-base', className)}\n        role='contentinfo'\n        aria-label='Site footer'\n      >\n        <div\n          className={cn(\n            'mx-auto px-5 sm:px-6 lg:px-8 pt-12 pb-8 sm:pt-10 sm:pb-6',\n            maxWidthClass\n          )}\n        >\n          {/* Mobile: centered single column, Desktop: two column grid */}\n          <div className='flex flex-col items-center gap-10 sm:grid sm:grid-cols-[minmax(0,1fr)_minmax(0,2.5fr)] sm:items-start sm:gap-10 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,2fr)]'>\n            {/* Brand */}\n            <div className='flex flex-col items-center text-center sm:items-start sm:text-left'>\n              <FooterBranding\n                variant='light'\n                showCTA={false}\n                mark={brandingMark}\n                className={cn(\n                  'items-center sm:items-start',\n                  brandingMark === 'icon' ? 'sm:justify-start' : ''\n                )}\n              />\n            </div>\n\n            {/* Links grid - centered on mobile, responsive grid on larger screens */}\n            <div className='grid w-full grid-cols-2 gap-8 text-center sm:grid-cols-2 sm:gap-6 sm:text-left lg:grid-cols-3'>\n              {/* Product */}\n              <nav aria-labelledby='footer-product-heading'>\n                <h3\n                  id='footer-product-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Product\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {productLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Company */}\n              <nav aria-labelledby='footer-company-heading'>\n                <h3\n                  id='footer-company-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Company\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {companyLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Legal */}\n              <nav\n                aria-labelledby='footer-legal-heading'\n                className='col-span-2 sm:col-span-1'\n              >\n                <h3\n                  id='footer-legal-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Legal\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {legalLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                  <li>\n                    <CookieSettingsFooterButton\n                      className={footerLinkClassName}\n                    />\n                  </li>\n                </ul>\n              </nav>\n            </div>\n          </div>\n\n          {/* Bottom bar with copyright and theme toggle */}\n          <div className='mt-10 sm:mt-8 border-t border-subtle pt-6 sm:pt-5'>\n            <div className='flex flex-col items-center gap-4 sm:flex-row sm:justify-between'>\n              <Copyright\n                variant='light'\n                className='text-[11px] leading-4 font-medium tracking-[-0.01em] text-tertiary-token order-2 sm:order-1'\n              />\n              {showThemeToggle && (\n                <div className='flex items-center gap-3 order-1 sm:order-2'>\n                  {/* Mobile: icon toggle */}\n                  <div className='flex items-center sm:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  {/* Desktop: segmented toggle */}\n                  <div className='hidden sm:flex items-center'>\n                    <ThemeToggle\n                      appearance='segmented'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </footer>\n    );\n  }\n\n  // Horizontal layout for marketing and minimal variants\n  return (\n    <footer className={`${config.containerClass} ${className}`}>\n      <div className={config.contentClass}>\n        {config.layout === 'horizontal' && (\n          <>\n            <div\n              className={`flex flex-col items-center md:items-start ${variant === 'minimal' ? 'space-y-1' : 'space-y-2'}`}\n            >\n              <Copyright\n                variant={config.colorVariant}\n                className={\n                  variant === 'minimal'\n                    ? 'text-[11px] leading-4 font-medium tracking-tight text-secondary-token'\n                    : 'text-[12px] leading-4 font-medium tracking-tight text-tertiary-token'\n                }\n              />\n              {variant === 'minimal' && (\n                <p className='text-[11px] leading-4 font-medium tracking-tight text-tertiary-token'>\n                  Made for musicians, by musicians\n                </p>\n              )}\n            </div>\n\n            <div\n              className={`flex items-center ${variant === 'minimal' ? 'gap-2' : 'gap-4'}`}\n            >\n              {config.showLinks && (\n                <FooterNavigation\n                  variant={config.colorVariant}\n                  ariaLabel={variant === 'minimal' ? 'Legal' : undefined}\n                  links={links}\n                  className={\n                    variant === 'minimal'\n                      ? 'gap-2 flex-wrap justify-center'\n                      : ''\n                  }\n                  linkClassName={\n                    variant === 'minimal'\n                      ? 'text-[11px] leading-4 font-medium tracking-tight'\n                      : ''\n                  }\n                />\n              )}\n              {showThemeToggle && (\n                <>\n                  <div className='flex items-center md:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  <div className='hidden md:flex items-center'>\n                    <ThemeToggle\n                      appearance={config.themeAppearance}\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </footer>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noRedundantRoles",
      "severity": "warning",
      "description": "Using the role attribute 'list' on the 'ul' element is redundant, because it is implied by its semantic.",
      "message": [
        {
          "elements": [],
          "content": "Using the role attribute 'list' on the 'ul' element is redundant, because it is implied by its semantic."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Unsafe fix: Remove the " },
                { "elements": ["Emphasis"], "content": "role" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          },
          {
            "diff": {
              "dictionary": "import Link from 'next/link';\nimport { Copyright } from '@/components/atoms/Copyright';\nimport { CookieSettingsFooterButton } from '@/components/molecules/CookieSettingsFooterButton';                  Legal\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {legalLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>  );\n}\n",
              "ops": [
                { "diffOp": { "equal": { "range": [0, 183] } } },
                { "equalLines": { "line_count": 253 } },
                { "diffOp": { "equal": { "range": [183, 271] } } },
                { "diffOp": { "delete": { "range": [271, 282] } } },
                { "diffOp": { "equal": { "range": [282, 387] } } },
                { "equalLines": { "line_count": 112 } },
                { "diffOp": { "equal": { "range": [387, 394] } } }
              ]
            }
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/Footer.tsx" },
        "span": [9007, 9013],
        "sourceCode": "import Link from 'next/link';\nimport { Copyright } from '@/components/atoms/Copyright';\nimport { CookieSettingsFooterButton } from '@/components/molecules/CookieSettingsFooterButton';\nimport { FooterBranding } from '@/components/molecules/FooterBranding';\nimport { FooterNavigation } from '@/components/molecules/FooterNavigation';\nimport { ThemeToggle } from '@/components/site/ThemeToggle';\nimport { FEATURES } from '@/lib/features';\nimport { cn } from '@/lib/utils';\n\nexport interface FooterProps {\n  variant?: 'marketing' | 'profile' | 'minimal' | 'regular';\n  artistHandle?: string;\n  hideBranding?: boolean;\n  artistSettings?: {\n    hide_branding?: boolean;\n  };\n  showThemeToggle?: boolean;\n  className?: string;\n  themeShortcutKey?: string;\n  brandingMark?: 'wordmark' | 'icon';\n  containerSize?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  links?: Array<{\n    href: string;\n    label: string;\n  }>;\n}\n\nexport function Footer({\n  variant = 'marketing',\n  artistHandle,\n  hideBranding = false,\n  artistSettings,\n  showThemeToggle = false,\n  themeShortcutKey,\n  className = '',\n  brandingMark = 'wordmark',\n  containerSize = 'lg',\n  links,\n}: FooterProps) {\n  // Use user's setting if available, otherwise fall back to hideBranding prop\n  const shouldHideBranding = artistSettings?.hide_branding ?? hideBranding;\n\n  const containerSizes = {\n    sm: 'max-w-3xl',\n    md: 'max-w-5xl',\n    lg: 'max-w-6xl',\n    xl: 'max-w-7xl',\n    full: 'max-w-none',\n  } as const;\n\n  const maxWidthClass = containerSizes[containerSize];\n\n  // Profile footer logic - hide if branding should be hidden\n  if (variant === 'profile' && shouldHideBranding) {\n    return null;\n  }\n\n  // Variant-specific configurations\n  const variantConfigs = {\n    marketing: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row items-center justify-between gap-4',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    profile: {\n      containerClass: 'relative mt-6 pt-4',\n      contentClass: '',\n      colorVariant: 'light' as const,\n      showBranding: true,\n      layout: 'vertical' as const,\n      showLinks: true,\n      themeAppearance: 'icon' as const,\n    },\n    minimal: {\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between gap-3 py-5 md:h-16 md:py-0',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: true,\n      themeAppearance: 'segmented' as const,\n    },\n    regular: {\n      // Clerk-like footer: subtle border top, compact spacing, segmented theme selector\n      containerClass: 'border-t border-subtle bg-base',\n      contentClass: cn(\n        'mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-6 flex items-center justify-between',\n        maxWidthClass\n      ),\n      colorVariant: 'light' as const,\n      showBranding: false,\n      layout: 'horizontal' as const,\n      showLinks: false,\n      themeAppearance: 'segmented' as const,\n    },\n  };\n\n  const config = variantConfigs[variant];\n\n  // Profile footer has special positioning for privacy link\n  if (variant === 'profile') {\n    return (\n      <footer className={`${config.containerClass} ${className}`}>\n        <div className='flex flex-col items-center justify-center space-y-1.5 pb-2'>\n          <FooterBranding\n            artistHandle={artistHandle}\n            variant={config.colorVariant}\n            size='sm'\n            showCTA={false}\n            mark='wordmark'\n          />\n        </div>\n\n        {/* Mobile privacy link - small and corner-aligned to keep footer tight */}\n        <div className='md:hidden absolute bottom-2 right-4'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n\n        {/* Desktop privacy link - positioned in bottom left corner */}\n        <div className='hidden md:block fixed bottom-4 left-4 z-10'>\n          <FooterNavigation\n            variant={config.colorVariant}\n            ariaLabel='Legal'\n            links={[]}\n            className='gap-2 text-[10px] leading-4'\n            linkClassName='text-[10px] leading-4 opacity-60 hover:opacity-100'\n          />\n        </div>\n      </footer>\n    );\n  }\n\n  // Regular footer: full links grid (brand + Product, Company, Legal)\n  if (variant === 'regular') {\n    const productLinks = [\n      { href: '/link-in-bio', label: 'Profile' },\n      { href: '/pricing', label: 'Pricing' },\n      ...FEATURES.map(f => ({ href: f.href, label: f.title })),\n    ];\n\n    const companyLinks = [\n      { href: '/support', label: 'Support' },\n      // Additional company links can be added when routes exist\n    ];\n\n    const legalLinks = [\n      { href: '/legal/privacy', label: 'Privacy Policy' },\n      { href: '/legal/terms', label: 'Terms of Service' },\n    ];\n\n    // Linear-inspired link styling with smooth transitions and accessible focus states\n    const footerLinkClassName = cn(\n      'inline-flex rounded-md px-2 py-1.5 -mx-2 -my-1.5',\n      'text-[13px] leading-5 font-medium tracking-[-0.01em]',\n      'text-secondary-token hover:text-primary-token',\n      'transition-all duration-150 ease-out',\n      'hover:bg-surface-1',\n      'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-interactive focus-visible:ring-offset-2 focus-visible:ring-offset-transparent'\n    );\n\n    // Linear-style section heading - uppercase, small, muted\n    const sectionHeadingClassName =\n      'text-[11px] leading-4 font-semibold tracking-[0.04em] uppercase text-tertiary-token mb-4';\n\n    return (\n      <footer\n        className={cn('border-t border-subtle bg-base', className)}\n        role='contentinfo'\n        aria-label='Site footer'\n      >\n        <div\n          className={cn(\n            'mx-auto px-5 sm:px-6 lg:px-8 pt-12 pb-8 sm:pt-10 sm:pb-6',\n            maxWidthClass\n          )}\n        >\n          {/* Mobile: centered single column, Desktop: two column grid */}\n          <div className='flex flex-col items-center gap-10 sm:grid sm:grid-cols-[minmax(0,1fr)_minmax(0,2.5fr)] sm:items-start sm:gap-10 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,2fr)]'>\n            {/* Brand */}\n            <div className='flex flex-col items-center text-center sm:items-start sm:text-left'>\n              <FooterBranding\n                variant='light'\n                showCTA={false}\n                mark={brandingMark}\n                className={cn(\n                  'items-center sm:items-start',\n                  brandingMark === 'icon' ? 'sm:justify-start' : ''\n                )}\n              />\n            </div>\n\n            {/* Links grid - centered on mobile, responsive grid on larger screens */}\n            <div className='grid w-full grid-cols-2 gap-8 text-center sm:grid-cols-2 sm:gap-6 sm:text-left lg:grid-cols-3'>\n              {/* Product */}\n              <nav aria-labelledby='footer-product-heading'>\n                <h3\n                  id='footer-product-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Product\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {productLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Company */}\n              <nav aria-labelledby='footer-company-heading'>\n                <h3\n                  id='footer-company-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Company\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {companyLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </nav>\n\n              {/* Legal */}\n              <nav\n                aria-labelledby='footer-legal-heading'\n                className='col-span-2 sm:col-span-1'\n              >\n                <h3\n                  id='footer-legal-heading'\n                  className={sectionHeadingClassName}\n                >\n                  Legal\n                </h3>\n                <ul className='space-y-1' role='list'>\n                  {legalLinks.map(link => (\n                    <li key={`${link.href}-${link.label}`}>\n                      <Link href={link.href} className={footerLinkClassName}>\n                        {link.label}\n                      </Link>\n                    </li>\n                  ))}\n                  <li>\n                    <CookieSettingsFooterButton\n                      className={footerLinkClassName}\n                    />\n                  </li>\n                </ul>\n              </nav>\n            </div>\n          </div>\n\n          {/* Bottom bar with copyright and theme toggle */}\n          <div className='mt-10 sm:mt-8 border-t border-subtle pt-6 sm:pt-5'>\n            <div className='flex flex-col items-center gap-4 sm:flex-row sm:justify-between'>\n              <Copyright\n                variant='light'\n                className='text-[11px] leading-4 font-medium tracking-[-0.01em] text-tertiary-token order-2 sm:order-1'\n              />\n              {showThemeToggle && (\n                <div className='flex items-center gap-3 order-1 sm:order-2'>\n                  {/* Mobile: icon toggle */}\n                  <div className='flex items-center sm:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  {/* Desktop: segmented toggle */}\n                  <div className='hidden sm:flex items-center'>\n                    <ThemeToggle\n                      appearance='segmented'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </footer>\n    );\n  }\n\n  // Horizontal layout for marketing and minimal variants\n  return (\n    <footer className={`${config.containerClass} ${className}`}>\n      <div className={config.contentClass}>\n        {config.layout === 'horizontal' && (\n          <>\n            <div\n              className={`flex flex-col items-center md:items-start ${variant === 'minimal' ? 'space-y-1' : 'space-y-2'}`}\n            >\n              <Copyright\n                variant={config.colorVariant}\n                className={\n                  variant === 'minimal'\n                    ? 'text-[11px] leading-4 font-medium tracking-tight text-secondary-token'\n                    : 'text-[12px] leading-4 font-medium tracking-tight text-tertiary-token'\n                }\n              />\n              {variant === 'minimal' && (\n                <p className='text-[11px] leading-4 font-medium tracking-tight text-tertiary-token'>\n                  Made for musicians, by musicians\n                </p>\n              )}\n            </div>\n\n            <div\n              className={`flex items-center ${variant === 'minimal' ? 'gap-2' : 'gap-4'}`}\n            >\n              {config.showLinks && (\n                <FooterNavigation\n                  variant={config.colorVariant}\n                  ariaLabel={variant === 'minimal' ? 'Legal' : undefined}\n                  links={links}\n                  className={\n                    variant === 'minimal'\n                      ? 'gap-2 flex-wrap justify-center'\n                      : ''\n                  }\n                  linkClassName={\n                    variant === 'minimal'\n                      ? 'text-[11px] leading-4 font-medium tracking-tight'\n                      : ''\n                  }\n                />\n              )}\n              {showThemeToggle && (\n                <>\n                  <div className='flex items-center md:hidden'>\n                    <ThemeToggle\n                      appearance='icon'\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                  <div className='hidden md:flex items-center'>\n                    <ThemeToggle\n                      appearance={config.themeAppearance}\n                      shortcutKey={themeShortcutKey}\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </footer>\n  );\n}\n"
      },
      "tags": ["fixable"],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/HeroSection.stories.tsx" },
        "span": [2253, 2416],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { CTAButton } from '@/components/ui/CTAButton';\nimport { HeroSection } from './HeroSection';\n\nconst meta: Meta<typeof HeroSection> = {\n  title: 'Organisms/HeroSection',\n  component: HeroSection,\n  parameters: {\n    layout: 'fullscreen',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    gradientVariant: {\n      control: { type: 'select' },\n      options: ['primary', 'secondary', 'success', 'warning', 'purple-cyan'],\n    },\n    showBackgroundEffects: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const HomePage: Story = {\n  args: {\n    headline: 'Join the waitlist',\n    highlightText: 'handle',\n    gradientVariant: 'primary',\n    subtitle: 'Your personalized link in bio, ready in seconds.',\n    children: (\n      <div className='flex flex-col items-center gap-4'>\n        <p className='text-sm text-gray-600 dark:text-white/70'>\n          Create your artist page in seconds.\n        </p>\n        <CTAButton href='/sign-up' variant='primary' size='lg'>\n          Sign up to get started\n        </CTAButton>\n      </div>\n    ),\n    supportingText: 'Go live in 60 seconds • Free forever',\n    trustIndicators: (\n      <p className='text-xs text-gray-400 dark:text-white/40 font-medium'>\n        Trusted by 10,000+ artists worldwide\n      </p>\n    ),\n  },\n};\n\nexport const LinkInBioPage: Story = {\n  args: {\n    headline: 'Jovie: Built to Convert Not to Decorate',\n    highlightText: 'Convert',\n    gradientVariant: 'purple-cyan',\n    subtitle:\n      \"Your fans don't care about button colors—they care about your music. Jovie's AI tests every word, layout, and CTA behind the scenes to make sure more fans click, listen, and buy.\",\n    icon: '🚀',\n    children: (\n      <div className='flex flex-col sm:flex-row gap-6 justify-center items-center'>\n        <CTAButton href='/onboarding' variant='primary' size='lg'>\n          Create Your Profile\n        </CTAButton>\n        <CTAButton href='/pricing' variant='secondary' size='lg'>\n          View Pricing\n        </CTAButton>\n      </div>\n    ),\n    supportingText: (\n      <div className='flex items-center gap-2 text-gray-600 dark:text-gray-400'>\n        <svg\n          className='w-5 h-5 text-green-600 dark:text-green-400'\n          fill='none'\n          viewBox='0 0 24 24'\n          stroke='currentColor'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M5 13l4 4L19 7'\n          />\n        </svg>\n        <span className='text-sm'>\n          You focus on creating. We focus on converting.\n        </span>\n      </div>\n    ),\n    trustIndicators: (\n      <p className='text-xs text-gray-400 dark:text-white/40 font-medium'>\n        Trusted by 10,000+ artists worldwide\n      </p>\n    ),\n  },\n};\n\nexport const Simple: Story = {\n  args: {\n    headline: 'Welcome to Jovie',\n    subtitle: 'The simplest way to share your music.',\n    children: (\n      <CTAButton href='/get-started' variant='primary' size='lg'>\n        Get Started\n      </CTAButton>\n    ),\n  },\n};\n\nexport const WithoutHighlight: Story = {\n  args: {\n    headline: 'Share Your Music With The World',\n    subtitle: 'Connect with fans and grow your audience.',\n    children: (\n      <div className='flex flex-col gap-4'>\n        <CTAButton href='/sign-up' variant='primary' size='lg'>\n          Create Account\n        </CTAButton>\n        <CTAButton href='/demo' variant='outline' size='md'>\n          Watch Demo\n        </CTAButton>\n      </div>\n    ),\n    trustIndicators: (\n      <p className='text-xs text-gray-400 dark:text-white/40 font-medium'>\n        Join thousands of artists\n      </p>\n    ),\n  },\n};\n\nexport const MinimalForm: Story = {\n  args: {\n    headline: 'Get Started Today',\n    highlightText: 'Today',\n    gradientVariant: 'success',\n    subtitle: 'Join the community of successful artists.',\n    children: (\n      <div className='space-y-4 w-full'>\n        <input\n          type='email'\n          placeholder='Enter your email'\n          className='w-full px-4 py-3 border border-gray-300 rounded-lg focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:border-transparent'\n        />\n        <CTAButton href='#' variant='primary' size='lg' className='w-full'>\n          Join Now\n        </CTAButton>\n      </div>\n    ),\n    supportingText: 'No spam. Opt-out anytime.',\n  },\n};\n\nexport const WithoutBackgroundEffects: Story = {\n  args: {\n    headline: 'Clean and Simple',\n    highlightText: 'Simple',\n    subtitle: 'No fancy effects, just content.',\n    showBackgroundEffects: false,\n    children: (\n      <CTAButton href='/clean' variant='primary' size='lg'>\n        Keep It Clean\n      </CTAButton>\n    ),\n  },\n};\n\nexport const LongHeadline: Story = {\n  args: {\n    headline:\n      'Transform Your Music Career With Professional Link in Bio Pages That Actually Convert Fans Into Loyal Listeners',\n    highlightText: 'Convert',\n    gradientVariant: 'purple-cyan',\n    subtitle:\n      'Stop losing potential fans to complicated landing pages. Our optimized design gets more clicks, more streams, and more followers.',\n    children: (\n      <div className='flex flex-col gap-4'>\n        <CTAButton href='/transform' variant='primary' size='lg'>\n          Transform My Career\n        </CTAButton>\n        <CTAButton href='/learn-more' variant='outline' size='md'>\n          Learn More\n        </CTAButton>\n      </div>\n    ),\n    supportingText: 'Used by 10,000+ artists worldwide',\n    trustIndicators: (\n      <div className='flex flex-col items-center space-y-2'>\n        <p className='text-xs text-gray-400 dark:text-white/40 font-medium'>\n          Trusted by top artists\n        </p>\n        <div className='flex space-x-2'>\n          {[1, 2, 3, 4, 5].map(star => (\n            <svg\n              key={star}\n              className='w-4 h-4 text-yellow-400'\n              fill='currentColor'\n              viewBox='0 0 20 20'\n            >\n              <path d='M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z' />\n            </svg>\n          ))}\n        </div>\n      </div>\n    ),\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/HeroSection.stories.tsx" },
        "span": [5864, 6025],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport { CTAButton } from '@/components/ui/CTAButton';\nimport { HeroSection } from './HeroSection';\n\nconst meta: Meta<typeof HeroSection> = {\n  title: 'Organisms/HeroSection',\n  component: HeroSection,\n  parameters: {\n    layout: 'fullscreen',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    gradientVariant: {\n      control: { type: 'select' },\n      options: ['primary', 'secondary', 'success', 'warning', 'purple-cyan'],\n    },\n    showBackgroundEffects: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const HomePage: Story = {\n  args: {\n    headline: 'Join the waitlist',\n    highlightText: 'handle',\n    gradientVariant: 'primary',\n    subtitle: 'Your personalized link in bio, ready in seconds.',\n    children: (\n      <div className='flex flex-col items-center gap-4'>\n        <p className='text-sm text-gray-600 dark:text-white/70'>\n          Create your artist page in seconds.\n        </p>\n        <CTAButton href='/sign-up' variant='primary' size='lg'>\n          Sign up to get started\n        </CTAButton>\n      </div>\n    ),\n    supportingText: 'Go live in 60 seconds • Free forever',\n    trustIndicators: (\n      <p className='text-xs text-gray-400 dark:text-white/40 font-medium'>\n        Trusted by 10,000+ artists worldwide\n      </p>\n    ),\n  },\n};\n\nexport const LinkInBioPage: Story = {\n  args: {\n    headline: 'Jovie: Built to Convert Not to Decorate',\n    highlightText: 'Convert',\n    gradientVariant: 'purple-cyan',\n    subtitle:\n      \"Your fans don't care about button colors—they care about your music. Jovie's AI tests every word, layout, and CTA behind the scenes to make sure more fans click, listen, and buy.\",\n    icon: '🚀',\n    children: (\n      <div className='flex flex-col sm:flex-row gap-6 justify-center items-center'>\n        <CTAButton href='/onboarding' variant='primary' size='lg'>\n          Create Your Profile\n        </CTAButton>\n        <CTAButton href='/pricing' variant='secondary' size='lg'>\n          View Pricing\n        </CTAButton>\n      </div>\n    ),\n    supportingText: (\n      <div className='flex items-center gap-2 text-gray-600 dark:text-gray-400'>\n        <svg\n          className='w-5 h-5 text-green-600 dark:text-green-400'\n          fill='none'\n          viewBox='0 0 24 24'\n          stroke='currentColor'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M5 13l4 4L19 7'\n          />\n        </svg>\n        <span className='text-sm'>\n          You focus on creating. We focus on converting.\n        </span>\n      </div>\n    ),\n    trustIndicators: (\n      <p className='text-xs text-gray-400 dark:text-white/40 font-medium'>\n        Trusted by 10,000+ artists worldwide\n      </p>\n    ),\n  },\n};\n\nexport const Simple: Story = {\n  args: {\n    headline: 'Welcome to Jovie',\n    subtitle: 'The simplest way to share your music.',\n    children: (\n      <CTAButton href='/get-started' variant='primary' size='lg'>\n        Get Started\n      </CTAButton>\n    ),\n  },\n};\n\nexport const WithoutHighlight: Story = {\n  args: {\n    headline: 'Share Your Music With The World',\n    subtitle: 'Connect with fans and grow your audience.',\n    children: (\n      <div className='flex flex-col gap-4'>\n        <CTAButton href='/sign-up' variant='primary' size='lg'>\n          Create Account\n        </CTAButton>\n        <CTAButton href='/demo' variant='outline' size='md'>\n          Watch Demo\n        </CTAButton>\n      </div>\n    ),\n    trustIndicators: (\n      <p className='text-xs text-gray-400 dark:text-white/40 font-medium'>\n        Join thousands of artists\n      </p>\n    ),\n  },\n};\n\nexport const MinimalForm: Story = {\n  args: {\n    headline: 'Get Started Today',\n    highlightText: 'Today',\n    gradientVariant: 'success',\n    subtitle: 'Join the community of successful artists.',\n    children: (\n      <div className='space-y-4 w-full'>\n        <input\n          type='email'\n          placeholder='Enter your email'\n          className='w-full px-4 py-3 border border-gray-300 rounded-lg focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:border-transparent'\n        />\n        <CTAButton href='#' variant='primary' size='lg' className='w-full'>\n          Join Now\n        </CTAButton>\n      </div>\n    ),\n    supportingText: 'No spam. Opt-out anytime.',\n  },\n};\n\nexport const WithoutBackgroundEffects: Story = {\n  args: {\n    headline: 'Clean and Simple',\n    highlightText: 'Simple',\n    subtitle: 'No fancy effects, just content.',\n    showBackgroundEffects: false,\n    children: (\n      <CTAButton href='/clean' variant='primary' size='lg'>\n        Keep It Clean\n      </CTAButton>\n    ),\n  },\n};\n\nexport const LongHeadline: Story = {\n  args: {\n    headline:\n      'Transform Your Music Career With Professional Link in Bio Pages That Actually Convert Fans Into Loyal Listeners',\n    highlightText: 'Convert',\n    gradientVariant: 'purple-cyan',\n    subtitle:\n      'Stop losing potential fans to complicated landing pages. Our optimized design gets more clicks, more streams, and more followers.',\n    children: (\n      <div className='flex flex-col gap-4'>\n        <CTAButton href='/transform' variant='primary' size='lg'>\n          Transform My Career\n        </CTAButton>\n        <CTAButton href='/learn-more' variant='outline' size='md'>\n          Learn More\n        </CTAButton>\n      </div>\n    ),\n    supportingText: 'Used by 10,000+ artists worldwide',\n    trustIndicators: (\n      <div className='flex flex-col items-center space-y-2'>\n        <p className='text-xs text-gray-400 dark:text-white/40 font-medium'>\n          Trusted by top artists\n        </p>\n        <div className='flex space-x-2'>\n          {[1, 2, 3, 4, 5].map(star => (\n            <svg\n              key={star}\n              className='w-4 h-4 text-yellow-400'\n              fill='currentColor'\n              viewBox='0 0 20 20'\n            >\n              <path d='M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z' />\n            </svg>\n          ))}\n        </div>\n      </div>\n    ),\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<main>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<main>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/HeroSection.tsx" },
        "span": [3163, 3174],
        "sourceCode": "'use client';\n\nimport { type ReactNode, useMemo } from 'react';\nimport { GradientText } from '@/components/atoms/GradientText';\nimport { Container } from '@/components/site/Container';\n\nexport interface HeroSectionProps {\n  /** Main headline text (will be large and prominent) */\n  headline: ReactNode;\n  /** Optional highlighted word(s) in the headline to apply gradient */\n  highlightText?: string;\n  /** Gradient variant for highlighted text */\n  gradientVariant?:\n    | 'primary'\n    | 'secondary'\n    | 'success'\n    | 'warning'\n    | 'purple-cyan';\n  /** Subtitle/description text */\n  subtitle?: ReactNode;\n  /** Optional emoji or icon to display above headline */\n  icon?: ReactNode;\n  /** Main content area (usually form or buttons) */\n  children?: ReactNode;\n  /** Supporting text below main content */\n  supportingText?: ReactNode;\n  /** Trust indicators or additional info */\n  trustIndicators?: ReactNode;\n  /** Additional CSS classes */\n  className?: string;\n  /** Whether to show background effects */\n  showBackgroundEffects?: boolean;\n}\n\nexport function HeroSection({\n  headline,\n  highlightText,\n  gradientVariant = 'primary',\n  subtitle,\n  icon,\n  children,\n  supportingText,\n  trustIndicators,\n  className = '',\n  showBackgroundEffects = true,\n}: HeroSectionProps) {\n  // Process headline to add gradient to highlighted text\n  // Memoized to prevent re-computation on every render\n  const processedHeadline = useMemo(() => {\n    if (!highlightText || typeof headline !== 'string') {\n      return headline;\n    }\n    return headline.split(highlightText).reduce((acc, part, index, array) => {\n      if (index === array.length - 1) {\n        return [...acc, part];\n      }\n      return [\n        ...acc,\n        part,\n        <GradientText key={index} variant={gradientVariant}>\n          {highlightText}\n        </GradientText>,\n      ];\n    }, [] as ReactNode[]);\n  }, [headline, highlightText, gradientVariant]);\n\n  return (\n    <section\n      className={`relative flex flex-col items-center justify-center px-6 py-16 md:py-20 ${className}`}\n      role='banner'\n      aria-labelledby='hero-headline'\n    >\n      <Container className='relative flex max-w-4xl flex-col items-center text-center'>\n        {/* Icon/Emoji */}\n        {icon && (\n          <div className='mb-8 text-6xl' role='img'>\n            {icon}\n          </div>\n        )}\n\n        {/* Main headline */}\n        <div className='mb-8 space-y-4'>\n          <h1\n            id='hero-headline'\n            className='text-4xl font-semibold tracking-[-0.03em] text-gray-900 dark:text-white sm:text-5xl lg:text-6xl leading-[1.1]'\n            style={{ letterSpacing: '-0.03em' }}\n          >\n            {processedHeadline}\n          </h1>\n\n          {/* Subtitle */}\n          {subtitle && (\n            <p\n              className='mx-auto max-w-2xl text-lg text-gray-600 dark:text-white/70 font-normal leading-7 sm:text-xl sm:leading-8 lg:text-2xl lg:leading-9'\n              role='doc-subtitle'\n            >\n              {subtitle}\n            </p>\n          )}\n        </div>\n\n        {/* Main content area */}\n        {children && (\n          <div className='w-full max-w-xl' role='main'>\n            <div className='relative group'>\n              {/* Background glow effect */}\n              {showBackgroundEffects && (\n                <div className='absolute -inset-2 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-cyan-500/10 rounded-2xl blur-lg opacity-40 group-hover:opacity-60 transition-opacity duration-300' />\n              )}\n\n              {/* Content card */}\n              <div className='relative bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-white/10 shadow-xl hover:shadow-2xl transition-all duration-200 hover:-translate-y-1 p-8'>\n                {children}\n              </div>\n            </div>\n\n            {/* Supporting text under content */}\n            {supportingText && (\n              <div className='mt-8 text-sm text-gray-500 dark:text-white/50 text-center leading-6'>\n                {supportingText}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Trust indicators */}\n        {trustIndicators && (\n          <div className='mt-16 flex flex-col items-center space-y-4'>\n            {trustIndicators}\n          </div>\n        )}\n      </Container>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<header>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<header>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/HeroSection.tsx" },
        "span": [2068, 2081],
        "sourceCode": "'use client';\n\nimport { type ReactNode, useMemo } from 'react';\nimport { GradientText } from '@/components/atoms/GradientText';\nimport { Container } from '@/components/site/Container';\n\nexport interface HeroSectionProps {\n  /** Main headline text (will be large and prominent) */\n  headline: ReactNode;\n  /** Optional highlighted word(s) in the headline to apply gradient */\n  highlightText?: string;\n  /** Gradient variant for highlighted text */\n  gradientVariant?:\n    | 'primary'\n    | 'secondary'\n    | 'success'\n    | 'warning'\n    | 'purple-cyan';\n  /** Subtitle/description text */\n  subtitle?: ReactNode;\n  /** Optional emoji or icon to display above headline */\n  icon?: ReactNode;\n  /** Main content area (usually form or buttons) */\n  children?: ReactNode;\n  /** Supporting text below main content */\n  supportingText?: ReactNode;\n  /** Trust indicators or additional info */\n  trustIndicators?: ReactNode;\n  /** Additional CSS classes */\n  className?: string;\n  /** Whether to show background effects */\n  showBackgroundEffects?: boolean;\n}\n\nexport function HeroSection({\n  headline,\n  highlightText,\n  gradientVariant = 'primary',\n  subtitle,\n  icon,\n  children,\n  supportingText,\n  trustIndicators,\n  className = '',\n  showBackgroundEffects = true,\n}: HeroSectionProps) {\n  // Process headline to add gradient to highlighted text\n  // Memoized to prevent re-computation on every render\n  const processedHeadline = useMemo(() => {\n    if (!highlightText || typeof headline !== 'string') {\n      return headline;\n    }\n    return headline.split(highlightText).reduce((acc, part, index, array) => {\n      if (index === array.length - 1) {\n        return [...acc, part];\n      }\n      return [\n        ...acc,\n        part,\n        <GradientText key={index} variant={gradientVariant}>\n          {highlightText}\n        </GradientText>,\n      ];\n    }, [] as ReactNode[]);\n  }, [headline, highlightText, gradientVariant]);\n\n  return (\n    <section\n      className={`relative flex flex-col items-center justify-center px-6 py-16 md:py-20 ${className}`}\n      role='banner'\n      aria-labelledby='hero-headline'\n    >\n      <Container className='relative flex max-w-4xl flex-col items-center text-center'>\n        {/* Icon/Emoji */}\n        {icon && (\n          <div className='mb-8 text-6xl' role='img'>\n            {icon}\n          </div>\n        )}\n\n        {/* Main headline */}\n        <div className='mb-8 space-y-4'>\n          <h1\n            id='hero-headline'\n            className='text-4xl font-semibold tracking-[-0.03em] text-gray-900 dark:text-white sm:text-5xl lg:text-6xl leading-[1.1]'\n            style={{ letterSpacing: '-0.03em' }}\n          >\n            {processedHeadline}\n          </h1>\n\n          {/* Subtitle */}\n          {subtitle && (\n            <p\n              className='mx-auto max-w-2xl text-lg text-gray-600 dark:text-white/70 font-normal leading-7 sm:text-xl sm:leading-8 lg:text-2xl lg:leading-9'\n              role='doc-subtitle'\n            >\n              {subtitle}\n            </p>\n          )}\n        </div>\n\n        {/* Main content area */}\n        {children && (\n          <div className='w-full max-w-xl' role='main'>\n            <div className='relative group'>\n              {/* Background glow effect */}\n              {showBackgroundEffects && (\n                <div className='absolute -inset-2 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-cyan-500/10 rounded-2xl blur-lg opacity-40 group-hover:opacity-60 transition-opacity duration-300' />\n              )}\n\n              {/* Content card */}\n              <div className='relative bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-white/10 shadow-xl hover:shadow-2xl transition-all duration-200 hover:-translate-y-1 p-8'>\n                {children}\n              </div>\n            </div>\n\n            {/* Supporting text under content */}\n            {supportingText && (\n              <div className='mt-8 text-sm text-gray-500 dark:text-white/50 text-center leading-6'>\n                {supportingText}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Trust indicators */}\n        {trustIndicators && (\n          <div className='mt-16 flex flex-col items-center space-y-4'>\n            {trustIndicators}\n          </div>\n        )}\n      </Container>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/HowItWorksSection.tsx" },
        "span": [221, 319],
        "sourceCode": "import { SectionHeading } from '@/components/atoms/SectionHeading';\nimport { StatusBadge } from '@/components/atoms/StatusBadge';\nimport { StepCard } from '@/components/molecules/StepCard';\n\n// Icons\nconst LinkIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n    />\n  </svg>\n);\n\nconst LockIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z'\n    />\n  </svg>\n);\n\nconst MusicIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H15'\n    />\n  </svg>\n);\n\nconst LightningIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nexport interface HowItWorksSectionProps {\n  /** Section title */\n  title?: string;\n  /** Section description */\n  description?: string;\n  /** Badge text */\n  badgeText?: string;\n  /** Steps data */\n  steps?: Array<{\n    number: string;\n    title: string;\n    description: string;\n  }>;\n  /** Additional CSS classes */\n  className?: string;\n  /** Whether to show accent border */\n  showAccentBorder?: boolean;\n}\n\nconst defaultSteps = [\n  {\n    number: '01',\n    title: 'Connect Your Spotify',\n    description:\n      'Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.',\n  },\n  {\n    number: '02',\n    title: 'Get Your Link',\n    description:\n      'Get your custom Jovie link and professional profile. Add your social media and merch links.',\n  },\n  {\n    number: '03',\n    title: 'Fans Stream Your Music',\n    description:\n      'Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.',\n  },\n];\n\nexport function HowItWorksSection({\n  title = 'From Spotify artist to fan conversion in 60 seconds',\n  description = 'Three simple steps to turn your Spotify profile into a conversion machine',\n  badgeText = 'How It Works',\n  steps = defaultSteps,\n  className = '',\n  showAccentBorder = true,\n}: HowItWorksSectionProps) {\n  const icons = [LinkIcon, LockIcon, MusicIcon];\n\n  return (\n    <section className={`relative py-14 sm:py-18 ${className}`}>\n      {/* Section accent border */}\n      {showAccentBorder && (\n        <div className='absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-blue-500/50 via-purple-500/50 to-cyan-500/50' />\n      )}\n\n      <div className='mx-auto max-w-7xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-3xl text-center mb-12'>\n          <div className='mb-8'>\n            <StatusBadge variant='purple' icon={LightningIcon}>\n              {badgeText}\n            </StatusBadge>\n          </div>\n\n          <SectionHeading level={2} size='xl' className='mb-6'>\n            {title}\n          </SectionHeading>\n\n          <p className='text-xl text-gray-600 dark:text-white/70'>\n            {description}\n          </p>\n        </div>\n\n        <div className='mx-auto max-w-6xl'>\n          <div className='grid grid-cols-1 gap-12 md:grid-cols-3'>\n            {steps.map((step, index) => (\n              <StepCard\n                key={step.number}\n                stepNumber={step.number}\n                title={step.title}\n                description={step.description}\n                icon={icons[index % icons.length]}\n                showConnectionLine={index < steps.length - 1}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/HowItWorksSection.tsx" },
        "span": [591, 689],
        "sourceCode": "import { SectionHeading } from '@/components/atoms/SectionHeading';\nimport { StatusBadge } from '@/components/atoms/StatusBadge';\nimport { StepCard } from '@/components/molecules/StepCard';\n\n// Icons\nconst LinkIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n    />\n  </svg>\n);\n\nconst LockIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z'\n    />\n  </svg>\n);\n\nconst MusicIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H15'\n    />\n  </svg>\n);\n\nconst LightningIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nexport interface HowItWorksSectionProps {\n  /** Section title */\n  title?: string;\n  /** Section description */\n  description?: string;\n  /** Badge text */\n  badgeText?: string;\n  /** Steps data */\n  steps?: Array<{\n    number: string;\n    title: string;\n    description: string;\n  }>;\n  /** Additional CSS classes */\n  className?: string;\n  /** Whether to show accent border */\n  showAccentBorder?: boolean;\n}\n\nconst defaultSteps = [\n  {\n    number: '01',\n    title: 'Connect Your Spotify',\n    description:\n      'Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.',\n  },\n  {\n    number: '02',\n    title: 'Get Your Link',\n    description:\n      'Get your custom Jovie link and professional profile. Add your social media and merch links.',\n  },\n  {\n    number: '03',\n    title: 'Fans Stream Your Music',\n    description:\n      'Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.',\n  },\n];\n\nexport function HowItWorksSection({\n  title = 'From Spotify artist to fan conversion in 60 seconds',\n  description = 'Three simple steps to turn your Spotify profile into a conversion machine',\n  badgeText = 'How It Works',\n  steps = defaultSteps,\n  className = '',\n  showAccentBorder = true,\n}: HowItWorksSectionProps) {\n  const icons = [LinkIcon, LockIcon, MusicIcon];\n\n  return (\n    <section className={`relative py-14 sm:py-18 ${className}`}>\n      {/* Section accent border */}\n      {showAccentBorder && (\n        <div className='absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-blue-500/50 via-purple-500/50 to-cyan-500/50' />\n      )}\n\n      <div className='mx-auto max-w-7xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-3xl text-center mb-12'>\n          <div className='mb-8'>\n            <StatusBadge variant='purple' icon={LightningIcon}>\n              {badgeText}\n            </StatusBadge>\n          </div>\n\n          <SectionHeading level={2} size='xl' className='mb-6'>\n            {title}\n          </SectionHeading>\n\n          <p className='text-xl text-gray-600 dark:text-white/70'>\n            {description}\n          </p>\n        </div>\n\n        <div className='mx-auto max-w-6xl'>\n          <div className='grid grid-cols-1 gap-12 md:grid-cols-3'>\n            {steps.map((step, index) => (\n              <StepCard\n                key={step.number}\n                stepNumber={step.number}\n                title={step.title}\n                description={step.description}\n                icon={icons[index % icons.length]}\n                showConnectionLine={index < steps.length - 1}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/HowItWorksSection.tsx" },
        "span": [932, 1030],
        "sourceCode": "import { SectionHeading } from '@/components/atoms/SectionHeading';\nimport { StatusBadge } from '@/components/atoms/StatusBadge';\nimport { StepCard } from '@/components/molecules/StepCard';\n\n// Icons\nconst LinkIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n    />\n  </svg>\n);\n\nconst LockIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z'\n    />\n  </svg>\n);\n\nconst MusicIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H15'\n    />\n  </svg>\n);\n\nconst LightningIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nexport interface HowItWorksSectionProps {\n  /** Section title */\n  title?: string;\n  /** Section description */\n  description?: string;\n  /** Badge text */\n  badgeText?: string;\n  /** Steps data */\n  steps?: Array<{\n    number: string;\n    title: string;\n    description: string;\n  }>;\n  /** Additional CSS classes */\n  className?: string;\n  /** Whether to show accent border */\n  showAccentBorder?: boolean;\n}\n\nconst defaultSteps = [\n  {\n    number: '01',\n    title: 'Connect Your Spotify',\n    description:\n      'Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.',\n  },\n  {\n    number: '02',\n    title: 'Get Your Link',\n    description:\n      'Get your custom Jovie link and professional profile. Add your social media and merch links.',\n  },\n  {\n    number: '03',\n    title: 'Fans Stream Your Music',\n    description:\n      'Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.',\n  },\n];\n\nexport function HowItWorksSection({\n  title = 'From Spotify artist to fan conversion in 60 seconds',\n  description = 'Three simple steps to turn your Spotify profile into a conversion machine',\n  badgeText = 'How It Works',\n  steps = defaultSteps,\n  className = '',\n  showAccentBorder = true,\n}: HowItWorksSectionProps) {\n  const icons = [LinkIcon, LockIcon, MusicIcon];\n\n  return (\n    <section className={`relative py-14 sm:py-18 ${className}`}>\n      {/* Section accent border */}\n      {showAccentBorder && (\n        <div className='absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-blue-500/50 via-purple-500/50 to-cyan-500/50' />\n      )}\n\n      <div className='mx-auto max-w-7xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-3xl text-center mb-12'>\n          <div className='mb-8'>\n            <StatusBadge variant='purple' icon={LightningIcon}>\n              {badgeText}\n            </StatusBadge>\n          </div>\n\n          <SectionHeading level={2} size='xl' className='mb-6'>\n            {title}\n          </SectionHeading>\n\n          <p className='text-xl text-gray-600 dark:text-white/70'>\n            {description}\n          </p>\n        </div>\n\n        <div className='mx-auto max-w-6xl'>\n          <div className='grid grid-cols-1 gap-12 md:grid-cols-3'>\n            {steps.map((step, index) => (\n              <StepCard\n                key={step.number}\n                stepNumber={step.number}\n                title={step.title}\n                description={step.description}\n                icon={icons[index % icons.length]}\n                showConnectionLine={index < steps.length - 1}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/HowItWorksSection.tsx" },
        "span": [1268, 1366],
        "sourceCode": "import { SectionHeading } from '@/components/atoms/SectionHeading';\nimport { StatusBadge } from '@/components/atoms/StatusBadge';\nimport { StepCard } from '@/components/molecules/StepCard';\n\n// Icons\nconst LinkIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n    />\n  </svg>\n);\n\nconst LockIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z'\n    />\n  </svg>\n);\n\nconst MusicIcon = (\n  <svg\n    className='h-6 w-6'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H15'\n    />\n  </svg>\n);\n\nconst LightningIcon = (\n  <svg\n    className='w-4 h-4'\n    fill='none'\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth={2}\n      d='M13 10V3L4 14h7v7l9-11h-7z'\n    />\n  </svg>\n);\n\nexport interface HowItWorksSectionProps {\n  /** Section title */\n  title?: string;\n  /** Section description */\n  description?: string;\n  /** Badge text */\n  badgeText?: string;\n  /** Steps data */\n  steps?: Array<{\n    number: string;\n    title: string;\n    description: string;\n  }>;\n  /** Additional CSS classes */\n  className?: string;\n  /** Whether to show accent border */\n  showAccentBorder?: boolean;\n}\n\nconst defaultSteps = [\n  {\n    number: '01',\n    title: 'Connect Your Spotify',\n    description:\n      'Search and verify your Spotify artist profile in seconds. We pull your latest releases automatically.',\n  },\n  {\n    number: '02',\n    title: 'Get Your Link',\n    description:\n      'Get your custom Jovie link and professional profile. Add your social media and merch links.',\n  },\n  {\n    number: '03',\n    title: 'Fans Stream Your Music',\n    description:\n      'Fans discover and stream your music instantly. Smart routing sends them to their preferred platform.',\n  },\n];\n\nexport function HowItWorksSection({\n  title = 'From Spotify artist to fan conversion in 60 seconds',\n  description = 'Three simple steps to turn your Spotify profile into a conversion machine',\n  badgeText = 'How It Works',\n  steps = defaultSteps,\n  className = '',\n  showAccentBorder = true,\n}: HowItWorksSectionProps) {\n  const icons = [LinkIcon, LockIcon, MusicIcon];\n\n  return (\n    <section className={`relative py-14 sm:py-18 ${className}`}>\n      {/* Section accent border */}\n      {showAccentBorder && (\n        <div className='absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-blue-500/50 via-purple-500/50 to-cyan-500/50' />\n      )}\n\n      <div className='mx-auto max-w-7xl px-6 lg:px-8'>\n        <div className='mx-auto max-w-3xl text-center mb-12'>\n          <div className='mb-8'>\n            <StatusBadge variant='purple' icon={LightningIcon}>\n              {badgeText}\n            </StatusBadge>\n          </div>\n\n          <SectionHeading level={2} size='xl' className='mb-6'>\n            {title}\n          </SectionHeading>\n\n          <p className='text-xl text-gray-600 dark:text-white/70'>\n            {description}\n          </p>\n        </div>\n\n        <div className='mx-auto max-w-6xl'>\n          <div className='grid grid-cols-1 gap-12 md:grid-cols-3'>\n            {steps.map((step, index) => (\n              <StepCard\n                key={step.number}\n                stepNumber={step.number}\n                title={step.title}\n                description={step.description}\n                icon={icons[index % icons.length]}\n                showConnectionLine={index < steps.length - 1}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "components/organisms/ProfileNotificationsButton.tsx"
        },
        "span": [1099, 1253],
        "sourceCode": "'use client';\n\nimport React from 'react';\nimport { HeaderIconButton } from '@/components/atoms/HeaderIconButton';\nimport type { ProfileNotificationsState } from './hooks/useProfileNotificationsController';\n\ntype ProfileNotificationsButtonProps = {\n  hasActiveSubscriptions: boolean;\n  notificationsState: ProfileNotificationsState;\n  onClick: () => void;\n  ariaExpanded?: boolean;\n  buttonRef?: React.RefObject<HTMLButtonElement>;\n};\n\nexport function ProfileNotificationsButton({\n  ariaExpanded,\n  buttonRef,\n  hasActiveSubscriptions,\n  notificationsState,\n  onClick,\n}: ProfileNotificationsButtonProps) {\n  const isEditing = notificationsState === 'editing';\n\n  return (\n    <HeaderIconButton\n      ref={buttonRef}\n      size='xs'\n      variant='ghost'\n      className='relative border border-border bg-card/80 text-foreground shadow-sm backdrop-blur'\n      aria-expanded={ariaExpanded}\n      ariaLabel={\n        hasActiveSubscriptions\n          ? 'Manage notification preferences'\n          : 'Subscribe to notifications'\n      }\n      aria-pressed={isEditing}\n      onClick={onClick}\n    >\n      <svg\n        className='h-4 w-4 text-foreground'\n        fill='none'\n        stroke='currentColor'\n        viewBox='0 0 24 24'\n        aria-hidden\n      >\n        <path\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          strokeWidth={2}\n          d='M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9'\n        />\n      </svg>\n      {hasActiveSubscriptions ? (\n        <span\n          aria-hidden\n          className='absolute -right-1 -top-1 inline-flex h-2.5 w-2.5 rounded-full bg-primary'\n        />\n      ) : null}\n    </HeaderIconButton>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/ProfileShell.tsx" },
        "span": [9828, 10108],
        "sourceCode": "'use client';\nimport { usePathname, useSearchParams } from 'next/navigation';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { BackgroundPattern } from '@/components/atoms/BackgroundPattern';\nimport { ProfileNavButton } from '@/components/atoms/ProfileNavButton';\nimport { ArtistInfo } from '@/components/molecules/ArtistInfo';\nimport { SocialLink as SocialLinkComponent } from '@/components/molecules/SocialLink';\nimport {\n  type ProfileNotificationsHydrationStatus,\n  type ProfileNotificationsState,\n  useProfileNotificationsController,\n} from '@/components/organisms/hooks/useProfileNotificationsController';\nimport {\n  usePopstateReset,\n  useProfileVisitTracking,\n  useTipPageTracking,\n} from '@/components/organisms/hooks/useProfileTracking';\nimport { ProfileNotificationsButton } from '@/components/organisms/ProfileNotificationsButton';\nimport { ProfileNotificationsMenu } from '@/components/organisms/ProfileNotificationsMenu';\nimport { ArtistContactsButton } from '@/components/profile/ArtistContactsButton';\nimport { ProfileFooter } from '@/components/profile/ProfileFooter';\nimport { Container } from '@/components/site/Container';\nimport { CTAButton } from '@/components/ui/CTAButton';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { useNotifications } from '@/lib/hooks/useNotifications';\nimport type { PublicContact } from '@/types/contacts';\nimport { Artist, LegacySocialLink } from '@/types/db';\nimport type {\n  NotificationChannel,\n  NotificationContactValues,\n  NotificationSubscriptionState,\n} from '@/types/notifications';\n\ninterface ProfileNotificationsContextValue {\n  state: ProfileNotificationsState;\n  setState: React.Dispatch<React.SetStateAction<ProfileNotificationsState>>;\n  hydrationStatus: ProfileNotificationsHydrationStatus;\n  hasStoredContacts: boolean;\n  notificationsEnabled: boolean;\n  channel: NotificationChannel;\n  setChannel: React.Dispatch<React.SetStateAction<NotificationChannel>>;\n  subscribedChannels: NotificationSubscriptionState;\n  setSubscribedChannels: React.Dispatch<\n    React.SetStateAction<NotificationSubscriptionState>\n  >;\n  subscriptionDetails: NotificationContactValues;\n  setSubscriptionDetails: React.Dispatch<\n    React.SetStateAction<NotificationContactValues>\n  >;\n  openSubscription: (channel?: NotificationChannel) => void;\n}\n\nconst ProfileNotificationsContext =\n  React.createContext<ProfileNotificationsContextValue | null>(null);\n\nconst SOCIAL_NETWORK_PLATFORMS = [\n  'twitter',\n  'instagram',\n  'tiktok',\n  'youtube',\n  'facebook',\n  'linkedin',\n  'discord',\n  'twitch',\n] as const;\n\nexport function useProfileNotifications(): ProfileNotificationsContextValue {\n  const value = React.useContext(ProfileNotificationsContext);\n  if (!value) {\n    throw new Error('useProfileNotifications must be used within ProfileShell');\n  }\n  return value;\n}\n\ntype ProfileShellProps = {\n  artist: Artist;\n  socialLinks: LegacySocialLink[];\n  contacts?: PublicContact[];\n  subtitle?: string;\n  children?: React.ReactNode;\n  showSocialBar?: boolean;\n  showTipButton?: boolean;\n  showBackButton?: boolean;\n  showFooter?: boolean;\n  showNotificationButton?: boolean;\n  forceNotificationsEnabled?: boolean;\n  maxWidthClass?: string;\n  backgroundPattern?: 'grid' | 'dots' | 'gradient' | 'none';\n  showGradientBlurs?: boolean;\n};\n\nexport function ProfileShell({\n  artist,\n  socialLinks,\n  contacts = [],\n  subtitle,\n  children,\n  showSocialBar = true,\n  showTipButton = false,\n  showBackButton = false,\n  showFooter = true,\n  showNotificationButton = false,\n  forceNotificationsEnabled = false,\n  maxWidthClass = 'w-full max-w-md',\n  backgroundPattern = 'grid',\n  showGradientBlurs = true,\n}: ProfileShellProps) {\n  const [isTipNavigating, setIsTipNavigating] = useState(false);\n  const { success: showSuccess, error: showError } = useNotifications();\n  const searchParams = useSearchParams();\n  const pathname = usePathname();\n  const notificationsGate = useFeatureGate(STATSIG_FLAGS.NOTIFICATIONS);\n  const mode = searchParams?.get('mode') ?? 'profile';\n  const forceNotifications = searchParams?.get('preview') === '1';\n  const notificationsEnabled =\n    forceNotificationsEnabled || notificationsGate.value || forceNotifications;\n  const source = searchParams?.get('source');\n\n  useTipPageTracking({\n    artistHandle: artist.handle,\n    mode,\n    source,\n  });\n  useProfileVisitTracking(artist.id);\n  usePopstateReset(() => setIsTipNavigating(false));\n\n  // Reset tip loading on navigation/back\n  useEffect(() => {\n    setIsTipNavigating(false);\n  }, [pathname, mode]);\n\n  const notificationsController = useProfileNotificationsController({\n    artistHandle: artist.handle,\n    artistId: artist.id,\n    notificationsEnabled,\n    onError: showError,\n    onSuccess: showSuccess,\n  });\n\n  const {\n    channel,\n    channelBusy,\n    handleMenuOpenChange,\n    handleNotificationsClick,\n    handleUnsubscribe,\n    hasStoredContacts,\n    hasActiveSubscriptions,\n    hydrationStatus,\n    isNotificationMenuOpen,\n    menuTriggerRef,\n    openSubscription,\n    setChannel,\n    setState: setNotificationsState,\n    setSubscribedChannels,\n    setSubscriptionDetails,\n    state: notificationsState,\n    subscribedChannels,\n    subscriptionDetails,\n  } = notificationsController;\n\n  const notificationsContextValue = useMemo(\n    () => ({\n      state: notificationsState,\n      setState: setNotificationsState,\n      hydrationStatus,\n      hasStoredContacts,\n      notificationsEnabled,\n      channel,\n      setChannel,\n      subscribedChannels,\n      setSubscribedChannels,\n      subscriptionDetails,\n      setSubscriptionDetails,\n      openSubscription,\n    }),\n    [\n      channel,\n      hasStoredContacts,\n      hydrationStatus,\n      notificationsEnabled,\n      notificationsState,\n      openSubscription,\n      setChannel,\n      setNotificationsState,\n      setSubscribedChannels,\n      setSubscriptionDetails,\n      subscribedChannels,\n      subscriptionDetails,\n    ]\n  );\n  const socialNetworkLinks = socialLinks.filter(\n    link =>\n      link.is_visible !== false &&\n      SOCIAL_NETWORK_PLATFORMS.includes(\n        link.platform.toLowerCase() as (typeof SOCIAL_NETWORK_PLATFORMS)[number]\n      )\n  );\n  const hasSocialLinks = socialNetworkLinks.length > 0;\n  const hasContacts = contacts.length > 0;\n\n  return (\n    <ProfileNotificationsContext.Provider value={notificationsContextValue}>\n      <div\n        className='relative min-h-screen overflow-hidden bg-base text-primary-token transition-colors duration-200 font-medium tracking-tight'\n        data-test='public-profile-root'\n      >\n        {backgroundPattern !== 'none' && (\n          <BackgroundPattern variant={backgroundPattern} />\n        )}\n\n        {showGradientBlurs && (\n          <>\n            <div className='absolute left-1/4 top-1/4 h-96 w-96 rounded-full bg-linear-to-r from-primary/10 to-secondary/10 blur-3xl opacity-50' />\n            <div className='absolute bottom-1/4 right-1/4 h-96 w-96 rounded-full bg-linear-to-r from-secondary/10 to-accent/10 blur-3xl opacity-50' />\n          </>\n        )}\n\n        <Container>\n          <div className='absolute left-4 top-4 z-10'>\n            <ProfileNavButton\n              showBackButton={showBackButton}\n              artistHandle={artist.handle}\n              hideBranding={Boolean(artist.settings?.hide_branding)}\n            />\n          </div>\n\n          <div className='absolute right-4 top-4 z-10 flex items-center gap-2'>\n            {showNotificationButton && notificationsEnabled ? (\n              hasActiveSubscriptions ? (\n                <ProfileNotificationsMenu\n                  channelBusy={channelBusy}\n                  hasActiveSubscriptions={hasActiveSubscriptions}\n                  notificationsState={notificationsState}\n                  onAddChannel={openSubscription}\n                  onOpenChange={handleMenuOpenChange}\n                  onUnsubscribe={handleUnsubscribe}\n                  open={isNotificationMenuOpen}\n                  subscribedChannels={subscribedChannels}\n                  subscriptionDetails={subscriptionDetails}\n                  triggerRef={menuTriggerRef}\n                />\n              ) : (\n                <ProfileNotificationsButton\n                  buttonRef={menuTriggerRef}\n                  hasActiveSubscriptions={false}\n                  notificationsState={notificationsState}\n                  onClick={handleNotificationsClick}\n                />\n              )\n            ) : null}\n          </div>\n\n          <div className='relative z-10 flex min-h-screen flex-col py-12'>\n            <div className='flex flex-1 flex-col items-center justify-start px-4'>\n              <div className={`${maxWidthClass} space-y-8`}>\n                <ArtistInfo artist={artist} subtitle={subtitle} />\n                {children}\n                {(showSocialBar || showTipButton) && (\n                  <div className='flex items-center justify-between gap-4'>\n                    <div className='flex flex-1 justify-start'>\n                      {showSocialBar && (\n                        <div className='flex items-center gap-3'>\n                          {hasSocialLinks\n                            ? socialNetworkLinks.map(link => (\n                                <SocialLinkComponent\n                                  key={link.id}\n                                  link={link}\n                                  handle={artist.handle}\n                                  artistName={artist.name}\n                                />\n                              ))\n                            : !hasContacts && (\n                                <div className='flex items-center space-x-2 rounded-lg border border-dashed border-border bg-muted/40 px-3 py-2 text-muted-foreground'>\n                                  <svg\n                                    className='h-4 w-4 text-muted-foreground'\n                                    fill='none'\n                                    stroke='currentColor'\n                                    viewBox='0 0 24 24'\n                                  >\n                                    <path\n                                      strokeLinecap='round'\n                                      strokeLinejoin='round'\n                                      strokeWidth={2}\n                                      d='M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1'\n                                    />\n                                  </svg>\n                                  <span className='text-xs'>\n                                    Links coming soon\n                                  </span>\n                                </div>\n                              )}\n                          <ArtistContactsButton\n                            contacts={contacts}\n                            artistHandle={artist.handle}\n                            artistName={artist.name}\n                          />\n                        </div>\n                      )}\n                    </div>\n\n                    {showTipButton && (\n                      <div className='shrink-0'>\n                        <CTAButton\n                          href={`/${artist.handle}?mode=tip`}\n                          variant='primary'\n                          size='sm'\n                          className='rounded-full px-3 py-1.5 text-xs shadow-sm'\n                          isLoading={isTipNavigating}\n                          onClick={() => setIsTipNavigating(true)}\n                        >\n                          Tip\n                        </CTAButton>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {showFooter && <ProfileFooter artist={artist} />}\n          </div>\n        </Container>\n      </div>\n    </ProfileNotificationsContext.Provider>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/SmartHandleInput.tsx" },
        "span": [10513, 10526],
        "sourceCode": "'use client';\n\nimport {\n  useCallback,\n  useEffect,\n  useId,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { Icon } from '@/components/atoms/Icon';\nimport { Input } from '@/components/atoms/Input';\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\nimport {\n  type ClientValidationResult,\n  debounce,\n  generateUsernameSuggestions,\n  validateUsernameFormat,\n} from '@/lib/validation/client-username';\n\ninterface SmartHandleInputProps {\n  value: string;\n  onChange: (value: string) => void;\n  onValidationChange?: (validation: HandleValidationState) => void;\n  placeholder?: string;\n  prefix?: string;\n  showAvailability?: boolean;\n  formatHints?: boolean;\n  disabled?: boolean;\n  artistName?: string;\n  className?: string;\n}\n\nexport interface HandleValidationState {\n  available: boolean;\n  checking: boolean;\n  error: string | null;\n  clientValid: boolean;\n  suggestions: string[];\n}\n\nexport function SmartHandleInput({\n  value,\n  onChange,\n  onValidationChange,\n  placeholder = 'yourname',\n  prefix = 'jovie.link/',\n  showAvailability = true,\n  formatHints = true,\n  disabled = false,\n  artistName,\n  className = '',\n}: SmartHandleInputProps) {\n  const inputId = useId();\n  const statusId = useId();\n  const previewId = useId();\n\n  // Handle validation state\n  const [handleValidation, setHandleValidation] =\n    useState<HandleValidationState>({\n      available: false,\n      checking: false,\n      error: null,\n      clientValid: false,\n      suggestions: [],\n    });\n\n  // Abort controller for canceling in-flight requests\n  const abortControllerRef = useRef<AbortController | null>(null);\n  const lastValidatedRef = useRef<{\n    handle: string;\n    available: boolean;\n  } | null>(null);\n\n  // Instant client-side validation (optimized for <50ms response time)\n  const validateClientSide = useCallback(\n    (handleValue: string): ClientValidationResult =>\n      validateUsernameFormat(handleValue),\n    []\n  );\n\n  // Memoized client validation result\n  const clientValidation = useMemo(\n    () => validateClientSide(value),\n    [value, validateClientSide]\n  );\n\n  // Memoized username suggestions\n  const usernameSuggestions = useMemo(() => {\n    if (clientValidation.valid || !value) return [];\n    return generateUsernameSuggestions(value, artistName);\n  }, [value, artistName, clientValidation.valid]);\n\n  // Debounced API validation with reduced delay for better UX\n  const requestIdRef = useRef(0);\n\n  const debouncedApiValidation = useMemo(\n    () =>\n      debounce(\n        async (\n          handleValue: string,\n          requestId: number,\n          abortController: AbortController\n        ) => {\n          if (!clientValidation.valid) return;\n\n          // Check cache first\n          if (lastValidatedRef.current?.handle === handleValue) {\n            const { available } = lastValidatedRef.current;\n\n            setHandleValidation(prev => ({\n              ...prev,\n              available,\n              checking: false,\n              error: available ? null : 'Handle already taken',\n            }));\n\n            return;\n          }\n\n          const timeoutId = setTimeout(() => {\n            abortController.abort();\n          }, 5000); // 5 second timeout\n\n          try {\n            const response = await fetch(\n              `/api/handle/check?handle=${encodeURIComponent(handleValue.toLowerCase())}`,\n              {\n                signal: abortController.signal,\n                headers: {\n                  Accept: 'application/json',\n                  'Content-Type': 'application/json',\n                },\n              }\n            );\n\n            if (\n              abortController.signal.aborted ||\n              requestId !== requestIdRef.current\n            )\n              return;\n\n            if (!response.ok) {\n              throw new Error(\n                `HTTP ${response.status}: ${response.statusText}`\n              );\n            }\n\n            const result = await response.json();\n            const available = !!result.available;\n\n            setHandleValidation(prev => ({\n              ...prev,\n              available,\n              checking: false,\n              error: available ? null : result.error || 'Handle already taken',\n            }));\n\n            lastValidatedRef.current = { handle: handleValue, available };\n          } catch (error) {\n            if (requestId !== requestIdRef.current) return;\n\n            if (error instanceof Error && error.name === 'AbortError') {\n              if (abortController.signal.aborted) {\n                setHandleValidation(prev => ({\n                  ...prev,\n                  available: false,\n                  checking: false,\n                  error: 'Check timed out - please try again',\n                }));\n              }\n              return;\n            }\n\n            console.error('Handle validation error:', error);\n\n            let errorMessage = 'Network error';\n            if (error instanceof TypeError && error.message.includes('fetch')) {\n              errorMessage = 'Connection failed - check your internet';\n            } else if (error instanceof Error) {\n              errorMessage = error.message.includes('HTTP')\n                ? 'Server error - please try again'\n                : 'Network error';\n            }\n\n            setHandleValidation(prev => ({\n              ...prev,\n              available: false,\n              checking: false,\n              error: errorMessage,\n            }));\n\n            lastValidatedRef.current = {\n              handle: handleValue,\n              available: false,\n            };\n          } finally {\n            clearTimeout(timeoutId);\n          }\n        },\n        500\n      ),\n    [clientValidation.valid]\n  );\n\n  // Update validation state when handle or client validation changes\n  useEffect(() => {\n    setHandleValidation(prevValidation => ({\n      ...prevValidation,\n      clientValid: clientValidation.valid,\n      error: clientValidation.error,\n      suggestions: usernameSuggestions,\n      available: clientValidation.valid ? prevValidation.available : false,\n      checking: clientValidation.valid ? prevValidation.checking : false,\n    }));\n\n    if (!clientValidation.valid || value.length < 3 || !showAvailability) {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n      requestIdRef.current += 1;\n      setHandleValidation(prev => ({\n        ...prev,\n        checking: false,\n        available: false,\n      }));\n      return;\n    }\n\n    const nextRequestId = requestIdRef.current + 1;\n    requestIdRef.current = nextRequestId;\n\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n\n    const abortController = new AbortController();\n    abortControllerRef.current = abortController;\n\n    setHandleValidation(prev => ({\n      ...prev,\n      checking: true,\n      error: null,\n    }));\n\n    debouncedApiValidation(value, nextRequestId, abortController);\n  }, [\n    value,\n    clientValidation,\n    usernameSuggestions,\n    debouncedApiValidation,\n    showAvailability,\n  ]);\n\n  useEffect(() => {\n    onValidationChange?.(handleValidation);\n  }, [handleValidation, onValidationChange]);\n\n  useEffect(() => {\n    return () => {\n      abortControllerRef.current?.abort();\n    };\n  }, []);\n\n  const ValidationStatusIcon = () => {\n    if (!showAvailability) return null;\n    if (handleValidation.checking) {\n      return <LoadingSpinner size='sm' tone='muted' />;\n    }\n    if (handleValidation.available && clientValidation.valid) {\n      return (\n        <span\n          aria-hidden\n          className='flex size-4 items-center justify-center rounded-full bg-surface-2 text-(--accent-speed)'\n        >\n          <Icon name='Check' className='size-3' strokeWidth={2.5} />\n        </span>\n      );\n    }\n    if (handleValidation.error || !clientValidation.valid) {\n      return (\n        <span\n          aria-hidden\n          className='flex size-4 items-center justify-center rounded-full bg-surface-2 text-destructive'\n        >\n          <Icon name='X' className='size-3' strokeWidth={2.5} />\n        </span>\n      );\n    }\n    return null;\n  };\n\n  const getStatusMessage = () => {\n    if (handleValidation.checking) {\n      return 'Checking availability...';\n    }\n    if (handleValidation.available && clientValidation.valid) {\n      return `@${value} is available!`;\n    }\n    if (handleValidation.error) {\n      return handleValidation.error;\n    }\n    if (clientValidation.error) {\n      return clientValidation.error;\n    }\n    return null;\n  };\n\n  const statusMessage = getStatusMessage();\n\n  return (\n    <div className={`space-y-2 ${className}`}>\n      {/* Input with prefix and validation icon */}\n      <div className='relative'>\n        <div className='absolute left-3 top-1/2 -translate-y-1/2 z-10 text-sm font-sans text-secondary-token'>\n          {prefix}\n        </div>\n        <Input\n          type='text'\n          value={value}\n          onChange={e => onChange(e.target.value)}\n          placeholder={placeholder}\n          disabled={disabled}\n          className='font-sans pl-20'\n          inputClassName='font-sans'\n          id={inputId}\n          validationState={\n            !value\n              ? null\n              : handleValidation.error || clientValidation.error\n                ? 'invalid'\n                : handleValidation.available && clientValidation.valid\n                  ? 'valid'\n                  : handleValidation.checking\n                    ? 'pending'\n                    : null\n          }\n          statusIcon={<ValidationStatusIcon />}\n          aria-describedby={`${statusId} ${previewId}`}\n          aria-label='Enter your desired handle'\n          autoCapitalize='none'\n          autoCorrect='off'\n          autoComplete='off'\n          inputMode='text'\n        />\n      </div>\n\n      {/* Live preview */}\n      <div className='text-xs text-secondary-token' id={previewId}>\n        Your profile will be live at{' '}\n        <span className='font-sans text-primary-token'>\n          {prefix}\n          {value || placeholder}\n        </span>\n      </div>\n\n      {/* Status message - always reserve space to prevent layout shift */}\n      <div\n        className={`text-xs min-h-5 transition-all duration-300 ${\n          statusMessage\n            ? handleValidation.available && clientValidation.valid\n              ? 'text-(--accent-speed) opacity-100'\n              : 'text-destructive opacity-100'\n            : 'opacity-0'\n        }`}\n        id={statusId}\n        role='status'\n        aria-live='polite'\n      >\n        {statusMessage || '\\u00A0'}{' '}\n        {/* Non-breaking space to maintain height */}\n      </div>\n\n      {/* Username suggestions */}\n      {formatHints && handleValidation.suggestions.length > 0 && (\n        <div className='space-y-2'>\n          <p className='text-xs text-secondary-token'>Try these instead:</p>\n          <div className='flex flex-wrap gap-2'>\n            {handleValidation.suggestions.slice(0, 3).map(suggestion => (\n              <button\n                key={suggestion}\n                type='button'\n                onClick={() => onChange(suggestion)}\n                className='text-xs px-3 py-1.5 rounded-md transition-colors duration-150 font-sans bg-surface-2 hover:bg-surface-3 text-primary-token'\n                disabled={disabled}\n              >\n                @{suggestion}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Format hints */}\n      {formatHints && !value && (\n        <div className='text-xs text-secondary-token space-y-1'>\n          <p>Great handles are:</p>\n          <ul className='list-disc list-inside space-y-0.5 ml-2'>\n            <li>Short and memorable (3-15 characters)</li>\n            <li>Easy to type and share</li>\n            <li>Consistent with your brand</li>\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/TipSection.tsx" },
        "span": [3230, 3415],
        "sourceCode": "import { Button } from '@jovie/ui';\nimport { useState } from 'react';\nimport { LoadingButton } from '@/components/molecules/LoadingButton';\nimport { QRCodeCard } from '@/components/molecules/QRCodeCard';\nimport { TipSelector } from '@/components/molecules/TipSelector';\nimport { useToast } from '@/components/molecules/ToastContainer';\n\ninterface TipSectionProps {\n  handle: string;\n  artistName: string;\n  amounts?: number[];\n  venmoLink?: string;\n  venmoUsername?: string | null;\n  onStripePayment?: (amount: number) => Promise<void>;\n  onVenmoPayment?: (url: string) => void;\n  className?: string;\n}\n\nexport function TipSection({\n  amounts = [2, 5, 10],\n  venmoLink,\n  venmoUsername,\n  onStripePayment,\n  onVenmoPayment,\n  className = '',\n}: TipSectionProps) {\n  const [loading, setLoading] = useState<number | null>(null);\n  const [paymentMethod, setPaymentMethod] = useState<'stripe' | 'venmo' | null>(\n    null\n  );\n  const { showToast } = useToast();\n\n  const handleStripePayment = async (amount: number) => {\n    if (!onStripePayment) return;\n\n    setLoading(amount);\n    try {\n      await onStripePayment(amount);\n      showToast({\n        message: `Thanks for the $${amount} tip 🎉`,\n        type: 'success',\n        duration: 5000,\n      });\n    } catch (error) {\n      console.error('Tip failed', error);\n      showToast({\n        message: 'Payment failed. Please try again.',\n        type: 'error',\n        duration: 7000,\n      });\n    } finally {\n      setLoading(null);\n    }\n  };\n\n  const handleVenmoPayment = (amount: number) => {\n    if (!venmoLink || !onVenmoPayment) return;\n\n    const sep = venmoLink.includes('?') ? '&' : '?';\n    const url = `${venmoLink}${sep}utm_amount=${amount}&utm_username=${encodeURIComponent(\n      venmoUsername ?? ''\n    )}`;\n\n    onVenmoPayment(url);\n    window.open(url, '_blank', 'noopener,noreferrer');\n  };\n\n  // If no payment methods are supported, show QR fallback\n  if (!onStripePayment && !venmoLink) {\n    const currentUrl =\n      typeof window !== 'undefined' ? window.location.href : '';\n    return (\n      <div className={`text-center space-y-4 ${className}`}>\n        <QRCodeCard\n          data={currentUrl}\n          title='Scan to tip via Apple Pay'\n          qrSize={192}\n        />\n      </div>\n    );\n  }\n\n  // Show payment method selection if both are available\n  if (onStripePayment && venmoLink && !paymentMethod) {\n    return (\n      <div className={`w-full max-w-sm space-y-3 ${className}`}>\n        <h3 className='text-lg font-semibold text-center text-gray-900 dark:text-white mb-4'>\n          Choose payment method\n        </h3>\n        <Button\n          onClick={() => setPaymentMethod('stripe')}\n          className='w-full'\n          size='lg'\n        >\n          Pay with Apple Pay / Card\n        </Button>\n        <Button\n          onClick={() => setPaymentMethod('venmo')}\n          variant='outline'\n          className='w-full'\n          size='lg'\n        >\n          Pay with Venmo\n        </Button>\n      </div>\n    );\n  }\n\n  // Show Stripe payment flow\n  if (paymentMethod === 'stripe' || (onStripePayment && !venmoLink)) {\n    return (\n      <div className={`w-full max-w-sm space-y-3 ${className}`}>\n        {paymentMethod && (\n          <button\n            onClick={() => setPaymentMethod(null)}\n            className='text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 mb-4'\n          >\n            ← Back to payment methods\n          </button>\n        )}\n        {amounts.map(amount => (\n          <LoadingButton\n            key={amount}\n            onClick={() => handleStripePayment(amount)}\n            className='w-full'\n            size='lg'\n            isLoading={loading === amount}\n            loadingText='Processing…'\n          >\n            ${amount} Tip\n          </LoadingButton>\n        ))}\n        <p className='mt-2 text-center text-xs text-gray-500'>\n          Tips are non-refundable\n        </p>\n      </div>\n    );\n  }\n\n  // Show Venmo payment flow\n  if (paymentMethod === 'venmo' || (venmoLink && !onStripePayment)) {\n    return (\n      <div className={`w-full max-w-sm ${className}`}>\n        {paymentMethod && (\n          <button\n            onClick={() => setPaymentMethod(null)}\n            className='text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 mb-4'\n          >\n            ← Back to payment methods\n          </button>\n        )}\n        <TipSelector amounts={amounts} onContinue={handleVenmoPayment} />\n      </div>\n    );\n  }\n\n  return null;\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/organisms/TipSection.tsx" },
        "span": [4179, 4364],
        "sourceCode": "import { Button } from '@jovie/ui';\nimport { useState } from 'react';\nimport { LoadingButton } from '@/components/molecules/LoadingButton';\nimport { QRCodeCard } from '@/components/molecules/QRCodeCard';\nimport { TipSelector } from '@/components/molecules/TipSelector';\nimport { useToast } from '@/components/molecules/ToastContainer';\n\ninterface TipSectionProps {\n  handle: string;\n  artistName: string;\n  amounts?: number[];\n  venmoLink?: string;\n  venmoUsername?: string | null;\n  onStripePayment?: (amount: number) => Promise<void>;\n  onVenmoPayment?: (url: string) => void;\n  className?: string;\n}\n\nexport function TipSection({\n  amounts = [2, 5, 10],\n  venmoLink,\n  venmoUsername,\n  onStripePayment,\n  onVenmoPayment,\n  className = '',\n}: TipSectionProps) {\n  const [loading, setLoading] = useState<number | null>(null);\n  const [paymentMethod, setPaymentMethod] = useState<'stripe' | 'venmo' | null>(\n    null\n  );\n  const { showToast } = useToast();\n\n  const handleStripePayment = async (amount: number) => {\n    if (!onStripePayment) return;\n\n    setLoading(amount);\n    try {\n      await onStripePayment(amount);\n      showToast({\n        message: `Thanks for the $${amount} tip 🎉`,\n        type: 'success',\n        duration: 5000,\n      });\n    } catch (error) {\n      console.error('Tip failed', error);\n      showToast({\n        message: 'Payment failed. Please try again.',\n        type: 'error',\n        duration: 7000,\n      });\n    } finally {\n      setLoading(null);\n    }\n  };\n\n  const handleVenmoPayment = (amount: number) => {\n    if (!venmoLink || !onVenmoPayment) return;\n\n    const sep = venmoLink.includes('?') ? '&' : '?';\n    const url = `${venmoLink}${sep}utm_amount=${amount}&utm_username=${encodeURIComponent(\n      venmoUsername ?? ''\n    )}`;\n\n    onVenmoPayment(url);\n    window.open(url, '_blank', 'noopener,noreferrer');\n  };\n\n  // If no payment methods are supported, show QR fallback\n  if (!onStripePayment && !venmoLink) {\n    const currentUrl =\n      typeof window !== 'undefined' ? window.location.href : '';\n    return (\n      <div className={`text-center space-y-4 ${className}`}>\n        <QRCodeCard\n          data={currentUrl}\n          title='Scan to tip via Apple Pay'\n          qrSize={192}\n        />\n      </div>\n    );\n  }\n\n  // Show payment method selection if both are available\n  if (onStripePayment && venmoLink && !paymentMethod) {\n    return (\n      <div className={`w-full max-w-sm space-y-3 ${className}`}>\n        <h3 className='text-lg font-semibold text-center text-gray-900 dark:text-white mb-4'>\n          Choose payment method\n        </h3>\n        <Button\n          onClick={() => setPaymentMethod('stripe')}\n          className='w-full'\n          size='lg'\n        >\n          Pay with Apple Pay / Card\n        </Button>\n        <Button\n          onClick={() => setPaymentMethod('venmo')}\n          variant='outline'\n          className='w-full'\n          size='lg'\n        >\n          Pay with Venmo\n        </Button>\n      </div>\n    );\n  }\n\n  // Show Stripe payment flow\n  if (paymentMethod === 'stripe' || (onStripePayment && !venmoLink)) {\n    return (\n      <div className={`w-full max-w-sm space-y-3 ${className}`}>\n        {paymentMethod && (\n          <button\n            onClick={() => setPaymentMethod(null)}\n            className='text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 mb-4'\n          >\n            ← Back to payment methods\n          </button>\n        )}\n        {amounts.map(amount => (\n          <LoadingButton\n            key={amount}\n            onClick={() => handleStripePayment(amount)}\n            className='w-full'\n            size='lg'\n            isLoading={loading === amount}\n            loadingText='Processing…'\n          >\n            ${amount} Tip\n          </LoadingButton>\n        ))}\n        <p className='mt-2 text-center text-xs text-gray-500'>\n          Tips are non-refundable\n        </p>\n      </div>\n    );\n  }\n\n  // Show Venmo payment flow\n  if (paymentMethod === 'venmo' || (venmoLink && !onStripePayment)) {\n    return (\n      <div className={`w-full max-w-sm ${className}`}>\n        {paymentMethod && (\n          <button\n            onClick={() => setPaymentMethod(null)}\n            className='text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 mb-4'\n          >\n            ← Back to payment methods\n          </button>\n        )}\n        <TipSelector amounts={amounts} onContinue={handleVenmoPayment} />\n      </div>\n    );\n  }\n\n  return null;\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/pricing/FeatureList.tsx" },
        "span": [892, 1075],
        "sourceCode": "'use client';\n\nimport { motion } from 'framer-motion';\n\ninterface Feature {\n  title: string;\n}\n\ninterface FeatureListProps {\n  features: Feature[];\n  title: string;\n}\n\nexport function FeatureList({ features, title }: FeatureListProps) {\n  const container = {\n    hidden: { opacity: 0 },\n    show: {\n      opacity: 1,\n      transition: {\n        staggerChildren: 0.1,\n      },\n    },\n  };\n\n  const item = {\n    hidden: { opacity: 0, y: 20 },\n    show: { opacity: 1, y: 0 },\n  };\n\n  return (\n    <div className='mt-8'>\n      <h3 className='text-lg font-semibold text-gray-900 dark:text-white mb-4'>\n        {title}\n      </h3>\n      <motion.ul\n        className='space-y-3'\n        variants={container}\n        initial='hidden'\n        animate='show'\n      >\n        {features.map((feature, index) => (\n          <motion.li key={index} className='flex items-start' variants={item}>\n            <svg\n              className='h-5 w-5 flex-shrink-0 text-blue-500 mt-0.5'\n              fill='none'\n              viewBox='0 0 24 24'\n              stroke='currentColor'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M5 13l4 4L19 7'\n              />\n            </svg>\n            <span className='ml-3 text-base text-gray-700 dark:text-gray-300'>\n              {feature.title}\n            </span>\n          </motion.li>\n        ))}\n      </motion.ul>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/AnimatedArtistPage.stories.tsx" },
        "span": [4708, 4969],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport React from 'react';\nimport { Artist, LegacySocialLink } from '@/types/db';\nimport { AnimatedArtistPage } from './AnimatedArtistPage';\n\nconst meta: Meta<typeof AnimatedArtistPage> = {\n  title: 'Profile/AnimatedArtistPage',\n  component: AnimatedArtistPage,\n  parameters: {\n    layout: 'fullscreen',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    mode: {\n      control: { type: 'select' },\n      options: ['profile', 'listen', 'tip'],\n    },\n    showTipButton: {\n      control: { type: 'boolean' },\n    },\n    showBackButton: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst mockArtist: Artist = {\n  id: '1',\n  handle: 'taylorswift',\n  name: 'Taylor Swift',\n  image_url:\n    'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=400&fit=crop&crop=face',\n  tagline:\n    'Grammy Award-winning singer-songwriter known for narrative songs about her personal life.',\n  is_verified: true,\n  owner_user_id: '1',\n  spotify_id: '',\n  published: true,\n  is_featured: false,\n  created_at: new Date().toISOString(),\n  marketing_opt_out: false,\n};\n\nconst mockSocialLinks: LegacySocialLink[] = [\n  {\n    id: '1',\n    artist_id: '1',\n    platform: 'instagram',\n    url: 'https://instagram.com/taylorswift',\n    clicks: 0,\n    created_at: '',\n  },\n  {\n    id: '2',\n    artist_id: '1',\n    platform: 'twitter',\n    url: 'https://twitter.com/taylorswift13',\n    clicks: 0,\n    created_at: '',\n  },\n  {\n    id: '3',\n    artist_id: '1',\n    platform: 'venmo',\n    url: 'https://venmo.com/u/taylorswift',\n    clicks: 0,\n    created_at: '',\n  },\n];\n\nexport const ProfileMode: Story = {\n  args: {\n    mode: 'profile',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks,\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const ListenMode: Story = {\n  args: {\n    mode: 'listen',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks,\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: true,\n  },\n};\n\nexport const TipMode: Story = {\n  args: {\n    mode: 'tip',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks,\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: true,\n  },\n};\n\nexport const TipModeWithoutVenmo: Story = {\n  args: {\n    mode: 'tip',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks.filter(link => link.platform !== 'venmo'),\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: true,\n  },\n};\n\nexport const VerifiedArtist: Story = {\n  args: {\n    mode: 'profile',\n    artist: { ...mockArtist, is_verified: true },\n    socialLinks: mockSocialLinks,\n    subtitle: 'Grammy Winner • Multi-Platinum Artist',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const UnverifiedArtist: Story = {\n  args: {\n    mode: 'profile',\n    artist: { ...mockArtist, is_verified: false, name: 'Rising Artist' },\n    socialLinks: mockSocialLinks.slice(0, 2), // No Venmo\n    subtitle: 'New Music Coming Soon',\n    showTipButton: false,\n    showBackButton: false,\n  },\n};\n\nexport const MinimalSocials: Story = {\n  args: {\n    mode: 'profile',\n    artist: mockArtist,\n    socialLinks: [mockSocialLinks[0]], // Only Instagram\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: false,\n  },\n};\n\nexport const NoSocials: Story = {\n  args: {\n    mode: 'profile',\n    artist: mockArtist,\n    socialLinks: [],\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: false,\n  },\n};\n\nexport const LongArtistName: Story = {\n  args: {\n    mode: 'profile',\n    artist: {\n      ...mockArtist,\n      name: 'Florence + The Machine',\n      tagline:\n        'British indie rock band known for powerful vocals and ethereal soundscapes.',\n    },\n    socialLinks: mockSocialLinks,\n    subtitle: 'Dance Fever World Tour 2024',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const ShortArtistName: Story = {\n  args: {\n    mode: 'profile',\n    artist: {\n      ...mockArtist,\n      name: 'Zedd',\n      tagline: 'German DJ and music producer.',\n    },\n    socialLinks: mockSocialLinks,\n    subtitle: 'Clarity Tour',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const InteractiveDemo: Story = {\n  render: function InteractiveDemoRender() {\n    const [mode, setMode] = React.useState<'profile' | 'listen' | 'tip'>(\n      'profile'\n    );\n\n    return (\n      <div>\n        <div className='fixed top-4 left-4 z-50 flex gap-2'>\n          <button\n            onClick={() => setMode('profile')}\n            className={`px-3 py-1 rounded text-sm ${\n              mode === 'profile'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 border'\n            }`}\n          >\n            Profile\n          </button>\n          <button\n            onClick={() => setMode('listen')}\n            className={`px-3 py-1 rounded text-sm ${\n              mode === 'listen'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 border'\n            }`}\n          >\n            Listen\n          </button>\n          <button\n            onClick={() => setMode('tip')}\n            className={`px-3 py-1 rounded text-sm ${\n              mode === 'tip'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 border'\n            }`}\n          >\n            Tip\n          </button>\n        </div>\n\n        <AnimatedArtistPage\n          mode={mode}\n          artist={mockArtist}\n          socialLinks={mockSocialLinks}\n          subtitle='Interactive Demo Mode'\n          showTipButton={mode === 'profile'}\n          showBackButton={mode !== 'profile'}\n        />\n      </div>\n    );\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/AnimatedArtistPage.stories.tsx" },
        "span": [5020, 5279],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport React from 'react';\nimport { Artist, LegacySocialLink } from '@/types/db';\nimport { AnimatedArtistPage } from './AnimatedArtistPage';\n\nconst meta: Meta<typeof AnimatedArtistPage> = {\n  title: 'Profile/AnimatedArtistPage',\n  component: AnimatedArtistPage,\n  parameters: {\n    layout: 'fullscreen',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    mode: {\n      control: { type: 'select' },\n      options: ['profile', 'listen', 'tip'],\n    },\n    showTipButton: {\n      control: { type: 'boolean' },\n    },\n    showBackButton: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst mockArtist: Artist = {\n  id: '1',\n  handle: 'taylorswift',\n  name: 'Taylor Swift',\n  image_url:\n    'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=400&fit=crop&crop=face',\n  tagline:\n    'Grammy Award-winning singer-songwriter known for narrative songs about her personal life.',\n  is_verified: true,\n  owner_user_id: '1',\n  spotify_id: '',\n  published: true,\n  is_featured: false,\n  created_at: new Date().toISOString(),\n  marketing_opt_out: false,\n};\n\nconst mockSocialLinks: LegacySocialLink[] = [\n  {\n    id: '1',\n    artist_id: '1',\n    platform: 'instagram',\n    url: 'https://instagram.com/taylorswift',\n    clicks: 0,\n    created_at: '',\n  },\n  {\n    id: '2',\n    artist_id: '1',\n    platform: 'twitter',\n    url: 'https://twitter.com/taylorswift13',\n    clicks: 0,\n    created_at: '',\n  },\n  {\n    id: '3',\n    artist_id: '1',\n    platform: 'venmo',\n    url: 'https://venmo.com/u/taylorswift',\n    clicks: 0,\n    created_at: '',\n  },\n];\n\nexport const ProfileMode: Story = {\n  args: {\n    mode: 'profile',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks,\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const ListenMode: Story = {\n  args: {\n    mode: 'listen',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks,\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: true,\n  },\n};\n\nexport const TipMode: Story = {\n  args: {\n    mode: 'tip',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks,\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: true,\n  },\n};\n\nexport const TipModeWithoutVenmo: Story = {\n  args: {\n    mode: 'tip',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks.filter(link => link.platform !== 'venmo'),\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: true,\n  },\n};\n\nexport const VerifiedArtist: Story = {\n  args: {\n    mode: 'profile',\n    artist: { ...mockArtist, is_verified: true },\n    socialLinks: mockSocialLinks,\n    subtitle: 'Grammy Winner • Multi-Platinum Artist',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const UnverifiedArtist: Story = {\n  args: {\n    mode: 'profile',\n    artist: { ...mockArtist, is_verified: false, name: 'Rising Artist' },\n    socialLinks: mockSocialLinks.slice(0, 2), // No Venmo\n    subtitle: 'New Music Coming Soon',\n    showTipButton: false,\n    showBackButton: false,\n  },\n};\n\nexport const MinimalSocials: Story = {\n  args: {\n    mode: 'profile',\n    artist: mockArtist,\n    socialLinks: [mockSocialLinks[0]], // Only Instagram\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: false,\n  },\n};\n\nexport const NoSocials: Story = {\n  args: {\n    mode: 'profile',\n    artist: mockArtist,\n    socialLinks: [],\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: false,\n  },\n};\n\nexport const LongArtistName: Story = {\n  args: {\n    mode: 'profile',\n    artist: {\n      ...mockArtist,\n      name: 'Florence + The Machine',\n      tagline:\n        'British indie rock band known for powerful vocals and ethereal soundscapes.',\n    },\n    socialLinks: mockSocialLinks,\n    subtitle: 'Dance Fever World Tour 2024',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const ShortArtistName: Story = {\n  args: {\n    mode: 'profile',\n    artist: {\n      ...mockArtist,\n      name: 'Zedd',\n      tagline: 'German DJ and music producer.',\n    },\n    socialLinks: mockSocialLinks,\n    subtitle: 'Clarity Tour',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const InteractiveDemo: Story = {\n  render: function InteractiveDemoRender() {\n    const [mode, setMode] = React.useState<'profile' | 'listen' | 'tip'>(\n      'profile'\n    );\n\n    return (\n      <div>\n        <div className='fixed top-4 left-4 z-50 flex gap-2'>\n          <button\n            onClick={() => setMode('profile')}\n            className={`px-3 py-1 rounded text-sm ${\n              mode === 'profile'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 border'\n            }`}\n          >\n            Profile\n          </button>\n          <button\n            onClick={() => setMode('listen')}\n            className={`px-3 py-1 rounded text-sm ${\n              mode === 'listen'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 border'\n            }`}\n          >\n            Listen\n          </button>\n          <button\n            onClick={() => setMode('tip')}\n            className={`px-3 py-1 rounded text-sm ${\n              mode === 'tip'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 border'\n            }`}\n          >\n            Tip\n          </button>\n        </div>\n\n        <AnimatedArtistPage\n          mode={mode}\n          artist={mockArtist}\n          socialLinks={mockSocialLinks}\n          subtitle='Interactive Demo Mode'\n          showTipButton={mode === 'profile'}\n          showBackButton={mode !== 'profile'}\n        />\n      </div>\n    );\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/AnimatedArtistPage.stories.tsx" },
        "span": [5329, 5582],
        "sourceCode": "import type { Meta, StoryObj } from '@storybook/nextjs-vite';\nimport React from 'react';\nimport { Artist, LegacySocialLink } from '@/types/db';\nimport { AnimatedArtistPage } from './AnimatedArtistPage';\n\nconst meta: Meta<typeof AnimatedArtistPage> = {\n  title: 'Profile/AnimatedArtistPage',\n  component: AnimatedArtistPage,\n  parameters: {\n    layout: 'fullscreen',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    mode: {\n      control: { type: 'select' },\n      options: ['profile', 'listen', 'tip'],\n    },\n    showTipButton: {\n      control: { type: 'boolean' },\n    },\n    showBackButton: {\n      control: { type: 'boolean' },\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst mockArtist: Artist = {\n  id: '1',\n  handle: 'taylorswift',\n  name: 'Taylor Swift',\n  image_url:\n    'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=400&fit=crop&crop=face',\n  tagline:\n    'Grammy Award-winning singer-songwriter known for narrative songs about her personal life.',\n  is_verified: true,\n  owner_user_id: '1',\n  spotify_id: '',\n  published: true,\n  is_featured: false,\n  created_at: new Date().toISOString(),\n  marketing_opt_out: false,\n};\n\nconst mockSocialLinks: LegacySocialLink[] = [\n  {\n    id: '1',\n    artist_id: '1',\n    platform: 'instagram',\n    url: 'https://instagram.com/taylorswift',\n    clicks: 0,\n    created_at: '',\n  },\n  {\n    id: '2',\n    artist_id: '1',\n    platform: 'twitter',\n    url: 'https://twitter.com/taylorswift13',\n    clicks: 0,\n    created_at: '',\n  },\n  {\n    id: '3',\n    artist_id: '1',\n    platform: 'venmo',\n    url: 'https://venmo.com/u/taylorswift',\n    clicks: 0,\n    created_at: '',\n  },\n];\n\nexport const ProfileMode: Story = {\n  args: {\n    mode: 'profile',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks,\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const ListenMode: Story = {\n  args: {\n    mode: 'listen',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks,\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: true,\n  },\n};\n\nexport const TipMode: Story = {\n  args: {\n    mode: 'tip',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks,\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: true,\n  },\n};\n\nexport const TipModeWithoutVenmo: Story = {\n  args: {\n    mode: 'tip',\n    artist: mockArtist,\n    socialLinks: mockSocialLinks.filter(link => link.platform !== 'venmo'),\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: true,\n  },\n};\n\nexport const VerifiedArtist: Story = {\n  args: {\n    mode: 'profile',\n    artist: { ...mockArtist, is_verified: true },\n    socialLinks: mockSocialLinks,\n    subtitle: 'Grammy Winner • Multi-Platinum Artist',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const UnverifiedArtist: Story = {\n  args: {\n    mode: 'profile',\n    artist: { ...mockArtist, is_verified: false, name: 'Rising Artist' },\n    socialLinks: mockSocialLinks.slice(0, 2), // No Venmo\n    subtitle: 'New Music Coming Soon',\n    showTipButton: false,\n    showBackButton: false,\n  },\n};\n\nexport const MinimalSocials: Story = {\n  args: {\n    mode: 'profile',\n    artist: mockArtist,\n    socialLinks: [mockSocialLinks[0]], // Only Instagram\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: false,\n  },\n};\n\nexport const NoSocials: Story = {\n  args: {\n    mode: 'profile',\n    artist: mockArtist,\n    socialLinks: [],\n    subtitle: 'The Eras Tour • Live from London',\n    showTipButton: false,\n    showBackButton: false,\n  },\n};\n\nexport const LongArtistName: Story = {\n  args: {\n    mode: 'profile',\n    artist: {\n      ...mockArtist,\n      name: 'Florence + The Machine',\n      tagline:\n        'British indie rock band known for powerful vocals and ethereal soundscapes.',\n    },\n    socialLinks: mockSocialLinks,\n    subtitle: 'Dance Fever World Tour 2024',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const ShortArtistName: Story = {\n  args: {\n    mode: 'profile',\n    artist: {\n      ...mockArtist,\n      name: 'Zedd',\n      tagline: 'German DJ and music producer.',\n    },\n    socialLinks: mockSocialLinks,\n    subtitle: 'Clarity Tour',\n    showTipButton: true,\n    showBackButton: false,\n  },\n};\n\nexport const InteractiveDemo: Story = {\n  render: function InteractiveDemoRender() {\n    const [mode, setMode] = React.useState<'profile' | 'listen' | 'tip'>(\n      'profile'\n    );\n\n    return (\n      <div>\n        <div className='fixed top-4 left-4 z-50 flex gap-2'>\n          <button\n            onClick={() => setMode('profile')}\n            className={`px-3 py-1 rounded text-sm ${\n              mode === 'profile'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 border'\n            }`}\n          >\n            Profile\n          </button>\n          <button\n            onClick={() => setMode('listen')}\n            className={`px-3 py-1 rounded text-sm ${\n              mode === 'listen'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 border'\n            }`}\n          >\n            Listen\n          </button>\n          <button\n            onClick={() => setMode('tip')}\n            className={`px-3 py-1 rounded text-sm ${\n              mode === 'tip'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 border'\n            }`}\n          >\n            Tip\n          </button>\n        </div>\n\n        <AnimatedArtistPage\n          mode={mode}\n          artist={mockArtist}\n          socialLinks={mockSocialLinks}\n          subtitle='Interactive Demo Mode'\n          showTipButton={mode === 'profile'}\n          showBackButton={mode !== 'profile'}\n        />\n      </div>\n    );\n  },\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<main>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<main>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/AnimatedArtistPage.tsx" },
        "span": [3981, 3992],
        "sourceCode": "'use client';\n\nimport { AnimatePresence, motion, type Variants } from 'framer-motion';\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/navigation';\nimport { useState } from 'react';\nimport { ArtistNotificationsCTA } from '@/components/profile/ArtistNotificationsCTA';\nimport { ArtistPageShell } from '@/components/profile/ArtistPageShell';\nimport { STATSIG_FLAGS } from '@/lib/flags';\nimport { useFeatureGate } from '@/lib/flags/client';\nimport { useReducedMotion } from '@/lib/hooks/useReducedMotion';\nimport type { PublicContact } from '@/types/contacts';\nimport { Artist, LegacySocialLink } from '@/types/db';\n\n// Lazily load heavy profile sub-components to keep initial bundle lean\nconst AnimatedListenInterface = dynamic(\n  () =>\n    import('@/components/profile/AnimatedListenInterface').then(mod => ({\n      default: mod.AnimatedListenInterface,\n    })),\n  { ssr: false }\n);\n\nconst VenmoTipSelector = dynamic(\n  () => import('@/components/profile/VenmoTipSelector'),\n  { ssr: false }\n);\n\ninterface AnimatedArtistPageProps {\n  mode: string;\n  artist: Artist;\n  socialLinks: LegacySocialLink[];\n  contacts: PublicContact[];\n  subtitle: string;\n  showTipButton: boolean;\n  showBackButton: boolean;\n  enableDynamicEngagement?: boolean;\n}\n\nfunction renderContent(\n  mode: string,\n  artist: Artist,\n  socialLinks: LegacySocialLink[],\n  router: ReturnType<typeof useRouter>,\n  isNavigating: boolean,\n  prefersReducedMotion: boolean,\n  setIsNavigating: (value: boolean) => void,\n  tippingEnabled: boolean,\n  enableDynamicEngagement: boolean\n) {\n  switch (mode) {\n    case 'listen':\n      return (\n        <div className='flex justify-center'>\n          <AnimatedListenInterface\n            artist={artist}\n            handle={artist.handle}\n            enableDynamicEngagement={enableDynamicEngagement}\n          />\n        </div>\n      );\n\n    case 'tip':\n      if (!tippingEnabled) {\n        return (\n          <motion.div\n            initial={\n              prefersReducedMotion ? { opacity: 1 } : { opacity: 0, y: 20 }\n            }\n            animate={\n              prefersReducedMotion ? { opacity: 1 } : { opacity: 1, y: 0 }\n            }\n            transition={\n              prefersReducedMotion ? { duration: 0 } : { duration: 0.6 }\n            }\n          >\n            <div className='space-y-4 text-center'>\n              <div className='bg-surface-0 backdrop-blur-lg border border-subtle rounded-2xl p-8 shadow-xl'>\n                <p className='text-secondary-token' role='alert'>\n                  Tipping is not available yet. We&apos;re focused on getting\n                  the core Jovie profile experience right before launching\n                  tipping.\n                </p>\n              </div>\n            </div>\n          </motion.div>\n        );\n      }\n\n      // Extract Venmo link from social links\n      const venmoLink =\n        socialLinks.find(l => l.platform === 'venmo')?.url || null;\n      const extractVenmoUsername = (url: string | null): string | null => {\n        if (!url) return null;\n        try {\n          const u = new URL(url);\n          const allowedVenmoHosts = ['venmo.com', 'www.venmo.com'];\n          if (allowedVenmoHosts.includes(u.hostname)) {\n            const parts = u.pathname.split('/').filter(Boolean);\n            if (parts[0] === 'u' && parts[1]) return parts[1];\n            if (parts[0]) return parts[0];\n          }\n          return null;\n        } catch {\n          return null;\n        }\n      };\n\n      const venmoUsername = extractVenmoUsername(venmoLink);\n      const AMOUNTS = [3, 5, 7];\n\n      return (\n        <motion.div\n          initial={\n            prefersReducedMotion ? { opacity: 1 } : { opacity: 0, y: 20 }\n          }\n          animate={prefersReducedMotion ? { opacity: 1 } : { opacity: 1, y: 0 }}\n          transition={\n            prefersReducedMotion ? { duration: 0 } : { duration: 0.6 }\n          }\n        >\n          <div\n            className='space-y-4'\n            role='main'\n            aria-labelledby='tipping-title'\n          >\n            <h1 id='tipping-title' className='sr-only'>\n              Tip {artist.name}\n            </h1>\n\n            {venmoLink ? (\n              <VenmoTipSelector\n                venmoLink={venmoLink}\n                venmoUsername={venmoUsername ?? undefined}\n                amounts={AMOUNTS}\n                className='w-full max-w-sm'\n              />\n            ) : (\n              <div className='text-center'>\n                <div className='bg-surface-0 backdrop-blur-lg border border-subtle rounded-2xl p-8 shadow-xl'>\n                  <p className='text-secondary-token' role='alert'>\n                    Venmo tipping is not available for this artist yet.\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n        </motion.div>\n      );\n\n    default: // 'profile' mode\n      return (\n        <motion.div\n          initial={\n            prefersReducedMotion ? { opacity: 1 } : { opacity: 0, y: 20 }\n          }\n          animate={prefersReducedMotion ? { opacity: 1 } : { opacity: 1, y: 0 }}\n          transition={\n            prefersReducedMotion ? { duration: 0 } : { duration: 0.6 }\n          }\n        >\n          <div className='space-y-4'>\n            <ArtistNotificationsCTA artist={artist} variant='button' />\n          </div>\n        </motion.div>\n      );\n  }\n}\n\nexport function AnimatedArtistPage({\n  mode,\n  artist,\n  socialLinks,\n  contacts,\n  subtitle,\n  showTipButton,\n  showBackButton,\n  enableDynamicEngagement = false,\n}: AnimatedArtistPageProps) {\n  const router = useRouter();\n  const [isNavigating, setIsNavigating] = useState(false);\n  const prefersReducedMotion = useReducedMotion();\n  const tippingGate = useFeatureGate(STATSIG_FLAGS.TIPPING);\n\n  const tippingEnabled = tippingGate.value;\n\n  // Page-level animation variants with Apple-style easing\n  const pageVariants: Variants = {\n    initial: {\n      opacity: 0,\n      scale: 0.98,\n      y: 10,\n      filter: 'blur(4px)',\n    },\n    animate: {\n      opacity: 1,\n      scale: 1,\n      y: 0,\n      filter: 'blur(0px)',\n      transition: {\n        duration: 0.5,\n        ease: [0.16, 1, 0.3, 1], // Apple's signature easing curve\n        staggerChildren: 0.1,\n      },\n    },\n    exit: {\n      opacity: 0,\n      scale: 1.02,\n      y: -10,\n      filter: 'blur(2px)',\n      transition: {\n        duration: 0.3,\n        ease: [0.4, 0, 1, 1],\n      },\n    },\n  };\n\n  return (\n    <div className='w-full'>\n      <ArtistPageShell\n        artist={artist}\n        socialLinks={socialLinks}\n        contacts={contacts}\n        subtitle={subtitle}\n        showTipButton={showTipButton && tippingEnabled}\n        showBackButton={showBackButton}\n      >\n        {/* Content pane with AnimatePresence for mode transitions */}\n        <div\n          className='content-pane'\n          style={{\n            contain: 'layout paint',\n            willChange: 'transform',\n            minHeight: '150px', // Reserve space for content to prevent layout shifts\n          }}\n        >\n          <AnimatePresence mode='wait'>\n            <motion.div\n              key={mode} // Keep key only on the content that should change\n              variants={prefersReducedMotion ? undefined : pageVariants}\n              initial={prefersReducedMotion ? { opacity: 1 } : 'initial'}\n              animate={prefersReducedMotion ? { opacity: 1 } : 'animate'}\n              exit={prefersReducedMotion ? { opacity: 0 } : 'exit'}\n              className='w-full'\n            >\n              {renderContent(\n                mode,\n                artist,\n                socialLinks,\n                router,\n                isNavigating,\n                prefersReducedMotion,\n                setIsNavigating,\n                tippingEnabled,\n                enableDynamicEngagement\n              )}\n            </motion.div>\n          </AnimatePresence>\n        </div>\n      </ArtistPageShell>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/ArtistThemeToggle.tsx" },
        "span": [966, 1184],
        "sourceCode": "'use client';\n\nimport { Button, Tooltip, TooltipContent, TooltipTrigger } from '@jovie/ui';\nimport { useArtistTheme } from './ArtistThemeProvider';\n\nexport function ArtistThemeToggle() {\n  const { theme, setTheme, resolvedTheme } = useArtistTheme();\n\n  const handleToggle = () => {\n    if (theme === 'auto') {\n      // If currently auto, switch to the opposite of current resolved theme\n      setTheme(resolvedTheme === 'light' ? 'dark' : 'light');\n    } else {\n      // If currently set to a specific theme, switch to the opposite\n      setTheme(theme === 'light' ? 'dark' : 'light');\n    }\n  };\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <Button\n          variant='ghost'\n          size='sm'\n          onClick={handleToggle}\n          className='h-8 w-8 px-0 rounded-full bg-surface-1 hover:bg-surface-2 transition-colors'\n        >\n          <span className='sr-only'>Toggle theme</span>\n          {resolvedTheme === 'light' ? (\n            <svg\n              className='h-5 w-5 text-secondary-token'\n              fill='none'\n              stroke='currentColor'\n              viewBox='0 0 24 24'\n              xmlns='http://www.w3.org/2000/svg'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'\n              />\n            </svg>\n          ) : (\n            <svg\n              className='h-5 w-5 text-secondary-token'\n              fill='none'\n              stroke='currentColor'\n              viewBox='0 0 24 24'\n              xmlns='http://www.w3.org/2000/svg'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z'\n              />\n            </svg>\n          )}\n        </Button>\n      </TooltipTrigger>\n      <TooltipContent side='right'>\n        {`Switch to ${resolvedTheme === 'light' ? 'dark' : 'light'} mode`}\n      </TooltipContent>\n    </Tooltip>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/ArtistThemeToggle.tsx" },
        "span": [1484, 1702],
        "sourceCode": "'use client';\n\nimport { Button, Tooltip, TooltipContent, TooltipTrigger } from '@jovie/ui';\nimport { useArtistTheme } from './ArtistThemeProvider';\n\nexport function ArtistThemeToggle() {\n  const { theme, setTheme, resolvedTheme } = useArtistTheme();\n\n  const handleToggle = () => {\n    if (theme === 'auto') {\n      // If currently auto, switch to the opposite of current resolved theme\n      setTheme(resolvedTheme === 'light' ? 'dark' : 'light');\n    } else {\n      // If currently set to a specific theme, switch to the opposite\n      setTheme(theme === 'light' ? 'dark' : 'light');\n    }\n  };\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <Button\n          variant='ghost'\n          size='sm'\n          onClick={handleToggle}\n          className='h-8 w-8 px-0 rounded-full bg-surface-1 hover:bg-surface-2 transition-colors'\n        >\n          <span className='sr-only'>Toggle theme</span>\n          {resolvedTheme === 'light' ? (\n            <svg\n              className='h-5 w-5 text-secondary-token'\n              fill='none'\n              stroke='currentColor'\n              viewBox='0 0 24 24'\n              xmlns='http://www.w3.org/2000/svg'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'\n              />\n            </svg>\n          ) : (\n            <svg\n              className='h-5 w-5 text-secondary-token'\n              fill='none'\n              stroke='currentColor'\n              viewBox='0 0 24 24'\n              xmlns='http://www.w3.org/2000/svg'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z'\n              />\n            </svg>\n          )}\n        </Button>\n      </TooltipTrigger>\n      <TooltipContent side='right'>\n        {`Switch to ${resolvedTheme === 'light' ? 'dark' : 'light'} mode`}\n      </TooltipContent>\n    </Tooltip>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<header>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<header>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/ClaimBanner.tsx" },
        "span": [1670, 1683],
        "sourceCode": "'use client';\n\nimport { useUser } from '@clerk/nextjs';\nimport { ArrowRight, Sparkles } from 'lucide-react';\nimport Link from 'next/link';\nimport { useCallback } from 'react';\n\nexport interface ClaimBannerProps {\n  /** The claim token for this profile */\n  claimToken: string;\n  /** The profile handle/username */\n  profileHandle: string;\n  /** Optional: Override the display name shown in the banner */\n  displayName?: string;\n}\n\n/**\n * ClaimBanner displays a prominent banner on unclaimed profiles,\n * allowing the rightful owner to claim their profile.\n *\n * Behavior:\n * - If user is signed in: links directly to /claim/{token}\n * - If user is signed out: links to /signup with redirect_url to /claim/{token}\n */\nexport function ClaimBanner({\n  claimToken,\n  profileHandle,\n  displayName,\n}: ClaimBannerProps) {\n  const { isSignedIn, isLoaded } = useUser();\n\n  const claimPath = `/claim/${encodeURIComponent(claimToken)}`;\n\n  // Build the appropriate URL based on auth state\n  const getClaimUrl = useCallback(() => {\n    if (!isLoaded) {\n      // While loading, default to signup flow (safer)\n      return `/signup?redirect_url=${encodeURIComponent(claimPath)}`;\n    }\n\n    if (isSignedIn) {\n      // Signed in users go directly to claim\n      return claimPath;\n    }\n\n    // Signed out users go through signup with redirect\n    return `/signup?redirect_url=${encodeURIComponent(claimPath)}`;\n  }, [isLoaded, isSignedIn, claimPath]);\n\n  const name = displayName || profileHandle;\n\n  return (\n    <div\n      className='relative w-full overflow-hidden bg-linear-to-r from-indigo-700 via-purple-700 to-fuchsia-600 text-white shadow-[0_8px_30px_rgba(0,0,0,0.28)]'\n      role='banner'\n      aria-label='Claim profile banner'\n      data-testid='claim-banner'\n    >\n      <div\n        className='absolute inset-0 bg-gradient-radial from-white/12 via-white/6 to-transparent opacity-70'\n        aria-hidden\n      />\n      <div className='relative max-w-4xl mx-auto px-4 py-2 sm:py-3'>\n        <div className='flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-3'>\n          {/* Banner text */}\n          <div className='flex items-center gap-2 text-center sm:text-left max-w-xs sm:max-w-sm'>\n            <Sparkles\n              className='h-4 w-4 shrink-0 hidden sm:block'\n              aria-hidden='true'\n            />\n            <p className='text-xs sm:text-sm font-semibold leading-tight tracking-tight'>\n              <span className='sm:hidden'>Your profile? Claim {name}</span>\n              <span className='hidden sm:inline'>\n                Is this your profile? Claim {name}\n              </span>\n            </p>\n          </div>\n\n          {/* CTA Button */}\n          <Link\n            href={getClaimUrl()}\n            className='inline-flex items-center gap-2 px-3.5 py-1.5 rounded-full bg-white text-slate-900 font-semibold text-xs sm:text-sm shadow-sm ring-1 ring-white/70 hover:bg-white/90 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-indigo-700'\n            data-testid='claim-banner-cta'\n            aria-label={`Claim profile for ${name}`}\n          >\n            Claim Profile\n            <ArrowRight\n              className='h-3.5 w-3.5 sm:h-4 sm:w-4'\n              aria-hidden='true'\n            />\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/DesktopQrOverlay.tsx" },
        "span": [5354, 5526],
        "sourceCode": "'use client';\n\nimport { DevicePhoneMobileIcon, XMarkIcon } from '@heroicons/react/24/outline';\nimport { motion } from 'framer-motion';\nimport { useEffect, useState } from 'react';\nimport { QRCode } from '@/components/atoms/QRCode';\nimport { useReducedMotion } from '@/lib/hooks/useReducedMotion';\n\ninterface DesktopQrOverlayProps {\n  handle: string;\n}\n\nexport function DesktopQrOverlay({ handle }: DesktopQrOverlayProps) {\n  const [mode, setMode] = useState<'hidden' | 'icon' | 'open'>('hidden');\n  const [dismissed, setDismissed] = useState(false);\n  const [url, setUrl] = useState('');\n  const prefersReducedMotion = useReducedMotion();\n\n  useEffect(() => {\n    const onOpen = () => {\n      const isMdUp = window.matchMedia('(min-width: 768px)').matches;\n      if (!isMdUp) return;\n      setDismissed(false);\n      setMode('open');\n      setUrl(`${window.location.origin}/${handle}`);\n    };\n\n    window.addEventListener('jovie:open-profile-qr', onOpen);\n    return () => {\n      window.removeEventListener('jovie:open-profile-qr', onOpen);\n    };\n  }, [handle]);\n\n  useEffect(() => {\n    const isMdUp = window.matchMedia('(min-width: 768px)').matches;\n    const isLgUp = window.matchMedia('(min-width: 1024px)').matches;\n    const hasDismissed =\n      localStorage.getItem('viewOnMobileDismissed') === 'true';\n\n    setDismissed(hasDismissed);\n\n    if (!isMdUp) {\n      setMode('hidden');\n      setUrl('');\n      return;\n    }\n\n    if (isLgUp && !hasDismissed) {\n      setMode('open');\n      setUrl(`${window.location.origin}/${handle}`);\n      return;\n    }\n\n    setMode('icon');\n    setUrl('');\n  }, [handle]);\n\n  // React to viewport resizes: show on desktop if not dismissed, hide on mobile\n  useEffect(() => {\n    const mqlMd = window.matchMedia('(min-width: 768px)');\n    const mqlLg = window.matchMedia('(min-width: 1024px)');\n\n    const onChange = (e: MediaQueryListEvent | MediaQueryList) => {\n      void e;\n      const isMdUp = mqlMd.matches;\n      const isLgUp = mqlLg.matches;\n\n      if (!isMdUp) {\n        setMode('hidden');\n        setUrl('');\n        return;\n      }\n\n      if (isLgUp && !dismissed) {\n        setMode('open');\n        setUrl(`${window.location.origin}/${handle}`);\n        return;\n      }\n\n      setMode('icon');\n      setUrl('');\n    };\n\n    // Initial sync in case state drifted\n    onChange(mqlMd);\n\n    // Add listener with both modern and legacy APIs (feature detection)\n    type LegacyMQL = MediaQueryList & {\n      addListener?: (\n        listener: (this: MediaQueryList, ev: MediaQueryListEvent) => void\n      ) => void;\n      removeListener?: (\n        listener: (this: MediaQueryList, ev: MediaQueryListEvent) => void\n      ) => void;\n    };\n    const legacyMqlMd = mqlMd as LegacyMQL;\n    const legacyMqlLg = mqlLg as LegacyMQL;\n\n    if (typeof mqlMd.addEventListener === 'function') {\n      mqlMd.addEventListener('change', onChange as EventListener);\n      mqlLg.addEventListener('change', onChange as EventListener);\n    } else if (typeof legacyMqlMd.addListener === 'function') {\n      legacyMqlMd.addListener(\n        onChange as (this: MediaQueryList, ev: MediaQueryListEvent) => void\n      );\n      legacyMqlLg.addListener(\n        onChange as (this: MediaQueryList, ev: MediaQueryListEvent) => void\n      );\n    }\n\n    return () => {\n      if (typeof mqlMd.removeEventListener === 'function') {\n        mqlMd.removeEventListener('change', onChange as EventListener);\n        mqlLg.removeEventListener('change', onChange as EventListener);\n      } else if (typeof legacyMqlMd.removeListener === 'function') {\n        legacyMqlMd.removeListener(\n          onChange as (this: MediaQueryList, ev: MediaQueryListEvent) => void\n        );\n        legacyMqlLg.removeListener(\n          onChange as (this: MediaQueryList, ev: MediaQueryListEvent) => void\n        );\n      }\n    };\n  }, [dismissed, handle]);\n\n  const close = () => {\n    // Clear URL first so the <img> disappears immediately, even during exit animation\n    setUrl('');\n    setMode('icon');\n    setDismissed(true);\n    localStorage.setItem('viewOnMobileDismissed', 'true');\n  };\n\n  const reopen = () => {\n    setMode('open');\n    try {\n      setUrl(`${window.location.origin}/${handle}`);\n    } catch (error) {\n      console.error('[DesktopQrOverlay] Failed to set URL:', error);\n    }\n  };\n\n  if (mode === 'hidden') return null;\n\n  return (\n    <>\n      {mode === 'open' && (\n        <motion.div\n          key='qr'\n          initial={\n            prefersReducedMotion\n              ? { opacity: 1 }\n              : { opacity: 0, y: 16, scale: 0.98 }\n          }\n          animate={\n            prefersReducedMotion\n              ? { opacity: 1 }\n              : { opacity: 1, y: 0, scale: 1 }\n          }\n          transition={\n            prefersReducedMotion\n              ? { duration: 0 }\n              : { duration: 0.2, ease: 'easeOut' }\n          }\n          className='group fixed bottom-4 right-4 z-50 flex flex-col items-center rounded-xl p-4 ring-1 ring-(--color-border-subtle) shadow-xl bg-surface-0 backdrop-blur-md overflow-hidden'\n        >\n          <div className='pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-300 group-hover:opacity-100'>\n            <div className='absolute inset-0 bg-[radial-gradient(80%_60%_at_50%_0%,rgba(255,255,255,0.35),transparent_60%)]' />\n          </div>\n          <button\n            onClick={close}\n            aria-label='Close'\n            className='absolute top-1 right-1 text-tertiary-token hover:text-secondary-token'\n          >\n            <XMarkIcon className='h-4 w-4' />\n          </button>\n          {url && (\n            <QRCode data={url} size={120} label='Scan to view on mobile' />\n          )}\n          <p className='mt-2 text-xs text-secondary-token'>View on mobile</p>\n        </motion.div>\n      )}\n\n      {mode === 'icon' && (\n        <motion.button\n          key='reopen'\n          initial={\n            prefersReducedMotion ? { opacity: 1 } : { opacity: 0, y: 12 }\n          }\n          animate={prefersReducedMotion ? { opacity: 1 } : { opacity: 1, y: 0 }}\n          transition={\n            prefersReducedMotion\n              ? { duration: 0 }\n              : { duration: 0.2, ease: 'easeOut' }\n          }\n          onClick={reopen}\n          aria-label='View on mobile'\n          className='group fixed bottom-4 right-4 z-50 p-2 rounded-full bg-surface-0 backdrop-blur-md ring-1 ring-(--color-border-subtle) shadow-md hover:shadow-lg transition'\n        >\n          <span className='pointer-events-none absolute inset-0 rounded-full opacity-0 transition-opacity duration-300 group-hover:opacity-100 bg-[radial-gradient(80%_60%_at_50%_0%,rgba(255,255,255,0.35),transparent_60%)]' />\n          <DevicePhoneMobileIcon className='relative h-5 w-5 text-primary-token' />\n        </motion.button>\n      )}\n    </>\n  );\n}\n\nexport default DesktopQrOverlay;\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/ProfileSkeleton.tsx" },
        "span": [449, 462],
        "sourceCode": "import { BackgroundPattern } from '@/components/atoms/BackgroundPattern';\nimport {\n  ButtonSkeleton,\n  ProfileSkeleton as ProfileHeaderSkeleton,\n  SocialBarSkeleton,\n} from '@/components/molecules/LoadingSkeleton';\nimport { Container } from '@/components/site/Container';\n\nexport function ProfileSkeleton() {\n  return (\n    <div\n      className='min-h-screen bg-base text-primary-token transition-colors duration-200 relative overflow-hidden'\n      role='status'\n      aria-busy='true'\n      aria-label='Loading Jovie profile'\n    >\n      <BackgroundPattern variant='gradient' />\n      <div className='absolute top-1/4 left-1/4 w-96 h-96 bg-linear-to-r from-blue-400/10 to-purple-400/10 dark:from-blue-400/20 dark:to-purple-400/20 rounded-full blur-3xl opacity-50' />\n      <div className='absolute bottom-1/4 right-1/4 w-96 h-96 bg-linear-to-r from-purple-400/10 to-cyan-400/10 dark:from-purple-400/20 dark:to-cyan-400/20 rounded-full blur-3xl opacity-50' />\n      <Container>\n        {/* Top chrome placeholders to prevent layout shift */}\n        <div className='absolute top-4 left-4 z-10'>\n          <div\n            className='h-8 w-8 rounded-full skeleton motion-reduce:animate-none'\n            aria-hidden='true'\n          />\n        </div>\n        <div className='absolute top-4 right-4 z-10'>\n          <div\n            className='h-8 w-8 rounded-full skeleton motion-reduce:animate-none'\n            aria-hidden='true'\n          />\n        </div>\n        <div className='flex min-h-screen flex-col py-12 relative z-10'>\n          <div className='flex-1 flex flex-col items-center justify-start px-4'>\n            <div className='w-full max-w-md space-y-8'>\n              {/* Profile Shell Skeleton */}\n              <div className='flex flex-col items-center space-y-3 sm:space-y-4 text-center'>\n                {/* Avatar */}\n                {/* Name */}\n                {/* Bio */}\n                <ProfileHeaderSkeleton />\n              </div>\n              <div className='space-y-4 w-full'>\n                {/* Action Buttons */}\n                {/* Listen Now Button */}\n                <ButtonSkeleton />\n                {/* Optional Tip Button */}\n                <ButtonSkeleton />\n              </div>\n              <div className='flex justify-between items-center'>\n                <div className='flex-1 flex justify-start'>\n                  <SocialBarSkeleton />\n                </div>\n                <div className='shrink-0 w-32'>\n                  <ButtonSkeleton />\n                </div>\n              </div>\n              <div className='flex justify-center pt-4'>\n                <div className='h-4 w-40 rounded-full skeleton motion-reduce:animate-none' />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Container>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<main>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<main>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/StaticArtistPage.tsx" },
        "span": [4204, 4215],
        "sourceCode": "import { ArtistNotificationsCTA } from '@/components/profile/ArtistNotificationsCTA';\nimport { ArtistPageShell } from '@/components/profile/ArtistPageShell';\nimport { ProfilePrimaryCTA } from '@/components/profile/ProfilePrimaryCTA';\nimport { StaticListenInterface } from '@/components/profile/StaticListenInterface';\nimport VenmoTipSelector from '@/components/profile/VenmoTipSelector';\nimport { type AvailableDSP, DSP_CONFIGS, getAvailableDSPs } from '@/lib/dsp';\nimport type { PublicContact } from '@/types/contacts';\nimport { Artist, LegacySocialLink } from '@/types/db';\n\ntype PrimaryAction = 'subscribe' | 'listen';\n\ninterface StaticArtistPageProps {\n  mode: string;\n  artist: Artist;\n  socialLinks: LegacySocialLink[];\n  contacts: PublicContact[];\n  subtitle: string;\n  showTipButton: boolean;\n  showBackButton: boolean;\n  showFooter?: boolean;\n  autoOpenCapture?: boolean;\n  primaryAction?: PrimaryAction;\n  spotifyPreferred?: boolean;\n  enableDynamicEngagement?: boolean;\n}\n\nfunction renderContent(\n  mode: string,\n  artist: Artist,\n  socialLinks: LegacySocialLink[],\n  primaryAction: PrimaryAction,\n  spotifyPreferred: boolean,\n  enableDynamicEngagement: boolean\n) {\n  const mapSocialPlatformToDSPKey = (platform: string): string | null => {\n    const normalized = platform.toLowerCase().replace(/[^a-z0-9]/g, '');\n    if (normalized.includes('spotify')) return 'spotify';\n    if (normalized.includes('applemusic') || normalized === 'itunes')\n      return 'apple_music';\n    if (normalized.includes('youtube')) return 'youtube';\n    if (normalized.includes('soundcloud')) return 'soundcloud';\n    if (normalized.includes('bandcamp')) return 'bandcamp';\n    if (normalized.includes('tidal')) return 'tidal';\n    if (normalized.includes('deezer')) return 'deezer';\n    if (normalized.includes('amazonmusic')) return 'amazon_music';\n    if (normalized.includes('pandora')) return 'pandora';\n    return null;\n  };\n\n  const socialDSPs: AvailableDSP[] = (() => {\n    const mapped = socialLinks\n      .filter(link => link.url)\n      .map(link => {\n        const dspKey = mapSocialPlatformToDSPKey(link.platform);\n        if (!dspKey) return null;\n        const config = DSP_CONFIGS[dspKey] ?? {\n          name: dspKey,\n          color: '#0f111a',\n          textColor: '#ffffff',\n          logoSvg: '',\n        };\n        return {\n          key: dspKey,\n          name: config.name,\n          url: link.url,\n          config,\n        } satisfies AvailableDSP;\n      })\n      .filter(Boolean) as AvailableDSP[];\n\n    const deduped = new Map<string, AvailableDSP>();\n    mapped.forEach(item => {\n      if (!deduped.has(item.key)) {\n        deduped.set(item.key, item);\n      }\n    });\n    return Array.from(deduped.values());\n  })();\n\n  const artistDSPs = getAvailableDSPs(artist);\n  const mergedDSPs = (() => {\n    const byKey = new Map<string, AvailableDSP>();\n    [...artistDSPs, ...socialDSPs].forEach(dsp => {\n      if (!byKey.has(dsp.key)) byKey.set(dsp.key, dsp);\n    });\n    return Array.from(byKey.values());\n  })();\n\n  switch (mode) {\n    case 'listen':\n      return (\n        <div className='flex justify-center'>\n          <StaticListenInterface\n            artist={artist}\n            handle={artist.handle}\n            dspsOverride={mergedDSPs}\n            enableDynamicEngagement={enableDynamicEngagement}\n          />\n        </div>\n      );\n\n    case 'tip':\n      // Extract Venmo link from social links\n      const venmoLink =\n        socialLinks.find(l => l.platform === 'venmo')?.url || null;\n      const extractVenmoUsername = (url: string | null): string | null => {\n        if (!url) return null;\n        try {\n          const u = new URL(url);\n          const allowedVenmoHosts = ['venmo.com', 'www.venmo.com'];\n          if (allowedVenmoHosts.includes(u.hostname)) {\n            const parts = u.pathname.split('/').filter(Boolean);\n            if (parts[0] === 'u' && parts[1]) return parts[1];\n            if (parts[0]) return parts[0];\n          }\n          return null;\n        } catch {\n          return null;\n        }\n      };\n\n      const venmoUsername = extractVenmoUsername(venmoLink);\n      const AMOUNTS = [3, 5, 7];\n\n      return (\n        <div className='space-y-4' role='main' aria-labelledby='tipping-title'>\n          <h1 id='tipping-title' className='sr-only'>\n            Tip {artist.name}\n          </h1>\n\n          {venmoLink ? (\n            <VenmoTipSelector\n              venmoLink={venmoLink}\n              venmoUsername={venmoUsername ?? undefined}\n              amounts={AMOUNTS}\n            />\n          ) : (\n            <div className='text-center'>\n              <div className='bg-surface-0 backdrop-blur-lg border border-subtle rounded-2xl p-8 shadow-xl'>\n                <p className='text-secondary-token' role='alert'>\n                  Venmo tipping is not available for this artist yet.\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      );\n\n    case 'subscribe':\n      // Subscribe mode - show notification subscription form directly\n      return (\n        <div className='space-y-4 py-4 sm:py-5'>\n          <ArtistNotificationsCTA artist={artist} variant='button' autoOpen />\n        </div>\n      );\n\n    default: // 'profile' mode\n      return (\n        <div className='space-y-4'>\n          <ProfilePrimaryCTA\n            artist={artist}\n            socialLinks={socialLinks}\n            spotifyPreferred={spotifyPreferred}\n          />\n        </div>\n      );\n  }\n}\n\n// Static version without animations for immediate rendering\nexport function StaticArtistPage({\n  mode,\n  artist,\n  socialLinks,\n  contacts,\n  subtitle,\n  showTipButton,\n  showBackButton,\n  showFooter = true,\n  autoOpenCapture,\n  primaryAction = 'subscribe',\n  spotifyPreferred = false,\n  enableDynamicEngagement = false,\n}: StaticArtistPageProps) {\n  const isPublicProfileMode = mode === 'profile';\n  const resolvedAutoOpenCapture = autoOpenCapture ?? mode === 'profile';\n\n  return (\n    <div className='w-full'>\n      <ArtistPageShell\n        artist={artist}\n        socialLinks={socialLinks}\n        contacts={contacts}\n        subtitle={subtitle}\n        showSocialBar={isPublicProfileMode ? false : mode !== 'listen'}\n        showTipButton={isPublicProfileMode ? false : showTipButton}\n        showBackButton={showBackButton}\n        showFooter={showFooter}\n        showNotificationButton={true}\n        forceNotificationsEnabled={isPublicProfileMode}\n      >\n        <div>\n          {mode === 'profile' ? (\n            <div data-testid='primary-cta'>\n              <ProfilePrimaryCTA\n                artist={artist}\n                socialLinks={socialLinks}\n                spotifyPreferred={spotifyPreferred}\n                autoOpenCapture={resolvedAutoOpenCapture}\n                showCapture\n              />\n            </div>\n          ) : (\n            renderContent(\n              mode,\n              artist,\n              socialLinks,\n              primaryAction,\n              spotifyPreferred,\n              enableDynamicEngagement\n            )\n          )}\n        </div>\n      </ArtistPageShell>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/StaticListenInterface.tsx" },
        "span": [4229, 5184],
        "sourceCode": "'use client';\n\nimport { useRouter } from 'next/navigation';\nimport React, { useEffect, useState } from 'react';\n// Lazy import deep links to avoid loading heavy code upfront\nimport {\n  AUDIENCE_SPOTIFY_PREFERRED_COOKIE,\n  LISTEN_COOKIE,\n} from '@/constants/app';\nimport { track } from '@/lib/analytics';\nimport { AvailableDSP, getAvailableDSPs } from '@/lib/dsp';\nimport { Artist } from '@/types/db';\n\ninterface StaticListenInterfaceProps {\n  artist: Artist;\n  handle: string;\n  dspsOverride?: AvailableDSP[];\n  enableDynamicEngagement?: boolean;\n}\n\nexport const StaticListenInterface = React.memo(function StaticListenInterface({\n  artist,\n  handle,\n  dspsOverride,\n  enableDynamicEngagement = false,\n}: StaticListenInterfaceProps) {\n  const [dsps] = useState<AvailableDSP[]>(\n    () => dspsOverride ?? getAvailableDSPs(artist)\n  );\n  const [selectedDSP, setSelectedDSP] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const router = useRouter();\n\n  const availableDSPs = dsps;\n\n  // Handle backspace key to go back\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Backspace') {\n        // Only trigger if not in an input field\n        const target = event.target as HTMLElement;\n        if (\n          target &&\n          (target.tagName === 'INPUT' ||\n            target.tagName === 'TEXTAREA' ||\n            target.isContentEditable)\n        ) {\n          return;\n        }\n        event.preventDefault();\n        router.push(`/${handle}`);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [handle, router]);\n\n  const handleDSPClick = async (dsp: AvailableDSP) => {\n    if (isLoading) return;\n\n    setIsLoading(true);\n    setSelectedDSP(dsp.key);\n\n    try {\n      // Save preference\n      document.cookie = `${LISTEN_COOKIE}=${dsp.key}; path=/; max-age=${60 * 60 * 24 * 365}; SameSite=Lax`;\n\n      if (enableDynamicEngagement && dsp.key === 'spotify') {\n        document.cookie = `${AUDIENCE_SPOTIFY_PREFERRED_COOKIE}=1; path=/; max-age=${60 * 60 * 24 * 365}; SameSite=Lax`;\n      }\n      try {\n        localStorage.setItem(LISTEN_COOKIE, dsp.key);\n      } catch (error) {\n        console.error(\n          '[StaticListenInterface] Failed to set localStorage:',\n          error\n        );\n      }\n\n      // Track click (non-blocking)\n      try {\n        track('listen_button_click', {\n          handle,\n          linkType: 'listen',\n          target: dsp.key,\n        });\n      } catch (error) {\n        console.error('[StaticListenInterface] Failed to track click:', error);\n      }\n\n      // Try deep linking with lazy import\n      try {\n        const { getDSPDeepLinkConfig, openDeepLink } = await import(\n          '@/lib/deep-links'\n        );\n        const deepLinkConfig = getDSPDeepLinkConfig(dsp.key);\n\n        if (deepLinkConfig) {\n          try {\n            await openDeepLink(dsp.url, deepLinkConfig);\n          } catch (error) {\n            console.debug('Deep link failed, using fallback:', error);\n            window.open(dsp.url, '_blank', 'noopener,noreferrer');\n          }\n        } else {\n          window.open(dsp.url, '_blank', 'noopener,noreferrer');\n        }\n      } catch (error) {\n        console.debug(\n          'Deep link module failed to load, using fallback:',\n          error\n        );\n        window.open(dsp.url, '_blank', 'noopener,noreferrer');\n      }\n    } catch (error) {\n      console.error('Failed to handle DSP click:', error);\n    } finally {\n      // Reset selection after a delay\n      setTimeout(() => {\n        setSelectedDSP(null);\n        setIsLoading(false);\n      }, 1000);\n    }\n  };\n\n  return (\n    <div className='w-full max-w-sm'>\n      {/* DSP Buttons */}\n      <div className='space-y-3'>\n        {availableDSPs.length === 0 ? (\n          <div className='bg-surface-0 backdrop-blur-lg border border-subtle rounded-2xl p-8 shadow-xl text-center'>\n            <p className='text-sm text-secondary-token'>\n              Streaming links aren&apos;t available for this profile yet.\n            </p>\n          </div>\n        ) : (\n          availableDSPs.map(dsp => (\n            <button\n              key={dsp.key}\n              onClick={() => handleDSPClick(dsp)}\n              disabled={selectedDSP === dsp.key || isLoading}\n              className={`\n                w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl font-semibold text-base\n                transition-all duration-150 ease-out will-change-transform\n                hover:scale-[1.01] hover:-translate-y-px active:scale-[0.99]\n                focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-opacity-50\n                disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\n                ${selectedDSP === dsp.key ? 'opacity-75 cursor-wait' : ''}\n              `}\n              style={{\n                backgroundColor: dsp.config.color,\n                color: dsp.config.textColor,\n              }}\n              aria-label={`Open in ${dsp.name} app if installed, otherwise opens in web browser`}\n            >\n              <div\n                className='shrink-0'\n                dangerouslySetInnerHTML={{ __html: dsp.config.logoSvg }}\n              />\n              <span>\n                {selectedDSP === dsp.key ? 'Opening...' : `Open in ${dsp.name}`}\n              </span>\n            </button>\n          ))\n        )}\n      </div>\n\n      {/* Help text */}\n      <div className='mt-6 text-center'>\n        <p className='text-xs text-tertiary-token'>\n          If you have the app installed, it will open automatically\n        </p>\n      </div>\n    </div>\n  );\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<section>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<section>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/profile/VenmoTipSelector.tsx" },
        "span": [879, 892],
        "sourceCode": "'use client';\n\nimport { useCallback } from 'react';\nimport { TipSelector } from '@/components/molecules/TipSelector';\n\ntype VenmoTipSelectorProps = {\n  venmoLink: string;\n  venmoUsername?: string | null;\n  amounts?: number[];\n  className?: string;\n  onContinue?: (url: string) => void;\n};\n\nexport default function VenmoTipSelector({\n  venmoLink,\n  venmoUsername,\n  amounts = [3, 5, 7],\n  className,\n  onContinue,\n}: VenmoTipSelectorProps) {\n  const handleAmountSelected = useCallback(\n    (amount: number) => {\n      const sep = venmoLink.includes('?') ? '&' : '?';\n      const url = `${venmoLink}${sep}utm_amount=${amount}&utm_username=${encodeURIComponent(\n        venmoUsername ?? ''\n      )}`;\n\n      onContinue?.(url);\n      window.open(url, '_blank', 'noopener,noreferrer');\n    },\n    [venmoLink, venmoUsername, onContinue]\n  );\n\n  return (\n    <div className={className} role='region' aria-label='Venmo Tipping'>\n      <div className='bg-surface-0 backdrop-blur-lg border border-subtle rounded-2xl p-6 shadow-xl'>\n        <h2 className='text-xl font-semibold mb-4 text-primary-token'>\n          Send a Tip via Venmo\n        </h2>\n        <TipSelector amounts={amounts} onContinue={handleAmountSelected} />\n        <p className='mt-4 text-sm text-secondary-token'>\n          You&apos;ll be redirected to Venmo to complete your tip.\n        </p>\n      </div>\n    </div>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/providers/ErrorBoundary.tsx" },
        "span": [2588, 2746],
        "sourceCode": "'use client';\n\nimport * as Sentry from '@sentry/nextjs';\nimport React, { Component, type ErrorInfo, type ReactNode } from 'react';\nimport {\n  createErrorToast,\n  getUserFriendlyErrorMessage,\n  isUserFacingError,\n} from '@/lib/utils/toast-utils';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n  showToast?: boolean;\n}\n\ninterface State {\n  hasError: boolean;\n  error?: Error;\n}\n\n/**\n * Error boundary that integrates with the toast notification system\n * Automatically shows user-friendly error toasts for certain types of errors\n */\nexport class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // Log the error for debugging\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n\n    // Call custom error handler if provided\n    this.props.onError?.(error, errorInfo);\n\n    // Capture error in Sentry with component stack context\n    Sentry.captureException(error, {\n      extra: {\n        componentStack: errorInfo.componentStack,\n      },\n      tags: {\n        errorBoundary: 'true',\n      },\n    });\n\n    // Show toast notification if enabled and error is user-facing\n    if (this.props.showToast !== false && isUserFacingError(error)) {\n      // We can't use hooks in class components, so we'll dispatch a custom event\n      // that the ToastProvider can listen to\n      const toastEvent = new CustomEvent('error-boundary-toast', {\n        detail: createErrorToast(getUserFriendlyErrorMessage(error), {\n          action: {\n            label: 'Reload',\n            onClick: () => window.location.reload(),\n          },\n        }),\n      });\n      window.dispatchEvent(toastEvent);\n    }\n\n    // Track error for monitoring with gtag as backup\n    if (typeof window !== 'undefined' && 'gtag' in window) {\n      // @ts-expect-error - gtag is not typed\n      window.gtag('event', 'exception', {\n        description: error.message,\n        fatal: false,\n      });\n    }\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // Custom fallback UI\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      // Default fallback UI\n      return (\n        <div className='flex flex-col items-center justify-center min-h-[200px] p-6 text-center'>\n          <div className='text-red-600 dark:text-red-400 mb-4'>\n            <svg\n              className='w-12 h-12 mx-auto'\n              fill='none'\n              stroke='currentColor'\n              viewBox='0 0 24 24'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z'\n              />\n            </svg>\n          </div>\n          <h3 className='text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2'>\n            Something went wrong\n          </h3>\n          <p className='text-gray-600 dark:text-gray-400 mb-4 max-w-md'>\n            We encountered an unexpected error. Please try refreshing the page.\n          </p>\n          <button\n            onClick={() => window.location.reload()}\n            className='px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors'\n          >\n            Reload Page\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n/**\n * Hook-based error boundary for functional components\n * Use this when you need to handle errors in a specific component tree\n */\nexport const useErrorHandler = () => {\n  const handleError = React.useCallback(\n    (error: Error, errorInfo?: ErrorInfo) => {\n      console.error('Error caught by useErrorHandler:', error, errorInfo);\n\n      // Capture error in Sentry\n      Sentry.captureException(error, {\n        extra: {\n          componentStack: errorInfo?.componentStack,\n        },\n        tags: {\n          errorHandler: 'useErrorHandler',\n        },\n      });\n\n      // Show toast for user-facing errors\n      if (isUserFacingError(error)) {\n        const toastEvent = new CustomEvent('error-boundary-toast', {\n          detail: createErrorToast(getUserFriendlyErrorMessage(error)),\n        });\n        window.dispatchEvent(toastEvent);\n      }\n    },\n    []\n  );\n\n  return { handleError };\n};\n\n/**\n * Higher-order component that wraps a component with error boundary\n */\nexport const withErrorBoundary = <P extends object>(\n  Component: React.ComponentType<P>,\n  errorBoundaryProps?: Omit<Props, 'children'>\n) => {\n  const WrappedComponent = (props: P) => (\n    <ErrorBoundary {...errorBoundaryProps}>\n      <Component {...props} />\n    </ErrorBoundary>\n  );\n\n  WrappedComponent.displayName = `withErrorBoundary(${Component.displayName || Component.name})`;\n\n  return WrappedComponent;\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/providers/ErrorBoundary.tsx" },
        "span": [3401, 3577],
        "sourceCode": "'use client';\n\nimport * as Sentry from '@sentry/nextjs';\nimport React, { Component, type ErrorInfo, type ReactNode } from 'react';\nimport {\n  createErrorToast,\n  getUserFriendlyErrorMessage,\n  isUserFacingError,\n} from '@/lib/utils/toast-utils';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n  showToast?: boolean;\n}\n\ninterface State {\n  hasError: boolean;\n  error?: Error;\n}\n\n/**\n * Error boundary that integrates with the toast notification system\n * Automatically shows user-friendly error toasts for certain types of errors\n */\nexport class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // Log the error for debugging\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n\n    // Call custom error handler if provided\n    this.props.onError?.(error, errorInfo);\n\n    // Capture error in Sentry with component stack context\n    Sentry.captureException(error, {\n      extra: {\n        componentStack: errorInfo.componentStack,\n      },\n      tags: {\n        errorBoundary: 'true',\n      },\n    });\n\n    // Show toast notification if enabled and error is user-facing\n    if (this.props.showToast !== false && isUserFacingError(error)) {\n      // We can't use hooks in class components, so we'll dispatch a custom event\n      // that the ToastProvider can listen to\n      const toastEvent = new CustomEvent('error-boundary-toast', {\n        detail: createErrorToast(getUserFriendlyErrorMessage(error), {\n          action: {\n            label: 'Reload',\n            onClick: () => window.location.reload(),\n          },\n        }),\n      });\n      window.dispatchEvent(toastEvent);\n    }\n\n    // Track error for monitoring with gtag as backup\n    if (typeof window !== 'undefined' && 'gtag' in window) {\n      // @ts-expect-error - gtag is not typed\n      window.gtag('event', 'exception', {\n        description: error.message,\n        fatal: false,\n      });\n    }\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // Custom fallback UI\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      // Default fallback UI\n      return (\n        <div className='flex flex-col items-center justify-center min-h-[200px] p-6 text-center'>\n          <div className='text-red-600 dark:text-red-400 mb-4'>\n            <svg\n              className='w-12 h-12 mx-auto'\n              fill='none'\n              stroke='currentColor'\n              viewBox='0 0 24 24'\n            >\n              <path\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth={2}\n                d='M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z'\n              />\n            </svg>\n          </div>\n          <h3 className='text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2'>\n            Something went wrong\n          </h3>\n          <p className='text-gray-600 dark:text-gray-400 mb-4 max-w-md'>\n            We encountered an unexpected error. Please try refreshing the page.\n          </p>\n          <button\n            onClick={() => window.location.reload()}\n            className='px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors'\n          >\n            Reload Page\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n/**\n * Hook-based error boundary for functional components\n * Use this when you need to handle errors in a specific component tree\n */\nexport const useErrorHandler = () => {\n  const handleError = React.useCallback(\n    (error: Error, errorInfo?: ErrorInfo) => {\n      console.error('Error caught by useErrorHandler:', error, errorInfo);\n\n      // Capture error in Sentry\n      Sentry.captureException(error, {\n        extra: {\n          componentStack: errorInfo?.componentStack,\n        },\n        tags: {\n          errorHandler: 'useErrorHandler',\n        },\n      });\n\n      // Show toast for user-facing errors\n      if (isUserFacingError(error)) {\n        const toastEvent = new CustomEvent('error-boundary-toast', {\n          detail: createErrorToast(getUserFriendlyErrorMessage(error)),\n        });\n        window.dispatchEvent(toastEvent);\n      }\n    },\n    []\n  );\n\n  return { handleError };\n};\n\n/**\n * Higher-order component that wraps a component with error boundary\n */\nexport const withErrorBoundary = <P extends object>(\n  Component: React.ComponentType<P>,\n  errorBoundaryProps?: Omit<Props, 'children'>\n) => {\n  const WrappedComponent = (props: P) => (\n    <ErrorBoundary {...errorBoundaryProps}>\n      <Component {...props} />\n    </ErrorBoundary>\n  );\n\n  WrappedComponent.displayName = `withErrorBoundary(${Component.displayName || Component.name})`;\n\n  return WrappedComponent;\n};\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/site/ThemeToggle.tsx" },
        "span": [2777, 2905],
        "sourceCode": "'use client';\n\nimport {\n  Button,\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui';\nimport { useTheme } from 'next-themes';\nimport React, { useEffect, useId, useMemo, useState } from 'react';\n\ninterface ThemeToggleProps {\n  appearance?: 'icon' | 'segmented';\n  className?: string;\n  shortcutKey?: string;\n}\n\nexport function ThemeToggle({\n  appearance = 'icon',\n  className = '',\n  shortcutKey,\n}: ThemeToggleProps) {\n  const [mounted, setMounted] = useState(false);\n  const { theme, setTheme, resolvedTheme } = useTheme();\n\n  const cycleTheme = () => {\n    if (theme === 'light') {\n      setTheme('dark');\n    } else if (theme === 'dark') {\n      setTheme('system');\n    } else {\n      setTheme('light');\n    }\n  };\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  const shortcutDisplay = shortcutKey?.trim().toUpperCase();\n  const shortcutDescription = shortcutDisplay\n    ? `Press ${shortcutDisplay} to toggle between light and dark themes.`\n    : undefined;\n  const shortcutDescriptionId = useId();\n\n  const renderTooltipContent = useMemo(\n    () =>\n      shortcutDisplay\n        ? () => (\n            <TooltipContent side='top' align='center'>\n              <div className='flex items-center gap-2 text-xs font-semibold leading-none'>\n                <span>Toggle theme</span>\n                <kbd className='rounded-md border border-subtle bg-surface-1 px-1.5 text-[10px] tracking-tight'>\n                  {shortcutDisplay}\n                </kbd>\n              </div>\n            </TooltipContent>\n          )\n        : null,\n    [shortcutDisplay]\n  );\n\n  // Don't render anything until mounted to prevent hydration mismatch\n  if (!mounted) {\n    return appearance === 'segmented' ? (\n      <div\n        role='toolbar'\n        aria-label='Theme'\n        className={`inline-flex items-center gap-0 rounded-full border border-subtle bg-surface-2 p-0 ${className}`}\n      >\n        <div className='h-7 w-7 rounded-full bg-surface-1' />\n        <div className='h-7 w-7 rounded-full bg-surface-1' />\n        <div className='h-7 w-7 rounded-full bg-surface-1' />\n      </div>\n    ) : (\n      <Button variant='ghost' size='sm' className='h-8 w-8 px-0' disabled>\n        <span className='sr-only'>Loading theme toggle</span>\n        <div className='h-4 w-4 animate-pulse motion-reduce:animate-none rounded-sm bg-surface-2' />\n      </Button>\n    );\n  }\n\n  const withShortcutTooltip = (control: React.ReactElement) =>\n    renderTooltipContent ? (\n      <Tooltip>\n        <TooltipTrigger asChild>{control}</TooltipTrigger>\n        {renderTooltipContent()}\n      </Tooltip>\n    ) : (\n      control\n    );\n  const getThemeIcon = () => {\n    if (theme === 'system') {\n      // System theme - show a computer/auto icon\n      return (\n        <svg\n          className='h-5 w-5'\n          fill='none'\n          stroke='currentColor'\n          viewBox='0 0 24 24'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z'\n          />\n        </svg>\n      );\n    } else if (resolvedTheme === 'light') {\n      // Light theme - show moon (to switch to dark)\n      return (\n        <svg\n          className='h-5 w-5'\n          fill='none'\n          stroke='currentColor'\n          viewBox='0 0 24 24'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'\n          />\n        </svg>\n      );\n    } else {\n      // Dark theme - show sun (to switch to light)\n      return (\n        <svg\n          className='h-5 w-5'\n          fill='none'\n          stroke='currentColor'\n          viewBox='0 0 24 24'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z'\n          />\n        </svg>\n      );\n    }\n  };\n\n  const getNextTheme = () => {\n    if (theme === 'light') return 'dark';\n    if (theme === 'dark') return 'system';\n    return 'light';\n  };\n\n  if (appearance === 'segmented') {\n    const currentTheme = theme ?? 'system';\n    const buttonSizePx = 28;\n    const gapPx = 0;\n\n    const themes = [\n      { value: 'system' as const, label: 'System' },\n      { value: 'light' as const, label: 'Light' },\n      { value: 'dark' as const, label: 'Dark' },\n    ];\n\n    const activeIndex = Math.max(\n      0,\n      themes.findIndex(t => t.value === currentTheme)\n    );\n    const indicatorX = activeIndex * (buttonSizePx + gapPx);\n\n    const baseBtn =\n      'relative z-10 inline-flex h-7 w-7 flex-none items-center justify-center rounded-full leading-none outline-none transition-colors focus-ring-themed focus-visible:ring-offset-transparent';\n\n    const segmentedGroup = (\n      <div\n        role='toolbar'\n        aria-label='Theme'\n        className={`relative inline-flex items-center gap-0 rounded-full border border-subtle bg-surface-2 p-0 ${className}`}\n      >\n        <div\n          aria-hidden='true'\n          className='pointer-events-none absolute top-0 bottom-0 left-0 w-7 rounded-full bg-surface-0 ring-1 ring-inset ring-(--color-border-subtle) transition-transform duration-150 ease-[cubic-bezier(.25,1,.5,1)]'\n          style={{ transform: `translateX(${indicatorX}px)` }}\n        />\n\n        <button\n          type='button'\n          aria-label='System theme'\n          className={`${baseBtn} ${currentTheme === 'system' ? 'text-primary-token' : 'text-secondary-token hover:text-primary-token'}`}\n          onClick={() => setTheme('system')}\n        >\n          <span className='absolute inset-[calc(-3/16*1rem)]' />\n          <svg\n            viewBox='0 0 20 20'\n            fill='none'\n            aria-hidden='true'\n            className='h-3.5 w-3.5'\n          >\n            <path\n              stroke='currentColor'\n              strokeLinecap='round'\n              strokeLinejoin='round'\n              strokeWidth='1.5'\n              d='M10 12.5v2.75m0 0H7.75m2.25 0h2.25m-6.5-3h8.5a1 1 0 0 0 1-1v-5.5a1 1 0 0 0-1-1h-8.5a1 1 0 0 0-1 1v5.5a1 1 0 0 0 1 1Z'\n            />\n          </svg>\n        </button>\n\n        {withShortcutTooltip(\n          <button\n            type='button'\n            aria-label='Light theme'\n            aria-describedby={\n              shortcutDescription ? shortcutDescriptionId : undefined\n            }\n            className={`${baseBtn} ${currentTheme === 'light' ? 'text-primary-token' : 'text-secondary-token hover:text-primary-token'}`}\n            onClick={() => setTheme('light')}\n          >\n            <span className='absolute inset-[calc(-3/16*1rem)]' />\n            <svg\n              viewBox='0 0 20 20'\n              fill='none'\n              aria-hidden='true'\n              className='h-3.5 w-3.5'\n            >\n              <circle\n                cx='10'\n                cy='10'\n                r='3.25'\n                stroke='currentColor'\n                strokeWidth='1.5'\n              />\n              <g\n                stroke='currentColor'\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth='1.5'\n              >\n                <path d='M10 3.75v.5M14.42 5.58l-.354.354M16.25 10h-.5M14.42 14.42l-.354-.354M10 15.75v.5M5.934 14.065l-.354.354M4.25 10h-.5M5.934 5.935 5.58 5.58' />\n              </g>\n            </svg>\n          </button>\n        )}\n\n        {withShortcutTooltip(\n          <button\n            type='button'\n            aria-label='Dark theme'\n            aria-describedby={\n              shortcutDescription ? shortcutDescriptionId : undefined\n            }\n            className={`${baseBtn} ${currentTheme === 'dark' ? 'text-primary-token' : 'text-secondary-token hover:text-primary-token'}`}\n            onClick={() => setTheme('dark')}\n          >\n            <span className='absolute inset-[calc(-3/16*1rem)]' />\n            <svg\n              viewBox='0 0 20 20'\n              fill='none'\n              aria-hidden='true'\n              className='h-3.5 w-3.5'\n            >\n              <path\n                stroke='currentColor'\n                strokeWidth='1.5'\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n              />\n            </svg>\n          </button>\n        )}\n      </div>\n    );\n\n    const segmentedContent = (\n      <>\n        {segmentedGroup}\n        {shortcutDescription ? (\n          <span id={shortcutDescriptionId} className='sr-only'>\n            {shortcutDescription}\n          </span>\n        ) : null}\n      </>\n    );\n\n    return renderTooltipContent ? (\n      <TooltipProvider delayDuration={0}>{segmentedContent}</TooltipProvider>\n    ) : (\n      segmentedContent\n    );\n  }\n\n  const toggleButton = (\n    <Button\n      variant='ghost'\n      size='sm'\n      onClick={cycleTheme}\n      aria-describedby={shortcutDescription ? shortcutDescriptionId : undefined}\n      className={`h-8 w-8 p-0 flex items-center justify-center rounded-full shadow-sm ring-1 ring-(--color-border-subtle) bg-surface-0 text-primary-token transition-colors hover:bg-surface-1 focus-ring-themed focus-visible:ring-offset-transparent ${className}`}\n      title={`Current: ${theme === 'system' ? `auto (${resolvedTheme})` : theme}. Click to switch to ${getNextTheme()}${shortcutDisplay ? ` (${shortcutDisplay})` : ''}`}\n    >\n      <span\n        className='sr-only'\n        id={shortcutDescription ? shortcutDescriptionId : undefined}\n      >\n        Toggle theme. Current:{' '}\n        {theme === 'system' ? `auto (${resolvedTheme})` : theme}. Next:{' '}\n        {getNextTheme()}.\n      </span>\n      {getThemeIcon()}\n    </Button>\n  );\n\n  const buttonWithTooltip = withShortcutTooltip(toggleButton);\n\n  return shortcutDescription ? (\n    <TooltipProvider delayDuration={0}>{buttonWithTooltip}</TooltipProvider>\n  ) : (\n    buttonWithTooltip\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/site/ThemeToggle.tsx" },
        "span": [3298, 3426],
        "sourceCode": "'use client';\n\nimport {\n  Button,\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui';\nimport { useTheme } from 'next-themes';\nimport React, { useEffect, useId, useMemo, useState } from 'react';\n\ninterface ThemeToggleProps {\n  appearance?: 'icon' | 'segmented';\n  className?: string;\n  shortcutKey?: string;\n}\n\nexport function ThemeToggle({\n  appearance = 'icon',\n  className = '',\n  shortcutKey,\n}: ThemeToggleProps) {\n  const [mounted, setMounted] = useState(false);\n  const { theme, setTheme, resolvedTheme } = useTheme();\n\n  const cycleTheme = () => {\n    if (theme === 'light') {\n      setTheme('dark');\n    } else if (theme === 'dark') {\n      setTheme('system');\n    } else {\n      setTheme('light');\n    }\n  };\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  const shortcutDisplay = shortcutKey?.trim().toUpperCase();\n  const shortcutDescription = shortcutDisplay\n    ? `Press ${shortcutDisplay} to toggle between light and dark themes.`\n    : undefined;\n  const shortcutDescriptionId = useId();\n\n  const renderTooltipContent = useMemo(\n    () =>\n      shortcutDisplay\n        ? () => (\n            <TooltipContent side='top' align='center'>\n              <div className='flex items-center gap-2 text-xs font-semibold leading-none'>\n                <span>Toggle theme</span>\n                <kbd className='rounded-md border border-subtle bg-surface-1 px-1.5 text-[10px] tracking-tight'>\n                  {shortcutDisplay}\n                </kbd>\n              </div>\n            </TooltipContent>\n          )\n        : null,\n    [shortcutDisplay]\n  );\n\n  // Don't render anything until mounted to prevent hydration mismatch\n  if (!mounted) {\n    return appearance === 'segmented' ? (\n      <div\n        role='toolbar'\n        aria-label='Theme'\n        className={`inline-flex items-center gap-0 rounded-full border border-subtle bg-surface-2 p-0 ${className}`}\n      >\n        <div className='h-7 w-7 rounded-full bg-surface-1' />\n        <div className='h-7 w-7 rounded-full bg-surface-1' />\n        <div className='h-7 w-7 rounded-full bg-surface-1' />\n      </div>\n    ) : (\n      <Button variant='ghost' size='sm' className='h-8 w-8 px-0' disabled>\n        <span className='sr-only'>Loading theme toggle</span>\n        <div className='h-4 w-4 animate-pulse motion-reduce:animate-none rounded-sm bg-surface-2' />\n      </Button>\n    );\n  }\n\n  const withShortcutTooltip = (control: React.ReactElement) =>\n    renderTooltipContent ? (\n      <Tooltip>\n        <TooltipTrigger asChild>{control}</TooltipTrigger>\n        {renderTooltipContent()}\n      </Tooltip>\n    ) : (\n      control\n    );\n  const getThemeIcon = () => {\n    if (theme === 'system') {\n      // System theme - show a computer/auto icon\n      return (\n        <svg\n          className='h-5 w-5'\n          fill='none'\n          stroke='currentColor'\n          viewBox='0 0 24 24'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z'\n          />\n        </svg>\n      );\n    } else if (resolvedTheme === 'light') {\n      // Light theme - show moon (to switch to dark)\n      return (\n        <svg\n          className='h-5 w-5'\n          fill='none'\n          stroke='currentColor'\n          viewBox='0 0 24 24'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'\n          />\n        </svg>\n      );\n    } else {\n      // Dark theme - show sun (to switch to light)\n      return (\n        <svg\n          className='h-5 w-5'\n          fill='none'\n          stroke='currentColor'\n          viewBox='0 0 24 24'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z'\n          />\n        </svg>\n      );\n    }\n  };\n\n  const getNextTheme = () => {\n    if (theme === 'light') return 'dark';\n    if (theme === 'dark') return 'system';\n    return 'light';\n  };\n\n  if (appearance === 'segmented') {\n    const currentTheme = theme ?? 'system';\n    const buttonSizePx = 28;\n    const gapPx = 0;\n\n    const themes = [\n      { value: 'system' as const, label: 'System' },\n      { value: 'light' as const, label: 'Light' },\n      { value: 'dark' as const, label: 'Dark' },\n    ];\n\n    const activeIndex = Math.max(\n      0,\n      themes.findIndex(t => t.value === currentTheme)\n    );\n    const indicatorX = activeIndex * (buttonSizePx + gapPx);\n\n    const baseBtn =\n      'relative z-10 inline-flex h-7 w-7 flex-none items-center justify-center rounded-full leading-none outline-none transition-colors focus-ring-themed focus-visible:ring-offset-transparent';\n\n    const segmentedGroup = (\n      <div\n        role='toolbar'\n        aria-label='Theme'\n        className={`relative inline-flex items-center gap-0 rounded-full border border-subtle bg-surface-2 p-0 ${className}`}\n      >\n        <div\n          aria-hidden='true'\n          className='pointer-events-none absolute top-0 bottom-0 left-0 w-7 rounded-full bg-surface-0 ring-1 ring-inset ring-(--color-border-subtle) transition-transform duration-150 ease-[cubic-bezier(.25,1,.5,1)]'\n          style={{ transform: `translateX(${indicatorX}px)` }}\n        />\n\n        <button\n          type='button'\n          aria-label='System theme'\n          className={`${baseBtn} ${currentTheme === 'system' ? 'text-primary-token' : 'text-secondary-token hover:text-primary-token'}`}\n          onClick={() => setTheme('system')}\n        >\n          <span className='absolute inset-[calc(-3/16*1rem)]' />\n          <svg\n            viewBox='0 0 20 20'\n            fill='none'\n            aria-hidden='true'\n            className='h-3.5 w-3.5'\n          >\n            <path\n              stroke='currentColor'\n              strokeLinecap='round'\n              strokeLinejoin='round'\n              strokeWidth='1.5'\n              d='M10 12.5v2.75m0 0H7.75m2.25 0h2.25m-6.5-3h8.5a1 1 0 0 0 1-1v-5.5a1 1 0 0 0-1-1h-8.5a1 1 0 0 0-1 1v5.5a1 1 0 0 0 1 1Z'\n            />\n          </svg>\n        </button>\n\n        {withShortcutTooltip(\n          <button\n            type='button'\n            aria-label='Light theme'\n            aria-describedby={\n              shortcutDescription ? shortcutDescriptionId : undefined\n            }\n            className={`${baseBtn} ${currentTheme === 'light' ? 'text-primary-token' : 'text-secondary-token hover:text-primary-token'}`}\n            onClick={() => setTheme('light')}\n          >\n            <span className='absolute inset-[calc(-3/16*1rem)]' />\n            <svg\n              viewBox='0 0 20 20'\n              fill='none'\n              aria-hidden='true'\n              className='h-3.5 w-3.5'\n            >\n              <circle\n                cx='10'\n                cy='10'\n                r='3.25'\n                stroke='currentColor'\n                strokeWidth='1.5'\n              />\n              <g\n                stroke='currentColor'\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth='1.5'\n              >\n                <path d='M10 3.75v.5M14.42 5.58l-.354.354M16.25 10h-.5M14.42 14.42l-.354-.354M10 15.75v.5M5.934 14.065l-.354.354M4.25 10h-.5M5.934 5.935 5.58 5.58' />\n              </g>\n            </svg>\n          </button>\n        )}\n\n        {withShortcutTooltip(\n          <button\n            type='button'\n            aria-label='Dark theme'\n            aria-describedby={\n              shortcutDescription ? shortcutDescriptionId : undefined\n            }\n            className={`${baseBtn} ${currentTheme === 'dark' ? 'text-primary-token' : 'text-secondary-token hover:text-primary-token'}`}\n            onClick={() => setTheme('dark')}\n          >\n            <span className='absolute inset-[calc(-3/16*1rem)]' />\n            <svg\n              viewBox='0 0 20 20'\n              fill='none'\n              aria-hidden='true'\n              className='h-3.5 w-3.5'\n            >\n              <path\n                stroke='currentColor'\n                strokeWidth='1.5'\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n              />\n            </svg>\n          </button>\n        )}\n      </div>\n    );\n\n    const segmentedContent = (\n      <>\n        {segmentedGroup}\n        {shortcutDescription ? (\n          <span id={shortcutDescriptionId} className='sr-only'>\n            {shortcutDescription}\n          </span>\n        ) : null}\n      </>\n    );\n\n    return renderTooltipContent ? (\n      <TooltipProvider delayDuration={0}>{segmentedContent}</TooltipProvider>\n    ) : (\n      segmentedContent\n    );\n  }\n\n  const toggleButton = (\n    <Button\n      variant='ghost'\n      size='sm'\n      onClick={cycleTheme}\n      aria-describedby={shortcutDescription ? shortcutDescriptionId : undefined}\n      className={`h-8 w-8 p-0 flex items-center justify-center rounded-full shadow-sm ring-1 ring-(--color-border-subtle) bg-surface-0 text-primary-token transition-colors hover:bg-surface-1 focus-ring-themed focus-visible:ring-offset-transparent ${className}`}\n      title={`Current: ${theme === 'system' ? `auto (${resolvedTheme})` : theme}. Click to switch to ${getNextTheme()}${shortcutDisplay ? ` (${shortcutDisplay})` : ''}`}\n    >\n      <span\n        className='sr-only'\n        id={shortcutDescription ? shortcutDescriptionId : undefined}\n      >\n        Toggle theme. Current:{' '}\n        {theme === 'system' ? `auto (${resolvedTheme})` : theme}. Next:{' '}\n        {getNextTheme()}.\n      </span>\n      {getThemeIcon()}\n    </Button>\n  );\n\n  const buttonWithTooltip = withShortcutTooltip(toggleButton);\n\n  return shortcutDescription ? (\n    <TooltipProvider delayDuration={0}>{buttonWithTooltip}</TooltipProvider>\n  ) : (\n    buttonWithTooltip\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noSvgWithoutTitle",
      "severity": "warning",
      "description": "Alternative text title element cannot be empty",
      "message": [
        { "elements": [], "content": "Alternative text " },
        { "elements": ["Emphasis"], "content": "title" },
        { "elements": [], "content": " element cannot be empty" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "For accessibility purposes, " },
                { "elements": ["Emphasis"], "content": "SVGs" },
                {
                  "elements": [],
                  "content": " should have an alternative text, provided via "
                },
                { "elements": ["Emphasis"], "content": "title" },
                {
                  "elements": [],
                  "content": " element. If the svg element has role=\"img\", you should add the "
                },
                { "elements": ["Emphasis"], "content": "aria-label" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "aria-labelledby" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/site/ThemeToggle.tsx" },
        "span": [3767, 3895],
        "sourceCode": "'use client';\n\nimport {\n  Button,\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui';\nimport { useTheme } from 'next-themes';\nimport React, { useEffect, useId, useMemo, useState } from 'react';\n\ninterface ThemeToggleProps {\n  appearance?: 'icon' | 'segmented';\n  className?: string;\n  shortcutKey?: string;\n}\n\nexport function ThemeToggle({\n  appearance = 'icon',\n  className = '',\n  shortcutKey,\n}: ThemeToggleProps) {\n  const [mounted, setMounted] = useState(false);\n  const { theme, setTheme, resolvedTheme } = useTheme();\n\n  const cycleTheme = () => {\n    if (theme === 'light') {\n      setTheme('dark');\n    } else if (theme === 'dark') {\n      setTheme('system');\n    } else {\n      setTheme('light');\n    }\n  };\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  const shortcutDisplay = shortcutKey?.trim().toUpperCase();\n  const shortcutDescription = shortcutDisplay\n    ? `Press ${shortcutDisplay} to toggle between light and dark themes.`\n    : undefined;\n  const shortcutDescriptionId = useId();\n\n  const renderTooltipContent = useMemo(\n    () =>\n      shortcutDisplay\n        ? () => (\n            <TooltipContent side='top' align='center'>\n              <div className='flex items-center gap-2 text-xs font-semibold leading-none'>\n                <span>Toggle theme</span>\n                <kbd className='rounded-md border border-subtle bg-surface-1 px-1.5 text-[10px] tracking-tight'>\n                  {shortcutDisplay}\n                </kbd>\n              </div>\n            </TooltipContent>\n          )\n        : null,\n    [shortcutDisplay]\n  );\n\n  // Don't render anything until mounted to prevent hydration mismatch\n  if (!mounted) {\n    return appearance === 'segmented' ? (\n      <div\n        role='toolbar'\n        aria-label='Theme'\n        className={`inline-flex items-center gap-0 rounded-full border border-subtle bg-surface-2 p-0 ${className}`}\n      >\n        <div className='h-7 w-7 rounded-full bg-surface-1' />\n        <div className='h-7 w-7 rounded-full bg-surface-1' />\n        <div className='h-7 w-7 rounded-full bg-surface-1' />\n      </div>\n    ) : (\n      <Button variant='ghost' size='sm' className='h-8 w-8 px-0' disabled>\n        <span className='sr-only'>Loading theme toggle</span>\n        <div className='h-4 w-4 animate-pulse motion-reduce:animate-none rounded-sm bg-surface-2' />\n      </Button>\n    );\n  }\n\n  const withShortcutTooltip = (control: React.ReactElement) =>\n    renderTooltipContent ? (\n      <Tooltip>\n        <TooltipTrigger asChild>{control}</TooltipTrigger>\n        {renderTooltipContent()}\n      </Tooltip>\n    ) : (\n      control\n    );\n  const getThemeIcon = () => {\n    if (theme === 'system') {\n      // System theme - show a computer/auto icon\n      return (\n        <svg\n          className='h-5 w-5'\n          fill='none'\n          stroke='currentColor'\n          viewBox='0 0 24 24'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z'\n          />\n        </svg>\n      );\n    } else if (resolvedTheme === 'light') {\n      // Light theme - show moon (to switch to dark)\n      return (\n        <svg\n          className='h-5 w-5'\n          fill='none'\n          stroke='currentColor'\n          viewBox='0 0 24 24'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z'\n          />\n        </svg>\n      );\n    } else {\n      // Dark theme - show sun (to switch to light)\n      return (\n        <svg\n          className='h-5 w-5'\n          fill='none'\n          stroke='currentColor'\n          viewBox='0 0 24 24'\n        >\n          <path\n            strokeLinecap='round'\n            strokeLinejoin='round'\n            strokeWidth={2}\n            d='M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z'\n          />\n        </svg>\n      );\n    }\n  };\n\n  const getNextTheme = () => {\n    if (theme === 'light') return 'dark';\n    if (theme === 'dark') return 'system';\n    return 'light';\n  };\n\n  if (appearance === 'segmented') {\n    const currentTheme = theme ?? 'system';\n    const buttonSizePx = 28;\n    const gapPx = 0;\n\n    const themes = [\n      { value: 'system' as const, label: 'System' },\n      { value: 'light' as const, label: 'Light' },\n      { value: 'dark' as const, label: 'Dark' },\n    ];\n\n    const activeIndex = Math.max(\n      0,\n      themes.findIndex(t => t.value === currentTheme)\n    );\n    const indicatorX = activeIndex * (buttonSizePx + gapPx);\n\n    const baseBtn =\n      'relative z-10 inline-flex h-7 w-7 flex-none items-center justify-center rounded-full leading-none outline-none transition-colors focus-ring-themed focus-visible:ring-offset-transparent';\n\n    const segmentedGroup = (\n      <div\n        role='toolbar'\n        aria-label='Theme'\n        className={`relative inline-flex items-center gap-0 rounded-full border border-subtle bg-surface-2 p-0 ${className}`}\n      >\n        <div\n          aria-hidden='true'\n          className='pointer-events-none absolute top-0 bottom-0 left-0 w-7 rounded-full bg-surface-0 ring-1 ring-inset ring-(--color-border-subtle) transition-transform duration-150 ease-[cubic-bezier(.25,1,.5,1)]'\n          style={{ transform: `translateX(${indicatorX}px)` }}\n        />\n\n        <button\n          type='button'\n          aria-label='System theme'\n          className={`${baseBtn} ${currentTheme === 'system' ? 'text-primary-token' : 'text-secondary-token hover:text-primary-token'}`}\n          onClick={() => setTheme('system')}\n        >\n          <span className='absolute inset-[calc(-3/16*1rem)]' />\n          <svg\n            viewBox='0 0 20 20'\n            fill='none'\n            aria-hidden='true'\n            className='h-3.5 w-3.5'\n          >\n            <path\n              stroke='currentColor'\n              strokeLinecap='round'\n              strokeLinejoin='round'\n              strokeWidth='1.5'\n              d='M10 12.5v2.75m0 0H7.75m2.25 0h2.25m-6.5-3h8.5a1 1 0 0 0 1-1v-5.5a1 1 0 0 0-1-1h-8.5a1 1 0 0 0-1 1v5.5a1 1 0 0 0 1 1Z'\n            />\n          </svg>\n        </button>\n\n        {withShortcutTooltip(\n          <button\n            type='button'\n            aria-label='Light theme'\n            aria-describedby={\n              shortcutDescription ? shortcutDescriptionId : undefined\n            }\n            className={`${baseBtn} ${currentTheme === 'light' ? 'text-primary-token' : 'text-secondary-token hover:text-primary-token'}`}\n            onClick={() => setTheme('light')}\n          >\n            <span className='absolute inset-[calc(-3/16*1rem)]' />\n            <svg\n              viewBox='0 0 20 20'\n              fill='none'\n              aria-hidden='true'\n              className='h-3.5 w-3.5'\n            >\n              <circle\n                cx='10'\n                cy='10'\n                r='3.25'\n                stroke='currentColor'\n                strokeWidth='1.5'\n              />\n              <g\n                stroke='currentColor'\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                strokeWidth='1.5'\n              >\n                <path d='M10 3.75v.5M14.42 5.58l-.354.354M16.25 10h-.5M14.42 14.42l-.354-.354M10 15.75v.5M5.934 14.065l-.354.354M4.25 10h-.5M5.934 5.935 5.58 5.58' />\n              </g>\n            </svg>\n          </button>\n        )}\n\n        {withShortcutTooltip(\n          <button\n            type='button'\n            aria-label='Dark theme'\n            aria-describedby={\n              shortcutDescription ? shortcutDescriptionId : undefined\n            }\n            className={`${baseBtn} ${currentTheme === 'dark' ? 'text-primary-token' : 'text-secondary-token hover:text-primary-token'}`}\n            onClick={() => setTheme('dark')}\n          >\n            <span className='absolute inset-[calc(-3/16*1rem)]' />\n            <svg\n              viewBox='0 0 20 20'\n              fill='none'\n              aria-hidden='true'\n              className='h-3.5 w-3.5'\n            >\n              <path\n                stroke='currentColor'\n                strokeWidth='1.5'\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z'\n              />\n            </svg>\n          </button>\n        )}\n      </div>\n    );\n\n    const segmentedContent = (\n      <>\n        {segmentedGroup}\n        {shortcutDescription ? (\n          <span id={shortcutDescriptionId} className='sr-only'>\n            {shortcutDescription}\n          </span>\n        ) : null}\n      </>\n    );\n\n    return renderTooltipContent ? (\n      <TooltipProvider delayDuration={0}>{segmentedContent}</TooltipProvider>\n    ) : (\n      segmentedContent\n    );\n  }\n\n  const toggleButton = (\n    <Button\n      variant='ghost'\n      size='sm'\n      onClick={cycleTheme}\n      aria-describedby={shortcutDescription ? shortcutDescriptionId : undefined}\n      className={`h-8 w-8 p-0 flex items-center justify-center rounded-full shadow-sm ring-1 ring-(--color-border-subtle) bg-surface-0 text-primary-token transition-colors hover:bg-surface-1 focus-ring-themed focus-visible:ring-offset-transparent ${className}`}\n      title={`Current: ${theme === 'system' ? `auto (${resolvedTheme})` : theme}. Click to switch to ${getNextTheme()}${shortcutDisplay ? ` (${shortcutDisplay})` : ''}`}\n    >\n      <span\n        className='sr-only'\n        id={shortcutDescription ? shortcutDescriptionId : undefined}\n      >\n        Toggle theme. Current:{' '}\n        {theme === 'system' ? `auto (${resolvedTheme})` : theme}. Next:{' '}\n        {getNextTheme()}.\n      </span>\n      {getThemeIcon()}\n    </Button>\n  );\n\n  const buttonWithTooltip = withShortcutTooltip(toggleButton);\n\n  return shortcutDescription ? (\n    <TooltipProvider delayDuration={0}>{buttonWithTooltip}</TooltipProvider>\n  ) : (\n    buttonWithTooltip\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/ui/EmptyState.tsx" },
        "span": [4686, 4699],
        "sourceCode": "'use client';\n\nimport { Button, type ButtonProps } from '@jovie/ui';\nimport Link from 'next/link';\nimport React from 'react';\nimport { cn } from '@/lib/utils';\n\ntype EmptyStateVariant = 'default' | 'search' | 'error' | 'permission';\n\ntype PrimaryAction =\n  | {\n      label: string;\n      onClick: () => void;\n      variant?: ButtonProps['variant'];\n      ariaLabel?: string;\n    }\n  | {\n      label: string;\n      href: string;\n      target?: React.HTMLAttributeAnchorTarget;\n      rel?: string;\n      variant?: ButtonProps['variant'];\n      ariaLabel?: string;\n    };\n\ntype SecondaryAction =\n  | {\n      label: string;\n      href: string;\n      target?: React.HTMLAttributeAnchorTarget;\n      rel?: string;\n    }\n  | {\n      label: string;\n      onClick: () => void;\n      ariaLabel?: string;\n    };\n\nexport interface EmptyStateProps {\n  icon?: React.ReactNode;\n  heading: string;\n  description?: string;\n  action?: PrimaryAction;\n  secondaryAction?: SecondaryAction;\n  variant?: EmptyStateVariant;\n  className?: string;\n  testId?: string;\n}\n\nconst variantStyles: Record<\n  EmptyStateVariant,\n  {\n    iconWrapper: string;\n    heading: string;\n    description: string;\n    secondary: string;\n  }\n> = {\n  default: {\n    iconWrapper:\n      'bg-gray-100 text-gray-500 ring-1 ring-inset ring-gray-200 dark:bg-gray-900/60 dark:text-gray-400 dark:ring-gray-800',\n    heading: 'text-gray-900 dark:text-gray-100',\n    description: 'text-gray-600 dark:text-gray-400',\n    secondary: 'text-indigo-600 dark:text-indigo-400',\n  },\n  search: {\n    iconWrapper:\n      'bg-sky-50 text-sky-600 ring-1 ring-inset ring-sky-100 dark:bg-sky-950/30 dark:text-sky-300 dark:ring-sky-900/60',\n    heading: 'text-sky-800 dark:text-sky-200',\n    description: 'text-sky-700 dark:text-sky-300/90',\n    secondary: 'text-sky-600 dark:text-sky-300',\n  },\n  error: {\n    iconWrapper:\n      'bg-rose-50 text-rose-600 ring-1 ring-inset ring-rose-100 dark:bg-rose-950/40 dark:text-rose-300 dark:ring-rose-900/50',\n    heading: 'text-rose-700 dark:text-rose-200',\n    description: 'text-rose-600 dark:text-rose-300/90',\n    secondary: 'text-rose-600 dark:text-rose-300',\n  },\n  permission: {\n    iconWrapper:\n      'bg-amber-50 text-amber-600 ring-1 ring-inset ring-amber-100 dark:bg-amber-950/40 dark:text-amber-300 dark:ring-amber-900/50',\n    heading: 'text-amber-800 dark:text-amber-200',\n    description: 'text-amber-700 dark:text-amber-300/90',\n    secondary: 'text-amber-700 dark:text-amber-300',\n  },\n};\n\nexport function EmptyState({\n  icon,\n  heading,\n  description,\n  action,\n  secondaryAction,\n  variant = 'default',\n  className,\n  testId,\n}: EmptyStateProps) {\n  const headingId = React.useId();\n  const descriptionId = React.useId();\n  const styles = variantStyles[variant] ?? variantStyles.default;\n\n  const renderPrimaryAction = (): React.ReactNode => {\n    if (!action) return null;\n\n    if ('href' in action) {\n      return (\n        <Button\n          asChild\n          variant={action.variant ?? 'primary'}\n          className='mt-2 w-full max-w-xs sm:w-auto'\n        >\n          <Link\n            href={action.href}\n            target={action.target}\n            rel={action.rel}\n            aria-label={action.ariaLabel ?? action.label}\n          >\n            {action.label}\n          </Link>\n        </Button>\n      );\n    }\n\n    return (\n      <Button\n        variant={action.variant ?? 'primary'}\n        onClick={action.onClick}\n        aria-label={action.ariaLabel ?? action.label}\n        className='mt-2 w-full max-w-xs sm:w-auto'\n      >\n        {action.label}\n      </Button>\n    );\n  };\n\n  const renderSecondaryAction = (): React.ReactNode => {\n    if (!secondaryAction) return null;\n\n    if ('href' in secondaryAction) {\n      return (\n        <Link\n          href={secondaryAction.href}\n          target={secondaryAction.target}\n          rel={secondaryAction.rel}\n          className={cn(\n            'mt-4 text-sm font-semibold underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary',\n            styles.secondary\n          )}\n        >\n          {secondaryAction.label}\n        </Link>\n      );\n    }\n\n    return (\n      <button\n        type='button'\n        onClick={secondaryAction.onClick}\n        aria-label={secondaryAction.ariaLabel ?? secondaryAction.label}\n        className={cn(\n          'mt-4 text-sm font-semibold underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary',\n          styles.secondary\n        )}\n      >\n        {secondaryAction.label}\n      </button>\n    );\n  };\n\n  return (\n    <section\n      role='status'\n      aria-labelledby={headingId}\n      aria-describedby={description ? descriptionId : undefined}\n      data-testid={testId}\n      className={cn(\n        'flex flex-col items-center justify-center px-4 py-12 text-center',\n        className\n      )}\n    >\n      {icon && (\n        <div\n          className={cn(\n            'mb-4 flex h-12 w-12 items-center justify-center rounded-full',\n            styles.iconWrapper\n          )}\n          aria-hidden='true'\n        >\n          <span className='flex h-8 w-8 items-center justify-center'>\n            {icon}\n          </span>\n        </div>\n      )}\n\n      <h3\n        id={headingId}\n        className={cn('mb-2 text-lg font-semibold', styles.heading)}\n      >\n        {heading}\n      </h3>\n\n      {description && (\n        <p\n          id={descriptionId}\n          className={cn('mb-6 max-w-sm text-sm', styles.description)}\n        >\n          {description}\n        </p>\n      )}\n\n      {renderPrimaryAction()}\n      {renderSecondaryAction()}\n    </section>\n  );\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useSemanticElements",
      "severity": "warning",
      "description": "The elements with this role can be changed to the following elements:\n<output>",
      "message": [
        {
          "elements": [],
          "content": "The elements with this role can be changed to the following elements:\n<output>"
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "For examples and more information, see "
                },
                {
                  "elements": [
                    {
                      "Hyperlink": {
                        "href": "https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles"
                      }
                    }
                  ],
                  "content": "WAI-ARIA Roles"
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "components/ui/LoadingSpinner.tsx" },
        "span": [780, 793],
        "sourceCode": "'use client';\n\nimport { cn } from '@/lib/utils';\n\nexport type LoadingSpinnerTone = 'primary' | 'muted' | 'inverse';\n\nexport interface LoadingSpinnerProps {\n  size?: 'sm' | 'md' | 'lg';\n  tone?: LoadingSpinnerTone;\n  className?: string;\n  label?: string;\n}\n\nconst sizeClasses: Record<NonNullable<LoadingSpinnerProps['size']>, string> = {\n  sm: 'h-4 w-4',\n  md: 'h-6 w-6',\n  lg: 'h-8 w-8',\n};\n\nconst toneClasses: Record<LoadingSpinnerTone, string> = {\n  primary: 'text-primary-token',\n  muted: 'text-muted-foreground',\n  inverse: 'text-white',\n};\n\nexport function LoadingSpinner({\n  size = 'md',\n  tone = 'primary',\n  className,\n  label = 'Loading',\n}: LoadingSpinnerProps) {\n  const dimension = sizeClasses[size];\n  const toneClass = toneClasses[tone];\n\n  return (\n    <span\n      role='status'\n      aria-label={label}\n      data-testid='spinner'\n      data-size={size}\n      data-tone={tone}\n      className={cn(\n        'inline-flex items-center justify-center align-middle text-current',\n        'motion-reduce:transition-none motion-reduce:animate-none',\n        dimension,\n        toneClass,\n        className\n      )}\n    >\n      <span className='relative block h-full w-full' aria-hidden='true'>\n        <span\n          className={cn(\n            'absolute inset-0 rounded-full border-2 border-current/20',\n            'transition-transform duration-200 ease-out motion-reduce:transition-none'\n          )}\n        />\n        <span\n          className={cn(\n            'absolute inset-0 rounded-full border-2 border-current border-t-transparent',\n            'animate-spin motion-reduce:animate-[spin_1.2s_linear_infinite]',\n            'will-change-transform'\n          )}\n        />\n      </span>\n    </span>\n  );\n}\n\nexport const Spinner = LoadingSpinner;\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/components/auth/OtpInput.test.tsx" },
        "span": [555, 744],
        "sourceCode": "import { render, screen } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OtpInput } from '@/components/auth/atoms/OtpInput';\n\n// Mock Clerk Elements\nvi.mock('@clerk/elements/common', () => ({\n  Input: ({\n    type,\n    autoSubmit,\n    length,\n    className,\n    'aria-label': ariaLabel,\n    render,\n  }: {\n    type: string;\n    autoSubmit?: boolean;\n    length?: number;\n    className?: string;\n    'aria-label'?: string;\n    render?: (props: { value: string; status: string }) => React.ReactNode;\n  }) => (\n    <div\n      data-testid='clerk-otp-input'\n      data-type={type}\n      data-auto-submit={autoSubmit}\n      data-length={length}\n      className={className}\n      aria-label={ariaLabel}\n    >\n      {/* Render 6 digit slots for testing */}\n      {render && (\n        <div data-testid='otp-slots'>\n          {Array.from({ length: length || 6 }).map((_, i) => (\n            <div key={i} data-testid={`otp-slot-${i}`}>\n              {render({\n                value: '',\n                status: i === 0 ? 'cursor' : 'selected',\n              })}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  ),\n}));\n\ndescribe('OtpInput', () => {\n  it('renders with type=\"otp\"', () => {\n    render(<OtpInput />);\n\n    const input = screen.getByTestId('clerk-otp-input');\n    expect(input).toHaveAttribute('data-type', 'otp');\n  });\n\n  it('has autoSubmit enabled by default', () => {\n    render(<OtpInput />);\n\n    const input = screen.getByTestId('clerk-otp-input');\n    expect(input).toHaveAttribute('data-auto-submit', 'true');\n  });\n\n  it('can disable autoSubmit', () => {\n    render(<OtpInput autoSubmit={false} />);\n\n    const input = screen.getByTestId('clerk-otp-input');\n    expect(input).toHaveAttribute('data-auto-submit', 'false');\n  });\n\n  it('has length of 6 digits', () => {\n    render(<OtpInput />);\n\n    const input = screen.getByTestId('clerk-otp-input');\n    expect(input).toHaveAttribute('data-length', '6');\n  });\n\n  it('renders 6 digit slots', () => {\n    render(<OtpInput />);\n\n    const slots = screen.getByTestId('otp-slots');\n    expect(slots.children).toHaveLength(6);\n  });\n\n  it('has accessible aria-label', () => {\n    render(<OtpInput aria-label='Enter verification code' />);\n\n    const input = screen.getByTestId('clerk-otp-input');\n    expect(input).toHaveAttribute('aria-label', 'Enter verification code');\n  });\n\n  it('uses default aria-label when not provided', () => {\n    render(<OtpInput />);\n\n    const input = screen.getByTestId('clerk-otp-input');\n    expect(input).toHaveAttribute('aria-label', 'One-time password');\n  });\n\n  it('renders with flex layout for digit slots', () => {\n    render(<OtpInput />);\n\n    const input = screen.getByTestId('clerk-otp-input');\n    expect(input).toHaveClass('flex', 'justify-center', 'gap-2');\n  });\n\n  it('renders cursor indicator for active slot', () => {\n    render(<OtpInput />);\n\n    // First slot should have cursor status\n    const firstSlot = screen.getByTestId('otp-slot-0');\n    const cursorIndicator = firstSlot.querySelector('[aria-hidden=\"true\"]');\n    expect(cursorIndicator).toBeInTheDocument();\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/components/auth/OtpSignInForm.test.tsx" },
        "span": [1914, 2106],
        "sourceCode": "import { fireEvent, screen, within } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OtpSignInForm } from '@/components/auth/OtpSignInForm';\nimport { fastRender, renderWithClerk } from '@/tests/utils/fast-render';\n\nvi.mock('@clerk/nextjs', () => ({\n  useClerk: () => ({\n    client: {},\n  }),\n}));\n\n// Mock Clerk Elements\nvi.mock('@clerk/elements/common', () => ({\n  GlobalError: ({ className }: { className?: string }) => (\n    <div data-testid='global-error' className={className} />\n  ),\n  Field: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='field'>{children}</div>\n  ),\n  Label: ({\n    children,\n    className,\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n  }) => (\n    <label data-testid='clerk-label' className={className}>\n      {children}\n    </label>\n  ),\n  Input: ({\n    type,\n    children,\n    asChild,\n    autoSubmit,\n    length,\n    'aria-label': ariaLabel,\n  }: {\n    type: string;\n    children?: React.ReactNode;\n    asChild?: boolean;\n    autoSubmit?: boolean;\n    length?: number;\n    'aria-label'?: string;\n  }) => (\n    <div\n      data-testid='clerk-input'\n      data-type={type}\n      data-aschild={asChild}\n      data-auto-submit={autoSubmit}\n      data-length={length}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </div>\n  ),\n  FieldError: ({ className }: { className?: string }) => (\n    <div data-testid='field-error' className={className} />\n  ),\n  Loading: ({\n    children,\n  }: {\n    children: (isLoading: boolean) => React.ReactNode;\n  }) => children(false),\n\n  Connection: ({\n    name,\n    children,\n    className,\n    disabled,\n    'aria-busy': ariaBusy,\n    onClickCapture,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    'aria-busy'?: boolean;\n    onClickCapture?: React.MouseEventHandler<HTMLButtonElement>;\n  }) => (\n    <button\n      data-testid='clerk-connection'\n      data-name={name}\n      className={className}\n      disabled={disabled}\n      aria-busy={ariaBusy}\n      onClickCapture={onClickCapture}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@clerk/elements/sign-in', () => ({\n  Root: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='signin-root'>{children}</div>\n  ),\n  Step: ({\n    name,\n    children,\n    'aria-label': ariaLabel,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    'aria-label'?: string;\n  }) => (\n    <div data-testid={`signin-step-${name}`} aria-label={ariaLabel}>\n      {children}\n    </div>\n  ),\n  Strategy: ({\n    name,\n    children,\n  }: {\n    name: string;\n    children: React.ReactNode;\n  }) => <div data-testid={`signin-strategy-${name}`}>{children}</div>,\n  Action: ({\n    children,\n    className,\n    'aria-busy': ariaBusy,\n  }: {\n    submit?: boolean;\n    navigate?: string;\n    children: React.ReactNode;\n    className?: string;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='signin-action'\n      className={className}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('next/link', () => ({\n  default: ({\n    href,\n    children,\n    className,\n  }: {\n    href: string;\n    children: React.ReactNode;\n    className?: string;\n  }) => (\n    <a href={href} className={className}>\n      {children}\n    </a>\n  ),\n}));\n\ndescribe('OtpSignInForm', () => {\n  const renderSignIn = () => fastRender(<OtpSignInForm />);\n  const renderSignInIntegration = () => renderWithClerk(<OtpSignInForm />);\n\n  it('renders the signin form correctly', () => {\n    renderSignIn();\n\n    expect(screen.getByTestId('signin-root')).toBeInTheDocument();\n  });\n\n  it('renders both form steps', () => {\n    renderSignIn();\n\n    expect(screen.getByTestId('signin-step-start')).toBeInTheDocument();\n    expect(screen.getByTestId('signin-step-verifications')).toBeInTheDocument();\n  });\n\n  it('includes ARIA labels for accessibility', () => {\n    renderSignIn();\n\n    const startStep = screen.getByTestId('signin-step-start');\n    const verificationsStep = screen.getByTestId('signin-step-verifications');\n\n    expect(startStep).toHaveAttribute('aria-label', 'Choose a sign-in method');\n    expect(verificationsStep).toHaveAttribute(\n      'aria-label',\n      'Verify your email with code'\n    );\n  });\n\n  it('renders the multi-method sign-in buttons', () => {\n    renderSignIn();\n\n    expect(screen.getByText('Continue with email')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Spotify')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Google')).toBeInTheDocument();\n  });\n\n  it('displays \"Verify code\" button in verifications step', () => {\n    renderSignIn();\n\n    const buttons = screen.getAllByTestId('signin-action');\n    expect(\n      buttons.some(button => button.textContent?.includes('Verify code'))\n    ).toBe(true);\n  });\n\n  it('uses semantic design tokens for global error', () => {\n    renderSignIn();\n\n    const globalError = screen.getByTestId('global-error');\n    expect(globalError).toHaveClass('text-destructive');\n  });\n\n  it('renders field errors with correct styling', () => {\n    renderSignIn();\n\n    const fieldErrors = screen.getAllByTestId('field-error');\n    expect(fieldErrors.length).toBeGreaterThan(0);\n  });\n\n  it('supports the email sign-in flow end-to-end', () => {\n    renderSignInIntegration();\n\n    fireEvent.click(screen.getByText('Continue with email'));\n\n    expect(screen.queryByText('Continue with Spotify')).not.toBeInTheDocument();\n    expect(screen.queryByText('Continue with Google')).not.toBeInTheDocument();\n\n    const inputs = screen.getAllByTestId('clerk-input');\n    const hasEmailInput = inputs.some(input =>\n      input.getAttribute('data-type')?.includes('email')\n    );\n    expect(hasEmailInput).toBe(true);\n  });\n\n  it('renders OTP input with type=\"otp\" and autoSubmit', () => {\n    renderSignIn();\n\n    const verificationsStep = screen.getByTestId('signin-step-verifications');\n    const otpInputs = within(verificationsStep).getAllByTestId('clerk-input');\n    const otpInput = otpInputs.find(\n      input => input.getAttribute('data-type') === 'otp'\n    );\n    expect(otpInput).toBeDefined();\n    expect(otpInput).toHaveAttribute('data-type', 'otp');\n    expect(otpInput).toHaveAttribute('data-auto-submit', 'true');\n  });\n\n  it('has screen reader labels for form fields', () => {\n    renderSignIn();\n\n    const labels = screen.getAllByTestId('clerk-label');\n    expect(labels.length).toBeGreaterThan(0);\n    labels.forEach(label => {\n      expect(label).toHaveClass('sr-only');\n    });\n  });\n\n  it('has aria-live region for global errors', () => {\n    renderSignIn();\n\n    const errorContainer = screen.getByRole('alert');\n    expect(errorContainer).toHaveAttribute('aria-live', 'polite');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/components/auth/OtpSignInForm.test.tsx" },
        "span": [762, 847],
        "sourceCode": "import { fireEvent, screen, within } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OtpSignInForm } from '@/components/auth/OtpSignInForm';\nimport { fastRender, renderWithClerk } from '@/tests/utils/fast-render';\n\nvi.mock('@clerk/nextjs', () => ({\n  useClerk: () => ({\n    client: {},\n  }),\n}));\n\n// Mock Clerk Elements\nvi.mock('@clerk/elements/common', () => ({\n  GlobalError: ({ className }: { className?: string }) => (\n    <div data-testid='global-error' className={className} />\n  ),\n  Field: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='field'>{children}</div>\n  ),\n  Label: ({\n    children,\n    className,\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n  }) => (\n    <label data-testid='clerk-label' className={className}>\n      {children}\n    </label>\n  ),\n  Input: ({\n    type,\n    children,\n    asChild,\n    autoSubmit,\n    length,\n    'aria-label': ariaLabel,\n  }: {\n    type: string;\n    children?: React.ReactNode;\n    asChild?: boolean;\n    autoSubmit?: boolean;\n    length?: number;\n    'aria-label'?: string;\n  }) => (\n    <div\n      data-testid='clerk-input'\n      data-type={type}\n      data-aschild={asChild}\n      data-auto-submit={autoSubmit}\n      data-length={length}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </div>\n  ),\n  FieldError: ({ className }: { className?: string }) => (\n    <div data-testid='field-error' className={className} />\n  ),\n  Loading: ({\n    children,\n  }: {\n    children: (isLoading: boolean) => React.ReactNode;\n  }) => children(false),\n\n  Connection: ({\n    name,\n    children,\n    className,\n    disabled,\n    'aria-busy': ariaBusy,\n    onClickCapture,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    'aria-busy'?: boolean;\n    onClickCapture?: React.MouseEventHandler<HTMLButtonElement>;\n  }) => (\n    <button\n      data-testid='clerk-connection'\n      data-name={name}\n      className={className}\n      disabled={disabled}\n      aria-busy={ariaBusy}\n      onClickCapture={onClickCapture}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@clerk/elements/sign-in', () => ({\n  Root: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='signin-root'>{children}</div>\n  ),\n  Step: ({\n    name,\n    children,\n    'aria-label': ariaLabel,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    'aria-label'?: string;\n  }) => (\n    <div data-testid={`signin-step-${name}`} aria-label={ariaLabel}>\n      {children}\n    </div>\n  ),\n  Strategy: ({\n    name,\n    children,\n  }: {\n    name: string;\n    children: React.ReactNode;\n  }) => <div data-testid={`signin-strategy-${name}`}>{children}</div>,\n  Action: ({\n    children,\n    className,\n    'aria-busy': ariaBusy,\n  }: {\n    submit?: boolean;\n    navigate?: string;\n    children: React.ReactNode;\n    className?: string;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='signin-action'\n      className={className}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('next/link', () => ({\n  default: ({\n    href,\n    children,\n    className,\n  }: {\n    href: string;\n    children: React.ReactNode;\n    className?: string;\n  }) => (\n    <a href={href} className={className}>\n      {children}\n    </a>\n  ),\n}));\n\ndescribe('OtpSignInForm', () => {\n  const renderSignIn = () => fastRender(<OtpSignInForm />);\n  const renderSignInIntegration = () => renderWithClerk(<OtpSignInForm />);\n\n  it('renders the signin form correctly', () => {\n    renderSignIn();\n\n    expect(screen.getByTestId('signin-root')).toBeInTheDocument();\n  });\n\n  it('renders both form steps', () => {\n    renderSignIn();\n\n    expect(screen.getByTestId('signin-step-start')).toBeInTheDocument();\n    expect(screen.getByTestId('signin-step-verifications')).toBeInTheDocument();\n  });\n\n  it('includes ARIA labels for accessibility', () => {\n    renderSignIn();\n\n    const startStep = screen.getByTestId('signin-step-start');\n    const verificationsStep = screen.getByTestId('signin-step-verifications');\n\n    expect(startStep).toHaveAttribute('aria-label', 'Choose a sign-in method');\n    expect(verificationsStep).toHaveAttribute(\n      'aria-label',\n      'Verify your email with code'\n    );\n  });\n\n  it('renders the multi-method sign-in buttons', () => {\n    renderSignIn();\n\n    expect(screen.getByText('Continue with email')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Spotify')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Google')).toBeInTheDocument();\n  });\n\n  it('displays \"Verify code\" button in verifications step', () => {\n    renderSignIn();\n\n    const buttons = screen.getAllByTestId('signin-action');\n    expect(\n      buttons.some(button => button.textContent?.includes('Verify code'))\n    ).toBe(true);\n  });\n\n  it('uses semantic design tokens for global error', () => {\n    renderSignIn();\n\n    const globalError = screen.getByTestId('global-error');\n    expect(globalError).toHaveClass('text-destructive');\n  });\n\n  it('renders field errors with correct styling', () => {\n    renderSignIn();\n\n    const fieldErrors = screen.getAllByTestId('field-error');\n    expect(fieldErrors.length).toBeGreaterThan(0);\n  });\n\n  it('supports the email sign-in flow end-to-end', () => {\n    renderSignInIntegration();\n\n    fireEvent.click(screen.getByText('Continue with email'));\n\n    expect(screen.queryByText('Continue with Spotify')).not.toBeInTheDocument();\n    expect(screen.queryByText('Continue with Google')).not.toBeInTheDocument();\n\n    const inputs = screen.getAllByTestId('clerk-input');\n    const hasEmailInput = inputs.some(input =>\n      input.getAttribute('data-type')?.includes('email')\n    );\n    expect(hasEmailInput).toBe(true);\n  });\n\n  it('renders OTP input with type=\"otp\" and autoSubmit', () => {\n    renderSignIn();\n\n    const verificationsStep = screen.getByTestId('signin-step-verifications');\n    const otpInputs = within(verificationsStep).getAllByTestId('clerk-input');\n    const otpInput = otpInputs.find(\n      input => input.getAttribute('data-type') === 'otp'\n    );\n    expect(otpInput).toBeDefined();\n    expect(otpInput).toHaveAttribute('data-type', 'otp');\n    expect(otpInput).toHaveAttribute('data-auto-submit', 'true');\n  });\n\n  it('has screen reader labels for form fields', () => {\n    renderSignIn();\n\n    const labels = screen.getAllByTestId('clerk-label');\n    expect(labels.length).toBeGreaterThan(0);\n    labels.forEach(label => {\n      expect(label).toHaveClass('sr-only');\n    });\n  });\n\n  it('has aria-live region for global errors', () => {\n    renderSignIn();\n\n    const errorContainer = screen.getByRole('alert');\n    expect(errorContainer).toHaveAttribute('aria-live', 'polite');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/components/auth/OtpSignInForm.test.tsx" },
        "span": [1127, 1313],
        "sourceCode": "import { fireEvent, screen, within } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OtpSignInForm } from '@/components/auth/OtpSignInForm';\nimport { fastRender, renderWithClerk } from '@/tests/utils/fast-render';\n\nvi.mock('@clerk/nextjs', () => ({\n  useClerk: () => ({\n    client: {},\n  }),\n}));\n\n// Mock Clerk Elements\nvi.mock('@clerk/elements/common', () => ({\n  GlobalError: ({ className }: { className?: string }) => (\n    <div data-testid='global-error' className={className} />\n  ),\n  Field: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='field'>{children}</div>\n  ),\n  Label: ({\n    children,\n    className,\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n  }) => (\n    <label data-testid='clerk-label' className={className}>\n      {children}\n    </label>\n  ),\n  Input: ({\n    type,\n    children,\n    asChild,\n    autoSubmit,\n    length,\n    'aria-label': ariaLabel,\n  }: {\n    type: string;\n    children?: React.ReactNode;\n    asChild?: boolean;\n    autoSubmit?: boolean;\n    length?: number;\n    'aria-label'?: string;\n  }) => (\n    <div\n      data-testid='clerk-input'\n      data-type={type}\n      data-aschild={asChild}\n      data-auto-submit={autoSubmit}\n      data-length={length}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </div>\n  ),\n  FieldError: ({ className }: { className?: string }) => (\n    <div data-testid='field-error' className={className} />\n  ),\n  Loading: ({\n    children,\n  }: {\n    children: (isLoading: boolean) => React.ReactNode;\n  }) => children(false),\n\n  Connection: ({\n    name,\n    children,\n    className,\n    disabled,\n    'aria-busy': ariaBusy,\n    onClickCapture,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    'aria-busy'?: boolean;\n    onClickCapture?: React.MouseEventHandler<HTMLButtonElement>;\n  }) => (\n    <button\n      data-testid='clerk-connection'\n      data-name={name}\n      className={className}\n      disabled={disabled}\n      aria-busy={ariaBusy}\n      onClickCapture={onClickCapture}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@clerk/elements/sign-in', () => ({\n  Root: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='signin-root'>{children}</div>\n  ),\n  Step: ({\n    name,\n    children,\n    'aria-label': ariaLabel,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    'aria-label'?: string;\n  }) => (\n    <div data-testid={`signin-step-${name}`} aria-label={ariaLabel}>\n      {children}\n    </div>\n  ),\n  Strategy: ({\n    name,\n    children,\n  }: {\n    name: string;\n    children: React.ReactNode;\n  }) => <div data-testid={`signin-strategy-${name}`}>{children}</div>,\n  Action: ({\n    children,\n    className,\n    'aria-busy': ariaBusy,\n  }: {\n    submit?: boolean;\n    navigate?: string;\n    children: React.ReactNode;\n    className?: string;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='signin-action'\n      className={className}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('next/link', () => ({\n  default: ({\n    href,\n    children,\n    className,\n  }: {\n    href: string;\n    children: React.ReactNode;\n    className?: string;\n  }) => (\n    <a href={href} className={className}>\n      {children}\n    </a>\n  ),\n}));\n\ndescribe('OtpSignInForm', () => {\n  const renderSignIn = () => fastRender(<OtpSignInForm />);\n  const renderSignInIntegration = () => renderWithClerk(<OtpSignInForm />);\n\n  it('renders the signin form correctly', () => {\n    renderSignIn();\n\n    expect(screen.getByTestId('signin-root')).toBeInTheDocument();\n  });\n\n  it('renders both form steps', () => {\n    renderSignIn();\n\n    expect(screen.getByTestId('signin-step-start')).toBeInTheDocument();\n    expect(screen.getByTestId('signin-step-verifications')).toBeInTheDocument();\n  });\n\n  it('includes ARIA labels for accessibility', () => {\n    renderSignIn();\n\n    const startStep = screen.getByTestId('signin-step-start');\n    const verificationsStep = screen.getByTestId('signin-step-verifications');\n\n    expect(startStep).toHaveAttribute('aria-label', 'Choose a sign-in method');\n    expect(verificationsStep).toHaveAttribute(\n      'aria-label',\n      'Verify your email with code'\n    );\n  });\n\n  it('renders the multi-method sign-in buttons', () => {\n    renderSignIn();\n\n    expect(screen.getByText('Continue with email')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Spotify')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Google')).toBeInTheDocument();\n  });\n\n  it('displays \"Verify code\" button in verifications step', () => {\n    renderSignIn();\n\n    const buttons = screen.getAllByTestId('signin-action');\n    expect(\n      buttons.some(button => button.textContent?.includes('Verify code'))\n    ).toBe(true);\n  });\n\n  it('uses semantic design tokens for global error', () => {\n    renderSignIn();\n\n    const globalError = screen.getByTestId('global-error');\n    expect(globalError).toHaveClass('text-destructive');\n  });\n\n  it('renders field errors with correct styling', () => {\n    renderSignIn();\n\n    const fieldErrors = screen.getAllByTestId('field-error');\n    expect(fieldErrors.length).toBeGreaterThan(0);\n  });\n\n  it('supports the email sign-in flow end-to-end', () => {\n    renderSignInIntegration();\n\n    fireEvent.click(screen.getByText('Continue with email'));\n\n    expect(screen.queryByText('Continue with Spotify')).not.toBeInTheDocument();\n    expect(screen.queryByText('Continue with Google')).not.toBeInTheDocument();\n\n    const inputs = screen.getAllByTestId('clerk-input');\n    const hasEmailInput = inputs.some(input =>\n      input.getAttribute('data-type')?.includes('email')\n    );\n    expect(hasEmailInput).toBe(true);\n  });\n\n  it('renders OTP input with type=\"otp\" and autoSubmit', () => {\n    renderSignIn();\n\n    const verificationsStep = screen.getByTestId('signin-step-verifications');\n    const otpInputs = within(verificationsStep).getAllByTestId('clerk-input');\n    const otpInput = otpInputs.find(\n      input => input.getAttribute('data-type') === 'otp'\n    );\n    expect(otpInput).toBeDefined();\n    expect(otpInput).toHaveAttribute('data-type', 'otp');\n    expect(otpInput).toHaveAttribute('data-auto-submit', 'true');\n  });\n\n  it('has screen reader labels for form fields', () => {\n    renderSignIn();\n\n    const labels = screen.getAllByTestId('clerk-label');\n    expect(labels.length).toBeGreaterThan(0);\n    labels.forEach(label => {\n      expect(label).toHaveClass('sr-only');\n    });\n  });\n\n  it('has aria-live region for global errors', () => {\n    renderSignIn();\n\n    const errorContainer = screen.getByRole('alert');\n    expect(errorContainer).toHaveAttribute('aria-live', 'polite');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/components/auth/OtpSignInForm.test.tsx" },
        "span": [2470, 2534],
        "sourceCode": "import { fireEvent, screen, within } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OtpSignInForm } from '@/components/auth/OtpSignInForm';\nimport { fastRender, renderWithClerk } from '@/tests/utils/fast-render';\n\nvi.mock('@clerk/nextjs', () => ({\n  useClerk: () => ({\n    client: {},\n  }),\n}));\n\n// Mock Clerk Elements\nvi.mock('@clerk/elements/common', () => ({\n  GlobalError: ({ className }: { className?: string }) => (\n    <div data-testid='global-error' className={className} />\n  ),\n  Field: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='field'>{children}</div>\n  ),\n  Label: ({\n    children,\n    className,\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n  }) => (\n    <label data-testid='clerk-label' className={className}>\n      {children}\n    </label>\n  ),\n  Input: ({\n    type,\n    children,\n    asChild,\n    autoSubmit,\n    length,\n    'aria-label': ariaLabel,\n  }: {\n    type: string;\n    children?: React.ReactNode;\n    asChild?: boolean;\n    autoSubmit?: boolean;\n    length?: number;\n    'aria-label'?: string;\n  }) => (\n    <div\n      data-testid='clerk-input'\n      data-type={type}\n      data-aschild={asChild}\n      data-auto-submit={autoSubmit}\n      data-length={length}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </div>\n  ),\n  FieldError: ({ className }: { className?: string }) => (\n    <div data-testid='field-error' className={className} />\n  ),\n  Loading: ({\n    children,\n  }: {\n    children: (isLoading: boolean) => React.ReactNode;\n  }) => children(false),\n\n  Connection: ({\n    name,\n    children,\n    className,\n    disabled,\n    'aria-busy': ariaBusy,\n    onClickCapture,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    'aria-busy'?: boolean;\n    onClickCapture?: React.MouseEventHandler<HTMLButtonElement>;\n  }) => (\n    <button\n      data-testid='clerk-connection'\n      data-name={name}\n      className={className}\n      disabled={disabled}\n      aria-busy={ariaBusy}\n      onClickCapture={onClickCapture}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@clerk/elements/sign-in', () => ({\n  Root: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='signin-root'>{children}</div>\n  ),\n  Step: ({\n    name,\n    children,\n    'aria-label': ariaLabel,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    'aria-label'?: string;\n  }) => (\n    <div data-testid={`signin-step-${name}`} aria-label={ariaLabel}>\n      {children}\n    </div>\n  ),\n  Strategy: ({\n    name,\n    children,\n  }: {\n    name: string;\n    children: React.ReactNode;\n  }) => <div data-testid={`signin-strategy-${name}`}>{children}</div>,\n  Action: ({\n    children,\n    className,\n    'aria-busy': ariaBusy,\n  }: {\n    submit?: boolean;\n    navigate?: string;\n    children: React.ReactNode;\n    className?: string;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='signin-action'\n      className={className}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('next/link', () => ({\n  default: ({\n    href,\n    children,\n    className,\n  }: {\n    href: string;\n    children: React.ReactNode;\n    className?: string;\n  }) => (\n    <a href={href} className={className}>\n      {children}\n    </a>\n  ),\n}));\n\ndescribe('OtpSignInForm', () => {\n  const renderSignIn = () => fastRender(<OtpSignInForm />);\n  const renderSignInIntegration = () => renderWithClerk(<OtpSignInForm />);\n\n  it('renders the signin form correctly', () => {\n    renderSignIn();\n\n    expect(screen.getByTestId('signin-root')).toBeInTheDocument();\n  });\n\n  it('renders both form steps', () => {\n    renderSignIn();\n\n    expect(screen.getByTestId('signin-step-start')).toBeInTheDocument();\n    expect(screen.getByTestId('signin-step-verifications')).toBeInTheDocument();\n  });\n\n  it('includes ARIA labels for accessibility', () => {\n    renderSignIn();\n\n    const startStep = screen.getByTestId('signin-step-start');\n    const verificationsStep = screen.getByTestId('signin-step-verifications');\n\n    expect(startStep).toHaveAttribute('aria-label', 'Choose a sign-in method');\n    expect(verificationsStep).toHaveAttribute(\n      'aria-label',\n      'Verify your email with code'\n    );\n  });\n\n  it('renders the multi-method sign-in buttons', () => {\n    renderSignIn();\n\n    expect(screen.getByText('Continue with email')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Spotify')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Google')).toBeInTheDocument();\n  });\n\n  it('displays \"Verify code\" button in verifications step', () => {\n    renderSignIn();\n\n    const buttons = screen.getAllByTestId('signin-action');\n    expect(\n      buttons.some(button => button.textContent?.includes('Verify code'))\n    ).toBe(true);\n  });\n\n  it('uses semantic design tokens for global error', () => {\n    renderSignIn();\n\n    const globalError = screen.getByTestId('global-error');\n    expect(globalError).toHaveClass('text-destructive');\n  });\n\n  it('renders field errors with correct styling', () => {\n    renderSignIn();\n\n    const fieldErrors = screen.getAllByTestId('field-error');\n    expect(fieldErrors.length).toBeGreaterThan(0);\n  });\n\n  it('supports the email sign-in flow end-to-end', () => {\n    renderSignInIntegration();\n\n    fireEvent.click(screen.getByText('Continue with email'));\n\n    expect(screen.queryByText('Continue with Spotify')).not.toBeInTheDocument();\n    expect(screen.queryByText('Continue with Google')).not.toBeInTheDocument();\n\n    const inputs = screen.getAllByTestId('clerk-input');\n    const hasEmailInput = inputs.some(input =>\n      input.getAttribute('data-type')?.includes('email')\n    );\n    expect(hasEmailInput).toBe(true);\n  });\n\n  it('renders OTP input with type=\"otp\" and autoSubmit', () => {\n    renderSignIn();\n\n    const verificationsStep = screen.getByTestId('signin-step-verifications');\n    const otpInputs = within(verificationsStep).getAllByTestId('clerk-input');\n    const otpInput = otpInputs.find(\n      input => input.getAttribute('data-type') === 'otp'\n    );\n    expect(otpInput).toBeDefined();\n    expect(otpInput).toHaveAttribute('data-type', 'otp');\n    expect(otpInput).toHaveAttribute('data-auto-submit', 'true');\n  });\n\n  it('has screen reader labels for form fields', () => {\n    renderSignIn();\n\n    const labels = screen.getAllByTestId('clerk-label');\n    expect(labels.length).toBeGreaterThan(0);\n    labels.forEach(label => {\n      expect(label).toHaveClass('sr-only');\n    });\n  });\n\n  it('has aria-live region for global errors', () => {\n    renderSignIn();\n\n    const errorContainer = screen.getByRole('alert');\n    expect(errorContainer).toHaveAttribute('aria-live', 'polite');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/components/auth/OtpSignInForm.test.tsx" },
        "span": [2951, 3053],
        "sourceCode": "import { fireEvent, screen, within } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OtpSignInForm } from '@/components/auth/OtpSignInForm';\nimport { fastRender, renderWithClerk } from '@/tests/utils/fast-render';\n\nvi.mock('@clerk/nextjs', () => ({\n  useClerk: () => ({\n    client: {},\n  }),\n}));\n\n// Mock Clerk Elements\nvi.mock('@clerk/elements/common', () => ({\n  GlobalError: ({ className }: { className?: string }) => (\n    <div data-testid='global-error' className={className} />\n  ),\n  Field: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='field'>{children}</div>\n  ),\n  Label: ({\n    children,\n    className,\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n  }) => (\n    <label data-testid='clerk-label' className={className}>\n      {children}\n    </label>\n  ),\n  Input: ({\n    type,\n    children,\n    asChild,\n    autoSubmit,\n    length,\n    'aria-label': ariaLabel,\n  }: {\n    type: string;\n    children?: React.ReactNode;\n    asChild?: boolean;\n    autoSubmit?: boolean;\n    length?: number;\n    'aria-label'?: string;\n  }) => (\n    <div\n      data-testid='clerk-input'\n      data-type={type}\n      data-aschild={asChild}\n      data-auto-submit={autoSubmit}\n      data-length={length}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </div>\n  ),\n  FieldError: ({ className }: { className?: string }) => (\n    <div data-testid='field-error' className={className} />\n  ),\n  Loading: ({\n    children,\n  }: {\n    children: (isLoading: boolean) => React.ReactNode;\n  }) => children(false),\n\n  Connection: ({\n    name,\n    children,\n    className,\n    disabled,\n    'aria-busy': ariaBusy,\n    onClickCapture,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    'aria-busy'?: boolean;\n    onClickCapture?: React.MouseEventHandler<HTMLButtonElement>;\n  }) => (\n    <button\n      data-testid='clerk-connection'\n      data-name={name}\n      className={className}\n      disabled={disabled}\n      aria-busy={ariaBusy}\n      onClickCapture={onClickCapture}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@clerk/elements/sign-in', () => ({\n  Root: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='signin-root'>{children}</div>\n  ),\n  Step: ({\n    name,\n    children,\n    'aria-label': ariaLabel,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    'aria-label'?: string;\n  }) => (\n    <div data-testid={`signin-step-${name}`} aria-label={ariaLabel}>\n      {children}\n    </div>\n  ),\n  Strategy: ({\n    name,\n    children,\n  }: {\n    name: string;\n    children: React.ReactNode;\n  }) => <div data-testid={`signin-strategy-${name}`}>{children}</div>,\n  Action: ({\n    children,\n    className,\n    'aria-busy': ariaBusy,\n  }: {\n    submit?: boolean;\n    navigate?: string;\n    children: React.ReactNode;\n    className?: string;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='signin-action'\n      className={className}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('next/link', () => ({\n  default: ({\n    href,\n    children,\n    className,\n  }: {\n    href: string;\n    children: React.ReactNode;\n    className?: string;\n  }) => (\n    <a href={href} className={className}>\n      {children}\n    </a>\n  ),\n}));\n\ndescribe('OtpSignInForm', () => {\n  const renderSignIn = () => fastRender(<OtpSignInForm />);\n  const renderSignInIntegration = () => renderWithClerk(<OtpSignInForm />);\n\n  it('renders the signin form correctly', () => {\n    renderSignIn();\n\n    expect(screen.getByTestId('signin-root')).toBeInTheDocument();\n  });\n\n  it('renders both form steps', () => {\n    renderSignIn();\n\n    expect(screen.getByTestId('signin-step-start')).toBeInTheDocument();\n    expect(screen.getByTestId('signin-step-verifications')).toBeInTheDocument();\n  });\n\n  it('includes ARIA labels for accessibility', () => {\n    renderSignIn();\n\n    const startStep = screen.getByTestId('signin-step-start');\n    const verificationsStep = screen.getByTestId('signin-step-verifications');\n\n    expect(startStep).toHaveAttribute('aria-label', 'Choose a sign-in method');\n    expect(verificationsStep).toHaveAttribute(\n      'aria-label',\n      'Verify your email with code'\n    );\n  });\n\n  it('renders the multi-method sign-in buttons', () => {\n    renderSignIn();\n\n    expect(screen.getByText('Continue with email')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Spotify')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Google')).toBeInTheDocument();\n  });\n\n  it('displays \"Verify code\" button in verifications step', () => {\n    renderSignIn();\n\n    const buttons = screen.getAllByTestId('signin-action');\n    expect(\n      buttons.some(button => button.textContent?.includes('Verify code'))\n    ).toBe(true);\n  });\n\n  it('uses semantic design tokens for global error', () => {\n    renderSignIn();\n\n    const globalError = screen.getByTestId('global-error');\n    expect(globalError).toHaveClass('text-destructive');\n  });\n\n  it('renders field errors with correct styling', () => {\n    renderSignIn();\n\n    const fieldErrors = screen.getAllByTestId('field-error');\n    expect(fieldErrors.length).toBeGreaterThan(0);\n  });\n\n  it('supports the email sign-in flow end-to-end', () => {\n    renderSignInIntegration();\n\n    fireEvent.click(screen.getByText('Continue with email'));\n\n    expect(screen.queryByText('Continue with Spotify')).not.toBeInTheDocument();\n    expect(screen.queryByText('Continue with Google')).not.toBeInTheDocument();\n\n    const inputs = screen.getAllByTestId('clerk-input');\n    const hasEmailInput = inputs.some(input =>\n      input.getAttribute('data-type')?.includes('email')\n    );\n    expect(hasEmailInput).toBe(true);\n  });\n\n  it('renders OTP input with type=\"otp\" and autoSubmit', () => {\n    renderSignIn();\n\n    const verificationsStep = screen.getByTestId('signin-step-verifications');\n    const otpInputs = within(verificationsStep).getAllByTestId('clerk-input');\n    const otpInput = otpInputs.find(\n      input => input.getAttribute('data-type') === 'otp'\n    );\n    expect(otpInput).toBeDefined();\n    expect(otpInput).toHaveAttribute('data-type', 'otp');\n    expect(otpInput).toHaveAttribute('data-auto-submit', 'true');\n  });\n\n  it('has screen reader labels for form fields', () => {\n    renderSignIn();\n\n    const labels = screen.getAllByTestId('clerk-label');\n    expect(labels.length).toBeGreaterThan(0);\n    labels.forEach(label => {\n      expect(label).toHaveClass('sr-only');\n    });\n  });\n\n  it('has aria-live region for global errors', () => {\n    renderSignIn();\n\n    const errorContainer = screen.getByRole('alert');\n    expect(errorContainer).toHaveAttribute('aria-live', 'polite');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noLabelWithoutControl",
      "severity": "warning",
      "description": "A form label must be associated with an input.",
      "message": [
        {
          "elements": [],
          "content": "A form label must be associated with an input."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/components/auth/OtpSignUpForm.test.tsx" },
        "span": [762, 847],
        "sourceCode": "import { fireEvent, screen, within } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OtpSignUpForm } from '@/components/auth/OtpSignUpForm';\nimport { fastRender, renderWithClerk } from '@/tests/utils/fast-render';\n\nvi.mock('@clerk/nextjs', () => ({\n  useClerk: () => ({\n    client: {},\n  }),\n}));\n\n// Mock Clerk Elements\nvi.mock('@clerk/elements/common', () => ({\n  GlobalError: ({ className }: { className?: string }) => (\n    <div data-testid='global-error' className={className} />\n  ),\n  Field: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='field'>{children}</div>\n  ),\n  Label: ({\n    children,\n    className,\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n  }) => (\n    <label data-testid='clerk-label' className={className}>\n      {children}\n    </label>\n  ),\n  Input: ({\n    type,\n    children,\n    asChild,\n    autoSubmit,\n    length,\n    'aria-label': ariaLabel,\n  }: {\n    type: string;\n    children?: React.ReactNode;\n    asChild?: boolean;\n    autoSubmit?: boolean;\n    length?: number;\n    'aria-label'?: string;\n  }) => (\n    <div\n      data-testid='clerk-input'\n      data-type={type}\n      data-aschild={asChild}\n      data-auto-submit={autoSubmit}\n      data-length={length}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </div>\n  ),\n  FieldError: ({ className }: { className?: string }) => (\n    <div data-testid='field-error' className={className} />\n  ),\n  Loading: ({\n    children,\n  }: {\n    children: (isLoading: boolean) => React.ReactNode;\n  }) => children(false),\n\n  Connection: ({\n    name,\n    children,\n    className,\n    disabled,\n    'aria-busy': ariaBusy,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='clerk-connection'\n      data-name={name}\n      className={className}\n      disabled={disabled}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@clerk/elements/sign-up', () => ({\n  Root: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='signup-root'>{children}</div>\n  ),\n  Step: ({\n    name,\n    children,\n    'aria-label': ariaLabel,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    'aria-label'?: string;\n  }) => (\n    <div data-testid={`signup-step-${name}`} aria-label={ariaLabel}>\n      {children}\n    </div>\n  ),\n  Strategy: ({\n    name,\n    children,\n  }: {\n    name: string;\n    children: React.ReactNode;\n  }) => <div data-testid={`signup-strategy-${name}`}>{children}</div>,\n  Action: ({\n    children,\n    className,\n    'aria-busy': ariaBusy,\n  }: {\n    submit?: boolean;\n    navigate?: string;\n    children: React.ReactNode;\n    className?: string;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='signup-action'\n      className={className}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('next/link', () => ({\n  default: ({\n    href,\n    children,\n    className,\n  }: {\n    href: string;\n    children: React.ReactNode;\n    className?: string;\n  }) => (\n    <a href={href} className={className}>\n      {children}\n    </a>\n  ),\n}));\n\ndescribe('OtpSignUpForm', () => {\n  const renderSignUp = () => fastRender(<OtpSignUpForm />);\n  const renderSignUpIntegration = () => renderWithClerk(<OtpSignUpForm />);\n\n  it('renders the signup form correctly', () => {\n    renderSignUp();\n\n    expect(screen.getByTestId('signup-root')).toBeInTheDocument();\n  });\n\n  it('renders both form steps', () => {\n    renderSignUp();\n\n    expect(screen.getByTestId('signup-step-start')).toBeInTheDocument();\n    expect(screen.getByTestId('signup-step-verifications')).toBeInTheDocument();\n  });\n\n  it('includes ARIA labels for accessibility', () => {\n    renderSignUp();\n\n    const startStep = screen.getByTestId('signup-step-start');\n    const verificationsStep = screen.getByTestId('signup-step-verifications');\n\n    expect(startStep).toHaveAttribute('aria-label', 'Choose a sign-up method');\n    expect(verificationsStep).toHaveAttribute(\n      'aria-label',\n      'Verify your email with code'\n    );\n  });\n\n  it('renders the multi-method sign-up buttons', () => {\n    renderSignUp();\n\n    expect(screen.getByText('Continue with email')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Spotify')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Google')).toBeInTheDocument();\n  });\n\n  it('uses semantic design tokens for global error', () => {\n    renderSignUp();\n\n    const globalError = screen.getByTestId('global-error');\n    expect(globalError).toHaveClass('text-destructive');\n  });\n\n  it('renders field errors with correct styling', () => {\n    renderSignUp();\n\n    const fieldErrors = screen.getAllByTestId('field-error');\n    expect(fieldErrors.length).toBeGreaterThan(0);\n  });\n\n  it('supports the email sign-up flow end-to-end', () => {\n    renderSignUpIntegration();\n\n    fireEvent.click(screen.getByText('Continue with email'));\n\n    const inputs = screen.getAllByTestId('clerk-input');\n    expect(inputs[0]).toHaveAttribute('data-type', 'email');\n  });\n\n  it('renders OTP input with type=\"otp\" and autoSubmit', () => {\n    renderSignUp();\n\n    const verificationsStep = screen.getByTestId('signup-step-verifications');\n    const otpInputs = within(verificationsStep).getAllByTestId('clerk-input');\n    const otpInput = otpInputs.find(\n      input => input.getAttribute('data-type') === 'otp'\n    );\n    expect(otpInput).toBeDefined();\n    expect(otpInput).toHaveAttribute('data-type', 'otp');\n    expect(otpInput).toHaveAttribute('data-auto-submit', 'true');\n  });\n\n  it('has screen reader labels for form fields', () => {\n    renderSignUp();\n\n    const labels = screen.getAllByTestId('clerk-label');\n    expect(labels.length).toBeGreaterThan(0);\n    labels.forEach(label => {\n      expect(label).toHaveClass('sr-only');\n    });\n  });\n\n  it('has aria-live region for global errors', () => {\n    renderSignUp();\n\n    const errorContainer = screen.getByRole('alert');\n    expect(errorContainer).toHaveAttribute('aria-live', 'polite');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/components/auth/OtpSignUpForm.test.tsx" },
        "span": [1127, 1313],
        "sourceCode": "import { fireEvent, screen, within } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OtpSignUpForm } from '@/components/auth/OtpSignUpForm';\nimport { fastRender, renderWithClerk } from '@/tests/utils/fast-render';\n\nvi.mock('@clerk/nextjs', () => ({\n  useClerk: () => ({\n    client: {},\n  }),\n}));\n\n// Mock Clerk Elements\nvi.mock('@clerk/elements/common', () => ({\n  GlobalError: ({ className }: { className?: string }) => (\n    <div data-testid='global-error' className={className} />\n  ),\n  Field: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='field'>{children}</div>\n  ),\n  Label: ({\n    children,\n    className,\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n  }) => (\n    <label data-testid='clerk-label' className={className}>\n      {children}\n    </label>\n  ),\n  Input: ({\n    type,\n    children,\n    asChild,\n    autoSubmit,\n    length,\n    'aria-label': ariaLabel,\n  }: {\n    type: string;\n    children?: React.ReactNode;\n    asChild?: boolean;\n    autoSubmit?: boolean;\n    length?: number;\n    'aria-label'?: string;\n  }) => (\n    <div\n      data-testid='clerk-input'\n      data-type={type}\n      data-aschild={asChild}\n      data-auto-submit={autoSubmit}\n      data-length={length}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </div>\n  ),\n  FieldError: ({ className }: { className?: string }) => (\n    <div data-testid='field-error' className={className} />\n  ),\n  Loading: ({\n    children,\n  }: {\n    children: (isLoading: boolean) => React.ReactNode;\n  }) => children(false),\n\n  Connection: ({\n    name,\n    children,\n    className,\n    disabled,\n    'aria-busy': ariaBusy,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='clerk-connection'\n      data-name={name}\n      className={className}\n      disabled={disabled}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@clerk/elements/sign-up', () => ({\n  Root: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='signup-root'>{children}</div>\n  ),\n  Step: ({\n    name,\n    children,\n    'aria-label': ariaLabel,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    'aria-label'?: string;\n  }) => (\n    <div data-testid={`signup-step-${name}`} aria-label={ariaLabel}>\n      {children}\n    </div>\n  ),\n  Strategy: ({\n    name,\n    children,\n  }: {\n    name: string;\n    children: React.ReactNode;\n  }) => <div data-testid={`signup-strategy-${name}`}>{children}</div>,\n  Action: ({\n    children,\n    className,\n    'aria-busy': ariaBusy,\n  }: {\n    submit?: boolean;\n    navigate?: string;\n    children: React.ReactNode;\n    className?: string;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='signup-action'\n      className={className}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('next/link', () => ({\n  default: ({\n    href,\n    children,\n    className,\n  }: {\n    href: string;\n    children: React.ReactNode;\n    className?: string;\n  }) => (\n    <a href={href} className={className}>\n      {children}\n    </a>\n  ),\n}));\n\ndescribe('OtpSignUpForm', () => {\n  const renderSignUp = () => fastRender(<OtpSignUpForm />);\n  const renderSignUpIntegration = () => renderWithClerk(<OtpSignUpForm />);\n\n  it('renders the signup form correctly', () => {\n    renderSignUp();\n\n    expect(screen.getByTestId('signup-root')).toBeInTheDocument();\n  });\n\n  it('renders both form steps', () => {\n    renderSignUp();\n\n    expect(screen.getByTestId('signup-step-start')).toBeInTheDocument();\n    expect(screen.getByTestId('signup-step-verifications')).toBeInTheDocument();\n  });\n\n  it('includes ARIA labels for accessibility', () => {\n    renderSignUp();\n\n    const startStep = screen.getByTestId('signup-step-start');\n    const verificationsStep = screen.getByTestId('signup-step-verifications');\n\n    expect(startStep).toHaveAttribute('aria-label', 'Choose a sign-up method');\n    expect(verificationsStep).toHaveAttribute(\n      'aria-label',\n      'Verify your email with code'\n    );\n  });\n\n  it('renders the multi-method sign-up buttons', () => {\n    renderSignUp();\n\n    expect(screen.getByText('Continue with email')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Spotify')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Google')).toBeInTheDocument();\n  });\n\n  it('uses semantic design tokens for global error', () => {\n    renderSignUp();\n\n    const globalError = screen.getByTestId('global-error');\n    expect(globalError).toHaveClass('text-destructive');\n  });\n\n  it('renders field errors with correct styling', () => {\n    renderSignUp();\n\n    const fieldErrors = screen.getAllByTestId('field-error');\n    expect(fieldErrors.length).toBeGreaterThan(0);\n  });\n\n  it('supports the email sign-up flow end-to-end', () => {\n    renderSignUpIntegration();\n\n    fireEvent.click(screen.getByText('Continue with email'));\n\n    const inputs = screen.getAllByTestId('clerk-input');\n    expect(inputs[0]).toHaveAttribute('data-type', 'email');\n  });\n\n  it('renders OTP input with type=\"otp\" and autoSubmit', () => {\n    renderSignUp();\n\n    const verificationsStep = screen.getByTestId('signup-step-verifications');\n    const otpInputs = within(verificationsStep).getAllByTestId('clerk-input');\n    const otpInput = otpInputs.find(\n      input => input.getAttribute('data-type') === 'otp'\n    );\n    expect(otpInput).toBeDefined();\n    expect(otpInput).toHaveAttribute('data-type', 'otp');\n    expect(otpInput).toHaveAttribute('data-auto-submit', 'true');\n  });\n\n  it('has screen reader labels for form fields', () => {\n    renderSignUp();\n\n    const labels = screen.getAllByTestId('clerk-label');\n    expect(labels.length).toBeGreaterThan(0);\n    labels.forEach(label => {\n      expect(label).toHaveClass('sr-only');\n    });\n  });\n\n  it('has aria-live region for global errors', () => {\n    renderSignUp();\n\n    const errorContainer = screen.getByRole('alert');\n    expect(errorContainer).toHaveAttribute('aria-live', 'polite');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAriaPropsSupportedByRole",
      "severity": "warning",
      "description": "The ARIA attribute 'aria-label' is not supported by this element.",
      "message": [
        {
          "elements": [],
          "content": "The ARIA attribute 'aria-label' is not supported by this element."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Ensure that ARIA attributes are valid for the role of the element."
                }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/components/auth/OtpSignUpForm.test.tsx" },
        "span": [2347, 2411],
        "sourceCode": "import { fireEvent, screen, within } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OtpSignUpForm } from '@/components/auth/OtpSignUpForm';\nimport { fastRender, renderWithClerk } from '@/tests/utils/fast-render';\n\nvi.mock('@clerk/nextjs', () => ({\n  useClerk: () => ({\n    client: {},\n  }),\n}));\n\n// Mock Clerk Elements\nvi.mock('@clerk/elements/common', () => ({\n  GlobalError: ({ className }: { className?: string }) => (\n    <div data-testid='global-error' className={className} />\n  ),\n  Field: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='field'>{children}</div>\n  ),\n  Label: ({\n    children,\n    className,\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n  }) => (\n    <label data-testid='clerk-label' className={className}>\n      {children}\n    </label>\n  ),\n  Input: ({\n    type,\n    children,\n    asChild,\n    autoSubmit,\n    length,\n    'aria-label': ariaLabel,\n  }: {\n    type: string;\n    children?: React.ReactNode;\n    asChild?: boolean;\n    autoSubmit?: boolean;\n    length?: number;\n    'aria-label'?: string;\n  }) => (\n    <div\n      data-testid='clerk-input'\n      data-type={type}\n      data-aschild={asChild}\n      data-auto-submit={autoSubmit}\n      data-length={length}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </div>\n  ),\n  FieldError: ({ className }: { className?: string }) => (\n    <div data-testid='field-error' className={className} />\n  ),\n  Loading: ({\n    children,\n  }: {\n    children: (isLoading: boolean) => React.ReactNode;\n  }) => children(false),\n\n  Connection: ({\n    name,\n    children,\n    className,\n    disabled,\n    'aria-busy': ariaBusy,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='clerk-connection'\n      data-name={name}\n      className={className}\n      disabled={disabled}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@clerk/elements/sign-up', () => ({\n  Root: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='signup-root'>{children}</div>\n  ),\n  Step: ({\n    name,\n    children,\n    'aria-label': ariaLabel,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    'aria-label'?: string;\n  }) => (\n    <div data-testid={`signup-step-${name}`} aria-label={ariaLabel}>\n      {children}\n    </div>\n  ),\n  Strategy: ({\n    name,\n    children,\n  }: {\n    name: string;\n    children: React.ReactNode;\n  }) => <div data-testid={`signup-strategy-${name}`}>{children}</div>,\n  Action: ({\n    children,\n    className,\n    'aria-busy': ariaBusy,\n  }: {\n    submit?: boolean;\n    navigate?: string;\n    children: React.ReactNode;\n    className?: string;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='signup-action'\n      className={className}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('next/link', () => ({\n  default: ({\n    href,\n    children,\n    className,\n  }: {\n    href: string;\n    children: React.ReactNode;\n    className?: string;\n  }) => (\n    <a href={href} className={className}>\n      {children}\n    </a>\n  ),\n}));\n\ndescribe('OtpSignUpForm', () => {\n  const renderSignUp = () => fastRender(<OtpSignUpForm />);\n  const renderSignUpIntegration = () => renderWithClerk(<OtpSignUpForm />);\n\n  it('renders the signup form correctly', () => {\n    renderSignUp();\n\n    expect(screen.getByTestId('signup-root')).toBeInTheDocument();\n  });\n\n  it('renders both form steps', () => {\n    renderSignUp();\n\n    expect(screen.getByTestId('signup-step-start')).toBeInTheDocument();\n    expect(screen.getByTestId('signup-step-verifications')).toBeInTheDocument();\n  });\n\n  it('includes ARIA labels for accessibility', () => {\n    renderSignUp();\n\n    const startStep = screen.getByTestId('signup-step-start');\n    const verificationsStep = screen.getByTestId('signup-step-verifications');\n\n    expect(startStep).toHaveAttribute('aria-label', 'Choose a sign-up method');\n    expect(verificationsStep).toHaveAttribute(\n      'aria-label',\n      'Verify your email with code'\n    );\n  });\n\n  it('renders the multi-method sign-up buttons', () => {\n    renderSignUp();\n\n    expect(screen.getByText('Continue with email')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Spotify')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Google')).toBeInTheDocument();\n  });\n\n  it('uses semantic design tokens for global error', () => {\n    renderSignUp();\n\n    const globalError = screen.getByTestId('global-error');\n    expect(globalError).toHaveClass('text-destructive');\n  });\n\n  it('renders field errors with correct styling', () => {\n    renderSignUp();\n\n    const fieldErrors = screen.getAllByTestId('field-error');\n    expect(fieldErrors.length).toBeGreaterThan(0);\n  });\n\n  it('supports the email sign-up flow end-to-end', () => {\n    renderSignUpIntegration();\n\n    fireEvent.click(screen.getByText('Continue with email'));\n\n    const inputs = screen.getAllByTestId('clerk-input');\n    expect(inputs[0]).toHaveAttribute('data-type', 'email');\n  });\n\n  it('renders OTP input with type=\"otp\" and autoSubmit', () => {\n    renderSignUp();\n\n    const verificationsStep = screen.getByTestId('signup-step-verifications');\n    const otpInputs = within(verificationsStep).getAllByTestId('clerk-input');\n    const otpInput = otpInputs.find(\n      input => input.getAttribute('data-type') === 'otp'\n    );\n    expect(otpInput).toBeDefined();\n    expect(otpInput).toHaveAttribute('data-type', 'otp');\n    expect(otpInput).toHaveAttribute('data-auto-submit', 'true');\n  });\n\n  it('has screen reader labels for form fields', () => {\n    renderSignUp();\n\n    const labels = screen.getAllByTestId('clerk-label');\n    expect(labels.length).toBeGreaterThan(0);\n    labels.forEach(label => {\n      expect(label).toHaveClass('sr-only');\n    });\n  });\n\n  it('has aria-live region for global errors', () => {\n    renderSignUp();\n\n    const errorContainer = screen.getByRole('alert');\n    expect(errorContainer).toHaveAttribute('aria-live', 'polite');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/components/auth/OtpSignUpForm.test.tsx" },
        "span": [1829, 1983],
        "sourceCode": "import { fireEvent, screen, within } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OtpSignUpForm } from '@/components/auth/OtpSignUpForm';\nimport { fastRender, renderWithClerk } from '@/tests/utils/fast-render';\n\nvi.mock('@clerk/nextjs', () => ({\n  useClerk: () => ({\n    client: {},\n  }),\n}));\n\n// Mock Clerk Elements\nvi.mock('@clerk/elements/common', () => ({\n  GlobalError: ({ className }: { className?: string }) => (\n    <div data-testid='global-error' className={className} />\n  ),\n  Field: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='field'>{children}</div>\n  ),\n  Label: ({\n    children,\n    className,\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n  }) => (\n    <label data-testid='clerk-label' className={className}>\n      {children}\n    </label>\n  ),\n  Input: ({\n    type,\n    children,\n    asChild,\n    autoSubmit,\n    length,\n    'aria-label': ariaLabel,\n  }: {\n    type: string;\n    children?: React.ReactNode;\n    asChild?: boolean;\n    autoSubmit?: boolean;\n    length?: number;\n    'aria-label'?: string;\n  }) => (\n    <div\n      data-testid='clerk-input'\n      data-type={type}\n      data-aschild={asChild}\n      data-auto-submit={autoSubmit}\n      data-length={length}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </div>\n  ),\n  FieldError: ({ className }: { className?: string }) => (\n    <div data-testid='field-error' className={className} />\n  ),\n  Loading: ({\n    children,\n  }: {\n    children: (isLoading: boolean) => React.ReactNode;\n  }) => children(false),\n\n  Connection: ({\n    name,\n    children,\n    className,\n    disabled,\n    'aria-busy': ariaBusy,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='clerk-connection'\n      data-name={name}\n      className={className}\n      disabled={disabled}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@clerk/elements/sign-up', () => ({\n  Root: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='signup-root'>{children}</div>\n  ),\n  Step: ({\n    name,\n    children,\n    'aria-label': ariaLabel,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    'aria-label'?: string;\n  }) => (\n    <div data-testid={`signup-step-${name}`} aria-label={ariaLabel}>\n      {children}\n    </div>\n  ),\n  Strategy: ({\n    name,\n    children,\n  }: {\n    name: string;\n    children: React.ReactNode;\n  }) => <div data-testid={`signup-strategy-${name}`}>{children}</div>,\n  Action: ({\n    children,\n    className,\n    'aria-busy': ariaBusy,\n  }: {\n    submit?: boolean;\n    navigate?: string;\n    children: React.ReactNode;\n    className?: string;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='signup-action'\n      className={className}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('next/link', () => ({\n  default: ({\n    href,\n    children,\n    className,\n  }: {\n    href: string;\n    children: React.ReactNode;\n    className?: string;\n  }) => (\n    <a href={href} className={className}>\n      {children}\n    </a>\n  ),\n}));\n\ndescribe('OtpSignUpForm', () => {\n  const renderSignUp = () => fastRender(<OtpSignUpForm />);\n  const renderSignUpIntegration = () => renderWithClerk(<OtpSignUpForm />);\n\n  it('renders the signup form correctly', () => {\n    renderSignUp();\n\n    expect(screen.getByTestId('signup-root')).toBeInTheDocument();\n  });\n\n  it('renders both form steps', () => {\n    renderSignUp();\n\n    expect(screen.getByTestId('signup-step-start')).toBeInTheDocument();\n    expect(screen.getByTestId('signup-step-verifications')).toBeInTheDocument();\n  });\n\n  it('includes ARIA labels for accessibility', () => {\n    renderSignUp();\n\n    const startStep = screen.getByTestId('signup-step-start');\n    const verificationsStep = screen.getByTestId('signup-step-verifications');\n\n    expect(startStep).toHaveAttribute('aria-label', 'Choose a sign-up method');\n    expect(verificationsStep).toHaveAttribute(\n      'aria-label',\n      'Verify your email with code'\n    );\n  });\n\n  it('renders the multi-method sign-up buttons', () => {\n    renderSignUp();\n\n    expect(screen.getByText('Continue with email')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Spotify')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Google')).toBeInTheDocument();\n  });\n\n  it('uses semantic design tokens for global error', () => {\n    renderSignUp();\n\n    const globalError = screen.getByTestId('global-error');\n    expect(globalError).toHaveClass('text-destructive');\n  });\n\n  it('renders field errors with correct styling', () => {\n    renderSignUp();\n\n    const fieldErrors = screen.getAllByTestId('field-error');\n    expect(fieldErrors.length).toBeGreaterThan(0);\n  });\n\n  it('supports the email sign-up flow end-to-end', () => {\n    renderSignUpIntegration();\n\n    fireEvent.click(screen.getByText('Continue with email'));\n\n    const inputs = screen.getAllByTestId('clerk-input');\n    expect(inputs[0]).toHaveAttribute('data-type', 'email');\n  });\n\n  it('renders OTP input with type=\"otp\" and autoSubmit', () => {\n    renderSignUp();\n\n    const verificationsStep = screen.getByTestId('signup-step-verifications');\n    const otpInputs = within(verificationsStep).getAllByTestId('clerk-input');\n    const otpInput = otpInputs.find(\n      input => input.getAttribute('data-type') === 'otp'\n    );\n    expect(otpInput).toBeDefined();\n    expect(otpInput).toHaveAttribute('data-type', 'otp');\n    expect(otpInput).toHaveAttribute('data-auto-submit', 'true');\n  });\n\n  it('has screen reader labels for form fields', () => {\n    renderSignUp();\n\n    const labels = screen.getAllByTestId('clerk-label');\n    expect(labels.length).toBeGreaterThan(0);\n    labels.forEach(label => {\n      expect(label).toHaveClass('sr-only');\n    });\n  });\n\n  it('has aria-live region for global errors', () => {\n    renderSignUp();\n\n    const errorContainer = screen.getByRole('alert');\n    expect(errorContainer).toHaveAttribute('aria-live', 'polite');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/components/auth/OtpSignUpForm.test.tsx" },
        "span": [2828, 2930],
        "sourceCode": "import { fireEvent, screen, within } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OtpSignUpForm } from '@/components/auth/OtpSignUpForm';\nimport { fastRender, renderWithClerk } from '@/tests/utils/fast-render';\n\nvi.mock('@clerk/nextjs', () => ({\n  useClerk: () => ({\n    client: {},\n  }),\n}));\n\n// Mock Clerk Elements\nvi.mock('@clerk/elements/common', () => ({\n  GlobalError: ({ className }: { className?: string }) => (\n    <div data-testid='global-error' className={className} />\n  ),\n  Field: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='field'>{children}</div>\n  ),\n  Label: ({\n    children,\n    className,\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n  }) => (\n    <label data-testid='clerk-label' className={className}>\n      {children}\n    </label>\n  ),\n  Input: ({\n    type,\n    children,\n    asChild,\n    autoSubmit,\n    length,\n    'aria-label': ariaLabel,\n  }: {\n    type: string;\n    children?: React.ReactNode;\n    asChild?: boolean;\n    autoSubmit?: boolean;\n    length?: number;\n    'aria-label'?: string;\n  }) => (\n    <div\n      data-testid='clerk-input'\n      data-type={type}\n      data-aschild={asChild}\n      data-auto-submit={autoSubmit}\n      data-length={length}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </div>\n  ),\n  FieldError: ({ className }: { className?: string }) => (\n    <div data-testid='field-error' className={className} />\n  ),\n  Loading: ({\n    children,\n  }: {\n    children: (isLoading: boolean) => React.ReactNode;\n  }) => children(false),\n\n  Connection: ({\n    name,\n    children,\n    className,\n    disabled,\n    'aria-busy': ariaBusy,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='clerk-connection'\n      data-name={name}\n      className={className}\n      disabled={disabled}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@clerk/elements/sign-up', () => ({\n  Root: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid='signup-root'>{children}</div>\n  ),\n  Step: ({\n    name,\n    children,\n    'aria-label': ariaLabel,\n  }: {\n    name: string;\n    children: React.ReactNode;\n    'aria-label'?: string;\n  }) => (\n    <div data-testid={`signup-step-${name}`} aria-label={ariaLabel}>\n      {children}\n    </div>\n  ),\n  Strategy: ({\n    name,\n    children,\n  }: {\n    name: string;\n    children: React.ReactNode;\n  }) => <div data-testid={`signup-strategy-${name}`}>{children}</div>,\n  Action: ({\n    children,\n    className,\n    'aria-busy': ariaBusy,\n  }: {\n    submit?: boolean;\n    navigate?: string;\n    children: React.ReactNode;\n    className?: string;\n    'aria-busy'?: boolean;\n  }) => (\n    <button\n      data-testid='signup-action'\n      className={className}\n      aria-busy={ariaBusy}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('next/link', () => ({\n  default: ({\n    href,\n    children,\n    className,\n  }: {\n    href: string;\n    children: React.ReactNode;\n    className?: string;\n  }) => (\n    <a href={href} className={className}>\n      {children}\n    </a>\n  ),\n}));\n\ndescribe('OtpSignUpForm', () => {\n  const renderSignUp = () => fastRender(<OtpSignUpForm />);\n  const renderSignUpIntegration = () => renderWithClerk(<OtpSignUpForm />);\n\n  it('renders the signup form correctly', () => {\n    renderSignUp();\n\n    expect(screen.getByTestId('signup-root')).toBeInTheDocument();\n  });\n\n  it('renders both form steps', () => {\n    renderSignUp();\n\n    expect(screen.getByTestId('signup-step-start')).toBeInTheDocument();\n    expect(screen.getByTestId('signup-step-verifications')).toBeInTheDocument();\n  });\n\n  it('includes ARIA labels for accessibility', () => {\n    renderSignUp();\n\n    const startStep = screen.getByTestId('signup-step-start');\n    const verificationsStep = screen.getByTestId('signup-step-verifications');\n\n    expect(startStep).toHaveAttribute('aria-label', 'Choose a sign-up method');\n    expect(verificationsStep).toHaveAttribute(\n      'aria-label',\n      'Verify your email with code'\n    );\n  });\n\n  it('renders the multi-method sign-up buttons', () => {\n    renderSignUp();\n\n    expect(screen.getByText('Continue with email')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Spotify')).toBeInTheDocument();\n    expect(screen.getByText('Continue with Google')).toBeInTheDocument();\n  });\n\n  it('uses semantic design tokens for global error', () => {\n    renderSignUp();\n\n    const globalError = screen.getByTestId('global-error');\n    expect(globalError).toHaveClass('text-destructive');\n  });\n\n  it('renders field errors with correct styling', () => {\n    renderSignUp();\n\n    const fieldErrors = screen.getAllByTestId('field-error');\n    expect(fieldErrors.length).toBeGreaterThan(0);\n  });\n\n  it('supports the email sign-up flow end-to-end', () => {\n    renderSignUpIntegration();\n\n    fireEvent.click(screen.getByText('Continue with email'));\n\n    const inputs = screen.getAllByTestId('clerk-input');\n    expect(inputs[0]).toHaveAttribute('data-type', 'email');\n  });\n\n  it('renders OTP input with type=\"otp\" and autoSubmit', () => {\n    renderSignUp();\n\n    const verificationsStep = screen.getByTestId('signup-step-verifications');\n    const otpInputs = within(verificationsStep).getAllByTestId('clerk-input');\n    const otpInput = otpInputs.find(\n      input => input.getAttribute('data-type') === 'otp'\n    );\n    expect(otpInput).toBeDefined();\n    expect(otpInput).toHaveAttribute('data-type', 'otp');\n    expect(otpInput).toHaveAttribute('data-auto-submit', 'true');\n  });\n\n  it('has screen reader labels for form fields', () => {\n    renderSignUp();\n\n    const labels = screen.getAllByTestId('clerk-label');\n    expect(labels.length).toBeGreaterThan(0);\n    labels.forEach(label => {\n      expect(label).toHaveClass('sr-only');\n    });\n  });\n\n  it('has aria-live region for global errors', () => {\n    renderSignUp();\n\n    const errorContainer = screen.getByRole('alert');\n    expect(errorContainer).toHaveAttribute('aria-live', 'polite');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide a valid type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide a valid " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/setup-mocks.ts" },
        "span": [1615, 1632],
        "sourceCode": "import React from 'react';\nimport { vi } from 'vitest';\n\nlet mocksSetup = false;\n\n// Define mocked components outside the function to avoid hoisting issues\nconst MockedComponents = {\n  // Dialog components\n  Dialog: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref, role: 'dialog' });\n    }\n  ),\n  DialogPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  DialogTitle: React.forwardRef<HTMLHeadingElement, React.ComponentProps<'h2'>>(\n    (props, ref) => {\n      return React.createElement('h2', { ...props, ref });\n    }\n  ),\n  DialogDescription: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n  DialogBackdrop: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Combobox components\n  Combobox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ComboboxInput: React.forwardRef<\n    HTMLInputElement,\n    React.ComponentProps<'input'>\n  >((props, ref) => {\n    return React.createElement('input', { ...props, ref });\n  }),\n  ComboboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ComboboxOptions: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n  ComboboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Listbox components\n  Listbox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ListboxOptions: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Menu components\n  Menu: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  MenuItems: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuItem: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Popover components\n  Popover: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  PopoverButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  PopoverPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // RadioGroup components\n  RadioGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  RadioGroupOption: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Switch components\n  Switch: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n\n  // Tab components\n  TabGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabList: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  Tab: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n  TabPanels: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Transition components\n  Transition: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TransitionChild: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Description component\n  Description: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n\n  // Input component\n  Input: React.forwardRef<HTMLInputElement, React.ComponentProps<'input'>>(\n    (props, ref) => {\n      return React.createElement('input', { ...props, ref });\n    }\n  ),\n\n  // Textarea component\n  Textarea: React.forwardRef<\n    HTMLTextAreaElement,\n    React.ComponentProps<'textarea'>\n  >((props, ref) => {\n    return React.createElement('textarea', { ...props, ref });\n  }),\n};\n\n// Add display names to all mocked components\nMockedComponents.Dialog.displayName = 'MockedDialog';\nMockedComponents.DialogPanel.displayName = 'MockedDialogPanel';\nMockedComponents.DialogTitle.displayName = 'MockedDialogTitle';\nMockedComponents.DialogDescription.displayName = 'MockedDialogDescription';\nMockedComponents.DialogBackdrop.displayName = 'MockedDialogBackdrop';\n\nMockedComponents.Input.displayName = 'MockedInput';\n\nMockedComponents.Combobox.displayName = 'MockedCombobox';\nMockedComponents.ComboboxInput.displayName = 'MockedComboboxInput';\nMockedComponents.ComboboxButton.displayName = 'MockedComboboxButton';\nMockedComponents.ComboboxOptions.displayName = 'MockedComboboxOptions';\nMockedComponents.ComboboxOption.displayName = 'MockedComboboxOption';\n\nMockedComponents.Listbox.displayName = 'MockedListbox';\nMockedComponents.ListboxButton.displayName = 'MockedListboxButton';\nMockedComponents.ListboxOptions.displayName = 'MockedListboxOptions';\nMockedComponents.ListboxOption.displayName = 'MockedListboxOption';\n\nMockedComponents.Menu.displayName = 'MockedMenu';\nMockedComponents.MenuButton.displayName = 'MockedMenuButton';\nMockedComponents.MenuItems.displayName = 'MockedMenuItems';\nMockedComponents.MenuItem.displayName = 'MockedMenuItem';\n\nMockedComponents.Popover.displayName = 'MockedPopover';\nMockedComponents.PopoverButton.displayName = 'MockedPopoverButton';\nMockedComponents.PopoverPanel.displayName = 'MockedPopoverPanel';\n\nMockedComponents.RadioGroup.displayName = 'MockedRadioGroup';\nMockedComponents.RadioGroupOption.displayName = 'MockedRadioGroupOption';\n\nMockedComponents.Switch.displayName = 'MockedSwitch';\n\nMockedComponents.TabGroup.displayName = 'MockedTabGroup';\nMockedComponents.TabList.displayName = 'MockedTabList';\nMockedComponents.Tab.displayName = 'MockedTab';\nMockedComponents.TabPanels.displayName = 'MockedTabPanels';\nMockedComponents.TabPanel.displayName = 'MockedTabPanel';\n\nMockedComponents.Transition.displayName = 'MockedTransition';\nMockedComponents.TransitionChild.displayName = 'MockedTransitionChild';\n\nMockedComponents.Description.displayName = 'MockedDescription';\n\nMockedComponents.Input.displayName = 'MockedInput';\nMockedComponents.Textarea.displayName = 'MockedTextarea';\n\nexport function setupComponentMocks() {\n  // Only setup once\n  if (mocksSetup) {\n    return;\n  }\n\n  // Mock Clerk components and hooks\n  const mockUseUser = vi.fn(() => ({\n    isSignedIn: false,\n    user: null,\n    isLoaded: true,\n  }));\n\n  const mockUseClerk = vi.fn(() => ({\n    signOut: vi.fn(),\n    openUserProfile: vi.fn(),\n  }));\n\n  const mockUseAuth = vi.fn(() => ({\n    has: vi.fn(() => false),\n  }));\n\n  const mockUseSession = vi.fn(() => ({\n    session: null,\n    isLoaded: true,\n  }));\n\n  vi.mock('@clerk/nextjs', () => ({\n    useUser: mockUseUser,\n    useClerk: mockUseClerk,\n    useAuth: mockUseAuth,\n    useSession: mockUseSession,\n    ClerkProvider: ({ children }: { children: React.ReactNode }) => children,\n    SignIn: ({ children }: { children: React.ReactNode }) => children,\n    SignUp: ({ children }: { children: React.ReactNode }) => children,\n    SignInButton: ({ children }: { children: React.ReactNode }) => children,\n    SignUpButton: ({ children }: { children: React.ReactNode }) => children,\n    UserButton: () =>\n      React.createElement(\n        'div',\n        { 'data-testid': 'user-button' },\n        'User Button'\n      ),\n  }));\n\n  // Mock notification hook to avoid needing actual toast provider\n  vi.mock('@/lib/hooks/useNotifications', () => ({\n    useNotifications: () => ({\n      showToast: vi.fn(),\n      hideToast: vi.fn(),\n      clearToasts: vi.fn(),\n      success: vi.fn(),\n      error: vi.fn(),\n      info: vi.fn(),\n      warning: vi.fn(),\n      undo: vi.fn(),\n      retry: vi.fn(),\n      saveSuccess: vi.fn(),\n      saveError: vi.fn(),\n      uploadSuccess: vi.fn(),\n      uploadError: vi.fn(),\n      networkError: vi.fn(),\n      genericError: vi.fn(),\n      handleError: vi.fn(),\n      withLoadingToast: vi.fn(),\n    }),\n  }));\n\n  // Mock server-only modules\n  vi.mock('server-only', () => ({\n    default: vi.fn(),\n  }));\n\n  // Mock Next.js app router helpers to avoid needing actual routing context\n  vi.mock('next/navigation', () => ({\n    useRouter: () => ({\n      push: vi.fn(),\n      replace: vi.fn(),\n      refresh: vi.fn(),\n      prefetch: vi.fn().mockResolvedValue(undefined),\n    }),\n  }));\n\n  // Mock FeaturedArtists component to handle async component\n  vi.mock('@/components/home/FeaturedArtists', () => ({\n    FeaturedArtists: () =>\n      React.createElement(\n        'section',\n        { className: 'w-full py-12', 'data-testid': 'featured-artists' },\n        React.createElement(\n          'div',\n          { className: 'w-full md:hidden overflow-x-auto scroll-smooth' },\n          React.createElement(\n            'div',\n            {\n              className:\n                'flex flex-row gap-6 justify-center md:justify-between w-full min-w-[600px]',\n            },\n            // Mock artist links\n            React.createElement(\n              'a',\n              {\n                href: '/ladygaga',\n                className: 'group flex items-center justify-center',\n                title: 'Lady Gaga',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Lady Gaga'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/davidguetta',\n                className: 'group flex items-center justify-center',\n                title: 'David Guetta',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'David Guetta'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/billieeilish',\n                className: 'group flex items-center justify-center',\n                title: 'Billie Eilish',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'placeholder-image',\n                    className: 'placeholder',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Billie Eilish'\n                  )\n                )\n              )\n            )\n          )\n        )\n      ),\n  }));\n\n  // Mock Next.js Image component\n  vi.mock('next/image', () => ({\n    default: ({\n      src,\n      alt,\n      width,\n      height,\n      className,\n      ...props\n    }: React.ComponentProps<'img'>) => {\n      return React.createElement('img', {\n        src,\n        alt,\n        width,\n        height,\n        className,\n        'data-testid': 'next-image',\n        ...props,\n      });\n    },\n  }));\n\n  // Note: OptimizedImage and PlaceholderImage are no longer globally mocked here.\n  // Individual tests can mock them as needed, while unit tests for these atoms\n  // exercise the real implementations.\n\n  // Mock @headlessui/react with pre-defined components from module scope\n  vi.mock('@headlessui/react', () => MockedComponents);\n\n  // Mock framer-motion to avoid loading the full animation library in tests.\n  // Components only rely on basic motion primitives, so a div wrapper is enough.\n  vi.mock('framer-motion', () => {\n    const MockAnimatePresence = ({ children }: { children: React.ReactNode }) =>\n      React.createElement(React.Fragment, null, children);\n\n    const MockMotionComponent: React.FC<\n      React.HTMLAttributes<HTMLDivElement>\n    > = props => React.createElement('div', props);\n\n    const motion = new Proxy(MockMotionComponent, {\n      get: () => MockMotionComponent,\n    });\n\n    return {\n      __esModule: true,\n      AnimatePresence: MockAnimatePresence,\n      motion,\n    };\n  });\n\n  // Mock @jovie/ui as a lightweight pass-through to the real module so tests\n  // can stub specific components when needed without altering default behavior.\n  vi.mock('@jovie/ui', async () => {\n    const actual =\n      await vi.importActual<typeof import('@jovie/ui')>('@jovie/ui');\n    return {\n      __esModule: true,\n      ...actual,\n    };\n  });\n\n  mocksSetup = true;\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide a valid type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide a valid " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/setup-mocks.ts" },
        "span": [2338, 2355],
        "sourceCode": "import React from 'react';\nimport { vi } from 'vitest';\n\nlet mocksSetup = false;\n\n// Define mocked components outside the function to avoid hoisting issues\nconst MockedComponents = {\n  // Dialog components\n  Dialog: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref, role: 'dialog' });\n    }\n  ),\n  DialogPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  DialogTitle: React.forwardRef<HTMLHeadingElement, React.ComponentProps<'h2'>>(\n    (props, ref) => {\n      return React.createElement('h2', { ...props, ref });\n    }\n  ),\n  DialogDescription: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n  DialogBackdrop: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Combobox components\n  Combobox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ComboboxInput: React.forwardRef<\n    HTMLInputElement,\n    React.ComponentProps<'input'>\n  >((props, ref) => {\n    return React.createElement('input', { ...props, ref });\n  }),\n  ComboboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ComboboxOptions: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n  ComboboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Listbox components\n  Listbox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ListboxOptions: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Menu components\n  Menu: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  MenuItems: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuItem: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Popover components\n  Popover: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  PopoverButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  PopoverPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // RadioGroup components\n  RadioGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  RadioGroupOption: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Switch components\n  Switch: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n\n  // Tab components\n  TabGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabList: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  Tab: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n  TabPanels: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Transition components\n  Transition: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TransitionChild: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Description component\n  Description: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n\n  // Input component\n  Input: React.forwardRef<HTMLInputElement, React.ComponentProps<'input'>>(\n    (props, ref) => {\n      return React.createElement('input', { ...props, ref });\n    }\n  ),\n\n  // Textarea component\n  Textarea: React.forwardRef<\n    HTMLTextAreaElement,\n    React.ComponentProps<'textarea'>\n  >((props, ref) => {\n    return React.createElement('textarea', { ...props, ref });\n  }),\n};\n\n// Add display names to all mocked components\nMockedComponents.Dialog.displayName = 'MockedDialog';\nMockedComponents.DialogPanel.displayName = 'MockedDialogPanel';\nMockedComponents.DialogTitle.displayName = 'MockedDialogTitle';\nMockedComponents.DialogDescription.displayName = 'MockedDialogDescription';\nMockedComponents.DialogBackdrop.displayName = 'MockedDialogBackdrop';\n\nMockedComponents.Input.displayName = 'MockedInput';\n\nMockedComponents.Combobox.displayName = 'MockedCombobox';\nMockedComponents.ComboboxInput.displayName = 'MockedComboboxInput';\nMockedComponents.ComboboxButton.displayName = 'MockedComboboxButton';\nMockedComponents.ComboboxOptions.displayName = 'MockedComboboxOptions';\nMockedComponents.ComboboxOption.displayName = 'MockedComboboxOption';\n\nMockedComponents.Listbox.displayName = 'MockedListbox';\nMockedComponents.ListboxButton.displayName = 'MockedListboxButton';\nMockedComponents.ListboxOptions.displayName = 'MockedListboxOptions';\nMockedComponents.ListboxOption.displayName = 'MockedListboxOption';\n\nMockedComponents.Menu.displayName = 'MockedMenu';\nMockedComponents.MenuButton.displayName = 'MockedMenuButton';\nMockedComponents.MenuItems.displayName = 'MockedMenuItems';\nMockedComponents.MenuItem.displayName = 'MockedMenuItem';\n\nMockedComponents.Popover.displayName = 'MockedPopover';\nMockedComponents.PopoverButton.displayName = 'MockedPopoverButton';\nMockedComponents.PopoverPanel.displayName = 'MockedPopoverPanel';\n\nMockedComponents.RadioGroup.displayName = 'MockedRadioGroup';\nMockedComponents.RadioGroupOption.displayName = 'MockedRadioGroupOption';\n\nMockedComponents.Switch.displayName = 'MockedSwitch';\n\nMockedComponents.TabGroup.displayName = 'MockedTabGroup';\nMockedComponents.TabList.displayName = 'MockedTabList';\nMockedComponents.Tab.displayName = 'MockedTab';\nMockedComponents.TabPanels.displayName = 'MockedTabPanels';\nMockedComponents.TabPanel.displayName = 'MockedTabPanel';\n\nMockedComponents.Transition.displayName = 'MockedTransition';\nMockedComponents.TransitionChild.displayName = 'MockedTransitionChild';\n\nMockedComponents.Description.displayName = 'MockedDescription';\n\nMockedComponents.Input.displayName = 'MockedInput';\nMockedComponents.Textarea.displayName = 'MockedTextarea';\n\nexport function setupComponentMocks() {\n  // Only setup once\n  if (mocksSetup) {\n    return;\n  }\n\n  // Mock Clerk components and hooks\n  const mockUseUser = vi.fn(() => ({\n    isSignedIn: false,\n    user: null,\n    isLoaded: true,\n  }));\n\n  const mockUseClerk = vi.fn(() => ({\n    signOut: vi.fn(),\n    openUserProfile: vi.fn(),\n  }));\n\n  const mockUseAuth = vi.fn(() => ({\n    has: vi.fn(() => false),\n  }));\n\n  const mockUseSession = vi.fn(() => ({\n    session: null,\n    isLoaded: true,\n  }));\n\n  vi.mock('@clerk/nextjs', () => ({\n    useUser: mockUseUser,\n    useClerk: mockUseClerk,\n    useAuth: mockUseAuth,\n    useSession: mockUseSession,\n    ClerkProvider: ({ children }: { children: React.ReactNode }) => children,\n    SignIn: ({ children }: { children: React.ReactNode }) => children,\n    SignUp: ({ children }: { children: React.ReactNode }) => children,\n    SignInButton: ({ children }: { children: React.ReactNode }) => children,\n    SignUpButton: ({ children }: { children: React.ReactNode }) => children,\n    UserButton: () =>\n      React.createElement(\n        'div',\n        { 'data-testid': 'user-button' },\n        'User Button'\n      ),\n  }));\n\n  // Mock notification hook to avoid needing actual toast provider\n  vi.mock('@/lib/hooks/useNotifications', () => ({\n    useNotifications: () => ({\n      showToast: vi.fn(),\n      hideToast: vi.fn(),\n      clearToasts: vi.fn(),\n      success: vi.fn(),\n      error: vi.fn(),\n      info: vi.fn(),\n      warning: vi.fn(),\n      undo: vi.fn(),\n      retry: vi.fn(),\n      saveSuccess: vi.fn(),\n      saveError: vi.fn(),\n      uploadSuccess: vi.fn(),\n      uploadError: vi.fn(),\n      networkError: vi.fn(),\n      genericError: vi.fn(),\n      handleError: vi.fn(),\n      withLoadingToast: vi.fn(),\n    }),\n  }));\n\n  // Mock server-only modules\n  vi.mock('server-only', () => ({\n    default: vi.fn(),\n  }));\n\n  // Mock Next.js app router helpers to avoid needing actual routing context\n  vi.mock('next/navigation', () => ({\n    useRouter: () => ({\n      push: vi.fn(),\n      replace: vi.fn(),\n      refresh: vi.fn(),\n      prefetch: vi.fn().mockResolvedValue(undefined),\n    }),\n  }));\n\n  // Mock FeaturedArtists component to handle async component\n  vi.mock('@/components/home/FeaturedArtists', () => ({\n    FeaturedArtists: () =>\n      React.createElement(\n        'section',\n        { className: 'w-full py-12', 'data-testid': 'featured-artists' },\n        React.createElement(\n          'div',\n          { className: 'w-full md:hidden overflow-x-auto scroll-smooth' },\n          React.createElement(\n            'div',\n            {\n              className:\n                'flex flex-row gap-6 justify-center md:justify-between w-full min-w-[600px]',\n            },\n            // Mock artist links\n            React.createElement(\n              'a',\n              {\n                href: '/ladygaga',\n                className: 'group flex items-center justify-center',\n                title: 'Lady Gaga',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Lady Gaga'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/davidguetta',\n                className: 'group flex items-center justify-center',\n                title: 'David Guetta',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'David Guetta'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/billieeilish',\n                className: 'group flex items-center justify-center',\n                title: 'Billie Eilish',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'placeholder-image',\n                    className: 'placeholder',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Billie Eilish'\n                  )\n                )\n              )\n            )\n          )\n        )\n      ),\n  }));\n\n  // Mock Next.js Image component\n  vi.mock('next/image', () => ({\n    default: ({\n      src,\n      alt,\n      width,\n      height,\n      className,\n      ...props\n    }: React.ComponentProps<'img'>) => {\n      return React.createElement('img', {\n        src,\n        alt,\n        width,\n        height,\n        className,\n        'data-testid': 'next-image',\n        ...props,\n      });\n    },\n  }));\n\n  // Note: OptimizedImage and PlaceholderImage are no longer globally mocked here.\n  // Individual tests can mock them as needed, while unit tests for these atoms\n  // exercise the real implementations.\n\n  // Mock @headlessui/react with pre-defined components from module scope\n  vi.mock('@headlessui/react', () => MockedComponents);\n\n  // Mock framer-motion to avoid loading the full animation library in tests.\n  // Components only rely on basic motion primitives, so a div wrapper is enough.\n  vi.mock('framer-motion', () => {\n    const MockAnimatePresence = ({ children }: { children: React.ReactNode }) =>\n      React.createElement(React.Fragment, null, children);\n\n    const MockMotionComponent: React.FC<\n      React.HTMLAttributes<HTMLDivElement>\n    > = props => React.createElement('div', props);\n\n    const motion = new Proxy(MockMotionComponent, {\n      get: () => MockMotionComponent,\n    });\n\n    return {\n      __esModule: true,\n      AnimatePresence: MockAnimatePresence,\n      motion,\n    };\n  });\n\n  // Mock @jovie/ui as a lightweight pass-through to the real module so tests\n  // can stub specific components when needed without altering default behavior.\n  vi.mock('@jovie/ui', async () => {\n    const actual =\n      await vi.importActual<typeof import('@jovie/ui')>('@jovie/ui');\n    return {\n      __esModule: true,\n      ...actual,\n    };\n  });\n\n  mocksSetup = true;\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide a valid type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide a valid " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/setup-mocks.ts" },
        "span": [3050, 3067],
        "sourceCode": "import React from 'react';\nimport { vi } from 'vitest';\n\nlet mocksSetup = false;\n\n// Define mocked components outside the function to avoid hoisting issues\nconst MockedComponents = {\n  // Dialog components\n  Dialog: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref, role: 'dialog' });\n    }\n  ),\n  DialogPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  DialogTitle: React.forwardRef<HTMLHeadingElement, React.ComponentProps<'h2'>>(\n    (props, ref) => {\n      return React.createElement('h2', { ...props, ref });\n    }\n  ),\n  DialogDescription: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n  DialogBackdrop: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Combobox components\n  Combobox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ComboboxInput: React.forwardRef<\n    HTMLInputElement,\n    React.ComponentProps<'input'>\n  >((props, ref) => {\n    return React.createElement('input', { ...props, ref });\n  }),\n  ComboboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ComboboxOptions: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n  ComboboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Listbox components\n  Listbox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ListboxOptions: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Menu components\n  Menu: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  MenuItems: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuItem: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Popover components\n  Popover: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  PopoverButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  PopoverPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // RadioGroup components\n  RadioGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  RadioGroupOption: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Switch components\n  Switch: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n\n  // Tab components\n  TabGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabList: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  Tab: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n  TabPanels: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Transition components\n  Transition: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TransitionChild: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Description component\n  Description: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n\n  // Input component\n  Input: React.forwardRef<HTMLInputElement, React.ComponentProps<'input'>>(\n    (props, ref) => {\n      return React.createElement('input', { ...props, ref });\n    }\n  ),\n\n  // Textarea component\n  Textarea: React.forwardRef<\n    HTMLTextAreaElement,\n    React.ComponentProps<'textarea'>\n  >((props, ref) => {\n    return React.createElement('textarea', { ...props, ref });\n  }),\n};\n\n// Add display names to all mocked components\nMockedComponents.Dialog.displayName = 'MockedDialog';\nMockedComponents.DialogPanel.displayName = 'MockedDialogPanel';\nMockedComponents.DialogTitle.displayName = 'MockedDialogTitle';\nMockedComponents.DialogDescription.displayName = 'MockedDialogDescription';\nMockedComponents.DialogBackdrop.displayName = 'MockedDialogBackdrop';\n\nMockedComponents.Input.displayName = 'MockedInput';\n\nMockedComponents.Combobox.displayName = 'MockedCombobox';\nMockedComponents.ComboboxInput.displayName = 'MockedComboboxInput';\nMockedComponents.ComboboxButton.displayName = 'MockedComboboxButton';\nMockedComponents.ComboboxOptions.displayName = 'MockedComboboxOptions';\nMockedComponents.ComboboxOption.displayName = 'MockedComboboxOption';\n\nMockedComponents.Listbox.displayName = 'MockedListbox';\nMockedComponents.ListboxButton.displayName = 'MockedListboxButton';\nMockedComponents.ListboxOptions.displayName = 'MockedListboxOptions';\nMockedComponents.ListboxOption.displayName = 'MockedListboxOption';\n\nMockedComponents.Menu.displayName = 'MockedMenu';\nMockedComponents.MenuButton.displayName = 'MockedMenuButton';\nMockedComponents.MenuItems.displayName = 'MockedMenuItems';\nMockedComponents.MenuItem.displayName = 'MockedMenuItem';\n\nMockedComponents.Popover.displayName = 'MockedPopover';\nMockedComponents.PopoverButton.displayName = 'MockedPopoverButton';\nMockedComponents.PopoverPanel.displayName = 'MockedPopoverPanel';\n\nMockedComponents.RadioGroup.displayName = 'MockedRadioGroup';\nMockedComponents.RadioGroupOption.displayName = 'MockedRadioGroupOption';\n\nMockedComponents.Switch.displayName = 'MockedSwitch';\n\nMockedComponents.TabGroup.displayName = 'MockedTabGroup';\nMockedComponents.TabList.displayName = 'MockedTabList';\nMockedComponents.Tab.displayName = 'MockedTab';\nMockedComponents.TabPanels.displayName = 'MockedTabPanels';\nMockedComponents.TabPanel.displayName = 'MockedTabPanel';\n\nMockedComponents.Transition.displayName = 'MockedTransition';\nMockedComponents.TransitionChild.displayName = 'MockedTransitionChild';\n\nMockedComponents.Description.displayName = 'MockedDescription';\n\nMockedComponents.Input.displayName = 'MockedInput';\nMockedComponents.Textarea.displayName = 'MockedTextarea';\n\nexport function setupComponentMocks() {\n  // Only setup once\n  if (mocksSetup) {\n    return;\n  }\n\n  // Mock Clerk components and hooks\n  const mockUseUser = vi.fn(() => ({\n    isSignedIn: false,\n    user: null,\n    isLoaded: true,\n  }));\n\n  const mockUseClerk = vi.fn(() => ({\n    signOut: vi.fn(),\n    openUserProfile: vi.fn(),\n  }));\n\n  const mockUseAuth = vi.fn(() => ({\n    has: vi.fn(() => false),\n  }));\n\n  const mockUseSession = vi.fn(() => ({\n    session: null,\n    isLoaded: true,\n  }));\n\n  vi.mock('@clerk/nextjs', () => ({\n    useUser: mockUseUser,\n    useClerk: mockUseClerk,\n    useAuth: mockUseAuth,\n    useSession: mockUseSession,\n    ClerkProvider: ({ children }: { children: React.ReactNode }) => children,\n    SignIn: ({ children }: { children: React.ReactNode }) => children,\n    SignUp: ({ children }: { children: React.ReactNode }) => children,\n    SignInButton: ({ children }: { children: React.ReactNode }) => children,\n    SignUpButton: ({ children }: { children: React.ReactNode }) => children,\n    UserButton: () =>\n      React.createElement(\n        'div',\n        { 'data-testid': 'user-button' },\n        'User Button'\n      ),\n  }));\n\n  // Mock notification hook to avoid needing actual toast provider\n  vi.mock('@/lib/hooks/useNotifications', () => ({\n    useNotifications: () => ({\n      showToast: vi.fn(),\n      hideToast: vi.fn(),\n      clearToasts: vi.fn(),\n      success: vi.fn(),\n      error: vi.fn(),\n      info: vi.fn(),\n      warning: vi.fn(),\n      undo: vi.fn(),\n      retry: vi.fn(),\n      saveSuccess: vi.fn(),\n      saveError: vi.fn(),\n      uploadSuccess: vi.fn(),\n      uploadError: vi.fn(),\n      networkError: vi.fn(),\n      genericError: vi.fn(),\n      handleError: vi.fn(),\n      withLoadingToast: vi.fn(),\n    }),\n  }));\n\n  // Mock server-only modules\n  vi.mock('server-only', () => ({\n    default: vi.fn(),\n  }));\n\n  // Mock Next.js app router helpers to avoid needing actual routing context\n  vi.mock('next/navigation', () => ({\n    useRouter: () => ({\n      push: vi.fn(),\n      replace: vi.fn(),\n      refresh: vi.fn(),\n      prefetch: vi.fn().mockResolvedValue(undefined),\n    }),\n  }));\n\n  // Mock FeaturedArtists component to handle async component\n  vi.mock('@/components/home/FeaturedArtists', () => ({\n    FeaturedArtists: () =>\n      React.createElement(\n        'section',\n        { className: 'w-full py-12', 'data-testid': 'featured-artists' },\n        React.createElement(\n          'div',\n          { className: 'w-full md:hidden overflow-x-auto scroll-smooth' },\n          React.createElement(\n            'div',\n            {\n              className:\n                'flex flex-row gap-6 justify-center md:justify-between w-full min-w-[600px]',\n            },\n            // Mock artist links\n            React.createElement(\n              'a',\n              {\n                href: '/ladygaga',\n                className: 'group flex items-center justify-center',\n                title: 'Lady Gaga',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Lady Gaga'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/davidguetta',\n                className: 'group flex items-center justify-center',\n                title: 'David Guetta',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'David Guetta'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/billieeilish',\n                className: 'group flex items-center justify-center',\n                title: 'Billie Eilish',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'placeholder-image',\n                    className: 'placeholder',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Billie Eilish'\n                  )\n                )\n              )\n            )\n          )\n        )\n      ),\n  }));\n\n  // Mock Next.js Image component\n  vi.mock('next/image', () => ({\n    default: ({\n      src,\n      alt,\n      width,\n      height,\n      className,\n      ...props\n    }: React.ComponentProps<'img'>) => {\n      return React.createElement('img', {\n        src,\n        alt,\n        width,\n        height,\n        className,\n        'data-testid': 'next-image',\n        ...props,\n      });\n    },\n  }));\n\n  // Note: OptimizedImage and PlaceholderImage are no longer globally mocked here.\n  // Individual tests can mock them as needed, while unit tests for these atoms\n  // exercise the real implementations.\n\n  // Mock @headlessui/react with pre-defined components from module scope\n  vi.mock('@headlessui/react', () => MockedComponents);\n\n  // Mock framer-motion to avoid loading the full animation library in tests.\n  // Components only rely on basic motion primitives, so a div wrapper is enough.\n  vi.mock('framer-motion', () => {\n    const MockAnimatePresence = ({ children }: { children: React.ReactNode }) =>\n      React.createElement(React.Fragment, null, children);\n\n    const MockMotionComponent: React.FC<\n      React.HTMLAttributes<HTMLDivElement>\n    > = props => React.createElement('div', props);\n\n    const motion = new Proxy(MockMotionComponent, {\n      get: () => MockMotionComponent,\n    });\n\n    return {\n      __esModule: true,\n      AnimatePresence: MockAnimatePresence,\n      motion,\n    };\n  });\n\n  // Mock @jovie/ui as a lightweight pass-through to the real module so tests\n  // can stub specific components when needed without altering default behavior.\n  vi.mock('@jovie/ui', async () => {\n    const actual =\n      await vi.importActual<typeof import('@jovie/ui')>('@jovie/ui');\n    return {\n      __esModule: true,\n      ...actual,\n    };\n  });\n\n  mocksSetup = true;\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide a valid type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide a valid " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/setup-mocks.ts" },
        "span": [3761, 3778],
        "sourceCode": "import React from 'react';\nimport { vi } from 'vitest';\n\nlet mocksSetup = false;\n\n// Define mocked components outside the function to avoid hoisting issues\nconst MockedComponents = {\n  // Dialog components\n  Dialog: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref, role: 'dialog' });\n    }\n  ),\n  DialogPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  DialogTitle: React.forwardRef<HTMLHeadingElement, React.ComponentProps<'h2'>>(\n    (props, ref) => {\n      return React.createElement('h2', { ...props, ref });\n    }\n  ),\n  DialogDescription: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n  DialogBackdrop: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Combobox components\n  Combobox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ComboboxInput: React.forwardRef<\n    HTMLInputElement,\n    React.ComponentProps<'input'>\n  >((props, ref) => {\n    return React.createElement('input', { ...props, ref });\n  }),\n  ComboboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ComboboxOptions: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n  ComboboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Listbox components\n  Listbox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ListboxOptions: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Menu components\n  Menu: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  MenuItems: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuItem: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Popover components\n  Popover: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  PopoverButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  PopoverPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // RadioGroup components\n  RadioGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  RadioGroupOption: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Switch components\n  Switch: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n\n  // Tab components\n  TabGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabList: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  Tab: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n  TabPanels: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Transition components\n  Transition: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TransitionChild: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Description component\n  Description: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n\n  // Input component\n  Input: React.forwardRef<HTMLInputElement, React.ComponentProps<'input'>>(\n    (props, ref) => {\n      return React.createElement('input', { ...props, ref });\n    }\n  ),\n\n  // Textarea component\n  Textarea: React.forwardRef<\n    HTMLTextAreaElement,\n    React.ComponentProps<'textarea'>\n  >((props, ref) => {\n    return React.createElement('textarea', { ...props, ref });\n  }),\n};\n\n// Add display names to all mocked components\nMockedComponents.Dialog.displayName = 'MockedDialog';\nMockedComponents.DialogPanel.displayName = 'MockedDialogPanel';\nMockedComponents.DialogTitle.displayName = 'MockedDialogTitle';\nMockedComponents.DialogDescription.displayName = 'MockedDialogDescription';\nMockedComponents.DialogBackdrop.displayName = 'MockedDialogBackdrop';\n\nMockedComponents.Input.displayName = 'MockedInput';\n\nMockedComponents.Combobox.displayName = 'MockedCombobox';\nMockedComponents.ComboboxInput.displayName = 'MockedComboboxInput';\nMockedComponents.ComboboxButton.displayName = 'MockedComboboxButton';\nMockedComponents.ComboboxOptions.displayName = 'MockedComboboxOptions';\nMockedComponents.ComboboxOption.displayName = 'MockedComboboxOption';\n\nMockedComponents.Listbox.displayName = 'MockedListbox';\nMockedComponents.ListboxButton.displayName = 'MockedListboxButton';\nMockedComponents.ListboxOptions.displayName = 'MockedListboxOptions';\nMockedComponents.ListboxOption.displayName = 'MockedListboxOption';\n\nMockedComponents.Menu.displayName = 'MockedMenu';\nMockedComponents.MenuButton.displayName = 'MockedMenuButton';\nMockedComponents.MenuItems.displayName = 'MockedMenuItems';\nMockedComponents.MenuItem.displayName = 'MockedMenuItem';\n\nMockedComponents.Popover.displayName = 'MockedPopover';\nMockedComponents.PopoverButton.displayName = 'MockedPopoverButton';\nMockedComponents.PopoverPanel.displayName = 'MockedPopoverPanel';\n\nMockedComponents.RadioGroup.displayName = 'MockedRadioGroup';\nMockedComponents.RadioGroupOption.displayName = 'MockedRadioGroupOption';\n\nMockedComponents.Switch.displayName = 'MockedSwitch';\n\nMockedComponents.TabGroup.displayName = 'MockedTabGroup';\nMockedComponents.TabList.displayName = 'MockedTabList';\nMockedComponents.Tab.displayName = 'MockedTab';\nMockedComponents.TabPanels.displayName = 'MockedTabPanels';\nMockedComponents.TabPanel.displayName = 'MockedTabPanel';\n\nMockedComponents.Transition.displayName = 'MockedTransition';\nMockedComponents.TransitionChild.displayName = 'MockedTransitionChild';\n\nMockedComponents.Description.displayName = 'MockedDescription';\n\nMockedComponents.Input.displayName = 'MockedInput';\nMockedComponents.Textarea.displayName = 'MockedTextarea';\n\nexport function setupComponentMocks() {\n  // Only setup once\n  if (mocksSetup) {\n    return;\n  }\n\n  // Mock Clerk components and hooks\n  const mockUseUser = vi.fn(() => ({\n    isSignedIn: false,\n    user: null,\n    isLoaded: true,\n  }));\n\n  const mockUseClerk = vi.fn(() => ({\n    signOut: vi.fn(),\n    openUserProfile: vi.fn(),\n  }));\n\n  const mockUseAuth = vi.fn(() => ({\n    has: vi.fn(() => false),\n  }));\n\n  const mockUseSession = vi.fn(() => ({\n    session: null,\n    isLoaded: true,\n  }));\n\n  vi.mock('@clerk/nextjs', () => ({\n    useUser: mockUseUser,\n    useClerk: mockUseClerk,\n    useAuth: mockUseAuth,\n    useSession: mockUseSession,\n    ClerkProvider: ({ children }: { children: React.ReactNode }) => children,\n    SignIn: ({ children }: { children: React.ReactNode }) => children,\n    SignUp: ({ children }: { children: React.ReactNode }) => children,\n    SignInButton: ({ children }: { children: React.ReactNode }) => children,\n    SignUpButton: ({ children }: { children: React.ReactNode }) => children,\n    UserButton: () =>\n      React.createElement(\n        'div',\n        { 'data-testid': 'user-button' },\n        'User Button'\n      ),\n  }));\n\n  // Mock notification hook to avoid needing actual toast provider\n  vi.mock('@/lib/hooks/useNotifications', () => ({\n    useNotifications: () => ({\n      showToast: vi.fn(),\n      hideToast: vi.fn(),\n      clearToasts: vi.fn(),\n      success: vi.fn(),\n      error: vi.fn(),\n      info: vi.fn(),\n      warning: vi.fn(),\n      undo: vi.fn(),\n      retry: vi.fn(),\n      saveSuccess: vi.fn(),\n      saveError: vi.fn(),\n      uploadSuccess: vi.fn(),\n      uploadError: vi.fn(),\n      networkError: vi.fn(),\n      genericError: vi.fn(),\n      handleError: vi.fn(),\n      withLoadingToast: vi.fn(),\n    }),\n  }));\n\n  // Mock server-only modules\n  vi.mock('server-only', () => ({\n    default: vi.fn(),\n  }));\n\n  // Mock Next.js app router helpers to avoid needing actual routing context\n  vi.mock('next/navigation', () => ({\n    useRouter: () => ({\n      push: vi.fn(),\n      replace: vi.fn(),\n      refresh: vi.fn(),\n      prefetch: vi.fn().mockResolvedValue(undefined),\n    }),\n  }));\n\n  // Mock FeaturedArtists component to handle async component\n  vi.mock('@/components/home/FeaturedArtists', () => ({\n    FeaturedArtists: () =>\n      React.createElement(\n        'section',\n        { className: 'w-full py-12', 'data-testid': 'featured-artists' },\n        React.createElement(\n          'div',\n          { className: 'w-full md:hidden overflow-x-auto scroll-smooth' },\n          React.createElement(\n            'div',\n            {\n              className:\n                'flex flex-row gap-6 justify-center md:justify-between w-full min-w-[600px]',\n            },\n            // Mock artist links\n            React.createElement(\n              'a',\n              {\n                href: '/ladygaga',\n                className: 'group flex items-center justify-center',\n                title: 'Lady Gaga',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Lady Gaga'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/davidguetta',\n                className: 'group flex items-center justify-center',\n                title: 'David Guetta',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'David Guetta'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/billieeilish',\n                className: 'group flex items-center justify-center',\n                title: 'Billie Eilish',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'placeholder-image',\n                    className: 'placeholder',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Billie Eilish'\n                  )\n                )\n              )\n            )\n          )\n        )\n      ),\n  }));\n\n  // Mock Next.js Image component\n  vi.mock('next/image', () => ({\n    default: ({\n      src,\n      alt,\n      width,\n      height,\n      className,\n      ...props\n    }: React.ComponentProps<'img'>) => {\n      return React.createElement('img', {\n        src,\n        alt,\n        width,\n        height,\n        className,\n        'data-testid': 'next-image',\n        ...props,\n      });\n    },\n  }));\n\n  // Note: OptimizedImage and PlaceholderImage are no longer globally mocked here.\n  // Individual tests can mock them as needed, while unit tests for these atoms\n  // exercise the real implementations.\n\n  // Mock @headlessui/react with pre-defined components from module scope\n  vi.mock('@headlessui/react', () => MockedComponents);\n\n  // Mock framer-motion to avoid loading the full animation library in tests.\n  // Components only rely on basic motion primitives, so a div wrapper is enough.\n  vi.mock('framer-motion', () => {\n    const MockAnimatePresence = ({ children }: { children: React.ReactNode }) =>\n      React.createElement(React.Fragment, null, children);\n\n    const MockMotionComponent: React.FC<\n      React.HTMLAttributes<HTMLDivElement>\n    > = props => React.createElement('div', props);\n\n    const motion = new Proxy(MockMotionComponent, {\n      get: () => MockMotionComponent,\n    });\n\n    return {\n      __esModule: true,\n      AnimatePresence: MockAnimatePresence,\n      motion,\n    };\n  });\n\n  // Mock @jovie/ui as a lightweight pass-through to the real module so tests\n  // can stub specific components when needed without altering default behavior.\n  vi.mock('@jovie/ui', async () => {\n    const actual =\n      await vi.importActual<typeof import('@jovie/ui')>('@jovie/ui');\n    return {\n      __esModule: true,\n      ...actual,\n    };\n  });\n\n  mocksSetup = true;\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide a valid type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide a valid " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/setup-mocks.ts" },
        "span": [4501, 4518],
        "sourceCode": "import React from 'react';\nimport { vi } from 'vitest';\n\nlet mocksSetup = false;\n\n// Define mocked components outside the function to avoid hoisting issues\nconst MockedComponents = {\n  // Dialog components\n  Dialog: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref, role: 'dialog' });\n    }\n  ),\n  DialogPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  DialogTitle: React.forwardRef<HTMLHeadingElement, React.ComponentProps<'h2'>>(\n    (props, ref) => {\n      return React.createElement('h2', { ...props, ref });\n    }\n  ),\n  DialogDescription: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n  DialogBackdrop: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Combobox components\n  Combobox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ComboboxInput: React.forwardRef<\n    HTMLInputElement,\n    React.ComponentProps<'input'>\n  >((props, ref) => {\n    return React.createElement('input', { ...props, ref });\n  }),\n  ComboboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ComboboxOptions: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n  ComboboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Listbox components\n  Listbox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ListboxOptions: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Menu components\n  Menu: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  MenuItems: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuItem: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Popover components\n  Popover: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  PopoverButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  PopoverPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // RadioGroup components\n  RadioGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  RadioGroupOption: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Switch components\n  Switch: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n\n  // Tab components\n  TabGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabList: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  Tab: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n  TabPanels: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Transition components\n  Transition: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TransitionChild: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Description component\n  Description: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n\n  // Input component\n  Input: React.forwardRef<HTMLInputElement, React.ComponentProps<'input'>>(\n    (props, ref) => {\n      return React.createElement('input', { ...props, ref });\n    }\n  ),\n\n  // Textarea component\n  Textarea: React.forwardRef<\n    HTMLTextAreaElement,\n    React.ComponentProps<'textarea'>\n  >((props, ref) => {\n    return React.createElement('textarea', { ...props, ref });\n  }),\n};\n\n// Add display names to all mocked components\nMockedComponents.Dialog.displayName = 'MockedDialog';\nMockedComponents.DialogPanel.displayName = 'MockedDialogPanel';\nMockedComponents.DialogTitle.displayName = 'MockedDialogTitle';\nMockedComponents.DialogDescription.displayName = 'MockedDialogDescription';\nMockedComponents.DialogBackdrop.displayName = 'MockedDialogBackdrop';\n\nMockedComponents.Input.displayName = 'MockedInput';\n\nMockedComponents.Combobox.displayName = 'MockedCombobox';\nMockedComponents.ComboboxInput.displayName = 'MockedComboboxInput';\nMockedComponents.ComboboxButton.displayName = 'MockedComboboxButton';\nMockedComponents.ComboboxOptions.displayName = 'MockedComboboxOptions';\nMockedComponents.ComboboxOption.displayName = 'MockedComboboxOption';\n\nMockedComponents.Listbox.displayName = 'MockedListbox';\nMockedComponents.ListboxButton.displayName = 'MockedListboxButton';\nMockedComponents.ListboxOptions.displayName = 'MockedListboxOptions';\nMockedComponents.ListboxOption.displayName = 'MockedListboxOption';\n\nMockedComponents.Menu.displayName = 'MockedMenu';\nMockedComponents.MenuButton.displayName = 'MockedMenuButton';\nMockedComponents.MenuItems.displayName = 'MockedMenuItems';\nMockedComponents.MenuItem.displayName = 'MockedMenuItem';\n\nMockedComponents.Popover.displayName = 'MockedPopover';\nMockedComponents.PopoverButton.displayName = 'MockedPopoverButton';\nMockedComponents.PopoverPanel.displayName = 'MockedPopoverPanel';\n\nMockedComponents.RadioGroup.displayName = 'MockedRadioGroup';\nMockedComponents.RadioGroupOption.displayName = 'MockedRadioGroupOption';\n\nMockedComponents.Switch.displayName = 'MockedSwitch';\n\nMockedComponents.TabGroup.displayName = 'MockedTabGroup';\nMockedComponents.TabList.displayName = 'MockedTabList';\nMockedComponents.Tab.displayName = 'MockedTab';\nMockedComponents.TabPanels.displayName = 'MockedTabPanels';\nMockedComponents.TabPanel.displayName = 'MockedTabPanel';\n\nMockedComponents.Transition.displayName = 'MockedTransition';\nMockedComponents.TransitionChild.displayName = 'MockedTransitionChild';\n\nMockedComponents.Description.displayName = 'MockedDescription';\n\nMockedComponents.Input.displayName = 'MockedInput';\nMockedComponents.Textarea.displayName = 'MockedTextarea';\n\nexport function setupComponentMocks() {\n  // Only setup once\n  if (mocksSetup) {\n    return;\n  }\n\n  // Mock Clerk components and hooks\n  const mockUseUser = vi.fn(() => ({\n    isSignedIn: false,\n    user: null,\n    isLoaded: true,\n  }));\n\n  const mockUseClerk = vi.fn(() => ({\n    signOut: vi.fn(),\n    openUserProfile: vi.fn(),\n  }));\n\n  const mockUseAuth = vi.fn(() => ({\n    has: vi.fn(() => false),\n  }));\n\n  const mockUseSession = vi.fn(() => ({\n    session: null,\n    isLoaded: true,\n  }));\n\n  vi.mock('@clerk/nextjs', () => ({\n    useUser: mockUseUser,\n    useClerk: mockUseClerk,\n    useAuth: mockUseAuth,\n    useSession: mockUseSession,\n    ClerkProvider: ({ children }: { children: React.ReactNode }) => children,\n    SignIn: ({ children }: { children: React.ReactNode }) => children,\n    SignUp: ({ children }: { children: React.ReactNode }) => children,\n    SignInButton: ({ children }: { children: React.ReactNode }) => children,\n    SignUpButton: ({ children }: { children: React.ReactNode }) => children,\n    UserButton: () =>\n      React.createElement(\n        'div',\n        { 'data-testid': 'user-button' },\n        'User Button'\n      ),\n  }));\n\n  // Mock notification hook to avoid needing actual toast provider\n  vi.mock('@/lib/hooks/useNotifications', () => ({\n    useNotifications: () => ({\n      showToast: vi.fn(),\n      hideToast: vi.fn(),\n      clearToasts: vi.fn(),\n      success: vi.fn(),\n      error: vi.fn(),\n      info: vi.fn(),\n      warning: vi.fn(),\n      undo: vi.fn(),\n      retry: vi.fn(),\n      saveSuccess: vi.fn(),\n      saveError: vi.fn(),\n      uploadSuccess: vi.fn(),\n      uploadError: vi.fn(),\n      networkError: vi.fn(),\n      genericError: vi.fn(),\n      handleError: vi.fn(),\n      withLoadingToast: vi.fn(),\n    }),\n  }));\n\n  // Mock server-only modules\n  vi.mock('server-only', () => ({\n    default: vi.fn(),\n  }));\n\n  // Mock Next.js app router helpers to avoid needing actual routing context\n  vi.mock('next/navigation', () => ({\n    useRouter: () => ({\n      push: vi.fn(),\n      replace: vi.fn(),\n      refresh: vi.fn(),\n      prefetch: vi.fn().mockResolvedValue(undefined),\n    }),\n  }));\n\n  // Mock FeaturedArtists component to handle async component\n  vi.mock('@/components/home/FeaturedArtists', () => ({\n    FeaturedArtists: () =>\n      React.createElement(\n        'section',\n        { className: 'w-full py-12', 'data-testid': 'featured-artists' },\n        React.createElement(\n          'div',\n          { className: 'w-full md:hidden overflow-x-auto scroll-smooth' },\n          React.createElement(\n            'div',\n            {\n              className:\n                'flex flex-row gap-6 justify-center md:justify-between w-full min-w-[600px]',\n            },\n            // Mock artist links\n            React.createElement(\n              'a',\n              {\n                href: '/ladygaga',\n                className: 'group flex items-center justify-center',\n                title: 'Lady Gaga',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Lady Gaga'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/davidguetta',\n                className: 'group flex items-center justify-center',\n                title: 'David Guetta',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'David Guetta'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/billieeilish',\n                className: 'group flex items-center justify-center',\n                title: 'Billie Eilish',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'placeholder-image',\n                    className: 'placeholder',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Billie Eilish'\n                  )\n                )\n              )\n            )\n          )\n        )\n      ),\n  }));\n\n  // Mock Next.js Image component\n  vi.mock('next/image', () => ({\n    default: ({\n      src,\n      alt,\n      width,\n      height,\n      className,\n      ...props\n    }: React.ComponentProps<'img'>) => {\n      return React.createElement('img', {\n        src,\n        alt,\n        width,\n        height,\n        className,\n        'data-testid': 'next-image',\n        ...props,\n      });\n    },\n  }));\n\n  // Note: OptimizedImage and PlaceholderImage are no longer globally mocked here.\n  // Individual tests can mock them as needed, while unit tests for these atoms\n  // exercise the real implementations.\n\n  // Mock @headlessui/react with pre-defined components from module scope\n  vi.mock('@headlessui/react', () => MockedComponents);\n\n  // Mock framer-motion to avoid loading the full animation library in tests.\n  // Components only rely on basic motion primitives, so a div wrapper is enough.\n  vi.mock('framer-motion', () => {\n    const MockAnimatePresence = ({ children }: { children: React.ReactNode }) =>\n      React.createElement(React.Fragment, null, children);\n\n    const MockMotionComponent: React.FC<\n      React.HTMLAttributes<HTMLDivElement>\n    > = props => React.createElement('div', props);\n\n    const motion = new Proxy(MockMotionComponent, {\n      get: () => MockMotionComponent,\n    });\n\n    return {\n      __esModule: true,\n      AnimatePresence: MockAnimatePresence,\n      motion,\n    };\n  });\n\n  // Mock @jovie/ui as a lightweight pass-through to the real module so tests\n  // can stub specific components when needed without altering default behavior.\n  vi.mock('@jovie/ui', async () => {\n    const actual =\n      await vi.importActual<typeof import('@jovie/ui')>('@jovie/ui');\n    return {\n      __esModule: true,\n      ...actual,\n    };\n  });\n\n  mocksSetup = true;\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide a valid type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide a valid " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/setup-mocks.ts" },
        "span": [5029, 5046],
        "sourceCode": "import React from 'react';\nimport { vi } from 'vitest';\n\nlet mocksSetup = false;\n\n// Define mocked components outside the function to avoid hoisting issues\nconst MockedComponents = {\n  // Dialog components\n  Dialog: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref, role: 'dialog' });\n    }\n  ),\n  DialogPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  DialogTitle: React.forwardRef<HTMLHeadingElement, React.ComponentProps<'h2'>>(\n    (props, ref) => {\n      return React.createElement('h2', { ...props, ref });\n    }\n  ),\n  DialogDescription: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n  DialogBackdrop: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Combobox components\n  Combobox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ComboboxInput: React.forwardRef<\n    HTMLInputElement,\n    React.ComponentProps<'input'>\n  >((props, ref) => {\n    return React.createElement('input', { ...props, ref });\n  }),\n  ComboboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ComboboxOptions: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n  ComboboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Listbox components\n  Listbox: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  ListboxOptions: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  ListboxOption: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Menu components\n  Menu: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  MenuItems: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  MenuItem: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Popover components\n  Popover: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  PopoverButton: React.forwardRef<\n    HTMLButtonElement,\n    React.ComponentProps<'button'>\n  >((props, ref) => {\n    return React.createElement('button', { ...props, ref });\n  }),\n  PopoverPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // RadioGroup components\n  RadioGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  RadioGroupOption: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Switch components\n  Switch: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n\n  // Tab components\n  TabGroup: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabList: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  Tab: React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n    (props, ref) => {\n      return React.createElement('button', { ...props, ref });\n    }\n  ),\n  TabPanels: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TabPanel: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n\n  // Transition components\n  Transition: React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n    (props, ref) => {\n      return React.createElement('div', { ...props, ref });\n    }\n  ),\n  TransitionChild: React.forwardRef<\n    HTMLDivElement,\n    React.ComponentProps<'div'>\n  >((props, ref) => {\n    return React.createElement('div', { ...props, ref });\n  }),\n\n  // Description component\n  Description: React.forwardRef<\n    HTMLParagraphElement,\n    React.ComponentProps<'p'>\n  >((props, ref) => {\n    return React.createElement('p', { ...props, ref });\n  }),\n\n  // Input component\n  Input: React.forwardRef<HTMLInputElement, React.ComponentProps<'input'>>(\n    (props, ref) => {\n      return React.createElement('input', { ...props, ref });\n    }\n  ),\n\n  // Textarea component\n  Textarea: React.forwardRef<\n    HTMLTextAreaElement,\n    React.ComponentProps<'textarea'>\n  >((props, ref) => {\n    return React.createElement('textarea', { ...props, ref });\n  }),\n};\n\n// Add display names to all mocked components\nMockedComponents.Dialog.displayName = 'MockedDialog';\nMockedComponents.DialogPanel.displayName = 'MockedDialogPanel';\nMockedComponents.DialogTitle.displayName = 'MockedDialogTitle';\nMockedComponents.DialogDescription.displayName = 'MockedDialogDescription';\nMockedComponents.DialogBackdrop.displayName = 'MockedDialogBackdrop';\n\nMockedComponents.Input.displayName = 'MockedInput';\n\nMockedComponents.Combobox.displayName = 'MockedCombobox';\nMockedComponents.ComboboxInput.displayName = 'MockedComboboxInput';\nMockedComponents.ComboboxButton.displayName = 'MockedComboboxButton';\nMockedComponents.ComboboxOptions.displayName = 'MockedComboboxOptions';\nMockedComponents.ComboboxOption.displayName = 'MockedComboboxOption';\n\nMockedComponents.Listbox.displayName = 'MockedListbox';\nMockedComponents.ListboxButton.displayName = 'MockedListboxButton';\nMockedComponents.ListboxOptions.displayName = 'MockedListboxOptions';\nMockedComponents.ListboxOption.displayName = 'MockedListboxOption';\n\nMockedComponents.Menu.displayName = 'MockedMenu';\nMockedComponents.MenuButton.displayName = 'MockedMenuButton';\nMockedComponents.MenuItems.displayName = 'MockedMenuItems';\nMockedComponents.MenuItem.displayName = 'MockedMenuItem';\n\nMockedComponents.Popover.displayName = 'MockedPopover';\nMockedComponents.PopoverButton.displayName = 'MockedPopoverButton';\nMockedComponents.PopoverPanel.displayName = 'MockedPopoverPanel';\n\nMockedComponents.RadioGroup.displayName = 'MockedRadioGroup';\nMockedComponents.RadioGroupOption.displayName = 'MockedRadioGroupOption';\n\nMockedComponents.Switch.displayName = 'MockedSwitch';\n\nMockedComponents.TabGroup.displayName = 'MockedTabGroup';\nMockedComponents.TabList.displayName = 'MockedTabList';\nMockedComponents.Tab.displayName = 'MockedTab';\nMockedComponents.TabPanels.displayName = 'MockedTabPanels';\nMockedComponents.TabPanel.displayName = 'MockedTabPanel';\n\nMockedComponents.Transition.displayName = 'MockedTransition';\nMockedComponents.TransitionChild.displayName = 'MockedTransitionChild';\n\nMockedComponents.Description.displayName = 'MockedDescription';\n\nMockedComponents.Input.displayName = 'MockedInput';\nMockedComponents.Textarea.displayName = 'MockedTextarea';\n\nexport function setupComponentMocks() {\n  // Only setup once\n  if (mocksSetup) {\n    return;\n  }\n\n  // Mock Clerk components and hooks\n  const mockUseUser = vi.fn(() => ({\n    isSignedIn: false,\n    user: null,\n    isLoaded: true,\n  }));\n\n  const mockUseClerk = vi.fn(() => ({\n    signOut: vi.fn(),\n    openUserProfile: vi.fn(),\n  }));\n\n  const mockUseAuth = vi.fn(() => ({\n    has: vi.fn(() => false),\n  }));\n\n  const mockUseSession = vi.fn(() => ({\n    session: null,\n    isLoaded: true,\n  }));\n\n  vi.mock('@clerk/nextjs', () => ({\n    useUser: mockUseUser,\n    useClerk: mockUseClerk,\n    useAuth: mockUseAuth,\n    useSession: mockUseSession,\n    ClerkProvider: ({ children }: { children: React.ReactNode }) => children,\n    SignIn: ({ children }: { children: React.ReactNode }) => children,\n    SignUp: ({ children }: { children: React.ReactNode }) => children,\n    SignInButton: ({ children }: { children: React.ReactNode }) => children,\n    SignUpButton: ({ children }: { children: React.ReactNode }) => children,\n    UserButton: () =>\n      React.createElement(\n        'div',\n        { 'data-testid': 'user-button' },\n        'User Button'\n      ),\n  }));\n\n  // Mock notification hook to avoid needing actual toast provider\n  vi.mock('@/lib/hooks/useNotifications', () => ({\n    useNotifications: () => ({\n      showToast: vi.fn(),\n      hideToast: vi.fn(),\n      clearToasts: vi.fn(),\n      success: vi.fn(),\n      error: vi.fn(),\n      info: vi.fn(),\n      warning: vi.fn(),\n      undo: vi.fn(),\n      retry: vi.fn(),\n      saveSuccess: vi.fn(),\n      saveError: vi.fn(),\n      uploadSuccess: vi.fn(),\n      uploadError: vi.fn(),\n      networkError: vi.fn(),\n      genericError: vi.fn(),\n      handleError: vi.fn(),\n      withLoadingToast: vi.fn(),\n    }),\n  }));\n\n  // Mock server-only modules\n  vi.mock('server-only', () => ({\n    default: vi.fn(),\n  }));\n\n  // Mock Next.js app router helpers to avoid needing actual routing context\n  vi.mock('next/navigation', () => ({\n    useRouter: () => ({\n      push: vi.fn(),\n      replace: vi.fn(),\n      refresh: vi.fn(),\n      prefetch: vi.fn().mockResolvedValue(undefined),\n    }),\n  }));\n\n  // Mock FeaturedArtists component to handle async component\n  vi.mock('@/components/home/FeaturedArtists', () => ({\n    FeaturedArtists: () =>\n      React.createElement(\n        'section',\n        { className: 'w-full py-12', 'data-testid': 'featured-artists' },\n        React.createElement(\n          'div',\n          { className: 'w-full md:hidden overflow-x-auto scroll-smooth' },\n          React.createElement(\n            'div',\n            {\n              className:\n                'flex flex-row gap-6 justify-center md:justify-between w-full min-w-[600px]',\n            },\n            // Mock artist links\n            React.createElement(\n              'a',\n              {\n                href: '/ladygaga',\n                className: 'group flex items-center justify-center',\n                title: 'Lady Gaga',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Lady Gaga'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/davidguetta',\n                className: 'group flex items-center justify-center',\n                title: 'David Guetta',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'artist-image',\n                    className: 'mock-image',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'David Guetta'\n                  )\n                )\n              )\n            ),\n            React.createElement(\n              'a',\n              {\n                href: '/billieeilish',\n                className: 'group flex items-center justify-center',\n                title: 'Billie Eilish',\n              },\n              React.createElement(\n                'div',\n                { className: 'relative' },\n                React.createElement(\n                  'div',\n                  {\n                    'data-testid': 'optimized-image',\n                    className:\n                      'ring-2 ring-gray-300 dark:ring-white/20 group-hover:ring-gray-400 dark:group-hover:ring-white/40 transition-all duration-200',\n                  },\n                  React.createElement('div', {\n                    'data-testid': 'placeholder-image',\n                    className: 'placeholder',\n                  })\n                ),\n                React.createElement(\n                  'div',\n                  {\n                    className:\n                      'absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300',\n                  },\n                  React.createElement(\n                    'span',\n                    {\n                      className:\n                        'text-white text-xs font-medium text-center px-2',\n                    },\n                    'Billie Eilish'\n                  )\n                )\n              )\n            )\n          )\n        )\n      ),\n  }));\n\n  // Mock Next.js Image component\n  vi.mock('next/image', () => ({\n    default: ({\n      src,\n      alt,\n      width,\n      height,\n      className,\n      ...props\n    }: React.ComponentProps<'img'>) => {\n      return React.createElement('img', {\n        src,\n        alt,\n        width,\n        height,\n        className,\n        'data-testid': 'next-image',\n        ...props,\n      });\n    },\n  }));\n\n  // Note: OptimizedImage and PlaceholderImage are no longer globally mocked here.\n  // Individual tests can mock them as needed, while unit tests for these atoms\n  // exercise the real implementations.\n\n  // Mock @headlessui/react with pre-defined components from module scope\n  vi.mock('@headlessui/react', () => MockedComponents);\n\n  // Mock framer-motion to avoid loading the full animation library in tests.\n  // Components only rely on basic motion primitives, so a div wrapper is enough.\n  vi.mock('framer-motion', () => {\n    const MockAnimatePresence = ({ children }: { children: React.ReactNode }) =>\n      React.createElement(React.Fragment, null, children);\n\n    const MockMotionComponent: React.FC<\n      React.HTMLAttributes<HTMLDivElement>\n    > = props => React.createElement('div', props);\n\n    const motion = new Proxy(MockMotionComponent, {\n      get: () => MockMotionComponent,\n    });\n\n    return {\n      __esModule: true,\n      AnimatePresence: MockAnimatePresence,\n      motion,\n    };\n  });\n\n  // Mock @jovie/ui as a lightweight pass-through to the real module so tests\n  // can stub specific components when needed without altering default behavior.\n  vi.mock('@jovie/ui', async () => {\n    const actual =\n      await vi.importActual<typeof import('@jovie/ui')>('@jovie/ui');\n    return {\n      __esModule: true,\n      ...actual,\n    };\n  });\n\n  mocksSetup = true;\n}\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/GroupedLinksManager.test.tsx" },
        "span": [1863, 1927],
        "sourceCode": "import { TooltipProvider } from '@jovie/ui';\nimport { fireEvent, render, screen, waitFor } from '@testing-library/react';\nimport React from 'react';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\n\n// Utilities\nimport { MAX_SOCIAL_LINKS } from '@/constants/app';\nimport type { DetectedLink } from '@/lib/utils/platform-detection';\n\n// Helper factories\nconst ytSocial = (overrides: Partial<DetectedLink> = {}): DetectedLink => ({\n  platform: {\n    id: 'youtube',\n    name: 'YouTube',\n    category: 'social',\n    icon: 'youtube',\n    color: '#ff0000',\n    placeholder: 'https://youtube.com/@user',\n  },\n  normalizedUrl: 'https://youtube.com/@user',\n  originalUrl: 'https://youtube.com/@user',\n  suggestedTitle: 'YouTube',\n  isValid: true,\n  ...overrides,\n});\n\nconst makeSocial = (id: string): DetectedLink => ({\n  platform: {\n    id,\n    name: id,\n    category: 'social',\n    icon: id,\n    color: '#000000',\n    placeholder: `https://${id}.com/user`,\n  },\n  normalizedUrl: `https://${id}.com/user`,\n  originalUrl: `https://${id}.com/user`,\n  suggestedTitle: id,\n  isValid: true,\n});\n\n// Note: DSP variant factory omitted until directly needed in tests\n\nconst igSocial = (overrides: Partial<DetectedLink> = {}): DetectedLink => ({\n  platform: {\n    id: 'instagram',\n    name: 'Instagram',\n    category: 'social',\n    icon: 'instagram',\n    color: '#C13584',\n    placeholder: 'https://instagram.com/user',\n  },\n  normalizedUrl: 'https://instagram.com/user',\n  originalUrl: 'https://instagram.com/user',\n  suggestedTitle: 'Instagram',\n  isValid: true,\n  ...overrides,\n});\n\n// Dynamic mocked payload for UniversalLinkInput per test\nlet nextAddPayload: DetectedLink | null = null;\n\nvi.mock('@/components/dashboard/molecules/UniversalLinkInput', async () => {\n  return {\n    UniversalLinkInput: ({ onAdd }: { onAdd: (l: DetectedLink) => void }) => (\n      <button onClick={() => nextAddPayload && onAdd(nextAddPayload)}>\n        mock-add\n      </button>\n    ),\n  };\n});\n\n// dnd-kit minimal mocks to avoid complex interactions in unit tests\nvi.mock('@dnd-kit/core', () => {\n  return {\n    // Simplify DndContext to just render children without real DnD behavior\n    DndContext: ({ children }: { children: React.ReactNode }) => (\n      <div>{children}</div>\n    ),\n    // Provide a no-op PointerSensor so useSensor(PointerSensor, ...) remains valid\n    PointerSensor: function PointerSensor() {\n      // no-op sensor placeholder for tests\n    },\n    // Stub sensors to avoid complex behavior in unit tests\n    useSensor: vi.fn().mockImplementation((_sensor, options) => ({\n      sensor: _sensor,\n      options,\n    })),\n    useSensors: vi.fn().mockImplementation(() => []),\n  } as unknown as typeof import('@dnd-kit/core');\n});\n\nvi.mock('@dnd-kit/sortable', async () => {\n  return {\n    SortableContext: ({ children }: { children: React.ReactNode }) => (\n      <div>{children}</div>\n    ),\n    useSortable: () => ({\n      attributes: {},\n      listeners: {},\n      setNodeRef: vi.fn(),\n      transform: undefined,\n      transition: undefined,\n    }),\n    arrayMove: (arr: unknown[], from: number, to: number) => {\n      const next = arr.slice();\n      const [item] = next.splice(from, 1);\n      next.splice(to, 0, item);\n      return next;\n    },\n  } as unknown as typeof import('@dnd-kit/sortable');\n});\n\nvi.mock('@dnd-kit/utilities', () => ({\n  CSS: { Transform: { toString: () => '' } },\n}));\n\n// Mock SocialIcon to avoid importing heavy simple-icons payload in this unit test\nvi.mock('@/components/atoms/SocialIcon', () => {\n  const MockSocialIcon = ({ className }: { className?: string }) => (\n    <div data-testid='social-icon' className={className} />\n  );\n\n  return {\n    __esModule: true,\n    SocialIcon: MockSocialIcon,\n    getPlatformIcon: () => undefined,\n  } as unknown as typeof import('@/components/atoms/SocialIcon');\n});\n\n// Import after mocks\nimport { GroupedLinksManager } from '@/components/dashboard/organisms/GroupedLinksManager';\n\nconst renderWithProviders = (ui: React.ReactElement) => {\n  return render(<TooltipProvider>{ui}</TooltipProvider>);\n};\n\nconst shouldRunGroupedLinksTests = process.env.RUN_GROUPED_LINKS_TESTS === '1';\n\nconst describeFn = shouldRunGroupedLinksTests ? describe : describe.skip;\n\ndescribeFn('GroupedLinksManager', () => {\n  beforeEach(() => {\n    nextAddPayload = null;\n  });\n\n  it('adds multiple links when clicked quickly (no stale state overwrites)', async () => {\n    vi.useFakeTimers();\n    const onLinksChange = vi.fn();\n\n    renderWithProviders(\n      <GroupedLinksManager initialLinks={[]} onLinksChange={onLinksChange} />\n    );\n\n    // ignore initial mount call\n    onLinksChange.mockClear();\n\n    nextAddPayload = igSocial({\n      normalizedUrl: 'https://instagram.com/a',\n      originalUrl: 'https://instagram.com/a',\n    });\n    fireEvent.click(screen.getByText('mock-add'));\n\n    nextAddPayload = ytSocial({\n      platform: {\n        ...ytSocial().platform,\n        category: 'dsp',\n      },\n      normalizedUrl: 'https://music.youtube.com/channel/a',\n      originalUrl: 'https://music.youtube.com/channel/a',\n    });\n    fireEvent.click(screen.getByText('mock-add'));\n\n    // handleAdd includes a 600ms delay; advance timers so both complete\n    await vi.advanceTimersByTimeAsync(650);\n\n    const last = onLinksChange.mock.calls.at(-1)?.[0] as DetectedLink[];\n    expect(last).toHaveLength(2);\n    const urls = last.map(l => l.normalizedUrl).sort();\n    expect(urls).toEqual(\n      ['https://instagram.com/a', 'https://music.youtube.com/channel/a'].sort()\n    );\n\n    vi.useRealTimers();\n  });\n\n  it('calls onLinksChange on mount with initial links', () => {\n    const onLinksChange = vi.fn();\n    renderWithProviders(\n      <GroupedLinksManager\n        initialLinks={[igSocial()]}\n        onLinksChange={onLinksChange}\n      />\n    );\n    expect(onLinksChange).toHaveBeenCalledTimes(1);\n    expect(onLinksChange.mock.calls[0][0]).toHaveLength(1);\n  });\n\n  it('shows YouTube prompt when adding duplicate in same section, and can add to other section', () => {\n    const onLinksChange = vi.fn();\n    const onLinkAdded = vi.fn();\n\n    renderWithProviders(\n      <GroupedLinksManager\n        initialLinks={[ytSocial()]}\n        onLinksChange={onLinksChange}\n        onLinkAdded={onLinkAdded}\n      />\n    );\n\n    // set payload to same-section YouTube (duplicate)\n    nextAddPayload = ytSocial();\n    fireEvent.click(screen.getByText('mock-add'));\n\n    // Prompt should appear\n    expect(\n      screen.getByText(/Do you also want to add it as a music service/i)\n    ).toBeInTheDocument();\n\n    // Accept prompt to add as Music\n    fireEvent.click(screen.getByRole('button', { name: /Add as Music/i }));\n\n    // onLinkAdded called and onLinksChange fired with 2 links (social + dsp)\n    expect(onLinkAdded).toHaveBeenCalledTimes(1);\n    expect(onLinksChange).toHaveBeenCalled();\n    const last = onLinksChange.mock.calls.at(-1)?.[0] as DetectedLink[];\n    expect(last).toHaveLength(2);\n    const hasDSP = last.some(\n      l => l.platform.id === 'youtube' && l.platform.category === 'dsp'\n    );\n    expect(hasDSP).toBe(true);\n  });\n\n  it('toggles visibility and fires onLinksChange', () => {\n    const onLinksChange = vi.fn();\n\n    renderWithProviders(\n      <GroupedLinksManager\n        initialLinks={[igSocial()]}\n        onLinksChange={onLinksChange}\n      />\n    );\n\n    // Initial call on mount\n    expect(onLinksChange).toHaveBeenCalledTimes(1);\n\n    // Open menu and click \"Hide\" on the first row\n    const menuButton = screen.getByRole('button', {\n      name: /Open actions for Instagram/i,\n    });\n    fireEvent.click(menuButton);\n\n    const hideBtn = screen.getByRole('button', { name: /^Hide$/i });\n    fireEvent.click(hideBtn);\n\n    expect(onLinksChange).toHaveBeenCalledTimes(2);\n    const updated = onLinksChange.mock.calls.at(-1)?.[0] as DetectedLink[];\n    // Expect isVisible false for the first link\n    const vis = (updated[0] as unknown as { isVisible?: boolean }).isVisible;\n    expect(vis).toBe(false);\n  });\n\n  it('caps visible social links at MAX_SOCIAL_LINKS and adds new socials as hidden', async () => {\n    const onLinksChange = vi.fn();\n    vi.useFakeTimers();\n\n    const initial = Array.from({ length: MAX_SOCIAL_LINKS }, (_, i) =>\n      makeSocial(`social-${i}`)\n    );\n\n    renderWithProviders(\n      <GroupedLinksManager\n        initialLinks={initial}\n        onLinksChange={onLinksChange}\n      />\n    );\n\n    // ignore initial mount call\n    onLinksChange.mockClear();\n\n    nextAddPayload = makeSocial('social-extra');\n    fireEvent.click(screen.getByText('mock-add'));\n\n    await vi.advanceTimersByTimeAsync(650);\n\n    expect(onLinksChange).toHaveBeenCalled();\n    const latest = onLinksChange.mock.calls.at(-1)?.[0] as DetectedLink[];\n\n    // Should have MAX_SOCIAL_LINKS + 1 total links\n    expect(latest).toHaveLength(MAX_SOCIAL_LINKS + 1);\n\n    const socialVisible = latest.filter(l => {\n      const category = l.platform.category;\n      const visible = (l as unknown as { isVisible?: boolean }).isVisible;\n      return category === 'social' && (visible ?? true);\n    });\n\n    expect(socialVisible).toHaveLength(MAX_SOCIAL_LINKS);\n\n    const extra = latest.find(l => l.platform.id === 'social-extra');\n    const extraVisible =\n      (extra as unknown as { isVisible?: boolean }).isVisible ?? true;\n    expect(extraVisible).toBe(false);\n    vi.useRealTimers();\n  });\n\n  it('shows ingested suggestion pills and accepts on click', async () => {\n    const onAcceptSuggestion = vi\n      .fn()\n      .mockResolvedValue(\n        igSocial({ normalizedUrl: 'https://instagram.com/artist' })\n      );\n\n    renderWithProviders(\n      <GroupedLinksManager<DetectedLink>\n        initialLinks={[]}\n        suggestedLinks={[\n          {\n            ...igSocial({ normalizedUrl: 'https://instagram.com/artist' }),\n            suggestionId: 'suggest-1',\n          } as DetectedLink & { suggestionId: string },\n        ]}\n        onAcceptSuggestion={onAcceptSuggestion}\n        suggestionsEnabled\n      />\n    );\n\n    const pill = screen.getByTestId('ingested-suggestion-pill');\n    expect(pill).toHaveTextContent('Instagram');\n    expect(pill).toHaveTextContent('@artist');\n\n    fireEvent.click(pill);\n    await waitFor(() => {\n      expect(onAcceptSuggestion).toHaveBeenCalledTimes(1);\n    });\n  });\n\n  it('dismisses ingested suggestion pills without triggering accept', async () => {\n    const onAcceptSuggestion = vi.fn();\n    const onDismissSuggestion = vi.fn().mockResolvedValue(undefined);\n\n    renderWithProviders(\n      <GroupedLinksManager<DetectedLink>\n        initialLinks={[]}\n        suggestedLinks={[\n          {\n            ...igSocial({ normalizedUrl: 'https://instagram.com/artist' }),\n            suggestionId: 'suggest-2',\n          } as DetectedLink & { suggestionId: string },\n        ]}\n        onAcceptSuggestion={onAcceptSuggestion}\n        onDismissSuggestion={onDismissSuggestion}\n        suggestionsEnabled\n      />\n    );\n\n    const dismissButton = screen.getByLabelText(\n      /Dismiss Instagram suggestion/i\n    );\n    fireEvent.click(dismissButton);\n\n    await waitFor(() => {\n      expect(onDismissSuggestion).toHaveBeenCalledTimes(1);\n    });\n    expect(onAcceptSuggestion).not.toHaveBeenCalled();\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/OptimizedImage.test.tsx" },
        "span": [409, 551],
        "sourceCode": "import { fireEvent, render, screen } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { OptimizedImage } from '@/components/atoms/OptimizedImage';\n\n// Mock next/image\nvi.mock('next/image', () => ({\n  default: ({\n    src,\n    alt,\n    onError,\n    onLoad,\n    ...props\n  }: React.ComponentProps<'img'>) => (\n    // eslint-disable-next-line @next/next/no-img-element\n    <img\n      src={src}\n      alt={alt}\n      onError={onError}\n      onLoad={onLoad}\n      {...props}\n      data-testid='optimized-image'\n    />\n  ),\n}));\n\ndescribe('OptimizedImage', () => {\n  it('renders correctly with valid src', () => {\n    render(\n      <OptimizedImage\n        src='https://example.com/image.jpg'\n        alt='Test image'\n        enableVersioning={false}\n      />\n    );\n\n    const image = screen.getByTestId('optimized-image');\n    expect(image).toBeInTheDocument();\n    expect(image).toHaveAttribute('src', 'https://example.com/image.jpg');\n    // SEO generator extracts filename and uses \"Image\" from the URL\n    expect(image).toHaveAttribute('alt', 'Image');\n  });\n\n  it('shows fallback image when src is null', () => {\n    render(\n      <OptimizedImage src={null} alt='Test image' enableVersioning={false} />\n    );\n\n    // Component shows fallback image instead of placeholder\n    const image = screen.getByTestId('optimized-image');\n    expect(image).toBeInTheDocument();\n    expect(image).toHaveAttribute('src', '/avatars/default-user.png');\n  });\n\n  it('shows fallback image when src is empty string', () => {\n    render(<OptimizedImage src='' alt='Test image' enableVersioning={false} />);\n\n    // Component shows fallback image instead of placeholder\n    const image = screen.getByTestId('optimized-image');\n    expect(image).toBeInTheDocument();\n    expect(image).toHaveAttribute('src', '/avatars/default-user.png');\n  });\n\n  it('shows fallback image on error', () => {\n    render(\n      <OptimizedImage\n        src='https://example.com/invalid.jpg'\n        alt='Test image'\n        enableVersioning={false}\n      />\n    );\n\n    const image = screen.getByTestId('optimized-image');\n    fireEvent.error(image);\n\n    // After error, component switches to fallback image\n    const fallbackImage = screen.getByTestId('optimized-image');\n    expect(fallbackImage).toHaveAttribute('src', '/avatars/default-user.png');\n  });\n\n  it('shows loading skeleton initially', () => {\n    render(\n      <OptimizedImage\n        src='https://example.com/image.jpg'\n        alt='Test image'\n        enableVersioning={false}\n      />\n    );\n\n    // Image starts with opacity-0 while loading\n    const image = screen.getByTestId('optimized-image');\n    expect(image).toHaveClass('opacity-0');\n  });\n\n  it('hides loading skeleton when image loads', () => {\n    render(\n      <OptimizedImage\n        src='https://example.com/image.jpg'\n        alt='Test image'\n        enableVersioning={false}\n      />\n    );\n\n    const image = screen.getByTestId('optimized-image');\n    fireEvent.load(image);\n\n    // After load, image should have opacity-100\n    expect(image).toHaveClass('opacity-100');\n  });\n\n  it('renders with different sizes', () => {\n    const { rerender } = render(\n      <OptimizedImage\n        src='https://example.com/image.jpg'\n        alt='Test'\n        size='sm'\n      />\n    );\n    expect(screen.getAllByTestId('optimized-image').length).toBeGreaterThan(0);\n\n    rerender(\n      <OptimizedImage\n        src='https://example.com/image.jpg'\n        alt='Test'\n        size='md'\n      />\n    );\n    expect(screen.getAllByTestId('optimized-image').length).toBeGreaterThan(0);\n\n    rerender(\n      <OptimizedImage\n        src='https://example.com/image.jpg'\n        alt='Test'\n        size='lg'\n      />\n    );\n    expect(screen.getAllByTestId('optimized-image').length).toBeGreaterThan(0);\n  });\n\n  it('renders with different shapes', () => {\n    const { rerender } = render(\n      <OptimizedImage\n        src='https://example.com/image.jpg'\n        alt='Test'\n        shape='square'\n      />\n    );\n    expect(screen.getAllByTestId('optimized-image').length).toBeGreaterThan(0);\n\n    rerender(\n      <OptimizedImage\n        src='https://example.com/image.jpg'\n        alt='Test'\n        shape='circle'\n      />\n    );\n    expect(screen.getAllByTestId('optimized-image').length).toBeGreaterThan(0);\n  });\n\n  it('renders with width and height', () => {\n    render(\n      <OptimizedImage\n        src='https://example.com/image.jpg'\n        alt='Test image'\n        width={100}\n        height={100}\n        enableVersioning={false}\n      />\n    );\n\n    const image = screen.getByTestId('optimized-image');\n    expect(image).toHaveAttribute('width', '100');\n    expect(image).toHaveAttribute('height', '100');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/QRCode.test.tsx" },
        "span": [404, 544],
        "sourceCode": "import { fireEvent, render, screen } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { QRCode } from '@/components/atoms/QRCode';\n\n// Mock Next.js Image component\nvi.mock('next/image', () => ({\n  __esModule: true,\n  default: ({ src, alt, width, height, onError, ...props }: any) => {\n    return (\n      // eslint-disable-next-line @next/next/no-img-element\n      <img\n        src={src}\n        alt={alt}\n        width={width}\n        height={height}\n        onError={onError}\n        {...props}\n      />\n    );\n  },\n}));\n\ndescribe('QRCode', () => {\n  const mockData = 'https://example.com';\n\n  it('renders QR code image with correct attributes', () => {\n    render(<QRCode data={mockData} />);\n\n    const img = screen.getByRole('img');\n    expect(img).toBeInTheDocument();\n    expect(img).toHaveAttribute('alt', 'QR Code');\n    expect(img).toHaveAttribute('width', '120');\n    expect(img).toHaveAttribute('height', '120');\n  });\n\n  it('generates correct QR code URL', () => {\n    render(<QRCode data={mockData} size={100} />);\n\n    const img = screen.getByRole('img');\n    const expectedUrl = `https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(mockData)}`;\n    expect(img).toHaveAttribute('src', expectedUrl);\n  });\n\n  it('uses custom size when provided', () => {\n    render(<QRCode data={mockData} size={200} />);\n\n    const img = screen.getByRole('img');\n    expect(img).toHaveAttribute('width', '200');\n    expect(img).toHaveAttribute('height', '200');\n  });\n\n  it('uses custom label when provided', () => {\n    const customLabel = 'Custom QR Label';\n    render(<QRCode data={mockData} label={customLabel} />);\n\n    const img = screen.getByRole('img');\n    expect(img).toHaveAttribute('alt', customLabel);\n  });\n\n  it('applies custom className', () => {\n    const customClass = 'custom-qr-class';\n    render(<QRCode data={mockData} className={customClass} />);\n\n    const img = screen.getByRole('img');\n    expect(img).toHaveClass(customClass);\n  });\n\n  it('shows error state when image fails to load', () => {\n    render(<QRCode data={mockData} label='Test QR' />);\n\n    const img = screen.getByRole('img');\n\n    // Simulate image load error using Testing Library helper\n    fireEvent.error(img);\n\n    // Should show error fallback\n    const errorElement = screen.getByRole('img', {\n      name: 'Test QR unavailable',\n    });\n    expect(errorElement).toBeInTheDocument();\n    expect(errorElement).toHaveTextContent('QR code unavailable');\n  });\n\n  it('properly encodes special characters in data', () => {\n    const specialData = 'https://example.com?param=test&other=value';\n    render(<QRCode data={specialData} />);\n\n    const img = screen.getByRole('img');\n    const expectedUrl = `https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=${encodeURIComponent(specialData)}`;\n    expect(img).toHaveAttribute('src', expectedUrl);\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "tests/unit/components/atoms/Avatar/Avatar.test.tsx"
        },
        "span": [440, 593],
        "sourceCode": "import { fireEvent, render, screen } from '@testing-library/react';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\nimport { Avatar } from '@/components/atoms/Avatar';\n\n// Mock Next.js Image component with proper event handling\nvi.mock('next/image', () => ({\n  default: vi\n    .fn()\n    .mockImplementation(({ src, alt, onLoad, onError, ...props }: any) => (\n      // eslint-disable-next-line @next/next/no-img-element\n      <img\n        src={src}\n        alt={alt}\n        onLoad={onLoad}\n        onError={onError}\n        {...props}\n        data-testid='avatar-image'\n      />\n    )),\n}));\n\ndescribe('Avatar Component', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n  });\n\n  describe('Display with Image', () => {\n    it('renders with image source', () => {\n      render(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n        />\n      );\n\n      const image = screen.getByTestId('avatar-image');\n      expect(image).toBeInTheDocument();\n      expect(image).toHaveAttribute('src', 'https://example.com/avatar.jpg');\n      expect(image).toHaveAttribute('alt', '');\n    });\n\n    it('applies correct ARIA attributes', () => {\n      render(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n        />\n      );\n\n      const container = screen.getByLabelText('User avatar');\n      expect(container).toHaveAttribute('aria-label', 'User avatar');\n    });\n\n    it('applies correct size classes', () => {\n      const { rerender } = render(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          size='sm'\n        />\n      );\n\n      let container = screen.getByLabelText('User avatar');\n      expect(container).toHaveClass('size-8');\n\n      rerender(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          size='lg'\n        />\n      );\n\n      container = screen.getByLabelText('User avatar');\n      expect(container).toHaveClass('size-16');\n    });\n\n    it('applies correct rounded classes', () => {\n      const { rerender } = render(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          rounded='sm'\n        />\n      );\n\n      let container = screen.getByLabelText('User avatar');\n      expect(container).toHaveClass('rounded-sm');\n\n      rerender(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          rounded='full'\n        />\n      );\n\n      container = screen.getByLabelText('User avatar');\n      expect(container).toHaveClass('rounded-full');\n    });\n  });\n\n  describe('Fallback States', () => {\n    it('shows initials when no image source provided', () => {\n      render(<Avatar src={null} alt='User avatar' name='John Doe' />);\n\n      expect(screen.getByText('JD')).toBeInTheDocument();\n      expect(screen.queryByTestId('avatar-image')).not.toBeInTheDocument();\n    });\n\n    it('shows initials when empty string provided', () => {\n      render(<Avatar src='' alt='User avatar' name='Jane Smith' />);\n\n      expect(screen.getByText('JS')).toBeInTheDocument();\n    });\n\n    it('generates correct initials for different name formats', () => {\n      const testCases = [\n        { name: 'John Doe', expected: 'JD' },\n        { name: 'Jane', expected: 'J' },\n        { name: 'Mary Jane Watson', expected: 'MJ' },\n        { name: 'jean-claude van damme', expected: 'JV' },\n        { name: '', expected: '?' },\n        { name: undefined, expected: '?' },\n      ];\n\n      testCases.forEach(({ name, expected }) => {\n        const { unmount } = render(\n          <Avatar\n            src={null}\n            alt='User avatar'\n            name={name}\n            data-testid={`avatar-${expected}`}\n          />\n        );\n\n        expect(screen.getByText(expected)).toBeInTheDocument();\n        unmount();\n      });\n    });\n\n    it('handles error state by showing fallback', () => {\n      render(\n        <Avatar\n          src='https://broken-url.com/image.jpg'\n          alt='User avatar'\n          name='Error User'\n        />\n      );\n\n      // Simulate image error using fireEvent\n      const image = screen.getByTestId('avatar-image');\n      fireEvent.error(image);\n\n      // Should show fallback initials after error\n      expect(screen.getByText('EU')).toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has correct role attribute', () => {\n      render(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n        />\n      );\n\n      const container = screen.getByLabelText('User avatar');\n      expect(container).toHaveAttribute('role', 'img');\n    });\n\n    it('has correct aria-label', () => {\n      render(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='Profile picture of John Doe'\n          name='John Doe'\n        />\n      );\n\n      const container = screen.getByLabelText('Profile picture of John Doe');\n      expect(container).toHaveAttribute(\n        'aria-label',\n        'Profile picture of John Doe'\n      );\n    });\n\n    it('fallback initials are not selectable', () => {\n      render(<Avatar src={null} alt='User avatar' name='John Doe' />);\n\n      const initialsElement = screen.getByText('JD');\n      expect(initialsElement).toHaveClass('select-none');\n    });\n  });\n\n  describe('Custom Props', () => {\n    it('accepts custom className', () => {\n      render(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          className='custom-avatar-class'\n        />\n      );\n\n      const container = screen.getByLabelText('User avatar');\n      expect(container).toHaveClass('custom-avatar-class');\n    });\n\n    it('accepts custom style props', () => {\n      const customStyle = { border: '2px solid red', opacity: '0.5' };\n\n      render(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          style={customStyle}\n        />\n      );\n\n      const container = screen.getByLabelText('User avatar');\n      // Check that style attribute exists and contains our custom styles\n      expect(container).toHaveAttribute('style');\n      const style = container.getAttribute('style');\n      expect(style).toContain('border');\n      expect(style).toContain('opacity');\n    });\n\n    it('applies priority prop to Next.js Image', () => {\n      render(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          priority={true}\n        />\n      );\n\n      const image = screen.getByTestId('avatar-image');\n      // Note: The priority prop is passed to the mock but not visible as an attribute\n      expect(image).toBeInTheDocument();\n    });\n  });\n\n  describe('Loading States', () => {\n    it('shows loading shimmer before image loads', () => {\n      render(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n        />\n      );\n\n      // Before onLoad is triggered, shimmer should be visible\n      const shimmer = document.querySelector('.skeleton');\n      expect(shimmer).toBeInTheDocument();\n    });\n\n    it('hides loading shimmer after image loads', () => {\n      render(\n        <Avatar\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n        />\n      );\n\n      // Simulate image load using fireEvent\n      const image = screen.getByTestId('avatar-image');\n      fireEvent.load(image);\n\n      // After load, image should have opacity-100 class\n      expect(image).toHaveClass('opacity-100');\n\n      const container = screen.getByLabelText('User avatar');\n      expect(container).toHaveAttribute('aria-busy', 'false');\n    });\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/noNoninteractiveElementInteractions",
      "severity": "warning",
      "description": "Non-interactive element should not have event handler.",
      "message": [
        {
          "elements": [],
          "content": "Non-interactive element should not have event handler."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Consider replace semantically interactive element like "
                },
                { "elements": ["Emphasis"], "content": "<button/>" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "<a href/>" },
                { "elements": [], "content": "." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": {
          "file": "tests/unit/components/molecules/AvatarUploadable.test.tsx"
        },
        "span": [679, 846],
        "sourceCode": "import { act, fireEvent, render, screen } from '@testing-library/react';\nimport { afterAll, beforeEach, describe, expect, it, vi } from 'vitest';\nimport { AvatarUploadable } from '@/components/organisms/AvatarUploadable';\nimport { track } from '@/lib/analytics';\n\nvi.useFakeTimers();\n\n// Mock analytics tracking\nvi.mock('@/lib/analytics', () => ({\n  track: vi.fn(),\n}));\n\n// Mock Next.js Image component (already mocked in setup.ts but explicit here for clarity)\nvi.mock('next/image', () => ({\n  default: vi\n    .fn()\n    .mockImplementation(({ src, alt, onLoad, onError, ...props }: any) => {\n      return (\n        // eslint-disable-next-line @next/next/no-img-element\n        <img\n          src={src}\n          alt={alt}\n          onLoad={onLoad}\n          onError={onError}\n          {...props}\n          data-testid='avatar-image'\n        />\n      );\n    }),\n}));\n\n// Mock file for testing\nconst createMockFile = (\n  name = 'test.jpg',\n  type = 'image/jpeg',\n  size = 1024\n): File => {\n  const file = new File(['test content'], name, { type });\n  Object.defineProperty(file, 'size', { value: size });\n  return file;\n};\n\ndescribe('AvatarUploadable Component', () => {\n  const mockOnUpload = vi.fn();\n  const mockOnSuccess = vi.fn();\n  const mockOnError = vi.fn();\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n    // jsdom lacks createObjectURL; mock for preview logic\n    // @ts-expect-error partial URL mock\n    global.URL = {\n      createObjectURL: vi.fn(() => 'blob:preview'),\n      revokeObjectURL: vi.fn(),\n    };\n  });\n\n  afterAll(() => {\n    vi.useRealTimers();\n  });\n\n  describe('Display Mode (Non-uploadable)', () => {\n    it('renders as regular avatar when uploadable is false', () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={false}\n        />\n      );\n\n      const container = screen.getByRole('img');\n      expect(container).toBeInTheDocument();\n      expect(container).not.toHaveAttribute('tabIndex');\n      expect(container).not.toHaveAttribute('role', 'button');\n    });\n\n    it('does not show hover overlay when not uploadable', () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={false}\n        />\n      );\n\n      expect(\n        screen.queryByTestId('avatar-uploadable-hover-overlay')\n      ).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Upload Mode', () => {\n    it('renders with upload functionality when uploadable is true', () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const container = screen.getByRole('button');\n      expect(container).toBeInTheDocument();\n      expect(container).toHaveAttribute('aria-label', 'Upload profile photo');\n      expect(container).toHaveAttribute('tabIndex', '0');\n    });\n\n    it('shows file input for upload', () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      expect(fileInput).toBeInTheDocument();\n      expect(fileInput).toHaveAttribute('type', 'file');\n      expect(fileInput).toHaveClass('sr-only');\n    });\n  });\n\n  describe('File Upload Interactions', () => {\n    it('triggers file input click when avatar is clicked', () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const container = screen.getByRole('button');\n      fireEvent.click(container);\n\n      // File input should have been triggered (can't test actual file dialog opening)\n      expect(container).toBeInTheDocument();\n    });\n\n    it('handles keyboard interaction (Enter and Space)', () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const container = screen.getByRole('button');\n\n      // Test Enter key\n      container.focus();\n      fireEvent.keyDown(container, { key: 'Enter' });\n\n      // Test Space key\n      fireEvent.keyDown(container, { key: ' ' });\n\n      expect(container).toBeInTheDocument();\n    });\n\n    it('calls onUpload when file is selected', async () => {\n      mockOnUpload.mockResolvedValue('https://example.com/new-avatar.jpg');\n\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n          onSuccess={mockOnSuccess}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      const file = createMockFile('avatar.jpg', 'image/jpeg', 2048);\n\n      fireEvent.change(fileInput, { target: { files: [file] } });\n\n      await Promise.resolve();\n      expect(mockOnUpload).toHaveBeenCalledWith(file);\n    });\n  });\n\n  describe('File Validation', () => {\n    it('validates file type and shows error for invalid types', async () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n          onError={mockOnError}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      const invalidFile = createMockFile(\n        'document.pdf',\n        'application/pdf',\n        1024\n      );\n\n      fireEvent.change(fileInput, { target: { files: [invalidFile] } });\n\n      await Promise.resolve();\n      expect(mockOnError).toHaveBeenCalledWith(\n        expect.stringContaining('Invalid file type')\n      );\n    });\n\n    it('validates file size and shows error for large files', async () => {\n      const maxSize = 5 * 1024 * 1024; // 5MB\n\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n          onError={mockOnError}\n          maxFileSize={maxSize}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      const largeFile = createMockFile(\n        'large.jpg',\n        'image/jpeg',\n        6 * 1024 * 1024\n      ); // 6MB\n\n      fireEvent.change(fileInput, { target: { files: [largeFile] } });\n\n      await Promise.resolve();\n      expect(mockOnError).toHaveBeenCalledWith(\n        expect.stringContaining('File too large')\n      );\n    });\n\n    it('accepts valid file types', async () => {\n      mockOnUpload.mockResolvedValue('https://example.com/new-avatar.jpg');\n\n      const validTypes = ['image/jpeg', 'image/png', 'image/webp'];\n\n      for (const type of validTypes) {\n        const { unmount } = render(\n          <AvatarUploadable\n            src='https://example.com/avatar.jpg'\n            alt='User avatar'\n            name='John Doe'\n            uploadable={true}\n            onUpload={mockOnUpload}\n            onError={mockOnError}\n          />\n        );\n\n        const fileInput = screen.getByLabelText('Choose profile photo file');\n        const validFile = createMockFile(\n          `test.${type.split('/')[1]}`,\n          type,\n          1024\n        );\n\n        fireEvent.change(fileInput, { target: { files: [validFile] } });\n\n        await Promise.resolve();\n        expect(mockOnUpload).toHaveBeenCalledWith(validFile);\n\n        unmount();\n        vi.clearAllMocks();\n      }\n    });\n\n    it('accepts HEIC by default to match API support', async () => {\n      mockOnUpload.mockResolvedValue('https://example.com/new-avatar.jpg');\n\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n          onError={mockOnError}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      const heicFile = createMockFile('photo.heic', 'image/heic', 2048);\n\n      fireEvent.change(fileInput, { target: { files: [heicFile] } });\n\n      await Promise.resolve();\n      expect(mockOnUpload).toHaveBeenCalledWith(heicFile);\n      expect(mockOnError).not.toHaveBeenCalled();\n    });\n\n    it('can be configured to reject HEIC when disabled upstream', async () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n          onError={mockOnError}\n          acceptedTypes={['image/jpeg', 'image/png', 'image/webp']}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      const heicFile = createMockFile('photo.heic', 'image/heic', 2048);\n\n      fireEvent.change(fileInput, { target: { files: [heicFile] } });\n\n      await Promise.resolve();\n      expect(mockOnError).toHaveBeenCalledWith(\n        expect.stringContaining('Invalid file type')\n      );\n      expect(mockOnUpload).not.toHaveBeenCalled();\n    });\n\n    it('enforces 25MB default max file size', async () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n          onError={mockOnError}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      const largeFile = createMockFile(\n        'large.jpg',\n        'image/jpeg',\n        30 * 1024 * 1024\n      );\n\n      fireEvent.change(fileInput, { target: { files: [largeFile] } });\n\n      await Promise.resolve();\n      expect(mockOnError).toHaveBeenCalledWith(\n        expect.stringContaining('File too large')\n      );\n      expect(mockOnUpload).not.toHaveBeenCalled();\n    });\n  });\n\n  describe('Drag and Drop', () => {\n    it('handles drag enter and shows drag overlay', async () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const container = screen.getByRole('button');\n\n      fireEvent.dragEnter(container, {\n        dataTransfer: {\n          files: [createMockFile()],\n        },\n      });\n\n      await Promise.resolve();\n      expect(\n        screen.getByTestId('avatar-uploadable-drag-overlay')\n      ).toBeInTheDocument();\n    });\n\n    it('handles file drop and triggers upload', async () => {\n      mockOnUpload.mockResolvedValue('https://example.com/new-avatar.jpg');\n\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const container = screen.getByRole('button');\n      const file = createMockFile('dropped.jpg', 'image/jpeg', 1024);\n\n      fireEvent.drop(container, {\n        dataTransfer: {\n          files: [file],\n        },\n      });\n\n      await Promise.resolve();\n      expect(mockOnUpload).toHaveBeenCalledWith(file);\n    });\n\n    it('prevents default drag behavior', () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const container = screen.getByRole('button');\n\n      const dragOverEvent = new Event('dragover', {\n        bubbles: true,\n        cancelable: true,\n      });\n      fireEvent(container, dragOverEvent);\n      expect(dragOverEvent.defaultPrevented).toBe(true);\n\n      const dropEvent = new Event('drop', { bubbles: true, cancelable: true });\n      Object.defineProperty(dropEvent, 'dataTransfer', {\n        value: { files: [createMockFile()] },\n        configurable: true,\n      });\n      fireEvent(container, dropEvent);\n      expect(dropEvent.defaultPrevented).toBe(true);\n    });\n  });\n\n  describe('Progress States', () => {\n    it('shows progress ring during upload', async () => {\n      mockOnUpload.mockResolvedValue('https://example.com/new-avatar.jpg');\n\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      fireEvent.change(fileInput, { target: { files: [createMockFile()] } });\n\n      await Promise.resolve();\n      expect(\n        screen.getByTestId('avatar-uploadable-progress')\n      ).toBeInTheDocument();\n    });\n\n    it('announces progress to screen readers', () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n          progress={75}\n        />\n      );\n\n      // Should have aria-live region for progress\n      const liveRegion = document.querySelector('[aria-live=\"polite\"]');\n      expect(liveRegion).toBeInTheDocument();\n    });\n\n    it('shows success state with check icon', async () => {\n      mockOnUpload.mockResolvedValue('https://example.com/new-avatar.jpg');\n\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n          onSuccess={mockOnSuccess}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      const file = createMockFile();\n\n      fireEvent.change(fileInput, { target: { files: [file] } });\n\n      await Promise.resolve();\n      vi.runAllTimers();\n      expect(mockOnSuccess).toHaveBeenCalled();\n    });\n\n    it('shows error state when upload fails', async () => {\n      mockOnUpload.mockRejectedValue(new Error('Upload failed'));\n\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n          onError={mockOnError}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      const file = createMockFile();\n\n      fireEvent.change(fileInput, { target: { files: [file] } });\n\n      await Promise.resolve();\n      vi.runAllTimers();\n      expect(mockOnError).toHaveBeenCalledWith('Upload failed');\n    });\n  });\n\n  describe('Analytics Tracking', () => {\n    it('tracks upload events', async () => {\n      mockOnUpload.mockResolvedValue('https://example.com/new-avatar.jpg');\n\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      const file = createMockFile('test.jpg', 'image/jpeg', 2048);\n\n      fireEvent.change(fileInput, { target: { files: [file] } });\n\n      await Promise.resolve();\n      expect(track).toHaveBeenCalledWith('avatar_upload_start', {\n        file_size: 2048,\n        file_type: 'image/jpeg',\n      });\n\n      await Promise.resolve();\n      vi.runAllTimers();\n      expect(track).toHaveBeenCalledWith('avatar_upload_success', {\n        file_size: 2048,\n      });\n    });\n\n    it.skip('tracks validation errors', async () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n          onError={mockOnError}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      const invalidFile = createMockFile(\n        'document.pdf',\n        'application/pdf',\n        1024\n      );\n\n      fireEvent.change(fileInput, { target: { files: [invalidFile] } });\n\n      await Promise.resolve();\n      vi.runAllTimers();\n      expect(track).toHaveBeenCalledWith(\n        'avatar_upload_error',\n        expect.objectContaining({\n          error: 'validation_failed',\n          message: expect.stringContaining('Invalid file type'),\n        })\n      );\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has proper ARIA labels and roles', () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveAttribute('aria-label', 'Upload profile photo');\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      expect(fileInput).toHaveAttribute(\n        'aria-label',\n        'Choose profile photo file'\n      );\n    });\n\n    it('announces status changes to screen readers', async () => {\n      // Use immediately resolving mock for simpler async handling\n      mockOnUpload.mockResolvedValue('https://example.com/new-avatar.jpg');\n\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const fileInput = screen.getByLabelText('Choose profile photo file');\n      const file = createMockFile();\n\n      // Trigger file selection\n      fireEvent.change(fileInput, { target: { files: [file] } });\n\n      // Flush microtasks to let the promise resolve\n      await act(async () => {\n        await Promise.resolve();\n      });\n\n      // Advance timers to process any setTimeout calls\n      await act(async () => {\n        vi.advanceTimersByTime(100);\n      });\n\n      // Now check for the success announcement\n      const successAnnouncement = screen.getByText(\n        'Profile photo uploaded successfully'\n      );\n      expect(successAnnouncement).toBeInTheDocument();\n      expect(successAnnouncement).toHaveAttribute('aria-live', 'polite');\n    });\n\n    it('has keyboard focus management', () => {\n      render(\n        <AvatarUploadable\n          src='https://example.com/avatar.jpg'\n          alt='User avatar'\n          name='John Doe'\n          uploadable={true}\n          onUpload={mockOnUpload}\n        />\n      );\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveAttribute('tabIndex', '0');\n    });\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useAltText",
      "severity": "warning",
      "description": "Provide a text alternative through the alt, aria-label or aria-labelledby attribute",
      "message": [
        {
          "elements": [],
          "content": "Provide a text alternative through the "
        },
        { "elements": ["Emphasis"], "content": "alt" },
        { "elements": [], "content": ", " },
        { "elements": ["Emphasis"], "content": "aria-label" },
        { "elements": [], "content": " or " },
        { "elements": ["Emphasis"], "content": "aria-labelledby" },
        { "elements": [], "content": " attribute" }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Meaningful alternative text on elements helps users relying on screen readers to understand content's purpose within a page."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "If the content is decorative, redundant, or obscured, consider hiding it from assistive technologies with the "
                },
                { "elements": ["Emphasis"], "content": "aria-hidden" },
                { "elements": [], "content": " attribute." }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/tipping/EmptyStates.test.tsx" },
        "span": [375, 393],
        "sourceCode": "import { render, screen } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport {\n  TippingEmptyState,\n  TippingMetricsSkeleton,\n} from '@/components/tipping/EmptyStates';\n\n// Mock next/image\nvi.mock('next/image', () => ({\n  default: (props: any) => {\n    // eslint-disable-next-line @next/next/no-img-element, jsx-a11y/alt-text\n    return <img {...props} />;\n  },\n}));\n\ndescribe('TippingEmptyState', () => {\n  it('renders no-venmo empty state correctly', () => {\n    render(<TippingEmptyState type='no-venmo' animate={false} />);\n\n    expect(screen.getByText('No Venmo Account Connected')).toBeInTheDocument();\n    expect(\n      screen.getByText(\n        'Connect your Venmo account to start receiving tips from your fans.'\n      )\n    ).toBeInTheDocument();\n    expect(\n      screen.getByAltText('Illustration of a disconnected Venmo account')\n    ).toBeInTheDocument();\n  });\n\n  it('renders pending-metrics empty state correctly', () => {\n    render(<TippingEmptyState type='pending-metrics' animate={false} />);\n\n    expect(screen.getByText('Tipping Metrics Coming Soon')).toBeInTheDocument();\n    expect(\n      screen.getByText(\n        'Your tipping metrics will appear here once you receive your first tip.'\n      )\n    ).toBeInTheDocument();\n    expect(\n      screen.getByAltText('Illustration of pending tipping metrics')\n    ).toBeInTheDocument();\n  });\n\n  it('applies custom className', () => {\n    const { container } = render(\n      <TippingEmptyState\n        type='no-venmo'\n        animate={false}\n        className='custom-class'\n      />\n    );\n\n    expect(container.firstChild).toHaveClass('custom-class');\n  });\n});\n\ndescribe('TippingMetricsSkeleton', () => {\n  it('renders skeleton with default rows', () => {\n    const { container } = render(<TippingMetricsSkeleton />);\n\n    // Check that we have the expected number of skeleton rows (default is 3)\n    const rows = container.querySelectorAll('.grid.grid-cols-3.gap-4.py-2');\n    expect(rows.length).toBe(3);\n  });\n\n  it('renders skeleton with custom rows', () => {\n    const { container } = render(<TippingMetricsSkeleton rows={5} />);\n\n    // Check that we have the expected number of skeleton rows\n    const rows = container.querySelectorAll('.grid.grid-cols-3.gap-4.py-2');\n    expect(rows.length).toBe(5);\n  });\n\n  it('applies custom className', () => {\n    const { container } = render(\n      <TippingMetricsSkeleton className='custom-class' />\n    );\n\n    expect(container.firstChild).toHaveClass('custom-class');\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/tooltip.test.tsx" },
        "span": [8680, 8688],
        "sourceCode": "import {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui/atoms/tooltip';\nimport { act, fireEvent, render, screen } from '@testing-library/react';\nimport {\n  afterAll,\n  afterEach,\n  beforeAll,\n  beforeEach,\n  describe,\n  expect,\n  it,\n  vi,\n} from 'vitest';\n\n// Configure fake timers\nvi.useFakeTimers();\n\n// Fast timer flush - advance by small amount to trigger immediate timers\nconst flushTimers = () => {\n  act(() => {\n    vi.advanceTimersByTime(10);\n  });\n};\n\n// Mock reduced motion\nconst mockMatchMedia = vi.fn();\nbeforeAll(() => {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: mockMatchMedia,\n  });\n});\n\n// Test wrapper component with provider\nconst TooltipWrapper = ({\n  children,\n  delayDuration = 0, // Faster for tests\n  skipDelayDuration = 0,\n}: {\n  children: React.ReactNode;\n  delayDuration?: number;\n  skipDelayDuration?: number;\n}) => (\n  <TooltipProvider\n    delayDuration={delayDuration}\n    skipDelayDuration={skipDelayDuration}\n  >\n    {children}\n  </TooltipProvider>\n);\n\nconst BasicTooltip = ({\n  showArrow = true,\n  content = 'Test tooltip content',\n  triggerText = 'Trigger',\n  defaultOpen = false,\n}: {\n  showArrow?: boolean;\n  content?: string;\n  triggerText?: string;\n  defaultOpen?: boolean;\n}) => (\n  <TooltipWrapper>\n    <Tooltip defaultOpen={defaultOpen}>\n      <TooltipTrigger>\n        <button>{triggerText}</button>\n      </TooltipTrigger>\n      <TooltipContent showArrow={showArrow}>{content}</TooltipContent>\n    </Tooltip>\n  </TooltipWrapper>\n);\n\ndescribe('Tooltip', () => {\n  beforeEach(() => {\n    mockMatchMedia.mockReturnValue({\n      matches: false,\n      addListener: vi.fn(),\n      removeListener: vi.fn(),\n      addEventListener: vi.fn(),\n      removeEventListener: vi.fn(),\n      dispatchEvent: vi.fn(),\n    });\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  afterAll(() => {\n    vi.useRealTimers();\n  });\n\n  describe('Rendering', () => {\n    it('renders trigger without tooltip initially', () => {\n      render(<BasicTooltip />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      expect(trigger).toBeInTheDocument();\n\n      // Tooltip content should not be visible initially\n      expect(\n        screen.queryByText('Test tooltip content')\n      ).not.toBeInTheDocument();\n    });\n\n    it('renders with custom trigger text and content', () => {\n      render(\n        <BasicTooltip\n          triggerText='Custom trigger'\n          content='Custom tooltip content'\n        />\n      );\n\n      const trigger = screen.getByRole('button', { name: 'Custom trigger' });\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  describe('Hover Interactions', () => {\n    it('shows tooltip on hover', () => {\n      // Use defaultOpen to test tooltip content rendering since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips.length).toBeGreaterThan(0);\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on unhover', () => {\n      render(<BasicTooltip />);\n\n      const triggerElement = screen.getByRole('button', { name: 'Trigger' });\n\n      // Show tooltip\n      fireEvent.mouseEnter(triggerElement);\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip\n      fireEvent.mouseLeave(triggerElement);\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      expect(openTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Keyboard Interactions', () => {\n    it('shows tooltip on focus', () => {\n      // Use defaultOpen to test tooltip visibility since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n      trigger.focus();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on blur', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip>\n            <TooltipTrigger>\n              <button>First button</button>\n            </TooltipTrigger>\n            <TooltipContent>First tooltip</TooltipContent>\n          </Tooltip>\n          <button>Second button</button>\n        </TooltipWrapper>\n      );\n\n      const firstButton = screen.getByRole('button', { name: 'First button' });\n      const secondButton = screen.getByRole('button', {\n        name: 'Second button',\n      });\n\n      // Hover first button to show tooltip\n      fireEvent.mouseEnter(firstButton);\n      flushTimers();\n      const tooltips = screen.getAllByText('First tooltip');\n      expect(tooltips[0]).toBeVisible();\n\n      // Move focus to second button to hide tooltip\n      fireEvent.click(secondButton);\n      flushTimers();\n      const hidden = screen.queryAllByText('First tooltip');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After blur, there should be no tooltip content in delayed-open state\n      expect(openTooltip).toBeUndefined();\n    });\n\n    it('hides tooltip on Escape key', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip with Escape\n      act(() => {\n        fireEvent.keyDown(document, { key: 'Escape' });\n        vi.advanceTimersByTime(10);\n      });\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const visibleTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After Escape, there should be no visible tooltip content\n      expect(visibleTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Arrow Display', () => {\n    it('shows arrow by default', () => {\n      render(<BasicTooltip showArrow={true} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Check that arrow is rendered (Radix adds it as SVG)\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).toBeInTheDocument();\n    });\n\n    it('hides arrow when showArrow is false', () => {\n      render(<BasicTooltip showArrow={false} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Arrow should not be rendered\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has correct ARIA relationships', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const triggerId = trigger.getAttribute('aria-describedby');\n      const tooltipId = tooltip.getAttribute('id');\n      expect(triggerId).toBe(tooltipId);\n    });\n\n    it('has proper role attributes', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      expect(tooltip).toHaveAttribute('role', 'tooltip');\n    });\n\n    it('works with disabled elements via wrapper', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <span>\n                <button disabled>Disabled button</button>\n              </span>\n            </TooltipTrigger>\n            <TooltipContent>This action is unavailable</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const wrapper = screen.getByRole('button', {\n        name: 'Disabled button',\n      }).parentElement;\n      expect(wrapper).toBeInTheDocument();\n\n      const tooltips = screen.getAllByText('This action is unavailable');\n      expect(tooltips[0]).toBeVisible();\n    });\n  });\n\n  describe('Positioning', () => {\n    it('supports different side positions', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent side='top'>Top tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const [tooltipText] = screen.getAllByText('Top tooltip');\n      const tooltipContent = tooltipText.closest('[data-state]');\n      expect(tooltipContent).toHaveAttribute('data-side', 'top');\n    });\n\n    it('supports custom sideOffset', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent sideOffset={16}>\n              Custom offset tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n      const rendered = screen.getAllByText('Custom offset tooltip');\n      expect(rendered.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Provider Configuration', () => {\n    it('respects custom delay durations', () => {\n      // Test that provider configuration is applied by checking tooltip renders with defaultOpen\n      render(\n        <TooltipWrapper delayDuration={100}>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Delayed trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>Delayed tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Delayed tooltip');\n      expect(tooltips.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Reduced Motion', () => {\n    it('includes motion-reduce classes for accessibility', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const tooltipContent =\n        tooltip.closest('[data-state]') ?? tooltip.parentElement;\n      // When using defaultOpen, state is 'instant-open' or 'open'\n      expect(tooltipContent).toHaveAttribute('data-state');\n    });\n  });\n\n  describe('Complex Content', () => {\n    it('renders complex React node content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Complex trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>\n              <div>\n                <strong>Complex content title</strong>\n                <p>With multiple elements</p>\n              </div>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const titleElements = screen.getAllByText('Complex content title');\n      expect(titleElements.length).toBeGreaterThan(0);\n      const bodyElements = screen.getAllByText('With multiple elements');\n      expect(bodyElements.length).toBeGreaterThan(0);\n    });\n\n    it('applies custom className to content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Custom class trigger</button>\n            </TooltipTrigger>\n            <TooltipContent className='custom-tooltip-class'>\n              Custom styled tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltipElements = screen.getAllByText('Custom styled tooltip');\n      const hasCustomClass = tooltipElements.some(element =>\n        element\n          .closest('[data-state]')\n          ?.classList.contains('custom-tooltip-class')\n      );\n      expect(hasCustomClass).toBe(true);\n    });\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/tooltip.test.tsx" },
        "span": [9253, 9261],
        "sourceCode": "import {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui/atoms/tooltip';\nimport { act, fireEvent, render, screen } from '@testing-library/react';\nimport {\n  afterAll,\n  afterEach,\n  beforeAll,\n  beforeEach,\n  describe,\n  expect,\n  it,\n  vi,\n} from 'vitest';\n\n// Configure fake timers\nvi.useFakeTimers();\n\n// Fast timer flush - advance by small amount to trigger immediate timers\nconst flushTimers = () => {\n  act(() => {\n    vi.advanceTimersByTime(10);\n  });\n};\n\n// Mock reduced motion\nconst mockMatchMedia = vi.fn();\nbeforeAll(() => {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: mockMatchMedia,\n  });\n});\n\n// Test wrapper component with provider\nconst TooltipWrapper = ({\n  children,\n  delayDuration = 0, // Faster for tests\n  skipDelayDuration = 0,\n}: {\n  children: React.ReactNode;\n  delayDuration?: number;\n  skipDelayDuration?: number;\n}) => (\n  <TooltipProvider\n    delayDuration={delayDuration}\n    skipDelayDuration={skipDelayDuration}\n  >\n    {children}\n  </TooltipProvider>\n);\n\nconst BasicTooltip = ({\n  showArrow = true,\n  content = 'Test tooltip content',\n  triggerText = 'Trigger',\n  defaultOpen = false,\n}: {\n  showArrow?: boolean;\n  content?: string;\n  triggerText?: string;\n  defaultOpen?: boolean;\n}) => (\n  <TooltipWrapper>\n    <Tooltip defaultOpen={defaultOpen}>\n      <TooltipTrigger>\n        <button>{triggerText}</button>\n      </TooltipTrigger>\n      <TooltipContent showArrow={showArrow}>{content}</TooltipContent>\n    </Tooltip>\n  </TooltipWrapper>\n);\n\ndescribe('Tooltip', () => {\n  beforeEach(() => {\n    mockMatchMedia.mockReturnValue({\n      matches: false,\n      addListener: vi.fn(),\n      removeListener: vi.fn(),\n      addEventListener: vi.fn(),\n      removeEventListener: vi.fn(),\n      dispatchEvent: vi.fn(),\n    });\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  afterAll(() => {\n    vi.useRealTimers();\n  });\n\n  describe('Rendering', () => {\n    it('renders trigger without tooltip initially', () => {\n      render(<BasicTooltip />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      expect(trigger).toBeInTheDocument();\n\n      // Tooltip content should not be visible initially\n      expect(\n        screen.queryByText('Test tooltip content')\n      ).not.toBeInTheDocument();\n    });\n\n    it('renders with custom trigger text and content', () => {\n      render(\n        <BasicTooltip\n          triggerText='Custom trigger'\n          content='Custom tooltip content'\n        />\n      );\n\n      const trigger = screen.getByRole('button', { name: 'Custom trigger' });\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  describe('Hover Interactions', () => {\n    it('shows tooltip on hover', () => {\n      // Use defaultOpen to test tooltip content rendering since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips.length).toBeGreaterThan(0);\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on unhover', () => {\n      render(<BasicTooltip />);\n\n      const triggerElement = screen.getByRole('button', { name: 'Trigger' });\n\n      // Show tooltip\n      fireEvent.mouseEnter(triggerElement);\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip\n      fireEvent.mouseLeave(triggerElement);\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      expect(openTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Keyboard Interactions', () => {\n    it('shows tooltip on focus', () => {\n      // Use defaultOpen to test tooltip visibility since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n      trigger.focus();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on blur', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip>\n            <TooltipTrigger>\n              <button>First button</button>\n            </TooltipTrigger>\n            <TooltipContent>First tooltip</TooltipContent>\n          </Tooltip>\n          <button>Second button</button>\n        </TooltipWrapper>\n      );\n\n      const firstButton = screen.getByRole('button', { name: 'First button' });\n      const secondButton = screen.getByRole('button', {\n        name: 'Second button',\n      });\n\n      // Hover first button to show tooltip\n      fireEvent.mouseEnter(firstButton);\n      flushTimers();\n      const tooltips = screen.getAllByText('First tooltip');\n      expect(tooltips[0]).toBeVisible();\n\n      // Move focus to second button to hide tooltip\n      fireEvent.click(secondButton);\n      flushTimers();\n      const hidden = screen.queryAllByText('First tooltip');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After blur, there should be no tooltip content in delayed-open state\n      expect(openTooltip).toBeUndefined();\n    });\n\n    it('hides tooltip on Escape key', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip with Escape\n      act(() => {\n        fireEvent.keyDown(document, { key: 'Escape' });\n        vi.advanceTimersByTime(10);\n      });\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const visibleTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After Escape, there should be no visible tooltip content\n      expect(visibleTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Arrow Display', () => {\n    it('shows arrow by default', () => {\n      render(<BasicTooltip showArrow={true} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Check that arrow is rendered (Radix adds it as SVG)\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).toBeInTheDocument();\n    });\n\n    it('hides arrow when showArrow is false', () => {\n      render(<BasicTooltip showArrow={false} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Arrow should not be rendered\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has correct ARIA relationships', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const triggerId = trigger.getAttribute('aria-describedby');\n      const tooltipId = tooltip.getAttribute('id');\n      expect(triggerId).toBe(tooltipId);\n    });\n\n    it('has proper role attributes', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      expect(tooltip).toHaveAttribute('role', 'tooltip');\n    });\n\n    it('works with disabled elements via wrapper', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <span>\n                <button disabled>Disabled button</button>\n              </span>\n            </TooltipTrigger>\n            <TooltipContent>This action is unavailable</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const wrapper = screen.getByRole('button', {\n        name: 'Disabled button',\n      }).parentElement;\n      expect(wrapper).toBeInTheDocument();\n\n      const tooltips = screen.getAllByText('This action is unavailable');\n      expect(tooltips[0]).toBeVisible();\n    });\n  });\n\n  describe('Positioning', () => {\n    it('supports different side positions', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent side='top'>Top tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const [tooltipText] = screen.getAllByText('Top tooltip');\n      const tooltipContent = tooltipText.closest('[data-state]');\n      expect(tooltipContent).toHaveAttribute('data-side', 'top');\n    });\n\n    it('supports custom sideOffset', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent sideOffset={16}>\n              Custom offset tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n      const rendered = screen.getAllByText('Custom offset tooltip');\n      expect(rendered.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Provider Configuration', () => {\n    it('respects custom delay durations', () => {\n      // Test that provider configuration is applied by checking tooltip renders with defaultOpen\n      render(\n        <TooltipWrapper delayDuration={100}>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Delayed trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>Delayed tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Delayed tooltip');\n      expect(tooltips.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Reduced Motion', () => {\n    it('includes motion-reduce classes for accessibility', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const tooltipContent =\n        tooltip.closest('[data-state]') ?? tooltip.parentElement;\n      // When using defaultOpen, state is 'instant-open' or 'open'\n      expect(tooltipContent).toHaveAttribute('data-state');\n    });\n  });\n\n  describe('Complex Content', () => {\n    it('renders complex React node content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Complex trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>\n              <div>\n                <strong>Complex content title</strong>\n                <p>With multiple elements</p>\n              </div>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const titleElements = screen.getAllByText('Complex content title');\n      expect(titleElements.length).toBeGreaterThan(0);\n      const bodyElements = screen.getAllByText('With multiple elements');\n      expect(bodyElements.length).toBeGreaterThan(0);\n    });\n\n    it('applies custom className to content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Custom class trigger</button>\n            </TooltipTrigger>\n            <TooltipContent className='custom-tooltip-class'>\n              Custom styled tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltipElements = screen.getAllByText('Custom styled tooltip');\n      const hasCustomClass = tooltipElements.some(element =>\n        element\n          .closest('[data-state]')\n          ?.classList.contains('custom-tooltip-class')\n      );\n      expect(hasCustomClass).toBe(true);\n    });\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/tooltip.test.tsx" },
        "span": [9965, 9973],
        "sourceCode": "import {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui/atoms/tooltip';\nimport { act, fireEvent, render, screen } from '@testing-library/react';\nimport {\n  afterAll,\n  afterEach,\n  beforeAll,\n  beforeEach,\n  describe,\n  expect,\n  it,\n  vi,\n} from 'vitest';\n\n// Configure fake timers\nvi.useFakeTimers();\n\n// Fast timer flush - advance by small amount to trigger immediate timers\nconst flushTimers = () => {\n  act(() => {\n    vi.advanceTimersByTime(10);\n  });\n};\n\n// Mock reduced motion\nconst mockMatchMedia = vi.fn();\nbeforeAll(() => {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: mockMatchMedia,\n  });\n});\n\n// Test wrapper component with provider\nconst TooltipWrapper = ({\n  children,\n  delayDuration = 0, // Faster for tests\n  skipDelayDuration = 0,\n}: {\n  children: React.ReactNode;\n  delayDuration?: number;\n  skipDelayDuration?: number;\n}) => (\n  <TooltipProvider\n    delayDuration={delayDuration}\n    skipDelayDuration={skipDelayDuration}\n  >\n    {children}\n  </TooltipProvider>\n);\n\nconst BasicTooltip = ({\n  showArrow = true,\n  content = 'Test tooltip content',\n  triggerText = 'Trigger',\n  defaultOpen = false,\n}: {\n  showArrow?: boolean;\n  content?: string;\n  triggerText?: string;\n  defaultOpen?: boolean;\n}) => (\n  <TooltipWrapper>\n    <Tooltip defaultOpen={defaultOpen}>\n      <TooltipTrigger>\n        <button>{triggerText}</button>\n      </TooltipTrigger>\n      <TooltipContent showArrow={showArrow}>{content}</TooltipContent>\n    </Tooltip>\n  </TooltipWrapper>\n);\n\ndescribe('Tooltip', () => {\n  beforeEach(() => {\n    mockMatchMedia.mockReturnValue({\n      matches: false,\n      addListener: vi.fn(),\n      removeListener: vi.fn(),\n      addEventListener: vi.fn(),\n      removeEventListener: vi.fn(),\n      dispatchEvent: vi.fn(),\n    });\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  afterAll(() => {\n    vi.useRealTimers();\n  });\n\n  describe('Rendering', () => {\n    it('renders trigger without tooltip initially', () => {\n      render(<BasicTooltip />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      expect(trigger).toBeInTheDocument();\n\n      // Tooltip content should not be visible initially\n      expect(\n        screen.queryByText('Test tooltip content')\n      ).not.toBeInTheDocument();\n    });\n\n    it('renders with custom trigger text and content', () => {\n      render(\n        <BasicTooltip\n          triggerText='Custom trigger'\n          content='Custom tooltip content'\n        />\n      );\n\n      const trigger = screen.getByRole('button', { name: 'Custom trigger' });\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  describe('Hover Interactions', () => {\n    it('shows tooltip on hover', () => {\n      // Use defaultOpen to test tooltip content rendering since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips.length).toBeGreaterThan(0);\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on unhover', () => {\n      render(<BasicTooltip />);\n\n      const triggerElement = screen.getByRole('button', { name: 'Trigger' });\n\n      // Show tooltip\n      fireEvent.mouseEnter(triggerElement);\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip\n      fireEvent.mouseLeave(triggerElement);\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      expect(openTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Keyboard Interactions', () => {\n    it('shows tooltip on focus', () => {\n      // Use defaultOpen to test tooltip visibility since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n      trigger.focus();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on blur', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip>\n            <TooltipTrigger>\n              <button>First button</button>\n            </TooltipTrigger>\n            <TooltipContent>First tooltip</TooltipContent>\n          </Tooltip>\n          <button>Second button</button>\n        </TooltipWrapper>\n      );\n\n      const firstButton = screen.getByRole('button', { name: 'First button' });\n      const secondButton = screen.getByRole('button', {\n        name: 'Second button',\n      });\n\n      // Hover first button to show tooltip\n      fireEvent.mouseEnter(firstButton);\n      flushTimers();\n      const tooltips = screen.getAllByText('First tooltip');\n      expect(tooltips[0]).toBeVisible();\n\n      // Move focus to second button to hide tooltip\n      fireEvent.click(secondButton);\n      flushTimers();\n      const hidden = screen.queryAllByText('First tooltip');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After blur, there should be no tooltip content in delayed-open state\n      expect(openTooltip).toBeUndefined();\n    });\n\n    it('hides tooltip on Escape key', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip with Escape\n      act(() => {\n        fireEvent.keyDown(document, { key: 'Escape' });\n        vi.advanceTimersByTime(10);\n      });\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const visibleTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After Escape, there should be no visible tooltip content\n      expect(visibleTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Arrow Display', () => {\n    it('shows arrow by default', () => {\n      render(<BasicTooltip showArrow={true} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Check that arrow is rendered (Radix adds it as SVG)\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).toBeInTheDocument();\n    });\n\n    it('hides arrow when showArrow is false', () => {\n      render(<BasicTooltip showArrow={false} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Arrow should not be rendered\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has correct ARIA relationships', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const triggerId = trigger.getAttribute('aria-describedby');\n      const tooltipId = tooltip.getAttribute('id');\n      expect(triggerId).toBe(tooltipId);\n    });\n\n    it('has proper role attributes', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      expect(tooltip).toHaveAttribute('role', 'tooltip');\n    });\n\n    it('works with disabled elements via wrapper', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <span>\n                <button disabled>Disabled button</button>\n              </span>\n            </TooltipTrigger>\n            <TooltipContent>This action is unavailable</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const wrapper = screen.getByRole('button', {\n        name: 'Disabled button',\n      }).parentElement;\n      expect(wrapper).toBeInTheDocument();\n\n      const tooltips = screen.getAllByText('This action is unavailable');\n      expect(tooltips[0]).toBeVisible();\n    });\n  });\n\n  describe('Positioning', () => {\n    it('supports different side positions', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent side='top'>Top tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const [tooltipText] = screen.getAllByText('Top tooltip');\n      const tooltipContent = tooltipText.closest('[data-state]');\n      expect(tooltipContent).toHaveAttribute('data-side', 'top');\n    });\n\n    it('supports custom sideOffset', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent sideOffset={16}>\n              Custom offset tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n      const rendered = screen.getAllByText('Custom offset tooltip');\n      expect(rendered.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Provider Configuration', () => {\n    it('respects custom delay durations', () => {\n      // Test that provider configuration is applied by checking tooltip renders with defaultOpen\n      render(\n        <TooltipWrapper delayDuration={100}>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Delayed trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>Delayed tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Delayed tooltip');\n      expect(tooltips.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Reduced Motion', () => {\n    it('includes motion-reduce classes for accessibility', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const tooltipContent =\n        tooltip.closest('[data-state]') ?? tooltip.parentElement;\n      // When using defaultOpen, state is 'instant-open' or 'open'\n      expect(tooltipContent).toHaveAttribute('data-state');\n    });\n  });\n\n  describe('Complex Content', () => {\n    it('renders complex React node content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Complex trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>\n              <div>\n                <strong>Complex content title</strong>\n                <p>With multiple elements</p>\n              </div>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const titleElements = screen.getAllByText('Complex content title');\n      expect(titleElements.length).toBeGreaterThan(0);\n      const bodyElements = screen.getAllByText('With multiple elements');\n      expect(bodyElements.length).toBeGreaterThan(0);\n    });\n\n    it('applies custom className to content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Custom class trigger</button>\n            </TooltipTrigger>\n            <TooltipContent className='custom-tooltip-class'>\n              Custom styled tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltipElements = screen.getAllByText('Custom styled tooltip');\n      const hasCustomClass = tooltipElements.some(element =>\n        element\n          .closest('[data-state]')\n          ?.classList.contains('custom-tooltip-class')\n      );\n      expect(hasCustomClass).toBe(true);\n    });\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/tooltip.test.tsx" },
        "span": [10974, 10982],
        "sourceCode": "import {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui/atoms/tooltip';\nimport { act, fireEvent, render, screen } from '@testing-library/react';\nimport {\n  afterAll,\n  afterEach,\n  beforeAll,\n  beforeEach,\n  describe,\n  expect,\n  it,\n  vi,\n} from 'vitest';\n\n// Configure fake timers\nvi.useFakeTimers();\n\n// Fast timer flush - advance by small amount to trigger immediate timers\nconst flushTimers = () => {\n  act(() => {\n    vi.advanceTimersByTime(10);\n  });\n};\n\n// Mock reduced motion\nconst mockMatchMedia = vi.fn();\nbeforeAll(() => {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: mockMatchMedia,\n  });\n});\n\n// Test wrapper component with provider\nconst TooltipWrapper = ({\n  children,\n  delayDuration = 0, // Faster for tests\n  skipDelayDuration = 0,\n}: {\n  children: React.ReactNode;\n  delayDuration?: number;\n  skipDelayDuration?: number;\n}) => (\n  <TooltipProvider\n    delayDuration={delayDuration}\n    skipDelayDuration={skipDelayDuration}\n  >\n    {children}\n  </TooltipProvider>\n);\n\nconst BasicTooltip = ({\n  showArrow = true,\n  content = 'Test tooltip content',\n  triggerText = 'Trigger',\n  defaultOpen = false,\n}: {\n  showArrow?: boolean;\n  content?: string;\n  triggerText?: string;\n  defaultOpen?: boolean;\n}) => (\n  <TooltipWrapper>\n    <Tooltip defaultOpen={defaultOpen}>\n      <TooltipTrigger>\n        <button>{triggerText}</button>\n      </TooltipTrigger>\n      <TooltipContent showArrow={showArrow}>{content}</TooltipContent>\n    </Tooltip>\n  </TooltipWrapper>\n);\n\ndescribe('Tooltip', () => {\n  beforeEach(() => {\n    mockMatchMedia.mockReturnValue({\n      matches: false,\n      addListener: vi.fn(),\n      removeListener: vi.fn(),\n      addEventListener: vi.fn(),\n      removeEventListener: vi.fn(),\n      dispatchEvent: vi.fn(),\n    });\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  afterAll(() => {\n    vi.useRealTimers();\n  });\n\n  describe('Rendering', () => {\n    it('renders trigger without tooltip initially', () => {\n      render(<BasicTooltip />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      expect(trigger).toBeInTheDocument();\n\n      // Tooltip content should not be visible initially\n      expect(\n        screen.queryByText('Test tooltip content')\n      ).not.toBeInTheDocument();\n    });\n\n    it('renders with custom trigger text and content', () => {\n      render(\n        <BasicTooltip\n          triggerText='Custom trigger'\n          content='Custom tooltip content'\n        />\n      );\n\n      const trigger = screen.getByRole('button', { name: 'Custom trigger' });\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  describe('Hover Interactions', () => {\n    it('shows tooltip on hover', () => {\n      // Use defaultOpen to test tooltip content rendering since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips.length).toBeGreaterThan(0);\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on unhover', () => {\n      render(<BasicTooltip />);\n\n      const triggerElement = screen.getByRole('button', { name: 'Trigger' });\n\n      // Show tooltip\n      fireEvent.mouseEnter(triggerElement);\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip\n      fireEvent.mouseLeave(triggerElement);\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      expect(openTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Keyboard Interactions', () => {\n    it('shows tooltip on focus', () => {\n      // Use defaultOpen to test tooltip visibility since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n      trigger.focus();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on blur', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip>\n            <TooltipTrigger>\n              <button>First button</button>\n            </TooltipTrigger>\n            <TooltipContent>First tooltip</TooltipContent>\n          </Tooltip>\n          <button>Second button</button>\n        </TooltipWrapper>\n      );\n\n      const firstButton = screen.getByRole('button', { name: 'First button' });\n      const secondButton = screen.getByRole('button', {\n        name: 'Second button',\n      });\n\n      // Hover first button to show tooltip\n      fireEvent.mouseEnter(firstButton);\n      flushTimers();\n      const tooltips = screen.getAllByText('First tooltip');\n      expect(tooltips[0]).toBeVisible();\n\n      // Move focus to second button to hide tooltip\n      fireEvent.click(secondButton);\n      flushTimers();\n      const hidden = screen.queryAllByText('First tooltip');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After blur, there should be no tooltip content in delayed-open state\n      expect(openTooltip).toBeUndefined();\n    });\n\n    it('hides tooltip on Escape key', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip with Escape\n      act(() => {\n        fireEvent.keyDown(document, { key: 'Escape' });\n        vi.advanceTimersByTime(10);\n      });\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const visibleTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After Escape, there should be no visible tooltip content\n      expect(visibleTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Arrow Display', () => {\n    it('shows arrow by default', () => {\n      render(<BasicTooltip showArrow={true} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Check that arrow is rendered (Radix adds it as SVG)\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).toBeInTheDocument();\n    });\n\n    it('hides arrow when showArrow is false', () => {\n      render(<BasicTooltip showArrow={false} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Arrow should not be rendered\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has correct ARIA relationships', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const triggerId = trigger.getAttribute('aria-describedby');\n      const tooltipId = tooltip.getAttribute('id');\n      expect(triggerId).toBe(tooltipId);\n    });\n\n    it('has proper role attributes', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      expect(tooltip).toHaveAttribute('role', 'tooltip');\n    });\n\n    it('works with disabled elements via wrapper', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <span>\n                <button disabled>Disabled button</button>\n              </span>\n            </TooltipTrigger>\n            <TooltipContent>This action is unavailable</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const wrapper = screen.getByRole('button', {\n        name: 'Disabled button',\n      }).parentElement;\n      expect(wrapper).toBeInTheDocument();\n\n      const tooltips = screen.getAllByText('This action is unavailable');\n      expect(tooltips[0]).toBeVisible();\n    });\n  });\n\n  describe('Positioning', () => {\n    it('supports different side positions', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent side='top'>Top tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const [tooltipText] = screen.getAllByText('Top tooltip');\n      const tooltipContent = tooltipText.closest('[data-state]');\n      expect(tooltipContent).toHaveAttribute('data-side', 'top');\n    });\n\n    it('supports custom sideOffset', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent sideOffset={16}>\n              Custom offset tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n      const rendered = screen.getAllByText('Custom offset tooltip');\n      expect(rendered.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Provider Configuration', () => {\n    it('respects custom delay durations', () => {\n      // Test that provider configuration is applied by checking tooltip renders with defaultOpen\n      render(\n        <TooltipWrapper delayDuration={100}>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Delayed trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>Delayed tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Delayed tooltip');\n      expect(tooltips.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Reduced Motion', () => {\n    it('includes motion-reduce classes for accessibility', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const tooltipContent =\n        tooltip.closest('[data-state]') ?? tooltip.parentElement;\n      // When using defaultOpen, state is 'instant-open' or 'open'\n      expect(tooltipContent).toHaveAttribute('data-state');\n    });\n  });\n\n  describe('Complex Content', () => {\n    it('renders complex React node content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Complex trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>\n              <div>\n                <strong>Complex content title</strong>\n                <p>With multiple elements</p>\n              </div>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const titleElements = screen.getAllByText('Complex content title');\n      expect(titleElements.length).toBeGreaterThan(0);\n      const bodyElements = screen.getAllByText('With multiple elements');\n      expect(bodyElements.length).toBeGreaterThan(0);\n    });\n\n    it('applies custom className to content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Custom class trigger</button>\n            </TooltipTrigger>\n            <TooltipContent className='custom-tooltip-class'>\n              Custom styled tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltipElements = screen.getAllByText('Custom styled tooltip');\n      const hasCustomClass = tooltipElements.some(element =>\n        element\n          .closest('[data-state]')\n          ?.classList.contains('custom-tooltip-class')\n      );\n      expect(hasCustomClass).toBe(true);\n    });\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/tooltip.test.tsx" },
        "span": [11758, 11766],
        "sourceCode": "import {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui/atoms/tooltip';\nimport { act, fireEvent, render, screen } from '@testing-library/react';\nimport {\n  afterAll,\n  afterEach,\n  beforeAll,\n  beforeEach,\n  describe,\n  expect,\n  it,\n  vi,\n} from 'vitest';\n\n// Configure fake timers\nvi.useFakeTimers();\n\n// Fast timer flush - advance by small amount to trigger immediate timers\nconst flushTimers = () => {\n  act(() => {\n    vi.advanceTimersByTime(10);\n  });\n};\n\n// Mock reduced motion\nconst mockMatchMedia = vi.fn();\nbeforeAll(() => {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: mockMatchMedia,\n  });\n});\n\n// Test wrapper component with provider\nconst TooltipWrapper = ({\n  children,\n  delayDuration = 0, // Faster for tests\n  skipDelayDuration = 0,\n}: {\n  children: React.ReactNode;\n  delayDuration?: number;\n  skipDelayDuration?: number;\n}) => (\n  <TooltipProvider\n    delayDuration={delayDuration}\n    skipDelayDuration={skipDelayDuration}\n  >\n    {children}\n  </TooltipProvider>\n);\n\nconst BasicTooltip = ({\n  showArrow = true,\n  content = 'Test tooltip content',\n  triggerText = 'Trigger',\n  defaultOpen = false,\n}: {\n  showArrow?: boolean;\n  content?: string;\n  triggerText?: string;\n  defaultOpen?: boolean;\n}) => (\n  <TooltipWrapper>\n    <Tooltip defaultOpen={defaultOpen}>\n      <TooltipTrigger>\n        <button>{triggerText}</button>\n      </TooltipTrigger>\n      <TooltipContent showArrow={showArrow}>{content}</TooltipContent>\n    </Tooltip>\n  </TooltipWrapper>\n);\n\ndescribe('Tooltip', () => {\n  beforeEach(() => {\n    mockMatchMedia.mockReturnValue({\n      matches: false,\n      addListener: vi.fn(),\n      removeListener: vi.fn(),\n      addEventListener: vi.fn(),\n      removeEventListener: vi.fn(),\n      dispatchEvent: vi.fn(),\n    });\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  afterAll(() => {\n    vi.useRealTimers();\n  });\n\n  describe('Rendering', () => {\n    it('renders trigger without tooltip initially', () => {\n      render(<BasicTooltip />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      expect(trigger).toBeInTheDocument();\n\n      // Tooltip content should not be visible initially\n      expect(\n        screen.queryByText('Test tooltip content')\n      ).not.toBeInTheDocument();\n    });\n\n    it('renders with custom trigger text and content', () => {\n      render(\n        <BasicTooltip\n          triggerText='Custom trigger'\n          content='Custom tooltip content'\n        />\n      );\n\n      const trigger = screen.getByRole('button', { name: 'Custom trigger' });\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  describe('Hover Interactions', () => {\n    it('shows tooltip on hover', () => {\n      // Use defaultOpen to test tooltip content rendering since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips.length).toBeGreaterThan(0);\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on unhover', () => {\n      render(<BasicTooltip />);\n\n      const triggerElement = screen.getByRole('button', { name: 'Trigger' });\n\n      // Show tooltip\n      fireEvent.mouseEnter(triggerElement);\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip\n      fireEvent.mouseLeave(triggerElement);\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      expect(openTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Keyboard Interactions', () => {\n    it('shows tooltip on focus', () => {\n      // Use defaultOpen to test tooltip visibility since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n      trigger.focus();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on blur', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip>\n            <TooltipTrigger>\n              <button>First button</button>\n            </TooltipTrigger>\n            <TooltipContent>First tooltip</TooltipContent>\n          </Tooltip>\n          <button>Second button</button>\n        </TooltipWrapper>\n      );\n\n      const firstButton = screen.getByRole('button', { name: 'First button' });\n      const secondButton = screen.getByRole('button', {\n        name: 'Second button',\n      });\n\n      // Hover first button to show tooltip\n      fireEvent.mouseEnter(firstButton);\n      flushTimers();\n      const tooltips = screen.getAllByText('First tooltip');\n      expect(tooltips[0]).toBeVisible();\n\n      // Move focus to second button to hide tooltip\n      fireEvent.click(secondButton);\n      flushTimers();\n      const hidden = screen.queryAllByText('First tooltip');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After blur, there should be no tooltip content in delayed-open state\n      expect(openTooltip).toBeUndefined();\n    });\n\n    it('hides tooltip on Escape key', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip with Escape\n      act(() => {\n        fireEvent.keyDown(document, { key: 'Escape' });\n        vi.advanceTimersByTime(10);\n      });\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const visibleTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After Escape, there should be no visible tooltip content\n      expect(visibleTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Arrow Display', () => {\n    it('shows arrow by default', () => {\n      render(<BasicTooltip showArrow={true} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Check that arrow is rendered (Radix adds it as SVG)\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).toBeInTheDocument();\n    });\n\n    it('hides arrow when showArrow is false', () => {\n      render(<BasicTooltip showArrow={false} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Arrow should not be rendered\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has correct ARIA relationships', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const triggerId = trigger.getAttribute('aria-describedby');\n      const tooltipId = tooltip.getAttribute('id');\n      expect(triggerId).toBe(tooltipId);\n    });\n\n    it('has proper role attributes', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      expect(tooltip).toHaveAttribute('role', 'tooltip');\n    });\n\n    it('works with disabled elements via wrapper', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <span>\n                <button disabled>Disabled button</button>\n              </span>\n            </TooltipTrigger>\n            <TooltipContent>This action is unavailable</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const wrapper = screen.getByRole('button', {\n        name: 'Disabled button',\n      }).parentElement;\n      expect(wrapper).toBeInTheDocument();\n\n      const tooltips = screen.getAllByText('This action is unavailable');\n      expect(tooltips[0]).toBeVisible();\n    });\n  });\n\n  describe('Positioning', () => {\n    it('supports different side positions', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent side='top'>Top tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const [tooltipText] = screen.getAllByText('Top tooltip');\n      const tooltipContent = tooltipText.closest('[data-state]');\n      expect(tooltipContent).toHaveAttribute('data-side', 'top');\n    });\n\n    it('supports custom sideOffset', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent sideOffset={16}>\n              Custom offset tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n      const rendered = screen.getAllByText('Custom offset tooltip');\n      expect(rendered.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Provider Configuration', () => {\n    it('respects custom delay durations', () => {\n      // Test that provider configuration is applied by checking tooltip renders with defaultOpen\n      render(\n        <TooltipWrapper delayDuration={100}>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Delayed trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>Delayed tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Delayed tooltip');\n      expect(tooltips.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Reduced Motion', () => {\n    it('includes motion-reduce classes for accessibility', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const tooltipContent =\n        tooltip.closest('[data-state]') ?? tooltip.parentElement;\n      // When using defaultOpen, state is 'instant-open' or 'open'\n      expect(tooltipContent).toHaveAttribute('data-state');\n    });\n  });\n\n  describe('Complex Content', () => {\n    it('renders complex React node content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Complex trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>\n              <div>\n                <strong>Complex content title</strong>\n                <p>With multiple elements</p>\n              </div>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const titleElements = screen.getAllByText('Complex content title');\n      expect(titleElements.length).toBeGreaterThan(0);\n      const bodyElements = screen.getAllByText('With multiple elements');\n      expect(bodyElements.length).toBeGreaterThan(0);\n    });\n\n    it('applies custom className to content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Custom class trigger</button>\n            </TooltipTrigger>\n            <TooltipContent className='custom-tooltip-class'>\n              Custom styled tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltipElements = screen.getAllByText('Custom styled tooltip');\n      const hasCustomClass = tooltipElements.some(element =>\n        element\n          .closest('[data-state]')\n          ?.classList.contains('custom-tooltip-class')\n      );\n      expect(hasCustomClass).toBe(true);\n    });\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/tooltip.test.tsx" },
        "span": [1384, 1392],
        "sourceCode": "import {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui/atoms/tooltip';\nimport { act, fireEvent, render, screen } from '@testing-library/react';\nimport {\n  afterAll,\n  afterEach,\n  beforeAll,\n  beforeEach,\n  describe,\n  expect,\n  it,\n  vi,\n} from 'vitest';\n\n// Configure fake timers\nvi.useFakeTimers();\n\n// Fast timer flush - advance by small amount to trigger immediate timers\nconst flushTimers = () => {\n  act(() => {\n    vi.advanceTimersByTime(10);\n  });\n};\n\n// Mock reduced motion\nconst mockMatchMedia = vi.fn();\nbeforeAll(() => {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: mockMatchMedia,\n  });\n});\n\n// Test wrapper component with provider\nconst TooltipWrapper = ({\n  children,\n  delayDuration = 0, // Faster for tests\n  skipDelayDuration = 0,\n}: {\n  children: React.ReactNode;\n  delayDuration?: number;\n  skipDelayDuration?: number;\n}) => (\n  <TooltipProvider\n    delayDuration={delayDuration}\n    skipDelayDuration={skipDelayDuration}\n  >\n    {children}\n  </TooltipProvider>\n);\n\nconst BasicTooltip = ({\n  showArrow = true,\n  content = 'Test tooltip content',\n  triggerText = 'Trigger',\n  defaultOpen = false,\n}: {\n  showArrow?: boolean;\n  content?: string;\n  triggerText?: string;\n  defaultOpen?: boolean;\n}) => (\n  <TooltipWrapper>\n    <Tooltip defaultOpen={defaultOpen}>\n      <TooltipTrigger>\n        <button>{triggerText}</button>\n      </TooltipTrigger>\n      <TooltipContent showArrow={showArrow}>{content}</TooltipContent>\n    </Tooltip>\n  </TooltipWrapper>\n);\n\ndescribe('Tooltip', () => {\n  beforeEach(() => {\n    mockMatchMedia.mockReturnValue({\n      matches: false,\n      addListener: vi.fn(),\n      removeListener: vi.fn(),\n      addEventListener: vi.fn(),\n      removeEventListener: vi.fn(),\n      dispatchEvent: vi.fn(),\n    });\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  afterAll(() => {\n    vi.useRealTimers();\n  });\n\n  describe('Rendering', () => {\n    it('renders trigger without tooltip initially', () => {\n      render(<BasicTooltip />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      expect(trigger).toBeInTheDocument();\n\n      // Tooltip content should not be visible initially\n      expect(\n        screen.queryByText('Test tooltip content')\n      ).not.toBeInTheDocument();\n    });\n\n    it('renders with custom trigger text and content', () => {\n      render(\n        <BasicTooltip\n          triggerText='Custom trigger'\n          content='Custom tooltip content'\n        />\n      );\n\n      const trigger = screen.getByRole('button', { name: 'Custom trigger' });\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  describe('Hover Interactions', () => {\n    it('shows tooltip on hover', () => {\n      // Use defaultOpen to test tooltip content rendering since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips.length).toBeGreaterThan(0);\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on unhover', () => {\n      render(<BasicTooltip />);\n\n      const triggerElement = screen.getByRole('button', { name: 'Trigger' });\n\n      // Show tooltip\n      fireEvent.mouseEnter(triggerElement);\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip\n      fireEvent.mouseLeave(triggerElement);\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      expect(openTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Keyboard Interactions', () => {\n    it('shows tooltip on focus', () => {\n      // Use defaultOpen to test tooltip visibility since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n      trigger.focus();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on blur', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip>\n            <TooltipTrigger>\n              <button>First button</button>\n            </TooltipTrigger>\n            <TooltipContent>First tooltip</TooltipContent>\n          </Tooltip>\n          <button>Second button</button>\n        </TooltipWrapper>\n      );\n\n      const firstButton = screen.getByRole('button', { name: 'First button' });\n      const secondButton = screen.getByRole('button', {\n        name: 'Second button',\n      });\n\n      // Hover first button to show tooltip\n      fireEvent.mouseEnter(firstButton);\n      flushTimers();\n      const tooltips = screen.getAllByText('First tooltip');\n      expect(tooltips[0]).toBeVisible();\n\n      // Move focus to second button to hide tooltip\n      fireEvent.click(secondButton);\n      flushTimers();\n      const hidden = screen.queryAllByText('First tooltip');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After blur, there should be no tooltip content in delayed-open state\n      expect(openTooltip).toBeUndefined();\n    });\n\n    it('hides tooltip on Escape key', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip with Escape\n      act(() => {\n        fireEvent.keyDown(document, { key: 'Escape' });\n        vi.advanceTimersByTime(10);\n      });\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const visibleTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After Escape, there should be no visible tooltip content\n      expect(visibleTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Arrow Display', () => {\n    it('shows arrow by default', () => {\n      render(<BasicTooltip showArrow={true} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Check that arrow is rendered (Radix adds it as SVG)\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).toBeInTheDocument();\n    });\n\n    it('hides arrow when showArrow is false', () => {\n      render(<BasicTooltip showArrow={false} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Arrow should not be rendered\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has correct ARIA relationships', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const triggerId = trigger.getAttribute('aria-describedby');\n      const tooltipId = tooltip.getAttribute('id');\n      expect(triggerId).toBe(tooltipId);\n    });\n\n    it('has proper role attributes', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      expect(tooltip).toHaveAttribute('role', 'tooltip');\n    });\n\n    it('works with disabled elements via wrapper', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <span>\n                <button disabled>Disabled button</button>\n              </span>\n            </TooltipTrigger>\n            <TooltipContent>This action is unavailable</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const wrapper = screen.getByRole('button', {\n        name: 'Disabled button',\n      }).parentElement;\n      expect(wrapper).toBeInTheDocument();\n\n      const tooltips = screen.getAllByText('This action is unavailable');\n      expect(tooltips[0]).toBeVisible();\n    });\n  });\n\n  describe('Positioning', () => {\n    it('supports different side positions', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent side='top'>Top tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const [tooltipText] = screen.getAllByText('Top tooltip');\n      const tooltipContent = tooltipText.closest('[data-state]');\n      expect(tooltipContent).toHaveAttribute('data-side', 'top');\n    });\n\n    it('supports custom sideOffset', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent sideOffset={16}>\n              Custom offset tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n      const rendered = screen.getAllByText('Custom offset tooltip');\n      expect(rendered.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Provider Configuration', () => {\n    it('respects custom delay durations', () => {\n      // Test that provider configuration is applied by checking tooltip renders with defaultOpen\n      render(\n        <TooltipWrapper delayDuration={100}>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Delayed trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>Delayed tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Delayed tooltip');\n      expect(tooltips.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Reduced Motion', () => {\n    it('includes motion-reduce classes for accessibility', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const tooltipContent =\n        tooltip.closest('[data-state]') ?? tooltip.parentElement;\n      // When using defaultOpen, state is 'instant-open' or 'open'\n      expect(tooltipContent).toHaveAttribute('data-state');\n    });\n  });\n\n  describe('Complex Content', () => {\n    it('renders complex React node content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Complex trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>\n              <div>\n                <strong>Complex content title</strong>\n                <p>With multiple elements</p>\n              </div>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const titleElements = screen.getAllByText('Complex content title');\n      expect(titleElements.length).toBeGreaterThan(0);\n      const bodyElements = screen.getAllByText('With multiple elements');\n      expect(bodyElements.length).toBeGreaterThan(0);\n    });\n\n    it('applies custom className to content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Custom class trigger</button>\n            </TooltipTrigger>\n            <TooltipContent className='custom-tooltip-class'>\n              Custom styled tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltipElements = screen.getAllByText('Custom styled tooltip');\n      const hasCustomClass = tooltipElements.some(element =>\n        element\n          .closest('[data-state]')\n          ?.classList.contains('custom-tooltip-class')\n      );\n      expect(hasCustomClass).toBe(true);\n    });\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/tooltip.test.tsx" },
        "span": [4355, 4363],
        "sourceCode": "import {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui/atoms/tooltip';\nimport { act, fireEvent, render, screen } from '@testing-library/react';\nimport {\n  afterAll,\n  afterEach,\n  beforeAll,\n  beforeEach,\n  describe,\n  expect,\n  it,\n  vi,\n} from 'vitest';\n\n// Configure fake timers\nvi.useFakeTimers();\n\n// Fast timer flush - advance by small amount to trigger immediate timers\nconst flushTimers = () => {\n  act(() => {\n    vi.advanceTimersByTime(10);\n  });\n};\n\n// Mock reduced motion\nconst mockMatchMedia = vi.fn();\nbeforeAll(() => {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: mockMatchMedia,\n  });\n});\n\n// Test wrapper component with provider\nconst TooltipWrapper = ({\n  children,\n  delayDuration = 0, // Faster for tests\n  skipDelayDuration = 0,\n}: {\n  children: React.ReactNode;\n  delayDuration?: number;\n  skipDelayDuration?: number;\n}) => (\n  <TooltipProvider\n    delayDuration={delayDuration}\n    skipDelayDuration={skipDelayDuration}\n  >\n    {children}\n  </TooltipProvider>\n);\n\nconst BasicTooltip = ({\n  showArrow = true,\n  content = 'Test tooltip content',\n  triggerText = 'Trigger',\n  defaultOpen = false,\n}: {\n  showArrow?: boolean;\n  content?: string;\n  triggerText?: string;\n  defaultOpen?: boolean;\n}) => (\n  <TooltipWrapper>\n    <Tooltip defaultOpen={defaultOpen}>\n      <TooltipTrigger>\n        <button>{triggerText}</button>\n      </TooltipTrigger>\n      <TooltipContent showArrow={showArrow}>{content}</TooltipContent>\n    </Tooltip>\n  </TooltipWrapper>\n);\n\ndescribe('Tooltip', () => {\n  beforeEach(() => {\n    mockMatchMedia.mockReturnValue({\n      matches: false,\n      addListener: vi.fn(),\n      removeListener: vi.fn(),\n      addEventListener: vi.fn(),\n      removeEventListener: vi.fn(),\n      dispatchEvent: vi.fn(),\n    });\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  afterAll(() => {\n    vi.useRealTimers();\n  });\n\n  describe('Rendering', () => {\n    it('renders trigger without tooltip initially', () => {\n      render(<BasicTooltip />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      expect(trigger).toBeInTheDocument();\n\n      // Tooltip content should not be visible initially\n      expect(\n        screen.queryByText('Test tooltip content')\n      ).not.toBeInTheDocument();\n    });\n\n    it('renders with custom trigger text and content', () => {\n      render(\n        <BasicTooltip\n          triggerText='Custom trigger'\n          content='Custom tooltip content'\n        />\n      );\n\n      const trigger = screen.getByRole('button', { name: 'Custom trigger' });\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  describe('Hover Interactions', () => {\n    it('shows tooltip on hover', () => {\n      // Use defaultOpen to test tooltip content rendering since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips.length).toBeGreaterThan(0);\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on unhover', () => {\n      render(<BasicTooltip />);\n\n      const triggerElement = screen.getByRole('button', { name: 'Trigger' });\n\n      // Show tooltip\n      fireEvent.mouseEnter(triggerElement);\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip\n      fireEvent.mouseLeave(triggerElement);\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      expect(openTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Keyboard Interactions', () => {\n    it('shows tooltip on focus', () => {\n      // Use defaultOpen to test tooltip visibility since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n      trigger.focus();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on blur', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip>\n            <TooltipTrigger>\n              <button>First button</button>\n            </TooltipTrigger>\n            <TooltipContent>First tooltip</TooltipContent>\n          </Tooltip>\n          <button>Second button</button>\n        </TooltipWrapper>\n      );\n\n      const firstButton = screen.getByRole('button', { name: 'First button' });\n      const secondButton = screen.getByRole('button', {\n        name: 'Second button',\n      });\n\n      // Hover first button to show tooltip\n      fireEvent.mouseEnter(firstButton);\n      flushTimers();\n      const tooltips = screen.getAllByText('First tooltip');\n      expect(tooltips[0]).toBeVisible();\n\n      // Move focus to second button to hide tooltip\n      fireEvent.click(secondButton);\n      flushTimers();\n      const hidden = screen.queryAllByText('First tooltip');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After blur, there should be no tooltip content in delayed-open state\n      expect(openTooltip).toBeUndefined();\n    });\n\n    it('hides tooltip on Escape key', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip with Escape\n      act(() => {\n        fireEvent.keyDown(document, { key: 'Escape' });\n        vi.advanceTimersByTime(10);\n      });\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const visibleTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After Escape, there should be no visible tooltip content\n      expect(visibleTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Arrow Display', () => {\n    it('shows arrow by default', () => {\n      render(<BasicTooltip showArrow={true} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Check that arrow is rendered (Radix adds it as SVG)\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).toBeInTheDocument();\n    });\n\n    it('hides arrow when showArrow is false', () => {\n      render(<BasicTooltip showArrow={false} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Arrow should not be rendered\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has correct ARIA relationships', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const triggerId = trigger.getAttribute('aria-describedby');\n      const tooltipId = tooltip.getAttribute('id');\n      expect(triggerId).toBe(tooltipId);\n    });\n\n    it('has proper role attributes', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      expect(tooltip).toHaveAttribute('role', 'tooltip');\n    });\n\n    it('works with disabled elements via wrapper', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <span>\n                <button disabled>Disabled button</button>\n              </span>\n            </TooltipTrigger>\n            <TooltipContent>This action is unavailable</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const wrapper = screen.getByRole('button', {\n        name: 'Disabled button',\n      }).parentElement;\n      expect(wrapper).toBeInTheDocument();\n\n      const tooltips = screen.getAllByText('This action is unavailable');\n      expect(tooltips[0]).toBeVisible();\n    });\n  });\n\n  describe('Positioning', () => {\n    it('supports different side positions', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent side='top'>Top tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const [tooltipText] = screen.getAllByText('Top tooltip');\n      const tooltipContent = tooltipText.closest('[data-state]');\n      expect(tooltipContent).toHaveAttribute('data-side', 'top');\n    });\n\n    it('supports custom sideOffset', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent sideOffset={16}>\n              Custom offset tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n      const rendered = screen.getAllByText('Custom offset tooltip');\n      expect(rendered.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Provider Configuration', () => {\n    it('respects custom delay durations', () => {\n      // Test that provider configuration is applied by checking tooltip renders with defaultOpen\n      render(\n        <TooltipWrapper delayDuration={100}>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Delayed trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>Delayed tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Delayed tooltip');\n      expect(tooltips.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Reduced Motion', () => {\n    it('includes motion-reduce classes for accessibility', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const tooltipContent =\n        tooltip.closest('[data-state]') ?? tooltip.parentElement;\n      // When using defaultOpen, state is 'instant-open' or 'open'\n      expect(tooltipContent).toHaveAttribute('data-state');\n    });\n  });\n\n  describe('Complex Content', () => {\n    it('renders complex React node content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Complex trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>\n              <div>\n                <strong>Complex content title</strong>\n                <p>With multiple elements</p>\n              </div>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const titleElements = screen.getAllByText('Complex content title');\n      expect(titleElements.length).toBeGreaterThan(0);\n      const bodyElements = screen.getAllByText('With multiple elements');\n      expect(bodyElements.length).toBeGreaterThan(0);\n    });\n\n    it('applies custom className to content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Custom class trigger</button>\n            </TooltipTrigger>\n            <TooltipContent className='custom-tooltip-class'>\n              Custom styled tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltipElements = screen.getAllByText('Custom styled tooltip');\n      const hasCustomClass = tooltipElements.some(element =>\n        element\n          .closest('[data-state]')\n          ?.classList.contains('custom-tooltip-class')\n      );\n      expect(hasCustomClass).toBe(true);\n    });\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/tooltip.test.tsx" },
        "span": [7946, 7963],
        "sourceCode": "import {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui/atoms/tooltip';\nimport { act, fireEvent, render, screen } from '@testing-library/react';\nimport {\n  afterAll,\n  afterEach,\n  beforeAll,\n  beforeEach,\n  describe,\n  expect,\n  it,\n  vi,\n} from 'vitest';\n\n// Configure fake timers\nvi.useFakeTimers();\n\n// Fast timer flush - advance by small amount to trigger immediate timers\nconst flushTimers = () => {\n  act(() => {\n    vi.advanceTimersByTime(10);\n  });\n};\n\n// Mock reduced motion\nconst mockMatchMedia = vi.fn();\nbeforeAll(() => {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: mockMatchMedia,\n  });\n});\n\n// Test wrapper component with provider\nconst TooltipWrapper = ({\n  children,\n  delayDuration = 0, // Faster for tests\n  skipDelayDuration = 0,\n}: {\n  children: React.ReactNode;\n  delayDuration?: number;\n  skipDelayDuration?: number;\n}) => (\n  <TooltipProvider\n    delayDuration={delayDuration}\n    skipDelayDuration={skipDelayDuration}\n  >\n    {children}\n  </TooltipProvider>\n);\n\nconst BasicTooltip = ({\n  showArrow = true,\n  content = 'Test tooltip content',\n  triggerText = 'Trigger',\n  defaultOpen = false,\n}: {\n  showArrow?: boolean;\n  content?: string;\n  triggerText?: string;\n  defaultOpen?: boolean;\n}) => (\n  <TooltipWrapper>\n    <Tooltip defaultOpen={defaultOpen}>\n      <TooltipTrigger>\n        <button>{triggerText}</button>\n      </TooltipTrigger>\n      <TooltipContent showArrow={showArrow}>{content}</TooltipContent>\n    </Tooltip>\n  </TooltipWrapper>\n);\n\ndescribe('Tooltip', () => {\n  beforeEach(() => {\n    mockMatchMedia.mockReturnValue({\n      matches: false,\n      addListener: vi.fn(),\n      removeListener: vi.fn(),\n      addEventListener: vi.fn(),\n      removeEventListener: vi.fn(),\n      dispatchEvent: vi.fn(),\n    });\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  afterAll(() => {\n    vi.useRealTimers();\n  });\n\n  describe('Rendering', () => {\n    it('renders trigger without tooltip initially', () => {\n      render(<BasicTooltip />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      expect(trigger).toBeInTheDocument();\n\n      // Tooltip content should not be visible initially\n      expect(\n        screen.queryByText('Test tooltip content')\n      ).not.toBeInTheDocument();\n    });\n\n    it('renders with custom trigger text and content', () => {\n      render(\n        <BasicTooltip\n          triggerText='Custom trigger'\n          content='Custom tooltip content'\n        />\n      );\n\n      const trigger = screen.getByRole('button', { name: 'Custom trigger' });\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  describe('Hover Interactions', () => {\n    it('shows tooltip on hover', () => {\n      // Use defaultOpen to test tooltip content rendering since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips.length).toBeGreaterThan(0);\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on unhover', () => {\n      render(<BasicTooltip />);\n\n      const triggerElement = screen.getByRole('button', { name: 'Trigger' });\n\n      // Show tooltip\n      fireEvent.mouseEnter(triggerElement);\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip\n      fireEvent.mouseLeave(triggerElement);\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      expect(openTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Keyboard Interactions', () => {\n    it('shows tooltip on focus', () => {\n      // Use defaultOpen to test tooltip visibility since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n      trigger.focus();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on blur', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip>\n            <TooltipTrigger>\n              <button>First button</button>\n            </TooltipTrigger>\n            <TooltipContent>First tooltip</TooltipContent>\n          </Tooltip>\n          <button>Second button</button>\n        </TooltipWrapper>\n      );\n\n      const firstButton = screen.getByRole('button', { name: 'First button' });\n      const secondButton = screen.getByRole('button', {\n        name: 'Second button',\n      });\n\n      // Hover first button to show tooltip\n      fireEvent.mouseEnter(firstButton);\n      flushTimers();\n      const tooltips = screen.getAllByText('First tooltip');\n      expect(tooltips[0]).toBeVisible();\n\n      // Move focus to second button to hide tooltip\n      fireEvent.click(secondButton);\n      flushTimers();\n      const hidden = screen.queryAllByText('First tooltip');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After blur, there should be no tooltip content in delayed-open state\n      expect(openTooltip).toBeUndefined();\n    });\n\n    it('hides tooltip on Escape key', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip with Escape\n      act(() => {\n        fireEvent.keyDown(document, { key: 'Escape' });\n        vi.advanceTimersByTime(10);\n      });\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const visibleTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After Escape, there should be no visible tooltip content\n      expect(visibleTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Arrow Display', () => {\n    it('shows arrow by default', () => {\n      render(<BasicTooltip showArrow={true} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Check that arrow is rendered (Radix adds it as SVG)\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).toBeInTheDocument();\n    });\n\n    it('hides arrow when showArrow is false', () => {\n      render(<BasicTooltip showArrow={false} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Arrow should not be rendered\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has correct ARIA relationships', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const triggerId = trigger.getAttribute('aria-describedby');\n      const tooltipId = tooltip.getAttribute('id');\n      expect(triggerId).toBe(tooltipId);\n    });\n\n    it('has proper role attributes', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      expect(tooltip).toHaveAttribute('role', 'tooltip');\n    });\n\n    it('works with disabled elements via wrapper', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <span>\n                <button disabled>Disabled button</button>\n              </span>\n            </TooltipTrigger>\n            <TooltipContent>This action is unavailable</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const wrapper = screen.getByRole('button', {\n        name: 'Disabled button',\n      }).parentElement;\n      expect(wrapper).toBeInTheDocument();\n\n      const tooltips = screen.getAllByText('This action is unavailable');\n      expect(tooltips[0]).toBeVisible();\n    });\n  });\n\n  describe('Positioning', () => {\n    it('supports different side positions', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent side='top'>Top tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const [tooltipText] = screen.getAllByText('Top tooltip');\n      const tooltipContent = tooltipText.closest('[data-state]');\n      expect(tooltipContent).toHaveAttribute('data-side', 'top');\n    });\n\n    it('supports custom sideOffset', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent sideOffset={16}>\n              Custom offset tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n      const rendered = screen.getAllByText('Custom offset tooltip');\n      expect(rendered.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Provider Configuration', () => {\n    it('respects custom delay durations', () => {\n      // Test that provider configuration is applied by checking tooltip renders with defaultOpen\n      render(\n        <TooltipWrapper delayDuration={100}>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Delayed trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>Delayed tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Delayed tooltip');\n      expect(tooltips.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Reduced Motion', () => {\n    it('includes motion-reduce classes for accessibility', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const tooltipContent =\n        tooltip.closest('[data-state]') ?? tooltip.parentElement;\n      // When using defaultOpen, state is 'instant-open' or 'open'\n      expect(tooltipContent).toHaveAttribute('data-state');\n    });\n  });\n\n  describe('Complex Content', () => {\n    it('renders complex React node content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Complex trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>\n              <div>\n                <strong>Complex content title</strong>\n                <p>With multiple elements</p>\n              </div>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const titleElements = screen.getAllByText('Complex content title');\n      expect(titleElements.length).toBeGreaterThan(0);\n      const bodyElements = screen.getAllByText('With multiple elements');\n      expect(bodyElements.length).toBeGreaterThan(0);\n    });\n\n    it('applies custom className to content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Custom class trigger</button>\n            </TooltipTrigger>\n            <TooltipContent className='custom-tooltip-class'>\n              Custom styled tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltipElements = screen.getAllByText('Custom styled tooltip');\n      const hasCustomClass = tooltipElements.some(element =>\n        element\n          .closest('[data-state]')\n          ?.classList.contains('custom-tooltip-class')\n      );\n      expect(hasCustomClass).toBe(true);\n    });\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "lint/a11y/useButtonType",
      "severity": "warning",
      "description": "Provide an explicit type prop for the button element.",
      "message": [
        { "elements": [], "content": "Provide an explicit " },
        { "elements": ["Emphasis"], "content": "type" },
        { "elements": [], "content": " prop for the " },
        { "elements": ["Emphasis"], "content": "button" },
        { "elements": [], "content": " element." }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "The default " },
                { "elements": ["Emphasis"], "content": "type" },
                { "elements": [], "content": " of a button is " },
                { "elements": ["Emphasis"], "content": "submit" },
                {
                  "elements": [],
                  "content": ", which causes the submission of a form when placed inside a `form` element. This is likely not the behaviour that you want inside a React application."
                }
              ]
            ]
          },
          {
            "log": [
              "info",
              [
                { "elements": [], "content": "Allowed button types are: " },
                { "elements": ["Emphasis"], "content": "submit" },
                { "elements": [], "content": ", " },
                { "elements": ["Emphasis"], "content": "button" },
                { "elements": [], "content": " or " },
                { "elements": ["Emphasis"], "content": "reset" },
                { "elements": [], "content": "" }
              ]
            ]
          }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "tests/unit/tooltip.test.tsx" },
        "span": [4505, 4513],
        "sourceCode": "import {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@jovie/ui/atoms/tooltip';\nimport { act, fireEvent, render, screen } from '@testing-library/react';\nimport {\n  afterAll,\n  afterEach,\n  beforeAll,\n  beforeEach,\n  describe,\n  expect,\n  it,\n  vi,\n} from 'vitest';\n\n// Configure fake timers\nvi.useFakeTimers();\n\n// Fast timer flush - advance by small amount to trigger immediate timers\nconst flushTimers = () => {\n  act(() => {\n    vi.advanceTimersByTime(10);\n  });\n};\n\n// Mock reduced motion\nconst mockMatchMedia = vi.fn();\nbeforeAll(() => {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: mockMatchMedia,\n  });\n});\n\n// Test wrapper component with provider\nconst TooltipWrapper = ({\n  children,\n  delayDuration = 0, // Faster for tests\n  skipDelayDuration = 0,\n}: {\n  children: React.ReactNode;\n  delayDuration?: number;\n  skipDelayDuration?: number;\n}) => (\n  <TooltipProvider\n    delayDuration={delayDuration}\n    skipDelayDuration={skipDelayDuration}\n  >\n    {children}\n  </TooltipProvider>\n);\n\nconst BasicTooltip = ({\n  showArrow = true,\n  content = 'Test tooltip content',\n  triggerText = 'Trigger',\n  defaultOpen = false,\n}: {\n  showArrow?: boolean;\n  content?: string;\n  triggerText?: string;\n  defaultOpen?: boolean;\n}) => (\n  <TooltipWrapper>\n    <Tooltip defaultOpen={defaultOpen}>\n      <TooltipTrigger>\n        <button>{triggerText}</button>\n      </TooltipTrigger>\n      <TooltipContent showArrow={showArrow}>{content}</TooltipContent>\n    </Tooltip>\n  </TooltipWrapper>\n);\n\ndescribe('Tooltip', () => {\n  beforeEach(() => {\n    mockMatchMedia.mockReturnValue({\n      matches: false,\n      addListener: vi.fn(),\n      removeListener: vi.fn(),\n      addEventListener: vi.fn(),\n      removeEventListener: vi.fn(),\n      dispatchEvent: vi.fn(),\n    });\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  afterAll(() => {\n    vi.useRealTimers();\n  });\n\n  describe('Rendering', () => {\n    it('renders trigger without tooltip initially', () => {\n      render(<BasicTooltip />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      expect(trigger).toBeInTheDocument();\n\n      // Tooltip content should not be visible initially\n      expect(\n        screen.queryByText('Test tooltip content')\n      ).not.toBeInTheDocument();\n    });\n\n    it('renders with custom trigger text and content', () => {\n      render(\n        <BasicTooltip\n          triggerText='Custom trigger'\n          content='Custom tooltip content'\n        />\n      );\n\n      const trigger = screen.getByRole('button', { name: 'Custom trigger' });\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  describe('Hover Interactions', () => {\n    it('shows tooltip on hover', () => {\n      // Use defaultOpen to test tooltip content rendering since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips.length).toBeGreaterThan(0);\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on unhover', () => {\n      render(<BasicTooltip />);\n\n      const triggerElement = screen.getByRole('button', { name: 'Trigger' });\n\n      // Show tooltip\n      fireEvent.mouseEnter(triggerElement);\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip\n      fireEvent.mouseLeave(triggerElement);\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      expect(openTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Keyboard Interactions', () => {\n    it('shows tooltip on focus', () => {\n      // Use defaultOpen to test tooltip visibility since jsdom doesn't fully support pointer events\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n      trigger.focus();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n    });\n\n    it.skip('hides tooltip on blur', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip>\n            <TooltipTrigger>\n              <button>First button</button>\n            </TooltipTrigger>\n            <TooltipContent>First tooltip</TooltipContent>\n          </Tooltip>\n          <button>Second button</button>\n        </TooltipWrapper>\n      );\n\n      const firstButton = screen.getByRole('button', { name: 'First button' });\n      const secondButton = screen.getByRole('button', {\n        name: 'Second button',\n      });\n\n      // Hover first button to show tooltip\n      fireEvent.mouseEnter(firstButton);\n      flushTimers();\n      const tooltips = screen.getAllByText('First tooltip');\n      expect(tooltips[0]).toBeVisible();\n\n      // Move focus to second button to hide tooltip\n      fireEvent.click(secondButton);\n      flushTimers();\n      const hidden = screen.queryAllByText('First tooltip');\n      const openTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After blur, there should be no tooltip content in delayed-open state\n      expect(openTooltip).toBeUndefined();\n    });\n\n    it('hides tooltip on Escape key', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n      const tooltips = screen.getAllByText('Test tooltip content');\n      expect(tooltips[0]).toBeVisible();\n\n      // Hide tooltip with Escape\n      act(() => {\n        fireEvent.keyDown(document, { key: 'Escape' });\n        vi.advanceTimersByTime(10);\n      });\n      const hidden = screen.queryAllByText('Test tooltip content');\n      const visibleTooltip = hidden.find(el =>\n        el.closest('[data-state=\"delayed-open\"]')\n      );\n      // After Escape, there should be no visible tooltip content\n      expect(visibleTooltip).toBeUndefined();\n    });\n  });\n\n  describe('Arrow Display', () => {\n    it('shows arrow by default', () => {\n      render(<BasicTooltip showArrow={true} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Check that arrow is rendered (Radix adds it as SVG)\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).toBeInTheDocument();\n    });\n\n    it('hides arrow when showArrow is false', () => {\n      render(<BasicTooltip showArrow={false} defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Test tooltip content');\n      const tooltipContent = tooltips[0].closest('[data-state]');\n      expect(tooltipContent).toBeInTheDocument();\n\n      // Arrow should not be rendered\n      const arrow = tooltipContent?.querySelector('svg');\n      expect(arrow).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has correct ARIA relationships', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      const trigger = screen.getByRole('button', { name: 'Trigger' });\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const triggerId = trigger.getAttribute('aria-describedby');\n      const tooltipId = tooltip.getAttribute('id');\n      expect(triggerId).toBe(tooltipId);\n    });\n\n    it('has proper role attributes', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      expect(tooltip).toHaveAttribute('role', 'tooltip');\n    });\n\n    it('works with disabled elements via wrapper', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <span>\n                <button disabled>Disabled button</button>\n              </span>\n            </TooltipTrigger>\n            <TooltipContent>This action is unavailable</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const wrapper = screen.getByRole('button', {\n        name: 'Disabled button',\n      }).parentElement;\n      expect(wrapper).toBeInTheDocument();\n\n      const tooltips = screen.getAllByText('This action is unavailable');\n      expect(tooltips[0]).toBeVisible();\n    });\n  });\n\n  describe('Positioning', () => {\n    it('supports different side positions', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent side='top'>Top tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const [tooltipText] = screen.getAllByText('Top tooltip');\n      const tooltipContent = tooltipText.closest('[data-state]');\n      expect(tooltipContent).toHaveAttribute('data-side', 'top');\n    });\n\n    it('supports custom sideOffset', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Trigger</button>\n            </TooltipTrigger>\n            <TooltipContent sideOffset={16}>\n              Custom offset tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n      const rendered = screen.getAllByText('Custom offset tooltip');\n      expect(rendered.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Provider Configuration', () => {\n    it('respects custom delay durations', () => {\n      // Test that provider configuration is applied by checking tooltip renders with defaultOpen\n      render(\n        <TooltipWrapper delayDuration={100}>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Delayed trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>Delayed tooltip</TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltips = screen.getAllByText('Delayed tooltip');\n      expect(tooltips.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Reduced Motion', () => {\n    it('includes motion-reduce classes for accessibility', () => {\n      render(<BasicTooltip defaultOpen={true} />);\n\n      flushTimers();\n\n      const tooltip = screen.getByRole('tooltip');\n      const tooltipContent =\n        tooltip.closest('[data-state]') ?? tooltip.parentElement;\n      // When using defaultOpen, state is 'instant-open' or 'open'\n      expect(tooltipContent).toHaveAttribute('data-state');\n    });\n  });\n\n  describe('Complex Content', () => {\n    it('renders complex React node content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Complex trigger</button>\n            </TooltipTrigger>\n            <TooltipContent>\n              <div>\n                <strong>Complex content title</strong>\n                <p>With multiple elements</p>\n              </div>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const titleElements = screen.getAllByText('Complex content title');\n      expect(titleElements.length).toBeGreaterThan(0);\n      const bodyElements = screen.getAllByText('With multiple elements');\n      expect(bodyElements.length).toBeGreaterThan(0);\n    });\n\n    it('applies custom className to content', () => {\n      render(\n        <TooltipWrapper>\n          <Tooltip defaultOpen={true}>\n            <TooltipTrigger>\n              <button>Custom class trigger</button>\n            </TooltipTrigger>\n            <TooltipContent className='custom-tooltip-class'>\n              Custom styled tooltip\n            </TooltipContent>\n          </Tooltip>\n        </TooltipWrapper>\n      );\n\n      flushTimers();\n\n      const tooltipElements = screen.getAllByText('Custom styled tooltip');\n      const hasCustomClass = tooltipElements.some(element =>\n        element\n          .closest('[data-state]')\n          ?.classList.contains('custom-tooltip-class')\n      );\n      expect(hasCustomClass).toBe(true);\n    });\n  });\n});\n"
      },
      "tags": [],
      "source": null
    },
    {
      "category": "parse",
      "severity": "error",
      "description": "Expected an array, an object, or a literal but instead found the end of the file.",
      "message": [
        {
          "elements": [],
          "content": "Expected an array, an object, or a literal but instead found the end of the file."
        }
      ],
      "advices": {
        "advices": [
          {
            "log": [
              "info",
              [
                {
                  "elements": [],
                  "content": "Expected an array, an object, or a literal here."
                }
              ]
            ]
          },
          { "frame": { "path": null, "span": [0, 0], "sourceCode": "" } }
        ]
      },
      "verboseAdvices": { "advices": [] },
      "location": {
        "path": { "file": "a11y-report.json" },
        "span": [0, 0],
        "sourceCode": ""
      },
      "tags": [],
      "source": null
    }
  ],
  "command": "lint"
}
