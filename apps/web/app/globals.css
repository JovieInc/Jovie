/**
 * ðŸ”’ CRITICAL IMPORTS - DO NOT MODIFY ORDER OR PATHS
 *
 * âŒ DO NOT CHANGE:
 * - Import order (tailwindcss must be first)
 * - Design system path: "../styles/design-system.css" (single source of truth for design tokens)
 * - Theme path: "../styles/theme.css" (feature accents and animations only)
 * - Import syntax
 *
 * âš ï¸  CHANGING THESE WILL BREAK ALL STYLING
 */

@import "tailwindcss";
@import "../styles/design-system.css";
@import "../styles/theme.css";
@import "tw-animate-css";
@import "streamdown/styles.css";

/* Scan @jovie/ui package so Tailwind v4 detects its class usage */
@source "../../../packages/ui";
@source "../../../node_modules/streamdown/dist/*.js";

@custom-variant dark (&:is(.dark *));

/* Base document sizing and immediate dark-aware fallback colors */
html,
body {
  height: 100%;
  overflow-x: clip;
  overscroll-behavior: none;
}

/* Smooth scroll for anchor links, respecting reduced motion preference */
html {
  scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}

/* Fallback colors before token CSS finishes loading */
body {
  background: #ffffff;
  color: #0c0c0c;
}

.dark body {
  background: var(--color-bg-base);
  color: var(--color-text-primary-token);
}

@layer base {
  :root {
    --font-inter: "Inter Variable";

    /* Safe area inset custom properties for iOS device support */
    --safe-area-inset-top: env(safe-area-inset-top, 0px);
    --safe-area-inset-right: env(safe-area-inset-right, 0px);
    --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-inset-left: env(safe-area-inset-left, 0px);
  }

  /* Linear Typography Features - apply font features globally */
  body {
    font-feature-settings:
      "cv01",
      "ss03",
      "rlig" 1,
      "calt" 1;
    letter-spacing: -0.011em;
  }
}

@theme {
  /* Custom font sizes â€” Linear's type scale registered as Tailwind utilities
     text-2xs = 11px, text-app = 13px (Linear's default UI size) */
  --text-2xs: 0.6875rem;
  --text-app: 0.8125rem;

  /* Font stack: var(--font-inter) for Next.js localFont, then Linear's exact fallbacks */
  --font-sans:
    var(--font-inter), "Inter Variable", "SF Pro Display", -apple-system, "system-ui",
    "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;

  --color-gray-50: #f9fafb;
  --color-gray-100: #f3f4f6;
  --color-gray-200: #e5e7eb;
  --color-gray-300: #d1d5db;
  --color-gray-400: #9ca3af;
  --color-gray-500: #6b7280;
  --color-gray-600: #4b5563;
  --color-gray-700: #374151;
  --color-gray-800: #1f2937;
  --color-gray-900: #111827;

  --tracking-tighter: -0.02em;
  --tracking-tight: -0.01em;
  --tracking-normal: 0;
  --tracking-wide: 0.01em;
  --tracking-wider: 0.02em;

  --leading-tight: 1.25;
  --leading-snug: 1.375;
  --leading-normal: 1.5;
  --leading-relaxed: 1.625;
  --leading-loose: 2;

  /* Map app-level button tokens to Tailwind v4 color tokens so classes like bg-btn-primary work */
  --color-btn-primary: var(--color-btn-primary-bg);
  --color-btn-primary-foreground: var(--color-btn-primary-fg);

  /* Platform brand colors - exposed as Tailwind utilities */
  --color-brand-spotify: var(--color-brand-spotify);
  --color-brand-spotify-hover: var(--color-brand-spotify-hover);
  --color-brand-spotify-subtle: var(--color-brand-spotify-subtle);
  --color-brand-apple: var(--color-brand-apple);
  --color-brand-apple-hover: var(--color-brand-apple-hover);
  --color-brand-apple-subtle: var(--color-brand-apple-subtle);
  --color-brand-youtube: var(--color-brand-youtube);
  --color-brand-youtube-hover: var(--color-brand-youtube-hover);
  --color-brand-youtube-subtle: var(--color-brand-youtube-subtle);

  /* Error token â€” generates text-error, bg-error, border-error */
  --color-error: var(--color-error);

  /* Surface backgrounds â€” generates bg-base, bg-surface-0, bg-surface-1, etc. */
  --color-base: var(--color-bg-base);
  --color-surface-0: var(--color-bg-surface-0);
  --color-surface-1: var(--color-bg-surface-1);
  --color-surface-2: var(--color-bg-surface-2);
  --color-surface-3: var(--color-bg-surface-3);

  /* Border tokens â€” generates border-subtle, border-default, border-strong, border-focus */
  --color-subtle: var(--color-border-subtle);
  --color-default: var(--color-border-default);
  --color-strong: var(--color-border-strong);
  --color-focus: var(--color-border-focus);

  /* Transition durations â€” Linear timing tokens for duration-* utilities in @apply */
  --transition-duration-instant: var(--duration-instant);
  --transition-duration-fast: var(--duration-fast);
  --transition-duration-normal: var(--duration-normal);
  --transition-duration-slow: var(--duration-slow);
  --transition-duration-slower: var(--duration-slower);
  --transition-duration-slowest: var(--duration-slowest);
}

/* ============================================
   SAFE AREA UTILITIES - MIGRATED TO PLUGIN
   ============================================
   These utilities are now in lib/tailwind/utilities-plugin.js
   Commented out to prevent conflicts with Tailwind v4

@utility pt-safe, pr-safe, pb-safe, pl-safe - Base safe area padding
@utility top-safe, right-safe, bottom-safe, left-safe - Safe area positioning
@utility pt-4-safe, pb-4-safe, etc. - Safe area + spacing variants
*/

/* ============================================
   TYPOGRAPHY & PATTERN UTILITIES
   ============================================ */

/* Typography utilities - component-like, moved to @layer components */
@layer components {
  .dashboard-heading {
    font-weight: var(--font-weight-bold); /* 590 â€” Linear bold */
    letter-spacing: -0.025em;
    font-feature-settings:
      "cv01",
      "ss03",
      "rlig" 1,
      "calt" 1;
  }

  .dashboard-label {
    font-size: var(--text-2xs); /* 11px */
    font-weight: var(--font-weight-semibold); /* 538 â€” Linear semibold */
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }

  .dashboard-body {
    font-feature-settings:
      "cv01",
      "ss03",
      "rlig" 1,
      "calt" 1;
    letter-spacing: -0.011em;
  }
}

/* Grid backgrounds - MIGRATED TO PLUGIN
   Now in lib/tailwind/utilities-plugin.js */

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-border-subtle, currentcolor);
  }
}

/* ============================================
   BUTTON & FOCUS UTILITIES - MOVED TO COMPONENTS
   ============================================ */

@layer components {
  /* Focus ring utilities */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-gray-500/50 dark:focus-visible:ring-white/40 dark:focus-visible:ring-offset-gray-900;
  }

  .focus-ring-transparent-offset {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-transparent focus-visible:ring-gray-500/50 dark:focus-visible:ring-white/40;
  }

  /* Button component styles */
  .btn {
    @apply inline-flex items-center justify-center rounded-lg text-[13px] font-medium transition-colors duration-normal disabled:opacity-50 disabled:pointer-events-none;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-gray-500/50 dark:focus-visible:ring-white/40 dark:focus-visible:ring-offset-gray-900;
  }

  .btn-primary {
    background-color: var(--color-btn-primary-bg);
    color: var(--color-btn-primary-fg);
  }

  .btn-secondary {
    background-color: var(--color-bg-surface-2);
    color: var(--color-text-primary-token);
  }

  .btn-secondary:hover {
    background-color: var(--color-bg-surface-3);
  }

  .btn-ghost:hover {
    background-color: var(--color-bg-surface-2);
  }

  .btn-sm {
    @apply h-7 px-2.5 text-xs;
  }

  .btn-md {
    @apply h-8 px-3 py-1.5;
  }

  .btn-lg {
    @apply h-10 px-4 py-2 text-sm;
  }
}

/* bg-btn-primary and text-btn-primary-foreground now available via theme.extend.colors
   text-accent now available via theme.extend.colors */

/* ============================================
   MENU/DROPDOWN UTILITIES - MOVED TO COMPONENTS
   ============================================ */

@layer components {
  .menu-background {
    background-color: rgb(var(--menu-background));
  }

  .menu-border {
    border-color: rgb(var(--menu-border));
  }

  .menu-shadow {
    box-shadow:
      0 10px 15px -3px rgb(var(--menu-shadow)),
      0 4px 6px -2px rgb(var(--menu-shadow));
  }

  .menu-item-hover {
    background-color: rgb(var(--menu-item-hover));
  }

  .menu-separator {
    border-color: rgb(var(--menu-separator));
  }
}

/* ============================================
   SURFACE & TEXT UTILITIES - MIGRATED TO THEME
   ============================================
   These are now available via theme.extend.colors:
   - bg-surface-0, bg-surface-1, bg-surface-2, bg-surface-3
   - text-primary-token, text-secondary-token, text-tertiary-token
*/

/* Legacy surface utilities (map to new system) */
@layer components {
  .surface {
    background-color: var(--color-bg-surface-1);
  }

  .surface-hover {
    background-color: var(--color-bg-surface-2);
  }

  .surface-pressed {
    background-color: var(--color-bg-surface-3);
  }

  /* Backwards compatibility aliases */
  .text-primary {
    color: var(--color-text-primary-token);
  }

  .text-secondary {
    color: var(--color-text-secondary-token);
  }

  .text-tertiary {
    color: var(--color-text-tertiary-token);
  }
}

/* ============================================
   MARKETING & TYPOGRAPHY COMPONENTS
   ============================================ */

@layer components {
  .heading-linear {
    font-feature-settings: var(--linear-font-features);
    font-variation-settings: "opsz" var(--linear-font-optical-sizing);
    letter-spacing: var(--linear-tracking-headline);
    font-weight: var(--linear-font-weight-semibold);
    line-height: var(--linear-leading-snug);
    text-wrap: balance;
  }

  .text-linear {
    font-feature-settings: var(--linear-font-features);
    font-variation-settings: "opsz" var(--linear-font-optical-sizing);
    letter-spacing: var(--linear-tracking-body);
    line-height: var(--linear-leading-normal);
  }

  .marketing-h1-linear {
    font-size: clamp(
      var(--linear-h1-size-sm),
      5vw +
      1rem,
      var(--linear-h1-size-lg)
    );
    font-weight: var(--linear-font-weight-semibold);
    letter-spacing: var(--linear-tracking-headline);
    line-height: var(--linear-leading-snug);
    font-feature-settings: var(--linear-font-features);
    font-variation-settings: "opsz" var(--linear-font-optical-sizing);
    text-wrap: balance;
  }

  .marketing-h2-linear {
    font-size: clamp(
      var(--linear-h2-size-sm),
      3vw +
      1rem,
      var(--linear-h2-size-lg)
    );
    font-weight: var(--linear-font-weight-semibold);
    letter-spacing: var(--linear-tracking-subheadline);
    line-height: 1.2;
    font-feature-settings: var(--linear-font-features);
    font-variation-settings: "opsz" var(--linear-font-optical-sizing);
    text-wrap: balance;
  }

  /* Hero radial glow â€” subtle depth cue behind heading */
  .hero-glow {
    background: radial-gradient(
      ellipse 80% 50% at 50% 40%,
      oklch(30% 0.03 260 / 0.15),
      transparent 70%
    );
  }

  @media (prefers-contrast: more) {
    .hero-glow {
      display: none;
    }
  }

  .marketing-lead-linear {
    font-size: clamp(
      var(--linear-body-lg-size-sm),
      1.5vw +
      0.5rem,
      var(--linear-body-lg-size-lg)
    );
    font-feature-settings: var(--linear-font-features);
    font-variation-settings: "opsz" var(--linear-font-optical-sizing);
    letter-spacing: var(--linear-tracking-body);
    line-height: var(--linear-leading-normal);
  }

  .marketing-body {
    font-feature-settings:
      "cv01",
      "ss03",
      "rlig" 1,
      "calt" 1;
    font-variation-settings: "opsz" 28;
    letter-spacing: -0.011em;
    line-height: 1.6;
    @apply text-base sm:text-lg;
  }

  .marketing-card {
    @apply relative p-6 rounded-2xl border transition-colors;
    border-color: var(--color-border-subtle);
  }

  .marketing-cta {
    @apply relative inline-flex items-center justify-center rounded bg-btn-primary text-btn-primary-foreground px-6 py-3 text-sm font-semibold transition-colors duration-normal;
  }
}

/* scrollbar-hide - MIGRATED TO PLUGIN
   Now in lib/tailwind/utilities-plugin.js */

/* ============================================
   LINEAR-STYLE COMPONENTS
   ============================================ */

@layer components {
  /* Linear Nav Link & Login Button - identical ghost-style link using Linear tokens */
  .nav-link-linear,
  .btn-linear-login {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: var(--linear-button-height-sm);
    padding: 0 var(--linear-space-3);
    font-size: var(--linear-caption-size);
    font-weight: var(--linear-font-weight-normal);
    line-height: var(--linear-caption-leading);
    color: var(--linear-text-secondary);
    background-color: transparent;
    border: none;
    border-radius: var(--linear-radius-sm);
    outline-color: transparent;
    min-width: 0;
    min-height: 0;
    transition:
      color 100ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
      background 100ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
      box-shadow 100ms cubic-bezier(0.25, 0.46, 0.45, 0.94);

    &:hover {
      background-color: var(--linear-bg-hover);
      color: var(--linear-text-primary);
    }

    &.is-active {
      color: var(--linear-text-primary);
      box-shadow: inset 0 -1px 0 0 var(--linear-border-strong);
    }
  }

  /* Linear Nav Signup Button - filled inverted style matching Linear header */
  .btn-linear-signup {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--linear-gap-buttons);
    height: var(--linear-button-height-sm);
    padding: 0 var(--linear-space-3);
    font-size: var(--linear-caption-size);
    font-weight: var(--linear-font-weight-medium);
    line-height: var(--linear-button-height-sm);
    color: var(--linear-btn-primary-fg);
    background-color: var(--linear-btn-primary-bg);
    border: 1px solid var(--linear-btn-primary-border);
    border-radius: 4px;
    outline-color: transparent;
    max-width: 100%;
    box-shadow:
      rgba(0, 0, 0, 0) 0px 8px 2px 0px,
      rgba(0, 0, 0, 0.01) 0px 5px 2px 0px,
      rgba(0, 0, 0, 0.04) 0px 3px 2px 0px,
      rgba(0, 0, 0, 0.07) 0px 1px 1px 0px,
      rgba(0, 0, 0, 0.08) 0px 0px 1px 0px;
    transition:
      border 160ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
      background-color 160ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
      color 160ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
      box-shadow 160ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
      opacity 160ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
      filter 160ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
      transform 160ms cubic-bezier(0.25, 0.46, 0.45, 0.94);

    &:hover {
      background-color: var(--linear-btn-primary-hover);
      border-color: var(--linear-btn-primary-hover);
    }
  }

  /* Linear Button - Primary CTA styling using tokens */
  .btn-linear-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--linear-gap-buttons);
    height: var(--linear-button-height-sm);
    padding: 0 var(--linear-space-3);
    border-radius: var(--linear-radius-sm);
    font-size: var(--linear-caption-size);
    font-weight: var(--linear-font-weight-medium);
    line-height: var(--linear-button-height-sm);
    letter-spacing: var(--linear-tracking-normal);
    background-color: var(--linear-btn-primary-bg);
    color: var(--linear-btn-primary-fg);
    border: 1px solid var(--linear-btn-primary-border);
    max-width: 100%;
    box-shadow: var(--linear-shadow-button);
    transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);

    &:hover {
      opacity: 0.9;
    }
  }

  /* Linear Spacing System - generous vertical rhythm */
  .section-spacing-linear {
    padding-top: var(--linear-section-py-sm); /* 80px mobile */
    padding-bottom: var(--linear-section-py-sm);

    @media (min-width: 768px) {
      padding-top: var(--linear-section-py-md); /* 120px tablet */
      padding-bottom: var(--linear-section-py-md);
    }

    @media (min-width: 1024px) {
      padding-top: var(--linear-section-py-lg); /* 160px desktop */
      padding-bottom: var(--linear-section-py-lg);
    }
  }

  /* Smaller section spacing for tighter groupings */
  .section-spacing-linear-sm {
    padding-top: var(--linear-space-16); /* 64px */
    padding-bottom: var(--linear-space-16);

    @media (min-width: 768px) {
      padding-top: var(--linear-space-20); /* 80px */
      padding-bottom: var(--linear-space-20);
    }

    @media (min-width: 1024px) {
      padding-top: var(--linear-space-24); /* 96px */
      padding-bottom: var(--linear-space-24);
    }
  }

  .section-gap-linear {
    gap: var(--linear-content-gap-sm); /* 48px */

    @media (min-width: 768px) {
      gap: var(--linear-content-gap-md); /* 64px */
    }

    @media (min-width: 1024px) {
      gap: var(--linear-content-gap-lg); /* 80px */
    }
  }

  /* Heading to content gap */
  .heading-gap-linear {
    margin-bottom: var(--linear-content-gap-sm);

    @media (min-width: 768px) {
      margin-bottom: var(--linear-content-gap-md);
    }
  }

  .text-destructive {
    color: var(--color-error);
  }
}

/* text-quaternary-token now available via theme.extend.colors */

/* ============================================
   SEMANTIC STATUS UTILITIES - MIGRATED TO THEME
   ============================================
   Core utilities now available via theme.extend:
   - text-success, text-error, text-warning, text-info
   - bg-success, bg-error, bg-warning, bg-info
   - bg-success-subtle, bg-error-subtle, bg-warning-subtle, bg-info-subtle
   - border-success, border-error, border-warning, border-info
*/

/* Interactive state utilities - moved to components */
@layer components {
  .interactive-hover {
    background-color: var(--color-interactive-hover);
  }

  .interactive-pressed {
    background-color: var(--color-interactive-active);
  }

  .focus-ring-themed {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    --tw-ring-color: var(--color-focus-ring);
  }
}

/* Menu animations */
@keyframes user-menu-enter {
  from {
    opacity: 0;
    transform: translateY(-4px) scale(0.99);
  }

  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
  }
}

@layer base {
  /* All design tokens now defined in design-system.css (single source of truth) */
  /* This layer only contains base HTML styling */

  body {
    background-color: var(--color-bg-base);
    color: var(--color-text-primary-token);
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-semibold tracking-tight;
  }

  h1 {
    @apply text-4xl lg:text-5xl;
  }

  h2 {
    @apply text-3xl lg:text-4xl;
  }

  h3 {
    @apply text-2xl lg:text-3xl;
  }

  h4 {
    @apply text-xl lg:text-2xl;
  }

  h5 {
    @apply text-lg lg:text-xl;
  }

  h6 {
    @apply text-base lg:text-lg;
  }
}

/* ============================================
   COLOR UTILITY BRIDGES - MIGRATED TO THEME
   ============================================
   These utilities are now available via theme.extend.colors:
   - bg-base (via colors.base)
   - text-accent (via colors.accent)
   - bg-accent (via colors.accent)
   - border-subtle, border-default, border-strong (via borderColor)
   - border-accent (via borderColor.accent)
   - ring-accent (Tailwind auto-generates from colors.accent)
*/

/* Safe utilities with hardcoded fallbacks for critical above-the-fold content */
@layer components {
  .bg-base-safe {
    background-color: #f6f6f6;
    background-color: var(--color-bg-base, #f6f6f6);
  }

  .text-primary-safe {
    color: #0c0c0c;
    color: var(--color-text-primary-token, #0c0c0c);
  }

  :root.dark .bg-base-safe {
    background-color: #090909;
    background-color: var(--color-bg-base, #090909);
  }

  :root.dark .text-primary-safe {
    color: #f4f4f5;
    color: var(--color-text-primary-token, #f4f4f5);
  }

  /* Legacy aliases for backwards compatibility */
  .text-accent-token {
    color: var(--color-accent);
  }

  .text-color-accent {
    color: var(--color-accent);
  }

  .bg-color-accent {
    background-color: var(--color-accent);
  }

  .bg-bg-base {
    background-color: var(--color-bg-base);
  }

  .bg-bg-surface-1 {
    background-color: var(--color-bg-surface-1);
  }
}

/* ============================================
   SKELETON LOADING COMPONENT
   ============================================ */

@layer components {
  .skeleton {
    background-color: var(--color-skeleton-base);
    background-image: linear-gradient(
      90deg,
      transparent,
      var(--color-skeleton-shimmer),
      transparent
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;

    /* Reduced motion: show static background instead of shimmer animation */
    @media (prefers-reduced-motion: reduce) {
      animation: none;
      background-image: none;
    }
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }

  100% {
    background-position: 200% 0;
  }
}

/* ============================================
   ANIMATION COMPONENTS
   ============================================ */

@layer components {
  /* Preview update animation */
  .animate-shimmer {
    animation: shimmer 1.5s ease-in-out infinite;

    /* Reduced motion: disable shimmer animation */
    @media (prefers-reduced-motion: reduce) {
      animation: none;
    }
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.5s ease-out;
  }

  .animate-pulse-slow {
    animation: pulse-slow 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .animate-scroll-infinite {
    animation: scroll-infinite 30s linear infinite;

    @media (prefers-reduced-motion: reduce) {
      animation: none;
    }
  }

  /* Micro-animations */
  .card-hover {
    @apply transform transition-all duration-200 ease-out hover:-translate-y-1 hover:shadow-lg hover:shadow-gray-200/25 dark:hover:shadow-gray-900/25;
  }

  .input-focus-glow {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:shadow-lg transition-all duration-200;
    --tw-ring-color: var(--color-accent);
  }

  .btn-press {
    @apply transform transition-transform duration-100 ease-out active:scale-95;
  }

  /* Chat empty state â€” refined depth & motion */
  .chat-logo-mark {
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.06),
      0 2px 4px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.06);
  }

  .chat-pill {
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.03);
    transition:
      box-shadow 200ms cubic-bezier(0.16, 1, 0.3, 1),
      transform 200ms cubic-bezier(0.16, 1, 0.3, 1),
      border-color 200ms ease-out,
      background-color 200ms ease-out;
  }

  .chat-pill:hover {
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.25),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }

  .chat-pill:active {
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.03);
  }

  .chat-card {
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.12),
      inset 0 1px 0 rgba(255, 255, 255, 0.03);
  }

  .chat-stagger > * {
    animation: chat-enter 0.45s cubic-bezier(0.16, 1, 0.3, 1) both;
  }

  .chat-stagger > *:nth-child(1) {
    animation-delay: 0ms;
  }

  .chat-stagger > *:nth-child(2) {
    animation-delay: 80ms;
  }

  .chat-stagger > *:nth-child(3) {
    animation-delay: 160ms;
  }

  .chat-stagger > *:nth-child(4) {
    animation-delay: 240ms;
  }

  .chat-stagger > *:nth-child(5) {
    animation-delay: 320ms;
  }
}

@keyframes chat-enter {
  from {
    opacity: 0;
    transform: translateY(6px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  .chat-stagger > * {
    animation: none;
    opacity: 1;
  }
}

/* Keyframes */
@keyframes mobile-nav-item-in {
  from {
    opacity: 0;
    transform: translateY(8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(4px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse-slow {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

@keyframes scroll-infinite {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

/* Motion preference utility for accessibility */
@media (prefers-reduced-motion: reduce) {
  .transition-all,
  .transform,
  [data-state] {
    transition-duration: 0.01ms !important;
    animation-duration: 0.01ms !important;
  }
}

/* ============================================
   SONNER TOAST OVERRIDES
   ============================================
   Override Sonner's internal CSS variables so toasts
   use design-system tokens instead of harsh defaults.
*/

[data-sonner-toaster] {
  --normal-bg: var(--color-bg-surface-2);
  --normal-text: var(--color-text-primary-token);
  --normal-border: var(--color-border-default);

  --success-bg: var(--color-bg-surface-2);
  --success-text: var(--color-text-primary-token);
  --success-border: var(--color-success);

  --error-bg: var(--color-bg-surface-2);
  --error-text: var(--color-text-primary-token);
  --error-border: var(--color-error);

  --warning-bg: var(--color-bg-surface-2);
  --warning-text: var(--color-text-primary-token);
  --warning-border: var(--color-warning);

  --info-bg: var(--color-bg-surface-2);
  --info-text: var(--color-text-primary-token);
  --info-border: var(--color-info);
}

[data-sonner-toast] {
  --border-radius: var(--linear-radius-lg);
  box-shadow: var(--shadow-lg);
  font-family: var(--font-sans), system-ui, sans-serif;
  font-feature-settings: var(--linear-font-features);
  font-variation-settings: "opsz" var(--linear-font-optical-sizing);
  letter-spacing: var(--linear-tracking-body);
}

[data-sonner-toast] [data-title] {
  font-weight: var(--linear-font-weight-semibold);
  font-size: 0.875rem;
  line-height: var(--linear-leading-relaxed);
  letter-spacing: var(--linear-tracking-subheadline);
  color: var(--color-text-primary-token);
}

[data-sonner-toast] [data-description] {
  color: var(--color-text-secondary-token);
  font-weight: var(--linear-font-weight-normal);
  font-size: 0.8125rem;
  line-height: var(--linear-leading-normal);
  letter-spacing: var(--linear-tracking-body);
  margin-top: 2px;
}

[data-sonner-toast] [data-close-button] {
  background: var(--color-bg-surface-1);
  border-color: var(--color-border-subtle);
  color: var(--color-text-tertiary-token);
  border-radius: var(--linear-radius-sm);
  transition:
    background 150ms ease,
    color 150ms ease;
}

[data-sonner-toast] [data-close-button]:hover {
  background: var(--color-bg-surface-0);
  color: var(--color-text-primary-token);
}

[data-sonner-toast] [data-button] {
  font-weight: var(--linear-font-weight-medium);
  font-size: 0.8125rem;
  line-height: 1.25;
  border-radius: var(--linear-radius-sm);
  padding: 6px 12px;
  margin-top: 8px;
  transition:
    opacity 150ms ease,
    background-color 150ms ease,
    border-color 150ms ease;
}

/* Type-specific left-border accent */
[data-sonner-toast][data-type="success"] {
  border-left: 3px solid var(--color-success);
}

[data-sonner-toast][data-type="error"] {
  border-left: 3px solid var(--color-error);
}

[data-sonner-toast][data-type="warning"] {
  border-left: 3px solid var(--color-warning);
}

[data-sonner-toast][data-type="info"] {
  border-left: 3px solid var(--color-info);
}

@media print {
  @page {
    margin: 18mm;
  }

  html[data-doc-page="true"],
  html[data-doc-page="true"] body {
    background: #ffffff !important;
    color: #000000 !important;
    height: auto !important;
    overflow: visible !important;
  }

  html[data-doc-page="true"] main {
    height: auto !important;
    overflow: visible !important;
  }

  html[data-doc-page="true"] .min-h-screen,
  html[data-doc-page="true"] .h-screen {
    min-height: auto !important;
    height: auto !important;
  }

  html[data-doc-page="true"] .overflow-hidden {
    overflow: visible !important;
  }

  html[data-doc-page="true"] [data-testid="header-nav"],
  html[data-doc-page="true"] footer,
  html[data-doc-page="true"] [data-doc-toolbar],
  html[data-doc-page="true"] [data-doc-sidebar] {
    display: none !important;
  }

  html[data-doc-page="true"] a {
    color: #000000 !important;
    text-decoration: underline !important;
    text-underline-offset: 3px;
  }

  html[data-doc-page="true"] * {
    box-shadow: none !important;
    text-shadow: none !important;
  }
}

/* ============================================
   AUTH LOGO ANIMATION
   ============================================ */

@layer components {
  .animate-logo-spin {
    animation: logo-spin 1.2s ease-in-out 0s 1 forwards;
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-logo-spin {
      animation: none !important;
    }
  }
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Claim handle shake and available animations */
@keyframes jv-shake {
  0%,
  100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-2px);
  }
  50% {
    transform: translateX(2px);
  }
  75% {
    transform: translateX(-2px);
  }
}

@keyframes jv-available-pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
  }
  70% {
    box-shadow: 0 0 0 8px rgba(16, 185, 129, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
  }
}

@keyframes jv-available-fade {
  0% {
    opacity: 0.7;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 1;
  }
}

.jv-shake {
  animation: jv-shake 150ms ease-in-out;
}

.jv-available {
  box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.35);
  animation: jv-available-pulse 900ms ease-out 1;
}

/* Reduced motion: disable shake, use opacity fade instead of box-shadow pulse */
@media (prefers-reduced-motion: reduce) {
  .jv-shake {
    animation: none;
  }
  .jv-available {
    box-shadow: none;
    animation: jv-available-fade 900ms ease-out 1;
  }
}

/* Parallax grid item hover styles */
.grid-item {
  transition:
    transform 0.3s ease-out,
    box-shadow 0.3s ease-out;
  transform-style: preserve-3d;
}

.grid-item:hover {
  transform: translateY(-2px) translateZ(10px);
  box-shadow:
    0 10px 25px -5px rgba(0, 0, 0, 0.1),
    0 8px 10px -6px rgba(0, 0, 0, 0.1);
}

@media (prefers-reduced-motion: reduce) {
  .grid-item {
    transition: none;
  }
  .grid-item:hover {
    transform: none;
    box-shadow: none;
  }
}

@theme inline {
  --color-sidebar: rgb(var(--sidebar-background));
  --color-sidebar-foreground: rgb(var(--sidebar-foreground));
  --color-sidebar-primary: rgb(var(--sidebar-primary));
  --color-sidebar-primary-foreground: rgb(var(--sidebar-primary-foreground));
  --color-sidebar-accent: rgb(var(--sidebar-accent));
  --color-sidebar-accent-foreground: rgb(var(--sidebar-accent-foreground));
  --color-sidebar-border: rgb(var(--sidebar-border));
  --color-sidebar-ring: rgb(var(--sidebar-ring));

  --color-sidebar-muted: rgb(var(--sidebar-muted));
  --color-sidebar-muted-foreground: rgb(var(--sidebar-muted-foreground));
  --color-sidebar-surface: rgb(var(--sidebar-surface));
  --color-sidebar-surface-hover: rgb(var(--sidebar-surface-hover));
  --color-sidebar-input-background: rgb(var(--sidebar-input-background));
  --color-sidebar-input-border: rgb(var(--sidebar-input-border));
  --color-sidebar-item-foreground: rgb(var(--sidebar-item-foreground));
  --color-sidebar-item-icon: rgb(var(--sidebar-item-icon));
  --color-sidebar-accent-active: rgb(var(--sidebar-accent-active));

  /* Additional surface tokens â€” generates bg-surface-page, bg-surface-hover, etc. */
  --color-surface-page: var(--color-bg-page);
  --color-surface-hover: var(--color-bg-hover);
  --color-surface-elevated: var(--color-bg-elevated);
  --color-surface-input: var(--color-bg-input);
  --color-surface-active: var(--color-bg-active);
  --color-surface-button: var(--color-bg-button);

  /* Additional semantic tokens for shadcn components */
  --color-foreground: var(--color-text-primary-token);
  --color-muted-foreground: var(--color-text-secondary-token);

  /* Text hierarchy â€” enables text-primary-token, text-secondary-token, etc. */
  --color-primary-token: var(--color-text-primary-token);
  --color-secondary-token: var(--color-text-secondary-token);
  --color-tertiary-token: var(--color-text-tertiary-token);
  --color-quaternary-token: var(--color-text-quaternary-token);
  --color-disabled-token: var(--color-text-disabled-token);

  /* Interactive states â€” self-referential aliases expose existing CSS vars to Tailwind v4 color system */
  --color-interactive-hover: var(--color-interactive-hover);
  --color-interactive-active: var(--color-interactive-active);

  /* Logo muted tokens for label logos bar */
  --color-logo-muted: var(--color-logo-muted);
  --color-logo-muted-hover: var(--color-logo-muted-hover);

  /* Badge tokens â€” extracted from Linear marketing demo */
  --color-badge-bg: var(--color-badge-bg);
  --color-badge-border: var(--color-badge-border);
  --color-badge-text: var(--color-badge-text);

  /* Semantic status tokens â€” enables bg-success, text-success, border-success, etc. */
  --color-success: var(--color-success);
  --color-success-subtle: var(--color-success-subtle);
  --color-warning: var(--color-warning);
  --color-warning-subtle: var(--color-warning-subtle);
  --color-info: var(--color-info);
  --color-info-subtle: var(--color-info-subtle);
  --color-error-subtle: var(--color-error-subtle);

  /* Accent token â€” enables bg-accent-subtle, text-accent, border-accent */
  --color-accent: var(--color-accent);
  --color-accent-subtle: var(--color-accent-subtle);
}
