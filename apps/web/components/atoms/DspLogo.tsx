'use client';

import { memo } from 'react';
import type { ProviderKey, VideoProviderKey } from '@/lib/discography/types';

interface DspLogoProps {
  readonly provider: ProviderKey;
  readonly className?: string;
  /** Height of the logo in pixels. Width scales proportionally. */
  readonly height?: number;
}

/**
 * Brand logo configuration for each music DSP.
 * SVG paths sourced from official brand guidelines / simple-icons.
 * viewBox is always "0 0 24 24" for the icon portion.
 */
const DSP_LOGO_CONFIG: Record<
  ProviderKey,
  { name: string; color: string; iconPath: string }
> = {
  spotify: {
    name: 'Spotify',
    color: '#1DB954',
    iconPath:
      'M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.48.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.32 11.28-1.08 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z',
  },
  apple_music: {
    name: 'Apple Music',
    color: '#FA243C',
    iconPath:
      'M23.994 6.124a9.23 9.23 0 00-.24-2.19c-.317-1.31-1.062-2.31-2.18-3.043a5.022 5.022 0 00-1.877-.726 10.496 10.496 0 00-1.564-.15c-.04-.003-.083-.01-.124-.013H5.986c-.152.01-.303.017-.455.026-.747.043-1.49.123-2.193.4-1.336.53-2.3 1.452-2.865 2.78-.192.448-.292.925-.363 1.408-.056.392-.088.785-.1 1.18 0 .032-.007.062-.01.093v12.223c.01.14.017.283.027.424.05.815.154 1.624.497 2.373.65 1.42 1.738 2.353 3.234 2.801.42.127.856.187 1.293.228.555.053 1.11.06 1.667.06h11.03a12.5 12.5 0 001.57-.1c.822-.106 1.596-.35 2.295-.81a5.046 5.046 0 001.88-2.207c.186-.42.293-.87.37-1.324.113-.675.138-1.358.137-2.04-.002-3.8 0-7.595-.003-11.393zm-6.423 3.99v5.712c0 .417-.058.827-.244 1.206-.29.59-.76.962-1.388 1.14-.35.1-.706.157-1.07.173-.95.045-1.773-.6-1.943-1.536a1.88 1.88 0 011.038-2.022c.323-.16.67-.25 1.018-.324.378-.082.758-.153 1.134-.24.274-.063.457-.23.51-.516a.904.904 0 00.02-.193c0-1.815 0-3.63-.002-5.443a.725.725 0 00-.026-.185c-.04-.15-.15-.243-.304-.234-.16.01-.318.035-.475.066-.76.15-1.52.303-2.28.456l-2.325.47-1.374.278c-.016.003-.032.01-.048.013-.277.077-.377.203-.39.49-.002.042 0 .086 0 .13-.002 2.602 0 5.204-.003 7.805 0 .42-.047.836-.215 1.227-.278.64-.77 1.04-1.434 1.233-.35.1-.71.16-1.075.172-.96.036-1.755-.6-1.92-1.544-.14-.812.23-1.685 1.154-2.075.357-.15.73-.232 1.108-.31.287-.06.575-.116.86-.177.383-.083.583-.323.6-.714v-.15c0-2.96 0-5.922.002-8.882 0-.123.013-.25.042-.37.07-.285.273-.448.546-.518.255-.066.515-.112.774-.165.733-.15 1.466-.296 2.2-.444l2.27-.46c.67-.134 1.34-.27 2.01-.403.22-.043.442-.088.663-.106.31-.025.523.17.554.482.008.073.012.148.012.223.002 1.91.002 3.822 0 5.732z',
  },
  youtube: {
    name: 'YouTube Music',
    color: '#FF0000',
    iconPath:
      'M12 0C5.376 0 0 5.376 0 12s5.376 12 12 12 12-5.376 12-12S18.624 0 12 0zm0 19.104c-3.924 0-7.104-3.18-7.104-7.104S8.076 4.896 12 4.896s7.104 3.18 7.104 7.104-3.18 7.104-7.104 7.104zm0-13.332c-3.432 0-6.228 2.796-6.228 6.228S8.568 18.228 12 18.228 18.228 15.432 18.228 12 15.432 5.772 12 5.772zM9.684 15.54V8.46L15.816 12l-6.132 3.54z',
  },
  soundcloud: {
    name: 'SoundCloud',
    color: '#FF5500',
    iconPath:
      'M1.175 12.225c-.051 0-.094.046-.101.1l-.233 2.154.233 2.105c.007.058.05.098.101.098.05 0 .09-.04.099-.098l.255-2.105-.27-2.154c-.009-.06-.05-.1-.1-.1m-.899.828c-.06 0-.091.037-.104.094L0 14.479l.172 1.308c.013.06.045.094.104.094.053 0 .09-.04.09-.094l.199-1.308-.2-1.332c0-.06-.036-.094-.09-.094m1.835-1.585c-.067 0-.12.06-.12.12l-.214 2.89.214 2.763c.008.06.053.12.12.12.06 0 .105-.061.112-.12l.239-2.763-.239-2.89c-.007-.06-.052-.12-.112-.12m.862-.201c-.075 0-.135.06-.15.135l-.196 3.091.196 2.858c.008.075.068.135.15.135.074 0 .127-.06.142-.135l.218-2.858-.218-3.091c-.015-.075-.068-.135-.142-.135m.86-.135c-.09 0-.158.068-.158.158l-.182 3.226.189 2.903c0 .09.068.158.158.158.082 0 .15-.068.15-.158l.21-2.903-.21-3.226c-.008-.09-.075-.158-.158-.158m.87-.156c-.09 0-.165.075-.172.165l-.175 3.382.175 2.926c.007.097.082.172.172.172.09 0 .157-.075.164-.172l.196-2.926-.196-3.382c-.007-.09-.074-.165-.164-.165m.86-.105c-.098 0-.18.082-.18.18l-.176 3.487.176 2.94c0 .098.082.18.18.18.097 0 .172-.082.172-.18l.203-2.94-.203-3.487c0-.098-.075-.18-.172-.18m.877-.112c-.105 0-.195.09-.195.195l-.16 3.6.16 2.94c0 .105.09.195.195.195.097 0 .187-.09.187-.195l.186-2.94-.186-3.6c0-.105-.09-.195-.195-.195m.87-.015c-.113 0-.21.098-.21.21l-.152 3.614.152 2.932c.007.113.097.21.21.21.112 0 .202-.097.21-.21l.172-2.932-.173-3.614c-.007-.112-.097-.21-.21-.21m.89.075c-.12 0-.222.105-.222.225l-.145 3.539.145 2.918c.007.12.105.225.222.225.12 0 .217-.105.217-.225l.166-2.918-.166-3.539c0-.12-.097-.225-.217-.225m.855-.345c-.12 0-.232.112-.232.232l-.127 3.884.127 2.891c0 .12.112.232.232.232.127 0 .225-.112.232-.232l.142-2.891-.142-3.884c-.007-.12-.105-.232-.232-.232m.897-.172c-.135 0-.247.112-.247.247l-.128 4.056.128 2.879c.008.135.113.248.248.248.128 0 .24-.113.24-.248l.15-2.879-.15-4.056c0-.135-.112-.247-.248-.247m.86.037c-.142 0-.26.12-.26.26l-.12 4.019.12 2.858c.008.142.12.26.26.26.15 0 .262-.12.262-.26l.136-2.858-.136-4.02c0-.14-.112-.259-.262-.259m.89-.6c-.15 0-.277.127-.277.277l-.114 4.62.114 2.835c.007.15.127.277.277.277.143 0 .263-.127.27-.277l.13-2.835-.13-4.62c-.007-.15-.127-.277-.27-.277m.855.06c-.152 0-.285.127-.285.285l-.107 4.56.107 2.813c.008.15.135.285.285.285.157 0 .285-.135.285-.285l.12-2.813-.12-4.56c0-.158-.128-.285-.285-.285m.882-.105c-.158 0-.293.135-.293.293l-.112 4.665.112 2.805c.008.158.135.293.293.293.165 0 .293-.135.3-.293l.118-2.805-.118-4.665c-.007-.158-.135-.293-.3-.293m.87-.143c-.165 0-.3.135-.3.3l-.098 4.808.098 2.79c.007.165.135.3.3.3.158 0 .293-.135.293-.3l.12-2.79-.12-4.808c0-.165-.135-.3-.293-.3m2.633-1.904c-.225 0-.405.18-.405.405l-.089 6.707.089 2.737c.008.225.188.405.405.405.225 0 .405-.18.412-.405l.098-2.737-.098-6.707c-.007-.225-.187-.405-.412-.405m-.87.442c-.218 0-.397.18-.397.397l-.098 6.265.098 2.76c.008.218.18.398.398.398.217 0 .39-.18.397-.398l.113-2.76-.113-6.265c-.007-.218-.18-.398-.397-.398m1.742-1.117c-.24 0-.42.18-.42.42l-.075 7.324.075 2.715c0 .24.18.42.42.42.24 0 .42-.18.42-.42l.09-2.715-.09-7.324c0-.24-.18-.42-.42-.42m.877.277c-.248 0-.45.203-.45.45l-.075 7.048.075 2.692c.008.248.203.45.45.45.248 0 .45-.202.45-.45l.082-2.692-.082-7.047c0-.248-.202-.45-.45-.45m.87-.397c-.255 0-.458.203-.458.457l-.068 7.445.068 2.67c.007.255.21.458.458.458.247 0 .45-.203.457-.458l.076-2.67-.076-7.445c-.007-.255-.21-.458-.457-.458m2.643-1.345c-.263 0-.48.217-.48.48l-.06 8.79.06 2.625c.007.263.217.48.48.48.27 0 .48-.217.48-.48l.068-2.625-.068-8.79c0-.263-.21-.48-.48-.48m-.87.592c-.27 0-.48.21-.48.48l-.06 8.198.06 2.647c.008.27.218.48.48.48.27 0 .48-.21.48-.48l.068-2.647-.068-8.198c0-.27-.21-.48-.48-.48m1.742-.75c-.27 0-.495.225-.495.495l-.053 8.948.053 2.603c.008.27.225.495.495.495.27 0 .495-.225.495-.495l.06-2.603-.06-8.948c0-.27-.225-.495-.495-.495m.87-.18c-.277 0-.502.225-.502.502l-.045 9.128.045 2.58c.007.278.225.503.502.503.278 0 .503-.225.503-.503l.052-2.58-.052-9.128c0-.277-.225-.502-.503-.502m.87-.18c-.285 0-.51.225-.51.51l-.045 9.308.045 2.557c.007.285.225.51.51.51.285 0 .51-.225.51-.51l.052-2.558-.052-9.307c0-.285-.225-.51-.51-.51m.87.18c-.285 0-.51.225-.51.51l-.037 9.128.037 2.535c.008.285.225.51.518.51.285 0 .51-.225.51-.51l.044-2.535-.044-9.128c-.008-.285-.233-.51-.518-.51m2.174-1.77c-.21-.06-.427-.098-.652-.098-.292 0-.57.06-.832.165-.105.045-.165.142-.165.27l-.037 10.733.022.12.015 2.415c.007.293.24.518.525.518a.516.516 0 00.518-.502l.045-2.558-.045-10.808c0-.142-.09-.262-.21-.3m.96 11.407c0-2.325-.39-4.545-1.087-6.63-.187-.555-.72-.945-1.32-.945-.36 0-.682.143-.915.383-.232.247-.375.578-.375.945l-.022 6.247.022 2.467c.015.72.6 1.305 1.32 1.305.72 0 1.297-.585 1.312-1.268l.068-2.504-.068-6.247z',
  },
  deezer: {
    name: 'Deezer',
    color: '#A238FF',
    iconPath:
      'M15.713 6.668h5.004v1.752h-5.004V6.668zM3.283 15.578h5.004v1.752H3.283v-1.752zm0-2.225h5.004v1.752H3.283v-1.752zm0-2.225h5.004v1.752H3.283V11.128zm6.215 4.45h5.004v1.752H9.498v-1.752zm0-2.225h5.004v1.752H9.498v-1.752zm0-2.225h5.004v1.752H9.498V11.128zm0-2.231h5.004v1.752H9.498V8.897zm6.215 6.681h5.004v1.752h-5.004v-1.752zm0-2.225h5.004v1.752h-5.004v-1.752zm0-2.225h5.004v1.752h-5.004V11.128zm0-2.231h5.004v1.752h-5.004V8.897zm0-2.229h5.004V8.42h-5.004V6.668z',
  },
  tidal: {
    name: 'TIDAL',
    color: '#000000',
    iconPath:
      'M12.012 3.992L8.008 7.996 4.004 3.992 0 7.996l4.004 4.004 4.004-4.004 4.004 4.004-4.004 4.004 4.004 4.004 4.004-4.004-4.004-4.004 4.004-4.004 4.004 4.004 4.004-4.004L20 3.992l-3.996 4.004z',
  },
  amazon_music: {
    name: 'Amazon Music',
    color: '#00A8E1',
    iconPath:
      'M17.422 13.487c-.096-.075-.225-.04-.258.06-.779 1.575-2.424 2.217-4.462 2.217-2.279 0-4.688-1.142-4.688-3.684 0-2.67 2.069-3.996 4.39-4.2 2.505-.216 3.564.3 4.724.696.12.036.24-.06.24-.18V7.5c0-.336-.012-.612-.18-.9-.66-1.152-1.968-1.656-3.384-1.656-2.556 0-4.392 1.452-4.392 1.452a.24.24 0 01-.348-.036l-.432-.588a.246.246 0 01.024-.336S10.476 3.96 13.5 3.96c1.392 0 2.916.348 3.876 1.332.732.768.876 1.716.876 2.832v5.076c0 .42.18.54.36.744.06.072.072.168-.012.228l-1.02.876c-.06.06-.168.072-.24.012l-.918-.816a.48.48 0 00-.336-.144c-.144 0-.264.048-.36.132-.3.264-.828.756-1.068.96a.18.18 0 01-.228-.012l-.756-.66a.216.216 0 01-.012-.312c.012-.012.432-.408.768-.72zm-.42-3.06c0-.552.012-1.008-.264-1.488-.336-.6-1.008-1.02-1.824-1.02-2.016 0-3.036 1.572-3.036 3.456 0 2.22 1.356 3.312 2.832 3.312 1.044 0 1.944-.66 2.292-1.452V10.428zM21.9 17.46c-.084-.132-.276-.18-.456-.084-1.308.66-2.7 1.02-3.924 1.02-4.332 0-7.56-2.784-7.56-6.648 0-3.18 2.124-6.384 6.132-6.384 1.212 0 2.58.336 3.612.984.12.072.288.012.312-.132l.144-.78a.24.24 0 00-.108-.264C18.9 4.44 17.46 3.96 15.66 3.96c-5.4 0-8.4 3.768-8.4 7.896 0 4.476 3.588 7.8 8.352 7.8 1.776 0 3.564-.492 4.908-1.272a.228.228 0 00.096-.3l-.06-.108c-.204-.396-.36-.132-.66.048 0 0 .084.024 0 0zm1.38 2.16c-.108-.18-.636-.228-.984-.108-.348.108-.876.444-.78.66.048.084.132.048.324.024.192-.036.72-.12 1.008.036.288.168.168.552.12.648-.06.108-.072.144.036.12.108-.012.408-.18.552-.468.156-.3.06-.768-.276-.912zM21.48 21c-.516.432-1.26.624-1.836.624-.24 0-.42-.024-.444-.048-.024-.024-.012-.036.024-.06a21.9 21.9 0 011.536-.696c.228-.108.192-.264-.036-.252a5.16 5.16 0 01-2.172-.42c-.12-.06-.228-.012-.168.108.36.768 1.26 1.272 2.304 1.272.372 0 .66-.048.852-.132.252-.12.18-.324-.06-.396z',
  },
  bandcamp: {
    name: 'Bandcamp',
    color: '#629AA0',
    iconPath: 'M0 18.75l7.437-13.5H24l-7.438 13.5H0z',
  },
  beatport: {
    name: 'Beatport',
    color: '#A3E422',
    iconPath:
      'M21.429 13.18a2.274 2.274 0 01-2.274 2.277h-1.356a5.612 5.612 0 01-5.607 5.399A5.612 5.612 0 016.586 15.6H5.04V13.18h1.404a5.612 5.612 0 015.748-5.541 5.613 5.613 0 015.607 5.541h1.356c.18 0 .349-.024.51-.066v.066h1.764zm-9.237-3.224a3.226 3.226 0 00-3.225 3.224 3.226 3.226 0 003.225 3.227 3.226 3.226 0 003.226-3.227 3.226 3.226 0 00-3.226-3.224zm0 4.866a1.643 1.643 0 01-1.641-1.642c0-.905.735-1.64 1.641-1.64.906 0 1.642.735 1.642 1.64 0 .907-.736 1.642-1.642 1.642zm9.237-8.49h-1.764v2.4a2.274 2.274 0 01-.51-.066h-1.356a5.573 5.573 0 00-1.608-3.09V3.144h-1.764v1.488A5.588 5.588 0 0012.192 3.6a5.588 5.588 0 00-2.235 1.032V3.144H8.193v2.432a5.573 5.573 0 00-1.608 3.09H5.04V6.332H3.276v8.424h1.764v-.846h1.404a5.576 5.576 0 001.608 3.09v2.432h1.764V17.94a5.59 5.59 0 002.235 1.032v1.488h1.764v-1.488a5.59 5.59 0 002.236-1.032v1.492h1.764v-2.432a5.576 5.576 0 001.607-3.09h1.357a2.28 2.28 0 002.274-2.278V6.332z',
  },
};

function DspLogoInner({
  provider,
  className = '',
  height = 20,
}: Readonly<DspLogoProps>) {
  const config = DSP_LOGO_CONFIG[provider];
  if (!config) return null;

  const iconSize = height;
  const fontSize = height * 0.75;

  return (
    <span
      className={`inline-flex items-center gap-1.5 ${className}`}
      style={{ color: config.color }}
    >
      <svg
        viewBox='0 0 24 24'
        fill='currentColor'
        width={iconSize}
        height={iconSize}
        aria-hidden='true'
        className='shrink-0'
      >
        <path d={config.iconPath} />
      </svg>
      <span
        className='font-semibold whitespace-nowrap leading-none'
        style={{ fontSize }}
      >
        {config.name}
      </span>
    </span>
  );
}

export const DspLogo = memo(DspLogoInner);
DspLogo.displayName = 'DspLogo';

/**
 * Brand logo configuration for video providers (short-form "Use this sound").
 * Separate from DSP_LOGO_CONFIG since these are video platforms, not music DSPs.
 */
const VIDEO_LOGO_CONFIG: Record<
  VideoProviderKey,
  { name: string; color: string; iconPath: string }
> = {
  tiktok_sound: {
    name: 'TikTok',
    color: '#000000',
    iconPath:
      'M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z',
  },
  instagram_reels: {
    name: 'Instagram',
    color: '#E4405F',
    iconPath:
      'M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678a6.162 6.162 0 100 12.324 6.162 6.162 0 100-12.324zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405a1.441 1.441 0 11-2.882 0 1.441 1.441 0 012.882 0z',
  },
  youtube_shorts: {
    name: 'YouTube Shorts',
    color: '#FF0000',
    iconPath: DSP_LOGO_CONFIG.youtube.iconPath,
  },
};

export { DSP_LOGO_CONFIG, VIDEO_LOGO_CONFIG };
